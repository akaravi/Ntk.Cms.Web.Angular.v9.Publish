import{a as Kt}from"./chunk-47PHHDP6.js";import{a as zt}from"./chunk-TXZCIRAD.js";import{a as Qt}from"./chunk-E4XZ7LSV.js";import{b as Jt}from"./chunk-N3J6V5RZ.js";import{a as Ae}from"./chunk-3LVNQTYE.js";import{Ad as Wt,C as lt,Cc as Nt,F as ge,G as _e,Gb as bt,Gd as qt,H as Ce,Hb as vt,Kb as Mt,L as be,La as Ie,M as ve,Ma as we,Na as ft,O as ct,P as dt,Sc as Bt,Ta as ye,Tc as Pt,Ub as It,Vb as wt,Wa as W,Wb as yt,Xb as Et,Yb as Tt,Zb as At,aa as Me,bd as Te,da as pt,ec as Rt,fc as xt,gc as Gt,hc as Dt,hd as Ht,ic as Ut,jc as Vt,kc as Lt,lc as kt,m as st,mc as Ft,nb as V,nc as Ot,p as X,s as j,sa as ut,sb as Ct,t as ue,tb as L,td as jt,v as fe,vb as z,w as he,x as Y,y as Se}from"./chunk-X7QSBRRR.js";import{b as N,c as Z,p as ke}from"./chunk-3CILL3O3.js";import{Aa as J,Ab as De,Cd as gt,Db as le,Dc as nt,Dd as B,Eb as ce,Fb as de,Fc as rt,Hd as oe,Ib as G,Id as $,Jd as Ee,Kb as p,L as Qe,La as r,Lb as w,Lc as at,Ma as f,Mb as g,Nb as pe,O as ze,Qb as A,Qd as q,Rb as R,Sb as x,Ud as _t,Vb as tt,W as Je,Wb as it,X as Ke,Yb as b,Za as K,Zb as v,ab as C,aq as ee,bb as Xe,cb as u,da as ae,de as U,eb as Ye,ff as D,g as je,gc as O,hd as mt,ja as F,ka as se,kd as Ue,lb as l,ld as Ve,mb as c,nb as I,ob as E,pb as T,qb as Ze,qd as Le,ra as h,rb as y,sa as S,td as ht,u as We,ub as M,v as qe,vd as ie,wb as _,xb as $e,xc as ot,yb as et,yc as me,zb as P,zc as H,zd as St}from"./chunk-AFRBUGB6.js";var oi=["vform"];function ni(o,n){if(o&1){let a=y();l(0,"app-cms-enum-record-status-selector",20),x("modelChange",function(i){h(a);let e=_();return R(e.dataModel.recordStatus,i)||(e.dataModel.recordStatus=i),S(i)}),c()}if(o&2){let a=_();A("model",a.dataModel.recordStatus),u("optionDisabled",!1)("optionLabel",a.fieldsInfo.recordStatus==null?null:a.fieldsInfo.recordStatus.fieldTitle)("optionRequired",!0)("optionSelectFirstItem",!0)}}function ri(o,n){if(o&1&&(l(0,"option",21),p(1),c()),o&2){let a=n.$implicit;u("value",a.value),r(),pe(" ",a.description," (",a.key,") ")}}function ai(o,n){o&1&&(l(0,"mat-error"),p(1," UserType is "),l(2,"strong"),p(3),b(4,"translate"),c()()),o&2&&(r(3),w(v(4,1,"MESSAGE.required")))}function si(o,n){if(o&1&&(l(0,"mat-error"),p(1),l(2,"strong"),p(3),b(4,"translate"),c()()),o&2){let a=_();r(),g(" ",a.fieldsInfo.title==null?null:a.fieldsInfo.title.fieldTitle," is "),r(2),w(v(4,2,"MESSAGE.required"))}}function li(o,n){o&1&&(l(0,"mat-error"),p(1," Description is "),l(2,"strong"),p(3),b(4,"translate"),c()()),o&2&&(r(3),w(v(4,1,"MESSAGE.required")))}function ci(o,n){if(o&1){let a=y();l(0,"div",22)(1,"button",23),M("click",function(){h(a);let i=_();return S(i.onFormCancel())}),I(2,"i",24),p(3),b(4,"translate"),c(),l(5,"button",25),I(6,"i",26),p(7),b(8,"translate"),c()()}if(o&2){_();let a=G(9);r(3),g(" ",v(4,3,"ACTION.CANCEL")," "),r(2),u("disabled",!a.form.valid),r(2),g(" ",v(8,5,"ACTION.SAVE")," ")}}var Be=(()=>{let n=class n extends Qt{constructor(t,i,e,d,m,s,k,Q){super(d,new D,s,Q),this.data=t,this.dialogRef=i,this.coreEnumService=e,this.coreUserGroupService=d,this.cmsToastrService=m,this.publicHelper=s,this.cdr=k,this.translate=Q,this.constructorInfoAreaId=this.constructor.name,this.fieldsInfo=new Map,this.selectFileTypeMainImage=["jpg","jpeg","png"],this.appLanguage="fa",this.dataModelResult=new B,this.dataModel=new D,this.formInfo=new Ee,this.dataModelEnumManageUserAccessUserTypesResult=new B,this.fileManagerOpenForm=!1,this.publicHelper.processService.cdr=this.cdr,this.fileManagerTree=this.publicHelper.GetfileManagerTreeConfig()}ngOnInit(){this.translate.get("TITLE.ADD").subscribe(t=>{this.formInfo.formTitle=t}),this.getEnumManageUserAccessUserTypes(),this.DataGetAccess()}getEnumManageUserAccessUserTypes(){this.coreEnumService.ServiceManageUserAccessUserTypesEnum().subscribe({next:t=>{this.dataModelEnumManageUserAccessUserTypesResult=t}})}DataAddContent(){this.translate.get("MESSAGE.sending_information_to_the_server").subscribe(i=>{this.formInfo.formAlert=i}),this.formInfo.formError="";let t=this.constructor.name+"main";this.translate.get("MESSAGE.Receiving_information").subscribe(i=>{this.publicHelper.processService.processStart(t,i,this.constructorInfoAreaId)}),this.coreUserGroupService.ServiceAdd(this.dataModel).subscribe({next:i=>{this.formInfo.formSubmitAllow=!0,this.dataModelResult=i,i.isSuccess?(this.translate.get("MESSAGE.registration_completed_successfully").subscribe(e=>{this.formInfo.formAlert=e}),this.cmsToastrService.typeSuccessAdd(),this.dialogRef.close({dialogChangedDate:!0})):(this.translate.get("ERRORMESSAGE.MESSAGE.typeError").subscribe(e=>{this.formInfo.formAlert=e}),this.formInfo.formError=i.errorMessage,this.cmsToastrService.typeErrorMessage(i.errorMessage)),this.publicHelper.processService.processStop(t)},error:i=>{this.formInfo.formSubmitAllow=!0,this.cmsToastrService.typeError(i),this.publicHelper.processService.processStop(t,!1)}})}onFormSubmit(){this.formGroup.valid&&(this.formInfo.formSubmitAllow=!1,this.DataAddContent())}onFormCancel(){this.dialogRef.close({dialogChangedDate:!1})}};n.\u0275fac=function(i){return new(i||n)(f(we),f(Ie),f(q),f(U),f(V),f(L),f(O),f(N))},n.\u0275cmp=F({type:n,selectors:[["app-core-usercategory-add"]],viewQuery:function(i,e){if(i&1&&le(oi,5),i&2){let d;ce(d=de())&&(e.formGroup=d.first)}},features:[K],decls:37,vars:23,consts:[["vform","ngForm"],["UserType","ngModel"],["Title",""],["Description",""],[1,"card","card-style","loader-container"],[3,"optionsInfoAreaId"],[1,"content","mb-0"],[1,"mb-0","color-highlight","font-600","font-12"],[3,"ngSubmit"],[3,"model","optionDisabled","optionLabel","optionRequired","optionSelectFirstItem","modelChange",4,"ngIf"],[1,"input-style","has-borders","input-style-always-active","validate-field","no-icon","mb-4"],["id","dataModel.userType","name","dataModel.userType",1,"form-control","validate-name",3,"ngModelChange","ngModel"],[3,"value",4,"*ngFor","*ngForOf"],[4,"ngIf"],[1,"input-style","has-borders","no-icon","input-style-always-active","validate-field","mb-4"],["for","dataModel.title",1,"color-highlight"],["matInput","","type","text","name","dataModel.title","minlength","3","maxlength","100","id","dataModel.title",1,"form-control","validate-name",3,"ngModelChange","ngModel","placeholder"],["for","dataModel.description",1,"color-highlight"],["matInput","","name","dataModel.description","type","text","minlength","1","maxlength","500","rows","5","id","dataModel.description",1,"form-control","validate-name",3,"ngModelChange","ngModel","placeholder"],["class","form-actions",4,"ngIf"],[3,"modelChange","model","optionDisabled","optionLabel","optionRequired","optionSelectFirstItem"],[3,"value"],[1,"form-actions"],["type","button",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-gray",3,"click"],[1,"ft-x"],["type","submit",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-green",3,"disabled"],[1,"fa","fa-check-square-o"]],template:function(i,e){if(i&1){let d=y();l(0,"div",4),I(1,"app-progress-spinner",5),l(2,"div",6)(3,"p",7),p(4),c(),l(5,"p"),p(6),b(7,"translate"),c(),l(8,"form",8,0),M("ngSubmit",function(){return h(d),S(e.onFormSubmit())}),C(10,ni,1,5,"app-cms-enum-record-status-selector",9),l(11,"div",10)(12,"select",11,1),x("ngModelChange",function(s){return h(d),R(e.dataModel.userType,s)||(e.dataModel.userType=s),S(s)}),C(14,ri,2,3,"option",12),c(),l(15,"em"),p(16),b(17,"translate"),c(),C(18,ai,5,3,"mat-error",13),c(),l(19,"div",14)(20,"label",15),p(21),c(),l(22,"input",16,2),x("ngModelChange",function(s){return h(d),R(e.dataModel.title,s)||(e.dataModel.title=s),S(s)}),c(),l(24,"em"),p(25),c(),C(26,si,5,4,"mat-error",13),c(),l(27,"div",14)(28,"label",17),p(29),c(),l(30,"textarea",18,3),x("ngModelChange",function(s){return h(d),R(e.dataModel.description,s)||(e.dataModel.description=s),S(s)}),p(32,"                "),c(),l(33,"em"),p(34),c(),C(35,li,5,3,"mat-error",13),c(),C(36,ci,9,7,"div",19),c()()()}if(i&2){let d=G(13),m=G(23),s=G(31);r(),u("optionsInfoAreaId",e.constructorInfoAreaId),r(3),g(" ",e.formInfo.formTitle," "),r(2),g(" ",v(7,19,"TITLE.Be_Careful_When_Entering_Information")," "),r(4),u("ngIf",e.fieldsInfo.recordStatus==null?null:e.fieldsInfo.recordStatus.accessWatchField),r(2),A("ngModel",e.dataModel.userType),r(2),u("*ngForOf",e.dataModelEnumManageUserAccessUserTypesResult.listItems),r(2),w(v(17,21,"TITLE.SELECT_STATUS")),r(2),u("ngIf",d.errors==null?null:d.errors.required),r(3),w(e.fieldsInfo.title==null?null:e.fieldsInfo.title.fieldTitle),r(),P("placeholder",e.fieldsInfo.title==null?null:e.fieldsInfo.title.fieldTitle),A("ngModel",e.dataModel.title),r(3),g("",m.value.length," / 100"),r(),u("ngIf",m.errors==null?null:m.errors.required),r(3),w(e.fieldsInfo.description==null?null:e.fieldsInfo.description.fieldTitle),r(),P("placeholder",e.fieldsInfo.description==null?null:e.fieldsInfo.description.fieldTitle),A("ngModel",e.dataModel.description),r(4),g("",s.value.length," / 500"),r(),u("ngIf",s.errors==null?null:s.errors.required),r(),u("ngIf",e.formInfo.formSubmitAllow)}},dependencies:[H,Se,_e,Ce,X,ge,j,ue,be,ve,Y,fe,Me,W,Te,z,Z],styles:[".form-body[_ngcontent-%COMP%]{width:500px}@media (max-width: 700px){.form-body[_ngcontent-%COMP%]{display:contents}}#file-manager[_ngcontent-%COMP%]{width:calc(100vw - 16px);height:calc(100vh - 16px)}.recordStatus-1.mat-select-panel[_ngcontent-%COMP%]{background:#ff0}.recordStatus-2.mat-select-panel[_ngcontent-%COMP%]{background:#000}.recordStatus-3.mat-select-panel[_ngcontent-%COMP%]{background:red}"]});let o=n;return o})();var di=["vform"];function pi(o,n){if(o&1){let a=y();l(0,"app-cms-enum-record-status-selector",20),x("modelChange",function(i){h(a);let e=_();return R(e.dataModel.recordStatus,i)||(e.dataModel.recordStatus=i),S(i)}),c()}if(o&2){let a=_();A("model",a.dataModel.recordStatus),u("optionDisabled",!1)("optionLabel",a.fieldsInfo.recordStatus==null?null:a.fieldsInfo.recordStatus.fieldTitle)("optionRequired",!0)("optionSelectFirstItem",!0)}}function mi(o,n){if(o&1&&(l(0,"option",21),p(1),c()),o&2){let a=n.$implicit;u("value",a.value),r(),pe(" ",a.description," (",a.key,") ")}}function ui(o,n){o&1&&(l(0,"mat-error"),p(1," UserType is "),l(2,"strong"),p(3),b(4,"translate"),c()()),o&2&&(r(3),w(v(4,1,"MESSAGE.required")))}function fi(o,n){if(o&1&&(l(0,"mat-error"),p(1),l(2,"strong"),p(3),b(4,"translate"),c()()),o&2){let a=_();r(),g(" ",a.fieldsInfo.title==null?null:a.fieldsInfo.title.fieldTitle," is "),r(2),w(v(4,2,"MESSAGE.required"))}}function hi(o,n){o&1&&(l(0,"mat-error"),p(1," Description is "),l(2,"strong"),p(3),b(4,"translate"),c()()),o&2&&(r(3),w(v(4,1,"MESSAGE.required")))}function Si(o,n){if(o&1){let a=y();l(0,"div",22)(1,"button",23),M("click",function(){h(a);let i=_();return S(i.onFormCancel())}),I(2,"i",24),p(3),b(4,"translate"),c(),l(5,"button",25),I(6,"i",26),p(7),b(8,"translate"),c()()}if(o&2){_();let a=G(9);r(3),g(" ",v(4,3,"ACTION.CANCEL")," "),r(2),u("disabled",!a.form.valid),r(2),g(" ",v(8,5,"ACTION.SAVE")," ")}}var Pe=(()=>{let n=class n extends zt{constructor(t,i,e,d,m,s,k,Q){super(d,new D,s,Q),this.data=t,this.dialogRef=i,this.coreEnumService=e,this.coreUserGroupService=d,this.cmsToastrService=m,this.publicHelper=s,this.cdr=k,this.translate=Q,this.requestId=0,this.constructorInfoAreaId=this.constructor.name,this.selectFileTypeMainImage=["jpg","jpeg","png"],this.appLanguage="fa",this.dataModelResult=new gt,this.dataModel=new D,this.formInfo=new Ee,this.dataModelEnumManageUserAccessUserTypesResult=new B,this.fileManagerOpenForm=!1,this.publicHelper.processService.cdr=this.cdr,t&&(this.requestId=+t.id||0),this.fileManagerTree=this.publicHelper.GetfileManagerTreeConfig()}ngOnInit(){if(this.requestId>0)this.translate.get("TITLE.Edit").subscribe(t=>{this.formInfo.formTitle=t}),this.DataGetOneContent();else{this.cmsToastrService.typeErrorComponentAction(),this.dialogRef.close({dialogChangedDate:!1});return}this.getEnumManageUserAccessUserTypes()}getEnumManageUserAccessUserTypes(){this.coreEnumService.ServiceManageUserAccessUserTypesEnum().subscribe({next:t=>{this.dataModelEnumManageUserAccessUserTypesResult=t}})}DataGetOneContent(){if(this.requestId<=0){this.cmsToastrService.typeErrorEditRowIsNull();return}this.translate.get("MESSAGE.Receiving_Information_From_The_Server").subscribe(i=>{this.formInfo.formAlert=i}),this.formInfo.formError="";let t=this.constructor.name+"main";this.translate.get("MESSAGE.Receiving_information").subscribe(i=>{this.publicHelper.processService.processStart(t,i,this.constructorInfoAreaId)}),this.coreUserGroupService.setAccessLoad(),this.coreUserGroupService.setAccessDataType(St.Editor),this.coreUserGroupService.ServiceGetOneById(this.requestId).subscribe({next:i=>{this.fieldsInfo=this.publicHelper.fieldInfoConvertor(i.access),this.dataModel=i.item,i.isSuccess?(this.formInfo.formTitle=this.formInfo.formTitle+" "+i.item.title,this.formInfo.formAlert=""):(this.translate.get("ERRORMESSAGE.MESSAGE.typeError").subscribe(e=>{this.formInfo.formAlert=e}),this.formInfo.formError=i.errorMessage,this.cmsToastrService.typeErrorMessage(i.errorMessage)),this.publicHelper.processService.processStop(t)},error:i=>{this.cmsToastrService.typeError(i),this.publicHelper.processService.processStop(t,!1)}})}DataEditContent(){this.translate.get("MESSAGE.sending_information_to_the_server").subscribe(i=>{this.formInfo.formAlert=i}),this.formInfo.formError="";let t=this.constructor.name+"main";this.translate.get("MESSAGE.sending_information_to_the_server").subscribe(i=>{this.publicHelper.processService.processStart(t,i,this.constructorInfoAreaId)}),this.coreUserGroupService.ServiceEdit(this.dataModel).subscribe({next:i=>{this.formInfo.formSubmitAllow=!0,this.dataModelResult=i,i.isSuccess?(this.translate.get("MESSAGE.registration_completed_successfully").subscribe(e=>{this.formInfo.formAlert=e}),this.cmsToastrService.typeSuccessEdit(),this.dialogRef.close({dialogChangedDate:!0})):(this.translate.get("ERRORMESSAGE.MESSAGE.typeError").subscribe(e=>{this.formInfo.formAlert=e}),this.formInfo.formError=i.errorMessage,this.cmsToastrService.typeErrorMessage(i.errorMessage)),this.publicHelper.processService.processStop(t)},error:i=>{this.formInfo.formSubmitAllow=!0,this.cmsToastrService.typeError(i),this.publicHelper.processService.processStop(t,!1)}})}onFormSubmit(){this.formGroup.valid&&(this.formInfo.formSubmitAllow=!1,this.DataEditContent())}onFormCancel(){this.dialogRef.close({dialogChangedDate:!1})}};n.\u0275fac=function(i){return new(i||n)(f(we),f(Ie),f(q),f(U),f(V),f(L),f(O),f(N))},n.\u0275cmp=F({type:n,selectors:[["app-core-usercategory-edit"]],viewQuery:function(i,e){if(i&1&&le(di,5),i&2){let d;ce(d=de())&&(e.formGroup=d.first)}},features:[K],decls:37,vars:23,consts:[["vform","ngForm"],["UserType","ngModel"],["Title",""],["Description",""],[1,"card","card-style","loader-container"],[3,"optionsInfoAreaId"],[1,"content","mb-0"],[1,"mb-0","color-highlight","font-600","font-12"],[3,"ngSubmit"],[3,"model","optionDisabled","optionLabel","optionRequired","optionSelectFirstItem","modelChange",4,"ngIf"],[1,"input-style","has-borders","input-style-always-active","validate-field","no-icon","mb-4"],["id","dataModel.userType","name","dataModel.userType",1,"form-control","validate-name",3,"ngModelChange","ngModel"],[3,"value",4,"*ngFor","*ngForOf"],[4,"ngIf"],[1,"input-style","has-borders","no-icon","input-style-always-active","validate-field","mb-4"],["for","dataModel.title",1,"color-highlight"],["matInput","","type","text","name","dataModel.title","minlength","3","maxlength","100","id","dataModel.title",1,"form-control","validate-name",3,"ngModelChange","ngModel","placeholder"],["for","dataModel.description",1,"color-highlight"],["matInput","","name","dataModel.description","type","text","minlength","1","maxlength","500","rows","5","id","dataModel.description",1,"form-control","validate-name",3,"ngModelChange","ngModel","placeholder"],["class","form-actions",4,"ngIf"],[3,"modelChange","model","optionDisabled","optionLabel","optionRequired","optionSelectFirstItem"],[3,"value"],[1,"form-actions"],["type","button",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-gray",3,"click"],[1,"ft-x"],["type","submit",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-green",3,"disabled"],[1,"fa","fa-check-square-o"]],template:function(i,e){if(i&1){let d=y();l(0,"div",4),I(1,"app-progress-spinner",5),l(2,"div",6)(3,"p",7),p(4),c(),l(5,"p"),p(6),b(7,"translate"),c(),l(8,"form",8,0),M("ngSubmit",function(){return h(d),S(e.onFormSubmit())}),C(10,pi,1,5,"app-cms-enum-record-status-selector",9),l(11,"div",10)(12,"select",11,1),x("ngModelChange",function(s){return h(d),R(e.dataModel.userType,s)||(e.dataModel.userType=s),S(s)}),C(14,mi,2,3,"option",12),c(),l(15,"em"),p(16),b(17,"translate"),c(),C(18,ui,5,3,"mat-error",13),c(),l(19,"div",14)(20,"label",15),p(21),c(),l(22,"input",16,2),x("ngModelChange",function(s){return h(d),R(e.dataModel.title,s)||(e.dataModel.title=s),S(s)}),c(),l(24,"em"),p(25),c(),C(26,fi,5,4,"mat-error",13),c(),l(27,"div",14)(28,"label",17),p(29),c(),l(30,"textarea",18,3),x("ngModelChange",function(s){return h(d),R(e.dataModel.description,s)||(e.dataModel.description=s),S(s)}),p(32,"                "),c(),l(33,"em"),p(34),c(),C(35,hi,5,3,"mat-error",13),c(),C(36,Si,9,7,"div",19),c()()()}if(i&2){let d=G(13),m=G(23),s=G(31);r(),u("optionsInfoAreaId",e.constructorInfoAreaId),r(3),g(" ",e.formInfo.formTitle," "),r(2),g(" ",v(7,19,"TITLE.Be_Careful_When_Entering_Information")," "),r(4),u("ngIf",e.fieldsInfo.recordStatus==null?null:e.fieldsInfo.recordStatus.accessWatchField),r(2),A("ngModel",e.dataModel.userType),r(2),u("*ngForOf",e.dataModelEnumManageUserAccessUserTypesResult.listItems),r(2),w(v(17,21,"TITLE.SELECT_STATUS")),r(2),u("ngIf",d.errors==null?null:d.errors.required),r(3),w(e.fieldsInfo.title==null?null:e.fieldsInfo.title.fieldTitle),r(),P("placeholder",e.fieldsInfo.title==null?null:e.fieldsInfo.title.fieldTitle),A("ngModel",e.dataModel.title),r(3),g("",m.value.length," / 100"),r(),u("ngIf",m.errors==null?null:m.errors.required),r(3),w(e.fieldsInfo.description==null?null:e.fieldsInfo.description.fieldTitle),r(),P("placeholder",e.fieldsInfo.description==null?null:e.fieldsInfo.description.fieldTitle),A("ngModel",e.dataModel.description),r(4),g("",s.value.length," / 500"),r(),u("ngIf",s.errors==null?null:s.errors.required),r(),u("ngIf",e.formInfo.formSubmitAllow)}},dependencies:[H,Se,_e,Ce,X,ge,j,ue,be,ve,Y,fe,Me,W,Te,z,Z],styles:[".form-body[_ngcontent-%COMP%]{width:500px}@media (max-width: 700px){.form-body[_ngcontent-%COMP%]{display:contents}}#file-manager[_ngcontent-%COMP%]{width:calc(100vw - 16px);height:calc(100vh - 16px)}.recordStatus-1.mat-select-panel[_ngcontent-%COMP%]{background:#ff0}.recordStatus-2.mat-select-panel[_ngcontent-%COMP%]{background:#000}.recordStatus-3.mat-select-panel[_ngcontent-%COMP%]{background:red}"]});let o=n;return o})();var Ci=()=>[5,10,20,100],bi=o=>({display:o});function vi(o,n){if(o&1){let a=y();l(0,"div",19)(1,"a",44),M("click",function(){h(a);let i=_();return S(i.onActionButtonNewRow())}),I(2,"i",45)(3,"br"),c(),l(4,"p",22),p(5),b(6,"translate"),c()()}o&2&&(r(5),w(v(6,1,"ACTION.ADD")))}function Mi(o,n){if(o&1){let a=y();l(0,"div",19)(1,"a",46),M("click",function(){h(a);let i=_();return S(i.onActionButtonEditRow(i.tableRowSelected))}),I(2,"i",47)(3,"br"),l(4,"mat-icon"),p(5,"mode_edit"),c()(),l(6,"p",22),p(7),b(8,"translate"),c()()}o&2&&(r(7),w(v(8,1,"ACTION.EDIT")))}function Ii(o,n){if(o&1){let a=y();l(0,"div",19)(1,"a",48),M("click",function(){h(a);let i=_();return S(i.onActionButtonDeleteRow(i.tableRowSelected))}),I(2,"i",49)(3,"br"),c(),l(4,"p",22),p(5),b(6,"translate"),c()()}o&2&&(r(5),w(v(6,1,"ACTION.DELETE")))}function wi(o,n){if(o&1&&(l(0,"mat-header-cell",50),p(1),c()),o&2){let a=_();r(),g(" ",a.fieldsInfo.id==null?null:a.fieldsInfo.id.fieldTitle," ")}}function yi(o,n){if(o&1&&(l(0,"mat-cell"),p(1),c()),o&2){let a=n.$implicit;r(),g(" ",a.id," ")}}function Ei(o,n){if(o&1&&(l(0,"mat-header-cell",50),p(1),c()),o&2){let a=_();r(),g(" ",a.fieldsInfo.recordStatus==null?null:a.fieldsInfo.recordStatus.fieldTitle," ")}}function Ti(o,n){if(o&1&&I(0,"select",53),o&2){let a=_().$implicit,t=_();u("contentService",t.contentService)("row",a)("ngStyle",it(3,bi,a.id===(t.tableRowSelected==null?null:t.tableRowSelected.id)?"":"none"))}}function Ai(o,n){if(o&1&&(l(0,"mat-cell",51),b(1,"statusCellClass"),I(2,"i",51),b(3,"statusIconClass"),C(4,Ti,1,5,"select",52),c()),o&2){let a=n.$implicit,t=_();u("ngClass",v(1,3,a.recordStatus)),r(2),u("ngClass",v(3,5,a.recordStatus)),r(2),u("ngIf",t.dataModelResult==null||t.dataModelResult.access==null?null:t.dataModelResult.access.accessEditRow)}}function Ri(o,n){if(o&1&&(l(0,"mat-header-cell",50),p(1),c()),o&2){let a=_();r(),g(" ",a.fieldsInfo.title==null?null:a.fieldsInfo.title.fieldTitle," ")}}function xi(o,n){if(o&1&&(l(0,"mat-cell"),p(1),c()),o&2){let a=n.$implicit;r(),g(" ",a.title," ")}}function Gi(o,n){o&1&&(l(0,"mat-header-cell",50),p(1),b(2,"translate"),c()),o&2&&(r(),g(" ",v(2,1,"TITLE.TitleML")," "))}function Di(o,n){if(o&1&&(l(0,"mat-cell"),p(1),c()),o&2){let a=n.$implicit;r(),g(" ",a.titleML," ")}}function Ui(o,n){if(o&1&&(l(0,"mat-header-cell",50),p(1),c()),o&2){let a=_();r(),g(" ",a.fieldsInfo.titleResourceLanguage==null?null:a.fieldsInfo.titleResourceLanguage.fieldTitle," ")}}function Vi(o,n){if(o&1&&(l(0,"mat-cell"),p(1),c()),o&2){let a=n.$implicit;r(),g(" ",a.titleResourceLanguage," ")}}function Li(o,n){if(o&1&&(l(0,"mat-header-cell",50),p(1),c()),o&2){let a=_();r(),g(" ",a.fieldsInfo.userType==null?null:a.fieldsInfo.userType.fieldTitle," ")}}function ki(o,n){if(o&1&&(l(0,"mat-cell"),p(1),c()),o&2){let a=n.$implicit;r(),g(" ",a.userType," ")}}function Fi(o,n){if(o&1&&(l(0,"mat-header-cell",50),p(1),c()),o&2){let a=_();r(),g(" ",a.fieldsInfo.userTypeTitle==null?null:a.fieldsInfo.userTypeTitle.fieldTitle," ")}}function Oi(o,n){if(o&1&&(l(0,"mat-cell"),p(1),c()),o&2){let a=n.$implicit;r(),g(" ",a.userTypeTitle," ")}}function Ni(o,n){o&1&&(l(0,"mat-header-cell"),p(1),b(2,"translate"),c()),o&2&&(r(),g(" ",v(2,1,"TITLE.OPTION")," "))}function Bi(o,n){if(o&1&&(l(0,"mat-cell",54)(1,"button",55)(2,"mat-icon"),p(3,"more_vert"),c()(),I(4,"mat-menu",null,2),c()),o&2){let a=G(5);r(),u("matMenuTriggerFor",a)}}function Pi(o,n){o&1&&I(0,"mat-header-row")}function Hi(o,n){if(o&1){let a=y();l(0,"mat-row",56),M("click",function(){let i=h(a).$implicit,e=_();return S(e.onActionTableRowSelect(i))}),c()}if(o&2){let a=n.$implicit,t=n.dataIndex,i=_();Ye("ntk-row-odd",t%2)("ntk-row-even",!(t%2))("ntk-row-selected",a.id===(i.tableRowSelected==null?null:i.tableRowSelected.id))}}var Zt=(()=>{let n=class n extends Kt{constructor(t,i,e,d,m,s,k,Q,He,ei){super(t,new D,He,m,k),this.contentService=t,this.cmsToastrService=i,this.cmsConfirmationDialogService=e,this.router=d,this.tokenHelper=m,this.cdr=s,this.translate=k,this.pageInfo=Q,this.publicHelper=He,this.dialog=ei,this.constructorInfoAreaId=this.constructor.name,this.flag=!1,this.tableContentSelected=[],this.filteModelContent=new $,this.tabledisplayedColumns=[],this.tabledisplayedColumnsSource=["Id","RecordStatus","TitleML","TitleResourceLanguage","UserType","UserTypeTitle"],this.tabledisplayedColumnsMobileSource=["Id","RecordStatus","TitleML","TitleResourceLanguage","UserType","UserTypeTitle"],this.publicHelper.processService.cdr=this.cdr,this.optionsSearch.parentMethods={onSubmit:ti=>this.onSubmitOptionsSearch(ti)},this.filteModelContent.sortColumn="Id",this.filteModelContent.sortType=ie.Descending}ngOnInit(){this.filteModelContent.sortColumn="Title",this.tokenHelper.getTokenInfoState().then(t=>{this.tokenInfo=t,this.DataGetAll()}),this.cmsApiStoreSubscribe=this.tokenHelper.getTokenInfoStateOnChange().subscribe({next:t=>{this.tokenInfo=t,this.DataGetAll()}})}ngOnDestroy(){this.cmsApiStoreSubscribe.unsubscribe()}DataGetAll(){this.tabledisplayedColumns=this.publicHelper.TableDisplayedColumns(this.tabledisplayedColumnsSource,this.tabledisplayedColumnsMobileSource,[],this.tokenInfo),this.tableRowsSelected=[],this.onActionTableRowSelect(new D);let t=this.constructor.name+"main";this.translate.get("MESSAGE.get_information_list").subscribe(e=>{this.publicHelper.processService.processStart(t,e,this.constructorInfoAreaId)}),this.filteModelContent.accessLoad=!0;let i=JSON.parse(JSON.stringify(this.filteModelContent));this.contentService.ServiceGetAllEditor(i).subscribe({next:e=>{e.isSuccess?(this.fieldsInfo=this.publicHelper.fieldInfoConvertor(e.access),this.dataModelResult=e,this.tableSource.data=e.listItems,this.optionsStatist?.data?.show&&this.onActionButtonStatist(!0),setTimeout(()=>{this.optionsSearch.childMethods&&this.optionsSearch.childMethods.setAccess(e.access)},1e3)):this.cmsToastrService.typeErrorMessage(e.errorMessage),this.publicHelper.processService.processStop(t)},error:e=>{this.cmsToastrService.typeError(e),this.publicHelper.processService.processStop(t,!1)}})}onTableSortData(t){this.tableSource&&this.tableSource.sort&&this.tableSource.sort.active===t.active?this.tableSource.sort.start==="asc"?(t.start="desc",this.filteModelContent.sortColumn=t.active,this.filteModelContent.sortType=ie.Descending):this.tableSource.sort.start==="desc"?(t.start="asc",this.filteModelContent.sortColumn="",this.filteModelContent.sortType=ie.Ascending):t.start="desc":(this.filteModelContent.sortColumn=t.active,this.filteModelContent.sortType=ie.Descending),this.tableSource.sort=t,this.filteModelContent.currentPageNumber=0,this.DataGetAll()}onTablePageingData(t){this.filteModelContent.currentPageNumber=t.pageIndex+1,this.filteModelContent.rowPerPage=t.pageSize,this.DataGetAll()}onActionButtonNewRow(){if(this.dataModelResult==null||this.dataModelResult.access==null||!this.dataModelResult.access.accessAddRow){this.cmsToastrService.typeErrorAccessAdd();return}var t="";this.tokenHelper.isMobile?t="dialog-fullscreen":t="dialog-min",this.dialog.open(Be,{height:"90%",panelClass:t,enterAnimationDuration:ee.cmsViewConfig.enterAnimationDuration,exitAnimationDuration:ee.cmsViewConfig.exitAnimationDuration,data:{}}).afterClosed().subscribe(e=>{e&&e.dialogChangedDate&&this.DataGetAll()})}onActionButtonEditRow(t=this.tableRowSelected){if(!t||!t.id||t.id===0){this.cmsToastrService.typeErrorSelectedRow();return}if(this.onActionTableRowSelect(t),this.dataModelResult==null||this.dataModelResult.access==null||!this.dataModelResult.access.accessEditRow){this.cmsToastrService.typeErrorAccessEdit();return}var i="";this.tokenHelper.isMobile?i="dialog-fullscreen":i="dialog-min",this.dialog.open(Pe,{height:"90%",panelClass:i,enterAnimationDuration:ee.cmsViewConfig.enterAnimationDuration,exitAnimationDuration:ee.cmsViewConfig.exitAnimationDuration,data:{id:this.tableRowSelected.id}}).afterClosed().subscribe(d=>{d&&d.dialogChangedDate&&this.DataGetAll()})}onActionButtonDeleteRow(t=this.tableRowSelected){if(!t||!t.id||t.id===0){this.translate.get("MESSAGE.no_row_selected_to_delete").subscribe(d=>{this.cmsToastrService.typeErrorSelected(d)});return}if(this.onActionTableRowSelect(t),this.dataModelResult==null||this.dataModelResult.access==null||!this.dataModelResult.access.accessDeleteRow){this.cmsToastrService.typeErrorAccessDelete();return}var i="",e="";this.translate.get(["MESSAGE.Please_Confirm","MESSAGE.Do_you_want_to_delete_this_content"]).subscribe(d=>{i=d["MESSAGE.Please_Confirm"],e=d["MESSAGE.Do_you_want_to_delete_this_content"]+"?<br> ( "+this.tableRowSelected.title+" ) "}),this.cmsConfirmationDialogService.confirm(i,e).then(d=>{if(d){let m=this.constructor.name+"main";this.translate.get("MESSAGE.Receiving_information").subscribe(s=>{this.publicHelper.processService.processStart(m,s,this.constructorInfoAreaId)}),this.contentService.ServiceDelete(this.tableRowSelected.id).subscribe({next:s=>{s.isSuccess?(this.cmsToastrService.typeSuccessRemove(),this.DataGetAll()):this.cmsToastrService.typeErrorRemove(),this.publicHelper.processService.processStop(m)},error:s=>{this.cmsToastrService.typeError(s),this.publicHelper.processService.processStop(m,!1)}})}}).catch(()=>{})}onActionButtonUserList(t=this.tableRowSelected){if(!t||!t.id||t.id===0){this.translate.get("MESSAGE.no_row_selected_to_display").subscribe(i=>{this.cmsToastrService.typeErrorSelected(i)});return}this.onActionTableRowSelect(t),this.router.navigate(["/core/site/userlist/LinkUserGroupId/",this.tableRowSelected.id])}onActionButtonStatist(t=!this.optionsStatist.data.show){if(this.optionsStatist.data.show=t,!this.optionsStatist.data.show)return;let i=new Map;this.translate.get("MESSAGE.Active").subscribe(s=>{i.set(s,0)}),this.translate.get("MESSAGE.All").subscribe(s=>{i.set(s,0)});let e=this.constructor.name+".ServiceStatist";this.translate.get("MESSAGE.Get_the_statist").subscribe(s=>{this.publicHelper.processService.processStart(e,s,this.constructorInfoAreaId)}),this.contentService.ServiceGetCount(this.filteModelContent).subscribe({next:s=>{s.isSuccess?(this.translate.get("MESSAGE.All").subscribe(k=>{i.set(k,s.totalRowCount)}),this.optionsStatist.childMethods.setStatistValue(i)):this.cmsToastrService.typeErrorMessage(s.errorMessage),this.publicHelper.processService.processStop(e)},error:s=>{this.cmsToastrService.typeError(s),this.publicHelper.processService.processStop(e,!1)}});let d=JSON.parse(JSON.stringify(this.filteModelContent)),m=new oe;m.propertyName="RecordStatus",m.value=ht.Available,d.filters.push(m),this.contentService.ServiceGetCount(d).subscribe({next:s=>{s.isSuccess?(this.translate.get("MESSAGE.Active").subscribe(k=>{i.set(k,s.totalRowCount)}),this.optionsStatist.childMethods.setStatistValue(i)):this.cmsToastrService.typeErrorMessage(s.errorMessage),this.publicHelper.processService.processStop(e)},error:s=>{this.cmsToastrService.typeError(s),this.publicHelper.processService.processStop(e,!1)}})}onActionButtonReload(){this.DataGetAll()}onSubmitOptionsSearch(t){this.filteModelContent.filters=t,this.DataGetAll()}};n.\u0275fac=function(i){return new(i||n)(f(U),f(V),f(Ae),f(mt),f(ke),f(O),f(N),f(Ct),f(L),f(ft))},n.\u0275cmp=F({type:n,selectors:[["app-core-usergroup-list"]],features:[K],decls:66,vars:31,consts:[["tableSort","matSort"],["paginator",""],["actionMenu","matMenu"],[3,"optionActionGuideNoticeDisplayChange","optionOnActionButtonMemoRow","optionOnActionButtonMemo","optionOnActionButtonExport","optionOnActionButtonPrintRow","optionsListInfoAreaId","optionGuideNoticeKey","optionActionGuideNoticeDisplay","optionTreeDisplay","optionActionRowId","optionActionRowDisplayMenu","optionSelectRowItemTitle"],["cms-tree",""],["cms-header",""],["cms-action-header",""],["cms-action-header-start",""],["type","button","target","_blank",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-highlight",3,"click"],[1,"fa-solid","fa-info","font-18",2,"color","#ffffff"],[1,"fa-solid","fa-rotate-right","font-18",2,"color","#ffffff"],["cms-action-header-end",""],[1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-highlight",3,"click"],[3,"ngModelChange","click","ngModel"],[1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-highlight"],[3,"click","ngModelChange","ngModel"],["cms-action-main",""],["class","col-4",4,"ngIf"],["cms-action-row",""],[1,"col-4"],["target","_blank",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-highlight",3,"click"],[1,"fa-solid","fa-users","font-18",2,"color","#ffffff"],[1,"font-11","text-center","opacity-70"],["cms-action-area",""],[3,"optionsChange","options"],["cms-body",""],["matSort","",3,"matSortChange","dataSource"],["matColumnDef","Id"],["mat-sort-header","",4,"matHeaderCellDef"],[4,"matCellDef"],["matColumnDef","RecordStatus"],[3,"ngClass",4,"matCellDef"],["matColumnDef","Title"],["matColumnDef","TitleML"],["matColumnDef","TitleResourceLanguage"],["matColumnDef","UserType"],["matColumnDef","UserTypeTitle"],["matColumnDef","Action"],[4,"matHeaderCellDef"],["class"," Action",4,"matCellDef"],[4,"matHeaderRowDef"],[3,"ntk-row-odd","ntk-row-even","ntk-row-selected","click",4,"matRowDef","matRowDefColumns"],["cms-footer",""],[3,"page","length","pageIndex","pageSize","pageSizeOptions"],["type","button","target","_blank",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-teal",3,"click"],[1,"fa-solid","fa-plus","font-18",2,"color","#FFFFFF"],["target","_blank",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-magenta",3,"click"],[1,"fa-solid","fa-pen","font-18",2,"color","#FFFFFF"],["target","_blank",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-red",3,"click"],[1,"fa-solid","fa-trash","font-18",2,"color","#ffffff"],["mat-sort-header",""],[3,"ngClass"],["matNativeControl","","cmsRecordStatusSelfSave","","style","background: none; border: none;",3,"contentService","row","ngStyle",4,"ngIf"],["matNativeControl","","cmsRecordStatusSelfSave","",2,"background","none","border","none",3,"contentService","row","ngStyle"],[1,"Action"],["type","button","mat-icon-button","","aria-label","Action Menu",3,"matMenuTriggerFor"],[3,"click"]],template:function(i,e){if(i&1){let d=y();l(0,"app-cms-html-list",3),x("optionActionGuideNoticeDisplayChange",function(s){return h(d),R(e.viewGuideNotice,s)||(e.viewGuideNotice=s),S(s)}),M("optionOnActionButtonMemoRow",function(){return h(d),S(e.onActionButtonMemoRow())})("optionOnActionButtonMemo",function(){return h(d),S(e.onActionButtonMemo())})("optionOnActionButtonExport",function(){return h(d),S(e.onActionButtonExport())})("optionOnActionButtonPrintRow",function(){return h(d),S(e.onActionButtonPrintRow())}),E(1,4),p(2," -------------------------------------- "),T(),Ze(3,5)(4,6),E(5,7),l(6,"a",8),M("click",function(){return h(d),S(e.viewGuideNotice=!e.viewGuideNotice)}),I(7,"i",9),c(),l(8,"a",8),M("click",function(){return h(d),S(e.onActionButtonReload())}),I(9,"i",10),c(),T(),E(10,11),l(11,"a",12),M("click",function(){return h(d),S(e.optionsSearch.data.show=!e.optionsSearch.data.show)}),l(12,"mat-slide-toggle",13),x("ngModelChange",function(s){return h(d),R(e.optionsSearch.data.show,s)||(e.optionsSearch.data.show=s),S(s)}),M("click",function(){return h(d),S(e.optionsSearch.data.show=!e.optionsSearch.data.show)}),c(),p(13),b(14,"translate"),c(),l(15,"a",14)(16,"mat-slide-toggle",15),M("click",function(){return h(d),S(e.onActionButtonStatist())}),x("ngModelChange",function(s){return h(d),R(e.optionsStatist.data.show,s)||(e.optionsStatist.data.show=s),S(s)}),c(),p(17),b(18,"translate"),c(),T(),E(19,16),C(20,vi,7,3,"div",17),T(),E(21,18),C(22,Mi,9,3,"div",17)(23,Ii,7,3,"div",17),l(24,"div",19)(25,"a",20),M("click",function(){return h(d),S(e.onActionButtonUserList(e.tableRowSelected))}),I(26,"i",21)(27,"br"),c(),l(28,"p",22),p(29),b(30,"translate"),c()(),T(),E(31,23),l(32,"app-cms-search-list",24),x("optionsChange",function(s){return h(d),R(e.optionsSearch,s)||(e.optionsSearch=s),S(s)}),c(),l(33,"app-cms-statist-list",24),x("optionsChange",function(s){return h(d),R(e.optionsStatist,s)||(e.optionsStatist=s),S(s)}),c(),T(),E(34,25),l(35,"mat-table",26,0),M("matSortChange",function(){h(d);let s=G(36);return S(e.onTableSortData(s))}),E(37,27),C(38,wi,2,1,"mat-header-cell",28)(39,yi,2,1,"mat-cell",29),T(),E(40,30),C(41,Ei,2,1,"mat-header-cell",28)(42,Ai,5,7,"mat-cell",31),T(),E(43,32),C(44,Ri,2,1,"mat-header-cell",28)(45,xi,2,1,"mat-cell",29),T(),E(46,33),C(47,Gi,3,3,"mat-header-cell",28)(48,Di,2,1,"mat-cell",29),T(),E(49,34),C(50,Ui,2,1,"mat-header-cell",28)(51,Vi,2,1,"mat-cell",29),T(),E(52,35),C(53,Li,2,1,"mat-header-cell",28)(54,ki,2,1,"mat-cell",29),T(),E(55,36),C(56,Fi,2,1,"mat-header-cell",28)(57,Oi,2,1,"mat-cell",29),T(),E(58,37),C(59,Ni,3,3,"mat-header-cell",38)(60,Bi,6,1,"mat-cell",39),T(),C(61,Pi,1,0,"mat-header-row",40)(62,Hi,1,6,"mat-row",41),c(),T(),E(63,42),l(64,"mat-paginator",43,1),M("page",function(s){return h(d),S(e.onTablePageingData(s))}),c(),T(),c()}i&2&&(u("optionsListInfoAreaId",e.constructorInfoAreaId)("optionGuideNoticeKey",""),A("optionActionGuideNoticeDisplay",e.viewGuideNotice),u("optionTreeDisplay",!1)("optionActionRowId",e.tableRowSelected==null?null:e.tableRowSelected.id)("optionActionRowDisplayMenu",e.tableRowSelectDoubleClick)("optionSelectRowItemTitle",(e.tableRowSelected==null||e.tableRowSelected.title==null?null:e.tableRowSelected.title.length)>0?e.tableRowSelected==null?null:e.tableRowSelected.title:e.tableRowSelected==null?null:e.tableRowSelected.id),r(12),A("ngModel",e.optionsSearch.data.show),r(),g("",v(14,24,"ACTION.SEARCH")," "),r(3),A("ngModel",e.optionsStatist.data.show),r(),g("",v(18,26,"ACTION.STATIST")," "),r(3),u("ngIf",e.dataModelResult==null||e.dataModelResult.access==null?null:e.dataModelResult.access.accessAddRow),r(2),u("ngIf",e.dataModelResult==null||e.dataModelResult.access==null?null:e.dataModelResult.access.accessEditRow),r(),u("ngIf",e.dataModelResult==null||e.dataModelResult.access==null?null:e.dataModelResult.access.accessDeleteRow),r(6),w(v(30,28,"ACTION.USERS")),r(3),A("options",e.optionsSearch),r(),A("options",e.optionsStatist),r(2),u("dataSource",e.tableSource),r(26),u("matHeaderRowDef",e.tabledisplayedColumns),r(),u("matRowDefColumns",e.tabledisplayedColumns),r(2),u("length",e.dataModelResult.totalRowCount)("pageIndex",e.dataModelResult.currentPageNumber-1)("pageSize",e.dataModelResult.rowPerPage)("pageSizeOptions",tt(30,Ci)))},dependencies:[ot,H,nt,j,Y,ut,ye,W,It,wt,yt,Et,Tt,At,Rt,Gt,Lt,Dt,xt,kt,Ut,Vt,Ft,Ot,jt,Wt,Ht,Nt,Z,Pt,Bt],encapsulation:2});let o=n;return o})();var ji=[{path:"",children:[{path:"",component:Zt}]}],$t=(()=>{let n=class n{};n.\u0275fac=function(i){return new(i||n)},n.\u0275mod=se({type:n}),n.\u0275inj=ae({imports:[Ue.forChild(ji),Ue]});let o=n;return o})();var Wi=["*"];function qi(o,n){if(o&1&&(l(0,"label",8),p(1),c()),o&2){let a=_();De("for","app-cms-site-selector-",a.id,""),r(),w(a.optionLabel)}}function Qi(o,n){if(o&1&&(l(0,"mat-option",9)(1,"span"),p(2),c()()),o&2){let a=n.$implicit,t=_();u("value",a)("disabled",t.optionDisabled),r(2),w(t.displayOption(a))}}function zi(o,n){if(o&1){let a=y();l(0,"mat-icon",10),M("click",function(){h(a);let i=_();return S(i.onActionSelectClear())}),p(1,"close"),c()}}var No=(()=>{let n=class n{constructor(t,i,e,d,m,s){this.coreEnumService=t,this.cmsToastrService=i,this.cdr=e,this.publicHelper=d,this.translate=m,this.categoryService=s,this.id=++n.nextId,this.constructorInfoAreaId=this.constructor.name,this.dataModelResult=new B,this.dataModelSelect=new D,this.formControl=new he,this.optionDisabled=!1,this.optionSelectFirstItem=!1,this.optionPlaceholder="",this.optionLabel="",this.optionChange=new J,this.optionReload=()=>this.onActionButtonReload(),this.publicHelper.processService.cdr=this.cdr}set optionSelectForce(t){this.onActionSelectForce(t)}ngOnInit(){this.loadOptions(),(!this.optionLabel||this.optionLabel.length==0&&this.optionPlaceholder?.length>0)&&(this.optionLabel=this.optionPlaceholder)}loadOptions(){this.filteredOptions=this.formControl.valueChanges.pipe(Je(""),Qe(1500),ze(),Ke(t=>typeof t=="string"||typeof t=="number"?this.DataGetAll(t||""):[]))}displayFn(t){return t?t.titleML:void 0}displayOption(t){return t?t.titleML:void 0}DataGetAll(t){return je(this,null,function*(){let i=new $;i.rowPerPage=20,i.accessLoad=!0;let e=new oe;e.propertyName="Title",e.value=t,e.searchType=Le.Contains,e.clauseType=Ve.Or,i.filters.push(e),t&&typeof+t=="number"&&+t>0&&(e=new oe,e.propertyName="Id",e.value=t,e.searchType=Le.Equal,e.clauseType=Ve.Or,i.filters.push(e));let d=this.constructor.name+"main";return this.translate.get("MESSAGE.Receiving_information").subscribe(m=>{this.publicHelper.processService.processStart(d,m,this.constructorInfoAreaId)}),yield We(this.categoryService.ServiceGetAll(i)).then(m=>(this.dataModelResult=m,this.optionSelectFirstItem&&(!this.dataModelSelect||!this.dataModelSelect.id||this.dataModelSelect.id<=0)&&this.dataModelResult.listItems.length>0&&(this.optionSelectFirstItem=!1,setTimeout(()=>{this.formControl.setValue(this.dataModelResult.listItems[0])},1e3),this.onActionSelect(this.dataModelResult.listItems[0])),this.publicHelper.processService.processStop(d),m.listItems))})}onActionSelect(t){this.dataModelSelect=t,this.optionChange.emit(this.dataModelSelect)}onActionSelectClear(){this.dataModelSelect=null,this.formControl.setValue(null),this.optionChange.emit(null)}push(t){return this.filteredOptions.pipe(qe(i=>(i.find(e=>e.id===t.id)||i.push(t),i)))}onActionSelectForce(t){if(typeof t=="number"&&t>0){if(this.dataModelSelect&&this.dataModelSelect.id===t)return;if(this.dataModelResult&&this.dataModelResult.listItems&&this.dataModelResult.listItems.find(i=>i.id===t)){let i=this.dataModelResult.listItems.find(e=>e.id===t);this.dataModelSelect=i,this.formControl.setValue(i);return}this.categoryService.ServiceGetOneById(t).subscribe({next:i=>{i.isSuccess?(this.filteredOptions=this.push(i.item),this.dataModelSelect=i.item,this.formControl.setValue(i.item),this.optionChange.emit(i.item)):this.cmsToastrService.typeErrorMessage(i.errorMessage)}});return}if(typeof t==typeof D){this.filteredOptions=this.push(t),this.dataModelSelect=t,this.formControl.setValue(t);return}this.formControl.setValue(null)}onActionButtonReload(){this.dataModelSelect=new D,this.loadOptions()}};n.nextId=0,n.\u0275fac=function(i){return new(i||n)(f(q),f(V),f(O),f(L),f(N),f(U))},n.\u0275cmp=F({type:n,selectors:[["app-core-usercategory-selector"]],inputs:{optionDisabled:"optionDisabled",optionSelectFirstItem:"optionSelectFirstItem",optionPlaceholder:"optionPlaceholder",optionLabel:"optionLabel",optionReload:"optionReload",optionSelectForce:"optionSelectForce"},outputs:{optionChange:"optionChange"},ngContentSelectors:Wi,decls:10,vars:13,consts:[["matauto","matAutocomplete"],[1,"input-style","has-borders","no-icon","input-style-always-active","validate-field","mb-4","loader-container"],[3,"optionsInfoAreaId"],["class","color-highlight",3,"for",4,"ngIf"],["type","text","matInput","",1,"form-control","validate-name",3,"placeholder","formControl","matAutocomplete","id"],[3,"optionSelected","displayWith"],[3,"value","disabled",4,"ngFor","ngForOf"],["matSuffix","","matSuffix","","mat-icon-button","","aria-label","Clear",3,"click",4,"ngIf"],[1,"color-highlight",3,"for"],[3,"value","disabled"],["matSuffix","","matSuffix","","mat-icon-button","","aria-label","Clear",3,"click"]],template:function(i,e){if(i&1){let d=y();$e(),l(0,"div",1),I(1,"app-progress-spinner",2),C(2,qi,2,3,"label",3),I(3,"input",4),l(4,"mat-autocomplete",5,0),M("optionSelected",function(s){return h(d),S(e.onActionSelect(s.option.value))}),C(6,Qi,3,3,"mat-option",6),b(7,"async"),c(),C(8,zi,2,0,"mat-icon",7),et(9),c()}if(i&2){let d=G(5);r(),u("optionsInfoAreaId",e.constructorInfoAreaId),r(),u("ngIf",(e.optionLabel==null?null:e.optionLabel.length)>0),r(),P("placeholder",e.optionPlaceholder),De("id","app-cms-site-selector-",e.id,""),u("formControl",e.formControl)("matAutocomplete",d),Xe("disabled",e.optionDisabled?!0:null),r(),u("displayWith",e.displayFn),r(2),u("ngForOf",v(7,11,e.filteredOptions)),r(2),u("ngIf",e.dataModelSelect==null?null:e.dataModelSelect.id)}},dependencies:[me,H,X,j,lt,bt,st,vt,pt,ye,W,z,rt],encapsulation:2});let o=n;return o})();function Ji(o,n){if(o&1){let a=y();l(0,"li")(1,"mat-checkbox",1),M("change",function(){let i=h(a).$implicit,e=_();return S(e.onActionSelect(i))}),p(2),c()()}if(o&2){let a=n.$implicit,t=_();r(),u("checked",t.fieldsStatus.get(a.id))("disabled",t.optionDisabled),r(),g(" ",a.title," ")}}var tn=(()=>{let n=class n{constructor(t,i,e,d,m,s){this.coreEnumService=t,this.categoryService=i,this.cdr=e,this.publicHelper=d,this.translate=m,this.cmsToastrService=s,this.constructorInfoAreaId=this.constructor.name,this.dataModelResult=new B,this.dataModelSelect=[],this.dataIdsSelect=[],this.formControl=new he,this.fieldsStatus=new Map,this.optionDisabled=!1,this.optionSelectFirstItem=!1,this.optionPlaceholder="",this.optionChange=new J,this.optionSelectAdded=new J,this.optionSelectRemoved=new J,this.optionReload=()=>this.onActionButtonReload(),this.publicHelper.processService.cdr=this.cdr}set optionSelectForce(t){this.onActionSelectForce(t)}ngOnInit(){this.DataGetAll()}DataGetAll(){let t=new $;t.rowPerPage=50,t.accessLoad=!0;let i=this.constructor.name+"main";this.translate.get("MESSAGE.Receiving_information").subscribe(e=>{this.publicHelper.processService.processStart(i,e,this.constructorInfoAreaId)}),this.categoryService.ServiceGetAll(t).subscribe({next:e=>{e.isSuccess?(this.dataModelResult=e,this.dataModelResult.listItems.forEach(d=>this.fieldsStatus.set(d.id,!1)),this.dataIdsSelect.forEach(d=>this.fieldsStatus.set(d,!0)),this.dataModelResult.listItems.forEach(d=>{this.fieldsStatus.get(d.id)&&this.dataModelSelect.push(d)})):this.cmsToastrService.typeErrorMessage(e.errorMessage),this.publicHelper.processService.processStop(i)},error:e=>{this.cmsToastrService.typeError(e),this.publicHelper.processService.processStop(i,!1)}})}onActionSelect(t){this.fieldsStatus.get(t.id)?(this.fieldsStatus.set(t.id,!1),this.optionSelectRemoved.emit(t),this.dataModelSelect.splice(this.dataModelSelect.indexOf(t),1)):(this.fieldsStatus.set(t.id,!0),this.optionSelectAdded.emit(t),this.dataModelSelect.push(t)),this.optionChange.emit(this.dataModelSelect)}onActionSelectForce(t){typeof t==typeof Array(Number)?t.forEach(i=>{this.dataIdsSelect.push(i)}):typeof t==typeof Array(D)&&t.forEach(i=>{this.dataIdsSelect.push(i.id)}),this.dataIdsSelect.forEach(i=>this.fieldsStatus.set(i,!0))}onActionButtonReload(){this.DataGetAll()}};n.\u0275fac=function(i){return new(i||n)(f(q),f(U),f(O),f(L),f(N),f(V))},n.\u0275cmp=F({type:n,selectors:[["app-core-usergroup-selectionlist"]],inputs:{optionDisabled:"optionDisabled",optionSelectFirstItem:"optionSelectFirstItem",optionPlaceholder:"optionPlaceholder",optionReload:"optionReload",optionSelectForce:"optionSelectForce"},outputs:{optionChange:"optionChange",optionSelectAdded:"optionSelectAdded",optionSelectRemoved:"optionSelectRemoved"},decls:2,vars:1,consts:[[4,"ngFor","ngForOf"],[3,"change","checked","disabled"]],template:function(i,e){i&1&&(l(0,"ul"),C(1,Ji,3,3,"li",0),c()),i&2&&(r(),u("ngForOf",e.dataModelResult.listItems))},dependencies:[me,Mt]});let o=n;return o})();var yn=(()=>{let n=class n{};n.\u0275fac=function(i){return new(i||n)},n.\u0275mod=se({type:n}),n.\u0275inj=ae({providers:[U,_t,Ae],imports:[at,ct,$t,dt.withConfig({warnOnNgModelWithFormControl:"never"}),qt,Jt]});let o=n;return o})();export{No as a,tn as b,yn as c};
