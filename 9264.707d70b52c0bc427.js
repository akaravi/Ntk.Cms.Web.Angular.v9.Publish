"use strict";(self.webpackChunkntk_cms_web=self.webpackChunkntk_cms_web||[]).push([[9264,4121],{3673:(L,D,a)=>{a.d(D,{G:()=>u});var _=a(8239),t=a(8692),i=a(4511),o=a(4537),y=a(4032),g=a(2607);let u=(()=>{class d{elRef;renderer;publicHelper;cmsToastrService;cdr;document;row;contentService;constructor(n,r,h,f,T,U){this.elRef=n,this.renderer=r,this.publicHelper=h,this.cmsToastrService=f,this.cdr=T,this.document=U,this.DataEnumRecordStatus()}DataEnumRecordStatus(){var n=this;return(0,_.Z)(function*(){(yield n.publicHelper.getEnumRecordStatus()).listItems.forEach(h=>{const f=document.createElement("option");f.innerHTML=" "+h.title+' <i Class="'+n.iconStatus(h.value)+'"></i>',f.value=h.value.toString(),n.elRef.nativeElement.add(f)}),n.elRef.nativeElement.options.length>0&&n.row&&n.row.recordStatus&&n.renderer.setProperty(n.elRef.nativeElement,"value",n.row.recordStatus)})()}onChange(){const n=this.elRef.nativeElement,r=n.value;this.addLoader(n),this.contentService.setAccessDataType(i.dR.Editor),this.contentService.ServiceSetStatus(this.row.id,r).subscribe({next:h=>{h.isSuccess?(this.handleSuccessCase(n),this.cmsToastrService.typeSuccessSetStatus(h.errorMessage),this.row.recordStatus=0|r,this.cdr.markForCheck()):(this.renderer.setProperty(this.elRef.nativeElement,"value",this.row.recordStatus),this.cmsToastrService.typeErrorSetStatus(h.errorMessage),this.handleErrorCase(n))},error:h=>{this.renderer.setProperty(this.elRef.nativeElement,"value",this.row.recordStatus),this.cmsToastrService.typeError(h),this.handleErrorCase(n)}})}handleSuccessCase(n){this.removeBackground(n),this.addSuccess(n),setTimeout(()=>{this.removeBackground(n)},1e3)}handleErrorCase(n){this.removeBackground(n);const r=this.document.createElement("img");r.style.width="20px",r.src="https://www.seekpng.com/png/detail/334-3345964_error-icon-download-attention-symbol.png";const h=this.renderer.parentNode(this.elRef.nativeElement);this.renderer.appendChild(h,r),setTimeout(()=>{this.renderer.removeChild(h,r)},1e3)}addLoader(n){this.addBackground(n,"https://replit.com/public/images/loading_dots.gif",20)}addSuccess(n){this.addBackground(n,"https://i.pinimg.com/originals/7b/dd/1b/7bdd1bc7db7fd48025d4e39a0e2f0fd8.jpg",20)}addBackground(n,r,h){n.style.background=`#fff url("${r}") no-repeat right 20px center`,n.style.backgroundSize=`${h}px`}removeBackground(n){n.style.background="none"}iconStatus(n){let r="";switch(n){case 1:default:r="fa fa-check";break;case 2:r="fa fa-eye-slash";break;case 3:r="fa fa-times";break;case 4:r="fa fa-hourglass-half";break;case 5:r="far fa-thumbs-down";break;case 6:r="fa fa-archive"}return r}static \u0275fac=function(r){return new(r||d)(o.Y36(o.SBq),o.Y36(o.Qsj),o.Y36(y.i),o.Y36(g.e),o.Y36(o.sBO),o.Y36(t.K0))};static \u0275dir=o.lG2({type:d,selectors:[["","cmsRecordStatusSelfSave",""]],hostBindings:function(r,h){1&r&&o.NdJ("change",function(){return h.onChange()})},inputs:{row:"row",contentService:"contentService"}})}return d})()},7548:(L,D,a)=>{a.d(D,{o:()=>i});var _=a(4537),t=a(707);let i=(()=>{class o{stepper;constructor(g){this.stepper=g}selectionChanged(){const g=this.stepper._getStepLabelId(this.stepper.selectedIndex),E=document.getElementById(g);E&&E.scrollIntoView({block:"start",inline:"nearest",behavior:"smooth"})}static \u0275fac=function(E){return new(E||o)(_.Y36(t.Vq))};static \u0275dir=_.lG2({type:o,selectors:[["mat-vertical-stepper"]],hostBindings:function(E,C){1&E&&_.NdJ("animationDone",function(){return C.selectionChanged()})}})}return o})()},532:(L,D,a)=>{a.d(D,{t:()=>_});var _=(()=>{return(t=_||(_={}))[t.none=0]="none",t[t.add=1]="add",t[t.edit=2]="edit",t[t.delete=3]="delete",t[t.list=4]="list",t[t.select=5]="select",_;var t})()},1447:(L,D,a)=>{a.d(D,{t:()=>_});class _{lat;lon}},5897:(L,D,a)=>{a.d(D,{Y:()=>i});var _=a(4537),t=a(5998);let i=(()=>{class o{sanitizer;constructor(g){this.sanitizer=g}transform(g){return"cms-RecordStatusEnum-cell-"+g}static \u0275fac=function(E){return new(E||o)(_.Y36(t.H7,16))};static \u0275pipe=_.Yjl({name:"statusCellClass",type:o,pure:!0})}return o})()},6639:(L,D,a)=>{a.d(D,{G:()=>i});var _=a(4537),t=a(5998);let i=(()=>{class o{sanitizer;constructor(g){this.sanitizer=g}transform(g,E=!1){let C="";switch(g){case 1:default:C="fa fa-check";break;case 2:C="fa fa-times";break;case 3:C="fa fa-trash";break;case 4:C="fa fa-hourglass-half";break;case 5:C="far fa-thumbs-down";break;case 6:C="fa fa-archive"}return C}static \u0275fac=function(E){return new(E||o)(_.Y36(t.H7,16))};static \u0275pipe=_.Yjl({name:"statusIconClass",type:o,pure:!0})}return o})()},3914:(L,D,a)=>{a.d(D,{s:()=>C});var _=a(2340),t=a(4536),i=a(4537);let o=(()=>{class O{dialogRef;data;static nextId=0;id=++O.nextId;constructor(d,m){this.dialogRef=d,this.data=m,m||this.dialogRef.close(!1)}ngOnInit(){}onDismiss(){this.dialogRef.close(!1)}onConfirm(){this.dialogRef.close(!0)}static \u0275fac=function(m){return new(m||O)(i.Y36(t.so),i.Y36(t.WI))};static \u0275cmp=i.Xpm({type:O,selectors:[["app-confirmation-dialog"]],decls:18,vars:4,consts:[[1,"menu","menu-box-modal","rounded-m","menu-active",2,"display","block","width","350px","height","320px","padding","20px"],[1,"menu-title"],[1,"fa","fa-question-circle","scale-box","float-start","me-3","ms-3","fa-3x","mt-1","color-blue-dark"],[1,"color-highlight"],[1,"font-20"],[1,"close-menu",3,"click"],[1,"fa","fa-times-circle"],[1,"content","mt-0"],[1,"pe-3",3,"innerHTML"],[1,"row","mb-0"],[1,"col-6"],[1,"btn","close-menu","btn-full","btn-m","bg-red-dark","font-600","rounded-s",3,"click"],[1,"btn","close-menu","btn-full","btn-m","bg-green-dark","font-600","rounded-s",3,"click"]],template:function(m,n){1&m&&(i.TgZ(0,"div",0)(1,"div",1),i._UZ(2,"i",2),i.TgZ(3,"p",3),i._uU(4),i.qZA(),i.TgZ(5,"h1",4),i._uU(6,"\u0645\u0637\u0645\u0626\u0646\u06cc\u062f\u061f"),i.qZA(),i.TgZ(7,"a",5),i.NdJ("click",function(){return n.onDismiss()}),i._UZ(8,"i",6),i.qZA()(),i.TgZ(9,"div",7),i._UZ(10,"p",8),i.TgZ(11,"div",9)(12,"div",10)(13,"a",11),i.NdJ("click",function(){return n.onDismiss()}),i._uU(14),i.qZA()(),i.TgZ(15,"div",10)(16,"a",12),i.NdJ("click",function(){return n.onConfirm()}),i._uU(17),i.qZA()()()()()),2&m&&(i.xp6(4),i.hij(" ",n.data.title,""),i.xp6(6),i.Q6J("innerHTML",n.data.message,i.oJD),i.xp6(4),i.Oqu(n.data.btnCancelText),i.xp6(3),i.Oqu(n.data.btnConfirmText))},encapsulation:2})}return O})();var y=a(727),g=a(6707);class E{title;message;constructor(u,d){this.title=u,this.message=d}btnConfirmText="OK";btnCancelText="Cancel";dialogSize="sm"}let C=(()=>{class O{dialog;tokenHelper;translate;constructor(d,m,n){this.dialog=d,this.tokenHelper=m,this.translate=n}confirm(d,m,n="",r="",h="sm"){const f=new E(d,m);return f.btnConfirmText=n,f.btnCancelText=r,f.dialogSize=h,(!f.btnConfirmText||""==f.btnConfirmText||0==f.btnConfirmText.length)&&this.translate.get("ACTION.CONFIRM").subscribe(R=>{f.btnConfirmText=R}),(!f.btnCancelText||""==f.btnCancelText||0==f.btnCancelText.length)&&this.translate.get("ACTION.CANCEL").subscribe(R=>{f.btnCancelText=R}),this.dialog.open(o,{height:"90%",panelClass:this.tokenHelper.isMobile?"dialog-fullscreen":"dialog-min",enterAnimationDuration:_.N.cmsViewConfig.enterAnimationDuration,exitAnimationDuration:_.N.cmsViewConfig.exitAnimationDuration,data:f}).afterClosed().toPromise().then(R=>Promise.resolve(R))}static \u0275fac=function(m){return new(m||O)(i.LFG(t.uw),i.LFG(y.v),i.LFG(g.sK))};static \u0275prov=i.Yz7({token:O,factory:O.\u0275fac})}return O})()},7904:(L,D,a)=>{a.d(D,{L:()=>m});var _=a(656),t=a(4537),i=a(8692);function o(n,r){1&n&&(t.TgZ(0,"div",8)(1,"p",9),t.Hsn(2,1),t.qZA()())}function y(n,r){1&n&&t._UZ(0,"div",10)}function g(n,r){1&n&&(t.TgZ(0,"div",11),t.Hsn(1,2),t.qZA())}function E(n,r){1&n&&t._UZ(0,"div",12)}function C(n,r){1&n&&t._UZ(0,"div",10)}function O(n,r){1&n&&(t.TgZ(0,"div",6)(1,"p",13),t.Hsn(2,3),t.qZA()())}const u=[[["","cms-tree-body",""]],[["","cms-tree-header",""]],[["","cms-tree-action",""]],[["","cms-tree-footer",""]]],d=["[cms-tree-body]","[cms-tree-header]","[cms-tree-action]","[cms-tree-footer]"];let m=(()=>{class n{static nextId=0;id=++n.nextId;optionHeaderDisplay=!0;optionActionMainDisplay=!0;optionFooterDisplay=!0;set optionLoading(h){this.loading=h}loading=new _.O;constructor(){}ngOnInit(){}static \u0275fac=function(f){return new(f||n)};static \u0275cmp=t.Xpm({type:n,selectors:[["app-cms-html-tree"]],inputs:{optionHeaderDisplay:"optionHeaderDisplay",optionActionMainDisplay:"optionActionMainDisplay",optionFooterDisplay:"optionFooterDisplay",optionLoading:"optionLoading"},ngContentSelectors:d,decls:10,vars:6,consts:[[1,"card","card-style"],[1,"row","justify-content-center","tree-parent"],["class","font-14 opacity-50",4,"ngIf"],["class","divider mb-1",4,"ngIf"],["class","col-12 pe-0 tree-child-hidden",4,"ngIf"],["class","divider mb-1 tree-child-hidden",4,"ngIf"],[1,"col-12","pe-0"],["class","col-12 pe-0",4,"ngIf"],[1,"font-14","opacity-50"],[1,"text-center","mb-2","mt-2","color-highlight","font-600"],[1,"divider","mb-1"],[1,"col-12","pe-0","tree-child-hidden"],[1,"divider","mb-1","tree-child-hidden"],[1,"text-center"]],template:function(f,T){1&f&&(t.F$t(u),t.TgZ(0,"div",0)(1,"div",1),t.YNc(2,o,3,0,"div",2),t.YNc(3,y,1,0,"div",3),t.YNc(4,g,2,0,"div",4),t.YNc(5,E,1,0,"div",5),t.TgZ(6,"div",6),t.Hsn(7),t.qZA(),t.YNc(8,C,1,0,"div",3),t.YNc(9,O,3,0,"div",7),t.qZA()()),2&f&&(t.xp6(2),t.Q6J("ngIf",T.optionHeaderDisplay),t.xp6(1),t.Q6J("ngIf",T.optionHeaderDisplay),t.xp6(1),t.Q6J("ngIf",T.optionActionMainDisplay),t.xp6(1),t.Q6J("ngIf",T.optionActionMainDisplay),t.xp6(3),t.Q6J("ngIf",T.optionFooterDisplay),t.xp6(1),t.Q6J("ngIf",T.optionFooterDisplay))},dependencies:[i.O5],encapsulation:2})}return n})()},6609:(L,D,a)=>{a.d(D,{D:()=>A});var _=a(8239),t=a(4537),i=a(92),o=a(4511),y=a(7445),g=a(1927),E=a(3151),C=a(2147),O=a(1528),u=a(7969),d=a(656),m=a(6707),n=a(4032),r=a(8692),h=a(1637),f=a(1379),T=a(8659),U=a(3331),R=a(9665),Z=a(7529),I=a(1418);function B(S,x){if(1&S&&(t.TgZ(0,"label",8),t._uU(1),t.qZA()),2&S){const e=t.oxw();t.MGl("for","app-cms-site-selector-",e.id,""),t.xp6(1),t.Oqu(e.optionLabel)}}function c(S,x){if(1&S&&(t._UZ(0,"img",11),t.ALo(1,"cmsthumbnail")),2&S){const e=t.oxw().$implicit;t.s9C("src",t.lcZ(1,1,e.linkImageIdSrc),t.LSH)}}function p(S,x){if(1&S&&(t.TgZ(0,"mat-option",9),t.YNc(1,c,2,3,"img",10),t.TgZ(2,"span"),t._uU(3),t.qZA()()),2&S){const e=x.$implicit,l=t.oxw();t.Q6J("value",e)("disabled",l.optionDisabled),t.xp6(1),t.Q6J("ngIf",e.linkImageIdSrc),t.xp6(2),t.Oqu(l.displayOption(e))}}function s(S,x){if(1&S){const e=t.EpF();t.TgZ(0,"mat-icon",12),t.NdJ("click",function(){t.CHM(e);const v=t.oxw();return t.KtG(v.onActionSelectClear())}),t._uU(1,"close"),t.qZA()}}const P=["*"];let A=(()=>{class S{coreEnumService;translate;publicHelper;cdr;categoryService;static nextId=0;id=++S.nextId;constructor(e,l,v,b,M){this.coreEnumService=e,this.translate=l,this.publicHelper=v,this.cdr=b,this.categoryService=M,this.publicHelper.processService.cdr=this.cdr,this.translate.get("MESSAGE.Receiving_information").subscribe(K=>{this.loading.message=K})}dataModelResult=new o.y$4;dataModelSelect=new o.Dp$;formControl=new i.NI;filteredOptions;optionDisabled=!1;optionSelectFirstItem=!1;optionPlaceholder="";optionLabel="";optionChange=new t.vpe;optionReload=()=>this.onActionButtonReload();set optionSelectForce(e){this.onActionSelectForce(e)}loading=new d.O;get optionLoading(){return this.loading}set optionLoading(e){this.loading=e}ngOnInit(){this.loadOptions(),(!this.optionLabel||0==this.optionLabel.length&&this.optionPlaceholder?.length>0)&&(this.optionLabel=this.optionPlaceholder)}loadOptions(){this.filteredOptions=this.formControl.valueChanges.pipe((0,g.O)(""),(0,E.b)(1500),(0,C.x)(),(0,O.w)(e=>this.DataGetAll("string"==typeof e||"number"==typeof e?e:"")))}displayFn(e){return e&&e.virtual_Parent&&e.virtual_Parent.title.length>0&&e.virtual_Parent.virtual_Parent&&e.virtual_Parent.virtual_Parent.title.length>0&&e.virtual_Parent.virtual_Parent.virtual_Parent&&e.virtual_Parent.virtual_Parent.virtual_Parent.title.length>0?e.virtual_Parent.virtual_Parent.virtual_Parent.titleML+" > "+e.virtual_Parent.virtual_Parent.titleML+" > "+e.virtual_Parent.titleML+" > "+e.titleML:e&&e.virtual_Parent&&e.virtual_Parent.title.length>0&&e.virtual_Parent.virtual_Parent&&e.virtual_Parent.virtual_Parent.title.length>0?e.virtual_Parent.virtual_Parent.titleML+" > "+e.virtual_Parent.titleML+" > "+e.titleML:e&&e.virtual_Parent&&e.virtual_Parent.title.length>0?e.virtual_Parent.titleML+" > "+e.titleML:e?e.titleML:void 0}displayOption(e){return e&&e.virtual_Parent&&e.virtual_Parent.title.length>0&&e.virtual_Parent.virtual_Parent&&e.virtual_Parent.virtual_Parent.title.length>0&&e.virtual_Parent.virtual_Parent.virtual_Parent&&e.virtual_Parent.virtual_Parent.virtual_Parent.title.length>0?e.virtual_Parent.virtual_Parent.virtual_Parent.titleML+" > "+e.virtual_Parent.virtual_Parent.titleML+" > "+e.virtual_Parent.titleML+" > "+e.titleML:e&&e.virtual_Parent&&e.virtual_Parent.title.length>0&&e.virtual_Parent.virtual_Parent&&e.virtual_Parent.virtual_Parent.title.length>0?e.virtual_Parent.virtual_Parent.titleML+" > "+e.virtual_Parent.titleML+" > "+e.titleML:e&&e.virtual_Parent&&e.virtual_Parent.title.length>0?e.virtual_Parent.titleML+" > "+e.titleML:e?e.titleML:void 0}DataGetAll(e){var l=this;return(0,_.Z)(function*(){const v=new o.Hay;if(v.rowPerPage=20,v.accessLoad=!0,e&&e.length>0){let M=new o.AO3;M=new o.AO3,M.propertyName="Symbol",M.value=e,M.searchType=o.J6G.Contains,M.clauseType=o.ppe.Or,v.filters.push(M),M=new o.AO3,M.propertyName="Title",M.value=e,M.searchType=o.J6G.Contains,M.clauseType=o.ppe.Or,v.filters.push(M),e&&"number"==typeof+e&&+e>0&&(M=new o.AO3,M.propertyName="Id",M.value=e,M.searchType=o.J6G.Equal,M.clauseType=o.ppe.Or,v.filters.push(M))}const b=l.constructor.name+"main";return l.publicHelper.processService.processStart(b),yield(0,y.z)(l.categoryService.ServiceGetAll(v)).then(M=>(l.dataModelResult=M,l.optionSelectFirstItem&&(!l.dataModelSelect||!l.dataModelSelect.id||l.dataModelSelect.id<=0)&&l.dataModelResult.listItems.length>0&&(l.optionSelectFirstItem=!1,setTimeout(()=>{l.formControl.setValue(l.dataModelResult.listItems[0])},1e3),l.onActionSelect(l.dataModelResult.listItems[0])),l.publicHelper.processService.processStop(b),M.listItems))})()}onActionSelect(e){this.optionDisabled||(this.dataModelSelect=e,this.optionChange.emit(this.dataModelSelect))}onActionSelectClear(){this.optionDisabled||(this.dataModelSelect=null,this.formControl.setValue(null),this.optionChange.emit(null))}push(e){return this.filteredOptions.pipe((0,u.U)(l=>(l.find(v=>v.id===e.id)||l.push(e),l)))}onActionSelectForce(e){if("number"==typeof e&&e>0){if(this.dataModelSelect&&this.dataModelSelect.id===e)return;if(this.dataModelResult&&this.dataModelResult.listItems&&this.dataModelResult.listItems.find(l=>l.id===e)){const l=this.dataModelResult.listItems.find(v=>v.id===e);return this.dataModelSelect=l,void this.formControl.setValue(l)}this.categoryService.ServiceGetOneIncludeParent(e).subscribe({next:l=>{l.isSuccess&&(this.filteredOptions=this.push(l.item),this.dataModelSelect=l.item,this.formControl.setValue(l.item),this.optionChange.emit(l.item))}})}else{if(typeof e==typeof o.Dp$)return this.filteredOptions=this.push(e),this.dataModelSelect=e,void this.formControl.setValue(e);this.formControl.setValue(null)}}onActionButtonReload(){this.dataModelSelect=new o.Dp$,this.loadOptions()}static \u0275fac=function(l){return new(l||S)(t.Y36(o.FLW),t.Y36(m.sK),t.Y36(n.i),t.Y36(t.sBO),t.Y36(o.XRW))};static \u0275cmp=t.Xpm({type:S,selectors:[["app-cms-location-selector"]],inputs:{optionDisabled:"optionDisabled",optionSelectFirstItem:"optionSelectFirstItem",optionPlaceholder:"optionPlaceholder",optionLabel:"optionLabel",optionReload:"optionReload",optionSelectForce:"optionSelectForce",optionLoading:"optionLoading"},outputs:{optionChange:"optionChange"},ngContentSelectors:P,decls:10,vars:12,consts:[[1,"input-style","has-borders","no-icon","input-style-always-active","validate-field","mb-4"],[3,"options"],["class","color-highlight",3,"for",4,"ngIf"],["type","text","matInput","",1,"form-control","validate-name",3,"placeholder","formControl","matAutocomplete","id"],[3,"displayWith","optionSelected"],["matauto","matAutocomplete"],[3,"value","disabled",4,"ngFor","ngForOf"],["matSuffix","","matSuffix","","mat-icon-button","","aria-label","Clear",3,"click",4,"ngIf"],[1,"color-highlight",3,"for"],[3,"value","disabled"],["style","vertical-align:middle;","class","ntk-hover-zoom","aria-hidden","","height","25","width","25",3,"src",4,"ngIf"],["aria-hidden","","height","25","width","25",1,"ntk-hover-zoom",2,"vertical-align","middle",3,"src"],["matSuffix","","matSuffix","","mat-icon-button","","aria-label","Clear",3,"click"]],template:function(l,v){if(1&l&&(t.F$t(),t.TgZ(0,"div",0),t._UZ(1,"cms-progress-spinner",1),t.YNc(2,B,2,2,"label",2),t._UZ(3,"input",3),t.TgZ(4,"mat-autocomplete",4,5),t.NdJ("optionSelected",function(M){return v.onActionSelect(M.option.value)}),t.YNc(6,p,4,4,"mat-option",6),t.ALo(7,"async"),t.qZA(),t.YNc(8,s,2,0,"mat-icon",7),t.Hsn(9),t.qZA()),2&l){const b=t.MAs(5);t.xp6(1),t.Q6J("options",v.loading),t.xp6(1),t.Q6J("ngIf",(null==v.optionLabel?null:v.optionLabel.length)>0),t.xp6(1),t.s9C("placeholder",v.optionPlaceholder),t.MGl("id","app-cms-site-selector-",v.id,""),t.Q6J("formControl",v.formControl)("matAutocomplete",b),t.uIk("disabled",!!v.optionDisabled||null),t.xp6(1),t.Q6J("displayWith",v.displayFn),t.xp6(2),t.Q6J("ngForOf",t.lcZ(7,10,v.filteredOptions)),t.xp6(2),t.Q6J("ngIf",null==v.dataModelSelect?null:v.dataModelSelect.id)}},dependencies:[r.sg,r.O5,i.Fj,i.JJ,i.oH,h.XC,f.ey,h.ZL,T.R9,U.Hw,R.Nt,Z.I,r.Ov,I.v],encapsulation:2})}return S})()},7407:(L,D,a)=>{a.d(D,{r:()=>E});var _=a(4537),t=a(4216),o=a(2340),y=a(2607),g=a(7128);let E=(()=>{class C{cmsToastrService;static nextId=0;id=++C.nextId;map$=new _.vpe;zoom$=new _.vpe;options={layers:[(0,t.tileLayer)(o.N.leafletUrl,{opacity:.7,maxZoom:19,detectRetina:!0})],zoom:16,center:[32.684985,51.6359425]};set optonCenter(u){this.map&&u&&u.lat&&u.lon&&0!==u.lat&&0!==u.lon&&this.map.setView(new t.LatLng(u.lat,u.lon),this.zoom)}set optionCurrentPoint(u){this.onActionCurrentPoint(u)}map;zoom;destroy=!1;constructor(u){this.cmsToastrService=u}ngOnInit(){const n=t.icon({iconRetinaUrl:"assets/leaflet/marker-icon-2x.png",iconUrl:"assets/leaflet/marker-icon.png",shadowUrl:"assets/leaflet/marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]});t.Marker.prototype.options.icon=n}ngAfterViewInit(){}ngOnDestroy(){this.map&&(this.map.clearAllEventListeners(),this.destroy=!0)}onMapReady(u){setTimeout(()=>{this.map&&!this.destroy&&u.invalidateSize()},500),this.map=u,this.map$.emit(u),this.zoom=u.getZoom(),this.zoom$.emit(this.zoom)}onMapZoomEnd(u){this.zoom=u.target.getZoom(),this.zoom$.emit(this.zoom)}onActionCurrentPoint(u=!0){this.getPosition().then(d=>{this.map.setView(new t.LatLng(d.lat,d.lon),this.zoom)})}getPosition(){return new Promise((u,d)=>{navigator.geolocation.getCurrentPosition(m=>{u({lon:m.coords.longitude,lat:m.coords.latitude})},m=>{this.cmsToastrService.typeErrorGetPosition()})})}static \u0275fac=function(d){return new(d||C)(_.Y36(y.e))};static \u0275cmp=_.Xpm({type:C,selectors:[["app-cms-map"]],inputs:{options:"options",optonCenter:"optonCenter",optionCurrentPoint:"optionCurrentPoint"},outputs:{map$:"map$",zoom$:"zoom$"},decls:1,vars:1,consts:[["leaflet","",1,"map-container",3,"leafletOptions","leafletMapReady","leafletMapZoomEnd"]],template:function(d,m){1&d&&(_.TgZ(0,"div",0),_.NdJ("leafletMapReady",function(r){return m.onMapReady(r)})("leafletMapZoomEnd",function(r){return m.onMapZoomEnd(r)}),_.qZA()),2&d&&_.Q6J("leafletOptions",m.options)},dependencies:[g.je],styles:[".map-container[_ngcontent-%COMP%]{width:100%;height:300px}"]})}return C})()},9831:(L,D,a)=>{a.d(D,{u:()=>Z});var _=a(5436),t=a(4537),i=a(92),o=a(4511),y=a(1927),g=a(3151),E=a(1528),C=a(7969),O=a(2607),u=a(8692),d=a(1637),m=a(1379),n=a(7084),r=a(8659),h=a(3331);const f=["tagInput"];function T(I,B){if(1&I){const c=t.EpF();t.TgZ(0,"mat-chip",9),t.NdJ("removed",function(){const P=t.CHM(c).$implicit,A=t.oxw();return t.KtG(A.remove(P))}),t._uU(1),t.TgZ(2,"button",10)(3,"mat-icon"),t._uU(4,"cancel"),t.qZA()()()}if(2&I){const c=B.$implicit;t.xp6(1),t.hij(" ",c.display," ")}}function U(I,B){if(1&I&&(t.TgZ(0,"mat-option",11),t._uU(1),t.qZA()),2&I){const c=B.$implicit;t.Q6J("value",c),t.xp6(1),t.hij(" ",c.display," ")}}let Z=(()=>{class I{service;cmsToastrService;static nextId=0;id=++I.nextId;constructor(c,p){this.service=c,this.cmsToastrService=p,this.filteredOptions=this.tagCtrl.valueChanges.pipe((0,y.O)(null),(0,g.b)(400),(0,E.w)(s=>this.filter(s||"")))}optionDisabled=!1;tagInput;optionPlaceholder="+ Tag";optionLabel="";optionChange=new t.vpe;set optionSelectForce(c){this.onActionSelectForce(c)}tagDataModel=[];tagLastDataModel=[];selectForceStatus=!0;separatorKeysCodes=[_.K5];tagCtrl=new i.NI("");filteredOptions;addOnBlur=!0;ngOnInit(){(!this.optionLabel||0==this.optionLabel.length&&this.optionPlaceholder?.length>0)&&(this.optionLabel=this.optionPlaceholder)}filter(c){const p=new o.Hay;p.rowPerPage=20,p.accessLoad=!0;let s=new o.AO3;return s.propertyName="Title",s.value=c,s.searchType=o.J6G.Contains,s.clauseType=o.ppe.Or,p.filters.push(s),c&&"number"==typeof+c&&+c>0&&(s=new o.AO3,s.propertyName="Id",s.value=c,s.searchType=o.J6G.Equal,s.clauseType=o.ppe.Or,p.filters.push(s)),this.service.ServiceGetAll(p).pipe((0,C.U)(P=>(this.tagLastDataModel=P.listItems.map(A=>({display:A.title,value:A.id})),this.tagLastDataModel)))}checkIndex(c){let p=0,s=-1;return this.tagDataModel.forEach(P=>{P.value==c&&(s=p),p++}),s}add(c){let p;c.value&&this.tagLastDataModel.forEach(s=>{(s.display==c.value||s.value+""==c.value)&&(p=s)}),p&&this.checkIndex(p.value)<0&&(this.tagDataModel.push(p),this.onActionChange()),c.chipInput.clear(),this.tagCtrl.setValue(null)}remove(c){const p=this.checkIndex(c.value);p>=0&&(this.tagDataModel.splice(p,1),this.onActionChange())}selected(c){const p=c.option.value;this.checkIndex(p.value)<0&&this.tagDataModel.push(p),this.tagInput.nativeElement.value="",this.tagCtrl.setValue(null),this.onActionChange()}onActionChange(){const c=[];this.tagDataModel.forEach(p=>{c.findIndex(s=>s==p.value)<0&&c.push(p.value)}),this.selectForceStatus=!1,this.optionChange.emit(c)}onActionSelectForce(c){if(!this.selectForceStatus||!c||0===c.length)return;const p=new o.Hay;c.forEach(s=>{if(s>0){const P=new o.AO3;P.propertyName="Id",P.value=s,P.clauseType=o.ppe.Or,p.filters.push(P)}}),this.service.ServiceGetAll(p).subscribe({next:s=>{s.isSuccess?s.listItems.forEach(P=>{this.tagDataModel.findIndex(A=>A.value==P.id)<0&&this.tagDataModel.push({value:P.id,display:P.title})}):this.cmsToastrService.typeErrorGetAll(s.errorMessage)},error:s=>{this.cmsToastrService.typeErrorGetAll(s)}})}static \u0275fac=function(p){return new(p||I)(t.Y36(o.dF2),t.Y36(O.e))};static \u0275cmp=t.Xpm({type:I,selectors:[["app-cms-tag-autocomplete"]],viewQuery:function(p,s){if(1&p&&t.Gf(f,5),2&p){let P;t.iGM(P=t.CRH())&&(s.tagInput=P.first)}},inputs:{optionDisabled:"optionDisabled",optionPlaceholder:"optionPlaceholder",optionLabel:"optionLabel",optionSelectForce:"optionSelectForce"},outputs:{optionChange:"optionChange"},decls:12,vars:12,consts:[["appearance","fill",2,"width","100%"],["aria-label","tag selection",3,"disabled"],["chipList",""],[3,"removed",4,"ngFor","ngForOf"],[3,"placeholder","matChipInputAddOnBlur","formControl","matAutocomplete","matChipInputFor","matChipInputSeparatorKeyCodes","matChipInputTokenEnd"],["tagInput",""],[3,"optionSelected"],["auto","matAutocomplete"],[3,"value",4,"ngFor","ngForOf"],[3,"removed"],["type","button","matChipRemove","",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-gray"],[3,"value"]],template:function(p,s){if(1&p&&(t.TgZ(0,"mat-form-field",0)(1,"mat-label"),t._uU(2),t.qZA(),t.TgZ(3,"mat-chip-grid",1,2),t.YNc(5,T,5,1,"mat-chip",3),t.TgZ(6,"input",4,5),t.NdJ("matChipInputTokenEnd",function(A){return s.add(A)}),t.qZA()(),t.TgZ(8,"mat-autocomplete",6,7),t.NdJ("optionSelected",function(A){return s.selected(A)}),t.YNc(10,U,2,2,"mat-option",8),t.ALo(11,"async"),t.qZA()()),2&p){const P=t.MAs(4),A=t.MAs(9);t.xp6(2),t.Oqu(s.optionLabel),t.xp6(1),t.Q6J("disabled",s.optionDisabled),t.xp6(2),t.Q6J("ngForOf",s.tagDataModel),t.xp6(1),t.Q6J("placeholder"," + "+s.optionPlaceholder)("matChipInputAddOnBlur",s.addOnBlur)("formControl",s.tagCtrl)("matAutocomplete",A)("matChipInputFor",P)("matChipInputSeparatorKeyCodes",s.separatorKeysCodes),t.xp6(4),t.Q6J("ngForOf",t.lcZ(11,10,s.filteredOptions))}},dependencies:[u.sg,i.Fj,i.JJ,i.oH,d.XC,m.ey,d.ZL,n.HS,n.RA,n.oH,n.qH,r.KE,r.hX,h.Hw,u.Ov],encapsulation:2})}return I})()}}]);