"use strict";(self.webpackChunkntk_cms_web=self.webpackChunkntk_cms_web||[]).push([[1519],{2317:(B,u,s)=>{s.d(u,{z:()=>L});var m=s(3308),t=s(7788),c=s(7222),i=s(8189),h=s(5804),f=s(965),M=s(8887),E=s(3793),C=s(2831),S=s(3527),O=s(5154),g=s(2882),p=s(6610),d=s(2497),D=s(8278),y=s(9344),I=s(6182),R=s(4587),P=s(7912);const A=["*"];function v(a,_){if(1&a&&(t.j41(0,"label",8),t.EFF(1),t.k0s()),2&a){const e=t.XpG();t.Mz_("for","app-cms-site-selector-",e.id,""),t.R7$(),t.JRh(e.optionLabel)}}function T(a,_){if(1&a&&(t.j41(0,"mat-option",9)(1,"span"),t.EFF(2),t.k0s()()),2&a){const e=_.$implicit,o=t.XpG();t.Y8G("value",e)("disabled",o.optionDisabled),t.R7$(2),t.JRh(o.displayOption(e))}}function b(a,_){if(1&a){const e=t.RV6();t.j41(0,"mat-icon",10),t.bIt("click",function(){t.eBV(e);const n=t.XpG();return t.Njj(n.onActionSelectClear())}),t.EFF(1,"close"),t.k0s()}}let L=(()=>{class a{static#t=this.nextId=0;constructor(e,o,n,r,l){this.coreEnumService=e,this.cdr=o,this.publicHelper=n,this.translate=r,this.categoryService=l,this.id=++a.nextId,this.dataModelResult=new i.N$V,this.dataModelSelect=new i.UAV,this.formControl=new c.MJ,this.optionDisabled=!1,this.optionSelectFirstItem=!1,this.optionPlaceholder="",this.optionLabel="",this.optionChange=new t.bkB,this.optionReload=()=>this.onActionButtonReload(),this.publicHelper.processService.cdr=this.cdr}set optionSelectForce(e){this.onActionSelectForce(e)}ngOnInit(){this.loadOptions(),(!this.optionLabel||0==this.optionLabel.length&&this.optionPlaceholder?.length>0)&&(this.optionLabel=this.optionPlaceholder)}loadOptions(){this.filteredOptions=this.formControl.valueChanges.pipe((0,f.Z)(""),(0,M.B)(1500),(0,E.F)(),(0,C.n)(e=>this.DataGetAll("string"==typeof e||"number"==typeof e?e:"")))}displayFn(e){return e?e.title:void 0}displayOption(e){return e?e.title:void 0}DataGetAll(e){var o=this;return(0,m.A)(function*(){const n=new i.O2i;if(n.rowPerPage=20,n.accessLoad=!0,e&&e.length>0){let l=new i.ycK;l=new i.ycK,l.propertyName="SubDomain",l.value=e,l.searchType=i._GO.Contains,l.clauseType=i.jL_.Or,n.filters.push(l),l=new i.ycK,l.propertyName="Domain",l.value=e,l.searchType=i._GO.Contains,l.clauseType=i.jL_.Or,n.filters.push(l),l=new i.ycK,l.propertyName="Title",l.value=e,l.searchType=i._GO.Contains,l.clauseType=i.jL_.Or,n.filters.push(l),e&&"number"==typeof+e&&+e>0&&(l=new i.ycK,l.propertyName="Id",l.value=e,l.searchType=i._GO.Equal,l.clauseType=i.jL_.Or,n.filters.push(l))}const r=o.constructor.name+"main";return o.translate.get("MESSAGE.Receiving_information").subscribe(l=>{o.publicHelper.processService.processStart(r,l,o.constructor.name)}),yield(0,h._)(o.categoryService.ServiceGetAll(n)).then(l=>(o.dataModelResult=l,o.optionSelectFirstItem&&(!o.dataModelSelect||!o.dataModelSelect.id||o.dataModelSelect.id<=0)&&o.dataModelResult.listItems.length>0&&(o.optionSelectFirstItem=!1,setTimeout(()=>{o.formControl.setValue(o.dataModelResult.listItems[0])},1e3),o.onActionSelect(o.dataModelResult.listItems[0])),o.publicHelper.processService.processStop(r),l.listItems))})()}onActionSelect(e){this.optionDisabled||(this.dataModelSelect=e,this.optionChange.emit(this.dataModelSelect))}onActionSelectClear(){this.optionDisabled||(this.dataModelSelect=null,this.formControl.setValue(null),this.optionChange.emit(null))}push(e){return this.filteredOptions.pipe((0,S.T)(o=>(o.find(n=>n.id===e.id)||o.push(e),o)))}onActionSelectForce(e){if("number"==typeof e&&e>0){if(this.dataModelSelect&&this.dataModelSelect.id===e)return;if(this.dataModelResult&&this.dataModelResult.listItems&&this.dataModelResult.listItems.find(o=>o.id===e)){const o=this.dataModelResult.listItems.find(n=>n.id===e);return this.dataModelSelect=o,void this.formControl.setValue(o)}this.categoryService.ServiceGetOneById(e).subscribe({next:o=>{o.isSuccess&&(this.filteredOptions=this.push(o.item),this.dataModelSelect=o.item,this.formControl.setValue(o.item),this.optionChange.emit(o.item))}})}else{if(typeof e==typeof i.UAV)return this.filteredOptions=this.push(e),this.dataModelSelect=e,void this.formControl.setValue(e);this.formControl.setValue(null)}}onActionButtonReload(){this.dataModelSelect=new i.UAV,this.loadOptions()}static#e=this.\u0275fac=function(o){return new(o||a)(t.rXU(i.i9D),t.rXU(t.gRc),t.rXU(O.A),t.rXU(g.c$),t.rXU(i.WCW))};static#o=this.\u0275cmp=t.VBU({type:a,selectors:[["app-cms-sitecategory-selector"]],inputs:{optionDisabled:"optionDisabled",optionSelectFirstItem:"optionSelectFirstItem",optionPlaceholder:"optionPlaceholder",optionLabel:"optionLabel",optionReload:"optionReload",optionSelectForce:"optionSelectForce"},outputs:{optionChange:"optionChange"},ngContentSelectors:A,decls:10,vars:13,consts:[["matauto","matAutocomplete"],[1,"input-style","has-borders","no-icon","input-style-always-active","validate-field","mb-4","progressOverlayContainer"],[3,"optionsInfoAreaId"],["class","color-highlight",3,"for",4,"ngIf"],["type","text","matInput","",1,"form-control","validate-name",3,"placeholder","formControl","matAutocomplete","id"],[3,"optionSelected","displayWith"],["class","color-highlight",3,"value","disabled",4,"ngFor","ngForOf"],["matSuffix","","matSuffix","","mat-icon-button","","aria-label","Clear",3,"click",4,"ngIf"],[1,"color-highlight",3,"for"],[1,"color-highlight",3,"value","disabled"],["matSuffix","","matSuffix","","mat-icon-button","","aria-label","Clear",3,"click"]],template:function(o,n){if(1&o){const r=t.RV6();t.NAR(),t.j41(0,"div",1),t.nrm(1,"app-progress-spinner",2),t.DNE(2,v,2,3,"label",3),t.nrm(3,"input",4),t.j41(4,"mat-autocomplete",5,0),t.bIt("optionSelected",function(U){return t.eBV(r),t.Njj(n.onActionSelect(U.option.value))}),t.DNE(6,T,3,3,"mat-option",6),t.nI1(7,"async"),t.k0s(),t.DNE(8,b,2,0,"mat-icon",7),t.SdG(9),t.k0s()}if(2&o){const r=t.sdS(5);t.R7$(),t.Y8G("optionsInfoAreaId",n.constructor.name),t.R7$(),t.Y8G("ngIf",(null==n.optionLabel?null:n.optionLabel.length)>0),t.R7$(),t.FS9("placeholder",n.optionPlaceholder),t.Mz_("id","app-cms-site-selector-",n.id,""),t.Y8G("formControl",n.formControl)("matAutocomplete",r),t.BMQ("disabled",!!n.optionDisabled||null),t.R7$(),t.Y8G("displayWith",n.displayFn),t.R7$(2),t.Y8G("ngForOf",t.bMT(7,11,n.filteredOptions)),t.R7$(2),t.Y8G("ngIf",null==n.dataModelSelect?null:n.dataModelSelect.id)}},dependencies:[p.Sq,p.bT,c.me,c.BC,c.l_,d.$3,D.wT,d.pN,y.yw,I.An,R.fg,P._,p.Jj],encapsulation:2})}return a})()},5435:(B,u,s)=>{s.d(u,{E:()=>L});var m=s(3308),t=s(7788),c=s(7222),i=s(8189),h=s(5804),f=s(965),M=s(8887),E=s(3793),C=s(2831),S=s(3527),O=s(5154),g=s(2882),p=s(6610),d=s(2497),D=s(8278),y=s(9344),I=s(6182),R=s(4587),P=s(7912);const A=["*"];function v(a,_){if(1&a&&(t.j41(0,"label",8),t.EFF(1),t.k0s()),2&a){const e=t.XpG();t.Mz_("for","app-cms-site-selector-",e.id,""),t.R7$(),t.JRh(e.optionLabel)}}function T(a,_){if(1&a&&(t.j41(0,"mat-option",9)(1,"span"),t.EFF(2),t.k0s()()),2&a){const e=_.$implicit,o=t.XpG();t.Y8G("value",e)("disabled",o.optionDisabled),t.R7$(2),t.JRh(o.displayOption(e))}}function b(a,_){if(1&a){const e=t.RV6();t.j41(0,"mat-icon",10),t.bIt("click",function(){t.eBV(e);const n=t.XpG();return t.Njj(n.onActionSelectClear())}),t.EFF(1,"close"),t.k0s()}}let L=(()=>{class a{static#t=this.nextId=0;constructor(e,o,n,r,l){this.coreEnumService=e,this.cdr=o,this.publicHelper=n,this.translate=r,this.categoryService=l,this.id=++a.nextId,this.dataModelResult=new i.N$V,this.dataModelSelect=new i.fNb,this.formControl=new c.MJ,this.optionDisabled=!1,this.optionSelectFirstItem=!1,this.optionPlaceholder="",this.optionLabel="",this.optionChange=new t.bkB,this.optionReload=()=>this.onActionButtonReload(),this.publicHelper.processService.cdr=this.cdr}set optionSelectForce(e){this.onActionSelectForce(e)}ngOnInit(){this.loadOptions(),(!this.optionLabel||0==this.optionLabel.length&&this.optionPlaceholder?.length>0)&&(this.optionLabel=this.optionPlaceholder)}loadOptions(){this.filteredOptions=this.formControl.valueChanges.pipe((0,f.Z)(""),(0,M.B)(1500),(0,E.F)(),(0,C.n)(e=>this.DataGetAll("string"==typeof e||"number"==typeof e?e:"")))}displayFn(e){return e?e.title:void 0}displayOption(e){return e?e.title:void 0}DataGetAll(e){var o=this;return(0,m.A)(function*(){const n=new i.O2i;if(n.rowPerPage=20,n.accessLoad=!0,e&&e.length>0){let l=new i.ycK;l=new i.ycK,l.propertyName="username",l.value=e,l.searchType=i._GO.Contains,l.clauseType=i.jL_.Or,n.filters.push(l),l=new i.ycK,l.propertyName="name",l.value=e,l.searchType=i._GO.Contains,l.clauseType=i.jL_.Or,n.filters.push(l),l=new i.ycK,l.propertyName="email",l.value=e,l.searchType=i._GO.Contains,l.clauseType=i.jL_.Or,n.filters.push(l),l=new i.ycK,l.propertyName="lastname",l.value=e,l.searchType=i._GO.Contains,l.clauseType=i.jL_.Or,n.filters.push(l),e&&"number"==typeof+e&&+e>0&&(l=new i.ycK,l.propertyName="Id",l.value=e,l.searchType=i._GO.Equal,l.clauseType=i.jL_.Or,n.filters.push(l))}const r=o.constructor.name+"main";return o.translate.get("MESSAGE.Receiving_information").subscribe(l=>{o.publicHelper.processService.processStart(r,l,o.constructor.name)}),yield(0,h._)(o.categoryService.ServiceGetAll(n)).then(l=>(o.dataModelResult=l,o.optionSelectFirstItem&&(!o.dataModelSelect||!o.dataModelSelect.id||o.dataModelSelect.id<=0)&&o.dataModelResult.listItems.length>0&&(o.optionSelectFirstItem=!1,setTimeout(()=>{o.formControl.setValue(o.dataModelResult.listItems[0])},1e3),o.onActionSelect(o.dataModelResult.listItems[0])),o.publicHelper.processService.processStop(r),l.listItems))})()}onActionSelect(e){this.optionDisabled||(this.dataModelSelect=e,this.optionChange.emit(this.dataModelSelect))}onActionSelectClear(){this.optionDisabled||(this.dataModelSelect=null,this.formControl.setValue(null),this.optionChange.emit(null))}push(e){return this.filteredOptions.pipe((0,S.T)(o=>(o.find(n=>n.id===e.id)||o.push(e),o)))}onActionSelectForce(e){if("number"==typeof e&&e>0){if(this.dataModelSelect&&this.dataModelSelect.id===e)return;if(this.dataModelResult&&this.dataModelResult.listItems&&this.dataModelResult.listItems.find(o=>o.id===e)){const o=this.dataModelResult.listItems.find(n=>n.id===e);return this.dataModelSelect=o,void this.formControl.setValue(o)}this.categoryService.ServiceGetOneById(e).subscribe({next:o=>{o.isSuccess&&(this.filteredOptions=this.push(o.item),this.dataModelSelect=o.item,this.formControl.setValue(o.item),this.optionChange.emit(o.item))}})}else{if(typeof e==typeof i.fNb)return this.filteredOptions=this.push(e),this.dataModelSelect=e,void this.formControl.setValue(e);this.formControl.setValue(null)}}onActionButtonReload(){this.dataModelSelect=new i.fNb,this.loadOptions()}static#e=this.\u0275fac=function(o){return new(o||a)(t.rXU(i.i9D),t.rXU(t.gRc),t.rXU(O.A),t.rXU(g.c$),t.rXU(i.jmw))};static#o=this.\u0275cmp=t.VBU({type:a,selectors:[["app-cms-usergroup-selector"]],inputs:{optionDisabled:"optionDisabled",optionSelectFirstItem:"optionSelectFirstItem",optionPlaceholder:"optionPlaceholder",optionLabel:"optionLabel",optionReload:"optionReload",optionSelectForce:"optionSelectForce"},outputs:{optionChange:"optionChange"},ngContentSelectors:A,decls:10,vars:13,consts:[["matauto","matAutocomplete"],[1,"input-style","has-borders","no-icon","input-style-always-active","validate-field","mb-4","progressOverlayContainer"],[3,"optionsInfoAreaId"],["class","color-highlight",3,"for",4,"ngIf"],["type","text","matInput","",1,"form-control","validate-name",3,"placeholder","formControl","matAutocomplete","id"],[3,"optionSelected","displayWith"],["class","color-highlight",3,"value","disabled",4,"ngFor","ngForOf"],["matSuffix","","matSuffix","","mat-icon-button","","aria-label","Clear",3,"click",4,"ngIf"],[1,"color-highlight",3,"for"],[1,"color-highlight",3,"value","disabled"],["matSuffix","","matSuffix","","mat-icon-button","","aria-label","Clear",3,"click"]],template:function(o,n){if(1&o){const r=t.RV6();t.NAR(),t.j41(0,"div",1),t.nrm(1,"app-progress-spinner",2),t.DNE(2,v,2,3,"label",3),t.nrm(3,"input",4),t.j41(4,"mat-autocomplete",5,0),t.bIt("optionSelected",function(U){return t.eBV(r),t.Njj(n.onActionSelect(U.option.value))}),t.DNE(6,T,3,3,"mat-option",6),t.nI1(7,"async"),t.k0s(),t.DNE(8,b,2,0,"mat-icon",7),t.SdG(9),t.k0s()}if(2&o){const r=t.sdS(5);t.R7$(),t.Y8G("optionsInfoAreaId",n.constructor.name),t.R7$(),t.Y8G("ngIf",(null==n.optionLabel?null:n.optionLabel.length)>0),t.R7$(),t.FS9("placeholder",n.optionPlaceholder),t.Mz_("id","app-cms-site-selector-",n.id,""),t.Y8G("formControl",n.formControl)("matAutocomplete",r),t.BMQ("disabled",!!n.optionDisabled||null),t.R7$(),t.Y8G("displayWith",n.displayFn),t.R7$(2),t.Y8G("ngForOf",t.bMT(7,11,n.filteredOptions)),t.R7$(2),t.Y8G("ngIf",null==n.dataModelSelect?null:n.dataModelSelect.id)}},dependencies:[p.Sq,p.bT,c.me,c.BC,c.l_,d.$3,D.wT,d.pN,y.yw,I.An,R.fg,P._,p.Jj],encapsulation:2})}return a})()}}]);