(self.webpackChunkntk_cms_web=self.webpackChunkntk_cms_web||[]).push([[1700],{7226:()=>{window.libpannellum=function(st,M,f){"use strict";function t($,At){var D;$&&((D=M.createElement("canvas")).style.width=D.style.height="100%",$.appendChild(D));var m,i,ot,ht,O,P,ut,at,Mt,de,Ht,v,et,B,St,vt,ee,Bt,Zt=["f","b","u","d","l","r"],Ft=["f","r","b","l","u","d"];function ie(s,x){return 1==s.level&&1!=x.level?-1:1==x.level&&1!=s.level?1:x.timestamp-s.timestamp}function ft(s,x){return s.level!=x.level?s.level-x.level:s.diff-x.diff}function pt(s,x,h,y,L,R,T){this.vertices=s,this.side=x,this.level=h,this.x=y,this.y=L;var k="object"==typeof R?R.tileKey:R;k=k.replace("%s",x).replace("%l0",h-1).replace("%l",h).replace("%x",y).replace("%y",L),this.path="object"==typeof R?R[k]:k,this.parentPath=T}function Ot(s,x,h,y,L,R){if(function te(s,x){var h=jt(s,x.slice(0,3)),y=jt(s,x.slice(3,6)),L=jt(s,x.slice(6,9)),R=jt(s,x.slice(9,12)),T=h[0]+y[0]+L[0]+R[0];if(-4==T||4==T)return!1;var k=h[1]+y[1]+L[1]+R[1];return-4!=k&&4!=k&&4!=h[2]+y[2]+L[2]+R[2]}(s,h.vertices)){for(var T=[],k=[],Z=2,K=[],z=0,Y=0;Y<4;Y++){var rt=F(x,h.vertices.slice(3*Y,3*(Y+1)));T.push(rt[0]*rt[3]),k.push(rt[1]*rt[3]);var qt=rt[2]*rt[3];Z=Math.min(Z,qt),K.push(Math.abs(T[Y])<=1&&Math.abs(k[Y])<=1&&qt>0),z+=K[Y]}var Jt=v.cubeResolution*Math.pow(2,h.level-v.maxLevel),lt=Math.ceil(Jt*v.invTileResolution)-1,nt=Jt%v.tileResolution*2,_t=2*Jt%v.tileResolution;if(0===_t&&(_t=v.tileResolution),0===nt&&(nt=2*v.tileResolution),h.level>1&&Z>0&&z>0){var gt=0;for(Y=0;Y<4;Y++){var xt=(Y+1)%4;if(K[Y]||K[xt]){var Nt=(T[xt]-T[Y])*i.drawingBufferWidth/2,tt=(k[xt]-k[Y])*i.drawingBufferHeight/2;_t<v.tileResolution&&(h.x==lt?Nt*=v.tileResolution/_t:h.y==lt&&(tt*=v.tileResolution/_t)),nt<=v.tileResolution&&(h.x==lt&&(Nt*=2),h.y==lt&&(tt*=2)),gt=Math.max(gt,Math.sqrt(Nt*Nt+tt*tt))}}if(gt<=v.tileResolution/2)return}var g=h.vertices,wt=g[0]+g[3]+g[6]+g[9],Rt=g[1]+g[4]+g[7]+g[10],mt=g[2]+g[5]+g[8]+g[11],Ut=Math.sqrt(wt*wt+Rt*Rt+mt*mt),c=Math.asin(mt/Ut),l=Math.atan2(Rt,wt)-L;l+=l>Math.PI?-2*Math.PI:l<-Math.PI?2*Math.PI:0,l=Math.abs(l),h.diff=Math.acos(Math.sin(y)*Math.sin(c)+Math.cos(y)*Math.cos(c)*Math.cos(l));for(var n=!1,u=0;u<m.nodeCache.length;u++)if(m.nodeCache[u].path==h.path){n=!0,m.nodeCache[u].timestamp=m.nodeCacheTimestamp++,m.nodeCache[u].diff=h.diff,m.currentNodes.push(m.nodeCache[u]);break}if(n||(h.timestamp=m.nodeCacheTimestamp++,m.currentNodes.push(h),m.nodeCache.push(h)),h.level<v.maxLevel){var a=.5;(h.x==lt||h.y==lt)&&(a=1-v.tileResolution/(v.tileResolution+_t));var N,_=[],ct=a,G=a,Q=a,H=Y=1-a,Tt=Y,Dt=Y;for(_t<v.tileResolution&&(h.x==lt&&h.y!=lt?(G=.5,Tt=.5,("d"==h.side||"u"==h.side)&&(Q=.5,Dt=.5)):h.x!=lt&&h.y==lt&&(ct=.5,H=.5,("l"==h.side||"r"==h.side)&&(Q=.5,Dt=.5))),nt<=v.tileResolution&&(h.x==lt&&(ct=0,H=1,("l"==h.side||"r"==h.side)&&(Q=0,Dt=1)),h.y==lt&&(G=0,Tt=1,("d"==h.side||"u"==h.side)&&(Q=0,Dt=1))),N=new pt(new Float32Array([g[0],g[1],g[2],g[0]*ct+g[3]*H,g[1]*a+g[4]*Y,g[2]*Q+g[5]*Dt,g[0]*ct+g[6]*H,g[1]*G+g[7]*Tt,g[2]*Q+g[8]*Dt,g[0]*a+g[9]*Y,g[1]*G+g[10]*Tt,g[2]*Q+g[11]*Dt]),h.side,h.level+1,2*h.x,2*h.y,v.fullpath,h.path),_.push(N),h.x==lt&&nt<=v.tileResolution||(N=new pt(new Float32Array([g[0]*ct+g[3]*H,g[1]*a+g[4]*Y,g[2]*Q+g[5]*Dt,g[3],g[4],g[5],g[3]*a+g[6]*Y,g[4]*G+g[7]*Tt,g[5]*Q+g[8]*Dt,g[0]*ct+g[6]*H,g[1]*G+g[7]*Tt,g[2]*Q+g[8]*Dt]),h.side,h.level+1,2*h.x+1,2*h.y,v.fullpath,h.path),_.push(N)),!(h.x==lt&&nt<=v.tileResolution)&&!(h.y==lt&&nt<=v.tileResolution)&&(N=new pt(new Float32Array([g[0]*ct+g[6]*H,g[1]*G+g[7]*Tt,g[2]*Q+g[8]*Dt,g[3]*a+g[6]*Y,g[4]*G+g[7]*Tt,g[5]*Q+g[8]*Dt,g[6],g[7],g[8],g[9]*ct+g[6]*H,g[10]*a+g[7]*Y,g[11]*Q+g[8]*Dt]),h.side,h.level+1,2*h.x+1,2*h.y+1,v.fullpath,h.path),_.push(N)),h.y==lt&&nt<=v.tileResolution||(N=new pt(new Float32Array([g[0]*a+g[9]*Y,g[1]*G+g[10]*Tt,g[2]*Q+g[11]*Dt,g[0]*ct+g[6]*H,g[1]*G+g[7]*Tt,g[2]*Q+g[8]*Dt,g[9]*ct+g[6]*H,g[10]*a+g[7]*Y,g[11]*Q+g[8]*Dt,g[9],g[10],g[11]]),h.side,h.level+1,2*h.x,2*h.y+1,v.fullpath,h.path),_.push(N)),xt=0;xt<_.length;xt++)Ot(s,x,_[xt],y,L,R)}}}function oe(){return new Float32Array([-1,1,-1,1,1,-1,1,-1,-1,-1,-1,-1,1,1,1,-1,1,1,-1,-1,1,1,-1,1,-1,1,1,1,1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1,1,-1,1,-1,-1,1,-1,1,1,-1,1,-1,-1,-1,-1,-1,-1,1,1,1,-1,1,1,1,1,-1,1,1,-1,-1])}function Xt(s,x,h){var y=Math.sin(x),L=Math.cos(x);return"x"==h?new Float32Array([s[0],L*s[1]+y*s[2],L*s[2]-y*s[1],s[3],L*s[4]+y*s[5],L*s[5]-y*s[4],s[6],L*s[7]+y*s[8],L*s[8]-y*s[7]]):"y"==h?new Float32Array([L*s[0]-y*s[2],s[1],L*s[2]+y*s[0],L*s[3]-y*s[5],s[4],L*s[5]+y*s[3],L*s[6]-y*s[8],s[7],L*s[8]+y*s[6]]):"z"==h?new Float32Array([L*s[0]+y*s[1],L*s[1]-y*s[0],s[2],L*s[3]+y*s[4],L*s[4]-y*s[3],s[5],L*s[6]+y*s[7],L*s[7]-y*s[6],s[8]]):void 0}function yt(s){return new Float32Array([s[0],s[4],s[8],s[12],s[1],s[5],s[9],s[13],s[2],s[6],s[10],s[14],s[3],s[7],s[11],s[15]])}function _e(s,x,h,y){var L=2*Math.atan(Math.tan(s/2)*i.drawingBufferHeight/i.drawingBufferWidth),R=1/Math.tan(L/2);return new Float32Array([R/x,0,0,0,0,R,0,0,0,0,(y+h)/(h-y),2*y*h/(h-y),0,0,-1,0])}function ae(s,x){i.bindTexture(i.TEXTURE_2D,x),i.texImage2D(i.TEXTURE_2D,0,i.RGB,i.RGB,i.UNSIGNED_BYTE,s),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MAG_FILTER,i.LINEAR),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MIN_FILTER,i.LINEAR),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_S,i.CLAMP_TO_EDGE),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_T,i.CLAMP_TO_EDGE),i.bindTexture(i.TEXTURE_2D,null)}At&&(i=At),this.init=function(s,x,h,y,L,R,T){if(x===f&&(x="equirectangular"),"equirectangular"!=x&&"cubemap"!=x&&"multires"!=x)throw console.log("Error: invalid image type specified!"),{type:"config error"};if(et=x,v=s,Bt=T||{},m){if(ot&&(i.detachShader(m,ot),i.deleteShader(ot)),ht&&(i.detachShader(m,ht),i.deleteShader(ht)),i.bindBuffer(i.ARRAY_BUFFER,null),i.bindBuffer(i.ELEMENT_ARRAY_BUFFER,null),m.texture&&i.deleteTexture(m.texture),m.nodeCache)for(var k=0;k<m.nodeCache.length;k++)i.deleteTexture(m.nodeCache[k].texture);if(m.textureLoads)for(j=[];m.textureLoads.length>0;)m.textureLoads.shift()(!1);i.deleteProgram(m),m=f}O&&(P&&(i.detachShader(O,P),i.deleteShader(P)),ut&&(i.detachShader(O,ut),i.deleteShader(ut)),i.deleteProgram(O),O=f),Ht=f;var Z,z,K=!1;if("cubemap"==et)for(Z=0;Z<6;Z++)v[Z].width>0?(z===f&&(z=v[Z].width),z!=v[Z].width&&console.log("Cube faces have inconsistent widths: "+z+" vs. "+v[Z].width)):K=!0;function Y(p){if(K){var N=p*p*4,ct=new Uint8ClampedArray(N),G=T.backgroundColor?T.backgroundColor:[0,0,0];G[0]*=255,G[1]*=255,G[2]*=255;for(var Q=0;Q<N;Q++)ct[Q++]=G[0],ct[Q++]=G[1],ct[Q++]=G[2];var H=new ImageData(ct,p,p);for(Z=0;Z<6;Z++)0==v[Z].width&&(v[Z]=H)}}if("cubemap"==et&&z&z-1&&(navigator.userAgent.toLowerCase().match(/(iphone|ipod|ipad).* os 8_/)||navigator.userAgent.toLowerCase().match(/(iphone|ipod|ipad).* os 9_/)||navigator.userAgent.toLowerCase().match(/(iphone|ipod|ipad).* os 10_/)||navigator.userAgent.match(/Trident.*rv[ :]*11\./))||(i||(i=D.getContext("experimental-webgl",{alpha:!1,depth:!1})),i&&1286==i.getError()&&pe()),i||!("multires"==et&&v.hasOwnProperty("fallbackPath")||"cubemap"==et)||!("WebkitAppearance"in M.documentElement.style)&&!navigator.userAgent.match(/Trident.*rv[ :]*11\./)&&-1===navigator.appVersion.indexOf("MSIE 10")){if(!i)throw console.log("Error: no WebGL support detected!"),{type:"no webgl"};"cubemap"==et&&Y(z),v.fullpath=v.basePath?v.basePath+v.path:v.path,v.invTileResolution=1/v.tileResolution;var _t=oe();for(de=[],Z=0;Z<6;Z++)de[Z]=_t.slice(12*Z,12*Z+12),_t=oe();var gt=0;if("equirectangular"==et){if(gt=i.getParameter(i.MAX_TEXTURE_SIZE),Math.max(v.width/2,v.height)>gt)throw console.log("Error: The image is too big; it's "+v.width+"px wide, but this device's maximum supported size is "+2*gt+"px."),{type:"webgl size error",width:v.width,maxWidth:2*gt}}else if("cubemap"==et&&z>i.getParameter(i.MAX_CUBE_MAP_TEXTURE_SIZE))throw console.log("Error: The image is too big; it's "+z+"px wide, but this device's maximum supported size is "+gt+"px."),{type:"webgl size error",width:z,maxWidth:gt};if(T!==f){var xt=isNaN(T.horizonPitch)?0:Number(T.horizonPitch),Nt=isNaN(T.horizonRoll)?0:Number(T.horizonRoll);(0!=xt||0!=Nt)&&(Ht=[xt,Nt])}var tt=i.TEXTURE_2D;if(i.viewport(0,0,i.drawingBufferWidth,i.drawingBufferHeight),i.getShaderPrecisionFormat){var g=i.getShaderPrecisionFormat(i.FRAGMENT_SHADER,i.HIGH_FLOAT);g&&g.precision<1&&(dt=dt.replace("highp","mediump"))}ot=i.createShader(i.VERTEX_SHADER);var wt=I;"multires"==et&&(wt=V),i.shaderSource(ot,wt),i.compileShader(ot),ht=i.createShader(i.FRAGMENT_SHADER);var Rt=X;if("cubemap"==et?(tt=i.TEXTURE_CUBE_MAP,Rt=e):"multires"==et&&(Rt=J),i.shaderSource(ht,Rt),i.compileShader(ht),m=i.createProgram(),i.attachShader(m,ot),i.attachShader(m,ht),i.linkProgram(m),i.getShaderParameter(ot,i.COMPILE_STATUS)||console.log(i.getShaderInfoLog(ot)),i.getShaderParameter(ht,i.COMPILE_STATUS)||console.log(i.getShaderInfoLog(ht)),i.getProgramParameter(m,i.LINK_STATUS)||console.log(i.getProgramInfoLog(m)),i.useProgram(m),m.drawInProgress=!1,null!==T.backgroundColor){var mt=T.backgroundColor?T.backgroundColor:[0,0,0];i.clearColor(mt[0],mt[1],mt[2],1),i.clear(i.COLOR_BUFFER_BIT)}if(m.texCoordLocation=i.getAttribLocation(m,"a_texCoord"),i.enableVertexAttribArray(m.texCoordLocation),"multires"!=et){if(B||(B=i.createBuffer()),i.bindBuffer(i.ARRAY_BUFFER,B),i.bufferData(i.ARRAY_BUFFER,new Float32Array([-1,1,1,1,1,-1,-1,1,1,-1,-1,-1]),i.STATIC_DRAW),i.vertexAttribPointer(m.texCoordLocation,2,i.FLOAT,!1,0,0),m.aspectRatio=i.getUniformLocation(m,"u_aspectRatio"),i.uniform1f(m.aspectRatio,i.drawingBufferWidth/i.drawingBufferHeight),m.psi=i.getUniformLocation(m,"u_psi"),m.theta=i.getUniformLocation(m,"u_theta"),m.f=i.getUniformLocation(m,"u_f"),m.h=i.getUniformLocation(m,"u_h"),m.v=i.getUniformLocation(m,"u_v"),m.vo=i.getUniformLocation(m,"u_vo"),m.rot=i.getUniformLocation(m,"u_rot"),i.uniform1f(m.h,h/(2*Math.PI)),i.uniform1f(m.v,y/Math.PI),i.uniform1f(m.vo,L/Math.PI*2),"equirectangular"==et&&(m.backgroundColor=i.getUniformLocation(m,"u_backgroundColor"),i.uniform4fv(m.backgroundColor,mt.concat([1]))),m.texture=i.createTexture(),i.bindTexture(tt,m.texture),"cubemap"==et)i.texImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X,0,i.RGB,i.RGB,i.UNSIGNED_BYTE,v[1]),i.texImage2D(i.TEXTURE_CUBE_MAP_NEGATIVE_X,0,i.RGB,i.RGB,i.UNSIGNED_BYTE,v[3]),i.texImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_Y,0,i.RGB,i.RGB,i.UNSIGNED_BYTE,v[4]),i.texImage2D(i.TEXTURE_CUBE_MAP_NEGATIVE_Y,0,i.RGB,i.RGB,i.UNSIGNED_BYTE,v[5]),i.texImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_Z,0,i.RGB,i.RGB,i.UNSIGNED_BYTE,v[0]),i.texImage2D(i.TEXTURE_CUBE_MAP_NEGATIVE_Z,0,i.RGB,i.RGB,i.UNSIGNED_BYTE,v[2]);else if(v.width<=gt)i.uniform1i(i.getUniformLocation(m,"u_splitImage"),0),i.texImage2D(tt,0,i.RGB,i.RGB,i.UNSIGNED_BYTE,v);else{i.uniform1i(i.getUniformLocation(m,"u_splitImage"),1);var Ut=M.createElement("canvas");Ut.width=v.width/2,Ut.height=v.height;var c=Ut.getContext("2d");c.drawImage(v,0,0);var b=c.getImageData(0,0,v.width/2,v.height);i.texImage2D(tt,0,i.RGB,i.RGB,i.UNSIGNED_BYTE,b),m.texture2=i.createTexture(),i.activeTexture(i.TEXTURE1),i.bindTexture(tt,m.texture2),i.uniform1i(i.getUniformLocation(m,"u_image1"),1),c.drawImage(v,-v.width/2,0),b=c.getImageData(0,0,v.width/2,v.height),i.texImage2D(tt,0,i.RGB,i.RGB,i.UNSIGNED_BYTE,b),i.texParameteri(tt,i.TEXTURE_WRAP_S,i.CLAMP_TO_EDGE),i.texParameteri(tt,i.TEXTURE_WRAP_T,i.CLAMP_TO_EDGE),i.texParameteri(tt,i.TEXTURE_MIN_FILTER,i.LINEAR),i.texParameteri(tt,i.TEXTURE_MAG_FILTER,i.LINEAR),i.activeTexture(i.TEXTURE0)}"cubemap"!=et&&v.width&&v.width<=gt&&h==2*Math.PI&&!(v.width&v.width-1)?i.texParameteri(tt,i.TEXTURE_WRAP_S,i.REPEAT):i.texParameteri(tt,i.TEXTURE_WRAP_S,i.CLAMP_TO_EDGE),i.texParameteri(tt,i.TEXTURE_WRAP_T,i.CLAMP_TO_EDGE),i.texParameteri(tt,i.TEXTURE_MIN_FILTER,i.LINEAR),i.texParameteri(tt,i.TEXTURE_MAG_FILTER,i.LINEAR)}else if(m.vertPosLocation=i.getAttribLocation(m,"a_vertCoord"),i.enableVertexAttribArray(m.vertPosLocation),St||(St=i.createBuffer()),vt||(vt=i.createBuffer()),ee||(ee=i.createBuffer()),i.bindBuffer(i.ARRAY_BUFFER,vt),i.bufferData(i.ARRAY_BUFFER,new Float32Array([0,0,1,0,1,1,0,1]),i.STATIC_DRAW),i.vertexAttribPointer(m.texCoordLocation,2,i.FLOAT,!1,0,0),i.bindBuffer(i.ELEMENT_ARRAY_BUFFER,ee),i.bufferData(i.ELEMENT_ARRAY_BUFFER,new Uint16Array([0,1,2,0,2,3]),i.STATIC_DRAW),i.bindBuffer(i.ARRAY_BUFFER,St),i.vertexAttribPointer(m.vertPosLocation,3,i.FLOAT,!1,0,0),m.perspUniform=i.getUniformLocation(m,"u_perspMatrix"),m.cubeUniform=i.getUniformLocation(m,"u_cubeMatrix"),m.currentNodes=[],m.nodeCache=[],m.nodeCacheTimestamp=0,m.textureLoads=[],v.shtHash||v.equirectangularThumbnail){P=i.createShader(i.VERTEX_SHADER),i.shaderSource(P,I),i.compileShader(P),ut=i.createShader(i.FRAGMENT_SHADER),i.shaderSource(ut,X),i.compileShader(ut),O=i.createProgram(),i.attachShader(O,P),i.attachShader(O,ut),i.linkProgram(O),i.getShaderParameter(P,i.COMPILE_STATUS)||console.log(i.getShaderInfoLog(P)),i.getShaderParameter(ut,i.COMPILE_STATUS)||console.log(i.getShaderInfoLog(ut)),i.getProgramParameter(O,i.LINK_STATUS)||console.log(i.getProgramInfoLog(O)),i.useProgram(O),O.texCoordLocation=i.getAttribLocation(O,"a_texCoord"),i.enableVertexAttribArray(O.texCoordLocation),B||(B=i.createBuffer()),i.bindBuffer(i.ARRAY_BUFFER,B),i.bufferData(i.ARRAY_BUFFER,new Float32Array([-1,1,1,1,1,-1,-1,1,1,-1,-1,-1]),i.STATIC_DRAW),i.vertexAttribPointer(O.texCoordLocation,2,i.FLOAT,!1,0,0),O.aspectRatio=i.getUniformLocation(O,"u_aspectRatio"),i.uniform1f(O.aspectRatio,i.drawingBufferWidth/i.drawingBufferHeight),O.psi=i.getUniformLocation(O,"u_psi"),O.theta=i.getUniformLocation(O,"u_theta"),O.f=i.getUniformLocation(O,"u_f"),O.h=i.getUniformLocation(O,"u_h"),O.v=i.getUniformLocation(O,"u_v"),O.vo=i.getUniformLocation(O,"u_vo"),O.rot=i.getUniformLocation(O,"u_rot"),i.uniform1f(O.h,1),O.texture=i.createTexture(),i.bindTexture(tt,O.texture);var l,n,u,a=function(){i.useProgram(O),i.uniform1i(i.getUniformLocation(O,"u_splitImage"),0),i.texImage2D(tt,0,i.RGBA,i.RGBA,i.UNSIGNED_BYTE,l),i.texParameteri(tt,i.TEXTURE_WRAP_S,i.REPEAT),i.texParameteri(tt,i.TEXTURE_WRAP_T,i.CLAMP_TO_EDGE),i.texParameteri(tt,i.TEXTURE_MIN_FILTER,i.LINEAR),i.texParameteri(tt,i.TEXTURE_MAG_FILTER,i.LINEAR),i.uniform1f(O.v,n),i.uniform1f(O.vo,u),i.useProgram(m)};if(v.shtHash&&(l=function Qt(s){if(Ct.length<1)for(var x=Yt.length/32,h=0;h<32;h++){Ct.push([]);for(var y=0;y<x;y++)Ct[h].push(se(Gt(Yt[h*x+y],1),41)*fe)}Gt(s[0],1);var R=255*(se(Gt(s[1],1),41)+1)/2,T=Gt(s.slice(2),2),k=[],Z=[],K=[];for(h=0;h<T.length;h++){var z=ce(T[h],R);k.push(z[0]),Z.push(z[1]),K.push(z[2])}var Y=.03125*Math.PI,rt=[];for(h=31;h>=0;h--)for(y=0;y<64;y++)rt.push(Kt(k,Ct[h],(y+.5)*Y)),rt.push(Kt(Z,Ct[h],(y+.5)*Y)),rt.push(Kt(K,Ct[h],(y+.5)*Y)),rt.push(255);return new ImageData(new Uint8ClampedArray(rt),64,32)}(v.shtHash),n=(2+1/31)/2,u=1-(2+1/31)/2,a()),v.equirectangularThumbnail)if("string"==typeof v.equirectangularThumbnail){if("data:"!=v.equirectangularThumbnail.slice(0,5))throw console.log("Error: thumbnail string is not a data URI!"),{type:"config error"};(l=new Image).onload=function(){n=1,u=0,a()},l.src=v.equirectangularThumbnail}else l=v.equirectangularThumbnail,n=1,u=0,a();i.bindBuffer(i.ARRAY_BUFFER,St),i.vertexAttribPointer(m.vertPosLocation,3,i.FLOAT,!1,0,0),i.useProgram(m)}var _=i.getError();if(0!==_)throw console.log("Error: Something went wrong with WebGL!",_),{type:"webgl error"};R()}else{var rt;Mt&&$.removeChild(Mt),(Mt=M.createElement("div")).className="pnlm-world",rt=v.basePath?v.basePath+v.fallbackPath:v.fallbackPath;var qt=0,Jt=function(){var p=M.createElement("canvas");p.className="pnlm-face pnlm-"+Ft[this.side]+"face",Mt.appendChild(p);var N=p.getContext("2d");p.style.width=this.width+4+"px",p.style.height=this.height+4+"px",p.width=this.width+4,p.height=this.height+4,N.drawImage(this,2,2);var Q,H,ct=N.getImageData(0,0,p.width,p.height),G=ct.data;for(Q=2;Q<p.width-2;Q++)for(H=0;H<4;H++)G[4*(Q+p.width)+H]=G[4*(Q+2*p.width)+H],G[4*(Q+p.width*(p.height-2))+H]=G[4*(Q+p.width*(p.height-3))+H];for(Q=2;Q<p.height-2;Q++)for(H=0;H<4;H++)G[4*(Q*p.width+1)+H]=G[4*(Q*p.width+2)+H],G[4*((Q+1)*p.width-2)+H]=G[4*((Q+1)*p.width-3)+H];for(H=0;H<4;H++)G[4*(p.width+1)+H]=G[4*(2*p.width+2)+H],G[4*(2*p.width-2)+H]=G[4*(3*p.width-3)+H],G[4*(p.width*(p.height-2)+1)+H]=G[4*(p.width*(p.height-3)+2)+H],G[4*(p.width*(p.height-1)-2)+H]=G[4*(p.width*(p.height-2)-3)+H];for(Q=1;Q<p.width-1;Q++)for(H=0;H<4;H++)G[4*Q+H]=G[4*(Q+p.width)+H],G[4*(Q+p.width*(p.height-1))+H]=G[4*(Q+p.width*(p.height-2))+H];for(Q=1;Q<p.height-1;Q++)for(H=0;H<4;H++)G[Q*p.width*4+H]=G[4*(Q*p.width+1)+H],G[4*((Q+1)*p.width-1)+H]=G[4*((Q+1)*p.width-2)+H];for(H=0;H<4;H++)G[H]=G[4*(p.width+1)+H],G[4*(p.width-1)+H]=G[4*(2*p.width-2)+H],G[p.width*(p.height-1)*4+H]=G[4*(p.width*(p.height-2)+1)+H],G[4*(p.width*p.height-1)+H]=G[4*(p.width*(p.height-1)-2)+H];N.putImageData(ct,0,0),lt.call(this)},lt=function(){this.width>0?(at===f&&(at=this.width),at!=this.width&&console.log("Fallback faces have inconsistent widths: "+at+" vs. "+this.width)):K=!0,6==++qt&&(at=this.width,$.appendChild(Mt),R())};for(K=!1,Z=0;Z<6;Z++){var nt=new Image;nt.crossOrigin=Bt.crossOrigin?Bt.crossOrigin:"anonymous",nt.side=Z,nt.onload=Jt,nt.onerror=lt,nt.src="multires"==et?rt.replace("%s",Ft[Z])+(v.extension?"."+v.extension:""):v[Z].src}Y(at)}},this.destroy=function(){if($!==f&&(D!==f&&$.contains(D)&&$.removeChild(D),Mt!==f&&$.contains(Mt)&&$.removeChild(Mt)),i){var s=i.getExtension("WEBGL_lose_context");s&&s.loseContext()}},this.resize=function(){var s=st.devicePixelRatio||1;D.width=D.clientWidth*s,D.height=D.clientHeight*s,i&&(1286==i.getError()&&pe(),i.viewport(0,0,i.drawingBufferWidth,i.drawingBufferHeight),"multires"!=et?i.uniform1f(m.aspectRatio,D.clientWidth/D.clientHeight):v.shtHash&&(i.useProgram(O),i.uniform1f(O.aspectRatio,D.clientWidth/D.clientHeight),i.useProgram(m)))},D&&this.resize(),this.setPose=function(s,x){s=isNaN(s)?0:Number(s),x=isNaN(x)?0:Number(x),Ht=0==s&&0==x?f:[s,x]},this.render=function(s,x,h,y){var L,T,k=0;if(y===f&&(y={}),y.roll&&(k=y.roll),y.dynamic)var Z=y.dynamic;if(Ht!==f){var K=Ht[0],z=Ht[1],Y=s,rt=x,qt=Math.cos(z)*Math.sin(s)*Math.sin(K)+Math.cos(s)*(Math.cos(K)*Math.cos(x)+Math.sin(z)*Math.sin(K)*Math.sin(x)),Jt=-Math.sin(s)*Math.sin(z)+Math.cos(s)*Math.cos(z)*Math.sin(x),lt=Math.cos(z)*Math.cos(K)*Math.sin(s)+Math.cos(s)*(-Math.cos(x)*Math.sin(K)+Math.cos(K)*Math.sin(z)*Math.sin(x));s=Math.asin(Math.max(Math.min(lt,1),-1)),x=Math.atan2(Jt,qt);var nt=[Math.cos(Y)*(Math.sin(z)*Math.sin(K)*Math.cos(rt)-Math.cos(K)*Math.sin(rt)),Math.cos(Y)*Math.cos(z)*Math.cos(rt),Math.cos(Y)*(Math.cos(K)*Math.sin(z)*Math.cos(rt)+Math.sin(rt)*Math.sin(K))],_t=[-Math.cos(s)*Math.sin(x),Math.cos(s)*Math.cos(x)],gt=Math.acos(Math.max(Math.min((nt[0]*_t[0]+nt[1]*_t[1])/(Math.sqrt(nt[0]*nt[0]+nt[1]*nt[1]+nt[2]*nt[2])*Math.sqrt(_t[0]*_t[0]+_t[1]*_t[1])),1),-1));nt[2]<0&&(gt=2*Math.PI-gt),k+=gt}if(y.hook&&y.hook({gl:i,program:m,previewProgram:O,imageType:et,texCoordBuffer:B,cubeVertBuf:St,cubeVertTexCoordBuf:vt,cubeVertIndBuf:ee}),i||"multires"!=et&&"cubemap"!=et){if("multires"!=et){var Rt=2*Math.atan(Math.tan(.5*h)/(i.drawingBufferWidth/i.drawingBufferHeight));L=1/Math.tan(.5*Rt),i.uniform1f(m.psi,x),i.uniform1f(m.theta,s),i.uniform1f(m.rot,k),i.uniform1f(m.f,L),!0===Z&&"equirectangular"==et&&(i.bindTexture(i.TEXTURE_2D,m.texture),i.texImage2D(i.TEXTURE_2D,0,i.RGB,i.RGB,i.UNSIGNED_BYTE,v)),i.drawArrays(i.TRIANGLES,0,6)}else{var mt=typeof v.shtHash<"u"||typeof v.equirectangularThumbnail<"u",Ut=mt;if(mt&&m.currentNodes.length>=6){Ut=!1;for(var R=0;R<6;R++)if(!m.currentNodes[R].textureLoaded){Ut=!0;break}}Ut&&(i.useProgram(O),i.bindBuffer(i.ARRAY_BUFFER,B),i.vertexAttribPointer(O.texCoordLocation,2,i.FLOAT,!1,0,0),i.bindTexture(i.TEXTURE_2D,O.texture),Rt=2*Math.atan(Math.tan(.5*h)/(i.drawingBufferWidth/i.drawingBufferHeight)),L=1/Math.tan(.5*Rt),i.uniform1f(O.psi,x),i.uniform1f(O.theta,s),i.uniform1f(O.rot,k),i.uniform1f(O.f,L),i.drawArrays(i.TRIANGLES,0,6),i.bindBuffer(i.ARRAY_BUFFER,St),i.vertexAttribPointer(m.vertPosLocation,3,i.FLOAT,!1,0,0),i.useProgram(m));var c=_e(h,i.drawingBufferWidth/i.drawingBufferHeight,.1,100),b=_e(h,i.drawingBufferWidth/i.drawingBufferHeight,-100,100),l=function zt(){return new Float32Array([1,0,0,0,1,0,0,0,1])}();l=Xt(l,-k,"z"),l=Xt(l,-s,"x"),l=function ue(s){return new Float32Array([s[0],s[1],s[2],0,s[3],s[4],s[5],0,s[6],s[7],s[8],0,0,0,0,1])}(l=Xt(l,x,"y")),i.uniformMatrix4fv(m.perspUniform,!1,yt(c)),i.uniformMatrix4fv(m.cubeUniform,!1,yt(l));var n=re(c,l),u=re(b,l);if(m.nodeCache.sort(ie),m.nodeCache.length>200&&m.nodeCache.length>m.currentNodes.length+50)for(var a=m.nodeCache.splice(200,m.nodeCache.length-200),_=0;_<a.length;_++)i.deleteTexture(a[_].texture);for(m.currentNodes=[],T=0;T<6;T++)Ot(n,u,new pt(de[T],Zt[T],1,0,0,v.fullpath,null),s,x,h);for(m.currentNodes.sort(ft),R=j.length-1;R>=0;R--)-1===m.currentNodes.indexOf(j[R].node)&&(j[R].node.textureLoad=!1,j.splice(R,1));if(0===j.length)for(R=0;R<m.currentNodes.length;R++){var N=m.currentNodes[R];if(!N.texture&&!N.textureLoad){N.textureLoad=!0,setTimeout(It,0,N);break}}m.textureLoads.length>0&&m.textureLoads.shift()(!0),function bt(s){if(!m.drawInProgress){m.drawInProgress=!0,s&&i.clear(i.COLOR_BUFFER_BIT);for(var x={},h=0;h<m.currentNodes.length;h++)x[m.currentNodes[h].parentPath]===f&&(x[m.currentNodes[h].parentPath]=0),x[m.currentNodes[h].parentPath]+=!(m.currentNodes[h].textureLoaded>1);for(h=0;h<m.currentNodes.length;h++)m.currentNodes[h].textureLoaded>1&&4!=x[m.currentNodes[h].path]&&(i.bufferData(i.ARRAY_BUFFER,m.currentNodes[h].vertices,i.STATIC_DRAW),i.bindTexture(i.TEXTURE_2D,m.currentNodes[h].texture),i.drawElements(i.TRIANGLES,6,i.UNSIGNED_SHORT,0));m.drawInProgress=!1}}(!mt)}if(y.returnImage!==f)return st.createImageBitmap&&"ImageBitmap"==y.returnImage?createImageBitmap(D):0==y.returnImage.toString().indexOf("image/")?D.toDataURL(y.returnImage):D.toDataURL("image/png")}else{var xt={f:"translate3d(-"+(2+(T=at/2))+"px, -"+(T+2)+"px, -"+T+"px)",b:"translate3d("+(T+2)+"px, -"+(T+2)+"px, "+T+"px) rotateX(180deg) rotateZ(180deg)",u:"translate3d(-"+(T+2)+"px, -"+T+"px, "+(T+2)+"px) rotateX(270deg)",d:"translate3d(-"+(T+2)+"px, "+T+"px, -"+(T+2)+"px) rotateX(90deg)",l:"translate3d(-"+T+"px, -"+(T+2)+"px, "+(T+2)+"px) rotateX(180deg) rotateY(90deg) rotateZ(180deg)",r:"translate3d("+T+"px, -"+(T+2)+"px, -"+(T+2)+"px) rotateY(270deg)"},Nt=(L=1/Math.tan(h/2))*D.clientWidth/2+"px",tt="perspective("+Nt+") translateZ("+Nt+") rotateX("+s+"rad) rotateY("+x+"rad) ",g=Object.keys(xt);for(R=0;R<6;R++){var wt=Mt.querySelector(".pnlm-"+g[R]+"face");wt&&(wt.style.webkitTransform=tt+xt[g[R]],wt.style.transform=tt+xt[g[R]])}}},this.isLoading=function(){if(i&&"multires"==et)for(var s=0;s<m.currentNodes.length;s++)if(!m.currentNodes[s].textureLoaded)return!0;return!1},this.isBaseLoaded=function(){if(m.currentNodes.length>=6){for(var s=0;s<6;s++)if(!m.currentNodes[s].textureLoaded)return!1;return!0}return!1},this.getCanvas=function(){return D};var It,j=[],kt=function(){var h,s=4,x={};function y(){var k=this;this.texture=this.callback=null,this.image=new Image,this.image.crossOrigin=h||"anonymous";var Z=function(){m.textureLoads.push(function(K){K&&(k.image.width>0&&k.image.height>0?(ae(k.image,k.texture),k.callback(k.texture,!0)):k.callback(k.texture,!1)),function R(k){if(j.length){var Z=j.shift();k.loadTexture(Z.src,Z.texture,Z.callback)}else x[s++]=k}(k)})};this.image.addEventListener("load",Z),this.image.addEventListener("error",Z)}function L(k,Z,K,z){this.node=k,this.src=Z,this.texture=K,this.callback=z}y.prototype.loadTexture=function(k,Z,K){this.texture=Z,this.callback=K,this.image.src=k};for(var T=0;T<s;T++)x[T]=new y;return function(k,Z,K,z){h=z;var Y=i.createTexture();return s?x[--s].loadTexture(Z,Y,K):j.push(new L(k,Z,Y,K)),Y}}();if(st.Worker&&st.createImageBitmap){var ne=new Blob(["("+function(){self.onmessage=function(x){var h=x.data[0];fetch(h,{mode:"cors",credentials:"use-credentials"==x.data[1]?"include":"same-origin"}).then(function(L){return L.blob()}).then(function(L){return createImageBitmap(L)}).then(function(L){postMessage([h,!0,L],[L])}).catch(function(){postMessage([h,!1])})}}.toString()+")()"],{type:"application/javascript"}),me=new Worker(URL.createObjectURL(ne)),E={};me.onmessage=function(x){var h=x.data[0],y=x.data[1],L=x.data[2];m.textureLoads.push(function(R){var T,k=!1;y&&R&&(T=i.createTexture(),ae(L,T),k=!0);var Z=E[h];delete E[h],Z!==f&&(Z.texture=T,Z.textureLoaded=k?2:1)})},It=function(x){var h=new URL(x.path+(v.extension?"."+v.extension:""),st.location).href;E[h]=x,me.postMessage([h,Bt.crossOrigin])}}else It=function Lt(s){kt(s,s.path+(v.extension?"."+v.extension:""),function(x,h){s.texture=x,s.textureLoaded=h?2:1},Bt.crossOrigin)};function re(s,x){return new Float32Array([s[0]*x[0],s[0]*x[1],s[0]*x[2],0,s[5]*x[4],s[5]*x[5],s[5]*x[6],0,s[10]*x[8],s[10]*x[9],s[10]*x[10],s[11],-x[8],-x[9],-x[10],0])}function F(s,x){return new Float32Array([s[0]*x[0]+s[1]*x[1]+s[2]*x[2],s[4]*x[0]+s[5]*x[1]+s[6]*x[2],s[11]+s[8]*x[0]+s[9]*x[1]+s[10]*x[2],1/(s[12]*x[0]+s[13]*x[1]+s[14]*x[2])])}function jt(s,x){var h=F(s,x),y=h[0]*h[3],L=h[1]*h[3],R=h[2]*h[3],T=[0,0,0];return y<-1&&(T[0]=-1),y>1&&(T[0]=1),L<-1&&(T[1]=-1),L>1&&(T[1]=1),(R<-1||R>1)&&(T[2]=1),T}function pe(){console.log("Reducing canvas size due to error 1286!"),D.width=Math.round(D.width/2),D.height=Math.round(D.height/2)}var le="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz#$%*+,-.:;=?@[]^_{|}~",Yt="Bf[ff4fff|ffff0fffffBo@Ri5xag{Jmdf2+WiefCs@Ll7+Vi]Btag6[NmdgCv=Ho9;Qk;7zWiF_GsahDy:ErE?Mn$5+SkS_AyWiD#-CuJ[Iqp6;Nnx?7*SlE$*BxR@FtPA?Jq+%7:NnF*zAzn?CwIG@Ft-Y9?IrG+vA%w:AzGR?Cx*IF@EuI,nA+$*9%Gu:A#xCR?ByJ-VB-*wA+J**9*ZBv:9%L.QD.*aB.O.v9-MF+$8,O:MG:*OD;a:UB:IO:n9:Q:KJ;#IG=u-KE=Hs:MC?T:IO=wEL?#%FJ@K**FI@Y;HV=pDU?*sCS@S.uCR[m;Hp=VDq?*SCs@s.QCt[r:Iw=OEz?#IF$@#*HF%@u:K$;KI+=uEK-=*sCM:?w:M+:HO.;aCU;:%OCn?:z.Q..Ha;.ODv?-yFG$@,$-V;-Hw=+JH*?*lBP:?%%,n=+J*?%GQ:=#NCt?;y++v=%O:=zGt?:xHI,@-u,*z=zX?:wI+@,tEY??%r-$*;xt@,tP=?$qG%[:xn.#-:u$[%qp];xnN?[*sl.y:-r-?yn$^+sks_=yoi:v=*o?;uk;[zoi,_+skh:s@zl[+pi];tkg][xmhg;o@ti^xkg{$mhf|+oigf;f[ff_fff|ffff~fffff",fe=3.317,Ct=[];function se(s,x){return Math.pow((Math.abs(s)-x)/x,2)*(s-x>0?1:-1)}function ce(s,x){var h=Math.floor(s/361),y=Math.floor(s/19)%19,L=s%19;return[se(h,9)*x,se(y,9)*x,se(L,9)*x]}function Gt(s,x){for(var h=Math.floor(s.length/x),y=[],L=0;L<h;L++){for(var R=0,T=0;T<x;T++)R=83*R+le.indexOf(s[L*x+T]);y.push(R)}return y}function Kt(s,x,h){var y=Math.floor(Math.sqrt(s.length))-1,L=Array(y+1),R=Array(y+1);R[0]=0,L[0]=1,R[1]=Math.sin(h),L[1]=Math.cos(h);for(var T=2;T<=y;T++)R[T]=2*R[T-1]*L[1]-R[T-2],L[T]=2*L[T-1]*L[1]-L[T-2];for(var k=0,Z=0,K=1;K<=y+1;K++)Z+=K;for(var z=y;z>=0;z--){var Y=Math.floor((z+1)*z/2);for(k+=0!=Y?s[Y]*x[Y-1]:s[Y],T=1;T<=z;T++)k+=(s[++Y]*L[T]+s[Y+Z-z-1]*R[T])*x[Y-1]}return Math.round(k)}}var I=["attribute vec2 a_texCoord;","varying vec2 v_texCoord;","void main() {","gl_Position = vec4(a_texCoord, 0.0, 1.0);","v_texCoord = a_texCoord;","}"].join(""),V=["attribute vec3 a_vertCoord;","attribute vec2 a_texCoord;","uniform mat4 u_cubeMatrix;","uniform mat4 u_perspMatrix;","varying mediump vec2 v_texCoord;","void main(void) {","gl_Position = u_perspMatrix * u_cubeMatrix * vec4(a_vertCoord, 1.0);","v_texCoord = a_texCoord;","}"].join(""),dt=["precision highp float;","uniform float u_aspectRatio;","uniform float u_psi;","uniform float u_theta;","uniform float u_f;","uniform float u_h;","uniform float u_v;","uniform float u_vo;","uniform float u_rot;","const float PI = 3.14159265358979323846264;","uniform sampler2D u_image0;","uniform sampler2D u_image1;","uniform bool u_splitImage;","uniform samplerCube u_imageCube;","varying vec2 v_texCoord;","uniform vec4 u_backgroundColor;","void main() {","float x = v_texCoord.x * u_aspectRatio;","float y = v_texCoord.y;","float sinrot = sin(u_rot);","float cosrot = cos(u_rot);","float rot_x = x * cosrot - y * sinrot;","float rot_y = x * sinrot + y * cosrot;","float sintheta = sin(u_theta);","float costheta = cos(u_theta);","float a = u_f * costheta - rot_y * sintheta;","float root = sqrt(rot_x * rot_x + a * a);","float lambda = atan(rot_x / root, a / root) + u_psi;","float phi = atan((rot_y * costheta + u_f * sintheta) / root);"].join("\n"),e=dt+["float cosphi = cos(phi);","gl_FragColor = textureCube(u_imageCube, vec3(cosphi*sin(lambda), sin(phi), cosphi*cos(lambda)));","}"].join("\n"),X=dt+["lambda = mod(lambda + PI, PI * 2.0) - PI;","vec2 coord = vec2(lambda / PI, phi / (PI / 2.0));","if(coord.x < -u_h || coord.x > u_h || coord.y < -u_v + u_vo || coord.y > u_v + u_vo)","gl_FragColor = u_backgroundColor;","else {","if(u_splitImage) {","if(coord.x < 0.0)","gl_FragColor = texture2D(u_image0, vec2((coord.x + u_h) / u_h, (-coord.y + u_v + u_vo) / (u_v * 2.0)));","else","gl_FragColor = texture2D(u_image1, vec2((coord.x + u_h) / u_h - 1.0, (-coord.y + u_v + u_vo) / (u_v * 2.0)));","} else {","gl_FragColor = texture2D(u_image0, vec2((coord.x + u_h) / (u_h * 2.0), (-coord.y + u_v + u_vo) / (u_v * 2.0)));","}","}","}"].join("\n"),J=["varying mediump vec2 v_texCoord;","uniform sampler2D u_sampler;","void main(void) {","gl_FragColor = texture2D(u_sampler, v_texCoord);","}"].join("");return{renderer:function($,At,D){return new t($,At,D)}}}(window,document)},2647:()=>{window.pannellum=function(st,M,f){"use strict";function t(I,V){var e,X,J,$,at,v,et,Bt,Ft,ie,Xt,yt,dt=this,At=!1,D=Date.now(),m=0,i=0,ot=-1,ht=0,O=0,P=new Array(10),ut=!1,Mt=!1,Ht=!1,B={yaw:0,pitch:0,hfov:0},St=!1,vt=!1,ee=0,Zt=0,ft={},bt={},pt=[],Ot=!1,oe=!1,zt=1e-6,ue=!1,_e=!1,ae={hfov:100,minHfov:50,multiResMinHfov:!1,maxHfov:120,pitch:0,minPitch:f,maxPitch:f,yaw:0,minYaw:-180,maxYaw:180,roll:0,haov:360,vaov:180,vOffset:0,autoRotate:!1,autoRotateInactivityDelay:-1,autoRotateStopDelay:f,type:"equirectangular",northOffset:0,showFullscreenCtrl:!0,dynamic:!1,dynamicUpdate:!1,doubleClickZoom:!0,keyboardZoom:!0,mouseZoom:!0,showZoomCtrl:!0,autoLoad:!1,showControls:!0,orientationOnByDefault:!1,hotSpotDebug:!1,backgroundColor:[0,0,0],avoidShowingBackground:!1,animationTimingFunction:function Nt(o){return o<.5?2*o*o:(4-2*o)*o-1},draggable:!0,dragConfirm:!1,disableKeyboardCtrl:!1,crossOrigin:"anonymous",targetBlank:!1,touchPanSpeedCoeffFactor:1,capturedKeyNumbers:[16,17,27,37,38,39,40,61,65,68,83,87,107,109,173,187,189],friction:.15,strings:{loadButtonLabel:"Click to<br>Load<br>Panorama",loadingLabel:"Loading...",bylineLabel:"by %s",noPanoramaError:"No panorama image was specified.",fileAccessError:"The file %s could not be accessed.",malformedURLError:"There is something wrong with the panorama URL.",iOS8WebGLError:"Due to iOS 8's broken WebGL implementation, only progressive encoded JPEGs work for your device (this panorama uses standard encoding).",genericWebGLError:"Your browser does not have the necessary WebGL support to display this panorama.",textureSizeError:"This panorama is too big for your device! It's %spx wide, but your device only supports images up to %spx wide. Try another device. (If you're the author, try scaling down the image.)",unknownError:"Unknown error. Check developer console.",twoTouchActivate:"Use two fingers together to pan the panorama.",twoTouchXActivate:"Use two fingers together to pan the panorama horizontally.",twoTouchYActivate:"Use two fingers together to pan the panorama vertically.",ctrlZoomActivate:"Use %s + scroll to zoom the panorama."}};(I="string"==typeof I?M.getElementById(I):I).classList.add("pnlm-container"),I.tabIndex=0;var j=M.createElement("div");j.className="pnlm-ui",I.appendChild(j);var kt=M.createElement("div");kt.className="pnlm-render-container",I.appendChild(kt);var Lt=M.createElement("div");Lt.className="pnlm-dragfix",j.appendChild(Lt);var It=M.createElement("span");It.className="pnlm-about-msg";var ne=M.createElement("a");ne.href="https://pannellum.org/",ne.textContent="Pannellum",It.appendChild(ne);var me=M.createElement("span");It.appendChild(me),j.appendChild(It),Lt.addEventListener("contextmenu",function Kt(o){var r=Qt(o);It.style.left=r.x+"px",It.style.top=r.y+"px",clearTimeout(Kt.t1),clearTimeout(Kt.t2),It.style.display="block",It.style.opacity=1,Kt.t1=setTimeout(function(){It.style.opacity=0},2e3),Kt.t2=setTimeout(function(){It.style.display="none"},2500),o.preventDefault()});var E={},re=M.createElement("div");re.className="pnlm-sprite pnlm-hot-spot-debug-indicator",j.appendChild(re),E.container=M.createElement("div"),E.container.className="pnlm-panorama-info",E.title=M.createElement("div"),E.title.className="pnlm-title-box",E.container.appendChild(E.title),E.author=M.createElement("div"),E.author.className="pnlm-author-box",E.container.appendChild(E.author),j.appendChild(E.container),E.load={},E.load.box=M.createElement("div"),E.load.box.className="pnlm-load-box",E.load.boxp=M.createElement("p"),E.load.box.appendChild(E.load.boxp),E.load.lbox=M.createElement("div"),E.load.lbox.className="pnlm-lbox",E.load.lbox.innerHTML='<div class="pnlm-loading"></div>',E.load.box.appendChild(E.load.lbox),E.load.lbar=M.createElement("div"),E.load.lbar.className="pnlm-lbar",E.load.lbarFill=M.createElement("div"),E.load.lbarFill.className="pnlm-lbar-fill",E.load.lbar.appendChild(E.load.lbarFill),E.load.box.appendChild(E.load.lbar),E.load.msg=M.createElement("p"),E.load.msg.className="pnlm-lmsg",E.load.box.appendChild(E.load.msg),j.appendChild(E.load.box),E.errorMsg=M.createElement("div"),E.errorMsg.className="pnlm-error-msg pnlm-info-box",j.appendChild(E.errorMsg),E.interactionMsg=M.createElement("div"),E.interactionMsg.className="pnlm-interaction-msg pnlm-info-box",j.appendChild(E.interactionMsg);var F={};F.container=M.createElement("div"),F.container.className="pnlm-controls-container",j.appendChild(F.container),F.load=M.createElement("button"),F.load.className="pnlm-load-button",F.load.addEventListener("click",function(){Q(),be()}),j.appendChild(F.load),F.zoom=M.createElement("div"),F.zoom.className="pnlm-zoom-controls pnlm-controls",F.zoomIn=M.createElement("div"),F.zoomIn.className="pnlm-zoom-in pnlm-sprite pnlm-control",F.zoomIn.addEventListener("click",function Dt(){at&&($t(e.hfov-5),g())}),F.zoom.appendChild(F.zoomIn),F.zoomOut=M.createElement("div"),F.zoomOut.className="pnlm-zoom-out pnlm-sprite pnlm-control",F.zoomOut.addEventListener("click",function Ee(){at&&($t(e.hfov+5),g())}),F.zoom.appendChild(F.zoomOut),F.container.appendChild(F.zoom),F.fullscreen=M.createElement("div"),F.fullscreen.addEventListener("click",H),F.fullscreen.className="pnlm-fullscreen-toggle-button pnlm-sprite pnlm-fullscreen-toggle-button-inactive pnlm-controls pnlm-control",(M.fullscreenEnabled||M.mozFullScreenEnabled||M.webkitFullscreenEnabled||M.msFullscreenEnabled)&&F.container.appendChild(F.fullscreen),F.orientation=M.createElement("div"),F.orientation.addEventListener("click",function(o){vt?ve():Te()}),F.orientation.addEventListener("mousedown",function(o){o.stopPropagation()}),F.orientation.addEventListener("touchstart",function(o){o.stopPropagation()}),F.orientation.addEventListener("pointerdown",function(o){o.stopPropagation()}),F.orientation.className="pnlm-orientation-button pnlm-orientation-button-inactive pnlm-sprite pnlm-controls pnlm-control";var jt=!1;st.DeviceOrientationEvent&&"https:"==location.protocol&&(navigator.userAgent.toLowerCase().indexOf("mobi")>=0||navigator.userAgent.indexOf("Mac")>=0&&navigator.maxTouchPoints&&navigator.maxTouchPoints>0)&&(F.container.appendChild(F.orientation),jt=!0);var te=M.createElement("div");function pe(){var o=M.createElement("div");if(o.innerHTML="\x3c!--[if lte IE 9]><i></i><![endif]--\x3e",1!=o.getElementsByTagName("i").length){var r,d;if(Ft=e.hfov,ie=e.pitch,"cubemap"==e.type){for(v=[],r=0;r<6;r++)v.push(new Image),v[r].crossOrigin=e.crossOrigin;E.load.lbox.style.display="block",E.load.lbar.style.display="none"}else if("multires"==e.type){var C=JSON.parse(JSON.stringify(e.multiRes));e.basePath&&e.multiRes.basePath&&!/^(?:[a-z]+:)?\/\//i.test(e.multiRes.basePath)?C.basePath=e.basePath+e.multiRes.basePath:e.multiRes.basePath?C.basePath=e.multiRes.basePath:e.basePath&&(C.basePath=e.basePath),v=C}else if(!0===e.dynamic)v=e.panorama;else{if(e.panorama===f)return void Ct(e.strings.noPanoramaError);v=new Image}if("cubemap"==e.type){var w=6,A=function(){0==--w&&Yt()},W=function(U){var S=M.createElement("a");S.href=U.target.src,S.textContent=S.href,Ct(e.strings.fileAccessError.replace("%s",S.outerHTML))};for(r=0;r<v.length;r++)"null"==(d=e.cubeMap[r])?(console.log("Will use background instead of missing cubemap face "+r),A()):(e.basePath&&!le(d)&&(d=e.basePath+d),v[r].onload=A,v[r].onerror=W,v[r].src=ge(d))}else if("multires"==e.type)Yt();else if(d="",e.basePath&&(d=e.basePath),!0!==e.dynamic){if(e.panorama instanceof Image||e.panorama instanceof ImageData||st.ImageBitmap&&e.panorama instanceof ImageBitmap)return v=e.panorama,void Yt();d=le(e.panorama)?e.panorama:d+e.panorama,v.onload=function(){st.URL.revokeObjectURL(this.src),Yt()},(yt=new XMLHttpRequest).onloadend=function(){if(200!=yt.status){var U=M.createElement("a");return U.href=d,U.textContent=U.href,void Ct(e.strings.fileAccessError.replace("%s",U.outerHTML))}(function fe(o,r){var d=new FileReader;d.addEventListener("loadend",function(){var C=d.result;if(navigator.userAgent.toLowerCase().match(/(iphone|ipod|ipad).* os 8_/)){var w=C.indexOf("\xff\xc2");(w<0||w>65536)&&Ct(e.strings.iOS8WebGLError)}var A=C.indexOf("<x:xmpmeta");if(A>-1&&!0!==e.ignoreGPanoXMP){var W=C.substring(A,C.indexOf("</x:xmpmeta>")+12),U=function(q){var it;return W.indexOf(q+'="')>=0?it=(it=W.substring(W.indexOf(q+'="')+q.length+2)).substring(0,it.indexOf('"')):W.indexOf(q+">")>=0&&(it=(it=W.substring(W.indexOf(q+">")+q.length+1)).substring(0,it.indexOf("<"))),it!==f?Number(it):null},S={fullWidth:U("GPano:FullPanoWidthPixels"),croppedWidth:U("GPano:CroppedAreaImageWidthPixels"),fullHeight:U("GPano:FullPanoHeightPixels"),croppedHeight:U("GPano:CroppedAreaImageHeightPixels"),topPixels:U("GPano:CroppedAreaTopPixels"),heading:U("GPano:PoseHeadingDegrees"),horizonPitch:U("GPano:PosePitchDegrees"),horizonRoll:U("GPano:PoseRollDegrees"),pitch:U("GPano:InitialViewPitchDegrees"),yaw:U("GPano:InitialViewHeadingDegrees"),hfov:U("GPano:InitialHorizontalFOVDegrees")};null!==S.fullWidth&&null!==S.croppedWidth&&null!==S.fullHeight&&null!==S.croppedHeight&&null!==S.topPixels&&(pt.indexOf("haov")<0&&(e.haov=S.croppedWidth/S.fullWidth*360),pt.indexOf("vaov")<0&&(e.vaov=S.croppedHeight/S.fullHeight*180),pt.indexOf("vOffset")<0&&(e.vOffset=-180*((S.topPixels+S.croppedHeight/2)/S.fullHeight-.5)),null!==S.heading&&pt.indexOf("northOffset")<0&&(e.northOffset=S.heading,!1!==e.compass&&(e.compass=!0)),null!==S.horizonPitch&&null!==S.horizonRoll&&(pt.indexOf("horizonPitch")<0&&(e.horizonPitch=S.horizonPitch),pt.indexOf("horizonRoll")<0&&(e.horizonRoll=S.horizonRoll)),null!=S.pitch&&pt.indexOf("pitch")<0&&(e.pitch=S.pitch),null!=S.yaw&&pt.indexOf("yaw")<0&&(e.yaw=S.yaw),null!=S.hfov&&pt.indexOf("hfov")<0&&(e.hfov=S.hfov))}v.src=st.URL.createObjectURL(o),v.onerror=function(){(function q(){return st.fetch?st.fetch(M.location.href).then(function(it){return it.headers.get("Content-Security-Policy")}):null})().then(function(it){it&&it.split(";").find(function(Et){var Wt=Et.match(/img-src(.*)/);if(Wt)return!Wt[1].includes("blob")})&&(console.log("CSP blocks blobs; reverting to URL."),v.crossOrigin=e.crossOrigin,v.src=r)})}}),d.readAsBinaryString!==f?d.readAsBinaryString(o):d.readAsText(o)})(this.response,d),E.load.msg.innerHTML=""},yt.onprogress=function(U){var q,it,Pt;U.lengthComputable?(E.load.lbarFill.style.width=U.loaded/U.total*100+"%",U.total>1e6?(q="MB",it=(U.loaded/1e6).toFixed(2),Pt=(U.total/1e6).toFixed(2)):U.total>1e3?(q="kB",it=(U.loaded/1e3).toFixed(1),Pt=(U.total/1e3).toFixed(1)):(q="B",it=U.loaded,Pt=U.total),E.load.msg.innerHTML=it+" / "+Pt+" "+q):(E.load.lbox.style.display="block",E.load.lbar.style.display="none")};try{yt.open("GET",d,!0)}catch{Ct(e.strings.malformedURLError)}yt.responseType="blob",yt.setRequestHeader("Accept","image/*,*/*;q=0.9"),yt.setRequestHeader("cache-control","no-cache"),yt.withCredentials="use-credentials"===e.crossOrigin,yt.send()}e.draggable&&j.classList.add("pnlm-grab"),j.classList.remove("pnlm-grabbing"),Ot=!0===e.dynamicUpdate,e.dynamic&&Ot&&(v=e.panorama,Yt())}else Ct()}function le(o){return new RegExp("^(?:[a-z]+:)?//","i").test(o)||"/"==o[0]||"blob:"==o.slice(0,5)}function Yt(){X||(X=new libpannellum.renderer(kt)),Ht||(Ht=!0,Lt.addEventListener("mousedown",s,!1),M.addEventListener("mousemove",y,!1),M.addEventListener("mouseup",L,!1),e.mouseZoom&&(j.addEventListener("mousewheel",qt,!1),j.addEventListener("DOMMouseScroll",qt,!1)),e.doubleClickZoom&&Lt.addEventListener("dblclick",x,!1),I.addEventListener("mozfullscreenchange",Tt,!1),I.addEventListener("webkitfullscreenchange",Tt,!1),I.addEventListener("msfullscreenchange",Tt,!1),I.addEventListener("fullscreenchange",Tt,!1),"function"==typeof ResizeObserver?(Xt=new ResizeObserver(tt)).observe(I):(st.addEventListener("resize",tt,!1),st.addEventListener("orientationchange",tt,!1)),e.disableKeyboardCtrl||(I.addEventListener("keydown",Jt,!1),I.addEventListener("keyup",nt,!1),I.addEventListener("blur",lt,!1)),M.addEventListener("mouseleave",L,!1),""===M.documentElement.style.pointerAction&&""===M.documentElement.style.touchAction?(Lt.addEventListener("pointerdown",z,!1),Lt.addEventListener("pointermove",Y,!1),Lt.addEventListener("pointerup",rt,!1),Lt.addEventListener("pointerleave",rt,!1)):(Lt.addEventListener("touchstart",R,!1),Lt.addEventListener("touchmove",T,!1),Lt.addEventListener("touchend",k,!1)),st.navigator.pointerEnabled&&(I.style.touchAction="none")),function l(){try{var o={};e.horizonPitch!==f&&(o.horizonPitch=e.horizonPitch*Math.PI/180),e.horizonRoll!==f&&(o.horizonRoll=e.horizonRoll*Math.PI/180),e.backgroundColor!==f&&(o.backgroundColor=e.backgroundColor),X.init(v,e.type,e.haov*Math.PI/180,e.vaov*Math.PI/180,e.vOffset*Math.PI/180,n,o)}catch(r){if(!0!==e.dynamic&&(v=f),"webgl error"==r.type||"no webgl"==r.type)Ct();else{if("webgl size error"!=r.type)throw Ct(e.strings.unknownError),r;Ct(e.strings.textureSizeError.replace("%s",r.width).replace("%s",r.maxWidth))}}}(),$t(e.hfov),setTimeout(function(){},500)}function Ct(o){o===f&&(o=e.strings.genericWebGLError),E.errorMsg.innerHTML="<p>"+o+"</p>",F.load.style.display="none",E.load.box.style.display="none",E.errorMsg.style.display="table",Mt=!0,at=f,kt.style.display="none",Vt("error",o)}function ce(o){E.interactionMsg.style.opacity=1,E.interactionMsg.innerHTML="<p>"+o+"</p>",E.interactionMsg.style.display="table",Vt("messageshown"),clearTimeout(E.interactionMsg.timeout),E.interactionMsg.removeEventListener("transitionend",Gt),E.interactionMsg.timeout=setTimeout(function(){E.interactionMsg.style.opacity=0,E.interactionMsg.addEventListener("transitionend",Gt)},2e3)}function Gt(){E.interactionMsg.style.opacity=0,E.interactionMsg.style.display="none",Vt("messagecleared")}function Qt(o){var r=I.getBoundingClientRect(),d={};return d.x=(o.clientX||o.pageX)-r.left,d.y=(o.clientY||o.pageY)-r.top,d}function s(o){if(o.preventDefault(),I.focus(),at&&e.draggable&&!e.draggingHotSpot){var r=Qt(o);if(e.hotSpotDebug){var d=h(o);console.log("Pitch: "+d[0]+", Yaw: "+d[1]+", Center Pitch: "+e.pitch+", Center Yaw: "+e.yaw+", HFOV: "+e.hfov)}xe(),ve(),e.roll=0,B.hfov=0,At=!0,D=Date.now(),m=r.x,i=r.y,ht=e.yaw,O=e.pitch,j.classList.add("pnlm-grabbing"),j.classList.remove("pnlm-grab"),Vt("mousedown",o),g()}}function x(o){if(e.minHfov===e.hfov)dt.setHfov(Ft,1e3);else{var r=h(o);dt.lookAt(r[0],r[1],e.minHfov,1e3)}}function h(o){var r=Qt(o),d=X.getCanvas(),C=d.clientWidth,w=d.clientHeight,A=r.x/C*2-1,W=(1-r.y/w*2)*w/C,U=1/Math.tan(e.hfov*Math.PI/360),S=Math.sin(e.pitch*Math.PI/180),q=Math.cos(e.pitch*Math.PI/180),it=U*q-W*S,Pt=Math.sqrt(A*A+it*it),Et=180*Math.atan((W*q+U*S)/Pt)/Math.PI,Wt=180*Math.atan2(A/Pt,it/Pt)/Math.PI+e.yaw;return Wt<-180&&(Wt+=360),Wt>180&&(Wt-=360),[Et,Wt]}function y(o){if($)a($,o);else if(At&&at){D=Date.now();var r=X.getCanvas(),d=r.clientWidth,C=r.clientHeight,w=Qt(o),A=180*(Math.atan(m/d*2-1)-Math.atan(w.x/d*2-1))/Math.PI*e.hfov/90+ht;B.yaw=(A-e.yaw)%360*.2,e.yaw=A;var W=2*Math.atan(Math.tan(e.hfov/360*Math.PI)*C/d)*180/Math.PI,U=180*(Math.atan(w.y/C*2-1)-Math.atan(i/C*2-1))/Math.PI*W/90+O;B.pitch=.2*(U-e.pitch),e.pitch=U}}function L(o){$&&$.dragHandlerFunc&&$.dragHandlerFunc(o,$.dragHandlerArgs),$=null,At&&(At=!1,Date.now()-D>15&&(B.pitch=B.yaw=0),j.classList.add("pnlm-grab"),j.classList.remove("pnlm-grabbing"),D=Date.now(),Vt("mouseup",o))}function R(o){if(at&&e.draggable&&!$){xe(),ve(),e.roll=0,B.hfov=0;var r=Qt(o.targetTouches[0]);if(m=r.x,i=r.y,2==o.targetTouches.length){var d=Qt(o.targetTouches[1]);m+=.5*(d.x-r.x),i+=.5*(d.y-r.y),ot=Math.sqrt((r.x-d.x)*(r.x-d.x)+(r.y-d.y)*(r.y-d.y))}At=!0,D=Date.now(),ht=e.yaw,O=e.pitch,Vt("touchstart",o),g()}}function T(o){if(e.draggable&&(e.dragConfirm||o.preventDefault(),at&&(D=Date.now()),At&&at)){var r=Qt(o.targetTouches[0]),d=r.x,C=r.y;if(2==o.targetTouches.length&&-1!=ot){var w=Qt(o.targetTouches[1]);d+=.5*(w.x-r.x),C+=.5*(w.y-r.y);var A=Math.sqrt((r.x-w.x)*(r.x-w.x)+(r.y-w.y)*(r.y-w.y));$t(e.hfov+.1*(ot-A)),ot=A}var W=e.hfov/360*e.touchPanSpeedCoeffFactor;if(ut||"both"!=e.dragConfirm&&"yaw"!=e.dragConfirm||2==o.targetTouches.length){var U=(m-d)*W+ht;B.yaw=(U-e.yaw)%360*.2,e.yaw=U}else m!=d&&ce("yaw"==e.dragConfirm?e.strings.twoTouchXActivate:e.strings.twoTouchActivate);if(ut||"both"!=e.dragConfirm&&"pitch"!=e.dragConfirm||2==o.targetTouches.length){var S=(C-i)*W+O;B.pitch=.2*(S-e.pitch),e.pitch=S}else i!=C&&ce("pitch"==e.dragConfirm?e.strings.twoTouchYActivate:e.strings.twoTouchActivate);("yaw"==e.dragConfirm||"pitch"==e.dragConfirm||"both"==e.dragConfirm)&&2==o.targetTouches.length&&(Gt(),o.preventDefault())}}function k(){$=null,At=!1,Date.now()-D>150&&(B.pitch=B.yaw=0),ot=-1,D=Date.now(),Vt("touchend",event)}te.className="pnlm-compass pnlm-controls pnlm-control",j.appendChild(te),G(V.firstScene?V.firstScene:V.default&&V.default.firstScene?V.default.firstScene:null),Q(!0);var Z=[],K=[];function z(o){if("touch"==o.pointerType){if(!at||!e.draggable)return;Z.push(o.pointerId),K.push({clientX:o.clientX,clientY:o.clientY}),o.targetTouches=K,R(o),o.preventDefault()}}function Y(o){if("touch"==o.pointerType){if($)return void a($,o);if(!e.draggable)return;for(var r=0;r<Z.length;r++)if(o.pointerId==Z[r])return K[r].clientX=o.clientX,K[r].clientY=o.clientY,o.targetTouches=K,T(o),void o.preventDefault()}}function rt(o){if($&&$.dragHandlerFunc&&$.dragHandlerFunc(o,$.dragHandlerArgs),$=null,"touch"==o.pointerType){for(var r=!1,d=0;d<Z.length;d++)o.pointerId==Z[d]&&(Z[d]=f),Z[d]&&(r=!0);r||(Z=[],K=[],k()),o.preventDefault()}}function qt(o){if(at&&("fullscreenonly"!=e.mouseZoom||ut)){if(!ut&&"ctrl"==e.mouseZoom&&!o.ctrlKey){var r=-1!=navigator.platform.indexOf("Mac")?"control":"ctrl";return void ce(e.strings.ctrlZoomActivate.replace("%s",'<kbd class="pnlm-outline">'+r+"</kbd>"))}Gt(),o.preventDefault(),xe(),D=Date.now(),o.wheelDeltaY?($t(e.hfov-.05*o.wheelDeltaY),B.hfov=o.wheelDelta<0?1:-1):o.wheelDelta?($t(e.hfov-.05*o.wheelDelta),B.hfov=o.wheelDelta<0?1:-1):o.detail&&($t(e.hfov+1.5*o.detail),B.hfov=o.detail>0?1:-1),g()}}function Jt(o){xe(),D=Date.now(),ve(),e.roll=0;var r=o.which||o.keycode;e.capturedKeyNumbers.indexOf(r)<0||!ut&&(16==r||17==r)&&"ctrl"==e.mouseZoom||(o.preventDefault(),27==r?ut&&H():_t(r,!0))}function lt(){for(var o=0;o<10;o++)P[o]=!1}function nt(o){var r=o.which||o.keycode;e.capturedKeyNumbers.indexOf(r)<0||(o.preventDefault(),_t(r,!1))}function _t(o,r){var d=!1;switch(o){case 109:case 189:case 17:case 173:P[0]!=r&&(d=!0),P[0]=r;break;case 107:case 187:case 16:case 61:P[1]!=r&&(d=!0),P[1]=r;break;case 38:P[2]!=r&&(d=!0),P[2]=r;break;case 87:P[6]!=r&&(d=!0),P[6]=r;break;case 40:P[3]!=r&&(d=!0),P[3]=r;break;case 83:P[7]!=r&&(d=!0),P[7]=r;break;case 37:P[4]!=r&&(d=!0),P[4]=r;break;case 65:P[8]!=r&&(d=!0),P[8]=r;break;case 39:P[5]!=r&&(d=!0),P[5]=r;break;case 68:P[9]!=r&&(d=!0),P[9]=r}d&&r&&(et=typeof performance<"u"&&performance.now()?performance.now():Date.now(),g())}function xt(o){var r=ft[o],d=Math.min(1,Math.max((Date.now()-r.startTime)/1e3/(r.duration/1e3),0)),C=r.startPosition+e.animationTimingFunction(d)*(r.endPosition-r.startPosition);(r.endPosition>r.startPosition&&C>=r.endPosition||r.endPosition<r.startPosition&&C<=r.endPosition||r.endPosition===r.startPosition)&&(C=r.endPosition,B[o]=0,delete ft[o]),e[o]=C}function tt(){Tt("resize")}function g(){St||(St=!0,wt())}function wt(){if(!_e)if(function Rt(){var o;if(at){var r=X.getCanvas();!1!==e.autoRotate&&(e.yaw>360?e.yaw-=360:e.yaw<-360&&(e.yaw+=360)),o=e.yaw;var d=0;if(e.avoidShowingBackground){var w=e.hfov/2,A=180*Math.atan2(Math.tan(w/180*Math.PI),r.width/r.height)/Math.PI;e.vaov>e.haov?Math.min(Math.cos((e.pitch-w)/180*Math.PI),Math.cos((e.pitch+w)/180*Math.PI)):d=w*(1-Math.min(Math.cos((e.pitch-A)/180*Math.PI),Math.cos((e.pitch+A)/180*Math.PI)))}var U=e.maxYaw-e.minYaw,S=-180,q=180;U<360&&(S=e.minYaw+e.hfov/2+d,q=e.maxYaw-e.hfov/2-d,U<e.hfov&&(S=q=(S+q)/2),e.yaw=Math.max(S,Math.min(q,e.yaw))),!1===e.autoRotate&&(e.yaw>360?e.yaw-=360:e.yaw<-360&&(e.yaw+=360)),!1!==e.autoRotate&&o!=e.yaw&&et!==f&&(e.autoRotate*=-1);var it=2*Math.atan(Math.tan(e.hfov/180*Math.PI*.5)/(r.width/r.height))/Math.PI*180,Pt=e.minPitch+it/2,Et=e.maxPitch-it/2;e.maxPitch-e.minPitch<it&&(Pt=Et=(Pt+Et)/2),isNaN(Pt)&&(Pt=-90),isNaN(Et)&&(Et=90),e.pitch=Math.max(Pt,Math.min(Et,e.pitch)),X.render(e.pitch*Math.PI/180,e.yaw*Math.PI/180,e.hfov*Math.PI/180,{roll:e.roll*Math.PI/180,dynamic:Ot}),oe&&(oe=Ot=!1),ct(),e.compass&&(te.style.transform="rotate("+(-e.yaw-e.northOffset)+"deg)",te.style.webkitTransform="rotate("+(-e.yaw-e.northOffset)+"deg)")}}(),Bt&&clearTimeout(Bt),At||!0===vt)requestAnimationFrame(wt);else if(P[0]||P[1]||P[2]||P[3]||P[4]||P[5]||P[6]||P[7]||P[8]||P[9]||e.autoRotate||ft.pitch||ft.yaw||ft.hfov||Math.abs(B.yaw)>.01||Math.abs(B.pitch)>.01||Math.abs(B.hfov)>.01)(function gt(){if(at){var w,o=!1,r=e.pitch,d=e.yaw,C=e.hfov;w=typeof performance<"u"&&performance.now()?performance.now():Date.now(),et===f&&(et=w);var A=(w-et)*e.hfov/1200;if(A=Math.min(A,10),P[0]&&!0===e.keyboardZoom&&($t(e.hfov+(.8*B.hfov+.4)*A),o=!0),P[1]&&!0===e.keyboardZoom&&($t(e.hfov+(.8*B.hfov-.2)*A),o=!0),(P[2]||P[6])&&(e.pitch+=(.8*B.pitch+.2)*A,o=!0),(P[3]||P[7])&&(e.pitch+=(.8*B.pitch-.2)*A,o=!0),(P[4]||P[8])&&(e.yaw+=(.8*B.yaw-.2)*A,o=!0),(P[5]||P[9])&&(e.yaw+=(.8*B.yaw+.2)*A,o=!0),o&&(D=Date.now()),e.autoRotate){if(w-et>.001){var W=(w-et)/1e3,U=(B.yaw/W*A-.2*e.autoRotate)*W;U=(-e.autoRotate>0?1:-1)*Math.min(Math.abs(e.autoRotate*W),Math.abs(U)),e.yaw+=U}e.autoRotateStopDelay&&(e.autoRotateStopDelay-=w-et,e.autoRotateStopDelay<=0&&(e.autoRotateStopDelay=!1,Zt=e.autoRotate,e.autoRotate=0))}if(ft.pitch&&(xt("pitch"),r=e.pitch),ft.yaw&&(xt("yaw"),d=e.yaw),ft.hfov&&(xt("hfov"),C=e.hfov),A>0&&!e.autoRotate){var S=1-e.friction;!P[4]&&!P[5]&&!P[8]&&!P[9]&&!ft.yaw&&(e.yaw+=B.yaw*A*S),!P[2]&&!P[3]&&!P[6]&&!P[7]&&!ft.pitch&&(e.pitch+=B.pitch*A*S),!P[0]&&!P[1]&&!ft.hfov&&(e.hfov>90&&(S*=1-(e.hfov-90)/90),$t(e.hfov+B.hfov*A*S))}if(et=w,A>0){B.yaw=.8*B.yaw+(e.yaw-d)/A*.2,B.pitch=.8*B.pitch+(e.pitch-r)/A*.2,B.hfov=.8*B.hfov+(e.hfov-C)/A*.2;var q=e.autoRotate?Math.abs(e.autoRotate):5;B.yaw=Math.min(q,Math.max(B.yaw,-q)),B.pitch=Math.min(q,Math.max(B.pitch,-q)),B.hfov=Math.min(q,Math.max(B.hfov,-q))}P[0]&&P[1]&&(B.hfov=0),(P[2]||P[6])&&(P[3]||P[7])&&(B.pitch=0),(P[4]||P[8])&&(P[5]||P[9])&&(B.yaw=0)}})(),e.autoRotateInactivityDelay>=0&&Zt&&Date.now()-D>e.autoRotateInactivityDelay&&!e.autoRotate&&(e.autoRotate=Zt,dt.lookAt(ie,f,Ft,3e3)),requestAnimationFrame(wt);else if(X&&(X.isLoading()||!0===e.dynamic&&Ot))requestAnimationFrame(wt);else{dt.getPitch&&dt.getYaw&&dt.getHfov&&Vt("animatefinished",{pitch:dt.getPitch(),yaw:dt.getYaw(),hfov:dt.getHfov()}),St=!1,et=f;var o=e.autoRotateInactivityDelay-(Date.now()-D);o>0?Bt=setTimeout(function(){e.autoRotate=Zt,dt.lookAt(ie,f,Ft,3e3),g()},o):e.autoRotateInactivityDelay>=0&&Zt&&(e.autoRotate=Zt,dt.lookAt(ie,f,Ft,3e3),g())}}function mt(o,r,d,C){this.w=o,this.x=r,this.y=d,this.z=C}function b(o){var r=function c(o,r,d){var C=function Ut(o,r,d){var C=[r?r*Math.PI/180/2:0,d?d*Math.PI/180/2:0,o?o*Math.PI/180/2:0],w=[Math.cos(C[0]),Math.cos(C[1]),Math.cos(C[2])],A=[Math.sin(C[0]),Math.sin(C[1]),Math.sin(C[2])];return new mt(w[0]*w[1]*w[2]-A[0]*A[1]*A[2],A[0]*w[1]*w[2]-w[0]*A[1]*A[2],w[0]*A[1]*w[2]+A[0]*w[1]*A[2],w[0]*w[1]*A[2]+A[0]*A[1]*w[2])}(o,r,d);C=C.multiply(new mt(Math.sqrt(.5),-Math.sqrt(.5),0,0));var w=st.orientation?-st.orientation*Math.PI/180/2:0;return C.multiply(new mt(Math.cos(w),0,-Math.sin(w),0))}(o.alpha,o.beta,o.gamma).toEulerAngles();"number"==typeof vt&&vt<10?vt+=1:10===vt?(ee=r[2]/Math.PI*180+e.yaw,vt=!0,requestAnimationFrame(wt)):(e.pitch=r[0]/Math.PI*180,e.roll=-r[1]/Math.PI*180,e.yaw=-r[2]/Math.PI*180+ee)}function n(){if(e.sceneFadeDuration&&X.fadeImg!==f){X.fadeImg.style.opacity=0;var o=X.fadeImg;delete X.fadeImg,setTimeout(function(){kt.removeChild(o),Vt("scenechangefadedone")},e.sceneFadeDuration)}te.style.display=e.compass?"inline":"none",function _(){ue||(e.hotSpots?(e.hotSpots=e.hotSpots.sort(function(o,r){return o.pitch<r.pitch}),e.hotSpots.forEach(u)):e.hotSpots=[],ue=!0,ct())}(),E.load.box.style.display="none",J!==f&&(kt.removeChild(J),J=f),at=!0,!0!==e.dynamic&&(v=f),g(),Vt("load")}function u(o){o.pitch=Number(o.pitch)||0,o.yaw=Number(o.yaw)||0;var r=M.createElement("div");r.tabIndex=-1,r.className="pnlm-hotspot-base",r.className+=o.cssClass?" "+o.cssClass:" pnlm-hotspot pnlm-sprite pnlm-"+he(o.type);var C,d=M.createElement("span");if(o.text&&(d.innerHTML=he(o.text)),o.video){var w=M.createElement("video"),A=o.video;e.basePath&&!le(A)&&(A=e.basePath+A),w.src=ge(A),w.controls=!0,w.style.width=o.width+"px",j.appendChild(r),d.appendChild(w)}else if(o.image){var W=o.image;e.basePath&&!le(W)&&(W=e.basePath+W),(C=M.createElement("a")).href=ge(o.URL?o.URL:W,!0),e.targetBlank&&(C.target="_blank",C.rel="noopener"),d.appendChild(C);var U=M.createElement("img");U.src=ge(W),U.style.width=o.width+"px",U.style.paddingTop="5px",j.appendChild(r),C.appendChild(U),d.style.maxWidth="initial"}else if(o.URL){if((C=M.createElement("a")).href=ge(o.URL,!0),o.attributes)for(var S in o.attributes)C.setAttribute(S,o.attributes[S]);else e.targetBlank&&(C.target="_blank",C.rel="noopener");j.appendChild(C),r.className+=" pnlm-pointer",d.className+=" pnlm-pointer",C.appendChild(r)}else o.sceneId&&(r.onclick=r.ontouchend=function(){return r.clicked||(r.clicked=!0,Ce(o.sceneId,o.targetPitch,o.targetYaw,o.targetHfov)),!1},r.className+=" pnlm-pointer",d.className+=" pnlm-pointer"),j.appendChild(r);o.createTooltipFunc?o.createTooltipFunc(r,o.createTooltipArgs):(o.text||o.video||o.image)&&(r.classList.add("pnlm-tooltip"),r.appendChild(d),d.style.width=d.scrollWidth-20+"px",d.style.marginLeft=-(d.scrollWidth-r.offsetWidth)/2+"px",d.style.marginTop=-d.scrollHeight-12+"px"),o.clickHandlerFunc&&(r.addEventListener("click",function(q){o.clickHandlerFunc(q,o.clickHandlerArgs)},"false"),r.addEventListener(""===M.documentElement.style.pointerAction&&""===M.documentElement.style.touchAction?"pointerup":"touchend",function(q){o.clickHandlerFunc(q,o.clickHandlerArgs)},!1),r.className+=" pnlm-pointer",d.className+=" pnlm-pointer"),o.draggable&&(r.addEventListener("mousedown",function(q){o.dragHandlerFunc&&o.dragHandlerFunc(q,o.dragHandlerArgs),$=o}),""===M.documentElement.style.pointerAction&&""===M.documentElement.style.touchAction&&r.addEventListener("pointerdown",function(q){o.dragHandlerFunc&&o.dragHandlerFunc(q,o.dragHandlerArgs),$=o}),r.addEventListener("touchmove",function(q){a(o,q.targetTouches[0])}),r.addEventListener("touchend",function(q){o.dragHandlerFunc&&o.dragHandlerFunc(q,o.dragHandlerArgs),$=null})),o.div=r}function a(o,r){var d=h(r);o.pitch=d[0],o.yaw=d[1],N(o)}function N(o){var r=Math.sin(o.pitch*Math.PI/180),d=Math.cos(o.pitch*Math.PI/180),C=Math.sin(e.pitch*Math.PI/180),w=Math.cos(e.pitch*Math.PI/180),A=Math.cos((-o.yaw+e.yaw)*Math.PI/180),W=r*C+d*A*w;if(o.yaw<=90&&o.yaw>-90&&W<=0||(o.yaw>90||o.yaw<=-90)&&W<=0)o.div.style.visibility="hidden";else{var U=Math.sin((-o.yaw+e.yaw)*Math.PI/180),S=Math.tan(e.hfov*Math.PI/360);o.div.style.visibility="visible";var q=X.getCanvas(),it=q.clientWidth,Pt=q.clientHeight,Et=[-it/S*U*d/W/2,-it/S*(r*w-d*A*C)/W/2],Wt=Math.sin(e.roll*Math.PI/180),ye=Math.cos(e.roll*Math.PI/180);(Et=[Et[0]*ye-Et[1]*Wt,Et[0]*Wt+Et[1]*ye])[0]+=(it-o.div.offsetWidth)/2,Et[1]+=(Pt-o.div.offsetHeight)/2;var we="translate("+Et[0]+"px, "+Et[1]+"px) translateZ(9999px) rotate("+e.roll+"deg)";o.scale&&(we+=" scale("+Ft/e.hfov/W+")"),o.div.style.webkitTransform=we,o.div.style.MozTransform=we,o.div.style.transform=we}}function ct(){e.hotSpots.forEach(N)}function G(o){e={};var r,d,C=["haov","vaov","vOffset","northOffset","horizonPitch","horizonRoll"];for(r in pt=[],ae)ae.hasOwnProperty(r)&&(e[r]=ae[r]);for(r in V.default)if(V.default.hasOwnProperty(r))if("strings"==r)for(d in V.default.strings)V.default.strings.hasOwnProperty(d)&&(e.strings[d]=he(V.default.strings[d]));else e[r]=V.default[r],C.indexOf(r)>=0&&pt.push(r);if(null!==o&&""!==o&&V.scenes&&V.scenes[o]){var w=V.scenes[o];for(r in w)if(w.hasOwnProperty(r))if("strings"==r)for(d in w.strings)w.strings.hasOwnProperty(d)&&(e.strings[d]=he(w.strings[d]));else e[r]=w[r],C.indexOf(r)>=0&&pt.push(r);e.scene=o}for(r in V)if(V.hasOwnProperty(r))if("strings"==r)for(d in V.strings)V.strings.hasOwnProperty(d)&&(e.strings[d]=he(V.strings[d]));else e[r]=V[r],C.indexOf(r)>=0&&pt.push(r)}function Q(o){if((o=o||!1)&&"preview"in e){var r=e.preview;e.basePath&&!le(r)&&(r=e.basePath+r),(J=M.createElement("div")).className="pnlm-preview-img",J.style.backgroundImage="url('"+function Le(o){return ge(o).replace(/"/g,"%22").replace(/'/g,"%27")}(r)+"')",kt.appendChild(J)}var d=e.title,C=e.author;for(var w in o&&("previewTitle"in e&&(e.title=e.previewTitle),"previewAuthor"in e&&(e.author=e.previewAuthor)),e.hasOwnProperty("title")||(E.title.innerHTML=""),e.hasOwnProperty("author")||(E.author.innerHTML=""),!e.hasOwnProperty("title")&&!e.hasOwnProperty("author")&&(E.container.style.display="none"),e.targetBlank&&(ne.rel="noopener",ne.target="_blank"),F.load.innerHTML="<div><p>"+e.strings.loadButtonLabel+"</p></div>",E.load.boxp.innerHTML=e.strings.loadingLabel,e)if(e.hasOwnProperty(w))switch(w){case"title":E.title.innerHTML=he(e[w]),E.container.style.display="inline";break;case"author":var A=he(e[w]);if(e.authorURL){var W=M.createElement("a");W.href=ge(e.authorURL,!0),e.targetBlank&&(W.target="_blank",W.rel="noopener"),W.innerHTML=he(e[w]),A=W.outerHTML}E.author.innerHTML=e.strings.bylineLabel.replace("%s",A),E.container.style.display="inline";break;case"hfov":$t(Number(e[w]));break;case"autoLoad":!0===e[w]&&X===f&&(E.load.box.style.display="inline",F.load.style.display="none",pe());break;case"showZoomCtrl":F.zoom.style.display=e[w]&&0!=e.showControls?"block":"none";break;case"showFullscreenCtrl":F.fullscreen.style.display=e[w]&&0!=e.showControls&&("fullscreen"in M||"mozFullScreen"in M||"webkitIsFullScreen"in M||"msFullscreenElement"in M)?"block":"none";break;case"hotSpotDebug":re.style.display=e[w]?"block":"none";break;case"showControls":e[w]||(F.orientation.style.display="none",F.zoom.style.display="none",F.fullscreen.style.display="none");break;case"orientationOnByDefault":e[w]&&Te()}o&&(d?e.title=d:delete e.title,C?e.author=C:delete e.author)}function H(){if(at&&!Mt)if(ut)M.exitFullscreen?M.exitFullscreen():M.mozCancelFullScreen?M.mozCancelFullScreen():M.webkitCancelFullScreen?M.webkitCancelFullScreen():M.msExitFullscreen&&M.msExitFullscreen();else try{I.requestFullscreen?I.requestFullscreen():I.mozRequestFullScreen?I.mozRequestFullScreen():I.msRequestFullscreen?I.msRequestFullscreen():I.webkitRequestFullScreen()}catch{}}function Tt(o){M.fullscreenElement||M.fullscreen||M.mozFullScreen||M.webkitIsFullScreen||M.msFullscreenElement?(F.fullscreen.classList.add("pnlm-fullscreen-toggle-button-active"),ut=!0):(F.fullscreen.classList.remove("pnlm-fullscreen-toggle-button-active"),ut=!1),"resize"!==o&&Vt("fullscreenchange",ut),X.resize(),$t(e.hfov),g()}function Me(o){var r=e.minHfov;if("multires"==e.type&&X&&!e.multiResMinHfov&&(r=Math.min(r,X.getCanvas().width/(e.multiRes.cubeResolution/90*.9))),r>e.maxHfov)return console.log("HFOV bounds do not make sense (minHfov > maxHfov)."),e.hfov;var d=e.hfov;if(d=o<r?r:o>e.maxHfov?e.maxHfov:o,e.avoidShowingBackground&&X&&!isNaN(e.maxPitch-e.minPitch)){var C=X.getCanvas();d=Math.min(d,360*Math.atan(Math.tan((e.maxPitch-e.minPitch)/360*Math.PI)/C.height*C.width)/Math.PI)}return d}function $t(o){e.hfov=Me(o),Vt("zoomchange",e.hfov)}function xe(){ft={},Zt=e.autoRotate?e.autoRotate:Zt,e.autoRotate=!1}function be(){(function se(){Mt&&(E.load.box.style.display="none",E.errorMsg.style.display="none",Mt=!1,kt.style.display="block",Vt("errorcleared"))})(),at=!1,Gt(),F.load.style.display="none",E.load.box.style.display="inline",pe()}function Ce(o,r,d,C,w){var A,W,U,S;if(at||(w=!0),at=!1,ft={},e.sceneFadeDuration&&!w){var q=X.render(e.pitch*Math.PI/180,e.yaw*Math.PI/180,e.hfov*Math.PI/180,{returnImage:"ImageBitmap"});if(q!==f)return(A=q.then?M.createElement("canvas"):new Image).className="pnlm-fade-img",A.style.transition="opacity "+e.sceneFadeDuration/1e3+"s",A.style.width="100%",A.style.height="100%",q.then?q.then(function(it){A.width=it.width,A.height=it.height,A.getContext("2d").drawImage(it,0,0),Ce(o,r,d,C,!0)}):(A.onload=function(){Ce(o,r,d,C,!0)},A.src=q),kt.appendChild(A),void(X.fadeImg=A)}W="same"===r?e.pitch:r,U="same"===d?e.yaw:"sameAzimuth"===d?e.yaw+(e.northOffset||0)-(V.scenes[o].northOffset||0):d,S="same"===C?e.hfov:C,function p(){var o=e.hotSpots;if(ue=!1,delete e.hotSpots,o)for(var r=0;r<o.length;r++){var d=o[r].div;if(d){for(;d.parentNode&&d.parentNode!=j;)d=d.parentNode;j.removeChild(d)}delete o[r].div}}(),G(o),B.yaw=B.pitch=B.hfov=0,Q(),W!==f&&(e.pitch=W),U!==f&&(e.yaw=U),S!==f&&(e.hfov=S),Vt("scenechange",o),be()}function ve(){st.removeEventListener("deviceorientation",b),F.orientation.classList.remove("pnlm-orientation-button-active"),vt=!1}function Te(){jt&&(typeof DeviceMotionEvent<"u"&&"function"==typeof DeviceMotionEvent.requestPermission?DeviceOrientationEvent.requestPermission().then(function(o){"granted"==o&&(vt=1,st.addEventListener("deviceorientation",b),F.orientation.classList.add("pnlm-orientation-button-active"))}):(vt=1,st.addEventListener("deviceorientation",b),F.orientation.classList.add("pnlm-orientation-button-active")))}function he(o){return V.escapeHTML?String(o).split(/&/g).join("&amp;").split('"').join("&quot;").split("'").join("&#39;").split("<").join("&lt;").split(">").join("&gt;").split("/").join("&#x2f;").split("\n").join("<br>"):String(o).split("\n").join("<br>")}function ge(o,r){try{var d=decodeURIComponent(function Ae(o){return o.replace(/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/gi,function(r,d){return"colon"===(d=d.toLowerCase())?":":"#"===d.charAt(0)?"x"===d.charAt(1)?String.fromCharCode(parseInt(d.substring(2),16)):String.fromCharCode(+d.substring(1)):""})}(o)).replace(/[^\w:]/g,"").toLowerCase()}catch{return"about:blank"}return 0===d.indexOf("javascript:")||0===d.indexOf("vbscript:")?(console.log("Script URL removed."),"about:blank"):r&&0===d.indexOf("data:")?(console.log("Data URI removed from link."),"about:blank"):o}function Vt(o){if(o in bt)for(var r=bt[o].length;r>0;r--)bt[o][bt[o].length-r].apply(null,[].slice.call(arguments,1))}mt.prototype.multiply=function(o){return new mt(this.w*o.w-this.x*o.x-this.y*o.y-this.z*o.z,this.x*o.w+this.w*o.x+this.y*o.z-this.z*o.y,this.y*o.w+this.w*o.y+this.z*o.x-this.x*o.z,this.z*o.w+this.w*o.z+this.x*o.y-this.y*o.x)},mt.prototype.toEulerAngles=function(){return[Math.atan2(2*(this.w*this.x+this.y*this.z),1-2*(this.x*this.x+this.y*this.y)),Math.asin(2*(this.w*this.y-this.z*this.x)),Math.atan2(2*(this.w*this.z+this.x*this.y),1-2*(this.y*this.y+this.z*this.z))]},this.isLoaded=function(){return Boolean(at)},this.getPitch=function(){return e.pitch},this.setPitch=function(o,r,d,C){return D=Date.now(),Math.abs(o-e.pitch)<=zt?("function"==typeof d&&d(C),this):((r=r==f?1e3:Number(r))?(ft.pitch={startTime:Date.now(),startPosition:e.pitch,endPosition:o,duration:r},"function"==typeof d&&setTimeout(function(){d(C)},r)):e.pitch=o,g(),this)},this.getPitchBounds=function(){return[e.minPitch,e.maxPitch]},this.setPitchBounds=function(o){return e.minPitch=Math.max(-90,Math.min(o[0],90)),e.maxPitch=Math.max(-90,Math.min(o[1],90)),this},this.getYaw=function(){return(e.yaw+540)%360-180},this.setYaw=function(o,r,d,C){return D=Date.now(),Math.abs(o-e.yaw)<=zt?("function"==typeof d&&d(C),this):(o=(o+180)%360-180,(r=r==f?1e3:Number(r))?(e.yaw-o>180?o+=360:o-e.yaw>180&&(o-=360),ft.yaw={startTime:Date.now(),startPosition:e.yaw,endPosition:o,duration:r},"function"==typeof d&&setTimeout(function(){d(C)},r)):e.yaw=o,g(),this)},this.getYawBounds=function(){return[e.minYaw,e.maxYaw]},this.setYawBounds=function(o){return e.minYaw=Math.max(-360,Math.min(o[0],360)),e.maxYaw=Math.max(-360,Math.min(o[1],360)),this},this.getHfov=function(){return e.hfov},this.setHfov=function(o,r,d,C){return D=Date.now(),Math.abs(o-e.hfov)<=zt?("function"==typeof d&&d(C),this):((r=r==f?1e3:Number(r))?(ft.hfov={startTime:Date.now(),startPosition:e.hfov,endPosition:Me(o),duration:r},"function"==typeof d&&setTimeout(function(){d(C)},r)):$t(o),g(),this)},this.getHfovBounds=function(){return[e.minHfov,e.maxHfov]},this.setHfovBounds=function(o){return e.minHfov=Math.max(0,o[0]),e.maxHfov=Math.max(0,o[1]),this},this.lookAt=function(o,r,d,C,w,A){return C=C==f?1e3:Number(C),o!==f&&Math.abs(o-e.pitch)>zt&&(this.setPitch(o,C,w,A),w=f),r!==f&&Math.abs(r-e.yaw)>zt&&(this.setYaw(r,C,w,A),w=f),d!==f&&Math.abs(d-e.hfov)>zt&&(this.setHfov(d,C,w,A),w=f),"function"==typeof w&&w(A),this},this.getNorthOffset=function(){return e.northOffset},this.setNorthOffset=function(o){return e.northOffset=Math.min(360,Math.max(0,o)),g(),this},this.getHorizonRoll=function(){return e.horizonRoll},this.setHorizonRoll=function(o){return e.horizonRoll=Math.min(90,Math.max(-90,o)),X.setPose(e.horizonPitch*Math.PI/180,e.horizonRoll*Math.PI/180),g(),this},this.getHorizonPitch=function(){return e.horizonPitch},this.setHorizonPitch=function(o){return e.horizonPitch=Math.min(90,Math.max(-90,o)),X.setPose(e.horizonPitch*Math.PI/180,e.horizonRoll*Math.PI/180),g(),this},this.startAutoRotate=function(o,r,d,C){return r=r===f?ie:r,d=d===f?Ft:d,e.autoRotate=o=o||Zt||1,C!==f&&(e.autoRotateInactivityDelay=C),dt.lookAt(r,f,d,3e3),g(),this},this.stopAutoRotate=function(){return Zt=e.autoRotate?e.autoRotate:Zt,e.autoRotate=!1,e.autoRotateInactivityDelay=-1,this},this.stopMovement=function(){xe(),B={yaw:0,pitch:0,hfov:0}},this.getRenderer=function(){return X},this.setUpdate=function(o){return(Ot=!0===o)&&(oe=!1,X===f?Yt():g()),this},this.updateOnce=function(){return Ot=oe=!0,X===f?Yt():g(),this},this.mouseEventToCoords=function(o){return h(o)},this.loadScene=function(o,r,d,C){return!1!==at&&Ce(o,r,d,C),this},this.getScene=function(){return e.scene},this.addScene=function(o,r){return V.scenes[o]=r,this},this.removeScene=function(o){return!(e.scene==o||!V.scenes.hasOwnProperty(o)||(delete V.scenes[o],0))},this.toggleFullscreen=function(){return H(),this},this.getConfig=function(){return e},this.getContainer=function(){return I},this.addHotSpot=function(o,r){if(r===f&&e.scene===f)e.hotSpots.push(o);else{var d=r!==f?r:e.scene;if(!V.scenes.hasOwnProperty(d))throw"Invalid scene ID!";V.scenes[d].hasOwnProperty("hotSpots")||(V.scenes[d].hotSpots=[],d==e.scene&&(e.hotSpots=V.scenes[d].hotSpots)),V.scenes[d].hotSpots.push(o)}return(r===f||e.scene==r)&&(u(o),at&&N(o)),this},this.removeHotSpot=function(o,r){if(r===f||e.scene==r){if(!e.hotSpots)return!1;for(var d=0;d<e.hotSpots.length;d++)if(e.hotSpots[d].hasOwnProperty("id")&&e.hotSpots[d].id==o){for(var C=e.hotSpots[d].div;C.parentNode!=j;)C=C.parentNode;return j.removeChild(C),delete e.hotSpots[d].div,e.hotSpots.splice(d,1),!0}}else{if(!V.scenes.hasOwnProperty(r))return!1;if(!V.scenes[r].hasOwnProperty("hotSpots"))return!1;for(var w=0;w<V.scenes[r].hotSpots.length;w++)if(V.scenes[r].hotSpots[w].hasOwnProperty("id")&&V.scenes[r].hotSpots[w].id==o)return V.scenes[r].hotSpots.splice(w,1),!0}},this.resize=function(){X&&tt()},this.isOrientationSupported=function(){return jt||!1},this.stopOrientation=function(){ve()},this.startOrientation=function(){Te()},this.isOrientationActive=function(){return Boolean(vt)},this.on=function(o,r){return bt[o]=bt[o]||[],bt[o].push(r),this},this.off=function(o,r){if(!o)return bt={},this;if(r){var d=bt[o].indexOf(r);d>=0&&bt[o].splice(d,1),0==bt[o].length&&delete bt[o]}else delete bt[o];return this},this.destroy=function(){if(_e=!0,clearTimeout(Bt),yt&&yt.abort(),Array.isArray(v))for(var o=0;o<6;o++)v[o].src="";X&&X.destroy(),Ht&&(M.removeEventListener("mousemove",y,!1),M.removeEventListener("mouseup",L,!1),I.removeEventListener("mozfullscreenchange",Tt,!1),I.removeEventListener("webkitfullscreenchange",Tt,!1),I.removeEventListener("msfullscreenchange",Tt,!1),I.removeEventListener("fullscreenchange",Tt,!1),Xt?Xt.disconnect():(st.removeEventListener("resize",tt,!1),st.removeEventListener("orientationchange",tt,!1)),I.removeEventListener("keydown",Jt,!1),I.removeEventListener("keyup",nt,!1),I.removeEventListener("blur",lt,!1),M.removeEventListener("mouseleave",L,!1)),I.innerHTML="",I.classList.remove("pnlm-container")}}return{viewer:function(I,V){return new t(I,V)}}}(window,document)},7548:(st,M,f)=>{"use strict";f.d(M,{o:()=>V});var t=f(4537),I=f(707);let V=(()=>{class dt{stepper;constructor(X){this.stepper=X}selectionChanged(){const X=this.stepper._getStepLabelId(this.stepper.selectedIndex),J=document.getElementById(X);J&&J.scrollIntoView({block:"start",inline:"nearest",behavior:"smooth"})}static \u0275fac=function(J){return new(J||dt)(t.Y36(I.Vq))};static \u0275dir=t.lG2({type:dt,selectors:[["mat-vertical-stepper"]],hostBindings:function(J,$){1&J&&t.NdJ("animationDone",function(){return $.selectionChanged()})}})}return dt})()},1447:(st,M,f)=>{"use strict";f.d(M,{t:()=>t});class t{lat;lon}},7753:(st,M,f)=>{"use strict";f.d(M,{H:()=>Ut});var t=f(4537),I=f(418),J=(f(7226),f(2647),f(4511)),$=f(656),At=f(2607),D=f(4032),m=f(6707),i=f(8692),ot=f(92),ht=f(1379),O=f(8659),P=f(3331),ut=f(9665),at=f(8033),Mt=f(6558),de=f(2940),Ht=f(9484),v=f(7529),et=f(1418);const B=["container"];function St(c,b){if(1&c){const l=t.EpF();t.TgZ(0,"button",5),t.NdJ("click",function(){t.CHM(l);const u=t.oxw();return t.KtG(u.onActionShowView360Add())}),t._uU(1),t.ALo(2,"translate"),t.qZA()}2&c&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"ACTION.Add_To_List"),"\n"))}function vt(c,b){if(1&c){const l=t.EpF();t.TgZ(0,"mat-icon",50),t.NdJ("click",function(){t.CHM(l);const u=t.oxw(2);return t.KtG(u.dataDetailModel.title="")}),t._uU(1,"close"),t.qZA()}}function ee(c,b){if(1&c){const l=t.EpF();t.TgZ(0,"mat-icon",50),t.NdJ("click",function(){t.CHM(l);const u=t.oxw(2);return t.KtG(u.dataDetailModel.description="")}),t._uU(1,"close"),t.qZA()}}function Bt(c,b){if(1&c){const l=t.EpF();t.TgZ(0,"mat-icon",51),t.NdJ("click",function(){t.CHM(l);const u=t.oxw(2);return t.KtG(u.dataDetailModel.linkFileId=null)}),t._uU(1,"close"),t.qZA()}}function Zt(c,b){if(1&c&&(t._UZ(0,"img",52),t.ALo(1,"cmsthumbnail")),2&c){const l=t.oxw(2);t.s9C("src",t.lcZ(1,1,l.dataDetailModel.panorama),t.LSH)}}function Ft(c,b){if(1&c&&(t.TgZ(0,"table",53)(1,"tr")(2,"td"),t._uU(3,"viewer Yaw"),t.qZA(),t.TgZ(4,"td"),t._uU(5,"viewer Pitch"),t.qZA(),t.TgZ(6,"td"),t._uU(7,"click Yaw"),t.qZA(),t.TgZ(8,"td"),t._uU(9,"click Pitch"),t.qZA()(),t.TgZ(10,"tr")(11,"td"),t._uU(12),t.qZA(),t.TgZ(13,"td"),t._uU(14),t.qZA(),t.TgZ(15,"td"),t._uU(16),t.qZA(),t.TgZ(17,"td"),t._uU(18),t.qZA()()()),2&c){const l=t.oxw(2);t.xp6(12),t.Oqu(l.postionView.viewerGetYaw),t.xp6(2),t.Oqu(l.postionView.viewerGetPitch),t.xp6(2),t.Oqu(l.postionView.clickGetYaw),t.xp6(2),t.Oqu(l.postionView.clickGetPitch)}}function ie(c,b){if(1&c){const l=t.EpF();t.TgZ(0,"button",54),t.NdJ("click",function(){t.CHM(l);const u=t.oxw(2);return t.KtG(u.onActionShowHotspotAdd())}),t._uU(1),t.ALo(2,"translate"),t.qZA()}2&c&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"ACTION.ADD")," "))}function ft(c,b){1&c&&(t.TgZ(0,"mat-header-cell"),t._uU(1,"\u0634\u0646\u0627\u0633\u0647 \u0635\u062d\u0646\u0647"),t.qZA())}function bt(c,b){if(1&c&&(t.ynx(0),t.TgZ(1,"p",56),t._uU(2),t.qZA(),t.BQk()),2&c){const l=t.oxw().$implicit;t.xp6(2),t.hij("",l.sceneId||"N/A"," ")}}function pt(c,b){if(1&c){const l=t.EpF();t.ynx(0),t.TgZ(1,"div",8)(2,"input",57),t.NdJ("ngModelChange",function(u){t.CHM(l);const a=t.oxw().$implicit;return t.KtG(a.sceneId=u)}),t.qZA()(),t.BQk()}if(2&c){const l=t.oxw().$implicit,n=t.oxw(2);t.xp6(2),t.Q6J("disabled",n.editdisabled)("ngModel",l.sceneId)}}function Ot(c,b){if(1&c&&(t.TgZ(0,"mat-cell"),t.YNc(1,bt,3,1,"ng-container",55),t.YNc(2,pt,3,2,"ng-container",55),t.qZA()),2&c){const l=b.$implicit,n=t.oxw(2);t.xp6(1),t.Q6J("ngIf",!n.editHotspot.guid||!l.guid||l.guid!==n.editHotspot.guid),t.xp6(1),t.Q6J("ngIf",n.editHotspot.guid&&l.guid&&l.guid===n.editHotspot.guid)}}function oe(c,b){1&c&&(t.TgZ(0,"mat-header-cell"),t._uU(1,"pitch"),t.qZA())}function zt(c,b){if(1&c&&(t.ynx(0),t.TgZ(1,"p",56),t._uU(2),t.qZA(),t.BQk()),2&c){const l=t.oxw().$implicit;t.xp6(2),t.hij("",l.pitch||"N/A"," ")}}function Xt(c,b){if(1&c){const l=t.EpF();t.ynx(0),t.TgZ(1,"div",8)(2,"input",58),t.NdJ("ngModelChange",function(u){t.CHM(l);const a=t.oxw().$implicit;return t.KtG(a.pitch=u)}),t.qZA()(),t.BQk()}if(2&c){const l=t.oxw().$implicit,n=t.oxw(2);t.xp6(2),t.Q6J("disabled",n.editdisabled)("ngModel",l.pitch)}}function ue(c,b){if(1&c&&(t.TgZ(0,"mat-cell"),t.YNc(1,zt,3,1,"ng-container",55),t.YNc(2,Xt,3,2,"ng-container",55),t.qZA()),2&c){const l=b.$implicit,n=t.oxw(2);t.xp6(1),t.Q6J("ngIf",!n.editHotspot.guid||!l.guid||l.guid!==n.editHotspot.guid),t.xp6(1),t.Q6J("ngIf",n.editHotspot.guid&&l.guid&&l.guid===n.editHotspot.guid)}}function yt(c,b){1&c&&(t.TgZ(0,"mat-header-cell"),t._uU(1,"yaw"),t.qZA())}function _e(c,b){if(1&c&&(t.ynx(0),t.TgZ(1,"p",59),t._uU(2),t.qZA(),t.BQk()),2&c){const l=t.oxw().$implicit;t.xp6(2),t.hij("",l.yaw||"N/A"," ")}}function ae(c,b){if(1&c){const l=t.EpF();t.ynx(0),t.TgZ(1,"div",8)(2,"input",60),t.NdJ("ngModelChange",function(u){t.CHM(l);const a=t.oxw().$implicit;return t.KtG(a.yaw=u)}),t.qZA()(),t.BQk()}if(2&c){const l=t.oxw().$implicit,n=t.oxw(2);t.xp6(2),t.Q6J("disabled",n.editdisabled)("ngModel",l.yaw)}}function j(c,b){if(1&c&&(t.TgZ(0,"mat-cell"),t.YNc(1,_e,3,1,"ng-container",55),t.YNc(2,ae,3,2,"ng-container",55),t.qZA()),2&c){const l=b.$implicit,n=t.oxw(2);t.xp6(1),t.Q6J("ngIf",!n.editHotspot.guid||!l.guid||l.guid!==n.editHotspot.guid),t.xp6(1),t.Q6J("ngIf",n.editHotspot.guid&&l.guid&&l.guid===n.editHotspot.guid)}}function kt(c,b){1&c&&(t.TgZ(0,"mat-header-cell"),t._uU(1,"\u0646\u0648\u0639"),t.qZA())}function Lt(c,b){if(1&c&&(t.ynx(0),t.TgZ(1,"p",59),t._uU(2),t.qZA(),t.BQk()),2&c){const l=t.oxw().$implicit;t.xp6(2),t.Oqu(l.type)}}function It(c,b){if(1&c){const l=t.EpF();t.ynx(0),t.TgZ(1,"div",8)(2,"mat-select",61),t.NdJ("ngModelChange",function(u){t.CHM(l);const a=t.oxw().$implicit;return t.KtG(a.type=u)}),t.TgZ(3,"mat-option",62),t._uU(4,"\u0627\u0637\u0644\u0627\u0639\u0627\u062a"),t.qZA()()(),t.BQk()}if(2&c){const l=t.oxw().$implicit,n=t.oxw(2);t.xp6(2),t.Q6J("disabled",n.editdisabled)("ngModel",l.type),t.xp6(1),t.Q6J("value","info")}}function ne(c,b){if(1&c&&(t.TgZ(0,"mat-cell"),t.YNc(1,Lt,3,1,"ng-container",55),t.YNc(2,It,5,3,"ng-container",55),t.qZA()),2&c){const l=b.$implicit,n=t.oxw(2);t.xp6(1),t.Q6J("ngIf",!n.editHotspot.guid||!l.guid||l.guid!==n.editHotspot.guid),t.xp6(1),t.Q6J("ngIf",n.editHotspot.guid&&l.guid&&l.guid===n.editHotspot.guid)}}function me(c,b){1&c&&(t.TgZ(0,"mat-header-cell"),t._uU(1,"targetYaw"),t.qZA())}function E(c,b){if(1&c&&(t.ynx(0),t.TgZ(1,"p",59),t._uU(2),t.qZA(),t.BQk()),2&c){const l=t.oxw().$implicit;t.xp6(2),t.hij("",l.targetYaw||"N/A"," ")}}function re(c,b){if(1&c){const l=t.EpF();t.ynx(0),t.TgZ(1,"div",8)(2,"input",63),t.NdJ("ngModelChange",function(u){t.CHM(l);const a=t.oxw().$implicit;return t.KtG(a.targetYaw=u)}),t.qZA()(),t.BQk()}if(2&c){const l=t.oxw().$implicit,n=t.oxw(2);t.xp6(2),t.Q6J("disabled",n.editdisabled)("ngModel",l.targetYaw)}}function F(c,b){if(1&c&&(t.TgZ(0,"mat-cell"),t.YNc(1,E,3,1,"ng-container",55),t.YNc(2,re,3,2,"ng-container",55),t.qZA()),2&c){const l=b.$implicit,n=t.oxw(2);t.xp6(1),t.Q6J("ngIf",!n.editHotspot.guid||!l.guid||l.guid!==n.editHotspot.guid),t.xp6(1),t.Q6J("ngIf",n.editHotspot.guid&&l.guid&&l.guid===n.editHotspot.guid)}}function jt(c,b){1&c&&(t.TgZ(0,"mat-header-cell"),t._uU(1,"targetPitch"),t.qZA())}function te(c,b){if(1&c&&(t.ynx(0),t.TgZ(1,"p",59),t._uU(2),t.qZA(),t.BQk()),2&c){const l=t.oxw().$implicit;t.xp6(2),t.hij("",l.targetPitch||"N/A"," ")}}function pe(c,b){if(1&c){const l=t.EpF();t.ynx(0),t.TgZ(1,"div",8)(2,"input",64),t.NdJ("ngModelChange",function(u){t.CHM(l);const a=t.oxw().$implicit;return t.KtG(a.targetPitch=u)}),t.qZA()(),t.BQk()}if(2&c){const l=t.oxw().$implicit,n=t.oxw(2);t.xp6(2),t.Q6J("disabled",n.editdisabled)("ngModel",l.targetPitch)}}function le(c,b){if(1&c&&(t.TgZ(0,"mat-cell"),t.YNc(1,te,3,1,"ng-container",55),t.YNc(2,pe,3,2,"ng-container",55),t.qZA()),2&c){const l=b.$implicit,n=t.oxw(2);t.xp6(1),t.Q6J("ngIf",!n.editHotspot.guid||!l.guid||l.guid!==n.editHotspot.guid),t.xp6(1),t.Q6J("ngIf",n.editHotspot.guid&&l.guid&&l.guid===n.editHotspot.guid)}}function Yt(c,b){1&c&&(t.TgZ(0,"mat-header-cell"),t._uU(1,"\u062a\u0648\u0636\u06cc\u062d\u0627\u062a"),t.qZA())}function fe(c,b){if(1&c&&(t.ynx(0),t.TgZ(1,"p",56),t._uU(2),t.qZA(),t.BQk()),2&c){const l=t.oxw().$implicit;t.xp6(2),t.hij("",l.text||"N/A"," ")}}function Ct(c,b){if(1&c){const l=t.EpF();t.ynx(0),t.TgZ(1,"div",8)(2,"input",65),t.NdJ("ngModelChange",function(u){t.CHM(l);const a=t.oxw().$implicit;return t.KtG(a.text=u)}),t.qZA()(),t.BQk()}if(2&c){const l=t.oxw().$implicit,n=t.oxw(2);t.xp6(2),t.Q6J("disabled",n.editdisabled)("ngModel",l.text)}}function se(c,b){if(1&c&&(t.TgZ(0,"mat-cell"),t.YNc(1,fe,3,1,"ng-container",55),t.YNc(2,Ct,3,2,"ng-container",55),t.qZA()),2&c){const l=b.$implicit,n=t.oxw(2);t.xp6(1),t.Q6J("ngIf",!n.editHotspot.guid||!l.guid||l.guid!==n.editHotspot.guid),t.xp6(1),t.Q6J("ngIf",n.editHotspot.guid&&l.guid&&l.guid===n.editHotspot.guid)}}function ce(c,b){1&c&&(t.TgZ(0,"mat-header-cell"),t._uU(1,"\u0622\u062f\u0631\u0633 \u0648\u0628 \u0633\u0627\u06cc\u062a"),t.qZA())}function Gt(c,b){if(1&c&&(t.ynx(0),t.TgZ(1,"p",66),t._uU(2),t.qZA(),t.BQk()),2&c){const l=t.oxw().$implicit;t.xp6(2),t.hij("",l.url||"N/A"," ")}}function Kt(c,b){if(1&c){const l=t.EpF();t.ynx(0),t.TgZ(1,"div",8)(2,"input",67),t.NdJ("ngModelChange",function(u){t.CHM(l);const a=t.oxw().$implicit;return t.KtG(a.url=u)}),t.qZA()(),t.BQk()}if(2&c){const l=t.oxw().$implicit,n=t.oxw(2);t.xp6(2),t.Q6J("disabled",n.editdisabled)("ngModel",l.url)}}function Qt(c,b){if(1&c&&(t.TgZ(0,"mat-cell"),t.YNc(1,Gt,3,1,"ng-container",55),t.YNc(2,Kt,3,2,"ng-container",55),t.qZA()),2&c){const l=b.$implicit,n=t.oxw(2);t.xp6(1),t.Q6J("ngIf",!n.editHotspot.guid||!l.guid||l.guid!==n.editHotspot.guid),t.xp6(1),t.Q6J("ngIf",n.editHotspot.guid&&l.guid&&l.guid===n.editHotspot.guid)}}function s(c,b){1&c&&(t.TgZ(0,"mat-header-cell"),t._uU(1,"Action"),t.qZA())}function x(c,b){if(1&c){const l=t.EpF();t.ynx(0),t.TgZ(1,"mat-icon",69),t.NdJ("click",function(){t.CHM(l);const u=t.oxw().$implicit,a=t.oxw(2);return t.KtG(a.editROw(u))}),t._uU(2,"edit"),t.qZA(),t.TgZ(3,"mat-icon",69),t.NdJ("click",function(){t.CHM(l);const u=t.oxw().$implicit,a=t.oxw(2);return t.KtG(a.removeROw(u))}),t._uU(4,"delete"),t.qZA(),t.BQk()}}function h(c,b){if(1&c){const l=t.EpF();t.TgZ(0,"button",73),t.NdJ("click",function(){t.CHM(l);const u=t.oxw(4);return t.KtG(u.updateEdit())}),t._uU(1),t.ALo(2,"translate"),t.qZA()}if(2&c){const l=t.oxw(4);t.Q6J("disabled",l.editdisabled||!l.editHotspot.text||0===l.editHotspot.text.length),t.xp6(1),t.Oqu(t.lcZ(2,2,"ACTION.Update"))}}function y(c,b){if(1&c){const l=t.EpF();t.TgZ(0,"button",74),t.NdJ("click",function(){t.CHM(l);const u=t.oxw(4);return t.KtG(u.onActionPannellumClickLastPoint())}),t._uU(1,"\u0646\u0642\u0637\u0647"),t.qZA()}if(2&c){const l=t.oxw(4);t.Q6J("disabled",l.editdisabled)}}function L(c,b){if(1&c){const l=t.EpF();t.ynx(0),t.YNc(1,h,3,4,"button",70),t.TgZ(2,"button",71),t.NdJ("click",function(){t.CHM(l);const u=t.oxw(3);return t.KtG(u.cancelEdit())}),t._uU(3),t.ALo(4,"translate"),t.qZA(),t.YNc(5,y,2,1,"button",72),t.BQk()}if(2&c){const l=t.oxw(3);t.xp6(1),t.Q6J("ngIf",l.postionView),t.xp6(1),t.Q6J("disabled",l.editdisabled),t.xp6(1),t.Oqu(t.lcZ(4,4,"ACTION.CANCEL")),t.xp6(2),t.Q6J("ngIf",l.editHotspot.pitch!==(null==l.postionView?null:l.postionView.clickGetPitch)&&l.editHotspot.yaw!==(null==l.postionView?null:l.postionView.clickGetYaw))}}function R(c,b){if(1&c&&(t.TgZ(0,"mat-cell")(1,"span",68),t.YNc(2,x,5,0,"ng-container",55),t.YNc(3,L,6,6,"ng-container",55),t.qZA()()),2&c){const l=b.$implicit,n=t.oxw(2);t.xp6(2),t.Q6J("ngIf",!n.editHotspot.guid||!l.guid||l.guid!==n.editHotspot.guid),t.xp6(1),t.Q6J("ngIf",n.editHotspot.guid&&l.guid&&l.guid===n.editHotspot.guid)}}function T(c,b){1&c&&t._UZ(0,"mat-header-row")}function k(c,b){1&c&&t._UZ(0,"mat-row")}function Z(c,b){if(1&c){const l=t.EpF();t.TgZ(0,"mat-icon",50),t.NdJ("click",function(){t.CHM(l);const u=t.oxw(2);return t.KtG(u.dataDetailModel.configDataJson="")}),t._uU(1,"close"),t.qZA()}}function K(c,b){if(1&c){const l=t.EpF();t.TgZ(0,"div",6)(1,"div",7)(2,"div",8)(3,"label",9),t._uU(4),t.ALo(5,"translate"),t.qZA(),t.TgZ(6,"input",10,11),t.NdJ("ngModelChange",function(u){t.CHM(l);const a=t.oxw();return t.KtG(a.dataDetailModel.title=u)}),t.ALo(8,"translate"),t.qZA(),t.YNc(9,vt,2,0,"mat-icon",12),t.TgZ(10,"mat-icon",13),t._uU(11,"mode_edit"),t.qZA()(),t.TgZ(12,"div",8)(13,"label",14),t._uU(14),t.ALo(15,"translate"),t.qZA(),t.TgZ(16,"input",15,16),t.NdJ("ngModelChange",function(u){t.CHM(l);const a=t.oxw();return t.KtG(a.dataDetailModel.description=u)}),t.ALo(18,"translate"),t.qZA(),t.YNc(19,ee,2,0,"mat-icon",12),t.TgZ(20,"mat-icon",13),t._uU(21,"mode_edit"),t.qZA()(),t.TgZ(22,"div",8)(23,"label",17),t._uU(24),t.ALo(25,"translate"),t.qZA(),t.TgZ(26,"input",18,19),t.NdJ("ngModelChange",function(u){t.CHM(l);const a=t.oxw();return t.KtG(a.dataDetailModel.linkFileId=u)})("click",function(){t.CHM(l);const u=t.oxw();return t.KtG(u.fileManagerOpenFormReport=!0)}),t.ALo(28,"translate"),t.qZA(),t.YNc(29,Bt,2,0,"mat-icon",20),t.TgZ(30,"mat-icon",21),t.NdJ("click",function(){t.CHM(l);const u=t.oxw();return t.KtG(u.fileManagerOpenFormReport=!0)}),t._uU(31,"mode_edit"),t.qZA()(),t.TgZ(32,"cms-file-manager",22),t.NdJ("itemSelected",function(u){t.CHM(l);const a=t.oxw();return t.KtG(a.onActionFileSelect(u))})("openFormChange",function(u){t.CHM(l);const a=t.oxw();return t.KtG(a.fileManagerOpenFormReport=u)}),t.qZA(),t.TgZ(33,"a",23),t.ALo(34,"cmsthumbnail"),t.YNc(35,Zt,2,3,"img",24),t.qZA(),t._UZ(36,"hr"),t.YNc(37,Ft,19,4,"table",25),t._UZ(38,"hr"),t.TgZ(39,"h5"),t._uU(40,"\u062a\u0646\u0638\u06cc\u0645\u0627\u062a "),t.qZA(),t.TgZ(41,"p"),t._uU(42,"\u062f\u0631 \u0648\u0631\u0648\u062f \u0627\u06cc\u0646 \u062a\u0646\u0638\u06cc\u0645\u0627\u062a \u0628\u0627 \u0645\u062f\u06cc\u0631\u06cc\u062a \u0633\u0627\u0645\u0627\u0646\u0647 \u0647\u0645\u0627\u0647\u0646\u06af \u0628\u0627\u0634\u06cc\u062f"),t.qZA(),t.TgZ(43,"div",26)(44,"div",27),t.YNc(45,ie,3,3,"button",28),t.qZA(),t.TgZ(46,"mat-table",29,30),t.ynx(48,31),t.YNc(49,ft,2,0,"mat-header-cell",32),t.YNc(50,Ot,3,2,"mat-cell",33),t.BQk(),t.ynx(51,34),t.YNc(52,oe,2,0,"mat-header-cell",32),t.YNc(53,ue,3,2,"mat-cell",33),t.BQk(),t.ynx(54,35),t.YNc(55,yt,2,0,"mat-header-cell",32),t.YNc(56,j,3,2,"mat-cell",33),t.BQk(),t.ynx(57,36),t.YNc(58,kt,2,0,"mat-header-cell",32),t.YNc(59,ne,3,2,"mat-cell",33),t.BQk(),t.ynx(60,37),t.YNc(61,me,2,0,"mat-header-cell",32),t.YNc(62,F,3,2,"mat-cell",33),t.BQk(),t.ynx(63,38),t.YNc(64,jt,2,0,"mat-header-cell",32),t.YNc(65,le,3,2,"mat-cell",33),t.BQk(),t.ynx(66,39),t.YNc(67,Yt,2,0,"mat-header-cell",32),t.YNc(68,se,3,2,"mat-cell",33),t.BQk(),t.ynx(69,40),t.YNc(70,ce,2,0,"mat-header-cell",32),t.YNc(71,Qt,3,2,"mat-cell",33),t.BQk(),t.ynx(72,41),t.YNc(73,s,2,0,"mat-header-cell",32),t.YNc(74,R,4,2,"mat-cell",33),t.BQk(),t.YNc(75,T,1,0,"mat-header-row",42),t.YNc(76,k,1,0,"mat-row",43),t.qZA()(),t.TgZ(77,"div",44)(78,"label",45),t._uU(79),t.ALo(80,"translate"),t.qZA(),t.TgZ(81,"input",46,16),t.NdJ("ngModelChange",function(u){t.CHM(l);const a=t.oxw();return t.KtG(a.dataDetailModel.configDataJson=u)}),t.ALo(83,"translate"),t.qZA(),t.YNc(84,Z,2,0,"mat-icon",12),t.TgZ(85,"mat-icon",13),t._uU(86,"mode_edit"),t.qZA()(),t.TgZ(87,"div",27)(88,"button",5),t.NdJ("click",function(){t.CHM(l);const u=t.oxw();return t.KtG(u.onActionSubmitView360())}),t._UZ(89,"i",47),t._uU(90),t.ALo(91,"translate"),t.qZA(),t.TgZ(92,"button",48),t.NdJ("click",function(){t.CHM(l);const u=t.oxw();return t.KtG(u.onActionCancellView360())}),t._UZ(93,"i",49),t._uU(94),t.ALo(95,"translate"),t.qZA()(),t._UZ(96,"br"),t.qZA()()}if(2&c){const l=t.oxw();t.xp6(4),t.Oqu(t.lcZ(5,34,"TITLE.Photography_Place")),t.xp6(2),t.s9C("placeholder",t.lcZ(8,36,"TITLE.Photography_Place")),t.Q6J("ngModel",l.dataDetailModel.title),t.xp6(3),t.Q6J("ngIf",l.dataDetailModel.title),t.xp6(5),t.Oqu(t.lcZ(15,38,"TITLE.DESCRIPTION")),t.xp6(2),t.s9C("placeholder",t.lcZ(18,40,"TITLE.DESCRIPTION")),t.Q6J("ngModel",l.dataDetailModel.description),t.xp6(3),t.Q6J("ngIf",l.dataDetailModel.description),t.xp6(5),t.Oqu(t.lcZ(25,42,"TITLE.View_360_File_ID")),t.xp6(2),t.s9C("placeholder",t.lcZ(28,44,"TITLE.View_360_File_ID")),t.Q6J("ngModel",l.dataDetailModel.linkFileId),t.xp6(3),t.Q6J("ngIf",l.dataDetailModel.linkFileId),t.xp6(3),t.Q6J("language",l.appLanguage)("isPopup",!0)("openForm",l.fileManagerOpenFormReport)("tree",l.fileManagerTree)("openDirectUploadView",!0)("openFilemanagerButtonLabelKey","select")("selectFileType",l.selectFileTypeReport)("openFilemanagerButtonView",!1),t.xp6(1),t.s9C("href",t.lcZ(34,46,l.dataDetailModel.panorama),t.LSH),t.xp6(2),t.Q6J("ngIf",(null==l.dataDetailModel||null==l.dataDetailModel.panorama?null:l.dataDetailModel.panorama.length)>0),t.xp6(2),t.Q6J("ngIf",l.postionView),t.xp6(8),t.Q6J("ngIf",l.postionView),t.xp6(1),t.Q6J("dataSource",l.tableHotSpotdataSource),t.xp6(29),t.Q6J("matHeaderRowDef",l.tableHotspotDisplayedColumns)("matHeaderRowDefSticky",!0),t.xp6(1),t.Q6J("matRowDefColumns",l.tableHotspotDisplayedColumns),t.xp6(3),t.Oqu(t.lcZ(80,48,"TITLE.configDataJson")),t.xp6(2),t.s9C("placeholder",t.lcZ(83,50,"TITLE.configDataJson")),t.Q6J("ngModel",l.dataDetailModel.configDataJson),t.xp6(3),t.Q6J("ngIf",l.dataDetailModel.configDataJson),t.xp6(6),t.hij(" ",t.lcZ(91,52,"ACTION.SUBMIT_BUTTON")," "),t.xp6(4),t.hij(" ",t.lcZ(95,54,"ACTION.CANCEL")," ")}}function z(c,b){1&c&&(t.TgZ(0,"mat-header-cell"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&c&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"TITLE.PHOTO")," "))}function Y(c,b){if(1&c&&t._UZ(0,"img",52),2&c){const l=t.oxw(2).$implicit;t.s9C("src",l.panorama,t.LSH)}}function rt(c,b){if(1&c&&(t.ynx(0),t.TgZ(1,"a",23),t.YNc(2,Y,1,1,"img",24),t.qZA(),t.BQk()),2&c){const l=t.oxw().$implicit;t.xp6(1),t.s9C("href",l.panorama,t.LSH),t.xp6(1),t.Q6J("ngIf",(null==l||null==l.panorama?null:l.panorama.length)>0)}}function qt(c,b){if(1&c&&(t.TgZ(0,"mat-cell"),t.YNc(1,rt,3,2,"ng-container",55),t.qZA()),2&c){const l=b.$implicit;t.xp6(1),t.Q6J("ngIf",l.panorama)}}function Jt(c,b){1&c&&(t.TgZ(0,"mat-header-cell"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&c&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"TITLE.Photography_Place")," "))}function lt(c,b){if(1&c&&(t.ynx(0),t._uU(1),t.BQk()),2&c){const l=t.oxw().$implicit;t.xp6(1),t.hij(" ",l.title," ")}}function nt(c,b){if(1&c&&(t.TgZ(0,"mat-cell"),t.YNc(1,lt,2,1,"ng-container",55),t.qZA()),2&c){const l=b.$implicit;t.xp6(1),t.Q6J("ngIf",l.title)}}function _t(c,b){1&c&&(t.TgZ(0,"mat-header-cell"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&c&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"TITLE.DESCRIPTION")," "))}function gt(c,b){if(1&c&&(t.ynx(0),t._uU(1),t.BQk()),2&c){const l=t.oxw().$implicit;t.xp6(1),t.hij(" ",l.description," ")}}function xt(c,b){if(1&c&&(t.TgZ(0,"mat-cell"),t.YNc(1,gt,2,1,"ng-container",55),t.qZA()),2&c){const l=b.$implicit;t.xp6(1),t.Q6J("ngIf",l.description)}}function Nt(c,b){1&c&&(t.TgZ(0,"mat-header-cell"),t._uU(1),t.ALo(2,"translate"),t.ALo(3,"translate"),t.qZA()),2&c&&(t.xp6(1),t.AsE(" ",t.lcZ(2,2,"TITLE.Edit")," | ",t.lcZ(3,4,"TITLE.Delete")," "))}function tt(c,b){if(1&c){const l=t.EpF();t.TgZ(0,"mat-cell",81)(1,"small")(2,"mat-icon",82),t.NdJ("click",function(){const a=t.CHM(l).renderIndex,_=t.oxw(2);return t.KtG(_.onActionOptionEditView360(a))}),t._uU(3,"edit"),t.qZA()(),t._uU(4,"| "),t.TgZ(5,"small")(6,"mat-icon",83),t.NdJ("click",function(){const a=t.CHM(l).renderIndex,_=t.oxw(2);return t.KtG(_.onActionOptionRemoveView360(a))}),t._uU(7,"delete"),t.qZA()()()}}function g(c,b){1&c&&t._UZ(0,"mat-header-row")}function wt(c,b){1&c&&t._UZ(0,"mat-row")}function Rt(c,b){if(1&c&&(t.TgZ(0,"div",6)(1,"mat-table",75),t.ynx(2,76),t.YNc(3,z,3,3,"mat-header-cell",32),t.YNc(4,qt,2,1,"mat-cell",33),t.BQk(),t.ynx(5,77),t.YNc(6,Jt,3,3,"mat-header-cell",32),t.YNc(7,nt,2,1,"mat-cell",33),t.BQk(),t.ynx(8,78),t.YNc(9,_t,3,3,"mat-header-cell",32),t.YNc(10,xt,2,1,"mat-cell",33),t.BQk(),t.ynx(11,41),t.YNc(12,Nt,4,6,"mat-header-cell",32),t.YNc(13,tt,8,0,"mat-cell",79),t.BQk(),t.YNc(14,g,1,0,"mat-header-row",80),t.YNc(15,wt,1,0,"mat-row",43),t.qZA()()),2&c){const l=t.oxw();t.xp6(1),t.Q6J("dataSource",l.tabledataSource),t.xp6(13),t.Q6J("matHeaderRowDef",l.tabledisplayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",l.tabledisplayedColumns)}}class mt{viewerGetYaw;viewerGetPitch;clickGetYaw;clickGetPitch}let Ut=(()=>{class c{cmsToastrService;publicHelper;translate;static nextId=0;id=++c.nextId;constructor(l,n,u){this.cmsToastrService=l,this.publicHelper=n,this.translate=u,this.fileManagerTree=this.publicHelper.GetfileManagerTreeConfig()}privateDataModel=[];dataDetailModel=new J.zK_;dataModelChange=new t.vpe;set dataModel(l){l||(l=[]),this.privateDataModel=l,this.privateDataModel.forEach(n=>{n.hotSpots||(n.hotSpots=[]),n.hotSpots=this.uniqByReduce(n.hotSpots),n.hotSpots.forEach(u=>{u.guid=this.getGuid()})}),this.tabledataSource.data=this.privateDataModel,this.tableHotSpotdataSource.data=[]}get dataModel(){return this.privateDataModel}uniqByReduce(l){const n=[];return l.forEach(u=>{!n.includes(u)&&0==n.filter(a=>a.pitch==u.pitch&&a.yaw==u.yaw).length&&n.push(u)}),n}formInfo=new J.LEF;loading=new $.O;loadingOption=new $.O;tabledataSource=new I.by;tableHotSpotdataSource=new I.by;tabledisplayedColumns=["panorama","Title","Description","Action"];tableHotspotDisplayedColumns=["type","text","url","pitch","yaw","Action"];selectFileTypeReport=["jpeg","jpg"];fileManagerTree;appLanguage="fa";showAddView360=!1;fileManagerOpenFormReport=!1;ngOnInit(){this.translate.get("TITLE.Edit").subscribe(l=>{this.formInfo.formTitle=l})}container;viewer;options;postionView;ngAfterViewInit(){this.container.nativeElement.style.display="none"}getGuid(){return Math.floor(Math.random()*(new Date).getTime()).toString()}actionPannellumImageLoad(l,n){const u={type:"equirectangular",panorama:l,autoLoad:!0,autoRotate:1.5,crossOrigin:"anonymous"};n&&n.length>0&&(u.hotSpots=n);const a=Object.assign({},u,this.options);this.viewer&&this.onActionPannellumDestroy(),this.viewer=pannellum.viewer(this.container.nativeElement,a),this.container.nativeElement.style.display="block"}actionPrivateDataModelOptimaze(){const l=[];this.privateDataModel||(this.privateDataModel=[]),this.privateDataModel.forEach(n=>{n.hotSpots||(n.hotSpots=[]),n.hotSpots.forEach(u=>{u.type&&u.type.length>0&&l.push(u)}),n.hotSpots=this.uniqByReduce(l)})}onActionPannellumClick(l){if(!this.viewer)return;this.postionView=new mt,this.postionView.viewerGetYaw=this.viewer.getYaw(),this.postionView.viewerGetPitch=this.viewer.getPitch();const n=this.viewer.mouseEventToCoords(l);!n||0==n.length||(this.postionView.clickGetYaw=n[1],this.postionView.clickGetPitch=n[0])}onActionPannellumDestroy(){this.container.nativeElement.style.display="none",this.postionView=null,this.viewer&&this.viewer.destroy()}onActionPannellumClickLastPoint(){this.postionView&&(0!=this.postionView.clickGetYaw||0!=this.postionView.clickGetPitch)&&(this.editHotspot.yaw=this.postionView.clickGetYaw,this.editHotspot.pitch=this.postionView.clickGetPitch)}onActionFileSelect(l){l&&l.id&&0!==l.id?(this.dataDetailModel.linkFileId=l.id,this.dataDetailModel.panorama=l.downloadLinksrc,this.dataDetailModel.preview=l.downloadLinksrc,this.actionPannellumImageLoad(this.dataDetailModel.panorama,[])):this.cmsToastrService.typeErrorSelectedRow()}onActionSubmitView360(){(!this.dataDetailModel.linkFileId||this.dataDetailModel.linkFileId<=0)&&this.cmsToastrService.typeErrorMessage("\u0641\u0627\u06cc\u0644 \u0627\u0646\u062a\u062e\u0627\u0628 \u0646\u0634\u062f\u0647"),this.privateDataModel||(this.privateDataModel=[]),this.selectIndex>=0?this.privateDataModel[this.selectIndex]=this.dataDetailModel:this.privateDataModel.push(this.dataDetailModel),this.actionPrivateDataModelOptimaze(),this.dataModel=this.privateDataModel,this.dataModelChange.emit(this.privateDataModel),this.showAddView360=!this.showAddView360,this.selectIndex=-1,this.onActionPannellumDestroy()}onActionCancellView360(){this.showAddView360=!1,this.onActionPannellumDestroy()}onActionShowView360Add(){this.dataDetailModel=new J.zK_,this.showAddView360=!this.showAddView360}inAddhotspotGuid="";onActionShowHotspotAdd(){this.dataDetailModel||(this.dataDetailModel=new J.zK_),this.dataDetailModel.hotSpots||(this.dataDetailModel.hotSpots=[]),this.editHotspot=new J.aCC;const l=new J.aCC;l.type="info",l.guid=this.getGuid(),this.inAddhotspotGuid=l.guid,this.dataDetailModel.hotSpots.push(l),this.tableHotSpotdataSource.data=this.uniqByReduce(this.dataDetailModel.hotSpots),this.newROw(l),this.onActionPannellumClickLastPoint()}onActionOptionRemoveView360(l){l<0||!this.privateDataModel||0===this.privateDataModel.length||(this.privateDataModel.splice(l,1),this.actionPrivateDataModelOptimaze(),this.dataModel=this.privateDataModel,this.dataModelChange.emit(this.privateDataModel),this.onActionPannellumDestroy())}selectIndex=-1;onActionOptionEditView360(l){l<0||!this.privateDataModel||0===this.privateDataModel.length||(this.dataDetailModel=this.privateDataModel[l],this.dataDetailModel.hotSpots||(this.dataDetailModel.hotSpots=[]),this.actionPannellumImageLoad(this.dataDetailModel.panorama,this.dataDetailModel.hotSpots),this.oldHotspot=new J.aCC,this.editHotspot=new J.aCC,this.tableHotSpotdataSource.data=this.uniqByReduce(this.dataDetailModel.hotSpots),this.selectIndex=l,this.showAddView360=!this.showAddView360)}editHotspot;oldHotspot;editdisabled;newROw(l){this.editHotspot=l&&l.guid?l:new J.aCC,this.oldHotspot={...this.editHotspot}}editROw(l){this.editHotspot=l&&l.guid?l:new J.aCC,this.oldHotspot={...this.editHotspot},this.inAddhotspotGuid=""}removeROw(l){const n=this.dataDetailModel.hotSpots.findIndex(u=>u.guid==l.guid);n>=0&&(this.dataDetailModel.hotSpots.splice(n,1),this.tableHotSpotdataSource.data=this.uniqByReduce(this.dataDetailModel.hotSpots))}updateEdit(){this.inAddhotspotGuid="",this.editdisabled=!0;const l=this.dataDetailModel.hotSpots.findIndex(n=>n.guid==this.oldHotspot.guid);l>=0&&(this.dataDetailModel.hotSpots[l]=this.editHotspot),this.editdisabled=!1,this.oldHotspot=new J.aCC,this.editHotspot=new J.aCC}cancelEdit(){this.inAddhotspotGuid?.length>0&&(this.dataDetailModel.hotSpots=this.dataDetailModel.hotSpots.filter(l=>l.guid!=this.inAddhotspotGuid)),this.editHotspot=new J.aCC,this.oldHotspot&&this.oldHotspot.guid&&(this.dataDetailModel.hotSpots||(this.dataDetailModel.hotSpots=[]),this.tableHotSpotdataSource.data=this.uniqByReduce(this.dataDetailModel.hotSpots))}static \u0275fac=function(n){return new(n||c)(t.Y36(At.e),t.Y36(D.i),t.Y36(m.sK))};static \u0275cmp=t.Xpm({type:c,selectors:[["app-cms-360-image-list"]],viewQuery:function(n,u){if(1&n&&t.Gf(B,5),2&n){let a;t.iGM(a=t.CRH())&&(u.container=a.first)}},inputs:{dataModel:"dataModel"},outputs:{dataModelChange:"dataModelChange"},decls:6,vars:5,consts:[["type","button","class","btn font-13 font-600 btn-s m-1 rounded-s shadow-xl border-0 gradient-highlight",3,"click",4,"ngIf"],[1,"container",2,"height","380px","width","100%","direction","ltr",3,"id","click"],["container",""],["class","example-container mat-elevation-z8",4,"ngIf"],[3,"options"],["type","button",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-highlight",3,"click"],[1,"example-container","mat-elevation-z8"],[1,"m-2"],[1,"input-style","has-borders","no-icon","input-style-always-active","validate-field","mb-4"],["for","dataDetailModel.title",1,"color-highlight"],["type","text","name","dataDetailModel.title","id","dataDetailModel.title","minlength","3","maxlength","100","required","",1,"form-control","validate-name",3,"ngModel","placeholder","ngModelChange"],["Title",""],["matSuffix","","class","pointer","matSuffix","","mat-icon-button","","aria-label","Clear",3,"click",4,"ngIf"],["matSuffix","",1,"pointer"],["for","dataDetailModel.description",1,"color-highlight"],["type","text","name","dataDetailModel.description","id","dataDetailModel.description","minlength","3","maxlength","100",1,"form-control","validate-name",3,"ngModel","placeholder","ngModelChange"],["Description",""],["for","dataDetailModel.linkFileId",1,"color-highlight"],["type","text","name","dataDetailModel.linkFileId","id","dataDetailModel.linkFileId",1,"form-control","validate-name",3,"ngModel","placeholder","ngModelChange","click"],["LinkFileId",""],["matSuffix","","matSuffix","","mat-icon-button","","aria-label","Clear",3,"click",4,"ngIf"],["matSuffix","",3,"click"],[3,"language","isPopup","openForm","tree","openDirectUploadView","openFilemanagerButtonLabelKey","selectFileType","openFilemanagerButtonView","itemSelected","openFormChange"],["target","_blank",3,"href"],["style","vertical-align:middle;","class","ntk-hover-zoom","aria-hidden","","height","50","width","50",3,"src",4,"ngIf"],["class","grid-row-ltr-center",4,"ngIf"],[2,"background-color","bisque","padding","5px"],[1,"form-actions",2,"direction","ltr"],["type","button","class","btn font-13 font-600 btn-s m-1 rounded-s shadow-xl border-0 gradient-teal",3,"click",4,"ngIf"],["matSort","",3,"dataSource"],["table",""],["matColumnDef","sceneId"],[4,"matHeaderCellDef"],[4,"matCellDef"],["matColumnDef","pitch"],["matColumnDef","yaw"],["matColumnDef","type"],["matColumnDef","targetYaw"],["matColumnDef","targetPitch"],["matColumnDef","text"],["matColumnDef","url"],["matColumnDef","Action"],[4,"matHeaderRowDef","matHeaderRowDefSticky"],[4,"matRowDef","matRowDefColumns"],[1,"input-style","has-borders","no-icon","input-style-always-active","validate-field","mb-4",2,"visibility","hidden"],["for","dataDetailModel.configDataJson",1,"color-highlight"],["type","text","name","dataDetailModel.configDataJson","id","dataDetailModel.configDataJson","minlength","0","maxlength","10000","required","",1,"form-control","validate-name",3,"ngModel","placeholder","ngModelChange"],[1,"fa","fa-check-square-o"],["type","button",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-gray",3,"click"],[1,"ft-x"],["matSuffix","","matSuffix","","mat-icon-button","","aria-label","Clear",1,"pointer",3,"click"],["matSuffix","","matSuffix","","mat-icon-button","","aria-label","Clear",3,"click"],["aria-hidden","","height","50","width","50",1,"ntk-hover-zoom",2,"vertical-align","middle",3,"src"],[1,"grid-row-ltr-center"],["type","button",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-teal",3,"click"],[4,"ngIf"],[1,"text-truncate"],["matInput","","placeholder","\u0634\u0646\u0627\u0633\u0647 \u0635\u062d\u0646\u0647","name","sceneId",1,"form-control","validate-name",2,"direction","ltr","text-align","left",3,"disabled","ngModel","ngModelChange"],["matInput","","type","number","placeholder","pitch","name","pitch",1,"form-control","validate-name",2,"direction","ltr","text-align","left",3,"disabled","ngModel","ngModelChange"],[1,"text-truncate","grid-row-ltr-center"],["matInput","","type","number","placeholder","yaw","name","yaw",1,"form-control","validate-name",2,"direction","ltr","text-align","left",3,"disabled","ngModel","ngModelChange"],["placeholder","Select","name","type",1,"form-control","validate-name",3,"disabled","ngModel","ngModelChange"],[3,"value"],["matInput","","placeholder","targetYaw","name","targetYaw",1,"form-control","validate-name",2,"direction","ltr","text-align","left",3,"disabled","ngModel","ngModelChange"],["matInput","","placeholder","targetPitch","name","targetPitch",1,"form-control","validate-name",2,"direction","ltr","text-align","left",3,"disabled","ngModel","ngModelChange"],["matInput","","placeholder","text","name","text",1,"form-control","validate-name",2,"direction","ltr","text-align","left",3,"disabled","ngModel","ngModelChange"],[1,"text-truncate","grid-row-ltr"],["matInput","","placeholder","url","name","url",1,"form-control","validate-name",2,"direction","ltr","text-align","left",3,"disabled","ngModel","ngModelChange"],[1,"m-1",2,"text-align","center"],[3,"click"],["type","button","class","btn font-13 font-600 btn-s m-1 rounded-s shadow-xl border-0 gradient-teal","class","mb-2",3,"disabled","click",4,"ngIf"],["type","button",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-gray",3,"disabled","click"],["type","button","class","btn font-13 font-600 btn-s m-1 rounded-s shadow-xl border-0 gradient-green","matTooltip","\u062b\u0628\u062a \u0622\u062e\u0631\u06cc\u0646 \u0646\u0642\u0637\u0647 \u06a9\u0644\u06cc\u06a9 \u0634\u062f\u0647",3,"disabled","click",4,"ngIf"],["type","button",1,"mb-2",3,"disabled","click"],["type","button","matTooltip","\u062b\u0628\u062a \u0622\u062e\u0631\u06cc\u0646 \u0646\u0642\u0637\u0647 \u06a9\u0644\u06cc\u06a9 \u0634\u062f\u0647",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-green",3,"disabled","click"],["multiTemplateDataRows","",3,"dataSource"],["matColumnDef","panorama"],["matColumnDef","Title"],["matColumnDef","Description"],["class","Action",4,"matCellDef"],[4,"matHeaderRowDef"],[1,"Action"],["matTooltipPosition","before","aria-hidden","false",2,"color","blue","cursor","pointer",3,"click"],["matTooltipPosition","before","aria-hidden","false",2,"color","red","cursor","pointer",3,"click"]],template:function(n,u){1&n&&(t.YNc(0,St,3,3,"button",0),t.TgZ(1,"div",1,2),t.NdJ("click",function(_){return u.onActionPannellumClick(_)}),t.qZA(),t.YNc(3,K,97,56,"div",3),t._UZ(4,"cms-progress-spinner",4),t.YNc(5,Rt,16,3,"div",3)),2&n&&(t.Q6J("ngIf",!u.showAddView360),t.xp6(1),t.Q6J("id",u.id),t.xp6(2),t.Q6J("ngIf",u.showAddView360),t.xp6(1),t.Q6J("options",u.loadingOption),t.xp6(1),t.Q6J("ngIf",!u.showAddView360))},dependencies:[i.O5,ot.Fj,ot.wV,ot.JJ,ot.Q7,ot.wO,ot.nD,ot.On,ht.ey,O.R9,P.Hw,ut.Nt,at.gD,Mt.YE,I.BZ,I.fO,I.as,I.w1,I.Dz,I.nj,I.ge,I.ev,I.XQ,I.Gk,de.gM,Ht.HG,v.I,m.X$,et.v],encapsulation:2})}return c})()},4014:(st,M,f)=>{"use strict";f.d(M,{g:()=>l});var t=f(4537),I=f(418),J=(f(7226),f(2647),f(4511)),$=f(656),At=f(2607),D=f(4032),m=f(6707),i=f(8692),ot=f(92),ht=f(1379),O=f(8659),P=f(3331),ut=f(8033),at=f(6558),Mt=f(2940),de=f(9484),Ht=f(7529),v=f(1418);const et=["container"];function B(n,u){if(1&n){const a=t.EpF();t.TgZ(0,"button",6),t.NdJ("click",function(){t.CHM(a);const p=t.oxw();return t.KtG(p.onActionShowView360Add())}),t._uU(1),t.ALo(2,"translate"),t.qZA()}2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"ACTION.Add_To_List"),"\n"))}function St(n,u){if(1&n){const a=t.EpF();t.TgZ(0,"button",7),t.NdJ("click",function(){t.CHM(a);const p=t.oxw();return t.KtG(p.onActionImportFile360View())}),t._uU(1," \u0648\u0631\u0648\u062f \u0627\u0637\u0644\u0627\u0639\u0627\u062a \u0639\u06a9\u0633 \u0647\u0627\u06cc 360\n"),t.qZA()}}function vt(n,u){if(1&n){const a=t.EpF();t.TgZ(0,"button",7),t.NdJ("click",function(){t.CHM(a);const p=t.oxw();return t.KtG(p.actionPannellumTourLoad())}),t._uU(1," \u0646\u0645\u0627\u06cc\u0634 \u062a\u0648\u0631\n"),t.qZA()}}function ee(n,u){if(1&n){const a=t.EpF();t.TgZ(0,"mat-icon",46),t.NdJ("click",function(){t.CHM(a);const p=t.oxw(2);return t.KtG(p.dataDetailModel.title="")}),t._uU(1,"close"),t.qZA()}}function Bt(n,u){if(1&n){const a=t.EpF();t.TgZ(0,"mat-icon",47),t.NdJ("click",function(){t.CHM(a);const p=t.oxw(2);return t.KtG(p.dataDetailModel.linkFileId=null)}),t._uU(1,"close"),t.qZA()}}function Zt(n,u){if(1&n&&(t._UZ(0,"img",48),t.ALo(1,"cmsthumbnail")),2&n){const a=t.oxw(2);t.s9C("src",t.lcZ(1,1,a.dataDetailModel.panorama),t.LSH)}}function Ft(n,u){if(1&n&&(t.TgZ(0,"table",49)(1,"tr")(2,"td"),t._uU(3,"viewer Yaw"),t.qZA(),t.TgZ(4,"td"),t._uU(5,"viewer Pitch"),t.qZA(),t.TgZ(6,"td"),t._uU(7,"click Yaw"),t.qZA(),t.TgZ(8,"td"),t._uU(9,"click Pitch"),t.qZA()(),t.TgZ(10,"tr")(11,"td"),t._uU(12),t.qZA(),t.TgZ(13,"td"),t._uU(14),t.qZA(),t.TgZ(15,"td"),t._uU(16),t.qZA(),t.TgZ(17,"td"),t._uU(18),t.qZA()()()),2&n){const a=t.oxw(2);t.xp6(12),t.Oqu(a.postionView.viewerGetYaw),t.xp6(2),t.Oqu(a.postionView.viewerGetPitch),t.xp6(2),t.Oqu(a.postionView.clickGetYaw),t.xp6(2),t.Oqu(a.postionView.clickGetPitch)}}function ie(n,u){if(1&n){const a=t.EpF();t.TgZ(0,"button",50),t.NdJ("click",function(){t.CHM(a);const p=t.oxw(2);return t.KtG(p.onActionShowHotspotAdd())}),t._uU(1),t.ALo(2,"translate"),t.qZA()}2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"ACTION.ADD")," "))}function ft(n,u){1&n&&(t.TgZ(0,"mat-header-cell"),t._uU(1,"\u0646\u0648\u0639"),t.qZA())}function bt(n,u){if(1&n&&(t.ynx(0),t.TgZ(1,"p",52),t._uU(2),t.qZA(),t.BQk()),2&n){const a=t.oxw().$implicit;t.xp6(2),t.Oqu(a.type)}}function pt(n,u){if(1&n){const a=t.EpF();t.ynx(0),t.TgZ(1,"div",10)(2,"mat-select",53),t.NdJ("ngModelChange",function(p){t.CHM(a);const N=t.oxw().$implicit;return t.KtG(N.type=p)}),t.TgZ(3,"mat-option",54),t._uU(4,"\u0635\u062d\u0646\u0647"),t.qZA(),t.TgZ(5,"mat-option",54),t._uU(6,"\u0627\u0637\u0644\u0627\u0639\u0627\u062a"),t.qZA()()(),t.BQk()}if(2&n){const a=t.oxw().$implicit,_=t.oxw(2);t.xp6(2),t.Q6J("disabled",_.editdisabled)("ngModel",a.type),t.xp6(1),t.Q6J("value","scene"),t.xp6(2),t.Q6J("value","info")}}function Ot(n,u){if(1&n&&(t.TgZ(0,"mat-cell"),t.YNc(1,bt,3,1,"ng-container",51),t.YNc(2,pt,7,4,"ng-container",51),t.qZA()),2&n){const a=u.$implicit,_=t.oxw(2);t.xp6(1),t.Q6J("ngIf",!_.editHotspot.guid||!a.guid||a.guid!==_.editHotspot.guid),t.xp6(1),t.Q6J("ngIf",_.editHotspot.guid&&a.guid&&a.guid===_.editHotspot.guid)}}function oe(n,u){1&n&&(t.TgZ(0,"mat-header-cell"),t._uU(1,"\u0634\u0646\u0627\u0633\u0647 \u0635\u062d\u0646\u0647"),t.qZA())}function zt(n,u){if(1&n&&(t.ynx(0),t.TgZ(1,"p",55),t._uU(2),t.qZA(),t.BQk()),2&n){const a=t.oxw().$implicit;t.xp6(2),t.hij("",a.sceneId||"N/A"," ")}}function Xt(n,u){if(1&n){const a=t.EpF();t.ynx(0),t.TgZ(1,"div",10)(2,"input",56),t.NdJ("ngModelChange",function(p){t.CHM(a);const N=t.oxw().$implicit;return t.KtG(N.sceneId=p)}),t.qZA()(),t.BQk()}if(2&n){const a=t.oxw().$implicit,_=t.oxw(2);t.xp6(2),t.Q6J("disabled",_.editdisabled)("ngModel",a.sceneId)}}function ue(n,u){if(1&n&&(t.TgZ(0,"mat-cell"),t.YNc(1,zt,3,1,"ng-container",51),t.YNc(2,Xt,3,2,"ng-container",51),t.qZA()),2&n){const a=u.$implicit,_=t.oxw(2);t.xp6(1),t.Q6J("ngIf",!_.editHotspot.guid||!a.guid||a.guid!==_.editHotspot.guid),t.xp6(1),t.Q6J("ngIf",_.editHotspot.guid&&a.guid&&a.guid===_.editHotspot.guid&&"scene"===a.type)}}function yt(n,u){1&n&&(t.TgZ(0,"mat-header-cell"),t._uU(1,"\u0634\u0646\u0627\u0633\u0647 \u0635\u062d\u0646\u0647"),t.qZA())}function _e(n,u){if(1&n&&(t.ynx(0),t.TgZ(1,"p",52),t._uU(2),t.qZA(),t.BQk()),2&n){const a=t.oxw().$implicit;t.xp6(2),t.Oqu(a.sceneId)}}function ae(n,u){if(1&n&&(t.TgZ(0,"mat-option",54),t._uU(1),t.qZA()),2&n){const a=u.$implicit;t.Q6J("value",a.linkFileId),t.xp6(1),t.Oqu(a.title)}}function j(n,u){if(1&n){const a=t.EpF();t.ynx(0),t.TgZ(1,"div",10)(2,"mat-select",57),t.NdJ("ngModelChange",function(p){t.CHM(a);const N=t.oxw().$implicit;return t.KtG(N.sceneId=p)}),t.YNc(3,ae,2,2,"mat-option",58),t.qZA()(),t.BQk()}if(2&n){const a=t.oxw().$implicit,_=t.oxw(2);t.xp6(2),t.Q6J("disabled",_.editdisabled)("ngModel",a.sceneId),t.xp6(1),t.Q6J("ngForOf",_.scenesList)}}function kt(n,u){if(1&n&&(t.TgZ(0,"mat-cell"),t.YNc(1,_e,3,1,"ng-container",51),t.YNc(2,j,4,3,"ng-container",51),t.qZA()),2&n){const a=u.$implicit,_=t.oxw(2);t.xp6(1),t.Q6J("ngIf",!_.editHotspot.guid||!a.guid||a.guid!==_.editHotspot.guid),t.xp6(1),t.Q6J("ngIf",_.editHotspot.guid&&a.guid&&a.guid===_.editHotspot.guid&&"scene"===a.type)}}function Lt(n,u){1&n&&(t.TgZ(0,"mat-header-cell"),t._uU(1,"pitch"),t.qZA())}function It(n,u){if(1&n&&(t.ynx(0),t.TgZ(1,"p",55),t._uU(2),t.qZA(),t.BQk()),2&n){const a=t.oxw().$implicit;t.xp6(2),t.hij("",a.pitch||"N/A"," ")}}function ne(n,u){if(1&n){const a=t.EpF();t.ynx(0),t.TgZ(1,"div",10)(2,"input",59),t.NdJ("ngModelChange",function(p){t.CHM(a);const N=t.oxw().$implicit;return t.KtG(N.pitch=p)}),t.qZA()(),t.BQk()}if(2&n){const a=t.oxw().$implicit,_=t.oxw(2);t.xp6(2),t.Q6J("disabled",_.editdisabled)("ngModel",a.pitch)}}function me(n,u){if(1&n&&(t.TgZ(0,"mat-cell"),t.YNc(1,It,3,1,"ng-container",51),t.YNc(2,ne,3,2,"ng-container",51),t.qZA()),2&n){const a=u.$implicit,_=t.oxw(2);t.xp6(1),t.Q6J("ngIf",!_.editHotspot.guid||!a.guid||a.guid!==_.editHotspot.guid),t.xp6(1),t.Q6J("ngIf",_.editHotspot.guid&&a.guid&&a.guid===_.editHotspot.guid)}}function E(n,u){1&n&&(t.TgZ(0,"mat-header-cell"),t._uU(1,"yaw"),t.qZA())}function re(n,u){if(1&n&&(t.ynx(0),t.TgZ(1,"p",52),t._uU(2),t.qZA(),t.BQk()),2&n){const a=t.oxw().$implicit;t.xp6(2),t.hij("",a.yaw||"N/A"," ")}}function F(n,u){if(1&n){const a=t.EpF();t.ynx(0),t.TgZ(1,"div",10)(2,"input",60),t.NdJ("ngModelChange",function(p){t.CHM(a);const N=t.oxw().$implicit;return t.KtG(N.yaw=p)}),t.qZA()(),t.BQk()}if(2&n){const a=t.oxw().$implicit,_=t.oxw(2);t.xp6(2),t.Q6J("disabled",_.editdisabled)("ngModel",a.yaw)}}function jt(n,u){if(1&n&&(t.TgZ(0,"mat-cell"),t.YNc(1,re,3,1,"ng-container",51),t.YNc(2,F,3,2,"ng-container",51),t.qZA()),2&n){const a=u.$implicit,_=t.oxw(2);t.xp6(1),t.Q6J("ngIf",!_.editHotspot.guid||!a.guid||a.guid!==_.editHotspot.guid),t.xp6(1),t.Q6J("ngIf",_.editHotspot.guid&&a.guid&&a.guid===_.editHotspot.guid)}}function te(n,u){1&n&&(t.TgZ(0,"mat-header-cell"),t._uU(1,"targetYaw"),t.qZA())}function pe(n,u){if(1&n&&(t.ynx(0),t.TgZ(1,"p",52),t._uU(2),t.qZA(),t.BQk()),2&n){const a=t.oxw().$implicit;t.xp6(2),t.hij("",a.targetYaw||"N/A"," ")}}function le(n,u){if(1&n){const a=t.EpF();t.ynx(0),t.TgZ(1,"div",10)(2,"input",61),t.NdJ("ngModelChange",function(p){t.CHM(a);const N=t.oxw().$implicit;return t.KtG(N.targetYaw=p)}),t.qZA()(),t.BQk()}if(2&n){const a=t.oxw().$implicit,_=t.oxw(2);t.xp6(2),t.Q6J("disabled",_.editdisabled)("ngModel",a.targetYaw)}}function Yt(n,u){if(1&n&&(t.TgZ(0,"mat-cell"),t.YNc(1,pe,3,1,"ng-container",51),t.YNc(2,le,3,2,"ng-container",51),t.qZA()),2&n){const a=u.$implicit,_=t.oxw(2);t.xp6(1),t.Q6J("ngIf",!_.editHotspot.guid||!a.guid||a.guid!==_.editHotspot.guid),t.xp6(1),t.Q6J("ngIf",_.editHotspot.guid&&a.guid&&a.guid===_.editHotspot.guid)}}function fe(n,u){1&n&&(t.TgZ(0,"mat-header-cell"),t._uU(1,"targetPitch"),t.qZA())}function Ct(n,u){if(1&n&&(t.ynx(0),t.TgZ(1,"p",52),t._uU(2),t.qZA(),t.BQk()),2&n){const a=t.oxw().$implicit;t.xp6(2),t.hij("",a.targetPitch||"N/A"," ")}}function se(n,u){if(1&n){const a=t.EpF();t.ynx(0),t.TgZ(1,"div",10)(2,"input",62),t.NdJ("ngModelChange",function(p){t.CHM(a);const N=t.oxw().$implicit;return t.KtG(N.targetPitch=p)}),t.qZA()(),t.BQk()}if(2&n){const a=t.oxw().$implicit,_=t.oxw(2);t.xp6(2),t.Q6J("disabled",_.editdisabled)("ngModel",a.targetPitch)}}function ce(n,u){if(1&n&&(t.TgZ(0,"mat-cell"),t.YNc(1,Ct,3,1,"ng-container",51),t.YNc(2,se,3,2,"ng-container",51),t.qZA()),2&n){const a=u.$implicit,_=t.oxw(2);t.xp6(1),t.Q6J("ngIf",!_.editHotspot.guid||!a.guid||a.guid!==_.editHotspot.guid),t.xp6(1),t.Q6J("ngIf",_.editHotspot.guid&&a.guid&&a.guid===_.editHotspot.guid)}}function Gt(n,u){1&n&&(t.TgZ(0,"mat-header-cell"),t._uU(1,"\u062a\u0648\u0636\u06cc\u062d\u0627\u062a"),t.qZA())}function Kt(n,u){if(1&n&&(t.ynx(0),t.TgZ(1,"p",55),t._uU(2),t.qZA(),t.BQk()),2&n){const a=t.oxw().$implicit;t.xp6(2),t.hij("",a.text||"N/A"," ")}}function Qt(n,u){if(1&n){const a=t.EpF();t.ynx(0),t.TgZ(1,"div",10)(2,"input",63),t.NdJ("ngModelChange",function(p){t.CHM(a);const N=t.oxw().$implicit;return t.KtG(N.text=p)}),t.qZA()(),t.BQk()}if(2&n){const a=t.oxw().$implicit,_=t.oxw(2);t.xp6(2),t.Q6J("disabled",_.editdisabled)("ngModel",a.text)}}function s(n,u){if(1&n&&(t.TgZ(0,"mat-cell"),t.YNc(1,Kt,3,1,"ng-container",51),t.YNc(2,Qt,3,2,"ng-container",51),t.qZA()),2&n){const a=u.$implicit,_=t.oxw(2);t.xp6(1),t.Q6J("ngIf",!_.editHotspot.guid||!a.guid||a.guid!==_.editHotspot.guid),t.xp6(1),t.Q6J("ngIf",_.editHotspot.guid&&a.guid&&a.guid===_.editHotspot.guid)}}function x(n,u){1&n&&(t.TgZ(0,"mat-header-cell"),t._uU(1,"\u0622\u062f\u0631\u0633 \u0648\u0628 \u0633\u0627\u06cc\u062a"),t.qZA())}function h(n,u){if(1&n&&(t.ynx(0),t.TgZ(1,"p",64),t._uU(2),t.qZA(),t.BQk()),2&n){const a=t.oxw().$implicit;t.xp6(2),t.hij("",a.url||"N/A"," ")}}function y(n,u){if(1&n){const a=t.EpF();t.ynx(0),t.TgZ(1,"div",10)(2,"input",65),t.NdJ("ngModelChange",function(p){t.CHM(a);const N=t.oxw().$implicit;return t.KtG(N.url=p)}),t.qZA()(),t.BQk()}if(2&n){const a=t.oxw().$implicit,_=t.oxw(2);t.xp6(2),t.Q6J("disabled",_.editdisabled)("ngModel",a.url)}}function L(n,u){if(1&n&&(t.TgZ(0,"mat-cell"),t.YNc(1,h,3,1,"ng-container",51),t.YNc(2,y,3,2,"ng-container",51),t.qZA()),2&n){const a=u.$implicit,_=t.oxw(2);t.xp6(1),t.Q6J("ngIf",!_.editHotspot.guid||!a.guid||a.guid!==_.editHotspot.guid),t.xp6(1),t.Q6J("ngIf",_.editHotspot.guid&&a.guid&&a.guid===_.editHotspot.guid)}}function R(n,u){1&n&&(t.TgZ(0,"mat-header-cell"),t._uU(1,"Action"),t.qZA())}function T(n,u){if(1&n){const a=t.EpF();t.ynx(0),t.TgZ(1,"mat-icon",67),t.NdJ("click",function(){t.CHM(a);const p=t.oxw().$implicit,N=t.oxw(2);return t.KtG(N.editROw(p))}),t._uU(2,"edit"),t.qZA(),t.TgZ(3,"mat-icon",67),t.NdJ("click",function(){t.CHM(a);const p=t.oxw().$implicit,N=t.oxw(2);return t.KtG(N.removeROw(p))}),t._uU(4,"delete"),t.qZA(),t.BQk()}}function k(n,u){if(1&n){const a=t.EpF();t.TgZ(0,"button",71),t.NdJ("click",function(){t.CHM(a);const p=t.oxw(4);return t.KtG(p.updateEdit())}),t._uU(1),t.ALo(2,"translate"),t.qZA()}if(2&n){const a=t.oxw(4);t.Q6J("disabled",a.editdisabled||!a.editHotspot.text||0===a.editHotspot.text.length),t.xp6(1),t.Oqu(t.lcZ(2,2,"ACTION.Update"))}}function Z(n,u){if(1&n){const a=t.EpF();t.TgZ(0,"button",72),t.NdJ("click",function(){t.CHM(a);const p=t.oxw(4);return t.KtG(p.onActionPannellumClickLastPoint())}),t._uU(1,"\u0646\u0642\u0637\u0647"),t.qZA()}if(2&n){const a=t.oxw(4);t.Q6J("disabled",a.editdisabled)}}function K(n,u){if(1&n){const a=t.EpF();t.ynx(0),t.YNc(1,k,3,4,"button",68),t.TgZ(2,"button",69),t.NdJ("click",function(){t.CHM(a);const p=t.oxw(3);return t.KtG(p.cancelEdit())}),t._uU(3),t.ALo(4,"translate"),t.qZA(),t.YNc(5,Z,2,1,"button",70),t.BQk()}if(2&n){const a=t.oxw(3);t.xp6(1),t.Q6J("ngIf",a.postionView),t.xp6(1),t.Q6J("disabled",a.editdisabled),t.xp6(1),t.Oqu(t.lcZ(4,4,"ACTION.CANCEL")),t.xp6(2),t.Q6J("ngIf",a.editHotspot.pitch!==(null==a.postionView?null:a.postionView.clickGetPitch)&&a.editHotspot.yaw!==(null==a.postionView?null:a.postionView.clickGetYaw))}}function z(n,u){if(1&n&&(t.TgZ(0,"mat-cell")(1,"span",66),t.YNc(2,T,5,0,"ng-container",51),t.YNc(3,K,6,6,"ng-container",51),t.qZA()()),2&n){const a=u.$implicit,_=t.oxw(2);t.xp6(2),t.Q6J("ngIf",!_.editHotspot.guid||!a.guid||a.guid!==_.editHotspot.guid),t.xp6(1),t.Q6J("ngIf",_.editHotspot.guid&&a.guid&&a.guid===_.editHotspot.guid)}}function Y(n,u){1&n&&t._UZ(0,"mat-header-row")}function rt(n,u){1&n&&t._UZ(0,"mat-row")}function qt(n,u){if(1&n){const a=t.EpF();t.TgZ(0,"div",8)(1,"div",9)(2,"div",10)(3,"mat-label"),t._uU(4),t.ALo(5,"translate"),t.qZA(),t.TgZ(6,"label",11),t._uU(7),t.ALo(8,"translate"),t.qZA(),t.TgZ(9,"input",12,13),t.NdJ("ngModelChange",function(p){t.CHM(a);const N=t.oxw();return t.KtG(N.dataDetailModel.title=p)}),t.ALo(11,"translate"),t.qZA(),t.YNc(12,ee,2,0,"mat-icon",14),t.TgZ(13,"mat-icon",15),t._uU(14,"mode_edit"),t.qZA()(),t.TgZ(15,"div",10)(16,"input",16,17),t.NdJ("ngModelChange",function(p){t.CHM(a);const N=t.oxw();return t.KtG(N.dataDetailModel.linkFileId=p)})("click",function(){t.CHM(a);const p=t.oxw();return t.KtG(p.fileManagerOpenFormReport=!0)}),t.ALo(18,"translate"),t.qZA(),t.YNc(19,Bt,2,0,"mat-icon",18),t.TgZ(20,"mat-icon",19),t.NdJ("click",function(){t.CHM(a);const p=t.oxw();return t.KtG(p.fileManagerOpenFormReport=!0)}),t._uU(21,"mode_edit"),t.qZA()(),t.TgZ(22,"cms-file-manager",20),t.NdJ("itemSelected",function(p){t.CHM(a);const N=t.oxw();return t.KtG(N.onActionFileSelect(p))})("openFormChange",function(p){t.CHM(a);const N=t.oxw();return t.KtG(N.fileManagerOpenFormReport=p)}),t.qZA(),t.TgZ(23,"a",21),t.ALo(24,"cmsthumbnail"),t.YNc(25,Zt,2,3,"img",22),t.qZA(),t._UZ(26,"hr"),t.YNc(27,Ft,19,4,"table",23),t._UZ(28,"hr"),t.TgZ(29,"h5"),t._uU(30,"\u062a\u0646\u0638\u06cc\u0645\u0627\u062a \u062a\u0648\u0631"),t.qZA(),t.TgZ(31,"p"),t._uU(32,"\u062f\u0631 \u0648\u0631\u0648\u062f \u0627\u06cc\u0646 \u062a\u0646\u0638\u06cc\u0645\u0627\u062a \u0628\u0627 \u0645\u062f\u06cc\u0631\u06cc\u062a \u0633\u0627\u0645\u0627\u0646\u0647 \u0647\u0645\u0627\u0647\u0646\u06af \u0628\u0627\u0634\u06cc\u062f"),t.qZA(),t.TgZ(33,"div",24)(34,"div",25),t.YNc(35,ie,3,3,"button",26),t.qZA(),t.TgZ(36,"mat-table",27,28),t.ynx(38,29),t.YNc(39,ft,2,0,"mat-header-cell",30),t.YNc(40,Ot,3,2,"mat-cell",31),t.BQk(),t.ynx(41,32),t.YNc(42,oe,2,0,"mat-header-cell",30),t.YNc(43,ue,3,2,"mat-cell",31),t.BQk(),t.ynx(44,33),t.YNc(45,yt,2,0,"mat-header-cell",30),t.YNc(46,kt,3,2,"mat-cell",31),t.BQk(),t.ynx(47,34),t.YNc(48,Lt,2,0,"mat-header-cell",30),t.YNc(49,me,3,2,"mat-cell",31),t.BQk(),t.ynx(50,35),t.YNc(51,E,2,0,"mat-header-cell",30),t.YNc(52,jt,3,2,"mat-cell",31),t.BQk(),t.ynx(53,36),t.YNc(54,te,2,0,"mat-header-cell",30),t.YNc(55,Yt,3,2,"mat-cell",31),t.BQk(),t.ynx(56,37),t.YNc(57,fe,2,0,"mat-header-cell",30),t.YNc(58,ce,3,2,"mat-cell",31),t.BQk(),t.ynx(59,38),t.YNc(60,Gt,2,0,"mat-header-cell",30),t.YNc(61,s,3,2,"mat-cell",31),t.BQk(),t.ynx(62,39),t.YNc(63,x,2,0,"mat-header-cell",30),t.YNc(64,L,3,2,"mat-cell",31),t.BQk(),t.ynx(65,40),t.YNc(66,R,2,0,"mat-header-cell",30),t.YNc(67,z,4,2,"mat-cell",31),t.BQk(),t.YNc(68,Y,1,0,"mat-header-row",41),t.YNc(69,rt,1,0,"mat-row",42),t.qZA()(),t.TgZ(70,"div",25)(71,"button",6),t.NdJ("click",function(){t.CHM(a);const p=t.oxw();return t.KtG(p.onActionSubmitView360())}),t._UZ(72,"i",43),t._uU(73),t.ALo(74,"translate"),t.qZA(),t.TgZ(75,"button",44),t.NdJ("click",function(){t.CHM(a);const p=t.oxw();return t.KtG(p.onActionCancellView360())}),t._UZ(76,"i",45),t._uU(77),t.ALo(78,"translate"),t.qZA()(),t._UZ(79,"br"),t.qZA()()}if(2&n){const a=t.oxw();t.xp6(4),t.Oqu(t.lcZ(5,26,"TITLE.Photography_Place")),t.xp6(3),t.Oqu(t.lcZ(8,28,"TITLE.title")),t.xp6(2),t.s9C("placeholder",t.lcZ(11,30,"TITLE.Photography_Place")),t.Q6J("ngModel",a.dataDetailModel.title),t.xp6(3),t.Q6J("ngIf",a.dataDetailModel.title),t.xp6(4),t.s9C("placeholder",t.lcZ(18,32,"TITLE.View_360_File_ID")),t.Q6J("ngModel",a.dataDetailModel.linkFileId),t.xp6(3),t.Q6J("ngIf",a.dataDetailModel.linkFileId),t.xp6(3),t.Q6J("language",a.appLanguage)("isPopup",!0)("openForm",a.fileManagerOpenFormReport)("tree",a.fileManagerTree)("openDirectUploadView",!0)("openFilemanagerButtonLabelKey","select")("selectFileType",a.selectFileTypeReport)("openFilemanagerButtonView",!1),t.xp6(1),t.s9C("href",t.lcZ(24,34,a.dataDetailModel.panorama),t.LSH),t.xp6(2),t.Q6J("ngIf",(null==a.dataDetailModel||null==a.dataDetailModel.panorama?null:a.dataDetailModel.panorama.length)>0),t.xp6(2),t.Q6J("ngIf",a.postionView),t.xp6(8),t.Q6J("ngIf",a.postionView),t.xp6(1),t.Q6J("dataSource",a.tableHotSpotdataSource),t.xp6(32),t.Q6J("matHeaderRowDef",a.tableHotspotDisplayedColumns)("matHeaderRowDefSticky",!0),t.xp6(1),t.Q6J("matRowDefColumns",a.tableHotspotDisplayedColumns),t.xp6(4),t.hij(" ",t.lcZ(74,36,"ACTION.SUBMIT_BUTTON")," "),t.xp6(4),t.hij(" ",t.lcZ(78,38,"ACTION.CANCEL")," ")}}function Jt(n,u){1&n&&(t.TgZ(0,"mat-header-cell"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"TITLE.PHOTO")," "))}function lt(n,u){if(1&n&&t._UZ(0,"img",48),2&n){const a=t.oxw(2).$implicit;t.s9C("src",a.panorama,t.LSH)}}function nt(n,u){if(1&n&&(t.ynx(0),t.TgZ(1,"a",21),t.YNc(2,lt,1,1,"img",22),t.qZA(),t.BQk()),2&n){const a=t.oxw().$implicit;t.xp6(1),t.s9C("href",a.panorama,t.LSH),t.xp6(1),t.Q6J("ngIf",(null==a||null==a.panorama?null:a.panorama.length)>0)}}function _t(n,u){if(1&n&&(t.TgZ(0,"mat-cell"),t.YNc(1,nt,3,2,"ng-container",51),t.qZA()),2&n){const a=u.$implicit;t.xp6(1),t.Q6J("ngIf",a.panorama)}}function gt(n,u){1&n&&(t.TgZ(0,"mat-header-cell"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"TITLE.Photography_Place")," "))}function xt(n,u){if(1&n&&(t.ynx(0),t._uU(1),t.BQk()),2&n){const a=t.oxw().$implicit;t.xp6(1),t.hij(" ",a.title," ")}}function Nt(n,u){if(1&n&&(t.TgZ(0,"mat-cell"),t.YNc(1,xt,2,1,"ng-container",51),t.qZA()),2&n){const a=u.$implicit;t.xp6(1),t.Q6J("ngIf",a.title)}}function tt(n,u){1&n&&(t.TgZ(0,"mat-header-cell"),t._uU(1," \u0634\u0646\u0627\u0633\u0647 \u0635\u062d\u0646\u0647 "),t.qZA())}function g(n,u){if(1&n&&(t.TgZ(0,"mat-cell"),t.ynx(1),t._uU(2),t.BQk(),t.qZA()),2&n){const a=u.$implicit;t.xp6(2),t.hij(" ",a.linkFileId," ")}}function wt(n,u){1&n&&(t.TgZ(0,"mat-header-cell"),t._uU(1),t.ALo(2,"translate"),t.ALo(3,"translate"),t.qZA()),2&n&&(t.xp6(1),t.AsE(" ",t.lcZ(2,2,"TITLE.Edit")," | ",t.lcZ(3,4,"TITLE.Delete")," "))}function Rt(n,u){if(1&n){const a=t.EpF();t.TgZ(0,"mat-cell",79)(1,"small")(2,"mat-icon",80),t.NdJ("click",function(){const N=t.CHM(a).renderIndex,ct=t.oxw(2);return t.KtG(ct.onActionOptionEditView360(N))}),t._uU(3,"edit"),t.qZA()(),t._uU(4,"| "),t.TgZ(5,"small")(6,"mat-icon",81),t.NdJ("click",function(){const N=t.CHM(a).renderIndex,ct=t.oxw(2);return t.KtG(ct.onActionOptionRemoveView360(N))}),t._uU(7,"delete"),t.qZA()()()}}function mt(n,u){1&n&&t._UZ(0,"mat-header-row")}function Ut(n,u){1&n&&t._UZ(0,"mat-row")}function c(n,u){if(1&n&&(t.TgZ(0,"div",8)(1,"mat-table",73),t.ynx(2,74),t.YNc(3,Jt,3,3,"mat-header-cell",30),t.YNc(4,_t,2,1,"mat-cell",31),t.BQk(),t.ynx(5,75),t.YNc(6,gt,3,3,"mat-header-cell",30),t.YNc(7,Nt,2,1,"mat-cell",31),t.BQk(),t.ynx(8,76),t.YNc(9,tt,2,0,"mat-header-cell",30),t.YNc(10,g,3,1,"mat-cell",31),t.BQk(),t.ynx(11,40),t.YNc(12,wt,4,6,"mat-header-cell",30),t.YNc(13,Rt,8,0,"mat-cell",77),t.BQk(),t.YNc(14,mt,1,0,"mat-header-row",78),t.YNc(15,Ut,1,0,"mat-row",42),t.qZA()()),2&n){const a=t.oxw();t.xp6(1),t.Q6J("dataSource",a.tabledataSource),t.xp6(13),t.Q6J("matHeaderRowDef",a.tabledisplayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",a.tabledisplayedColumns)}}class b{viewerGetYaw;viewerGetPitch;clickGetYaw;clickGetPitch}let l=(()=>{class n{cmsToastrService;publicHelper;translate;static nextId=0;id=++n.nextId;constructor(a,_,p){this.cmsToastrService=a,this.publicHelper=_,this.translate=p,this.fileManagerTree=this.publicHelper.GetfileManagerTreeConfig()}getGuid(){return Math.floor(1e3*Math.random())+""}scenesList=[];dataDetailModel=new J.$lU;privateDataModel;dataModelChange=new t.vpe;set dataModel(a){a||(a=new J.veq),a.defaultValue||(a.defaultValue=new J.vyA),a.scenes||(a.scenes=new Map),this.scenesList=[],Object.keys(a.scenes).map(_=>{a.scenes[_].guid=this.getGuid(),this.scenesList.push(a.scenes[_])}),this.scenesList.forEach(_=>{_.hotSpots||(_.hotSpots=[]),_.hotSpots.forEach(p=>{p.guid=this.getGuid()})}),this.privateDataModel=a,this.tabledataSource.data=this.scenesList,this.tableHotSpotdataSource.data=[]}get dataModel(){return this.privateDataModel}set dataImageModel(a){a||(a=[]),this.privateDataImageModel=a}privateDataImageModel;formInfo=new J.LEF;loading=new $.O;loadingOption=new $.O;tabledataSource=new I.by;tableHotSpotdataSource=new I.by;tabledisplayedColumns=["linkFileId","panorama","Title","Action"];tableHotspotDisplayedColumns=["type","sceneIdSelector","text","url","pitch","yaw","Action"];selectFileTypeReport=["jpeg","jpg"];fileManagerTree;appLanguage="fa";showAddView360=!1;fileManagerOpenFormReport=!1;ngOnInit(){this.translate.get("TITLE.Edit").subscribe(a=>{this.formInfo.formTitle=a})}container;viewer;options;postionView;ngAfterViewInit(){this.container.nativeElement.style.display="none"}uniqByReduce(a){const _=[];return a.forEach(p=>{!_.includes(p)&&0==_.filter(N=>N.pitch==p.pitch&&N.yaw==p.yaw).length&&_.push(p)}),_}actionPannellumImageLoad(a,_){const p={type:"equirectangular",panorama:a,autoLoad:!0,autoRotate:1.5,crossOrigin:"anonymous"};_&&_.length>0&&(p.hotSpots=this.uniqByReduce(_));const N=Object.assign({},p,this.options);this.viewer&&this.onActionPannellumDestroy(),this.viewer=pannellum.viewer(this.container.nativeElement,N),this.container.nativeElement.style.display="block"}actionPannellumTourLoadClick=!1;actionPannellumTourLoad(){this.actionPannellumTourLoadClick=!0,this.actionPrivateDataModelOptimaze();const a={};a.default=this.privateDataModel.defaultValue,this.privateDataModel&&this.privateDataModel.scenes&&(a.scenes=this.privateDataModel.scenes);const _=Object.assign({},a,this.options);this.viewer&&this.onActionPannellumDestroy(),this.viewer=pannellum.viewer(this.container.nativeElement,_),this.container.nativeElement.style.display="block"}onActionPannellumClick(a){if(!this.viewer)return;if(this.actionPannellumTourLoadClick)return void(this.actionPannellumTourLoadClick=!1);this.postionView=new b,this.postionView.viewerGetYaw=this.viewer.getYaw(),this.postionView.viewerGetPitch=this.viewer.getPitch();const _=this.viewer.mouseEventToCoords(a);!_||0==_.length||(this.postionView.clickGetYaw=_[1],this.postionView.clickGetPitch=_[0])}onActionPannellumDestroy(){this.container.nativeElement.style.display="none",this.postionView=null,this.viewer&&this.viewer.destroy()}onActionPannellumClickLastPoint(){this.postionView&&(0!=this.postionView.clickGetYaw||0!=this.postionView.clickGetPitch)&&(this.editHotspot.yaw=this.postionView.clickGetYaw,this.editHotspot.pitch=this.postionView.clickGetPitch)}onActionFileSelect(a){a&&a.id&&0!==a.id?(this.dataDetailModel.linkFileId=a.id,this.dataDetailModel.panorama=a.downloadLinksrc,this.dataDetailModel.preview=a.downloadLinksrc,this.actionPannellumImageLoad(this.dataDetailModel.panorama,[])):this.cmsToastrService.typeErrorSelectedRow()}onActionSubmitView360(){(!this.dataDetailModel.linkFileId||this.dataDetailModel.linkFileId<=0)&&this.cmsToastrService.typeErrorMessage("\u0641\u0627\u06cc\u0644 \u0627\u0646\u062a\u062e\u0627\u0628 \u0646\u0634\u062f\u0647"),this.scenesList||(this.scenesList=[]),this.selectIndex>=0?this.scenesList[this.selectIndex]=this.dataDetailModel:this.scenesList.push(this.dataDetailModel),this.actionPrivateDataModelOptimaze(),this.dataModelChange.emit(this.privateDataModel),this.showAddView360=!this.showAddView360,this.selectIndex=-1,this.onActionPannellumDestroy()}actionPrivateDataModelOptimaze(){this.privateDataModel.defaultValue||(this.privateDataModel.defaultValue=new J.vyA),this.privateDataModel.scenes=new Map,this.scenesList||(this.scenesList=[]),this.scenesList.forEach(a=>{if(a.title&&a.title.length>0){const _=[];a.hotSpots||(a.hotSpots=[]),a.hotSpots.forEach(p=>{p.type&&p.type.length>0&&_.push(p)}),a.hotSpots=this.uniqByReduce(_),this.privateDataModel.scenes[a.linkFileId]=a,this.privateDataModel.scenes[a.linkFileId].hfov=110}}),(!this.privateDataModel.defaultValue.firstScene||0==this.privateDataModel.defaultValue.firstScene.length)&&(this.privateDataModel.scenes&&this.scenesList&&this.scenesList.length>0&&(this.privateDataModel.defaultValue.firstScene=this.scenesList[0].linkFileId+""),this.privateDataModel.defaultValue.sceneFadeDuration=1e3)}onActionCancellView360(){this.showAddView360=!1,this.onActionPannellumDestroy()}onActionShowView360Add(){this.dataDetailModel=new J.$lU,this.showAddView360=!this.showAddView360,this.tableHotSpotdataSource.data=[]}inAddhotspotGuid="";onActionShowHotspotAdd(){this.dataDetailModel||(this.dataDetailModel=new J.$lU),this.dataDetailModel.hotSpots||(this.dataDetailModel.hotSpots=[]),this.editHotspot=new J.aCC;const a=new J.aCC;a.guid=this.getGuid(),this.inAddhotspotGuid=a.guid,this.dataDetailModel.hotSpots.push(a),this.tableHotSpotdataSource.data=this.uniqByReduce(this.dataDetailModel.hotSpots),this.newROw(a),this.onActionPannellumClickLastPoint()}onActionOptionRemoveView360(a){a<0||!this.scenesList||0===this.scenesList.length||(this.scenesList.splice(a,1),this.actionPrivateDataModelOptimaze(),this.dataModel=this.privateDataModel,this.dataModelChange.emit(this.privateDataModel),this.onActionPannellumDestroy())}selectIndex=-1;onActionOptionEditView360(a){a<0||!this.scenesList||0===this.scenesList.length||(this.dataDetailModel=this.scenesList[a],this.dataDetailModel.hotSpots||(this.dataDetailModel.hotSpots=[]),this.actionPannellumImageLoad(this.dataDetailModel.panorama,this.dataDetailModel.hotSpots),this.oldHotspot=new J.aCC,this.editHotspot=new J.aCC,this.tableHotSpotdataSource.data=this.uniqByReduce(this.dataDetailModel.hotSpots),this.selectIndex=a,this.showAddView360=!this.showAddView360)}editHotspot;oldHotspot;editdisabled;newROw(a){this.editHotspot=a&&a.guid?a:new J.aCC,this.oldHotspot={...this.editHotspot}}editROw(a){this.editHotspot=a&&a.guid?a:new J.aCC,this.oldHotspot={...this.editHotspot},this.inAddhotspotGuid=""}removeROw(a){const _=this.dataDetailModel.hotSpots.findIndex(p=>p.guid==a.guid);_>=0&&(this.dataDetailModel.hotSpots.splice(_,1),this.tableHotSpotdataSource.data=this.uniqByReduce(this.dataDetailModel.hotSpots))}updateEdit(){this.inAddhotspotGuid="",this.editdisabled=!0;const a=this.dataDetailModel.hotSpots.findIndex(_=>_.guid==this.oldHotspot.guid);a>=0&&(this.dataDetailModel.hotSpots[a]=this.editHotspot),this.editdisabled=!1,this.oldHotspot=new J.aCC,this.editHotspot=new J.aCC}cancelEdit(){this.inAddhotspotGuid?.length>0&&(this.dataDetailModel.hotSpots=this.dataDetailModel.hotSpots.filter(a=>a.guid!=this.inAddhotspotGuid)),this.editHotspot=new J.aCC,this.oldHotspot&&this.oldHotspot.guid&&(this.dataDetailModel.hotSpots||(this.dataDetailModel.hotSpots=[]),this.tableHotSpotdataSource.data=this.uniqByReduce(this.dataDetailModel.hotSpots))}onActionImportFile360View(){this.privateDataImageModel&&this.privateDataImageModel.length>0&&(this.actionPrivateDataModelOptimaze(),this.privateDataImageModel.forEach(a=>{if(!this.privateDataModel.scenes[a.linkFileId]&&a.linkFileId>0){const _=new J.$lU;_.guid=this.getGuid(),_.linkFileId=a.linkFileId,_.title=a.title,_.hotSpots=this.uniqByReduce(a.hotSpots),_.panorama=a.panorama,_.preview=a.preview,_.hfov=110,this.privateDataModel.scenes[a.linkFileId]=_}}),this.dataModel=this.privateDataModel)}static \u0275fac=function(_){return new(_||n)(t.Y36(At.e),t.Y36(D.i),t.Y36(m.sK))};static \u0275cmp=t.Xpm({type:n,selectors:[["app-cms-360-tour-list"]],viewQuery:function(_,p){if(1&_&&t.Gf(et,5),2&_){let N;t.iGM(N=t.CRH())&&(p.container=N.first)}},inputs:{dataModel:"dataModel",dataImageModel:"dataImageModel"},outputs:{dataModelChange:"dataModelChange"},decls:8,vars:7,consts:[["type","button","class","btn font-13 font-600 btn-s m-1 rounded-s shadow-xl border-0 gradient-highlight",3,"click",4,"ngIf"],["type","button","class","btn font-13 font-600 btn-s m-1 rounded-s shadow-xl border-0 gradient-highlight","style","margin: 10px ",3,"click",4,"ngIf"],[1,"container",2,"height","380px","width","100%","direction","ltr",3,"id","click"],["container",""],["class","example-container mat-elevation-z8",4,"ngIf"],[3,"options"],["type","button",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-highlight",3,"click"],["type","button",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-highlight",2,"margin","10px",3,"click"],[1,"example-container","mat-elevation-z8"],[1,"m-2"],[1,"input-style","has-borders","no-icon","input-style-always-active","validate-field","mb-4"],["for","dataDetailModel.title",1,"color-highlight"],["type","text","name","dataDetailModel.title","id","dataDetailModel.title","minlength","3","maxlength","100","required","",1,"form-control","validate-name",3,"ngModel","placeholder","ngModelChange"],["Title",""],["matSuffix","","class","pointer","matSuffix","","mat-icon-button","","aria-label","Clear",3,"click",4,"ngIf"],["matSuffix","",1,"pointer"],["type","text","name","dataDetailModel.linkFileId",1,"form-control","validate-name",3,"ngModel","placeholder","ngModelChange","click"],["LinkFileId",""],["matSuffix","","matSuffix","","mat-icon-button","","aria-label","Clear",3,"click",4,"ngIf"],["matSuffix","",3,"click"],[3,"language","isPopup","openForm","tree","openDirectUploadView","openFilemanagerButtonLabelKey","selectFileType","openFilemanagerButtonView","itemSelected","openFormChange"],["target","_blank",3,"href"],["style","vertical-align:middle;","class","ntk-hover-zoom","aria-hidden","","height","50","width","50",3,"src",4,"ngIf"],["class","grid-row-ltr-center",4,"ngIf"],[2,"background-color","bisque","padding","5px"],[1,"form-actions",2,"direction","ltr"],["type","button","class","btn font-13 font-600 btn-s m-1 rounded-s shadow-xl border-0 gradient-teal",3,"click",4,"ngIf"],["matSort","",3,"dataSource"],["table",""],["matColumnDef","type"],[4,"matHeaderCellDef"],[4,"matCellDef"],["matColumnDef","sceneId"],["matColumnDef","sceneIdSelector"],["matColumnDef","pitch"],["matColumnDef","yaw"],["matColumnDef","targetYaw"],["matColumnDef","targetPitch"],["matColumnDef","text"],["matColumnDef","url"],["matColumnDef","Action"],[4,"matHeaderRowDef","matHeaderRowDefSticky"],[4,"matRowDef","matRowDefColumns"],[1,"fa","fa-check-square-o"],["type","button",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-gray",3,"click"],[1,"ft-x"],["matSuffix","","matSuffix","","mat-icon-button","","aria-label","Clear",1,"pointer",3,"click"],["matSuffix","","matSuffix","","mat-icon-button","","aria-label","Clear",3,"click"],["aria-hidden","","height","50","width","50",1,"ntk-hover-zoom",2,"vertical-align","middle",3,"src"],[1,"grid-row-ltr-center"],["type","button",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-teal",3,"click"],[4,"ngIf"],[1,"text-truncate","grid-row-ltr-center"],["placeholder","Select","name","type",1,"form-control","validate-name",3,"disabled","ngModel","ngModelChange"],[3,"value"],[1,"text-truncate"],["type","text","placeholder","sceneId","name","sceneId",1,"form-control","validate-name",2,"direction","ltr","text-align","left",3,"disabled","ngModel","ngModelChange"],["placeholder","Select","name","sceneId",1,"form-control","validate-name",3,"disabled","ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["type","number","placeholder","pitch","name","pitch",1,"form-control","validate-name",2,"direction","ltr","text-align","left",3,"disabled","ngModel","ngModelChange"],["type","number","placeholder","yaw","name","yaw",1,"form-control","validate-name",2,"direction","ltr","text-align","left",3,"disabled","ngModel","ngModelChange"],["type","text","placeholder","targetYaw","name","targetYaw",1,"form-control","validate-name",2,"direction","ltr","text-align","left",3,"disabled","ngModel","ngModelChange"],["type","text","placeholder","targetPitch","name","targetPitch",1,"form-control","validate-name",2,"direction","ltr","text-align","left",3,"disabled","ngModel","ngModelChange"],["type","text","placeholder","text","name","text",1,"form-control","validate-name",2,"direction","ltr","text-align","left",3,"disabled","ngModel","ngModelChange"],[1,"text-truncate","grid-row-ltr"],["type","text","placeholder","url","name","url",1,"form-control","validate-name",2,"direction","ltr","text-align","left",3,"disabled","ngModel","ngModelChange"],[1,"m-1",2,"text-align","center"],[3,"click"],["type","button","class","btn font-13 font-600 btn-s m-1 rounded-s shadow-xl border-0 gradient-teal","class","mb-2",3,"disabled","click",4,"ngIf"],["type","button",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-gray",3,"disabled","click"],["type","button","class","btn font-13 font-600 btn-s m-1 rounded-s shadow-xl border-0 gradient-green","matTooltip","\u062b\u0628\u062a \u0622\u062e\u0631\u06cc\u0646 \u0646\u0642\u0637\u0647 \u06a9\u0644\u06cc\u06a9 \u0634\u062f\u0647",3,"disabled","click",4,"ngIf"],["type","button",1,"mb-2",3,"disabled","click"],["type","button","matTooltip","\u062b\u0628\u062a \u0622\u062e\u0631\u06cc\u0646 \u0646\u0642\u0637\u0647 \u06a9\u0644\u06cc\u06a9 \u0634\u062f\u0647",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-green",3,"disabled","click"],["multiTemplateDataRows","",3,"dataSource"],["matColumnDef","panorama"],["matColumnDef","Title"],["matColumnDef","linkFileId"],["class","Action",4,"matCellDef"],[4,"matHeaderRowDef"],[1,"Action"],["matTooltipPosition","before","aria-hidden","false",2,"color","blue","cursor","pointer",3,"click"],["matTooltipPosition","before","aria-hidden","false",2,"color","red","cursor","pointer",3,"click"]],template:function(_,p){1&_&&(t.YNc(0,B,3,3,"button",0),t.YNc(1,St,2,0,"button",1),t.YNc(2,vt,2,0,"button",1),t.TgZ(3,"div",2,3),t.NdJ("click",function(ct){return p.onActionPannellumClick(ct)}),t.qZA(),t.YNc(5,qt,80,40,"div",4),t._UZ(6,"cms-progress-spinner",5),t.YNc(7,c,16,3,"div",4)),2&_&&(t.Q6J("ngIf",!p.showAddView360),t.xp6(1),t.Q6J("ngIf",p.privateDataImageModel&&p.privateDataImageModel.length>0),t.xp6(1),t.Q6J("ngIf",p.privateDataModel&&p.privateDataModel&&p.privateDataModel.scenes&&p.scenesList&&p.scenesList.length>0),t.xp6(1),t.Q6J("id",p.id),t.xp6(2),t.Q6J("ngIf",p.showAddView360),t.xp6(1),t.Q6J("options",p.loadingOption),t.xp6(1),t.Q6J("ngIf",!p.showAddView360))},dependencies:[i.sg,i.O5,ot.Fj,ot.wV,ot.JJ,ot.Q7,ot.wO,ot.nD,ot.On,ht.ey,O.hX,O.R9,P.Hw,ut.gD,at.YE,I.BZ,I.fO,I.as,I.w1,I.Dz,I.nj,I.ge,I.ev,I.XQ,I.Gk,Mt.gM,de.HG,Ht.I,m.X$,v.v],encapsulation:2})}return n})()},7407:(st,M,f)=>{"use strict";f.d(M,{r:()=>J});var t=f(4537),I=f(4216),dt=f(2340),e=f(2607),X=f(7128);let J=(()=>{class ${cmsToastrService;static nextId=0;id=++$.nextId;map$=new t.vpe;zoom$=new t.vpe;options={layers:[(0,I.tileLayer)(dt.N.leafletUrl,{opacity:.7,maxZoom:19,detectRetina:!0})],zoom:16,center:[32.684985,51.6359425]};set optonCenter(D){this.map&&D&&D.lat&&D.lon&&0!==D.lat&&0!==D.lon&&this.map.setView(new I.LatLng(D.lat,D.lon),this.zoom)}set optionCurrentPoint(D){this.onActionCurrentPoint(D)}map;zoom;destroy=!1;constructor(D){this.cmsToastrService=D}ngOnInit(){const ot=I.icon({iconRetinaUrl:"assets/leaflet/marker-icon-2x.png",iconUrl:"assets/leaflet/marker-icon.png",shadowUrl:"assets/leaflet/marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]});I.Marker.prototype.options.icon=ot}ngAfterViewInit(){}ngOnDestroy(){this.map&&(this.map.clearAllEventListeners(),this.destroy=!0)}onMapReady(D){setTimeout(()=>{this.map&&!this.destroy&&D.invalidateSize()},500),this.map=D,this.map$.emit(D),this.zoom=D.getZoom(),this.zoom$.emit(this.zoom)}onMapZoomEnd(D){this.zoom=D.target.getZoom(),this.zoom$.emit(this.zoom)}onActionCurrentPoint(D=!0){this.getPosition().then(m=>{this.map.setView(new I.LatLng(m.lat,m.lon),this.zoom)})}getPosition(){return new Promise((D,m)=>{navigator.geolocation.getCurrentPosition(i=>{D({lon:i.coords.longitude,lat:i.coords.latitude})},i=>{this.cmsToastrService.typeErrorGetPosition()})})}static \u0275fac=function(m){return new(m||$)(t.Y36(e.e))};static \u0275cmp=t.Xpm({type:$,selectors:[["app-cms-map"]],inputs:{options:"options",optonCenter:"optonCenter",optionCurrentPoint:"optionCurrentPoint"},outputs:{map$:"map$",zoom$:"zoom$"},decls:1,vars:1,consts:[["leaflet","",1,"map-container",3,"leafletOptions","leafletMapReady","leafletMapZoomEnd"]],template:function(m,i){1&m&&(t.TgZ(0,"div",0),t.NdJ("leafletMapReady",function(ht){return i.onMapReady(ht)})("leafletMapZoomEnd",function(ht){return i.onMapZoomEnd(ht)}),t.qZA()),2&m&&t.Q6J("leafletOptions",i.options)},dependencies:[X.je],styles:[".map-container[_ngcontent-%COMP%]{width:100%;height:300px}"]})}return $})()}}]);