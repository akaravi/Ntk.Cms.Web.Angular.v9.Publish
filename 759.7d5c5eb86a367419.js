"use strict";(self.webpackChunkntk_cms_web=self.webpackChunkntk_cms_web||[]).push([[759,7421],{3438:(D,v,a)=>{a.d(v,{x:()=>c});var d=a(3308),t=a(6610),s=a(8189),n=a(7788),O=a(5154),p=a(9722);let c=(()=>{class u{constructor(e,r,_,g,P,S){this.elRef=e,this.renderer=r,this.publicHelper=_,this.cmsToastrService=g,this.cdr=P,this.document=S,this.DataEnumRecordStatus()}DataEnumRecordStatus(){var e=this;return(0,d.A)(function*(){(yield e.publicHelper.getEnumRecordStatus()).listItems.forEach(_=>{const g=document.createElement("option");g.innerHTML=" "+_.title+' <i Class="'+e.iconStatus(_.value)+'"></i>',g.value=_.value.toString(),e.elRef.nativeElement.add(g)}),e.elRef.nativeElement.options.length>0&&e.row&&e.row.recordStatus&&e.renderer.setProperty(e.elRef.nativeElement,"value",e.row.recordStatus)})()}onChange(){const e=this.elRef.nativeElement,r=e.value;this.addLoader(e),this.contentService.setAccessDataType(s.FYP.Editor),this.contentService.ServiceSetStatus(this.row.id,r).subscribe({next:_=>{_.isSuccess?(this.handleSuccessCase(e),this.cmsToastrService.typeSuccessSetStatus(_.errorMessage),this.row.recordStatus=0|r,this.cdr.markForCheck()):(this.renderer.setProperty(this.elRef.nativeElement,"value",this.row.recordStatus),this.cmsToastrService.typeErrorSetStatus(_.errorMessage),this.handleErrorCase(e))},error:_=>{this.renderer.setProperty(this.elRef.nativeElement,"value",this.row.recordStatus),this.cmsToastrService.typeError(_),this.handleErrorCase(e)}})}handleSuccessCase(e){this.removeBackground(e),this.addSuccess(e),setTimeout(()=>{this.removeBackground(e)},1e3)}handleErrorCase(e){this.removeBackground(e);const r=this.document.createElement("img");r.style.width="20px",r.src="https://www.seekpng.com/png/detail/334-3345964_error-icon-download-attention-symbol.png";const _=this.renderer.parentNode(this.elRef.nativeElement);this.renderer.appendChild(_,r),setTimeout(()=>{this.renderer.removeChild(_,r)},1e3)}addLoader(e){this.addBackground(e,"https://replit.com/public/images/loading_dots.gif",20)}addSuccess(e){this.addBackground(e,"https://i.pinimg.com/originals/7b/dd/1b/7bdd1bc7db7fd48025d4e39a0e2f0fd8.jpg",20)}addBackground(e,r,_){e.style.background=`#fff url("${r}") no-repeat right 20px center`,e.style.backgroundSize=`${_}px`}removeBackground(e){e.style.background="none"}iconStatus(e){let r="";switch(e){case 1:default:r="fa fa-check";break;case 2:r="fa fa-eye-slash";break;case 3:r="fa fa-times";break;case 4:r="fa fa-hourglass-half";break;case 5:r="far fa-thumbs-down";break;case 6:r="fa fa-archive"}return r}static#t=this.\u0275fac=function(r){return new(r||u)(n.rXU(n.aKT),n.rXU(n.sFG),n.rXU(O.A),n.rXU(p.k),n.rXU(n.gRc),n.rXU(t.qQ))};static#e=this.\u0275dir=n.FsC({type:u,selectors:[["","cmsRecordStatusSelfSave",""]],hostBindings:function(r,_){1&r&&n.bIt("change",function(){return _.onChange()})},inputs:{row:"row",contentService:"contentService"}})}return u})()},4252:(D,v,a)=>{a.d(v,{r:()=>s});var d=a(7788),t=a(8351);let s=(()=>{class n{constructor(p){this.stepper=p}selectionChanged(){const p=this.stepper._getStepLabelId(this.stepper.selectedIndex),C=document.getElementById(p);C&&C.scrollIntoView({block:"start",inline:"nearest",behavior:"smooth"})}static#t=this.\u0275fac=function(C){return new(C||n)(d.rXU(t.M6))};static#e=this.\u0275dir=d.FsC({type:n,selectors:[["mat-vertical-stepper"]],hostBindings:function(C,m){1&C&&d.bIt("animationDone",function(){return m.selectionChanged()})}})}return n})()},4237:(D,v,a)=>{a.d(v,{v:()=>d});var d=function(t){return t[t.none=0]="none",t[t.add=1]="add",t[t.edit=2]="edit",t[t.delete=3]="delete",t[t.list=4]="list",t[t.select=5]="select",t}(d||{})},9256:(D,v,a)=>{a.d(v,{G:()=>d});class d{}},1268:(D,v,a)=>{a.d(v,{M:()=>s});var d=a(7788),t=a(6098);let s=(()=>{class n{constructor(p){this.sanitizer=p}transform(p){return"cms-RecordStatusEnum-cell-"+p}static#t=this.\u0275fac=function(C){return new(C||n)(d.rXU(t.up,16))};static#e=this.\u0275pipe=d.EJ8({name:"statusCellClass",type:n,pure:!0})}return n})()},6381:(D,v,a)=>{a.d(v,{T:()=>s});var d=a(7788),t=a(6098);let s=(()=>{class n{constructor(p){this.sanitizer=p}transform(p,C=!1){let m="";switch(p){case 1:default:m="fa fa-check";break;case 2:m="fa fa-times";break;case 3:m="fa fa-trash";break;case 4:m="fa fa-hourglass-half";break;case 5:m="far fa-thumbs-down";break;case 6:m="fa fa-archive"}return m}static#t=this.\u0275fac=function(C){return new(C||n)(d.rXU(t.up,16))};static#e=this.\u0275pipe=d.EJ8({name:"statusIconClass",type:n,pure:!0})}return n})()},5459:(D,v,a)=>{a.d(v,{o:()=>m});var d=a(5312),t=a(6482),s=a(7788);let n=(()=>{class E{static#t=this.nextId=0;constructor(u,h){this.dialogRef=u,this.data=h,this.id=++E.nextId,h||this.dialogRef.close(!1)}ngOnInit(){}onDismiss(){this.dialogRef.close(!1)}onConfirm(){this.dialogRef.close(!0)}static#e=this.\u0275fac=function(h){return new(h||E)(s.rXU(t.CP),s.rXU(t.Vh))};static#a=this.\u0275cmp=s.VBU({type:E,selectors:[["app-confirmation-dialog"]],decls:18,vars:4,consts:[[1,"menu","menu-box-modal","rounded-m","menu-active",2,"display","block","width","350px","height","320px","padding","20px"],[1,"menu-title"],[1,"fa","fa-question-circle","scale-box","float-start","me-3","ms-3","fa-3x","mt-1","color-blue-dark"],[1,"color-highlight"],[1,"font-20"],[1,"close-menu",3,"click"],[1,"fa","fa-times-circle"],[1,"content","mt-0"],[1,"pe-3",3,"innerHTML"],[1,"row","mb-0"],[1,"col-6"],[1,"btn","close-menu","btn-full","btn-m","bg-red-dark","font-600","rounded-s",3,"click"],[1,"btn","close-menu","btn-full","btn-m","bg-green-dark","font-600","rounded-s",3,"click"]],template:function(h,e){1&h&&(s.j41(0,"div",0)(1,"div",1),s.nrm(2,"i",2),s.j41(3,"p",3),s.EFF(4),s.k0s(),s.j41(5,"h1",4),s.EFF(6,"\u0645\u0637\u0645\u0626\u0646\u06cc\u062f\u061f"),s.k0s(),s.j41(7,"a",5),s.bIt("click",function(){return e.onDismiss()}),s.nrm(8,"i",6),s.k0s()(),s.j41(9,"div",7),s.nrm(10,"p",8),s.j41(11,"div",9)(12,"div",10)(13,"a",11),s.bIt("click",function(){return e.onDismiss()}),s.EFF(14),s.k0s()(),s.j41(15,"div",10)(16,"a",12),s.bIt("click",function(){return e.onConfirm()}),s.EFF(17),s.k0s()()()()()),2&h&&(s.R7$(4),s.SpI(" ",e.data.title,""),s.R7$(6),s.Y8G("innerHTML",e.data.message,s.npT),s.R7$(4),s.JRh(e.data.btnCancelText),s.R7$(3),s.JRh(e.data.btnConfirmText))},encapsulation:2})}return E})();var O=a(8339),p=a(2882);class C{constructor(c,u){this.title=c,this.message=u,this.btnConfirmText="OK",this.btnCancelText="Cancel",this.dialogSize="sm"}}let m=(()=>{class E{constructor(u,h,e){this.dialog=u,this.tokenHelper=h,this.translate=e}confirm(u,h,e="",r="",_="sm"){const g=new C(u,h);return g.btnConfirmText=e,g.btnCancelText=r,g.dialogSize=_,(!g.btnConfirmText||""==g.btnConfirmText||0==g.btnConfirmText.length)&&this.translate.get("ACTION.CONFIRM").subscribe(I=>{g.btnConfirmText=I}),(!g.btnCancelText||""==g.btnCancelText||0==g.btnCancelText.length)&&this.translate.get("ACTION.CANCEL").subscribe(I=>{g.btnCancelText=I}),this.dialog.open(n,{height:"90%",panelClass:this.tokenHelper.isMobile?"dialog-fullscreen":"dialog-min",enterAnimationDuration:d.c.cmsViewConfig.enterAnimationDuration,exitAnimationDuration:d.c.cmsViewConfig.exitAnimationDuration,data:g}).afterClosed().toPromise().then(I=>Promise.resolve(I))}static#t=this.\u0275fac=function(h){return new(h||E)(s.KVO(t.bZ),s.KVO(O._),s.KVO(p.c$))};static#e=this.\u0275prov=s.jDH({token:E,factory:E.\u0275fac})}return E})()},4768:(D,v,a)=>{a.d(v,{p:()=>C});var d=a(7788),t=a(9197),n=a(5312),O=a(9722),p=a(8786);let C=(()=>{class m{static#t=this.nextId=0;set optonCenter(c){this.map&&c&&c.lat&&c.lon&&0!==c.lat&&0!==c.lon&&this.map.setView(new t.LatLng(c.lat,c.lon),this.zoom)}set optionCurrentPoint(c){this.onActionCurrentPoint(c)}constructor(c){this.cmsToastrService=c,this.id=++m.nextId,this.map$=new d.bkB,this.zoom$=new d.bkB,this.options={layers:[(0,t.tileLayer)(n.c.leafletUrl,{opacity:.7,maxZoom:19,detectRetina:!0})],zoom:16,center:[32.684985,51.6359425]},this.destroy=!1}ngOnInit(){const e=t.icon({iconRetinaUrl:"assets/leaflet/marker-icon-2x.png",iconUrl:"assets/leaflet/marker-icon.png",shadowUrl:"assets/leaflet/marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]});t.Marker.prototype.options.icon=e}ngOnDestroy(){this.map&&(this.map.clearAllEventListeners(),this.destroy=!0)}onMapReady(c){setTimeout(()=>{this.map&&!this.destroy&&c.invalidateSize()},500),this.map=c,this.map$.emit(c),this.zoom=c.getZoom(),this.zoom$.emit(this.zoom)}onMapZoomEnd(c){this.zoom=c.target.getZoom(),this.zoom$.emit(this.zoom)}onActionCurrentPoint(c=!0){this.getPosition().then(u=>{this.map.setView(new t.LatLng(u.lat,u.lon),this.zoom)})}getPosition(){return new Promise((c,u)=>{navigator.geolocation.getCurrentPosition(h=>{c({lon:h.coords.longitude,lat:h.coords.latitude})},h=>{this.cmsToastrService.typeErrorGetPosition()})})}static#e=this.\u0275fac=function(u){return new(u||m)(d.rXU(O.k))};static#a=this.\u0275cmp=d.VBU({type:m,selectors:[["app-cms-map"]],inputs:{options:"options",optonCenter:"optonCenter",optionCurrentPoint:"optionCurrentPoint"},outputs:{map$:"map$",zoom$:"zoom$"},decls:1,vars:1,consts:[["leaflet","",1,"map-container",3,"leafletMapReady","leafletMapZoomEnd","leafletOptions"]],template:function(u,h){1&u&&(d.j41(0,"div",0),d.bIt("leafletMapReady",function(r){return h.onMapReady(r)})("leafletMapZoomEnd",function(r){return h.onMapZoomEnd(r)}),d.k0s()),2&u&&d.Y8G("leafletOptions",h.options)},dependencies:[p.V1],styles:[".map-container[_ngcontent-%COMP%]{width:100%;height:300px}"]})}return m})()},7392:(D,v,a)=>{a.d(v,{v:()=>y});var d=a(6809),t=a(7788),s=a(7222),n=a(8189),O=a(965),p=a(8887),C=a(2831),m=a(3527),E=a(9722),c=a(6610),u=a(2497),h=a(8278),e=a(3986),r=a(9344),_=a(6182);const g=["tagInput"];function P(M,R){if(1&M){const i=t.RV6();t.j41(0,"mat-chip",9),t.bIt("removed",function(){const o=t.eBV(i).$implicit,f=t.XpG();return t.Njj(f.remove(o))}),t.EFF(1),t.j41(2,"button",10)(3,"mat-icon"),t.EFF(4,"cancel"),t.k0s()()()}if(2&M){const i=R.$implicit;t.R7$(),t.SpI(" ",i.display," ")}}function S(M,R){if(1&M&&(t.j41(0,"mat-option",11),t.EFF(1),t.k0s()),2&M){const i=R.$implicit;t.Y8G("value",i),t.R7$(),t.SpI(" ",i.display," ")}}let y=(()=>{class M{static#t=this.nextId=0;constructor(i,l){this.service=i,this.cmsToastrService=l,this.id=++M.nextId,this.optionDisabled=!1,this.optionPlaceholder="+ Tag",this.optionLabel="",this.optionChange=new t.bkB,this.tagDataModel=[],this.tagLastDataModel=[],this.selectForceStatus=!0,this.separatorKeysCodes=[d.Fm],this.tagCtrl=new s.MJ(""),this.addOnBlur=!0,this.filteredOptions=this.tagCtrl.valueChanges.pipe((0,O.Z)(null),(0,p.B)(400),(0,C.n)(o=>this.filter(o||"")))}set optionSelectForce(i){this.onActionSelectForce(i)}ngOnInit(){(!this.optionLabel||0==this.optionLabel.length&&this.optionPlaceholder?.length>0)&&(this.optionLabel=this.optionPlaceholder)}filter(i){const l=new n.O2i;l.rowPerPage=20,l.accessLoad=!0;let o=new n.ycK;return o.propertyName="Title",o.value=i,o.searchType=n._GO.Contains,o.clauseType=n.jL_.Or,l.filters.push(o),i&&"number"==typeof+i&&+i>0&&(o=new n.ycK,o.propertyName="Id",o.value=i,o.searchType=n._GO.Equal,o.clauseType=n.jL_.Or,l.filters.push(o)),this.service.ServiceGetAll(l).pipe((0,m.T)(f=>(this.tagLastDataModel=f.listItems.map(T=>({display:T.title,value:T.id})),this.tagLastDataModel)))}checkIndex(i){let l=0,o=-1;return this.tagDataModel.forEach(f=>{f.value==i&&(o=l),l++}),o}add(i){let l;i.value&&this.tagLastDataModel.forEach(o=>{(o.display==i.value||o.value+""==i.value)&&(l=o)}),l&&this.checkIndex(l.value)<0&&(this.tagDataModel.push(l),this.onActionChange()),i.chipInput.clear(),this.tagCtrl.setValue(null)}remove(i){const l=this.checkIndex(i.value);l>=0&&(this.tagDataModel.splice(l,1),this.onActionChange())}selected(i){const l=i.option.value;this.checkIndex(l.value)<0&&this.tagDataModel.push(l),this.tagInput.nativeElement.value="",this.tagCtrl.setValue(null),this.onActionChange()}onActionChange(){const i=[];this.tagDataModel.forEach(l=>{i.findIndex(o=>o==l.value)<0&&i.push(l.value)}),this.selectForceStatus=!1,this.optionChange.emit(i)}onActionSelectForce(i){if(!this.selectForceStatus||!i||0===i.length)return;const l=new n.O2i;i.forEach(o=>{if(o>0){const f=new n.ycK;f.propertyName="Id",f.value=o,f.clauseType=n.jL_.Or,l.filters.push(f)}}),this.service.ServiceGetAll(l).subscribe({next:o=>{o.isSuccess?o.listItems.forEach(f=>{this.tagDataModel.findIndex(T=>T.value==f.id)<0&&this.tagDataModel.push({value:f.id,display:f.title})}):this.cmsToastrService.typeErrorGetAll(o.errorMessage)},error:o=>{this.cmsToastrService.typeErrorGetAll(o)}})}static#e=this.\u0275fac=function(l){return new(l||M)(t.rXU(n.XFG),t.rXU(E.k))};static#a=this.\u0275cmp=t.VBU({type:M,selectors:[["app-cms-tag-autocomplete"]],viewQuery:function(l,o){if(1&l&&t.GBs(g,5),2&l){let f;t.mGM(f=t.lsd())&&(o.tagInput=f.first)}},inputs:{optionDisabled:"optionDisabled",optionPlaceholder:"optionPlaceholder",optionLabel:"optionLabel",optionSelectForce:"optionSelectForce"},outputs:{optionChange:"optionChange"},decls:12,vars:12,consts:[["chipList",""],["tagInput",""],["auto","matAutocomplete"],["appearance","fill",2,"width","100%"],["aria-label","tag selection",3,"disabled"],[3,"removed",4,"ngFor","ngForOf"],[3,"matChipInputTokenEnd","placeholder","matChipInputAddOnBlur","formControl","matAutocomplete","matChipInputFor","matChipInputSeparatorKeyCodes"],[3,"optionSelected"],[3,"value",4,"ngFor","ngForOf"],[3,"removed"],["type","button","matChipRemove","",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-gray"],[3,"value"]],template:function(l,o){if(1&l){const f=t.RV6();t.j41(0,"mat-form-field",3)(1,"mat-label"),t.EFF(2),t.k0s(),t.j41(3,"mat-chip-grid",4,0),t.DNE(5,P,5,1,"mat-chip",5),t.j41(6,"input",6,1),t.bIt("matChipInputTokenEnd",function(b){return t.eBV(f),t.Njj(o.add(b))}),t.k0s()(),t.j41(8,"mat-autocomplete",7,2),t.bIt("optionSelected",function(b){return t.eBV(f),t.Njj(o.selected(b))}),t.DNE(10,S,2,2,"mat-option",8),t.nI1(11,"async"),t.k0s()()}if(2&l){const f=t.sdS(4),T=t.sdS(9);t.R7$(2),t.JRh(o.optionLabel),t.R7$(),t.Y8G("disabled",o.optionDisabled),t.R7$(2),t.Y8G("ngForOf",o.tagDataModel),t.R7$(),t.Y8G("placeholder"," + "+o.optionPlaceholder)("matChipInputAddOnBlur",o.addOnBlur)("formControl",o.tagCtrl)("matAutocomplete",T)("matChipInputFor",f)("matChipInputSeparatorKeyCodes",o.separatorKeysCodes),t.R7$(4),t.Y8G("ngForOf",t.bMT(11,10,o.filteredOptions))}},dependencies:[c.Sq,s.me,s.BC,s.l_,u.$3,h.wT,u.pN,e.Jl,e.HW,e.D7,e.Zv,r.rl,r.nJ,_.An,c.Jj],encapsulation:2})}return M})()}}]);