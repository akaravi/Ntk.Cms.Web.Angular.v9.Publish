"use strict";(self.webpackChunkntk_cms_web=self.webpackChunkntk_cms_web||[]).push([[9264,4121],{3673:(A,P,a)=>{a.d(P,{G:()=>p});var o=a(8239),t=a(8692),E=a(4511),i=a(4537),O=a(4032),v=a(2607);let p=(()=>{class g{elRef;renderer;publicHelper;cmsToastrService;cdr;document;row;contentService;constructor(n,l,f,S,y,R){this.elRef=n,this.renderer=l,this.publicHelper=f,this.cmsToastrService=S,this.cdr=y,this.document=R}getEnumRecordStatus(){var n=this;return(0,o.Z)(function*(){(yield n.publicHelper.getEnumRecordStatus()).listItems.forEach(f=>{const S=document.createElement("option");S.innerHTML=" "+f.title+' <i Class="'+n.iconStatus(f.value)+'"></i>',S.value=f.value.toString(),n.elRef.nativeElement.add(S)}),n.elRef.nativeElement.options.length>0&&n.row&&n.row.recordStatus&&n.renderer.setProperty(n.elRef.nativeElement,"value",n.row.recordStatus)})()}onChange(){const n=this.elRef.nativeElement,l=n.value;this.addLoader(n),this.contentService.setAccessDataType(E.dR.Editor),this.contentService.ServiceSetStatus(this.row.id,l).subscribe(f=>{f.isSuccess?(this.handleSuccessCase(n),this.cmsToastrService.typeSuccessSetStatus(f.errorMessage),this.row.recordStatus=0|l,this.cdr.markForCheck()):(this.renderer.setProperty(this.elRef.nativeElement,"value",this.row.recordStatus),this.cmsToastrService.typeErrorSetStatus(f.errorMessage),this.handleErrorCase(n))},f=>{this.renderer.setProperty(this.elRef.nativeElement,"value",this.row.recordStatus),this.cmsToastrService.typeError(f),this.handleErrorCase(n)})}handleSuccessCase(n){this.removeBackground(n),this.addSuccess(n),setTimeout(()=>{this.removeBackground(n)},1e3)}handleErrorCase(n){this.removeBackground(n);const l=this.document.createElement("img");l.style.width="20px",l.src="https://www.seekpng.com/png/detail/334-3345964_error-icon-download-attention-symbol.png";const f=this.renderer.parentNode(this.elRef.nativeElement);this.renderer.appendChild(f,l),setTimeout(()=>{this.renderer.removeChild(f,l)},1e3)}addLoader(n){this.addBackground(n,"https://replit.com/public/images/loading_dots.gif",20)}addSuccess(n){this.addBackground(n,"https://i.pinimg.com/originals/7b/dd/1b/7bdd1bc7db7fd48025d4e39a0e2f0fd8.jpg",20)}addBackground(n,l,f){n.style.background=`#fff url("${l}") no-repeat right 20px center`,n.style.backgroundSize=`${f}px`}removeBackground(n){n.style.background="none"}iconStatus(n){let l="";switch(n){case 1:default:l="fa fa-check";break;case 2:l="fa fa-eye-slash";break;case 3:l="fa fa-times";break;case 4:l="fa fa-hourglass-half";break;case 5:l="far fa-thumbs-down";break;case 6:l="fa fa-archive"}return l}static \u0275fac=function(l){return new(l||g)(i.Y36(i.SBq),i.Y36(i.Qsj),i.Y36(O.i),i.Y36(v.e),i.Y36(i.sBO),i.Y36(t.K0))};static \u0275dir=i.lG2({type:g,selectors:[["","cmsRecordStatusSelfSave",""]],hostBindings:function(l,f){1&l&&i.NdJ("change",function(){return f.onChange()})},inputs:{row:"row",contentService:"contentService"}})}return g})()},7548:(A,P,a)=>{a.d(P,{o:()=>E});var o=a(4537),t=a(707);let E=(()=>{class i{stepper;constructor(v){this.stepper=v}selectionChanged(){const v=this.stepper._getStepLabelId(this.stepper.selectedIndex),u=document.getElementById(v);u&&u.scrollIntoView({block:"start",inline:"nearest",behavior:"smooth"})}static \u0275fac=function(u){return new(u||i)(o.Y36(t.Vq))};static \u0275dir=o.lG2({type:i,selectors:[["mat-vertical-stepper"]],hostBindings:function(u,d){1&u&&o.NdJ("animationDone",function(){return d.selectionChanged()})}})}return i})()},532:(A,P,a)=>{a.d(P,{t:()=>o});var o=(()=>{return(t=o||(o={}))[t.none=0]="none",t[t.add=1]="add",t[t.edit=2]="edit",t[t.delete=3]="delete",t[t.list=4]="list",t[t.select=5]="select",o;var t})()},1447:(A,P,a)=>{a.d(P,{t:()=>o});class o{lat;lon}},5897:(A,P,a)=>{a.d(P,{Y:()=>E});var o=a(4537),t=a(5998);let E=(()=>{class i{sanitizer;constructor(v){this.sanitizer=v}transform(v){return"cms-RecordStatusEnum-cell-"+v}static \u0275fac=function(u){return new(u||i)(o.Y36(t.H7,16))};static \u0275pipe=o.Yjl({name:"statusCellClass",type:i,pure:!0})}return i})()},6639:(A,P,a)=>{a.d(P,{G:()=>E});var o=a(4537),t=a(5998);let E=(()=>{class i{sanitizer;constructor(v){this.sanitizer=v}transform(v,u=!1){let d="";switch(v){case 1:default:d="fa fa-check";break;case 2:d="fa fa-times";break;case 3:d="fa fa-trash";break;case 4:d="fa fa-hourglass-half";break;case 5:d="far fa-thumbs-down";break;case 6:d="fa fa-archive"}return d}static \u0275fac=function(u){return new(u||i)(o.Y36(t.H7,16))};static \u0275pipe=o.Yjl({name:"statusIconClass",type:i,pure:!0})}return i})()},3914:(A,P,a)=>{a.d(P,{s:()=>i});var o=a(4537),t=a(9154);let E=(()=>{class O{activeModal;static nextId=0;id=++O.nextId;title;message;btnOkText;btnCancelText;constructor(u){this.activeModal=u}ngOnInit(){}decline(){this.activeModal.close(!1)}accept(){this.activeModal.close(!0)}dismiss(){this.activeModal.dismiss()}static \u0275fac=function(d){return new(d||O)(o.Y36(t.Kz))};static \u0275cmp=o.Xpm({type:O,selectors:[["app-confirmation-dialog"]],inputs:{title:"title",message:"message",btnOkText:"btnOkText",btnCancelText:"btnCancelText"},decls:12,vars:4,consts:[[1,"modal-header"],[1,"modal-title"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body",3,"innerHTML"],[1,"modal-footer"],["type","button",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-highlight",3,"click"],["type","button",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-green",3,"click"]],template:function(d,T){1&d&&(o.TgZ(0,"div",0)(1,"h4",1),o._uU(2),o.qZA(),o.TgZ(3,"button",2),o.NdJ("click",function(){return T.dismiss()}),o.TgZ(4,"span",3),o._uU(5,"\xd7"),o.qZA()()(),o._UZ(6,"div",4),o.TgZ(7,"div",5)(8,"button",6),o.NdJ("click",function(){return T.decline()}),o._uU(9),o.qZA(),o.TgZ(10,"button",7),o.NdJ("click",function(){return T.accept()}),o._uU(11),o.qZA()()),2&d&&(o.xp6(2),o.Oqu(T.title),o.xp6(4),o.Q6J("innerHTML",T.message,o.oJD),o.xp6(3),o.Oqu(T.btnCancelText),o.xp6(2),o.Oqu(T.btnOkText))},encapsulation:2})}return O})(),i=(()=>{class O{modalService;constructor(u){this.modalService=u}confirm(u,d,T="OK",p="Cancel",g="sm"){const D=this.modalService.open(E,{size:g});return D.componentInstance.title=u,D.componentInstance.message=d,D.componentInstance.btnOkText=T,D.componentInstance.btnCancelText=p,D.result}static \u0275fac=function(d){return new(d||O)(o.LFG(t.FF))};static \u0275prov=o.Yz7({token:O,factory:O.\u0275fac})}return O})()},7904:(A,P,a)=>{a.d(P,{L:()=>D});var o=a(656),t=a(4537),E=a(8692);function i(n,l){1&n&&(t.TgZ(0,"div",8)(1,"p",9),t.Hsn(2,1),t.qZA()())}function O(n,l){1&n&&t._UZ(0,"div",10)}function v(n,l){1&n&&(t.TgZ(0,"div",11),t.Hsn(1,2),t.qZA())}function u(n,l){1&n&&t._UZ(0,"div",12)}function d(n,l){1&n&&t._UZ(0,"div",10)}function T(n,l){1&n&&(t.TgZ(0,"div",6)(1,"p",13),t.Hsn(2,3),t.qZA()())}const p=[[["","cms-tree-body",""]],[["","cms-tree-header",""]],[["","cms-tree-action",""]],[["","cms-tree-footer",""]]],g=["[cms-tree-body]","[cms-tree-header]","[cms-tree-action]","[cms-tree-footer]"];let D=(()=>{class n{static nextId=0;id=++n.nextId;optionHeaderDisplay=!0;optionActionMainDisplay=!0;optionFooterDisplay=!0;set optionLoading(f){this.loading=f}loading=new o.O;constructor(){}ngOnInit(){}static \u0275fac=function(S){return new(S||n)};static \u0275cmp=t.Xpm({type:n,selectors:[["app-cms-html-tree"]],inputs:{optionHeaderDisplay:"optionHeaderDisplay",optionActionMainDisplay:"optionActionMainDisplay",optionFooterDisplay:"optionFooterDisplay",optionLoading:"optionLoading"},ngContentSelectors:g,decls:10,vars:6,consts:[[1,"card","card-style"],[1,"row","justify-content-center","tree-parent"],["class","font-14 opacity-50",4,"ngIf"],["class","divider mb-1",4,"ngIf"],["class","col-12 pe-0 tree-child-hidden",4,"ngIf"],["class","divider mb-1 tree-child-hidden",4,"ngIf"],[1,"col-12","pe-0"],["class","col-12 pe-0",4,"ngIf"],[1,"font-14","opacity-50"],[1,"text-center","mb-2","mt-2","color-highlight","font-600"],[1,"divider","mb-1"],[1,"col-12","pe-0","tree-child-hidden"],[1,"divider","mb-1","tree-child-hidden"],[1,"text-center"]],template:function(S,y){1&S&&(t.F$t(p),t.TgZ(0,"div",0)(1,"div",1),t.YNc(2,i,3,0,"div",2),t.YNc(3,O,1,0,"div",3),t.YNc(4,v,2,0,"div",4),t.YNc(5,u,1,0,"div",5),t.TgZ(6,"div",6),t.Hsn(7),t.qZA(),t.YNc(8,d,1,0,"div",3),t.YNc(9,T,3,0,"div",7),t.qZA()()),2&S&&(t.xp6(2),t.Q6J("ngIf",y.optionHeaderDisplay),t.xp6(1),t.Q6J("ngIf",y.optionHeaderDisplay),t.xp6(1),t.Q6J("ngIf",y.optionActionMainDisplay),t.xp6(1),t.Q6J("ngIf",y.optionActionMainDisplay),t.xp6(3),t.Q6J("ngIf",y.optionFooterDisplay),t.xp6(1),t.Q6J("ngIf",y.optionFooterDisplay))},dependencies:[E.O5],encapsulation:2})}return n})()},6609:(A,P,a)=>{a.d(P,{D:()=>M});var o=a(8239),t=a(4537),E=a(92),i=a(4511),O=a(7445),v=a(1927),u=a(3151),d=a(2147),T=a(1528),p=a(7969),g=a(656),D=a(6707),n=a(8692),l=a(1637),f=a(1379),S=a(8659),y=a(3331),R=a(9665),K=a(5738),B=a(1418);function I(m,U){if(1&m&&(t.TgZ(0,"label",8),t._uU(1),t.qZA()),2&m){const e=t.oxw();t.MGl("for","app-cms-site-selector-",e.id,""),t.xp6(1),t.Oqu(e.optionLabel)}}function b(m,U){if(1&m&&(t._UZ(0,"img",11),t.ALo(1,"cmsthumbnail")),2&m){const e=t.oxw().$implicit;t.s9C("src",t.lcZ(1,1,e.linkImageIdSrc),t.LSH)}}function c(m,U){if(1&m&&(t.TgZ(0,"mat-option",9),t.YNc(1,b,2,3,"img",10),t.TgZ(2,"span"),t._uU(3),t.qZA()()),2&m){const e=U.$implicit,s=t.oxw();t.Q6J("value",e)("disabled",s.optionDisabled),t.xp6(1),t.Q6J("ngIf",e.linkImageIdSrc),t.xp6(2),t.Oqu(s.displayOption(e))}}function _(m,U){if(1&m){const e=t.EpF();t.TgZ(0,"mat-icon",12),t.NdJ("click",function(){t.CHM(e);const h=t.oxw();return t.KtG(h.onActionSelectClear())}),t._uU(1,"close"),t.qZA()}}const r=["*"];let M=(()=>{class m{coreEnumService;translate;cdr;categoryService;static nextId=0;id=++m.nextId;constructor(e,s,h,L){this.coreEnumService=e,this.translate=s,this.cdr=h,this.categoryService=L,this.loading.cdr=this.cdr,this.loading.message=this.translate.instant("MESSAGE.Receiving_information")}dataModelResult=new i.y$4;dataModelSelect=new i.Dp$;formControl=new E.NI;filteredOptions;optionDisabled=!1;optionSelectFirstItem=!1;optionPlaceholder="";optionLabel="";optionChange=new t.vpe;optionReload=()=>this.onActionReload();set optionSelectForce(e){this.onActionSelectForce(e)}loading=new g.O;get optionLoading(){return this.loading}set optionLoading(e){this.loading=e}ngOnInit(){this.loadOptions(),(!this.optionLabel||0==this.optionLabel.length&&this.optionPlaceholder?.length>0)&&(this.optionLabel=this.optionPlaceholder)}loadOptions(){this.filteredOptions=this.formControl.valueChanges.pipe((0,v.O)(""),(0,u.b)(1500),(0,d.x)(),(0,T.w)(e=>this.DataGetAll("string"==typeof e||"number"==typeof e?e:"")))}displayFn(e){return e&&e.virtual_Parent&&e.virtual_Parent.title.length>0&&e.virtual_Parent.virtual_Parent&&e.virtual_Parent.virtual_Parent.title.length>0&&e.virtual_Parent.virtual_Parent.virtual_Parent&&e.virtual_Parent.virtual_Parent.virtual_Parent.title.length>0?e.virtual_Parent.virtual_Parent.virtual_Parent.titleML+" > "+e.virtual_Parent.virtual_Parent.titleML+" > "+e.virtual_Parent.titleML+" > "+e.titleML:e&&e.virtual_Parent&&e.virtual_Parent.title.length>0&&e.virtual_Parent.virtual_Parent&&e.virtual_Parent.virtual_Parent.title.length>0?e.virtual_Parent.virtual_Parent.titleML+" > "+e.virtual_Parent.titleML+" > "+e.titleML:e&&e.virtual_Parent&&e.virtual_Parent.title.length>0?e.virtual_Parent.titleML+" > "+e.titleML:e?e.titleML:void 0}displayOption(e){return e&&e.virtual_Parent&&e.virtual_Parent.title.length>0&&e.virtual_Parent.virtual_Parent&&e.virtual_Parent.virtual_Parent.title.length>0&&e.virtual_Parent.virtual_Parent.virtual_Parent&&e.virtual_Parent.virtual_Parent.virtual_Parent.title.length>0?e.virtual_Parent.virtual_Parent.virtual_Parent.titleML+" > "+e.virtual_Parent.virtual_Parent.titleML+" > "+e.virtual_Parent.titleML+" > "+e.titleML:e&&e.virtual_Parent&&e.virtual_Parent.title.length>0&&e.virtual_Parent.virtual_Parent&&e.virtual_Parent.virtual_Parent.title.length>0?e.virtual_Parent.virtual_Parent.titleML+" > "+e.virtual_Parent.titleML+" > "+e.titleML:e&&e.virtual_Parent&&e.virtual_Parent.title.length>0?e.virtual_Parent.titleML+" > "+e.titleML:e?e.titleML:void 0}DataGetAll(e){var s=this;return(0,o.Z)(function*(){const h=new i.Hay;if(h.rowPerPage=20,h.accessLoad=!0,e&&e.length>0){let C=new i.AO3;C=new i.AO3,C.propertyName="Symbol",C.value=e,C.searchType=i.J6G.Contains,C.clauseType=i.ppe.Or,h.filters.push(C),C=new i.AO3,C.propertyName="Title",C.value=e,C.searchType=i.J6G.Contains,C.clauseType=i.ppe.Or,h.filters.push(C),e&&"number"==typeof+e&&+e>0&&(C=new i.AO3,C.propertyName="Id",C.value=e,C.searchType=i.J6G.Equal,C.clauseType=i.ppe.Or,h.filters.push(C))}const L=s.constructor.name+"main";return s.loading.Start(L),yield(0,O.z)(s.categoryService.ServiceGetAll(h)).then(C=>(s.dataModelResult=C,s.optionSelectFirstItem&&(!s.dataModelSelect||!s.dataModelSelect.id||s.dataModelSelect.id<=0)&&s.dataModelResult.listItems.length>0&&(s.optionSelectFirstItem=!1,setTimeout(()=>{s.formControl.setValue(s.dataModelResult.listItems[0])},1e3),s.onActionSelect(s.dataModelResult.listItems[0])),s.loading.Stop(L),C.listItems))})()}onActionSelect(e){this.optionDisabled||(this.dataModelSelect=e,this.optionChange.emit(this.dataModelSelect))}onActionSelectClear(){this.optionDisabled||(this.dataModelSelect=null,this.formControl.setValue(null),this.optionChange.emit(null))}push(e){return this.filteredOptions.pipe((0,p.U)(s=>(s.find(h=>h.id===e.id)||s.push(e),s)))}onActionSelectForce(e){if("number"==typeof e&&e>0){if(this.dataModelSelect&&this.dataModelSelect.id===e)return;if(this.dataModelResult&&this.dataModelResult.listItems&&this.dataModelResult.listItems.find(s=>s.id===e)){const s=this.dataModelResult.listItems.find(h=>h.id===e);return this.dataModelSelect=s,void this.formControl.setValue(s)}this.categoryService.ServiceGetOneIncludeParent(e).subscribe(s=>{s.isSuccess&&(this.filteredOptions=this.push(s.item),this.dataModelSelect=s.item,this.formControl.setValue(s.item),this.optionChange.emit(s.item))})}else{if(typeof e==typeof i.Dp$)return this.filteredOptions=this.push(e),this.dataModelSelect=e,void this.formControl.setValue(e);this.formControl.setValue(null)}}onActionReload(){this.dataModelSelect=new i.Dp$,this.loadOptions()}static \u0275fac=function(s){return new(s||m)(t.Y36(i.FLW),t.Y36(D.sK),t.Y36(t.sBO),t.Y36(i.XRW))};static \u0275cmp=t.Xpm({type:m,selectors:[["app-cms-location-selector"]],inputs:{optionDisabled:"optionDisabled",optionSelectFirstItem:"optionSelectFirstItem",optionPlaceholder:"optionPlaceholder",optionLabel:"optionLabel",optionReload:"optionReload",optionSelectForce:"optionSelectForce",optionLoading:"optionLoading"},outputs:{optionChange:"optionChange"},ngContentSelectors:r,decls:10,vars:12,consts:[[1,"input-style","has-borders","no-icon","input-style-always-active","validate-field","mb-4"],[3,"options"],["class","color-highlight",3,"for",4,"ngIf"],["type","text","matInput","",1,"form-control","validate-name",3,"placeholder","formControl","matAutocomplete","id"],[3,"displayWith","optionSelected"],["matauto","matAutocomplete"],[3,"value","disabled",4,"ngFor","ngForOf"],["matSuffix","","matSuffix","","mat-icon-button","","aria-label","Clear",3,"click",4,"ngIf"],[1,"color-highlight",3,"for"],[3,"value","disabled"],["style","vertical-align:middle;","class","ntk-hover-zoom","aria-hidden","","height","25","width","25",3,"src",4,"ngIf"],["aria-hidden","","height","25","width","25",1,"ntk-hover-zoom",2,"vertical-align","middle",3,"src"],["matSuffix","","matSuffix","","mat-icon-button","","aria-label","Clear",3,"click"]],template:function(s,h){if(1&s&&(t.F$t(),t.TgZ(0,"div",0),t._UZ(1,"app-progress-spinner",1),t.YNc(2,I,2,2,"label",2),t._UZ(3,"input",3),t.TgZ(4,"mat-autocomplete",4,5),t.NdJ("optionSelected",function(C){return h.onActionSelect(C.option.value)}),t.YNc(6,c,4,4,"mat-option",6),t.ALo(7,"async"),t.qZA(),t.YNc(8,_,2,0,"mat-icon",7),t.Hsn(9),t.qZA()),2&s){const L=t.MAs(5);t.xp6(1),t.Q6J("options",h.loading),t.xp6(1),t.Q6J("ngIf",(null==h.optionLabel?null:h.optionLabel.length)>0),t.xp6(1),t.s9C("placeholder",h.optionPlaceholder),t.MGl("id","app-cms-site-selector-",h.id,""),t.Q6J("formControl",h.formControl)("matAutocomplete",L),t.uIk("disabled",!!h.optionDisabled||null),t.xp6(1),t.Q6J("displayWith",h.displayFn),t.xp6(2),t.Q6J("ngForOf",t.lcZ(7,10,h.filteredOptions)),t.xp6(2),t.Q6J("ngIf",null==h.dataModelSelect?null:h.dataModelSelect.id)}},dependencies:[n.sg,n.O5,E.Fj,E.JJ,E.oH,l.XC,f.ey,l.ZL,S.R9,y.Hw,R.Nt,K.O,n.Ov,B.v],encapsulation:2})}return m})()},7407:(A,P,a)=>{a.d(P,{r:()=>u});var o=a(4537),t=a(4216),i=a(2340),O=a(2607),v=a(7128);let u=(()=>{class d{cmsToastrService;static nextId=0;id=++d.nextId;map$=new o.vpe;zoom$=new o.vpe;options={layers:[(0,t.tileLayer)(i.N.leafletUrl,{opacity:.7,maxZoom:19,detectRetina:!0})],zoom:16,center:[32.684985,51.6359425]};set optonCenter(p){this.map&&p&&p.lat&&p.lon&&0!==p.lat&&0!==p.lon&&this.map.setView(new t.LatLng(p.lat,p.lon),this.zoom)}set optionCurrentPoint(p){this.onActionCurrentPoint(p)}map;zoom;destroy=!1;constructor(p){this.cmsToastrService=p}ngOnInit(){const n=t.icon({iconRetinaUrl:"assets/leaflet/marker-icon-2x.png",iconUrl:"assets/leaflet/marker-icon.png",shadowUrl:"assets/leaflet/marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]});t.Marker.prototype.options.icon=n}ngAfterViewInit(){}ngOnDestroy(){this.map&&(this.map.clearAllEventListeners(),this.destroy=!0)}onMapReady(p){setTimeout(()=>{this.map&&!this.destroy&&p.invalidateSize()},500),this.map=p,this.map$.emit(p),this.zoom=p.getZoom(),this.zoom$.emit(this.zoom)}onMapZoomEnd(p){this.zoom=p.target.getZoom(),this.zoom$.emit(this.zoom)}onActionCurrentPoint(p=!0){this.getPosition().then(g=>{this.map.setView(new t.LatLng(g.lat,g.lon),this.zoom)})}getPosition(){return new Promise((p,g)=>{navigator.geolocation.getCurrentPosition(D=>{p({lon:D.coords.longitude,lat:D.coords.latitude})},D=>{this.cmsToastrService.typeErrorGetPosition()})})}static \u0275fac=function(g){return new(g||d)(o.Y36(O.e))};static \u0275cmp=o.Xpm({type:d,selectors:[["app-cms-map"]],inputs:{options:"options",optonCenter:"optonCenter",optionCurrentPoint:"optionCurrentPoint"},outputs:{map$:"map$",zoom$:"zoom$"},decls:1,vars:1,consts:[["leaflet","",1,"map-container",3,"leafletOptions","leafletMapReady","leafletMapZoomEnd"]],template:function(g,D){1&g&&(o.TgZ(0,"div",0),o.NdJ("leafletMapReady",function(l){return D.onMapReady(l)})("leafletMapZoomEnd",function(l){return D.onMapZoomEnd(l)}),o.qZA()),2&g&&o.Q6J("leafletOptions",D.options)},dependencies:[v.je],styles:[".map-container[_ngcontent-%COMP%]{width:100%;height:300px}"]})}return d})()},9831:(A,P,a)=>{a.d(P,{u:()=>B});var o=a(5436),t=a(4537),E=a(92),i=a(4511),O=a(1927),v=a(3151),u=a(1528),d=a(7969),T=a(2607),p=a(8692),g=a(1637),D=a(1379),n=a(7084),l=a(8659),f=a(3331);const S=["tagInput"];function y(I,b){if(1&I){const c=t.EpF();t.TgZ(0,"mat-chip",9),t.NdJ("removed",function(){const M=t.CHM(c).$implicit,m=t.oxw();return t.KtG(m.remove(M))}),t._uU(1),t.TgZ(2,"button",10)(3,"mat-icon"),t._uU(4,"cancel"),t.qZA()()()}if(2&I){const c=b.$implicit;t.xp6(1),t.hij(" ",c.display," ")}}function R(I,b){if(1&I&&(t.TgZ(0,"mat-option",11),t._uU(1),t.qZA()),2&I){const c=b.$implicit;t.Q6J("value",c),t.xp6(1),t.hij(" ",c.display," ")}}let B=(()=>{class I{service;cmsToastrService;static nextId=0;id=++I.nextId;constructor(c,_){this.service=c,this.cmsToastrService=_,this.filteredOptions=this.tagCtrl.valueChanges.pipe((0,O.O)(null),(0,v.b)(400),(0,u.w)(r=>this.filter(r||"")))}optionDisabled=!1;tagInput;optionPlaceholder="+ Tag";optionLabel="";optionChange=new t.vpe;set optionSelectForce(c){this.onActionSelectForce(c)}tagDataModel=[];tagLastDataModel=[];selectForceStatus=!0;separatorKeysCodes=[o.K5];tagCtrl=new E.NI("");filteredOptions;addOnBlur=!0;ngOnInit(){(!this.optionLabel||0==this.optionLabel.length&&this.optionPlaceholder?.length>0)&&(this.optionLabel=this.optionPlaceholder)}filter(c){const _=new i.Hay;_.rowPerPage=20,_.accessLoad=!0;let r=new i.AO3;return r.propertyName="Title",r.value=c,r.searchType=i.J6G.Contains,r.clauseType=i.ppe.Or,_.filters.push(r),c&&"number"==typeof+c&&+c>0&&(r=new i.AO3,r.propertyName="Id",r.value=c,r.searchType=i.J6G.Equal,r.clauseType=i.ppe.Or,_.filters.push(r)),this.service.ServiceGetAll(_).pipe((0,d.U)(M=>(this.tagLastDataModel=M.listItems.map(m=>({display:m.title,value:m.id})),this.tagLastDataModel)))}checkIndex(c){let _=0,r=-1;return this.tagDataModel.forEach(M=>{M.value==c&&(r=_),_++}),r}add(c){let _;c.value&&this.tagLastDataModel.forEach(r=>{(r.display==c.value||r.value+""==c.value)&&(_=r)}),_&&this.checkIndex(_.value)<0&&(this.tagDataModel.push(_),this.onActionChange()),c.chipInput.clear(),this.tagCtrl.setValue(null)}remove(c){const _=this.checkIndex(c.value);_>=0&&(this.tagDataModel.splice(_,1),this.onActionChange())}selected(c){const _=c.option.value;this.checkIndex(_.value)<0&&this.tagDataModel.push(_),this.tagInput.nativeElement.value="",this.tagCtrl.setValue(null),this.onActionChange()}onActionChange(){const c=[];this.tagDataModel.forEach(_=>{c.findIndex(r=>r==_.value)<0&&c.push(_.value)}),this.selectForceStatus=!1,this.optionChange.emit(c)}onActionSelectForce(c){if(!this.selectForceStatus||!c||0===c.length)return;const _=new i.Hay;c.forEach(r=>{if(r>0){const M=new i.AO3;M.propertyName="Id",M.value=r,M.clauseType=i.ppe.Or,_.filters.push(M)}}),this.service.ServiceGetAll(_).pipe((0,d.U)(r=>{r.isSuccess?r.listItems.forEach(M=>{this.tagDataModel.findIndex(m=>m.value==M.id)<0&&this.tagDataModel.push({value:M.id,display:M.title})}):this.cmsToastrService.typeErrorGetAll(r.errorMessage)},r=>{this.cmsToastrService.typeErrorGetAll(r)})).toPromise()}static \u0275fac=function(_){return new(_||I)(t.Y36(i.dF2),t.Y36(T.e))};static \u0275cmp=t.Xpm({type:I,selectors:[["app-cms-tag-autocomplete"]],viewQuery:function(_,r){if(1&_&&t.Gf(S,5),2&_){let M;t.iGM(M=t.CRH())&&(r.tagInput=M.first)}},inputs:{optionDisabled:"optionDisabled",optionPlaceholder:"optionPlaceholder",optionLabel:"optionLabel",optionSelectForce:"optionSelectForce"},outputs:{optionChange:"optionChange"},decls:12,vars:12,consts:[["appearance","fill",2,"width","100%"],["aria-label","tag selection",3,"disabled"],["chipList",""],[3,"removed",4,"ngFor","ngForOf"],[3,"placeholder","matChipInputAddOnBlur","formControl","matAutocomplete","matChipInputFor","matChipInputSeparatorKeyCodes","matChipInputTokenEnd"],["tagInput",""],[3,"optionSelected"],["auto","matAutocomplete"],[3,"value",4,"ngFor","ngForOf"],[3,"removed"],["matChipRemove","",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-gray"],[3,"value"]],template:function(_,r){if(1&_&&(t.TgZ(0,"mat-form-field",0)(1,"mat-label"),t._uU(2),t.qZA(),t.TgZ(3,"mat-chip-grid",1,2),t.YNc(5,y,5,1,"mat-chip",3),t.TgZ(6,"input",4,5),t.NdJ("matChipInputTokenEnd",function(m){return r.add(m)}),t.qZA()(),t.TgZ(8,"mat-autocomplete",6,7),t.NdJ("optionSelected",function(m){return r.selected(m)}),t.YNc(10,R,2,2,"mat-option",8),t.ALo(11,"async"),t.qZA()()),2&_){const M=t.MAs(4),m=t.MAs(9);t.xp6(2),t.Oqu(r.optionLabel),t.xp6(1),t.Q6J("disabled",r.optionDisabled),t.xp6(2),t.Q6J("ngForOf",r.tagDataModel),t.xp6(1),t.Q6J("placeholder"," + "+r.optionPlaceholder)("matChipInputAddOnBlur",r.addOnBlur)("formControl",r.tagCtrl)("matAutocomplete",m)("matChipInputFor",M)("matChipInputSeparatorKeyCodes",r.separatorKeysCodes),t.xp6(4),t.Q6J("ngForOf",t.lcZ(11,10,r.filteredOptions))}},dependencies:[p.sg,E.Fj,E.JJ,E.oH,g.XC,D.ey,g.ZL,n.HS,n.RA,n.oH,n.qH,l.KE,l.hX,f.Hw,p.Ov],encapsulation:2})}return I})()}}]);