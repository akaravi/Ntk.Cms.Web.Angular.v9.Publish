import{A,C as g,D as y,E as J,F as H,G as R,H as $,o as q,p as G,r as U,s as h,t as v,u as z,w as D}from"./chunk-DIMRSZQS.js";import{Aa as O,Ac as B,Bc as j,Ia as E,Kb as u,L as k,La as a,Lb as P,Mb as x,ab as d,bb as V,cb as r,eb as N,ja as c,lb as p,mb as s,nb as f,ra as w,rb as M,sa as S,ub as T,wb as m,yc as C,zc as F}from"./chunk-2S4NFGWN.js";function Y(e,t){if(e&1&&f(0,"input",2),e&2){let i=m();r("id",i.field.name)("name",i.field.name)("formControl",i.optionFormControl),V("type",i.field.type)}}function ee(e,t){if(e&1&&f(0,"textarea",3),e&2){let i=m();N("is-invalid",i.isDirty&&!i.isValid),r("formControl",i.optionFormControl)("id",i.field.name)("placeholder",i.field.placeholder)}}var Z=(()=>{let t=class t{get isValid(){return this.optionFormControl.valid}get isDirty(){return this.optionFormControl.dirty}constructor(){this.field={}}};t.\u0275fac=function(n){return new(n||t)},t.\u0275cmp=c({type:t,selectors:[["textbox"]],inputs:{field:"field",optionFormControl:"optionFormControl"},decls:2,vars:2,consts:[["class","form-control input-ltr",3,"id","name","formControl",4,"ngIf"],["rows","9","class","form-control input-ltr",3,"is-invalid","formControl","id","placeholder",4,"ngIf"],[1,"form-control","input-ltr",3,"id","name","formControl"],["rows","9",1,"form-control","input-ltr",3,"formControl","id","placeholder"]],template:function(n,l){n&1&&d(0,Y,1,4,"input",0)(1,ee,1,5,"textarea",1),n&2&&(r("ngIf",!l.field.multiline),a(),r("ngIf",l.field.multiline))},dependencies:[F,G,h,g],encapsulation:2});let e=t;return e})();function oe(e,t){if(e&1&&(p(0,"option",2),u(1),s()),e&2){let i=t.$implicit;r("value",i.key),a(),P(i.label)}}var K=(()=>{let t=class t{constructor(){this.field={}}};t.\u0275fac=function(n){return new(n||t)},t.\u0275cmp=c({type:t,selectors:[["dropdown"]],inputs:{field:"field",optionFormControl:"optionFormControl"},decls:2,vars:3,consts:[[1,"form-control",3,"id","formControl"],[3,"value",4,"ngFor","ngForOf"],[3,"value"]],template:function(n,l){n&1&&(p(0,"select",0),d(1,oe,2,2,"option",1),s()),n&2&&(r("id",l.field.name)("formControl",l.optionFormControl),a(),r("ngForOf",l.field.options))},dependencies:[C,R,$,H,h,g],encapsulation:2});let e=t;return e})();function ne(e,t){if(e&1&&(p(0,"div",2)(1,"label",3),f(2,"input",4),u(3),s()()),e&2){let i=t.$implicit;a(2),r("formControlName",i.key),a(),x(" ",i.label,"")}}var L=(()=>{let t=class t{constructor(){this.field={}}get isValid(){return this.optionFormGroup.controls[this.field.name].valid}get isDirty(){return this.optionFormGroup.controls[this.field.name].dirty}};t.\u0275fac=function(n){return new(n||t)},t.\u0275cmp=c({type:t,selectors:[["checkbox"]],inputs:{field:"field",optionFormGroup:"optionFormGroup"},decls:2,vars:2,consts:[[3,"formGroup"],["class","form-check form-check ",4,"ngFor","ngForOf"],[1,"form-check","form-check"],[1,"form-check-label"],["type","checkbox","id","inlineCheckbox1","value","option1",1,"form-check-input","input-ltr",3,"formControlName"]],template:function(n,l){n&1&&(p(0,"div",0),d(1,ne,4,2,"div",1),s()),n&2&&(r("formGroup",l.optionFormGroup),a(),r("ngForOf",l.field.options))},dependencies:[C,q,h,v,y,J],encapsulation:2});let e=t;return e})();function le(e,t){if(e&1){let i=M();p(0,"div",3),T("hovered",function(n){w(i);let l=m();return S(l.toggleHover(n))})("dropped",function(n){w(i);let l=m();return S(l.field.onUpload(n))}),p(1,"p",4),u(2," Drag a file here or "),p(3,"label",5)(4,"input",6),T("change",function(n){w(i);let l=m();return S(l.field.onUpload(n.target.files))}),s(),u(5," browse "),s(),u(6," to upload. "),s()()}if(e&2){let i=m();N("hovering",i.isHovering)}}function ae(e,t){if(e&1&&(p(0,"div")(1,"div",7),f(2,"img",8),s()()),e&2){let i=m();a(2),r("src",i.field.value,E)}}var Q=(()=>{let t=class t{get isValid(){return this.optionFormControl.controls[this.field.name].valid}get isDirty(){return this.optionFormControl.controls[this.field.name].dirty}constructor(){this.field={},this.isHovering=!1}ngOnChange(){}toggleHover(o){this.isHovering=!0}};t.\u0275fac=function(n){return new(n||t)},t.\u0275cmp=c({type:t,selectors:[["file"]],inputs:{field:"field",optionFormControl:"optionFormControl"},decls:3,vars:3,consts:[[3,"formGroup"],["class","drop-container dropzone","dropZone","",3,"hovering","hovered","dropped",4,"ngIf"],[4,"ngIf"],["dropZone","",1,"drop-container","dropzone",3,"hovered","dropped"],[1,"m-0"],[1,"upload-button"],["type","file","multiple","",3,"change"],[1,"card"],[1,"card-img-top",3,"src"]],template:function(n,l){n&1&&(p(0,"div",0),d(1,le,7,2,"div",1)(2,ae,3,1,"div",2),s()),n&2&&(r("formGroup",l.optionFormControl),a(),r("ngIf",!l.field.value),a(),r("ngIf",l.field.value))},dependencies:[F,v,y],styles:[".drop-container[_ngcontent-%COMP%]{background:#fff;border-radius:6px;height:150px;width:100%;box-shadow:1px 2px 20px #0a0a0a1a;display:flex;align-items:center;justify-content:center;border:2px dashed #c0c4c7}p[_ngcontent-%COMP%]{font-size:16px;font-weight:400;color:#c0c4c7}.upload-button[_ngcontent-%COMP%]{display:inline-block;border:none;outline:none;cursor:pointer;color:#5754a3}.upload-button[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{display:none}.dropzone[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;flex-direction:column;border-radius:5px;background:#fff;margin:10px 0}.dropzone.hovering[_ngcontent-%COMP%]{border:2px solid #f16624;color:#dadada!important}progress[_ngcontent-%COMP%]::-webkit-progress-value{transition:width .1s ease}"]});let e=t;return e})();function se(e,t){if(e&1&&(p(0,"div",1),f(1,"input",2),p(2,"label",3),u(3),s()()),e&2){let i=t.$implicit,o=m();a(),r("formControl",o.optionFormControl)("value",i.key),a(2),x(" ",i.label," ")}}var W=(()=>{let t=class t{constructor(){this.field={}}};t.\u0275fac=function(n){return new(n||t)},t.\u0275cmp=c({type:t,selectors:[["radio"]],inputs:{field:"field",optionFormControl:"optionFormControl"},decls:1,vars:1,consts:[["class","form-check",4,"ngFor","ngForOf"],[1,"form-check"],["type","radio",1,"form-check-input","input-ltr",3,"formControl","value"],[1,"form-check-label"]],template:function(n,l){n&1&&d(0,se,4,3,"div",0),n&2&&r("ngForOf",l.field.options)},dependencies:[C,G,A,h,g],encapsulation:2});let e=t;return e})();function fe(e,t){e&1&&(p(0,"strong",8),u(1,"*"),s())}function de(e,t){if(e&1&&f(0,"textbox",9),e&2){let i=m();r("field",i.field)("optionFormControl",i.convertToFormControl(i.formGroup.get(i.field.name)))}}function ce(e,t){if(e&1&&f(0,"textbox",9),e&2){let i=m();r("field",i.field)("optionFormControl",i.convertToFormControl(i.formGroup.get(i.field.name)))}}function ue(e,t){if(e&1&&f(0,"dropdown",9),e&2){let i=m();r("field",i.field)("optionFormControl",i.convertToFormControl(i.formGroup.get(i.field.name)))}}function he(e,t){if(e&1&&f(0,"checkbox",10),e&2){let i=m();r("field",i.field)("optionFormGroup",i.convertToFormGroup(i.formGroup.get(i.field.name)))}}function Ce(e,t){if(e&1&&f(0,"radio",9),e&2){let i=m();r("field",i.field)("optionFormControl",i.convertToFormControl(i.formGroup.get(i.field.name)))}}function ve(e,t){if(e&1&&f(0,"file",11),e&2){let i=m();r("field",i.field)("formControl",i.convertToFormControl(i.formGroup.get(i.field.name)))}}function ge(e,t){if(e&1&&(p(0,"div",12),u(1),s()),e&2){let i=m();a(),x("",i.field.label," is required")}}var X=(()=>{let t=class t{get isValid(){return this.formGroup.controls[this.field.name].valid}get isDirty(){return this.formGroup.controls[this.field.name].dirty}constructor(){}ngOnInit(){}convertToFormControl(o){return o}convertToFormGroup(o){return o}};t.\u0275fac=function(n){return new(n||t)},t.\u0275cmp=c({type:t,selectors:[["field-builder"]],inputs:{field:"field",formGroup:"formGroup"},decls:12,vars:12,consts:[[1,"form-group","row",3,"formGroup"],[1,"col-md-3","form-control-label"],["class","text-danger",4,"ngIf"],[1,"col-md-9",3,"ngSwitch"],[3,"field","optionFormControl",4,"ngSwitchCase"],[3,"field","optionFormGroup",4,"ngSwitchCase"],[3,"field","formControl",4,"ngSwitchCase"],["class","alert alert-danger my-1 p-2 fadeInDown animated",4,"ngIf"],[1,"text-danger"],[3,"field","optionFormControl"],[3,"field","optionFormGroup"],[3,"field","formControl"],[1,"alert","alert-danger","my-1","p-2","fadeInDown","animated"]],template:function(n,l){n&1&&(p(0,"div",0)(1,"label",1),u(2),d(3,fe,2,0,"strong",2),s(),p(4,"div",3),d(5,de,1,2,"textbox",4)(6,ce,1,2,"textbox",4)(7,ue,1,2,"dropdown",4)(8,he,1,2,"checkbox",5)(9,Ce,1,2,"radio",4)(10,ve,1,2,"file",6)(11,ge,2,1,"div",7),s()()),n&2&&(r("formGroup",l.formGroup),a(),V("for",l.field.label),a(),x(" ",l.field.label," "),a(),r("ngIf",l.field.required&&l.formGroup.get(l.field.name).invalid),a(),r("ngSwitch",l.field.type),a(),r("ngSwitchCase","text"),a(),r("ngSwitchCase","date"),a(),r("ngSwitchCase","dropdown"),a(),r("ngSwitchCase","checkbox"),a(),r("ngSwitchCase","radio"),a(),r("ngSwitchCase","file"),a(),r("ngIf",!l.isValid&&l.isDirty))},dependencies:[F,B,j,h,v,g,y,Z,K,L,Q,W],encapsulation:2});let e=t;return e})();function xe(e,t){if(e&1&&(p(0,"div"),f(1,"field-builder",1),s()),e&2){let i=t.$implicit,o=m();a(),r("field",i)("formGroup",o.formGroup)}}var Ve=(()=>{let t=class t{set jsonValue(o){o&&o.length>0&&(this.privateJsonValue=JSON.parse(o),this.actionSetValue())}set propertiesInfos(o){this.privatePropertiesInfos=o,this.actionFormMake(),this.actionSetValue()}constructor(){this.jsonValueChange=new O,this.privatePropertiesInfos=[],this.formValues={},this.fields=[],this.DEBOUNCE_TIME_FORM_INPUT=250}ngOnInit(){}ngAfterViewInit(){this.unsubcribe=this.formGroup.valueChanges.pipe(k(this.DEBOUNCE_TIME_FORM_INPUT)).subscribe(o=>{this.formValues||(this.formValues={}),this.privatePropertiesInfos&&this.privatePropertiesInfos.length>0&&this.privatePropertiesInfos.forEach(n=>{(o[n.fieldName]||o[n.fieldName]==="")&&(this.formValues[n.fieldName]=o[n.fieldName]),this.jsonValueChange.emit(JSON.stringify(this.formValues))})})}actionFormMake(){this.privatePropertiesInfos&&(this.fields=[],this.privatePropertiesInfos.forEach(o=>{let n="";switch(this.formValues&&this.formValues[o.fieldName]&&(n=this.formValues[o.fieldName]),o.fieldTypeString){case"System.String":this.fields.push({type:"text",name:o.fieldName,label:o.fieldTitle,value:n,required:!1});break;case"System.Int64":this.fields.push({type:"text",name:o.fieldName,label:o.fieldTitle,value:n,required:!1});break;case"System.Int32":this.fields.push({type:"text",name:o.fieldName,label:o.fieldTitle,value:n,required:!1});break;default:this.fields.push({type:"text",name:o.fieldName,label:o.fieldTitle,value:n,required:!1});break}})),this.fields.forEach(o=>{o.type==="checkbox"?(this.formGroup.addControl(o.name,new z({})),o.options.forEach(n=>{this.formGroup.get(o.name).addControl(n.key,new D(!1))})):this.formGroup.addControl(o.name,new D(o.value||"",o.required?U.required:null))})}actionSetValue(){this.privateJsonValue&&this.privatePropertiesInfos&&this.privatePropertiesInfos.length>0&&this.privatePropertiesInfos.forEach(o=>{if(this.formValues||(this.formValues={}),this.privateJsonValue[o.fieldName]?this.formValues[o.fieldName]=this.privateJsonValue[o.fieldName]:this.formValues[o.fieldName]="",this.formValues[o.fieldName]&&this.fields.findIndex(n=>n.name===o.fieldName)>=0){let n=this.formValues[o.fieldName];this.fields.find(l=>l.name===o.fieldName).value=n,this.formGroup.get(o.fieldName).setValue(n,{emitEvent:!1})}})}ngDistroy(){this.unsubcribe()}};t.\u0275fac=function(n){return new(n||t)},t.\u0275cmp=c({type:t,selectors:[["dynamic-form-builder-cms"]],inputs:{jsonValue:"jsonValue",propertiesInfos:"propertiesInfos",formGroup:"formGroup"},outputs:{jsonValueChange:"jsonValueChange"},decls:1,vars:1,consts:[[4,"ngFor","ngForOf"],[3,"field","formGroup"]],template:function(n,l){n&1&&d(0,xe,2,2,"div",0),n&2&&r("ngForOf",l.fields)},dependencies:[C,v,y,X],encapsulation:2});let e=t;return e})();export{Ve as a};
