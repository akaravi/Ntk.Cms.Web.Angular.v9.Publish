"use strict";(self.webpackChunkntk_cms_web=self.webpackChunkntk_cms_web||[]).push([[8014],{7904:(I,h,n)=>{n.d(h,{L:()=>L});var f=n(656),t=n(4537),u=n(8692);function r(l,c){1&l&&(t.TgZ(0,"div",8)(1,"p",9),t.Hsn(2,1),t.qZA()())}function g(l,c){1&l&&t._UZ(0,"div",10)}function P(l,c){1&l&&(t.TgZ(0,"div",11),t.Hsn(1,2),t.qZA())}function M(l,c){1&l&&t._UZ(0,"div",12)}function C(l,c){1&l&&t._UZ(0,"div",10)}function O(l,c){1&l&&(t.TgZ(0,"div",6)(1,"p",13),t.Hsn(2,3),t.qZA()())}const E=[[["","cms-tree-body",""]],[["","cms-tree-header",""]],[["","cms-tree-action",""]],[["","cms-tree-footer",""]]],D=["[cms-tree-body]","[cms-tree-header]","[cms-tree-action]","[cms-tree-footer]"];let L=(()=>{class l{static nextId=0;id=++l.nextId;optionHeaderDisplay=!0;optionActionMainDisplay=!0;optionFooterDisplay=!0;set optionLoading(d){this.loading=d}loading=new f.O;constructor(){}ngOnInit(){}static \u0275fac=function(v){return new(v||l)};static \u0275cmp=t.Xpm({type:l,selectors:[["app-cms-html-tree"]],inputs:{optionHeaderDisplay:"optionHeaderDisplay",optionActionMainDisplay:"optionActionMainDisplay",optionFooterDisplay:"optionFooterDisplay",optionLoading:"optionLoading"},ngContentSelectors:D,decls:10,vars:6,consts:[[1,"card","card-style"],[1,"row","justify-content-center","tree-parent"],["class","font-14 opacity-50",4,"ngIf"],["class","divider mb-1",4,"ngIf"],["class","col-12 pe-0 tree-child-hidden",4,"ngIf"],["class","divider mb-1 tree-child-hidden",4,"ngIf"],[1,"col-12","pe-0"],["class","col-12 pe-0",4,"ngIf"],[1,"font-14","opacity-50"],[1,"text-center","mb-2","mt-2","color-highlight","font-600"],[1,"divider","mb-1"],[1,"col-12","pe-0","tree-child-hidden"],[1,"divider","mb-1","tree-child-hidden"],[1,"text-center"]],template:function(v,_){1&v&&(t.F$t(E),t.TgZ(0,"div",0)(1,"div",1),t.YNc(2,r,3,0,"div",2),t.YNc(3,g,1,0,"div",3),t.YNc(4,P,2,0,"div",4),t.YNc(5,M,1,0,"div",5),t.TgZ(6,"div",6),t.Hsn(7),t.qZA(),t.YNc(8,C,1,0,"div",3),t.YNc(9,O,3,0,"div",7),t.qZA()()),2&v&&(t.xp6(2),t.Q6J("ngIf",_.optionHeaderDisplay),t.xp6(1),t.Q6J("ngIf",_.optionHeaderDisplay),t.xp6(1),t.Q6J("ngIf",_.optionActionMainDisplay),t.xp6(1),t.Q6J("ngIf",_.optionActionMainDisplay),t.xp6(3),t.Q6J("ngIf",_.optionFooterDisplay),t.xp6(1),t.Q6J("ngIf",_.optionFooterDisplay))},dependencies:[u.O5],encapsulation:2})}return l})()},6609:(I,h,n)=>{n.d(h,{D:()=>x});var f=n(8239),t=n(4537),u=n(92),r=n(4511),g=n(7445),P=n(1927),M=n(3151),C=n(2147),O=n(1528),E=n(7969),D=n(656),L=n(6707),l=n(4032),c=n(8692),d=n(1637),v=n(1379),_=n(8659),S=n(3331),A=n(9665),T=n(5738),y=n(1418);function R(s,m){if(1&s&&(t.TgZ(0,"label",8),t._uU(1),t.qZA()),2&s){const e=t.oxw();t.MGl("for","app-cms-site-selector-",e.id,""),t.xp6(1),t.Oqu(e.optionLabel)}}function b(s,m){if(1&s&&(t._UZ(0,"img",11),t.ALo(1,"cmsthumbnail")),2&s){const e=t.oxw().$implicit;t.s9C("src",t.lcZ(1,1,e.linkImageIdSrc),t.LSH)}}function U(s,m){if(1&s&&(t.TgZ(0,"mat-option",9),t.YNc(1,b,2,3,"img",10),t.TgZ(2,"span"),t._uU(3),t.qZA()()),2&s){const e=m.$implicit,i=t.oxw();t.Q6J("value",e)("disabled",i.optionDisabled),t.xp6(1),t.Q6J("ngIf",e.linkImageIdSrc),t.xp6(2),t.Oqu(i.displayOption(e))}}function Z(s,m){if(1&s){const e=t.EpF();t.TgZ(0,"mat-icon",12),t.NdJ("click",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.onActionSelectClear())}),t._uU(1,"close"),t.qZA()}}const W=["*"];let x=(()=>{class s{coreEnumService;translate;publicHelper;cdr;categoryService;static nextId=0;id=++s.nextId;constructor(e,i,a,p,o){this.coreEnumService=e,this.translate=i,this.publicHelper=a,this.cdr=p,this.categoryService=o,this.publicHelper.processService.cdr=this.cdr,this.translate.get("MESSAGE.Receiving_information").subscribe(H=>{this.loading.message=H})}dataModelResult=new r.y$4;dataModelSelect=new r.Dp$;formControl=new u.NI;filteredOptions;optionDisabled=!1;optionSelectFirstItem=!1;optionPlaceholder="";optionLabel="";optionChange=new t.vpe;optionReload=()=>this.onActionButtonReload();set optionSelectForce(e){this.onActionSelectForce(e)}loading=new D.O;get optionLoading(){return this.loading}set optionLoading(e){this.loading=e}ngOnInit(){this.loadOptions(),(!this.optionLabel||0==this.optionLabel.length&&this.optionPlaceholder?.length>0)&&(this.optionLabel=this.optionPlaceholder)}loadOptions(){this.filteredOptions=this.formControl.valueChanges.pipe((0,P.O)(""),(0,M.b)(1500),(0,C.x)(),(0,O.w)(e=>this.DataGetAll("string"==typeof e||"number"==typeof e?e:"")))}displayFn(e){return e&&e.virtual_Parent&&e.virtual_Parent.title.length>0&&e.virtual_Parent.virtual_Parent&&e.virtual_Parent.virtual_Parent.title.length>0&&e.virtual_Parent.virtual_Parent.virtual_Parent&&e.virtual_Parent.virtual_Parent.virtual_Parent.title.length>0?e.virtual_Parent.virtual_Parent.virtual_Parent.titleML+" > "+e.virtual_Parent.virtual_Parent.titleML+" > "+e.virtual_Parent.titleML+" > "+e.titleML:e&&e.virtual_Parent&&e.virtual_Parent.title.length>0&&e.virtual_Parent.virtual_Parent&&e.virtual_Parent.virtual_Parent.title.length>0?e.virtual_Parent.virtual_Parent.titleML+" > "+e.virtual_Parent.titleML+" > "+e.titleML:e&&e.virtual_Parent&&e.virtual_Parent.title.length>0?e.virtual_Parent.titleML+" > "+e.titleML:e?e.titleML:void 0}displayOption(e){return e&&e.virtual_Parent&&e.virtual_Parent.title.length>0&&e.virtual_Parent.virtual_Parent&&e.virtual_Parent.virtual_Parent.title.length>0&&e.virtual_Parent.virtual_Parent.virtual_Parent&&e.virtual_Parent.virtual_Parent.virtual_Parent.title.length>0?e.virtual_Parent.virtual_Parent.virtual_Parent.titleML+" > "+e.virtual_Parent.virtual_Parent.titleML+" > "+e.virtual_Parent.titleML+" > "+e.titleML:e&&e.virtual_Parent&&e.virtual_Parent.title.length>0&&e.virtual_Parent.virtual_Parent&&e.virtual_Parent.virtual_Parent.title.length>0?e.virtual_Parent.virtual_Parent.titleML+" > "+e.virtual_Parent.titleML+" > "+e.titleML:e&&e.virtual_Parent&&e.virtual_Parent.title.length>0?e.virtual_Parent.titleML+" > "+e.titleML:e?e.titleML:void 0}DataGetAll(e){var i=this;return(0,f.Z)(function*(){const a=new r.Hay;if(a.rowPerPage=20,a.accessLoad=!0,e&&e.length>0){let o=new r.AO3;o=new r.AO3,o.propertyName="Symbol",o.value=e,o.searchType=r.J6G.Contains,o.clauseType=r.ppe.Or,a.filters.push(o),o=new r.AO3,o.propertyName="Title",o.value=e,o.searchType=r.J6G.Contains,o.clauseType=r.ppe.Or,a.filters.push(o),e&&"number"==typeof+e&&+e>0&&(o=new r.AO3,o.propertyName="Id",o.value=e,o.searchType=r.J6G.Equal,o.clauseType=r.ppe.Or,a.filters.push(o))}const p=i.constructor.name+"main";return i.translate.get("MESSAGE.Receiving_information").subscribe(o=>{i.publicHelper.processService.processStart(p,o,i.constructor.name)}),yield(0,g.z)(i.categoryService.ServiceGetAll(a)).then(o=>(i.dataModelResult=o,i.optionSelectFirstItem&&(!i.dataModelSelect||!i.dataModelSelect.id||i.dataModelSelect.id<=0)&&i.dataModelResult.listItems.length>0&&(i.optionSelectFirstItem=!1,setTimeout(()=>{i.formControl.setValue(i.dataModelResult.listItems[0])},1e3),i.onActionSelect(i.dataModelResult.listItems[0])),i.publicHelper.processService.processStop(p),o.listItems))})()}onActionSelect(e){this.optionDisabled||(this.dataModelSelect=e,this.optionChange.emit(this.dataModelSelect))}onActionSelectClear(){this.optionDisabled||(this.dataModelSelect=null,this.formControl.setValue(null),this.optionChange.emit(null))}push(e){return this.filteredOptions.pipe((0,E.U)(i=>(i.find(a=>a.id===e.id)||i.push(e),i)))}onActionSelectForce(e){if("number"==typeof e&&e>0){if(this.dataModelSelect&&this.dataModelSelect.id===e)return;if(this.dataModelResult&&this.dataModelResult.listItems&&this.dataModelResult.listItems.find(i=>i.id===e)){const i=this.dataModelResult.listItems.find(a=>a.id===e);return this.dataModelSelect=i,void this.formControl.setValue(i)}this.categoryService.ServiceGetOneIncludeParent(e).subscribe({next:i=>{i.isSuccess&&(this.filteredOptions=this.push(i.item),this.dataModelSelect=i.item,this.formControl.setValue(i.item),this.optionChange.emit(i.item))}})}else{if(typeof e==typeof r.Dp$)return this.filteredOptions=this.push(e),this.dataModelSelect=e,void this.formControl.setValue(e);this.formControl.setValue(null)}}onActionButtonReload(){this.dataModelSelect=new r.Dp$,this.loadOptions()}static \u0275fac=function(i){return new(i||s)(t.Y36(r.FLW),t.Y36(L.sK),t.Y36(l.i),t.Y36(t.sBO),t.Y36(r.XRW))};static \u0275cmp=t.Xpm({type:s,selectors:[["app-cms-location-selector"]],inputs:{optionDisabled:"optionDisabled",optionSelectFirstItem:"optionSelectFirstItem",optionPlaceholder:"optionPlaceholder",optionLabel:"optionLabel",optionReload:"optionReload",optionSelectForce:"optionSelectForce",optionLoading:"optionLoading"},outputs:{optionChange:"optionChange"},ngContentSelectors:W,decls:10,vars:12,consts:[[1,"input-style","has-borders","no-icon","input-style-always-active","validate-field","mb-4","progressOverlayContainer"],[3,"optionsInfoAreaId"],["class","color-highlight",3,"for",4,"ngIf"],["type","text","matInput","",1,"form-control","validate-name",3,"placeholder","formControl","matAutocomplete","id"],[3,"displayWith","optionSelected"],["matauto","matAutocomplete"],[3,"value","disabled",4,"ngFor","ngForOf"],["matSuffix","","matSuffix","","mat-icon-button","","aria-label","Clear",3,"click",4,"ngIf"],[1,"color-highlight",3,"for"],[3,"value","disabled"],["style","vertical-align:middle;","class","ntk-hover-zoom","aria-hidden","","height","25","width","25",3,"src",4,"ngIf"],["aria-hidden","","height","25","width","25",1,"ntk-hover-zoom",2,"vertical-align","middle",3,"src"],["matSuffix","","matSuffix","","mat-icon-button","","aria-label","Clear",3,"click"]],template:function(i,a){if(1&i&&(t.F$t(),t.TgZ(0,"div",0),t._UZ(1,"app-progress-spinner",1),t.YNc(2,R,2,2,"label",2),t._UZ(3,"input",3),t.TgZ(4,"mat-autocomplete",4,5),t.NdJ("optionSelected",function(o){return a.onActionSelect(o.option.value)}),t.YNc(6,U,4,4,"mat-option",6),t.ALo(7,"async"),t.qZA(),t.YNc(8,Z,2,0,"mat-icon",7),t.Hsn(9),t.qZA()),2&i){const p=t.MAs(5);t.xp6(1),t.Q6J("optionsInfoAreaId",a.constructor.name),t.xp6(1),t.Q6J("ngIf",(null==a.optionLabel?null:a.optionLabel.length)>0),t.xp6(1),t.s9C("placeholder",a.optionPlaceholder),t.MGl("id","app-cms-site-selector-",a.id,""),t.Q6J("formControl",a.formControl)("matAutocomplete",p),t.uIk("disabled",!!a.optionDisabled||null),t.xp6(1),t.Q6J("displayWith",a.displayFn),t.xp6(2),t.Q6J("ngForOf",t.lcZ(7,10,a.filteredOptions)),t.xp6(2),t.Q6J("ngIf",null==a.dataModelSelect?null:a.dataModelSelect.id)}},dependencies:[c.sg,c.O5,u.Fj,u.JJ,u.oH,d.XC,v.ey,d.ZL,_.R9,S.Hw,A.Nt,T.O,c.Ov,y.v],encapsulation:2})}return s})()}}]);