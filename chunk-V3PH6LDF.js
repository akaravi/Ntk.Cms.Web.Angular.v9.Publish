import{$a as ie,C as Vt,D as Bt,Ga as Kt,H as Ht,I as $t,La as qt,Ma as U,N as Gt,O as jt,Qa as Wt,Va as Zt,Wa as Jt,Xa as te,Ya as ee,Za as oe,_ as Lt,_a as ne,ab as ot,ba as Ut,d as L,da as tt,j as St,l as Rt,n as Nt,p as At,q as Et,r as C,s as Ot,sa as Yt,t as Tt,ta as Xt,u as Pt,ua as et,va as zt,w as y,wa as Qt,y as Ft,z as Dt}from"./chunk-M7S7IXV6.js";import{Aa as u,Cb as xt,D as R,Db as Z,Eb as G,F as st,Fb as j,Kb as f,L as Y,La as d,Lc as It,M as lt,Ma as l,Na as ut,O as ct,Sa as D,Tb as vt,Va as gt,Wb as J,Y as X,Za as V,ab as B,ba as z,bb as H,ca as pt,cb as c,da as ht,db as A,ea as Q,eb as W,gc as bt,h as E,ja as m,k as O,ka as dt,la as N,lb as s,mb as a,nb as v,qa as K,qc as kt,r as T,ra as P,rb as $,sa as F,sb as mt,tb as ft,ub as p,wb as M,xb as Ct,xc as Mt,yb as _t,yc as yt,za as q,zc as wt}from"./chunk-FSW4BEJP.js";var pe=o=>({active:o});function _e(o,n){if(o&1){let t=$();s(0,"button",2),p("click",function(){let i=P(t).$implicit,r=M();return F(r.select(i))}),a()}if(o&2){let t=n.$implicit,e=M();A("background-color",t),c("ngClass",J(4,pe,e.selectedColor===t))("disableRipple",!0)}}function xe(o,n){if(o&1){let t=$();s(0,"button",2),p("click",function(){let i=P(t).$implicit,r=M();return F(r.select(i))}),a()}if(o&2){let t=n.$implicit,e=M();A("background-color",t),c("ngClass",J(4,pe,e.selectedColor===t))("disableRipple",!0)}}var ve=["button"],be=[[["","ngxMatColorpickerToggleIcon",""]]],ke=["[ngxMatColorpickerToggleIcon]"];function Me(o,n){if(o&1&&(s(0,"mat-icon"),f(1," palette "),a()),o&2){let t=M();A("color",t.picker==null||t.picker._selected==null?null:t.picker._selected.rgba)}}var ye=/^\s+/,we=/\s+$/;var S=Math.round;var Ie=/[^0-9]/g,w=255;var re=["#ffffff","#ffff00","#ff00ff","#ff0000","#c0c0c0","#808080","#808000","#800080","#800000","#00ffff","#00ff00","#008080","#008000","#0000ff","#000080","#000000"];function he(o,n,t){let e=o.getImageData(n,t,1,1).data;return{r:e[0],g:e[1],b:e[2]}}function Se(o,n,t,e,i){var r=[k(S(o).toString(16)),k(S(n).toString(16)),k(S(t).toString(16)),k(Re(e))];return i&&r[0].charAt(0)==r[0].charAt(1)&&r[1].charAt(0)==r[1].charAt(1)&&r[2].charAt(0)==r[2].charAt(1)&&r[3].charAt(0)==r[3].charAt(1)?r[0].charAt(0)+r[1].charAt(0)+r[2].charAt(0)+r[3].charAt(0):r.join("")}function k(o){return o.length==1?"0"+o:""+o}function Re(o){return Math.round(parseFloat(o)*255).toString(16)}function ae(o){return h(o)/255}function h(o){return parseInt(o,16)}function se(o,n,t,e){var i=[k(S(o).toString(16)),k(S(n).toString(16)),k(S(t).toString(16))];return e&&i[0].charAt(0)==i[0].charAt(1)&&i[1].charAt(0)==i[1].charAt(1)&&i[2].charAt(0)==i[2].charAt(1)?i[0].charAt(0)+i[1].charAt(0)+i[2].charAt(0):i.join("")}var Ne="[-\\+]?\\d+%?",Ae="[-\\+]?\\d*\\.\\d+%?",_="(?:"+Ae+")|(?:"+Ne+")",nt="[\\s|\\(]+("+_+")[,|\\s]+("+_+")[,|\\s]+("+_+")\\s*\\)?",it="[\\s|\\(]+("+_+")[,|\\s]+("+_+")[,|\\s]+("+_+")[,|\\s]+("+_+")\\s*\\)?",b={CSS_UNIT:new RegExp(_),rgb:new RegExp("rgb"+nt),rgba:new RegExp("rgba"+it),hsl:new RegExp("hsl"+nt),hsla:new RegExp("hsla"+it),hsv:new RegExp("hsv"+nt),hsva:new RegExp("hsva"+it),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/};function rt(o){o=o.replace(ye,"").replace(we,"").toLowerCase();let n,t;return(n=b.rgb.exec(o))?{r:n[1],g:n[2],b:n[3],a:1}:(n=b.rgba.exec(o))?{r:n[1],g:n[2],b:n[3],a:n[4]}:(n=b.hex8.exec(o))?{r:h(n[1]),g:h(n[2]),b:h(n[3]),a:ae(n[4])}:(n=b.hex6.exec(o))?{r:h(n[1]),g:h(n[2]),b:h(n[3]),a:1}:(n=b.hex4.exec(o))?{r:h(n[1]+""+n[1]),g:h(n[2]+""+n[2]),b:h(n[3]+""+n[3]),a:ae(n[4]+""+n[4])}:(n=b.hex3.exec(o))?{r:h(n[1]+""+n[1]),g:h(n[2]+""+n[2]),b:h(n[3]+""+n[3]),a:1}:null}function Ee(o){return Error(`NgxMatColorPicker: No provider found for ${o}. You must define MAT_COLOR_FORMATS in your module`)}var g=class{constructor(n,t,e,i){this.r=n>w?w:n,this.g=t>w?w:t,this.b=e>w?w:e,i!=null?this.a=i>1?1:i:this.a=1,this.roundA=Math.round(this.a),this.hex=se(this.r,this.g,this.b),this.rgba=this.toRgba()}toHex(n){return se(this.r,this.g,this.b,n)}toRgba(){return`rgba(${this.r},${this.g},${this.b},${this.a})`}toHexString(n){return"#"+this.toHex(n)}toRgbString(){return this.a===1?"rgb("+Math.round(this.r)+", "+Math.round(this.g)+", "+Math.round(this.b)+")":"rgba("+Math.round(this.r)+", "+Math.round(this.g)+", "+Math.round(this.b)+", "+this.roundA+")"}toHex8(n){return Se(this.r,this.g,this.b,this.a,n)}toHex8String(n){return"#"+this.toHex8(n)}toString(n){let t=!!n,e,i=this.a<1&&this.a>=0;return!t&&i&&(n==="hex"||n==="hex6"||n==="hex3"||n==="hex4"||n==="hex8")?this.toRgbString():(n==="rgb"&&(e=this.toRgbString()),(n==="hex"||n==="hex6")&&(e=this.toHexString()),n==="hex3"&&(e=this.toHexString(!0)),n==="hex4"&&(e=this.toHex8String(!0)),n==="hex8"&&(e=this.toHex8String()),e||this.toHexString())}},de=(()=>{class o{constructor(t,e){this.zone=t,this.colorChanged=new u,this.x=0,this.y=0,this.drag=!1,this._destroyed=new O,this.elementId=e}ngOnDestroy(){this._destroyed.next(),this._destroyed.complete()}ngAfterViewInit(){this.canvas=document.getElementById(this.elementId),this.ctx=this.canvas.getContext("2d"),this.width=this.canvas.width,this.height=this.canvas.height,this.draw()}draw(){this.ctx.clearRect(0,0,this.width,this.height),this.ctx.rect(0,0,this.width,this.height),this.fillGradient(),this.y!=0&&this.redrawIndicator(this.x,this.y)}onMousedown(t){this.drag=!0,this.changeColor(t),this.zone.runOutsideAngular(()=>{this.canvas.addEventListener("mousemove",this.onMousemove.bind(this))})}onMousemove(t){this.drag&&this.zone.run(()=>{this.changeColor(t)})}onMouseup(t){this.drag=!1,this.canvas.removeEventListener("mousemove",this.onMousemove)}emitChange(t){this.colorChanged.emit(t)}}return o.\u0275fac=function(t){ut()},o.\u0275dir=N({type:o,inputs:{color:"color",theme:"theme"},outputs:{colorChanged:"colorChanged"}}),o})(),Oe=(()=>{class o extends de{constructor(t){super(t,"color-strip"),this.zone=t}ngOnInit(){}ngAfterViewInit(){super.ngAfterViewInit()}fillGradient(){let t=this.ctx.createLinearGradient(0,0,0,this.height);t.addColorStop(0,"rgba(255, 0, 0, 1)"),t.addColorStop(.17,"rgba(255, 255, 0, 1)"),t.addColorStop(.34,"rgba(0, 255, 0, 1)"),t.addColorStop(.51,"rgba(0, 255, 255, 1)"),t.addColorStop(.68,"rgba(0, 0, 255, 1)"),t.addColorStop(.85,"rgba(255, 0, 255, 1)"),t.addColorStop(1,"rgba(255, 0, 0, 1)"),this.ctx.fillStyle=t,this.ctx.fill()}redrawIndicator(t,e){this.ctx.beginPath(),this.ctx.strokeStyle="white",this.ctx.lineWidth=2,this.ctx.arc(7.5,e,7.5,0,2*Math.PI,!1),this.ctx.stroke(),this.ctx.closePath()}changeColor(t){this.x=t.offsetX,this.y=t.offsetY,this.draw();let{r:e,g:i,b:r}=he(this.ctx,t.offsetX,t.offsetY);this.emitChange(new g(e,i,r))}}return o.\u0275fac=function(t){return new(t||o)(l(D))},o.\u0275cmp=m({type:o,selectors:[["ngx-ntk-mat-color-slider"]],features:[V],decls:1,vars:0,consts:[["id","color-strip","width","15","height","234",1,"zone-strip",3,"mousedown","mouseup"]],template:function(t,e){t&1&&(s(0,"canvas",0),p("mousedown",function(r){return e.onMousedown(r)})("mouseup",function(r){return e.onMouseup(r)}),a())}}),o})(),Te=(()=>{class o{constructor(){}onInput(t){this._formatInput(t.target)}_formatInput(t){let e=Number(t.value.replace(Ie,""));e=isNaN(e)?0:e,t.value=e}}return o.\u0275fac=function(t){return new(t||o)},o.\u0275dir=N({type:o,selectors:[["","ngxMatNumericColorInput",""]],hostBindings:function(t,e){t&1&&p("input",function(r){return e.onInput(r)})}}),o})(),Pe=5,Fe=(()=>{class o extends de{get rCtrl(){return this.formGroup.get("r")}get gCtrl(){return this.formGroup.get("g")}get bCtrl(){return this.formGroup.get("b")}get aCtrl(){return this.formGroup.get("a")}get hexCtrl(){return this.formGroup.get("hex")}constructor(t){super(t,"color-block"),this.zone=t,this._resetBaseColor=!0,this.formGroup=new Pt({r:new y(null,[C.required]),g:new y(null,[C.required]),b:new y(null,[C.required]),a:new y(null,[C.required]),hex:new y(null,[C.required,C.pattern(b.hex6)])})}ngOnInit(){R(this.rCtrl.valueChanges,this.gCtrl.valueChanges,this.bCtrl.valueChanges,this.aCtrl.valueChanges).pipe(X(this._destroyed),Y(400)).subscribe(i=>{let r=new g(Number(this.rCtrl.value),Number(this.gCtrl.value),Number(this.bCtrl.value),Number(this.aCtrl.value));this.emitChange(r)}),this.hexCtrl.valueChanges.pipe(X(this._destroyed),Y(400),ct()).subscribe(i=>{let r=rt(i);if(r!=null){let x=new g(r.r,r.g,r.b,r.a);this.emitChange(x)}})}ngOnChanges(t){t.color&&t.color.currentValue&&(this.updateForm(t.color.currentValue),this._resetBaseColor&&(this._baseColor=t.color.currentValue),this._resetBaseColor=!0,t.color.firstChange||this.draw())}updateForm(t){let e={emitEvent:!1};this.rCtrl.setValue(t.r,e),this.gCtrl.setValue(t.g,e),this.bCtrl.setValue(t.b,e),this.aCtrl.setValue(t.a,e),this.hexCtrl.setValue(t.hex,e)}redrawIndicator(t,e){this.ctx.beginPath(),this.ctx.strokeStyle="white",this.ctx.arc(t,e,Pe,0,2*Math.PI,!1),this.ctx.stroke(),this.ctx.closePath()}fillGradient(){this.ctx.fillStyle=this._baseColor?this._baseColor.rgba:"rgba(255,255,255,1)",this.ctx.fillRect(0,0,this.width,this.height);let t=this.ctx.createLinearGradient(0,0,this.width,0);t.addColorStop(0,"rgba(255,255,255,1)"),t.addColorStop(1,"rgba(255,255,255,0)"),this.ctx.fillStyle=t,this.ctx.fillRect(0,0,this.width,this.height);let e=this.ctx.createLinearGradient(0,0,0,this.height);e.addColorStop(0,"rgba(0,0,0,0)"),e.addColorStop(1,"rgba(0,0,0,1)"),this.ctx.fillStyle=e,this.ctx.fillRect(0,0,this.width,this.height)}onSliderColorChanged(t){this._baseColor=t,this.color=t,this.fillGradient(),this.emitChange(t)}changeColor(t){this.x=t.offsetX,this.y=t.offsetY,this._resetBaseColor=!1,this.draw();let{r:e,g:i,b:r}=he(this.ctx,t.offsetX,t.offsetY);this.emitChange(new g(e,i,r))}}return o.\u0275fac=function(t){return new(t||o)(l(D))},o.\u0275cmp=m({type:o,selectors:[["ngx-ntk-mat-color-canvas"]],hostAttrs:[1,"ngx-ntk-mat-color-canvas"],features:[V,K],decls:30,vars:8,consts:[[3,"formGroup"],[1,"color-canvas-row"],[1,"zone-canvas"],["id","color-block","width","200","height","235",1,"zone-block",3,"mousedown","mouseup"],[3,"colorChanged"],[1,"zone-inputs"],[3,"color"],["matInput","","formControlName","r","ngxMatNumericColorInput","","autocomplete","off"],["matInput","","formControlName","g","ngxMatNumericColorInput","","autocomplete","off"],["matInput","","formControlName","b","ngxMatNumericColorInput","","autocomplete","off"],["mat-mini-fab","",1,"preview"],["matPrefix","",1,"symbol"],["matInput","","formControlName","hex","autocomplete","off"],[1,"input-opacity",3,"color"],["matInput","","formControlName","a","type","number","min","0","max","1","step","0.1","autocomplete","off"]],template:function(t,e){t&1&&(s(0,"form",0)(1,"div",1)(2,"div",2)(3,"canvas",3),p("mousedown",function(r){return e.onMousedown(r)})("mouseup",function(r){return e.onMouseup(r)}),a(),s(4,"ngx-ntk-mat-color-slider",4),p("colorChanged",function(r){return e.onSliderColorChanged(r)}),a()(),s(5,"div",5)(6,"mat-form-field",6)(7,"mat-label"),f(8,"R"),a(),v(9,"input",7),a(),s(10,"mat-form-field",6)(11,"mat-label"),f(12,"G"),a(),v(13,"input",8),a(),s(14,"mat-form-field",6)(15,"mat-label"),f(16,"B"),a(),v(17,"input",9),a()()(),s(18,"div",1),v(19,"button",10),s(20,"mat-form-field",6)(21,"mat-label"),f(22,"HEX6"),a(),s(23,"mat-label",11),f(24,"#\xA0"),a(),v(25,"input",12),a(),s(26,"mat-form-field",13)(27,"mat-label"),f(28,"A"),a(),v(29,"input",14),a()()()),t&2&&(c("formGroup",e.formGroup),d(6),c("color",e.theme),d(4),c("color",e.theme),d(4),c("color",e.theme),d(5),A("background-color",(e.color==null?null:e.color.rgba)||"transparent"),d(),c("color",e.theme),d(6),c("color",e.theme))},dependencies:[oe,tt,Lt,Ut,et,Ft,At,Dt,Ot,Tt,$t,Ht,Vt,Bt,Oe,Te],styles:[`.ngx-ntk-mat-color-canvas .color-canvas-row{display:flex}.ngx-ntk-mat-color-canvas .color-canvas-row:first-of-type{height:235px;margin-bottom:12px}.ngx-ntk-mat-color-canvas .color-canvas-row:first-of-type .card{height:180px}.ngx-ntk-mat-color-canvas .color-canvas-row canvas:hover{cursor:crosshair}.ngx-ntk-mat-color-canvas .color-canvas-row .zone{display:flex}.ngx-ntk-mat-color-canvas .color-canvas-row .zone-canvas{height:235px}.ngx-ntk-mat-color-canvas .color-canvas-row .zone-canvas .zone-block{border:1px solid rgba(0,0,0,.12)}.ngx-ntk-mat-color-canvas .color-canvas-row .zone-strip{flex-basis:auto;margin-left:10px}.ngx-ntk-mat-color-canvas .color-canvas-row .zone-inputs{display:flex;width:60px;height:235px;flex-direction:column;margin-left:16px;margin-top:12px}.ngx-ntk-mat-color-canvas .color-canvas-row:nth-of-type(2){display:flex}.ngx-ntk-mat-color-canvas .color-canvas-row:nth-of-type(2) .preview{min-width:40px;min-height:40px;height:40px;width:40px;margin-top:12px}.ngx-ntk-mat-color-canvas .color-canvas-row:nth-of-type(2) .mat-mdc-form-field{margin-left:16px}.ngx-ntk-mat-color-canvas .color-canvas-row:nth-of-type(2) .mat-mdc-form-field:first-of-type{width:170px}.ngx-ntk-mat-color-canvas .color-canvas-row:nth-of-type(2) .mat-mdc-form-field:first-of-type .symbol{font-weight:700;color:#0000008a}.ngx-ntk-mat-color-canvas .color-canvas-row:nth-of-type(2) .mat-mdc-form-field:last-of-type{width:60px}.ngx-ntk-mat-color-canvas .color-canvas-row:nth-of-type(2) .mat-mdc-form-field:last-of-type .mat-mdc-text-field-wrapper{padding:0 8px}.ngx-ntk-mat-color-canvas .mat-mdc-form-field-label{font-weight:700}.ngx-ntk-mat-color-canvas .mat-mdc-form-field .mdc-text-field--filled:not(.mdc-text-field--disabled){background-color:transparent}
`],encapsulation:2}),o})(),De=(()=>{class o{set color(t){t&&(typeof t=="string"?this.selectedColor=t:this.selectedColor=t.toHexString())}constructor(){this.colorChanged=new u,this.colors1=re.slice(0,8),this.colors2=re.slice(8,16)}ngOnInit(){}select(t){this.selectedColor=t;let{r:e,g:i,b:r,a:x}=rt(t);this.colorChanged.emit(new g(e,i,r,x))}}return o.\u0275fac=function(t){return new(t||o)},o.\u0275cmp=m({type:o,selectors:[["ngx-ntk-mat-color-collection"]],hostAttrs:[1,"ngx-ntk-mat-color-collection"],inputs:{color:"color"},outputs:{colorChanged:"colorChanged"},decls:4,vars:2,consts:[[1,"color-collection-row"],["mat-mini-fab","","class","btn-color",3,"background-color","ngClass","disableRipple","click",4,"ngFor","ngForOf"],["mat-mini-fab","",1,"btn-color",3,"click","ngClass","disableRipple"]],template:function(t,e){t&1&&(s(0,"div",0),B(1,_e,1,6,"button",1),a(),s(2,"div",0),B(3,xe,1,6,"button",1),a()),t&2&&(d(),c("ngForOf",e.colors1),d(2),c("ngForOf",e.colors2))},dependencies:[Mt,yt,et],styles:[`.ngx-ntk-mat-color-collection .btn-color{height:20px;width:20px;margin-right:11px;box-shadow:none;opacity:.3;will-change:opacity;transition:opacity .3s linear}.ngx-ntk-mat-color-collection .btn-color.active{box-shadow:0 3px 5px -1px #0003,0 6px 10px #00000024,0 1px 18px #0000001f;opacity:1}.ngx-ntk-mat-color-collection .btn-color .mat-mdc-button-touch-target{display:none!important}
`],encapsulation:2}),o})(),le=(()=>{class o{constructor(){this.colorChanged=new u}ngOnInit(){}handleColorChanged(t){this.colorChanged.emit(t)}}return o.\u0275fac=function(t){return new(t||o)},o.\u0275cmp=m({type:o,selectors:[["ngx-ntk-mat-color-palette"]],hostAttrs:[1,"ngx-ntk-mat-color-palette"],inputs:{color:"color",theme:"theme"},outputs:{colorChanged:"colorChanged"},decls:2,vars:3,consts:[[3,"colorChanged","color","theme"],[3,"colorChanged","color"]],template:function(t,e){t&1&&(s(0,"ngx-ntk-mat-color-canvas",0),p("colorChanged",function(r){return e.handleColorChanged(r)}),a(),s(1,"ngx-ntk-mat-color-collection",1),p("colorChanged",function(r){return e.handleColorChanged(r)}),a()),t&2&&(c("color",e.color)("theme",e.theme),d(),c("color",e.color))},dependencies:[Fe,De],styles:[`.ngx-ntk-mat-color-palette .actions{margin-top:10px;display:flex}.ngx-ntk-mat-color-palette .actions .left{display:flex;flex-direction:column;margin-right:15px}.ngx-ntk-mat-color-palette .actions .left .preview{flex:2 1 auto;margin-bottom:10px}.ngx-ntk-mat-color-palette .actions .right{display:flex;width:60px;flex-direction:column}
`],encapsulation:2}),o})(),at=(()=>{class o{constructor(){}sameColor(t,e){return t==null&&e==null?!0:t!=null&&e!=null?t.rgba===e.rgba:!1}format(t,e){return t.toString(e)}parse(t){let e=rt(t);return e?new g(e.r,e.g,e.b,e.a):null}}return o.\u0275fac=function(t){return new(t||o)},o.\u0275prov=pt({token:o,factory:o.\u0275fac}),o})();var Ve=new Q("mat-color-formats"),ue=new Q("ngx-ntk-mat-colorpicker-scroll-strategy");function Be(o){return()=>o.scrollStrategies.reposition()}var He={provide:ue,deps:[U],useFactory:Be},$e=Rt(class{constructor(o){this._elementRef=o}}),ce=(()=>{class o extends $e{constructor(t){super(t)}}return o.\u0275fac=function(t){return new(t||o)(l(q))},o.\u0275cmp=m({type:o,selectors:[["ngx-ntk-mat-color-picker-content"]],viewQuery:function(t,e){if(t&1&&Z(le,5),t&2){let i;G(i=j())&&(e._palette=i.first)}},hostAttrs:[1,"ngx-ntk-mat-colorpicker-content"],hostVars:3,hostBindings:function(t,e){t&2&&(ft("@transformPanel","enter"),W("ngx-ntk-mat-colorpicker-content-touch",e.picker.touchUi))},inputs:{color:"color"},exportAs:["ngxMatColorPickerContent"],features:[V],decls:1,vars:2,consts:[[3,"colorChanged","color","theme"]],template:function(t,e){t&1&&(s(0,"ngx-ntk-mat-color-palette",0),p("colorChanged",function(r){return e.picker.select(r)}),a()),t&2&&c("color",e.picker._selected)("theme",e.color)},dependencies:[le],styles:[`.ngx-ntk-mat-colorpicker-content{display:block;border-radius:4px;box-shadow:0 2px 4px -1px #0003,0 4px 5px #00000024,0 1px 10px #0000001f;background-color:#fff;color:#000000de;padding:16px}.ngx-ntk-mat-colorpicker-content .ngx-ntk-mat-color-palette{width:296px;height:354px}.ngx-ntk-mat-colorpicker-content-touch{display:block;max-height:80vh;overflow:auto}.ngx-ntk-mat-colorpicker-content-touch .ngx-ntk-mat-color-palette{min-width:250px;min-height:312px;max-width:750px;max-height:788px}@media all and (orientation: landscape){.mat-colorpicker-content-touch .ngx-ntk-mat-color-palette{width:64vh;height:80vh}}@media all and (orientation: portrait){.mat-colorpicker-content-touch .ngx-ntk-mat-color-palette{width:80vw;height:100vw}}
`],encapsulation:2,data:{animation:[ot.transformPanel,ot.fadeInCalendar]},changeDetection:0}),o})(),To=(()=>{class o{get disabled(){return this._disabled===void 0&&this._pickerInput?this._pickerInput.disabled:!!this._disabled}set disabled(t){let e=L(t);e!==this._disabled&&(this._disabled=e,this._disabledChange.next(e))}get touchUi(){return this._touchUi}set touchUi(t){this._touchUi=L(t)}get opened(){return this._opened}set opened(t){t?this.open():this.close()}get defaultColor(){return this._defaultColor}set defaultColor(t){this._defaultColor=t}get color(){return this._color||(this._pickerInput?this._pickerInput.getThemePalette():void 0)}set color(t){this._color=t}get _selected(){return this._validSelected}set _selected(t){this._validSelected=t}constructor(t,e,i,r,x,me,fe,Ce){this._dialog=t,this._overlay=e,this._zone=i,this._adapter=r,this._dir=x,this._document=fe,this._viewContainerRef=Ce,this.openedStream=new u,this.closedStream=new u,this._touchUi=!1,this._opened=!1,this._defaultColor="primary",this._validSelected=null,this._disabledChange=new O,this._focusedElementBeforeOpen=null,this._inputSubscription=E.EMPTY,this._selectedChanged=new O,this._scrollStrategy=me}ngOnInit(){}ngOnDestroy(){this.close(),this._inputSubscription.unsubscribe(),this._disabledChange.complete(),this._popupRef&&(this._popupRef.dispose(),this._popupComponentRef=null)}select(t){let e=this._selected;this._selected=t,this._adapter.sameColor(e,this._selected)||this._selectedChanged.next(t)}registerInput(t){if(this._pickerInput)throw Error("A ColorPicker can only be associated with a single input.");this._pickerInput=t,this._inputSubscription=this._pickerInput._valueChange.subscribe(e=>this._selected=e)}open(){if(!(this._opened||this.disabled)){if(!this._pickerInput)throw Error("Attempted to open an ColorPicker with no associated input.");this._document&&(this._focusedElementBeforeOpen=this._document.activeElement),this.touchUi?this._openAsDialog():this._openAsPopup(),this._opened=!0,this.openedStream.emit()}}_openAsDialog(){this._dialogRef&&this._dialogRef.close(),this._dialogRef=this._dialog.open(ce,{direction:this._dir?this._dir.value:"ltr",viewContainerRef:this._viewContainerRef,panelClass:"ngx-ntk-mat-colorpicker-dialog"}),this._dialogRef.afterClosed().subscribe(()=>this.close()),this._dialogRef.componentInstance.picker=this,this._setColor()}_openAsPopup(){this._portal||(this._portal=new Yt(ce,this._viewContainerRef)),this._popupRef||this._createPopup(),this._popupRef.hasAttached()||(this._popupComponentRef=this._popupRef.attach(this._portal),this._popupComponentRef.instance.picker=this,this._setColor(),this._zone.onStable.asObservable().pipe(lt(1)).subscribe(()=>{this._popupRef.updatePosition()}))}_createPopup(){let t=new qt({positionStrategy:this._createPopupPositionStrategy(),hasBackdrop:!0,backdropClass:"mat-overlay-transparent-backdrop",direction:this._dir,scrollStrategy:this._scrollStrategy(),panelClass:"mat-colorpicker-popup"});this._popupRef=this._overlay.create(t),this._popupRef.overlayElement.setAttribute("role","dialog"),R(this._popupRef.backdropClick(),this._popupRef.detachments(),this._popupRef.keydownEvents().pipe(st(e=>e.keyCode===27||this._pickerInput&&e.altKey&&e.keyCode===38))).subscribe(e=>{e&&e.preventDefault(),this.close()})}close(){if(!this._opened)return;this._popupRef&&this._popupRef.hasAttached()&&this._popupRef.detach(),this._dialogRef&&(this._dialogRef.close(),this._dialogRef=null),this._portal&&this._portal.isAttached&&this._portal.detach();let t=()=>{this._opened&&(this._opened=!1,this.closedStream.emit(),this._focusedElementBeforeOpen=null)};this._focusedElementBeforeOpen&&typeof this._focusedElementBeforeOpen.focus=="function"?(this._focusedElementBeforeOpen.focus(),setTimeout(t)):t()}_setColor(){let t=this.color;this._popupComponentRef&&(this._popupComponentRef.instance.color=t),this._dialogRef&&(this._dialogRef.componentInstance.color=t)}_createPopupPositionStrategy(){return this._overlay.position().flexibleConnectedTo(this._pickerInput.getConnectedOverlayOrigin()).withTransformOriginOn(".ngx-ntk-mat-colorpicker-content").withFlexibleDimensions(!1).withViewportMargin(8).withLockedPosition().withPositions([{originX:"start",originY:"bottom",overlayX:"start",overlayY:"top"},{originX:"start",originY:"top",overlayX:"start",overlayY:"bottom"},{originX:"end",originY:"bottom",overlayX:"end",overlayY:"top"},{originX:"end",originY:"top",overlayX:"end",overlayY:"bottom"}])}}return o.\u0275fac=function(t){return new(t||o)(l(Wt),l(U),l(D),l(at),l(St,8),l(ue),l(kt,8),l(gt))},o.\u0275cmp=m({type:o,selectors:[["ngx-ntk-mat-color-picker"]],inputs:{disabled:"disabled",touchUi:"touchUi",opened:"opened",defaultColor:"defaultColor",color:"color"},outputs:{openedStream:"opened",closedStream:"closed"},exportAs:["ngxMatColorPicker"],decls:0,vars:0,template:function(t,e){},encapsulation:2,changeDetection:0}),o})(),I=class{constructor(n,t){this.target=n,this.targetElement=t,this.value=this.target.value}},Ge={provide:Nt,useExisting:z(()=>ge),multi:!0},je={provide:Et,useExisting:z(()=>ge),multi:!0},ge=(()=>{class o{set ngxMatColorPicker(t){t&&(this._picker=t,this._picker.registerInput(this),this._pickerSubscription.unsubscribe(),this._pickerSubscription=this._picker._selectedChanged.subscribe(e=>{this.value=e,this._cvaOnChange(e),this._onTouched(),this.colorInput.emit(new I(this,this._elementRef.nativeElement)),this.colorChange.emit(new I(this,this._elementRef.nativeElement))}))}get disabled(){return!!this._disabled}set disabled(t){let e=L(t),i=this._elementRef.nativeElement;this._disabled!==e&&(this._disabled=e,this._disabledChange.emit(e)),e&&i.blur&&i.blur()}get value(){return this._value}set value(t){let e=this.value;if(typeof t=="string"){var i=this.hexToRgb(t);t=new g(i.r,i.g,i.b)}this._value=t,this._formatValue(t),this._adapter.sameColor(e,t)||this._valueChange.emit(t)}constructor(t,e,i,r){if(this._elementRef=t,this._formField=e,this._colorFormats=i,this._adapter=r,this.colorChange=new u,this.colorInput=new u,this._disabledChange=new u,this._valueChange=new u,this._onTouched=()=>{},this._cvaOnChange=()=>{},this._validatorOnChange=()=>{},this._pickerSubscription=E.EMPTY,this._validator=C.compose([]),this._lastValueValid=!1,!this._colorFormats)throw Ee("MAT_COLOR_FORMATS")}hexToRgb(t){var e=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t);return e?{r:parseInt(e[1],16),g:parseInt(e[2],16),b:parseInt(e[3],16)}:null}getThemePalette(){return this._formField?this._formField.color:void 0}registerOnValidatorChange(t){this._validatorOnChange=t}validate(t){return this._validator?this._validator(t):null}getPopupConnectionElementRef(){return this.getConnectedOverlayOrigin()}getConnectedOverlayOrigin(){return this._formField?this._formField.getConnectedOverlayOrigin():this._elementRef}ngOnInit(){}ngOnDestroy(){this._pickerSubscription.unsubscribe(),this._valueChange.complete(),this._disabledChange.complete()}writeValue(t){this.value=t}registerOnChange(t){this._cvaOnChange=t}registerOnTouched(t){this._onTouched=t}setDisabledState(t){this.disabled=t}_onChange(){this.colorChange.emit(new I(this,this._elementRef.nativeElement))}_onKeydown(t){let e=t.altKey&&t.keyCode===40;this._picker&&e&&!this._elementRef.nativeElement.readOnly&&(this._picker.open(),t.preventDefault())}_onBlur(){this.value&&this._formatValue(this.value),this._onTouched()}_formatValue(t){this._elementRef.nativeElement.value=t?this._adapter.format(t,this._colorFormats.display.colorInput):""}_onInput(t){let e=this._lastValueValid,i=this._adapter.parse(t);this._adapter.sameColor(i,this._value)?e!==this._lastValueValid&&this._validatorOnChange():(this._value=i,this._cvaOnChange(i),this._valueChange.emit(i),this.colorInput.emit(new I(this,this._elementRef.nativeElement)))}}return o.\u0275fac=function(t){return new(t||o)(l(q),l(tt,8),l(Ve,8),l(at))},o.\u0275dir=N({type:o,selectors:[["input","ngxMatColorPicker",""]],hostVars:3,hostBindings:function(t,e){t&1&&p("input",function(r){return e._onInput(r.target.value)})("change",function(){return e._onChange()})("blur",function(){return e._onBlur()})("keydown",function(r){return e._onKeydown(r)}),t&2&&(mt("disabled",e.disabled),H("aria-haspopup",e._picker?"dialog":null)("aria-owns",(e._picker==null?null:e._picker.opened)&&e._picker.id||null))},inputs:{ngxMatColorPicker:"ngxMatColorPicker",disabled:"disabled",value:"value"},outputs:{colorChange:"colorChange",colorInput:"colorInput"},exportAs:["ngxMatColorPickerInput"],features:[vt([Ge,je,{provide:ee,useExisting:o}])]}),o})(),Le=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275dir=N({type:o,selectors:[["","ngxMatColorpickerToggleIcon",""]]}),o})(),Po=(()=>{class o{get disabled(){if(this._disabled==null&&this.picker)return this.picker.disabled}set disabled(t){this._disabled=t}constructor(t){this._cd=t,this._stateChanges=E.EMPTY}ngOnInit(){}ngOnChanges(t){t.picker&&this._watchStateChanges()}ngOnDestroy(){this._stateChanges.unsubscribe()}ngAfterContentInit(){this._watchStateChanges()}open(t){this.picker&&!this.disabled&&(this.picker.open(),t.stopPropagation())}_watchStateChanges(){let t=this.picker?this.picker._disabledChange:T(!1),e=this.picker&&this.picker._pickerInput?this.picker._pickerInput._disabledChange:T(!1),i=this.picker?R(this.picker.openedStream,this.picker.closedStream):T();this._stateChanges.unsubscribe(),this._stateChanges=R(t,e,i).subscribe(()=>this._cd.markForCheck())}}return o.\u0275fac=function(t){return new(t||o)(l(bt))},o.\u0275cmp=m({type:o,selectors:[["ngx-ntk-mat-color-toggle"]],contentQueries:function(t,e,i){if(t&1&&xt(i,Le,5),t&2){let r;G(r=j())&&(e._customIcon=r.first)}},viewQuery:function(t,e){if(t&1&&Z(ve,5),t&2){let i;G(i=j())&&(e._button=i.first)}},hostAttrs:[1,"ngx-ntk-mat-color-toggle"],hostVars:7,hostBindings:function(t,e){t&1&&p("focus",function(){return e._button.focus()}),t&2&&(H("tabindex",-1),W("ngx-ntk-mat-color-toggle-active",e.picker&&e.picker.opened)("mat-accent",e.picker&&e.picker.color==="accent")("mat-warn",e.picker&&e.picker.color==="warn"))},inputs:{picker:[0,"for","picker"],tabIndex:"tabIndex",disabled:"disabled",disableRipple:"disableRipple"},exportAs:["ngxMatColorPickerToggle"],features:[K],ngContentSelectors:ke,decls:4,vars:5,consts:[["button",""],["mat-icon-button","","type","button",3,"click","disabled","disableRipple"],[3,"color",4,"ngIf"]],template:function(t,e){if(t&1){let i=$();Ct(be),s(0,"button",1,0),p("click",function(x){return P(i),F(e.open(x))}),B(2,Me,2,2,"mat-icon",2),_t(3),a()}t&2&&(c("disabled",e.disabled)("disableRipple",e.disableRipple),H("aria-haspopup",e.picker?"dialog":null)("tabindex",e.disabled?-1:e.tabIndex),d(2),c("ngIf",!e._customIcon))},dependencies:[wt,zt,Jt],styles:[`.mat-form-field-appearance .mat-form-field-prefix .ngx-ntk-mat-color-toggle-default-icon,.mat-form-field-appearance .mat-form-field-suffix .ngx-ntk-mat-color-toggle-default-icon{width:1em}.mat-form-field:not(.mat-form-field-appearance) .mat-form-field-prefix .ngx-ntk-mat-color-toggle-default-icon,.mat-form-field:not(.mat-form-field-appearance) .mat-form-field-suffix .ngx-ntk-mat-color-toggle-default-icon{display:block;width:1.5em;height:1.5em}.mat-form-field:not(.mat-form-field-appearance) .mat-form-field-prefix .mat-icon-button .ngx-ntk-mat-color-toggle-default-icon,.mat-form-field:not(.mat-form-field-appearance) .mat-form-field-suffix .mat-icon-button .ngx-ntk-mat-color-toggle-default-icon{margin:auto}
`],encapsulation:2}),o})(),Fo=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=dt({type:o}),o.\u0275inj=ht({providers:[at,He],imports:[It,ne,Qt,Kt,ie,Gt,jt,Zt,Xt,te]}),o})();export{Ve as a,To as b,ge as c,Po as d,Fo as e};
