import{p as f}from"./chunk-QTWTJJ4G.js";import{Ge as l,ca as a,fa as o,g as u,hd as c}from"./chunk-KGTHDL3B.js";var d=(()=>{let t=class t{constructor(i,e){this.tokenHelper=i,this.router=e}canActivate(i,e){return u(this,null,function*(){let s=this.tokenHelper.coreAuthService.getUserToken();if(!s||s.length===0)return this.router.navigate(["auth"],{queryParams:{returnUrl:e.url}}),!1;let r=new l;if(yield this.tokenHelper.getTokenInfoState().then(h=>{r=h}),r&&r.userId>0&&r.siteId>0)return!0;if(!r||!r.userId||r.userId<=0)this.router.navigate(["auth"],{queryParams:{returnUrl:e.url}});else if(r&&r.siteId>0)return!0;return this.router.navigate(["/core/site/selection"],{queryParams:{returnUrl:e.url}}),!1})}delay(i){return new Promise(e=>setTimeout(e,i))}ngOnDestroy(){this.subscriptions.unsubscribe()}};t.\u0275fac=function(e){return new(e||t)(o(f),o(c))},t.\u0275prov=a({token:t,factory:t.\u0275fac,providedIn:"root"});let n=t;return n})();export{d as a};
