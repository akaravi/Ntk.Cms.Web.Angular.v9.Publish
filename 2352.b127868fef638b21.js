"use strict";(self.webpackChunkntk_cms_web=self.webpackChunkntk_cms_web||[]).push([[2352],{2352:(Q,N,c)=>{c.r(N),c.d(N,{SmsActionModule:()=>Pe});var r=c(8692),v=c(6114),C=c(8239),s=c(4511),y=c(656),e=c(4537),Z=c(2607),x=c(4032),M=c(6707),u=c(727),p=c(92),d=c(3704),h=c(7914),S=c(8659),T=c(3331),O=c(9665),H=c(7529),B=c(5738),Y=c(9835),j=c(5834),W=c(5211),b=c(8849),K=c(4536),V=c(9638),X=c(1561),$=c(7904);function z(i,m){if(1&i){const t=e.EpF();e.TgZ(0,"mat-tree-node",6),e._UZ(1,"button",7),e.TgZ(2,"mat-checkbox",8),e.NdJ("change",function(){const a=e.CHM(t).$implicit,l=e.oxw();return e.KtG(l.checklistSelection.toggle(a))}),e._uU(3),e.qZA()()}if(2&i){const t=m.$implicit,o=e.oxw();e.xp6(2),e.Q6J("checked",o.checklistSelection.isSelected(t)),e.xp6(1),e.Oqu(t.title)}}function ee(i,m){if(1&i){const t=e.EpF();e.TgZ(0,"mat-nested-tree-node")(1,"li")(2,"div",9)(3,"button",10)(4,"mat-icon",11),e._uU(5),e.qZA()(),e.TgZ(6,"mat-checkbox",12),e.NdJ("change",function(){const a=e.CHM(t).$implicit,l=e.oxw();return e.KtG(l.todoItemSelectionToggle(a))}),e._uU(7),e.qZA()(),e.TgZ(8,"ul"),e.GkF(9,13),e.qZA()()()}if(2&i){const t=m.$implicit,o=e.oxw();e.xp6(3),e.uIk("aria-label","Toggle "+t.title),e.xp6(2),e.hij(" ",o.treeControl.isExpanded(t)?"expand_more":"chevron_right"," "),e.xp6(1),e.Q6J("checked",o.checklistSelection.isSelected(t))("indeterminate",o.descendantsPartiallySelected(t)),e.xp6(1),e.hij(" ",t.title,""),e.xp6(1),e.ekj("category-tree-invisible",!o.treeControl.isExpanded(t))}}let te=(()=>{class i{cmsToastrService;coreEnumService;categoryService;cdr;publicHelper;dialog;translate;tokenHelper;static nextId=0;id=++i.nextId;constructor(t,o,n,a,l,g,f,A){this.cmsToastrService=t,this.coreEnumService=o,this.categoryService=n,this.cdr=a,this.publicHelper=l,this.dialog=g,this.translate=f,this.tokenHelper=A,this.publicHelper.processService.cdr=this.cdr,this.translate.get("MESSAGE.Receiving_information").subscribe(_=>{this.loading.message=_}),this.checklistSelection.changed.subscribe(_=>{if(!this.runComplate)return;const k=[];this.checklistSelection.selected.forEach(I=>{k.push(I.id)}),this.optionModelChange.emit(k),_.added&&_.added.length>0&&_.added.forEach(I=>{this.optionSelectChecked.emit(I.id)}),_.removed&&_.removed.length>0&&_.removed.forEach(I=>{this.optionSelectDisChecked.emit(I.id)})})}set optionModel(t){this.dataModelSelect=t,this.loadCheked()}dataModelSelect=[];dataModelResult=new s.y$4;filterModel=new s.Hay;loading=new y.O;treeControl=new W.VY(t=>t.children);dataSource=new b.WX;runComplate=!1;optionSelectChecked=new e.vpe;optionSelectDisChecked=new e.vpe;optionModelChange=new e.vpe;cmsApiStoreSubscribe;checklistSelection=new j.Ov(!0);hasChild=(t,o)=>!!o.children&&o.children.length>0;hasNoContent=(t,o)=>o.children;ngOnInit(){this.DataGetAll(),this.cmsApiStoreSubscribe=this.tokenHelper.getCurrentTokenOnChange().subscribe(t=>{this.DataGetAll()})}ngOnDestroy(){this.cmsApiStoreSubscribe.unsubscribe()}loadCheked(t=this.treeControl.dataNodes){this.runComplate=!1,this.treeControl.dataNodes&&this.dataModelSelect&&this.dataModelSelect.length>0&&t.forEach(o=>{this.dataModelSelect.find(a=>a===o.id)&&this.checklistSelection.select(o),o.children&&o.children.length>0&&this.loadCheked(o.children)}),this.runComplate=!0}DataGetAll(){this.filterModel.rowPerPage=200,this.filterModel.accessLoad=!0;const t=this.constructor.name+"main";this.translate.get("MESSAGE.Receiving_information").subscribe(o=>{this.publicHelper.processService.processStart(t,o,this.constructor.name)}),this.categoryService.ServiceGetAll(this.filterModel).subscribe({next:o=>{o.isSuccess?(this.dataModelResult=o,this.dataSource.data=this.dataModelResult.listItems,this.treeControl.dataNodes=this.dataModelResult.listItems,this.loadCheked()):this.cmsToastrService.typeErrorMessage(o.errorMessage),this.publicHelper.processService.processStop(t)},error:o=>{this.publicHelper.processService.processStop(t),this.cmsToastrService.typeError(o)}})}descendantsAllSelected(t){return this.treeControl.getDescendants(t).every(n=>this.checklistSelection.isSelected(n))}descendantsPartiallySelected(t){return this.treeControl.getDescendants(t).some(a=>this.checklistSelection.isSelected(a))&&!this.descendantsAllSelected(t)}todoItemSelectionToggle(t){this.checklistSelection.toggle(t);const o=this.treeControl.getDescendants(t);this.checklistSelection.isSelected(t)?this.checklistSelection.select(...o):this.checklistSelection.deselect(...o)}static \u0275fac=function(o){return new(o||i)(e.Y36(Z.e),e.Y36(s.FLW),e.Y36(s.buc),e.Y36(e.sBO),e.Y36(x.i),e.Y36(K.uw),e.Y36(M.sK),e.Y36(u.v))};static \u0275cmp=e.Xpm({type:i,selectors:[["app-cms-contact-category-tree-selector"]],inputs:{optionModel:"optionModel"},outputs:{optionSelectChecked:"optionSelectChecked",optionSelectDisChecked:"optionSelectDisChecked",optionModelChange:"optionModelChange"},decls:7,vars:7,consts:[[3,"optionLoading","optionHeaderDisplay","optionActionMainDisplay","optionFooterDisplay"],["cms-tree-body",""],[1,"category-tree","cursor-pointer",3,"dataSource","treeControl"],["matTreeNodePadding","",4,"matTreeNodeDef"],[4,"matTreeNodeDef","matTreeNodeDefWhen"],["cms-tree-footer",""],["matTreeNodePadding",""],["type","button","mat-icon-button","","disabled",""],[1,"checklist-leaf-node",3,"checked","change"],[1,"mat-tree-node"],["type","button","mat-icon-button","","matTreeNodeToggle",""],[1,"mat-icon-rtl-mirror"],[3,"checked","indeterminate","change"],["matTreeNodeOutlet",""]],template:function(o,n){1&o&&(e.TgZ(0,"app-cms-html-tree",0),e.GkF(1,1),e.ynx(2,1),e.TgZ(3,"mat-tree",2),e.YNc(4,z,4,2,"mat-tree-node",3),e.YNc(5,ee,10,7,"mat-nested-tree-node",4),e.qZA(),e.BQk(),e.GkF(6,5),e.qZA()),2&o&&(e.Q6J("optionLoading",n.loading)("optionHeaderDisplay",!0)("optionActionMainDisplay",!0)("optionFooterDisplay",!1),e.xp6(3),e.Q6J("dataSource",n.dataSource)("treeControl",n.treeControl),e.xp6(2),e.Q6J("matTreeNodeDefWhen",n.hasChild))},dependencies:[V.RK,X.oG,T.Hw,b.GZ,b.fQ,b.ah,b.eu,b.gi,b.uo,b.Ar,$.L],encapsulation:2})}return i})();var oe=c(8024),ne=c(8161),ae=c(600),P=c(7445),D=c(1927),J=c(3151),F=c(2147),w=c(1528),U=c(7969),L=c(1637),q=c(1379);function ie(i,m){if(1&i&&(e.TgZ(0,"label",8),e._uU(1),e.qZA()),2&i){const t=e.oxw();e.MGl("for","app-cms-site-selector-",t.id,""),e.xp6(1),e.Oqu(t.optionLabel)}}function se(i,m){if(1&i&&(e.TgZ(0,"mat-option",9)(1,"span"),e._uU(2),e.qZA()()),2&i){const t=m.$implicit,o=e.oxw();e.Q6J("value",t)("disabled",o.optionDisabled),e.xp6(2),e.Oqu(o.displayOption(t))}}function le(i,m){if(1&i){const t=e.EpF();e.TgZ(0,"mat-icon",10),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.onActionSelectClear())}),e._uU(1,"close"),e.qZA()}}const re=["*"];let ce=(()=>{class i{coreEnumService;cmsToastrService;cdr;publicHelper;translate;categoryService;static nextId=0;id=++i.nextId;constructor(t,o,n,a,l,g){this.coreEnumService=t,this.cmsToastrService=o,this.cdr=n,this.publicHelper=a,this.translate=l,this.categoryService=g,this.publicHelper.processService.cdr=this.cdr,this.translate.get("MESSAGE.Receiving_information").subscribe(f=>{this.loading.message=f})}dataModelResult=new s.y$4;dataModelSelect=new s.Lnx;formControl=new p.NI;filteredOptions;optionPlaceholder="";optionSelectFirstItem=!1;optionLabel="";optionChange=new e.vpe;optionReload=()=>this.onActionButtonReload();set optionSelectForce(t){this.onActionSelectForce(t)}loading=new y.O;get optionLoading(){return this.loading}set optionLoading(t){this.loading=t}set optionLinkCategryId(t){t!=this.privateLinkCategryId&&(""!=this.privateLinkCategryId&&this.onActionSelectClear(),this.privateLinkCategryId=t,this.loadOptions())}optionDisabled=!1;privateLinkCategryId="";ngOnInit(){this.loadOptions(),(!this.optionLabel||0==this.optionLabel.length&&this.optionPlaceholder?.length>0)&&(this.optionLabel=this.optionPlaceholder)}loadOptions(){this.filteredOptions=this.formControl.valueChanges.pipe((0,D.O)(""),(0,J.b)(1500),(0,F.x)(),(0,w.w)(t=>"string"==typeof t||"number"==typeof t?this.DataGetAll(t||""):[]))}displayFn(t){return t?t.title:void 0}displayOption(t){return t?t.title:void 0}DataGetAll(t){var o=this;return(0,C.Z)(function*(){const n=new s.Hay;n.rowPerPage=20,n.accessLoad=!0;let a=new s.AO3;a.propertyName="Title",a.value=t,a.searchType=s.J6G.Contains,a.clauseType=s.ppe.Or,n.filters.push(a),t&&"string"==typeof+t&&+t>0&&(a=new s.AO3,a.propertyName="Id",a.value=t,a.searchType=s.J6G.Equal,a.clauseType=s.ppe.Or,n.filters.push(a)),o.privateLinkCategryId&&o.privateLinkCategryId.length>0&&(a=new s.AO3,a.propertyName="linkCategoryId",a.value=o.privateLinkCategryId,a.searchType=s.J6G.Equal,n.filters.push(a));const l=o.constructor.name+"main";return o.translate.get("MESSAGE.Receiving_information").subscribe(g=>{o.publicHelper.processService.processStart(l,g,o.constructor.name)}),yield(0,P.z)(o.categoryService.ServiceGetAll(n)).then(g=>(o.dataModelResult=g,o.optionSelectFirstItem&&(!o.dataModelSelect||!o.dataModelSelect.id||0==o.dataModelSelect.id.length)&&o.dataModelResult.listItems.length>0&&(o.optionSelectFirstItem=!1,setTimeout(()=>{o.formControl.setValue(o.dataModelResult.listItems[0]),o.onActionSelect(o.dataModelResult.listItems[0])},1e3)),o.publicHelper.processService.processStop(l),g.listItems))})()}onActionSelect(t){this.dataModelSelect=t,this.optionChange.emit(this.dataModelSelect)}onActionSelectClear(){this.dataModelSelect=null,this.formControl.setValue(null),this.optionChange.emit(null)}push(t){return this.filteredOptions.pipe((0,U.U)(o=>(o.find(n=>n.id===t.id)||o.push(t),o)))}onActionSelectForce(t){if("string"==typeof t&&t.length>0){if(this.dataModelSelect&&this.dataModelSelect.id===t)return;if(this.dataModelResult&&this.dataModelResult.listItems&&this.dataModelResult.listItems.find(o=>o.id===t)){const o=this.dataModelResult.listItems.find(n=>n.id===t);return this.dataModelSelect=o,void this.formControl.setValue(o)}this.categoryService.ServiceGetOneById(t).subscribe({next:o=>{o.isSuccess?(this.filteredOptions=this.push(o.item),this.dataModelSelect=o.item,this.formControl.setValue(o.item),this.optionChange.emit(o.item)):this.cmsToastrService.typeErrorMessage(o.errorMessage)}})}else{if(typeof t==typeof s.Lnx)return this.filteredOptions=this.push(t),this.dataModelSelect=t,void this.formControl.setValue(t);this.formControl.setValue(null)}}onActionButtonReload(){this.dataModelSelect=new s.Lnx,this.loadOptions()}static \u0275fac=function(o){return new(o||i)(e.Y36(s.FLW),e.Y36(Z.e),e.Y36(e.sBO),e.Y36(x.i),e.Y36(M.sK),e.Y36(s.ULy))};static \u0275cmp=e.Xpm({type:i,selectors:[["app-sms-main-message-content-selector"]],inputs:{optionPlaceholder:"optionPlaceholder",optionSelectFirstItem:"optionSelectFirstItem",optionLabel:"optionLabel",optionReload:"optionReload",optionSelectForce:"optionSelectForce",optionLoading:"optionLoading",optionLinkCategryId:"optionLinkCategryId",optionDisabled:"optionDisabled"},outputs:{optionChange:"optionChange"},ngContentSelectors:re,decls:10,vars:12,consts:[[1,"input-style","has-borders","no-icon","input-style-always-active","validate-field","mb-4","progressOverlayContainer"],[3,"optionsInfoAreaId"],["class","color-highlight",3,"for",4,"ngIf"],["type","text","matInput","",1,"form-control","validate-name",3,"placeholder","formControl","matAutocomplete","id"],[3,"displayWith","optionSelected"],["matauto","matAutocomplete"],[3,"value","disabled",4,"ngFor","ngForOf"],["matSuffix","","matSuffix","","mat-icon-button","","aria-label","Clear",3,"click",4,"ngIf"],[1,"color-highlight",3,"for"],[3,"value","disabled"],["matSuffix","","matSuffix","","mat-icon-button","","aria-label","Clear",3,"click"]],template:function(o,n){if(1&o&&(e.F$t(),e.TgZ(0,"div",0),e._UZ(1,"app-progress-spinner",1),e.YNc(2,ie,2,2,"label",2),e._UZ(3,"input",3),e.TgZ(4,"mat-autocomplete",4,5),e.NdJ("optionSelected",function(l){return n.onActionSelect(l.option.value)}),e.YNc(6,se,3,3,"mat-option",6),e.ALo(7,"async"),e.qZA(),e.YNc(8,le,2,0,"mat-icon",7),e.Hsn(9),e.qZA()),2&o){const a=e.MAs(5);e.xp6(1),e.Q6J("optionsInfoAreaId",n.constructor.name),e.xp6(1),e.Q6J("ngIf",(null==n.optionLabel?null:n.optionLabel.length)>0),e.xp6(1),e.s9C("placeholder",n.optionPlaceholder),e.MGl("id","app-cms-site-selector-",n.id,""),e.Q6J("formControl",n.formControl)("matAutocomplete",a),e.uIk("disabled",!!n.optionDisabled||null),e.xp6(1),e.Q6J("displayWith",n.displayFn),e.xp6(2),e.Q6J("ngForOf",e.lcZ(7,10,n.filteredOptions)),e.xp6(2),e.Q6J("ngIf",null==n.dataModelSelect?null:n.dataModelSelect.id)}},dependencies:[r.sg,r.O5,p.Fj,p.JJ,p.oH,L.XC,q.ey,L.ZL,S.R9,T.Hw,O.Nt,B.O,r.Ov],encapsulation:2})}return i})();var E=c(4079);const de=["vform"],pe=["Message"];function me(i,m){if(1&i){const t=e.EpF();e.TgZ(0,"app-sms-api-number-selector",57),e.NdJ("optionLoadingChange",function(n){e.CHM(t);const a=e.oxw();return e.KtG(a.loading=n)})("optionChange",function(n){e.CHM(t);const a=e.oxw();return e.KtG(a.onActionSelectApiNumber(n))}),e.ALo(1,"translate"),e.qZA()}if(2&i){const t=e.oxw();e.Q6J("optionLoading",t.loading)("optionLinkApiPathId",t.dataModel.linkApiPathId)("optionPlaceholder",e.lcZ(1,5,"TITLE.sender_number"))("optionSelectFirstItem",!0)("optionSelectFirstItemOnChangeApi",!0)}}function ue(i,m){if(1&i){const t=e.EpF();e.TgZ(0,"textarea",58),e.NdJ("ngModelChange",function(n){e.CHM(t);const a=e.oxw();return e.KtG(a.dataMessageContentModel.messageBody=n)}),e.qZA()}if(2&i){const t=e.oxw();e.Q6J("ngModel",t.dataMessageContentModel.messageBody)}}function he(i,m){if(1&i){const t=e.EpF();e.TgZ(0,"button",59),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.onActionMessageContentAdd())}),e._UZ(1,"i",60),e._uU(2),e.ALo(3,"translate"),e.qZA()}2&i&&(e.xp6(2),e.hij(" ",e.lcZ(3,1,"TITLE.Added_to_the_text")," "))}function ge(i,m){if(1&i){const t=e.EpF();e.TgZ(0,"button",59),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.onActionMessageContentNew())}),e._UZ(1,"i",60),e._uU(2),e.ALo(3,"translate"),e.qZA()}2&i&&(e.xp6(2),e.hij(" ",e.lcZ(3,1,"TITLE.Message_Text")," "))}function Se(i,m){1&i&&(e.TgZ(0,"mat-error"),e._uU(1),e.ALo(2,"translate"),e.TgZ(3,"strong"),e._uU(4),e.ALo(5,"translate"),e.qZA()()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,2,"TITLE.Message_Text")," "),e.xp6(3),e.Oqu(e.lcZ(5,4,"MESSAGE.required")))}function fe(i,m){if(1&i){const t=e.EpF();e.TgZ(0,"div",20)(1,"label",61),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"textarea",62,63),e.NdJ("ngModelChange",function(n){e.CHM(t);const a=e.oxw();return e.KtG(a.dataModel.toNumbers=n)}),e.qZA(),e.TgZ(6,"em")(7,"strong",64),e._uU(8),e.ALo(9,"translate"),e.qZA()()()}if(2&i){const t=e.oxw();e.xp6(2),e.Oqu(e.lcZ(3,3,"TITLE.Receiver_number")),e.xp6(2),e.Q6J("ngModel",t.dataModel.toNumbers),e.xp6(4),e.Oqu(e.lcZ(9,5,"TITLE.You_can_separate_the_number_of_the_recipient_of_the_message_with_an_inter"))}}function _e(i,m){if(1&i&&(e.TgZ(0,"button",68),e._UZ(1,"i",69),e._uU(2),e.ALo(3,"translate"),e.qZA()),2&i){e.oxw(2);const t=e.MAs(9);e.Q6J("disabled",!t.valid),e.xp6(2),e.hij(" ",e.lcZ(3,2,"ACTION.Send_Message")," ")}}function Ce(i,m){if(1&i&&(e.TgZ(0,"div",65),e._UZ(1,"cms-progress-spinner",66),e.YNc(2,_e,4,4,"button",67),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("options",t.loadingAction),e.xp6(1),e.Q6J("ngIf",!t.loading.display)}}function Me(i,m){if(1&i&&e._UZ(0,"app-cms-json-list",70),2&i){const t=e.oxw();e.Q6J("dataModel",t.dataModelResult.item)("optionMethod",1)}}class G{date;clock}let R=(()=>{class i{coreEnumService;smsMainApiPathService;activatedRoute;cmsToastrService;cdr;publicHelper;translate;router;tokenHelper;requestLinkApiPathId="";constructor(t,o,n,a,l,g,f,A,_){this.coreEnumService=t,this.smsMainApiPathService=o,this.activatedRoute=n,this.cmsToastrService=a,this.cdr=l,this.publicHelper=g,this.translate=f,this.router=A,this.tokenHelper=_,this.publicHelper.processService.cdr=this.cdr,this.translate.get("MESSAGE.Receiving_information").subscribe(k=>{this.loading.message=k}),this.loadingAction.cdr=this.cdr,this.requestLinkApiPathId=this.activatedRoute.snapshot.paramMap.get("LinkApiPathId"),this.requestLinkApiPathId?.length>0&&(this.dataModel.linkApiPathId=this.requestLinkApiPathId),this.dataModel.scheduleCron="",this.router&&this.router.getCurrentNavigation()&&null!=this.router.getCurrentNavigation().extras.state&&(this.receiverNumber=this.router.getCurrentNavigation().extras.state.ReceiverNumber,this.senderNumber=this.router.getCurrentNavigation().extras.state.SenderNumber,this.linkApiPathId=this.router.getCurrentNavigation().extras.state.LinkApiPathId,this.linkNumberId=this.router.getCurrentNavigation().extras.state.LinkNumberId),this.tokenHelper.getCurrentToken().then(k=>{this.tokenInfo=k})}tokenInfo=new s.OdC;formGroup;message;receiverNumber="";senderNumber="";linkApiPathId="";linkNumberId="";loading=new y.O;loadingAction=new y.O;dataModelParentSelected=new s.lWT;dataModel=new s.sh1;dataModelResult=new s.y$4;dataModelDateByClockStart=new G;dataModelDateByClockExpire=new G;formInfo=new s.LEF;clipboardText="";isCronDisabled=!1;ngOnInit(){this.onActionScheduleSendNow(),this.linkApiPathId&&this.linkApiPathId?.length>0&&(this.dataModel.linkApiPathId=this.linkApiPathId),this.receiverNumber&&this.receiverNumber?.length>0&&(this.dataModel.toNumbers=this.receiverNumber),this.senderNumber&&this.senderNumber?.length>0&&(this.dataModel.linkFromNumber=this.senderNumber)}onActionScheduleSendNow(){const t=new Date;this.dataModel.scheduleSendStart=t,this.dataModelDateByClockStart.clock=t.getHours()+":"+t.getMinutes(),this.dataModelDateByClockStart.date=t,this.dataModel.scheduleSendExpire=t,this.dataModelDateByClockExpire.clock=t.getHours()+":"+t.getMinutes(),this.dataModelDateByClockExpire.date=t}onActionScheduleSendCheck(){const t=new Date;this.dataModelDateByClockStart.clock||(this.dataModelDateByClockStart.clock=t.getHours()+":"+t.getMinutes()),this.dataModelDateByClockStart.date||(this.dataModelDateByClockStart.date=t),this.dataModelDateByClockStart.date=new Date(this.dataModelDateByClockStart.date),this.dataModelDateByClockStart.date.setHours(0|+this.dataModelDateByClockStart.clock.split(":")[0],0|+this.dataModelDateByClockStart.clock.split(":")[1]),this.dataModel.scheduleSendStart=this.dataModelDateByClockStart.date,this.dataModelDateByClockExpire.clock||(this.dataModelDateByClockExpire.clock=t.getHours()+":"+t.getMinutes()),this.dataModelDateByClockExpire.date||(this.dataModelDateByClockExpire.date=t),this.dataModelDateByClockExpire.date=new Date(this.dataModelDateByClockExpire.date),this.dataModelDateByClockExpire.date.setHours(0|+this.dataModelDateByClockExpire.clock.split(":")[0],0|+this.dataModelDateByClockExpire.clock.split(":")[1]),this.dataModel.scheduleSendExpire=this.dataModelDateByClockExpire.date}readClipboardFromDevTools(){return new Promise((t,o)=>{const n=function(){var a=(0,C.Z)(function*(){try{const l=yield navigator.clipboard.readText();t(l)}catch(l){o(l)}window.removeEventListener("focus",n)});return function(){return a.apply(this,arguments)}}();window.addEventListener("focus",n),console.log("Hit <Tab> to give focus back to document (or we will face a DOMException);")})}onActionMessageLTR(){this.message.nativeElement.style.direction="ltr",this.message.nativeElement.style.textAlign="left"}onActionMessageRTL(){this.message.nativeElement.style.direction="rtl",this.message.nativeElement.style.textAlign="right"}onActionSelectPrivateSiteConfig(t){this.dataModel.linkApiPathId=this.requestLinkApiPathId,this.dataModelParentSelected=t,t&&t.id.length>0&&(this.dataModel.linkApiPathId=t.id,this.dataModel.linkFromNumber=null)}dataMessageCategoryModel=new s._fd;onActionSelectMessageCategory(t){this.dataMessageCategoryModel=t&&t.id.length>0?t:new s._fd}dataMessageContentModel=new s.Lnx;onActionSelectMessageContent(t){this.dataMessageContentModel=t&&t.id.length>0?t:new s.Lnx}onActionSelectApiNumber(t){t&&t.id.length>0&&(this.dataModel.linkFromNumber=t.id)}onActionMessageContentAdd(){this.dataMessageContentModel?.messageBody?.length>0?this.dataModel.message.length>0&&(this.dataModel.message=this.dataModel.message+" "+this.dataMessageContentModel.messageBody):this.dataModel.message=this.dataMessageContentModel.messageBody}onActionMessageContentNew(){this.dataMessageContentModel?.messageBody?.length>0&&(this.dataModel.message=this.dataMessageContentModel.messageBody)}onFormSubmit(){if(!this.formGroup.valid)return;(!this.dataModel.linkApiPathId||this.dataModel.linkApiPathId.length<=0)&&this.cmsToastrService.typeErrorFormInvalid(),this.onActionScheduleSendCheck(),this.formInfo.formSubmitAllow=!1;const t=this.constructor.name+"main";this.loadingAction.Start(t),this.formInfo.formAlert="",this.formInfo.formError="",this.smsMainApiPathService.ServiceSendMessage(this.dataModel).subscribe({next:o=>{this.formInfo.formSubmitAllow=!0,this.dataModelResult=o,o.isSuccess?(this.formInfo.formAlert=this.translate.instant("MESSAGE.Submit_request_was_successfully_registered"),this.cmsToastrService.typeSuccessMessage(this.translate.instant("MESSAGE.Send_request_was_successfully_registered"))):(this.translate.get("ERRORMESSAGE.MESSAGE.typeError").subscribe(n=>{this.formInfo.formAlert=n}),this.formInfo.formError=o.errorMessage,this.cmsToastrService.typeErrorMessage(o.errorMessage)),this.loadingAction.Stop(t)},error:o=>{this.formInfo.formSubmitAllow=!0,this.cmsToastrService.typeError(o),this.loadingAction.Stop(t)},complete:()=>{}})}onActionContactCategorySelectChecked(t){!t||t.length<=0?this.translate.get("MESSAGE.category_of_information_is_not_clear").subscribe(o=>{this.cmsToastrService.typeErrorSelected(o)}):(this.dataModel.toContactCategories||(this.dataModel.toContactCategories=[]),this.dataModel.toContactContents||(this.dataModel.toContactContents=[]),this.publicHelper.listAddIfNotExist(this.dataModel.toContactCategories,t,0),(this.dataModel.toContactCategories.length>0||this.dataModel.toContactContents.length>0)&&(this.dataModel.toNumbers=""))}onActionContactCategorySelectDisChecked(t){!t||t.length<=0?this.translate.get("MESSAGE.category_of_information_is_not_clear").subscribe(o=>{this.cmsToastrService.typeErrorSelected(o)}):(this.dataModel.toContactCategories||(this.dataModel.toContactCategories=[]),this.dataModel.toContactContents||(this.dataModel.toContactContents=[]),this.publicHelper.listRemoveIfExist(this.dataModel.toContactCategories,t),(this.dataModel.toContactCategories.length>0||this.dataModel.toContactContents.length>0)&&(this.dataModel.toNumbers=""))}step=0;setStep(t){this.step=t}nextStep(){this.step++}prevStep(){this.step--}static \u0275fac=function(o){return new(o||i)(e.Y36(s.FLW),e.Y36(s.sZP),e.Y36(v.gz),e.Y36(Z.e),e.Y36(e.sBO),e.Y36(x.i),e.Y36(M.sK),e.Y36(v.F0),e.Y36(u.v))};static \u0275cmp=e.Xpm({type:i,selectors:[["app-sms-action-send-message"]],viewQuery:function(o,n){if(1&o&&(e.Gf(de,5),e.Gf(pe,5)),2&o){let a;e.iGM(a=e.CRH())&&(n.formGroup=a.first),e.iGM(a=e.CRH())&&(n.message=a.first)}},decls:198,vars:139,consts:[[1,"card","card-style","progressOverlayContainer"],[3,"optionsInfoAreaId"],[1,"content","mb-0"],[1,"mb-0","color-highlight","font-600","font-12"],[3,"ngSubmit"],["vform","ngForm"],[1,"ntk-cms-html-card-body"],[1,"row"],[1,"col-6"],[1,"example-headers-align"],["hideToggle","",3,"expanded","opened"],[3,"optionLoading","optionSelectForce","optionPlaceholder","optionSelectFirstItem","optionChange","optionLoadingChange"],[3,"optionLoading","optionSelectForce","optionLinkApiPathId","optionPlaceholder","optionSelectFirstItem","optionSelectFirstItemOnChangeApi","optionLoadingChange","optionChange",4,"ngIf"],["type","button",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-blue",3,"click"],[3,"optionLoading","optionLoadingChange","optionChange"],[3,"optionLoading","optionLinkCategryId","optionLoadingChange","optionChange"],["matInput","","name","dataMessageContentModel.messageBody","type","text","rows","10",3,"ngModel","ngModelChange",4,"ngIf"],["type","button","class","btn font-13 font-600 btn-s m-1 rounded-s shadow-xl border-0 gradient-gray",3,"click",4,"ngIf"],["type","button",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-teal",3,"click"],[3,"optionSelectChecked","optionSelectDisChecked"],[1,"input-style","has-borders","no-icon","input-style-always-active","validate-field","mb-4"],["for","dataModelDateByClockStart.date",1,"color-highlight"],["matInput","","name","scheduleSendStartDate","id","dataModelDateByClockStart.date",1,"form-control","validate-name",3,"matDatepicker","ngModel","ngModelChange"],["matSuffix","",3,"for"],["touchUi","",3,"closed"],["scheduleSendStartDate",""],["for","dataModelDateByClockStart.clock",1,"color-highlight"],["matInput","","name","scheduleSendStartClock","id","dataModelDateByClockStart.clock",1,"form-control","validate-name",3,"ngxTimepicker","ngModel","format","ngModelChange"],["scheduleSendStartClock",""],["for","dataModelDateByClockExpire.date",1,"color-highlight"],["matInput","","name","scheduleSendExpireDate","id","dataModelDateByClockExpire.date",1,"form-control","validate-name",3,"matDatepicker","ngModel","ngModelChange"],["scheduleSendExpireDate",""],["for","dataModelDateByClockExpire.clock",1,"color-highlight"],["matInput","","name","scheduleSendExpireClock","id","dataModelDateByClockExpire.clock",1,"form-control","validate-name",3,"ngxTimepicker","ngModel","format","ngModelChange"],["scheduleSendExpireClock",""],[2,"direction","ltr"],[1,"d-flex","mb-3"],[1,"pt-1"],["data-trigger-switch","dataModel.isFlash",1,"font-600","font-14"],[1,"ms-auto","me-3","pe-2"],[1,"custom-control","ios-switch","small-switch"],["type","checkbox","id","dataModel.isFlash","name","dataModel.isFlash",1,"ios-input",3,"ngModel","ngModelChange"],["for","dataModel.isFlash",1,"custom-control-label"],["data-trigger-switch","dataModel.sendByQeue",1,"font-600","font-14"],["type","checkbox","id","dataModel.sendByQeue","name","dataModel.sendByQeue",1,"ios-input",3,"ngModel","ngModelChange"],["for","dataModel.sendByQeue",1,"custom-control-label"],[1,"message-box"],[1,"row",2,"height","64px"],[1,"row",2,"height","300px"],["for","dataModel.message",1,"color-highlight"],["matInput","","name","dataModel.message","type","text","placeholder","...","id","dataModel.message","minlength","1","maxlength","500","rows","9",1,"form-control","validate-name",3,"ngModel","ngModelChange"],["Message",""],[4,"ngIf"],[1,"row",2,"height","83px"],["class","input-style has-borders  no-icon input-style-always-active validate-field mb-4",4,"ngIf"],["class","row","style","height:140px;bottom: 4vh;justify-content: center;",4,"ngIf"],[3,"dataModel","optionMethod",4,"ngIf"],[3,"optionLoading","optionSelectForce","optionLinkApiPathId","optionPlaceholder","optionSelectFirstItem","optionSelectFirstItemOnChangeApi","optionLoadingChange","optionChange"],["matInput","","name","dataMessageContentModel.messageBody","type","text","rows","10",3,"ngModel","ngModelChange"],["type","button",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-gray",3,"click"],[1,"ft-x"],["for","dataModel.toNumbers",1,"color-highlight"],["matInput","","name","dataModel.toNumbers","id","dataModel.toNumbers","type","text","placeholder","0912","rows","2",3,"ngModel","ngModelChange"],["ToNumbers",""],[1,"info-field-text"],[1,"row",2,"height","140px","bottom","4vh","justify-content","center"],[3,"options"],["type","submit","class","message-box-button",3,"disabled",4,"ngIf"],["type","submit",1,"message-box-button",3,"disabled"],[1,"fa","fa-check-square-o"],[3,"dataModel","optionMethod"]],template:function(o,n){if(1&o&&(e.TgZ(0,"div",0),e._UZ(1,"app-progress-spinner",1),e.TgZ(2,"div",2)(3,"p",3),e._uU(4),e.qZA(),e.TgZ(5,"p"),e._uU(6),e.ALo(7,"translate"),e.qZA(),e.TgZ(8,"form",4,5),e.NdJ("ngSubmit",function(){return n.onFormSubmit()}),e.TgZ(10,"div",6)(11,"div",7)(12,"div",8)(13,"mat-accordion",9)(14,"mat-expansion-panel",10),e.NdJ("opened",function(){return n.setStep(0)}),e.TgZ(15,"mat-expansion-panel-header")(16,"mat-panel-title"),e._uU(17),e.ALo(18,"translate"),e.qZA(),e.TgZ(19,"mat-panel-description"),e._uU(20),e.ALo(21,"translate"),e.TgZ(22,"mat-icon"),e._uU(23,"account_circle"),e.qZA()()(),e.TgZ(24,"app-sms-apipath-selector",11),e.NdJ("optionChange",function(l){return n.onActionSelectPrivateSiteConfig(l)})("optionLoadingChange",function(l){return n.loading=l}),e.ALo(25,"translate"),e.qZA(),e.YNc(26,me,2,7,"app-sms-api-number-selector",12),e.TgZ(27,"mat-action-row")(28,"button",13),e.NdJ("click",function(){return n.nextStep()}),e._uU(29),e.ALo(30,"translate"),e.qZA()()(),e.TgZ(31,"mat-expansion-panel",10),e.NdJ("opened",function(){return n.setStep(1)}),e.TgZ(32,"mat-expansion-panel-header")(33,"mat-panel-title"),e._uU(34),e.ALo(35,"translate"),e.qZA(),e.TgZ(36,"mat-panel-description"),e._uU(37),e.ALo(38,"translate"),e.TgZ(39,"mat-icon"),e._uU(40,"map"),e.qZA()()(),e.TgZ(41,"app-sms-main-message-category-selector",14),e.NdJ("optionLoadingChange",function(l){return n.loading=l})("optionChange",function(l){return n.onActionSelectMessageCategory(l)}),e.qZA(),e.TgZ(42,"app-sms-main-message-content-selector",15),e.NdJ("optionLoadingChange",function(l){return n.loading=l})("optionChange",function(l){return n.onActionSelectMessageContent(l)}),e.qZA(),e.YNc(43,ue,1,1,"textarea",16),e.YNc(44,he,4,3,"button",17),e.YNc(45,ge,4,3,"button",17),e.TgZ(46,"mat-action-row")(47,"button",18),e.NdJ("click",function(){return n.prevStep()}),e._uU(48),e.ALo(49,"translate"),e.qZA(),e.TgZ(50,"button",13),e.NdJ("click",function(){return n.nextStep()}),e._uU(51),e.ALo(52,"translate"),e.qZA()()(),e.TgZ(53,"mat-expansion-panel",10),e.NdJ("opened",function(){return n.setStep(2)}),e.TgZ(54,"mat-expansion-panel-header")(55,"mat-panel-title"),e._uU(56),e.ALo(57,"translate"),e.qZA(),e.TgZ(58,"mat-panel-description"),e._uU(59),e.ALo(60,"translate"),e.TgZ(61,"mat-icon"),e._uU(62,"date_range"),e.qZA()()(),e.TgZ(63,"app-cms-contact-category-tree-selector",19),e.NdJ("optionSelectChecked",function(l){return n.onActionContactCategorySelectChecked(l)})("optionSelectDisChecked",function(l){return n.onActionContactCategorySelectDisChecked(l)}),e.qZA(),e.TgZ(64,"mat-action-row")(65,"button",18),e.NdJ("click",function(){return n.prevStep()}),e._uU(66),e.ALo(67,"translate"),e.qZA(),e.TgZ(68,"button",13),e.NdJ("click",function(){return n.nextStep()}),e._uU(69),e.ALo(70,"translate"),e.qZA()()(),e.TgZ(71,"mat-expansion-panel",10),e.NdJ("opened",function(){return n.setStep(3)}),e.TgZ(72,"mat-expansion-panel-header")(73,"mat-panel-title"),e._uU(74),e.ALo(75,"translate"),e.qZA(),e.TgZ(76,"mat-panel-description"),e._uU(77),e.ALo(78,"translate"),e.TgZ(79,"mat-icon"),e._uU(80,"date_range"),e.qZA()()(),e.TgZ(81,"div",7)(82,"div",8)(83,"div",20)(84,"label",21),e._uU(85),e.ALo(86,"translate"),e.qZA(),e.TgZ(87,"input",22),e.NdJ("ngModelChange",function(l){return n.dataModelDateByClockStart.date=l}),e.qZA(),e._UZ(88,"mat-datepicker-toggle",23),e.TgZ(89,"mat-datepicker",24,25),e.NdJ("closed",function(){return n.onActionScheduleSendCheck()}),e.qZA()()(),e.TgZ(91,"div",8)(92,"div",20)(93,"label",26),e._uU(94),e.ALo(95,"translate"),e.qZA(),e.TgZ(96,"input",27),e.NdJ("ngModelChange",function(l){return n.dataModelDateByClockStart.clock=l}),e.qZA(),e._UZ(97,"ngx-material-timepicker-toggle",23),e.TgZ(98,"ngx-material-timepicker",24,28),e.NdJ("closed",function(){return n.onActionScheduleSendCheck()}),e.qZA()()(),e.TgZ(100,"div",8)(101,"div",20)(102,"label",29),e._uU(103),e.ALo(104,"translate"),e.qZA(),e.TgZ(105,"input",30),e.NdJ("ngModelChange",function(l){return n.dataModelDateByClockExpire.date=l}),e.qZA(),e._UZ(106,"mat-datepicker-toggle",23),e.TgZ(107,"mat-datepicker",24,31),e.NdJ("closed",function(){return n.onActionScheduleSendCheck()}),e.qZA()()(),e.TgZ(109,"div",8)(110,"div",20)(111,"label",32),e._uU(112),e.ALo(113,"translate"),e.qZA(),e.TgZ(114,"input",33),e.NdJ("ngModelChange",function(l){return n.dataModelDateByClockExpire.clock=l}),e.qZA(),e._UZ(115,"ngx-material-timepicker-toggle",23),e.TgZ(116,"ngx-material-timepicker",24,34),e.NdJ("closed",function(){return n.onActionScheduleSendCheck()}),e.qZA()()()(),e._UZ(118,"hr"),e._uU(119),e.TgZ(120,"mat-action-row")(121,"button",18),e.NdJ("click",function(){return n.prevStep()}),e._uU(122),e.ALo(123,"translate"),e.qZA(),e.TgZ(124,"button",13),e.NdJ("click",function(){return n.nextStep()}),e._uU(125),e.ALo(126,"translate"),e.qZA()()(),e.TgZ(127,"mat-expansion-panel",10),e.NdJ("opened",function(){return n.setStep(4)}),e.TgZ(128,"mat-expansion-panel-header")(129,"mat-panel-title"),e._uU(130),e.ALo(131,"translate"),e.qZA(),e.TgZ(132,"mat-panel-description"),e._uU(133),e.ALo(134,"translate"),e.TgZ(135,"mat-icon"),e._uU(136,"date_range"),e.qZA()()(),e.TgZ(137,"h2",35),e._uU(138),e.qZA(),e.TgZ(139,"mat-action-row")(140,"button",18),e.NdJ("click",function(){return n.prevStep()}),e._uU(141),e.ALo(142,"translate"),e.qZA(),e.TgZ(143,"button",13),e.NdJ("click",function(){return n.nextStep()}),e._uU(144),e.ALo(145,"translate"),e.qZA()()(),e.TgZ(146,"mat-expansion-panel",10),e.NdJ("opened",function(){return n.setStep(5)}),e.TgZ(147,"mat-expansion-panel-header")(148,"mat-panel-title"),e._uU(149),e.ALo(150,"translate"),e.qZA(),e.TgZ(151,"mat-panel-description"),e._uU(152),e.ALo(153,"translate"),e.TgZ(154,"mat-icon"),e._uU(155,"date_range"),e.qZA()()(),e.TgZ(156,"div",36)(157,"div",37)(158,"h5",38),e._uU(159),e.ALo(160,"translate"),e.qZA()(),e.TgZ(161,"div",39)(162,"div",40)(163,"input",41),e.NdJ("ngModelChange",function(l){return n.dataModel.isFlash=l}),e.qZA(),e._UZ(164,"label",42),e.qZA()()(),e.TgZ(165,"div",36)(166,"div",37)(167,"h5",43),e._uU(168),e.ALo(169,"translate"),e.qZA()(),e.TgZ(170,"div",39)(171,"div",40)(172,"input",44),e.NdJ("ngModelChange",function(l){return n.dataModel.sendByQeue=l}),e.qZA(),e._UZ(173,"label",45),e.qZA()()(),e.TgZ(174,"mat-action-row")(175,"button",18),e.NdJ("click",function(){return n.prevStep()}),e._uU(176),e.ALo(177,"translate"),e.qZA(),e.TgZ(178,"button",13),e.NdJ("click",function(){return n.nextStep()}),e._uU(179),e.ALo(180,"translate"),e.qZA()()()()(),e.TgZ(181,"div",8)(182,"div",46),e._UZ(183,"div",47),e.TgZ(184,"div",48)(185,"div",20)(186,"label",49),e._uU(187),e.ALo(188,"translate"),e.qZA(),e.TgZ(189,"textarea",50,51),e.NdJ("ngModelChange",function(l){return n.dataModel.message=l}),e.qZA(),e.TgZ(191,"em"),e._uU(192),e.qZA(),e.YNc(193,Se,6,6,"mat-error",52),e.qZA()(),e.TgZ(194,"div",53),e.YNc(195,fe,10,7,"div",54),e.qZA(),e.YNc(196,Ce,3,2,"div",55),e.qZA()()()(),e.YNc(197,Me,1,2,"app-cms-json-list",56),e.qZA()()()),2&o){const a=e.MAs(90),l=e.MAs(99),g=e.MAs(108),f=e.MAs(117),A=e.MAs(190);e.xp6(1),e.Q6J("optionsInfoAreaId",n.constructor.name),e.xp6(3),e.hij(" ",n.formInfo.formTitle," "),e.xp6(2),e.hij(" ",e.lcZ(7,75,"TITLE.Be_Careful_When_Entering_Information")," "),e.xp6(8),e.Q6J("expanded",0===n.step),e.xp6(3),e.hij(" ",e.lcZ(18,77,"TITLE.Direction")," "),e.xp6(3),e.hij(" ",e.lcZ(21,79,"TITLE.Select_the_path_to_send_the_message")," "),e.xp6(4),e.Q6J("optionLoading",n.loading)("optionSelectForce",n.dataModel.linkApiPathId)("optionPlaceholder",e.lcZ(25,81,"TITLE.Direction"))("optionSelectFirstItem",!0),e.xp6(2),e.Q6J("ngIf",(null==n.dataModel.linkApiPathId?null:n.dataModel.linkApiPathId.length)>0),e.xp6(3),e.Oqu(e.lcZ(30,83,"ACTION.NEXT")),e.xp6(2),e.Q6J("expanded",1===n.step),e.xp6(3),e.hij(" ",e.lcZ(35,85,"TITLE.Message_Text")," "),e.xp6(3),e.hij(" ",e.lcZ(38,87,"TITLE.Select_the_text_of_the_default_messages")," "),e.xp6(4),e.Q6J("optionLoading",n.loading),e.xp6(1),e.Q6J("optionLoading",n.loading)("optionLinkCategryId",n.dataMessageCategoryModel.id),e.xp6(1),e.Q6J("ngIf",(null==n.dataMessageContentModel||null==n.dataMessageContentModel.messageBody?null:n.dataMessageContentModel.messageBody.length)>0),e.xp6(1),e.Q6J("ngIf",(null==n.dataMessageContentModel||null==n.dataMessageContentModel.messageBody?null:n.dataMessageContentModel.messageBody.length)>0&&(null==n.dataModel.message?null:n.dataModel.message.length)>0),e.xp6(1),e.Q6J("ngIf",(null==n.dataMessageContentModel||null==n.dataMessageContentModel.messageBody?null:n.dataMessageContentModel.messageBody.length)>0),e.xp6(3),e.Oqu(e.lcZ(49,89,"ACTION.BACK")),e.xp6(3),e.Oqu(e.lcZ(52,91,"ACTION.NEXT")),e.xp6(2),e.Q6J("expanded",2===n.step),e.xp6(3),e.hij(" ",e.lcZ(57,93,"TITLE.Phonebook")," "),e.xp6(3),e.hij(" ",e.lcZ(60,95,"TITLE.Audience_selection")," "),e.xp6(7),e.Oqu(e.lcZ(67,97,"ACTION.BACK")),e.xp6(3),e.Oqu(e.lcZ(70,99,"ACTION.NEXT")),e.xp6(2),e.Q6J("expanded",3===n.step),e.xp6(3),e.hij(" ",e.lcZ(75,101,"TITLE.Shipping_time")," "),e.xp6(3),e.hij(" ",e.lcZ(78,103,"TITLE.Time_to_start_sending_and_finish")," "),e.xp6(8),e.hij(" ",e.lcZ(86,105,"TITLE.postage_date"),""),e.xp6(2),e.Q6J("matDatepicker",a)("ngModel",n.dataModelDateByClockStart.date),e.xp6(1),e.Q6J("for",a),e.xp6(6),e.hij(" ",e.lcZ(95,107,"TITLE.Shipping_time"),""),e.xp6(2),e.Q6J("ngxTimepicker",l)("ngModel",n.dataModelDateByClockStart.clock)("format",24),e.xp6(1),e.Q6J("for",l),e.xp6(6),e.Oqu(e.lcZ(104,109,"TITLE.Delivery_end_date")),e.xp6(2),e.Q6J("matDatepicker",g)("ngModel",n.dataModelDateByClockExpire.date),e.xp6(1),e.Q6J("for",g),e.xp6(6),e.Oqu(e.lcZ(113,111,"TITLE.Send_end_time")),e.xp6(2),e.Q6J("ngxTimepicker",f)("ngModel",n.dataModelDateByClockExpire.clock)("format",24),e.xp6(1),e.Q6J("for",f),e.xp6(4),e.AsE(" ",n.dataModel.scheduleSendStart," >>> ",n.dataModel.scheduleSendExpire," "),e.xp6(3),e.Oqu(e.lcZ(123,113,"ACTION.BACK")),e.xp6(3),e.Oqu(e.lcZ(126,115,"ACTION.NEXT")),e.xp6(2),e.Q6J("expanded",4===n.step),e.xp6(3),e.hij(" ",e.lcZ(131,117,"TITLE.Timing")," "),e.xp6(3),e.hij(" ",e.lcZ(134,119,"TITLE.Retry_schedule")," "),e.xp6(5),e.hij("Resulting Cron: ",n.dataModel.scheduleCron,""),e.xp6(3),e.Oqu(e.lcZ(142,121,"ACTION.BACK")),e.xp6(3),e.Oqu(e.lcZ(145,123,"ACTION.NEXT")),e.xp6(2),e.Q6J("expanded",5===n.step),e.xp6(3),e.hij(" ",e.lcZ(150,125,"TITLE.Settings")," "),e.xp6(3),e.hij(" ",e.lcZ(153,127,"TITLE.Send_settings")," "),e.xp6(7),e.hij(" ",e.lcZ(160,129,"TITLE.Send_as_flash"),""),e.xp6(4),e.Q6J("ngModel",n.dataModel.isFlash),e.xp6(5),e.hij(" ",e.lcZ(169,131,"TITLE.Send_in_queue"),""),e.xp6(4),e.Q6J("ngModel",n.dataModel.sendByQeue),e.xp6(4),e.Oqu(e.lcZ(177,133,"ACTION.BACK")),e.xp6(3),e.Oqu(e.lcZ(180,135,"ACTION.END")),e.xp6(8),e.Oqu(e.lcZ(188,137,"TITLE.Message_Text")),e.xp6(2),e.Q6J("ngModel",n.dataModel.message),e.xp6(3),e.hij("",A.value.length," / 500"),e.xp6(1),e.Q6J("ngIf",null==A.errors?null:A.errors.required),e.xp6(2),e.Q6J("ngIf",!(n.dataModel.toContactCategories&&0!==(null==n.dataModel.toContactCategories?null:n.dataModel.toContactCategories.length)||n.dataModel.toContactContents&&0!==(null==n.dataModel.toContactContents?null:n.dataModel.toContactContents.length))),e.xp6(1),e.Q6J("ngIf",n.formInfo.formSubmitAllow&&!(null!=n.loading&&n.loading.display)),e.xp6(1),e.Q6J("ngIf",null==n.dataModelResult?null:n.dataModelResult.item)}},dependencies:[r.O5,p._Y,p.Fj,p.Wl,p.JJ,p.JL,p.wO,p.nD,p.On,p.F,d.Mq,d.hl,d.nW,h.pp,h.ib,h.VG,h.yz,h.yK,h.u4,S.TO,S.R9,T.Hw,O.Nt,H.I,B.O,Y.v,te,oe.s,ne.y,ae.b,ce,E.ro,E.mr,E.I2,M.X$],styles:[".form-body[_ngcontent-%COMP%]{width:500px}@media (max-width: 700px){.form-body[_ngcontent-%COMP%]{display:contents}}#file-manager[_ngcontent-%COMP%]{width:calc(100vw - 16px);height:calc(100vh - 16px)}.recordStatus-1.mat-select-panel[_ngcontent-%COMP%]{background:yellow}.recordStatus-2.mat-select-panel[_ngcontent-%COMP%]{background:black}.recordStatus-3.mat-select-panel[_ngcontent-%COMP%]{background:red}.mat-tab-group[_ngcontent-%COMP%]{height:95%}.message-box[_ngcontent-%COMP%]{background-image:url(/assets/media/bg/iphone.png);height:600px;width:300px;background-position:center;background-repeat:no-repeat;background-size:cover;padding-right:33px;padding-left:33px}.message-box-button[_ngcontent-%COMP%]{color:#00f;border-color:transparent;background-color:transparent}.message-box-button[_ngcontent-%COMP%]:hover{color:red;font-size:initial}.message-box-button[_ngcontent-%COMP%]:active{color:#a200ff}"]})}return i})();function Te(i,m){if(1&i&&(e.TgZ(0,"mat-option",7)(1,"span"),e._uU(2),e.qZA()()),2&i){const t=m.$implicit,o=e.oxw();e.Q6J("value",t)("disabled",o.optionDisabled),e.xp6(2),e.Oqu(o.displayPathOption(t))}}function be(i,m){if(1&i){const t=e.EpF();e.TgZ(0,"mat-icon",8),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.onActionSelectClearPath())}),e._uU(1,"close"),e.qZA()}}function ve(i,m){if(1&i&&(e.TgZ(0,"mat-option",7)(1,"span"),e._uU(2),e.qZA()()),2&i){const t=m.$implicit,o=e.oxw();e.Q6J("value",t)("disabled",o.optionDisabled),e.xp6(2),e.Oqu(o.displayNumberOption(t))}}function ye(i,m){if(1&i){const t=e.EpF();e.TgZ(0,"mat-icon",8),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.onActionSelectClearNumber())}),e._uU(1,"close"),e.qZA()}}const Ze=["*"],xe=[{path:"",component:(()=>{class i{constructor(){}ngOnInit(){}static \u0275fac=function(o){return new(o||i)};static \u0275cmp=e.Xpm({type:i,selectors:[["app-sms-action"]],decls:1,vars:0,template:function(o,n){1&o&&e._UZ(0,"router-outlet")},dependencies:[v.lC],encapsulation:2})}return i})(),children:[{path:"send-message",component:R},{path:"send-message/inbox-extras",component:R},{path:"send-message/outbox-extras",component:R},{path:"send-api",component:(()=>{class i{coreEnumService;cmsToastrService;cdr;publicHelper;translate;pathService;numberService;static nextId=0;id=++i.nextId;constructor(t,o,n,a,l,g,f){this.coreEnumService=t,this.cmsToastrService=o,this.cdr=n,this.publicHelper=a,this.translate=l,this.pathService=g,this.numberService=f,this.publicHelper.processService.cdr=this.cdr,this.translate.get("MESSAGE.Receiving_information").subscribe(A=>{this.loading.message=A})}dataPathModelResult=new s.y$4;dataNumberModelResult=new s.y$4;dataPathModelSelect=new s.lWT;dataNumberModelSelect=new s.FEG;loading=new y.O;get optionLoading(){return this.loading}set optionLoading(t){this.loading=t}formPathControl=new p.NI;formNumberControl=new p.NI;filteredPathOptions;filteredNumberOptions;optionDisabled=!1;optionSelectFirstItem=!1;optionPlaceholder="";optionPathChange=new e.vpe;optionNumberChange=new e.vpe;optionReload=()=>this.onActionButtonReload();set optionSelectPathForce(t){this.onActionSelectPathForce(t)}set optionSelectNumberForce(t){this.onActionSelectNumberForce(t)}ngOnInit(){this.loadOptions()}loadOptions(){this.filteredPathOptions=this.formPathControl.valueChanges.pipe((0,D.O)(""),(0,J.b)(1500),(0,F.x)(),(0,w.w)(t=>"string"==typeof t?this.DataPathGetAll(t||""):[])),this.filteredNumberOptions=this.formNumberControl.valueChanges.pipe((0,D.O)(""),(0,J.b)(1500),(0,F.x)(),(0,w.w)(t=>"string"==typeof t?this.DataNumberGetAll(t||""):[]))}displayPathFn(t){return t?t.title:void 0}displayNumberFn(t){return t?t.numberChar:void 0}displayPathOption(t){return t?t.title:void 0}displayNumberOption(t){return t?t.numberChar:void 0}DataPathGetAll(t){var o=this;return(0,C.Z)(function*(){const n=new s.Hay;n.rowPerPage=20,n.accessLoad=!0;let a=new s.AO3;return a.propertyName="Title",a.value=t,a.searchType=s.J6G.Contains,a.clauseType=s.ppe.Or,n.filters.push(a),t&&"number"==typeof+t&&+t>0&&(a=new s.AO3,a.propertyName="Id",a.value=t,a.searchType=s.J6G.Equal,a.clauseType=s.ppe.Or,n.filters.push(a)),o.publicHelper.processService.processStart("DataPathGetAll"),yield(0,P.z)(o.pathService.ServiceGetAll(n)).then(l=>(o.dataPathModelResult=l,o.optionSelectFirstItem&&(!o.dataPathModelSelect||!o.dataPathModelSelect.id||o.dataPathModelSelect.id.length<=0)&&o.dataPathModelResult.listItems.length>0&&(o.optionSelectFirstItem=!1,setTimeout(()=>{o.formPathControl.setValue(o.dataPathModelResult.listItems[0])},1e3),o.onActionSelectPath(o.dataPathModelResult.listItems[0])),o.publicHelper.processService.processStop("DataPathGetAll"),l.listItems))})()}DataNumberGetAll(t){var o=this;return(0,C.Z)(function*(){const n=new s.Hay;n.rowPerPage=20,n.accessLoad=!0;let a=new s.AO3;return a.propertyName="Title",a.value=t,a.searchType=s.J6G.Contains,a.clauseType=s.ppe.Or,n.filters.push(a),t&&"number"==typeof+t&&+t>0&&(a=new s.AO3,a.propertyName="Id",a.value=t,a.searchType=s.J6G.Equal,a.clauseType=s.ppe.Or,n.filters.push(a)),o.publicHelper.processService.processStart("DataNumberGetAll"),yield(0,P.z)(o.numberService.ServiceGetAll(n)).then(l=>(o.dataNumberModelResult=l,o.optionSelectFirstItem&&(!o.dataNumberModelSelect||!o.dataNumberModelSelect.id||o.dataNumberModelSelect.id.length<=0)&&o.dataNumberModelResult.listItems.length>0&&(o.optionSelectFirstItem=!1,setTimeout(()=>{o.formNumberControl.setValue(o.dataNumberModelResult.listItems[0])},1e3),o.onActionSelectNumber(o.dataNumberModelResult.listItems[0])),o.publicHelper.processService.processStop("DataNumberGetAll"),l.listItems))})()}onActionSelectPath(t){this.optionDisabled||(this.dataPathModelSelect=t,this.optionPathChange.emit(this.dataPathModelSelect))}onActionSelectNumber(t){this.optionDisabled||(this.dataNumberModelSelect=t,this.optionNumberChange.emit(this.dataNumberModelSelect))}onActionSelectClearPath(){this.optionDisabled||(this.formPathControl.setValue(null),this.optionPathChange.emit(null))}onActionSelectClearNumber(){this.optionDisabled||(this.formNumberControl.setValue(null),this.optionNumberChange.emit(null))}pushPath(t){return this.filteredPathOptions.pipe((0,U.U)(o=>(o.find(n=>n.id===t.id)||o.push(t),o)))}pushNumber(t){return this.filteredNumberOptions.pipe((0,U.U)(o=>(o.find(n=>n.id===t.id)||o.push(t),o)))}onActionSelectPathForce(t){if("string"==typeof t&&t.length>0){if(this.dataPathModelSelect&&this.dataPathModelSelect.id===t)return;if(this.dataPathModelResult&&this.dataPathModelResult.listItems&&this.dataPathModelResult.listItems.find(o=>o.id===t)){const o=this.dataPathModelResult.listItems.find(n=>n.id===t);return this.dataPathModelSelect=o,void this.formPathControl.setValue(o)}this.pathService.ServiceGetOneById(t).subscribe({next:o=>{o.isSuccess?(this.filteredPathOptions=this.pushPath(o.item),this.dataPathModelSelect=o.item,this.formPathControl.setValue(o.item),this.optionPathChange.emit(o.item)):this.cmsToastrService.typeErrorMessage(o.errorMessage)}})}else{if(typeof t==typeof s.lWT)return this.filteredPathOptions=this.pushPath(t),this.dataPathModelSelect=t,void this.formPathControl.setValue(t);this.formPathControl.setValue(null)}}onActionSelectNumberForce(t){if("string"==typeof t&&t.length>0){if(this.dataNumberModelSelect&&this.dataNumberModelSelect.id===t)return;if(this.dataNumberModelResult&&this.dataNumberModelResult.listItems&&this.dataNumberModelResult.listItems.find(o=>o.id===t)){const o=this.dataNumberModelResult.listItems.find(n=>n.id===t);return this.dataNumberModelSelect=o,void this.formNumberControl.setValue(o)}this.numberService.ServiceGetOneById(t).subscribe({next:o=>{o.isSuccess?(this.filteredNumberOptions=this.pushNumber(o.item),this.dataNumberModelSelect=o.item,this.formNumberControl.setValue(o.item),this.optionNumberChange.emit(o.item)):this.cmsToastrService.typeErrorMessage(o.errorMessage)}})}else{if(typeof t==typeof s.FEG)return this.filteredNumberOptions=this.pushNumber(t),this.dataNumberModelSelect=t,void this.formNumberControl.setValue(t);this.formNumberControl.setValue(null)}}onActionButtonReload(){this.dataPathModelSelect=new s.lWT,this.dataNumberModelSelect=new s.FEG,this.DataPathGetAll(null)}static \u0275fac=function(o){return new(o||i)(e.Y36(s.FLW),e.Y36(Z.e),e.Y36(e.sBO),e.Y36(x.i),e.Y36(M.sK),e.Y36(s.sZP),e.Y36(s.cPv))};static \u0275cmp=e.Xpm({type:i,selectors:[["app-sms-action-send-message-api"]],inputs:{optionLoading:"optionLoading",optionDisabled:"optionDisabled",optionSelectFirstItem:"optionSelectFirstItem",optionPlaceholder:"optionPlaceholder",optionReload:"optionReload",optionSelectPathForce:"optionSelectPathForce",optionSelectNumberForce:"optionSelectNumberForce"},outputs:{optionPathChange:"optionPathChange",optionNumberChange:"optionNumberChange"},ngContentSelectors:Ze,decls:23,vars:32,consts:[[1,"input-style","has-borders","no-icon","input-style-always-active","validate-field","mb-4"],[1,"color-highlight",3,"for"],["type","text","aria-label","Assignee","matInput","",1,"form-control","validate-name",3,"placeholder","id","formControl","matAutocomplete"],[3,"displayWith","optionSelected"],["matauto","matAutocomplete"],[3,"value","disabled",4,"ngFor","ngForOf"],["matSuffix","","matSuffix","","mat-icon-button","","aria-label","Clear",3,"click",4,"ngIf"],[3,"value","disabled"],["matSuffix","","matSuffix","","mat-icon-button","","aria-label","Clear",3,"click"]],template:function(o,n){if(1&o&&(e.F$t(),e.TgZ(0,"div",0)(1,"label",1),e._uU(2),e.ALo(3,"translate"),e.qZA(),e._UZ(4,"input",2),e.ALo(5,"translate"),e.TgZ(6,"mat-autocomplete",3,4),e.NdJ("optionSelected",function(l){return n.onActionSelectPath(l.option.value)}),e.YNc(8,Te,3,3,"mat-option",5),e.ALo(9,"async"),e.qZA(),e.YNc(10,be,2,0,"mat-icon",6),e.qZA(),e.TgZ(11,"div",0)(12,"label",1),e._uU(13),e.ALo(14,"translate"),e.qZA(),e._UZ(15,"input",2),e.ALo(16,"translate"),e.TgZ(17,"mat-autocomplete",3,4),e.NdJ("optionSelected",function(l){return n.onActionSelectNumber(l.option.value)}),e.YNc(19,ve,3,3,"mat-option",5),e.ALo(20,"async"),e.qZA(),e.YNc(21,ye,2,0,"mat-icon",6),e.qZA(),e.Hsn(22)),2&o){const a=e.MAs(7);e.xp6(1),e.MGl("for","app-sms-action-send-message-api-",n.id,""),e.xp6(1),e.Oqu(e.lcZ(3,20,"TITLE.sending_route")),e.xp6(2),e.s9C("placeholder",e.lcZ(5,22,"TITLE.sending_route")),e.MGl("id","app-sms-action-send-message-api-",n.id,""),e.Q6J("formControl",n.formPathControl)("matAutocomplete",a),e.uIk("disabled",!!n.optionDisabled||null),e.xp6(2),e.Q6J("displayWith",n.displayPathFn),e.xp6(2),e.Q6J("ngForOf",e.lcZ(9,24,n.filteredPathOptions)),e.xp6(2),e.Q6J("ngIf",n.dataPathModelSelect.id),e.xp6(2),e.MGl("for","app-sms-action-send-message-api-n-",n.id,""),e.xp6(1),e.Oqu(e.lcZ(14,26,"TITLE.sending_route")),e.xp6(2),e.s9C("placeholder",e.lcZ(16,28,"TITLE.No")),e.MGl("id","app-sms-action-send-message-api-n-",n.id,""),e.Q6J("formControl",n.formNumberControl)("matAutocomplete",a),e.uIk("disabled",!!n.optionDisabled||null),e.xp6(2),e.Q6J("displayWith",n.displayNumberFn),e.xp6(2),e.Q6J("ngForOf",e.lcZ(20,30,n.filteredNumberOptions)),e.xp6(2),e.Q6J("ngIf",n.dataNumberModelSelect.id)}},dependencies:[r.sg,r.O5,p.Fj,p.JJ,p.oH,L.XC,q.ey,L.ZL,S.R9,T.Hw,O.Nt,r.Ov,M.X$],encapsulation:2})}return i})()}]}];let ke=(()=>{class i{static \u0275fac=function(o){return new(o||i)};static \u0275mod=e.oAB({type:i});static \u0275inj=e.cJS({imports:[v.Bz.forChild(xe),v.Bz]})}return i})();var Ie=c(4592),Ne=c(707),Le=c(3914),Ee=c(4586),Oe=c(5103);let Pe=(()=>{class i{static \u0275fac=function(o){return new(o||i)};static \u0275mod=e.oAB({type:i});static \u0275inj=e.cJS({providers:[s.EAm,s.FLW,s.Z8z,Le.s,s.dF2,s.sZP,s.buc,s.GrT],imports:[r.ez,M.aw,ke,p.u5,p.UX.withConfig({warnOnNgModelWithFormControl:"never"}),Ie.m,Ee.SmsMainModule,E.rK,T.Ps,S.lN,Ne.T5,Oe.r]})}return i})()},7529:(Q,N,c)=>{c.d(N,{I:()=>M});var r=c(4537),v=c(8832),C=c(8692),s=c(8697);const y=["progressSpinnerRef"];function e(u,p){if(1&u&&(r.TgZ(0,"ul",5)(1,"li")(2,"span",6),r._UZ(3,"i",7),r.qZA(),r._uU(4),r.qZA()()),2&u){const d=p.$implicit;r.xp6(3),r.Q6J("ngClass",d.value.inRun?"fas fa-spinner fa-pulse":"fas fa-check-square"),r.xp6(1),r.hij("",d.value.title," ")}}function Z(u,p){if(1&u&&(r._UZ(0,"mat-progress-spinner",3)(1,"br"),r.TgZ(2,"div"),r._uU(3),r._UZ(4,"br"),r.YNc(5,e,5,2,"ul",4),r.ALo(6,"keyvalue"),r.qZA()),2&u){const d=r.oxw();r.Q6J("color",d.optionsData.color)("diameter",d.optionsData.diameter)("mode",d.optionsData.mode)("strokeWidth",d.optionsData.strokeWidth)("value",d.optionsData.value),r.xp6(3),r.hij("",d.optionsData.message," "),r.xp6(2),r.Q6J("ngForOf",r.lcZ(6,7,d.optionsData.processInfoAll))}}function x(u,p){if(1&u&&(r.TgZ(0,"div",8),r._UZ(1,"mat-progress-spinner",3)(2,"br"),r.TgZ(3,"div"),r._uU(4),r.qZA()()),2&u){const d=r.oxw();r.xp6(1),r.Q6J("color",d.optionsData.color)("diameter",d.optionsData.diameter)("mode",d.optionsData.mode)("strokeWidth",d.optionsData.strokeWidth)("value",d.optionsData.value),r.xp6(3),r.Oqu(d.optionsData.message)}}let M=(()=>{class u{vcRef;overlayService;static nextId=0;id=++u.nextId;set options(d){this.optionsData=d}get options(){return this.optionsData}optionsData;progressSpinnerRef;progressSpinnerOverlayConfig;overlayRef;constructor(d,h){this.vcRef=d,this.overlayService=h}ngOnInit(){!this.optionsData||!this.optionsData.Globally||(this.progressSpinnerOverlayConfig={hasBackdrop:this.optionsData.backdropEnabled},this.optionsData.positionGloballyCenter&&(this.progressSpinnerOverlayConfig.positionStrategy=this.overlayService.positionGloballyCenter()),this.overlayRef=this.overlayService.createOverlay(this.progressSpinnerOverlayConfig))}ngDoCheck(){!this.optionsData||!this.optionsData.Globally||(this.optionsData.display&&!this.overlayRef.hasAttached()?(this.overlayService.attachTemplatePortal(this.overlayRef,this.progressSpinnerRef,this.vcRef),this.optionsData&&this.optionsData.cdr&&this.optionsData.cdr.detectChanges()):!this.optionsData.display&&this.overlayRef.hasAttached()&&this.overlayRef.detach())}static \u0275fac=function(h){return new(h||u)(r.Y36(r.s_b),r.Y36(v.F))};static \u0275cmp=r.Xpm({type:u,selectors:[["cms-progress-spinner"]],viewQuery:function(h,S){if(1&h&&r.Gf(y,7),2&h){let T;r.iGM(T=r.CRH())&&(S.progressSpinnerRef=T.first)}},inputs:{options:"options"},decls:3,vars:1,consts:[["class","message"],["progressSpinnerRef",""],["class","message",4,"ngIf"],[3,"color","diameter","mode","strokeWidth","value"],["class","fa-ul",4,"ngFor","ngForOf"],[1,"fa-ul"],[1,"fa-li"],[3,"ngClass"],[1,"message"]],template:function(h,S){1&h&&(r.YNc(0,Z,7,9,"ng-template",0,1,r.W1O),r.YNc(2,x,5,6,"div",2)),2&h&&(r.xp6(2),r.Q6J("ngIf",!S.optionsData.Globally&&S.optionsData.display))},dependencies:[C.mk,C.sg,C.O5,s.Ou,C.Nd],styles:[".message[_ngcontent-%COMP%]{position:absolute;text-align:center;top:49%;left:44%}"]})}return u})()}}]);