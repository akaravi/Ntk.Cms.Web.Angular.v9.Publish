"use strict";(self.webpackChunkntk_cms_web=self.webpackChunkntk_cms_web||[]).push([[7899],{7899:(K,g,s)=>{s.r(g),s.d(g,{CoreMainActionModule:()=>G});var f=s(8692),l=s(92),h=s(8659),_=s(3331),A=s(707),C=s(4079),Z=s(8908),r=s(4511),b=s(3914),x=s(4592),p=s(6114),e=s(4537);let S=(()=>{class n{constructor(){}ngOnInit(){}static \u0275fac=function(i){return new(i||n)};static \u0275cmp=e.Xpm({type:n,selectors:[["app-core-main-action"]],decls:1,vars:0,template:function(i,t){1&i&&e._UZ(0,"router-outlet")},dependencies:[p.lC],encapsulation:2})}return n})();var v=s(8239),M=s(656),N=s(2607),y=s(4032),T=s(6707),d=s(7914),I=s(9665),L=s(7529),E=s(5738);const O=["vform"],w=["Message"];function U(n,u){if(1&n){const o=e.EpF();e.TgZ(0,"textarea",30),e.NdJ("ngModelChange",function(t){e.CHM(o);const a=e.oxw();return e.KtG(a.dataMessageContentModel.messageBody=t)}),e._uU(1,"                  "),e.qZA()}if(2&n){const o=e.oxw();e.Q6J("ngModel",o.dataMessageContentModel.messageBody)}}function J(n,u){if(1&n){const o=e.EpF();e.TgZ(0,"button",31),e.NdJ("click",function(){e.CHM(o);const t=e.oxw();return e.KtG(t.onActionMessageContentAdd())}),e._UZ(1,"i",32),e._uU(2),e.ALo(3,"translate"),e.qZA()}2&n&&(e.xp6(2),e.hij(" ",e.lcZ(3,1,"TITLE.Added_to_the_text")," "))}function k(n,u){if(1&n){const o=e.EpF();e.TgZ(0,"button",31),e.NdJ("click",function(){e.CHM(o);const t=e.oxw();return e.KtG(t.onActionMessageContentNew())}),e._UZ(1,"i",32),e._uU(2),e.ALo(3,"translate"),e.qZA()}2&n&&(e.xp6(2),e.hij(" ",e.lcZ(3,1,"TITLE.Message_Text")," "))}function q(n,u){1&n&&(e.TgZ(0,"mat-error"),e._uU(1),e.ALo(2,"translate"),e.TgZ(3,"strong"),e._uU(4),e.ALo(5,"translate"),e.qZA()()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,2,"TITLE.Message_Text")," "),e.xp6(3),e.Oqu(e.lcZ(5,4,"content.required")))}function B(n,u){if(1&n&&(e.TgZ(0,"button",36),e._UZ(1,"i",37),e._uU(2),e.ALo(3,"translate"),e.qZA()),2&n){e.oxw(2);const o=e.MAs(9);e.Q6J("disabled",!o.valid),e.xp6(2),e.hij(" ",e.lcZ(3,2,"ACTION.Send_Message")," ")}}function j(n,u){if(1&n&&(e.TgZ(0,"div",33),e._UZ(1,"cms-progress-spinner",34),e.YNc(2,B,4,4,"button",35),e.qZA()),2&n){const o=e.oxw();e.xp6(1),e.Q6J("options",o.loadingAction),e.xp6(1),e.Q6J("ngIf",!o.loading.display)}}let m=(()=>{class n{coreEnumService;coreTokenNotificationService;activatedRoute;cmsToastrService;cdr;publicHelper;translate;router;constructor(o,i,t,a,c,Y,P,R){this.coreEnumService=o,this.coreTokenNotificationService=i,this.activatedRoute=t,this.cmsToastrService=a,this.cdr=c,this.publicHelper=Y,this.translate=P,this.router=R,this.publicHelper.processService.cdr=this.cdr,this.translate.get("MESSAGE.Receiving_information").subscribe(H=>{this.loading.message=H}),this.loadingAction.cdr=this.cdr}formGroup;message;loading=new M.O;loadingAction=new M.O;dataModelParentSelected=new r.lWT;dataModel=new r.OM3;dataModelResult=new r.y$4;formInfo=new r.LEF;clipboardText="";isCronDisabled=!1;cronOptions={formInputClass:"form-control cron-editor-input",formSelectClass:"form-control cron-editor-select",formRadioClass:"cron-editor-radio",formCheckboxClass:"cron-editor-checkbox",defaultTime:"10:00:00",use24HourTime:!0,hideMinutesTab:!1,hideHourlyTab:!1,hideDailyTab:!1,hideWeeklyTab:!1,hideMonthlyTab:!1,hideYearlyTab:!1,hideAdvancedTab:!1,hideSeconds:!0,removeSeconds:!0,removeYears:!0};ngOnInit(){}readClipboardFromDevTools(){return new Promise((o,i)=>{const t=function(){var a=(0,v.Z)(function*(){try{const c=yield navigator.clipboard.readText();o(c)}catch(c){i(c)}window.removeEventListener("focus",t)});return function(){return a.apply(this,arguments)}}();window.addEventListener("focus",t),console.log("Hit <Tab> to give focus back to document (or we will face a DOMException);")})}onActionMessageLTR(){this.message.nativeElement.style.direction="ltr",this.message.nativeElement.style.textAlign="left"}onActionMessageRTL(){this.message.nativeElement.style.direction="rtl",this.message.nativeElement.style.textAlign="right"}dataMessageCategoryModel=new r._fd;onActionSelectMessageCategory(o){this.dataMessageCategoryModel=o&&o.id.length>0?o:new r._fd}dataMessageContentModel=new r.Lnx;onActionSelectMessageContent(o){this.dataMessageContentModel=o&&o.id.length>0?o:new r.Lnx}onActionMessageContentAdd(){this.dataMessageContentModel?.messageBody?.length>0?this.dataModel.content.length>0&&(this.dataModel.content=this.dataModel.content+" "+this.dataMessageContentModel.messageBody):this.dataModel.content=this.dataMessageContentModel.messageBody}onActionMessageContentNew(){this.dataMessageContentModel?.messageBody?.length>0&&(this.dataModel.content=this.dataMessageContentModel.messageBody)}onFormSubmit(){if(!this.formGroup.valid)return;this.formInfo.formSubmitAllow=!1;const o=this.constructor.name+"main";this.loadingAction.Start(o),this.formInfo.formAlert="",this.formInfo.formError="",this.coreTokenNotificationService.ServiceSendNotification(this.dataModel).subscribe({next:i=>{this.formInfo.formSubmitAllow=!0,this.dataModelResult=i,i.isSuccess?(this.formInfo.formAlert=this.translate.instant("MESSAGE.Submit_request_was_successfully_registered"),this.cmsToastrService.typeSuccessMessage(this.translate.instant("MESSAGE.Send_request_was_successfully_registered"))):(this.translate.get("ERRORMESSAGE.MESSAGE.typeError").subscribe(t=>{this.formInfo.formAlert=t}),this.formInfo.formError=i.errorMessage,this.cmsToastrService.typeErrorMessage(i.errorMessage)),this.loadingAction.Stop(o)},error:i=>{this.formInfo.formSubmitAllow=!0,this.cmsToastrService.typeError(i),this.loadingAction.Stop(o)},complete:()=>{}})}step=0;setStep(o){this.step=o}nextStep(){this.step++}prevStep(){this.step--}static \u0275fac=function(i){return new(i||n)(e.Y36(r.FLW),e.Y36(r.Ozq),e.Y36(p.gz),e.Y36(N.e),e.Y36(e.sBO),e.Y36(y.i),e.Y36(T.sK),e.Y36(p.F0))};static \u0275cmp=e.Xpm({type:n,selectors:[["app-core-main-action-send-notification"]],viewQuery:function(i,t){if(1&i&&(e.Gf(O,5),e.Gf(w,5)),2&i){let a;e.iGM(a=e.CRH())&&(t.formGroup=a.first),e.iGM(a=e.CRH())&&(t.message=a.first)}},decls:141,vars:94,consts:[[1,"card","card-style","progressOverlayContainer"],[3,"optionsInfoAreaId"],[1,"content","mb-0"],[1,"mb-0","color-highlight","font-600","font-12"],[3,"ngSubmit"],["vform","ngForm"],[1,"ntk-cms-html-card-body"],[1,"row"],[1,"col-6"],[1,"example-headers-align"],["hideToggle","",3,"expanded","opened"],["type","button",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-blue",3,"click"],["matInput","","name","dataMessageContentModel.messageBody","type","text","rows","10","id","dataMessageContentModel.messageBody",3,"ngModel","ngModelChange",4,"ngIf"],["type","button","class","btn font-13 font-600 btn-s m-1 rounded-s shadow-xl border-0 gradient-gray",3,"click",4,"ngIf"],["type","button",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-teal",3,"click"],[1,"d-flex","mb-3"],[1,"pt-1"],["data-trigger-switch","dataModel.sendToAll",1,"font-600","font-14"],[1,"ms-auto","me-3","pe-2"],[1,"custom-control","ios-switch","small-switch"],["type","checkbox","id","dataModel.sendToAll","name","dataModel.sendToAll",1,"ios-input",3,"ngModel","ngModelChange"],["for","dataModel.sendToAll",1,"custom-control-label"],[1,"message-box"],[1,"row",2,"height","300px"],[1,"input-style","has-borders","no-icon","input-style-always-active","validate-field","mb-4"],["for","dataModel.content",1,"color-highlight"],["matInput","","name","dataModel.content","type","text","placeholder","...","minlength","1","maxlength","500","rows","9","id","dataModel.content",1,"form-control","validate-name",3,"ngModel","ngModelChange"],["content",""],[4,"ngIf"],["class","row","style","height:140px;bottom: 4vh;justify-content: center;",4,"ngIf"],["matInput","","name","dataMessageContentModel.messageBody","type","text","rows","10","id","dataMessageContentModel.messageBody",3,"ngModel","ngModelChange"],["type","button",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-gray",3,"click"],[1,"ft-x"],[1,"row",2,"height","140px","bottom","4vh","justify-content","center"],[3,"options"],["type","submit","class","message-box-button","class","btn font-13 font-600 btn-s m-1 rounded-s shadow-xl border-0 gradient-highlight",3,"disabled",4,"ngIf"],["type","submit",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-highlight",3,"disabled"],[1,"fa","fa-check-square-o"]],template:function(i,t){if(1&i&&(e.TgZ(0,"div",0),e._UZ(1,"app-progress-spinner",1),e.TgZ(2,"div",2)(3,"p",3),e._uU(4," \u062d\u0633\u0627\u0628 \u06a9\u0627\u0631\u0628\u0631\u06cc \u062e\u0648\u062f \u0631\u0627 \u0648\u06cc\u0631\u0627\u06cc\u0634 \u06a9\u0646\u06cc\u062f "),e.qZA(),e.TgZ(5,"p"),e._uU(6),e.ALo(7,"translate"),e.qZA(),e.TgZ(8,"form",4,5),e.NdJ("ngSubmit",function(){return t.onFormSubmit()}),e._uU(10),e.TgZ(11,"div",6)(12,"div",7)(13,"div",8)(14,"mat-accordion",9)(15,"mat-expansion-panel",10),e.NdJ("opened",function(){return t.setStep(0)}),e.TgZ(16,"mat-expansion-panel-header")(17,"mat-panel-title"),e._uU(18),e.ALo(19,"translate"),e.qZA(),e.TgZ(20,"mat-panel-description"),e._uU(21),e.ALo(22,"translate"),e.TgZ(23,"mat-icon"),e._uU(24,"account_circle"),e.qZA()()(),e.TgZ(25,"mat-action-row")(26,"button",11),e.NdJ("click",function(){return t.nextStep()}),e._uU(27),e.ALo(28,"translate"),e.qZA()()(),e.TgZ(29,"mat-expansion-panel",10),e.NdJ("opened",function(){return t.setStep(1)}),e.TgZ(30,"mat-expansion-panel-header")(31,"mat-panel-title"),e._uU(32),e.ALo(33,"translate"),e.qZA(),e.TgZ(34,"mat-panel-description"),e._uU(35),e.ALo(36,"translate"),e.TgZ(37,"mat-icon"),e._uU(38,"map"),e.qZA()()(),e.YNc(39,U,2,1,"textarea",12),e.YNc(40,J,4,3,"button",13),e.YNc(41,k,4,3,"button",13),e.TgZ(42,"mat-action-row")(43,"button",14),e.NdJ("click",function(){return t.prevStep()}),e._uU(44),e.ALo(45,"translate"),e.qZA(),e.TgZ(46,"button",11),e.NdJ("click",function(){return t.nextStep()}),e._uU(47),e.ALo(48,"translate"),e.qZA()()(),e.TgZ(49,"mat-expansion-panel",10),e.NdJ("opened",function(){return t.setStep(2)}),e.TgZ(50,"mat-expansion-panel-header")(51,"mat-panel-title"),e._uU(52),e.ALo(53,"translate"),e.qZA(),e.TgZ(54,"mat-panel-description"),e._uU(55),e.ALo(56,"translate"),e.TgZ(57,"mat-icon"),e._uU(58,"date_range"),e.qZA()()(),e.TgZ(59,"mat-action-row")(60,"button",14),e.NdJ("click",function(){return t.prevStep()}),e._uU(61),e.ALo(62,"translate"),e.qZA(),e.TgZ(63,"button",11),e.NdJ("click",function(){return t.nextStep()}),e._uU(64),e.ALo(65,"translate"),e.qZA()()(),e.TgZ(66,"mat-expansion-panel",10),e.NdJ("opened",function(){return t.setStep(3)}),e.TgZ(67,"mat-expansion-panel-header")(68,"mat-panel-title"),e._uU(69),e.ALo(70,"translate"),e.qZA(),e.TgZ(71,"mat-panel-description"),e._uU(72),e.ALo(73,"translate"),e.TgZ(74,"mat-icon"),e._uU(75,"date_range"),e.qZA()()(),e._UZ(76,"div",7)(77,"hr"),e.TgZ(78,"mat-action-row")(79,"button",14),e.NdJ("click",function(){return t.prevStep()}),e._uU(80),e.ALo(81,"translate"),e.qZA(),e.TgZ(82,"button",11),e.NdJ("click",function(){return t.nextStep()}),e._uU(83),e.ALo(84,"translate"),e.qZA()()(),e.TgZ(85,"mat-expansion-panel",10),e.NdJ("opened",function(){return t.setStep(4)}),e.TgZ(86,"mat-expansion-panel-header")(87,"mat-panel-title"),e._uU(88),e.ALo(89,"translate"),e.qZA(),e.TgZ(90,"mat-panel-description"),e._uU(91),e.ALo(92,"translate"),e.TgZ(93,"mat-icon"),e._uU(94,"date_range"),e.qZA()()(),e.TgZ(95,"mat-action-row")(96,"button",14),e.NdJ("click",function(){return t.prevStep()}),e._uU(97),e.ALo(98,"translate"),e.qZA(),e.TgZ(99,"button",11),e.NdJ("click",function(){return t.nextStep()}),e._uU(100),e.ALo(101,"translate"),e.qZA()()(),e.TgZ(102,"mat-expansion-panel",10),e.NdJ("opened",function(){return t.setStep(5)}),e.TgZ(103,"mat-expansion-panel-header")(104,"mat-panel-title"),e._uU(105),e.ALo(106,"translate"),e.qZA(),e.TgZ(107,"mat-panel-description"),e._uU(108),e.ALo(109,"translate"),e.TgZ(110,"mat-icon"),e._uU(111,"date_range"),e.qZA()()(),e.TgZ(112,"div",15)(113,"div",16)(114,"h5",17),e._uU(115),e.ALo(116,"translate"),e.qZA()(),e.TgZ(117,"div",18)(118,"div",19)(119,"input",20),e.NdJ("ngModelChange",function(c){return t.dataModel.sendToAll=c}),e.qZA(),e._UZ(120,"label",21),e.qZA()()(),e.TgZ(121,"mat-action-row")(122,"button",14),e.NdJ("click",function(){return t.prevStep()}),e._uU(123),e.ALo(124,"translate"),e.qZA(),e.TgZ(125,"button",11),e.NdJ("click",function(){return t.nextStep()}),e._uU(126),e.ALo(127,"translate"),e.qZA()()()()(),e.TgZ(128,"div",8)(129,"div",22)(130,"div",23)(131,"div",24)(132,"label",25),e._uU(133),e.ALo(134,"translate"),e.qZA(),e.TgZ(135,"textarea",26,27),e.NdJ("ngModelChange",function(c){return t.dataModel.content=c}),e.qZA(),e.TgZ(137,"em"),e._uU(138),e.qZA(),e.YNc(139,q,6,6,"mat-error",28),e.qZA()(),e.YNc(140,j,3,2,"div",29),e.qZA()()()()()()()),2&i){const a=e.MAs(136);e.xp6(1),e.Q6J("optionsInfoAreaId",t.constructor.name),e.xp6(5),e.hij(" ",e.lcZ(7,42,"TITLE.Be_Careful_When_Entering_Information")," "),e.xp6(4),e.hij(" ",t.formInfo.formTitle," "),e.xp6(5),e.Q6J("expanded",0===t.step),e.xp6(3),e.hij(" ",e.lcZ(19,44,"TITLE.Direction")," "),e.xp6(3),e.hij(" ",e.lcZ(22,46,"TITLE.Select_the_path_to_send_the_message")," "),e.xp6(6),e.Oqu(e.lcZ(28,48,"ACTION.NEXT")),e.xp6(2),e.Q6J("expanded",1===t.step),e.xp6(3),e.hij(" ",e.lcZ(33,50,"TITLE.Message_Text")," "),e.xp6(3),e.hij(" ",e.lcZ(36,52,"TITLE.Select_the_text_of_the_default_messages")," "),e.xp6(4),e.Q6J("ngIf",(null==t.dataMessageContentModel||null==t.dataMessageContentModel.messageBody?null:t.dataMessageContentModel.messageBody.length)>0),e.xp6(1),e.Q6J("ngIf",(null==t.dataMessageContentModel||null==t.dataMessageContentModel.messageBody?null:t.dataMessageContentModel.messageBody.length)>0&&(null==t.dataModel.content?null:t.dataModel.content.length)>0),e.xp6(1),e.Q6J("ngIf",(null==t.dataMessageContentModel||null==t.dataMessageContentModel.messageBody?null:t.dataMessageContentModel.messageBody.length)>0),e.xp6(3),e.Oqu(e.lcZ(45,54,"ACTION.BACK")),e.xp6(3),e.Oqu(e.lcZ(48,56,"ACTION.NEXT")),e.xp6(2),e.Q6J("expanded",2===t.step),e.xp6(3),e.hij(" ",e.lcZ(53,58,"TITLE.Phonebook")," "),e.xp6(3),e.hij(" ",e.lcZ(56,60,"TITLE.Audience_selection")," "),e.xp6(6),e.Oqu(e.lcZ(62,62,"ACTION.BACK")),e.xp6(3),e.Oqu(e.lcZ(65,64,"ACTION.NEXT")),e.xp6(2),e.Q6J("expanded",3===t.step),e.xp6(3),e.hij(" ",e.lcZ(70,66,"TITLE.Shipping_time")," "),e.xp6(3),e.hij(" ",e.lcZ(73,68,"TITLE.Time_to_start_sending_and_finish")," "),e.xp6(8),e.Oqu(e.lcZ(81,70,"ACTION.BACK")),e.xp6(3),e.Oqu(e.lcZ(84,72,"ACTION.NEXT")),e.xp6(2),e.Q6J("expanded",4===t.step),e.xp6(3),e.hij(" ",e.lcZ(89,74,"TITLE.Timing")," "),e.xp6(3),e.hij(" ",e.lcZ(92,76,"TITLE.Retry_schedule")," "),e.xp6(6),e.Oqu(e.lcZ(98,78,"ACTION.BACK")),e.xp6(3),e.Oqu(e.lcZ(101,80,"ACTION.NEXT")),e.xp6(2),e.Q6J("expanded",5===t.step),e.xp6(3),e.hij(" ",e.lcZ(106,82,"TITLE.Settings")," "),e.xp6(3),e.hij(" ",e.lcZ(109,84,"TITLE.Send_settings")," "),e.xp6(7),e.hij(" ",e.lcZ(116,86,"TITLE.Send_To_All"),""),e.xp6(4),e.Q6J("ngModel",t.dataModel.sendToAll),e.xp6(4),e.Oqu(e.lcZ(124,88,"ACTION.BACK")),e.xp6(3),e.Oqu(e.lcZ(127,90,"ACTION.END")),e.xp6(7),e.Oqu(e.lcZ(134,92,"TITLE.Message_Text")),e.xp6(2),e.Q6J("ngModel",t.dataModel.content),e.xp6(3),e.hij("",a.value.length," / 500"),e.xp6(1),e.Q6J("ngIf",null==a.errors?null:a.errors.required),e.xp6(1),e.Q6J("ngIf",t.formInfo.formSubmitAllow&&!(null!=t.loading&&t.loading.display))}},dependencies:[f.O5,l._Y,l.Fj,l.Wl,l.JJ,l.JL,l.wO,l.nD,l.On,l.F,d.pp,d.ib,d.VG,d.yz,d.yK,d.u4,h.TO,_.Hw,I.Nt,L.I,E.O,T.X$],styles:[".form-body[_ngcontent-%COMP%]{width:500px}@media (max-width: 700px){.form-body[_ngcontent-%COMP%]{display:contents}}#file-manager[_ngcontent-%COMP%]{width:calc(100vw - 16px);height:calc(100vh - 16px)}.recordStatus-1.mat-select-panel[_ngcontent-%COMP%]{background:yellow}.recordStatus-2.mat-select-panel[_ngcontent-%COMP%]{background:black}.recordStatus-3.mat-select-panel[_ngcontent-%COMP%]{background:red}.mat-tab-group[_ngcontent-%COMP%]{height:95%}.message-box[_ngcontent-%COMP%]{background-image:url(/assets/media/bg/iphone.png);height:600px;width:300px;background-position:center;background-repeat:no-repeat;background-size:cover;padding-right:33px;padding-left:33px}.message-box-button[_ngcontent-%COMP%]{color:#00f;border-color:transparent;background-color:transparent}.message-box-button[_ngcontent-%COMP%]:hover{color:red;font-size:initial}.message-box-button[_ngcontent-%COMP%]:active{color:#a200ff}"]})}return n})();const F=[{path:"",component:S,children:[{path:"send-notification",component:m},{path:"send-notification/inbox-extras",component:m},{path:"send-notification/outbox-extras",component:m}]}];let Q=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=e.oAB({type:n});static \u0275inj=e.cJS({imports:[p.Bz.forChild(F),p.Bz]})}return n})(),G=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=e.oAB({type:n});static \u0275inj=e.cJS({providers:[r.EAm,r.FLW,r.Z8z,b.s,r.Ozq],imports:[f.ez,Q,l.u5,l.UX.withConfig({warnOnNgModelWithFormControl:"never"}),x.m,C.rK,Z.g$,_.Ps,h.lN,A.T5]})}return n})()}}]);