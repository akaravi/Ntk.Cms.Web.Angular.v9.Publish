import{a as ye,b as vt}from"./chunk-2E6AP5VX.js";import{c as Rt}from"./chunk-JHUTIEVB.js";import"./chunk-4UQ24XO3.js";import{a as wt}from"./chunk-7APFNTNH.js";import{a as Et}from"./chunk-NXZG4RFJ.js";import{a as yt}from"./chunk-BRMVS3UD.js";import{b as It}from"./chunk-2LRZ4YWF.js";import{a as Me}from"./chunk-DBIX2OAK.js";import{$ as ce,$b as Ye,Ab as J,Bd as Ct,Cb as _e,Id as St,Jc as ut,K as de,L as pe,N as Oe,O as Pe,Oa as me,Od as Mt,Pa as ue,Qa as He,Sc as he,Vc as ft,Wa as je,Za as z,Zc as gt,_c as _t,ac as Ze,bc as $e,cc as et,dc as tt,ec as it,jd as Ce,kd as Se,lc as ot,mc as nt,nc as rt,oc as lt,p as re,pa as q,pc as at,pd as ht,qa as U,qc as st,rc as dt,s as H,sb as ge,sc as pt,t as le,tb as Qe,tc as ct,ub as Je,uc as mt,v as ae,va as Ne,vb as Q,x as j,y as se,zb as Xe}from"./chunk-C5C36AMC.js";import{a as Z}from"./chunk-R73LELLD.js";import{$d as B,Bd as Y,Db as ie,Dc as Ve,Eb as oe,Fb as ne,Fd as Ue,Ia as te,Ib as L,Kb as c,Kd as ze,La as l,Lb as b,Lc as Be,Ld as V,Ma as M,Mb as S,Od as we,Pd as Re,Qb as I,Qd as fe,Rb as w,Sb as R,Vb as xe,Vd as K,Wb as Le,Yb as h,Za as W,Zb as C,_b as De,_d as Ke,ab as y,cb as g,da as $,eb as Te,fd as We,gc as G,hd as Ge,ja as P,ka as ee,kd as Ie,lb as s,mb as a,nb as v,ob as T,pb as A,qb as Ae,ra as m,rb as F,sa as u,ub as E,vf as k,wb as _,xc as ke,zb as x,zc as N,zd as qe}from"./chunk-XKQYEJGP.js";var Qt=["vform"];function Jt(o,d){if(o&1){let r=F();s(0,"app-cms-enum-record-status-selector",28),R("modelChange",function(t){m(r);let e=_();return w(e.dataModel.recordStatus,t)||(e.dataModel.recordStatus=t),u(t)}),a()}if(o&2){let r=_();I("model",r.dataModel.recordStatus),g("optionDisabled",!1)("optionLabel",r.fieldsInfo.recordStatus==null?null:r.fieldsInfo.recordStatus.fieldTitle)("optionRequired",!0)("optionSelectFirstItem",!0)}}function Xt(o,d){if(o&1&&(s(0,"mat-error"),c(1),s(2,"strong"),c(3),h(4,"translate"),a()()),o&2){let r=_();l(),S(" ",r.fieldsInfo.title==null?null:r.fieldsInfo.title.fieldTitle," is "),l(2),b(C(4,2,"MESSAGE.required"))}}function Yt(o,d){o&1&&(s(0,"mat-error"),c(1," TitleResourceLanguage is "),s(2,"strong"),c(3),h(4,"translate"),a()()),o&2&&(l(3),b(C(4,1,"MESSAGE.required")))}function Zt(o,d){if(o&1){let r=F();s(0,"app-cms-enum-x-selector",29),R("modelChange",function(t){m(r);let e=_();return w(e.dataModel.reportFileType,t)||(e.dataModel.reportFileType=t),u(t)}),a()}if(o&2){let r=_();g("optionDataListResult",r.dataModelReportFileTypeEnumResult),I("model",r.dataModel.reportFileType),g("optionDisabled",!1)("optionLabel",r.fieldsInfo.reportFileType==null?null:r.fieldsInfo.reportFileType.fieldTitle)("optionRequired",!0)("optionSelectFirstItem",!0)}}function $t(o,d){o&1&&(s(0,"mat-error"),c(1," Description is "),s(2,"strong"),c(3),h(4,"translate"),a()()),o&2&&(l(3),b(C(4,1,"MESSAGE.required")))}function ei(o,d){if(o&1&&(v(0,"img",30),h(1,"cmsthumbnail")),o&2){let r=_();x("src",C(1,1,r.dataModel.linkImageIdSrc),te)}}function ti(o,d){if(o&1){let r=F();s(0,"div",12)(1,"label",31),E("click",function(){m(r);let t=_();return u(t.fileManagerOpenForm=!0)}),c(2),h(3,"translate"),a(),s(4,"input",32,5),h(6,"translate"),R("ngModelChange",function(t){m(r);let e=_();return w(e.dataModel.linkImageId,t)||(e.dataModel.linkImageId=t),u(t)}),E("click",function(){m(r);let t=_();return u(t.fileManagerOpenForm=!0)}),a(),s(7,"cms-file-manager",33),E("itemSelected",function(t){m(r);let e=_();return u(e.onActionFileSelected(t))}),R("openFormChange",function(t){m(r);let e=_();return w(e.fileManagerOpenForm,t)||(e.fileManagerOpenForm=t),u(t)}),a()()}if(o&2){let r=_();l(2),b(C(3,11,"TITLE.Original_File_ID")),l(2),x("placeholder",C(6,13,"TITLE.Icon_File_ID")),I("ngModel",r.dataModel.linkImageId),l(3),g("language",r.appLanguage)("isPopup",!0),I("openForm",r.fileManagerOpenForm),g("tree",r.fileManagerTree)("openFilemanagerButtonLabelKey","select")("openDirectUploadView",!0)("selectFileType",r.selectFileTypeMainImage)("openFilemanagerButtonView",!1)}}function ii(o,d){if(o&1){let r=F();s(0,"div",34)(1,"button",35),E("click",function(){m(r);let t=_();return u(t.onFormCancel())}),v(2,"i",36),c(3),h(4,"translate"),a(),s(5,"button",37),v(6,"i",38),c(7),h(8,"translate"),a()()}if(o&2){_();let r=L(9);l(3),S(" ",C(4,3,"ACTION.CANCEL")," "),l(2),g("disabled",!r.form.valid),l(2),S(" ",C(8,5,"ACTION.SAVE")," ")}}var Vt=(()=>{let d=class d extends yt{constructor(i,t,e,p,f,n,D,O){super(p,new k,n,O),this.data=i,this.dialogRef=t,this.coreEnumService=e,this.coreModuleEntityReportFileService=p,this.cmsToastrService=f,this.publicHelper=n,this.cdr=D,this.translate=O,this.fieldsInfo=new Map,this.selectFileTypeMainImage=["jpg","jpeg","png"],this.selectFileTypeReport=["mrt"],this.appLanguage="fa",this.dataModelResult=new V,this.dataModel=new k,this.dataModelReportFileTypeEnumResult=new V,this.formInfo=new fe,this.fileManagerOpenForm=!1,this.fileManagerOpenFormReport=!1,this.publicHelper.processService.cdr=this.cdr,this.fileManagerTree=this.publicHelper.GetfileManagerTreeConfig(),i&&i.linkModuleEntityId&&(this.dataModel.linkModuleEntityId=i.linkModuleEntityId)}ngOnInit(){this.translate.get("TITLE.ADD").subscribe(i=>{this.formInfo.formTitle=i}),this.DataGetAccess(),this.getReportFileTypeEnum()}getReportFileTypeEnum(){this.coreEnumService.ServiceReportFileTypeEnum().subscribe({next:i=>{this.dataModelReportFileTypeEnumResult=i}})}DataAddContent(){this.translate.get("MESSAGE.sending_information_to_the_server").subscribe(t=>{this.formInfo.formAlert=t}),this.formInfo.formError="";let i=this.constructor.name+"main";this.translate.get("MESSAGE.Receiving_information").subscribe(t=>{this.publicHelper.processService.processStart(i,t,this.constructor.name)}),this.coreModuleEntityReportFileService.ServiceAdd(this.dataModel).subscribe({next:t=>{this.formInfo.formSubmitAllow=!0,this.dataModelResult=t,t.isSuccess?(this.translate.get("MESSAGE.registration_completed_successfully").subscribe(e=>{this.formInfo.formAlert=e}),this.cmsToastrService.typeSuccessAdd(),this.dialogRef.close({dialogChangedDate:!0})):(this.translate.get("ERRORMESSAGE.MESSAGE.typeError").subscribe(e=>{this.formInfo.formAlert=e}),this.formInfo.formError=t.errorMessage,this.cmsToastrService.typeErrorMessage(t.errorMessage)),this.publicHelper.processService.processStop(i)},error:t=>{this.formInfo.formSubmitAllow=!0,this.cmsToastrService.typeError(t),this.publicHelper.processService.processStop(i,!1)}})}onActionSelectorModuleEntitySelect(i){this.dataModel.linkModuleEntityId=null,i&&i.id>0&&(this.dataModel.linkModuleEntityId=i.id)}onActionFileSelected(i){this.dataModel.linkImageId=i.id,this.dataModel.linkImageIdSrc=i.downloadLinksrc}onActionFileSelectedLinkFileId(i){this.dataModel.linkFileId=i.id,this.dataModel.linkFileIdSrc=i.downloadLinksrc}onFormSubmit(){this.formGroup.valid&&(this.formInfo.formSubmitAllow=!1,this.DataAddContent())}onFormCancel(){this.dialogRef.close({dialogChangedDate:!1})}};d.\u0275fac=function(t){return new(t||d)(M(ue),M(me),M(K),M(B),M(Q),M(J),M(G),M(q))},d.\u0275cmp=P({type:d,selectors:[["app-core-module-entity-report-file-add"]],viewQuery:function(t,e){if(t&1&&ie(Qt,5),t&2){let p;oe(p=ne())&&(e.formGroup=p.first)}},features:[W],decls:48,vars:42,consts:[["vform","ngForm"],["Title",""],["TitleResourceLanguage",""],["Description",""],["LinkFileId",""],["LinkImageId",""],[1,"card","card-style","progressOverlayContainer"],[3,"optionsInfoAreaId"],[1,"content","mb-0"],[1,"mb-0","color-highlight","font-600","font-12"],[3,"ngSubmit"],[3,"model","optionDisabled","optionLabel","optionRequired","optionSelectFirstItem","modelChange",4,"ngIf"],[1,"input-style","has-borders","no-icon","input-style-always-active","validate-field","mb-4"],["for","dataModel.title",1,"color-highlight"],["matInput","","type","text","name","dataModel.title","minlength","3","maxlength","100","id","dataModel.title",1,"form-control","validate-name",3,"ngModelChange","ngModel","placeholder"],[4,"ngIf"],["for","dataModel.titleResourceLanguage",1,"color-highlight"],["matInput","","type","text","name","dataModel.titleResourceLanguage","minlength","3","maxlength","100","id","dataModel.titleResourceLanguage",1,"form-control","validate-name",3,"ngModelChange","ngModel","placeholder"],[3,"optionChange","optionDisabled","optionSelectForce","optionPlaceholder"],[3,"optionDataListResult","model","optionDisabled","optionLabel","optionRequired","optionSelectFirstItem","modelChange",4,"ngIf"],["for","dataModel.description",1,"color-highlight"],["matInput","","name","dataModel.description","type","text","minlength","1","maxlength","500","rows","5","id","dataModel.description",1,"form-control","validate-name",3,"ngModelChange","ngModel","placeholder"],[1,"mb-3"],["style","vertical-align:middle;","class","ntk-hover-zoom","aria-hidden","","height","50","width","50",3,"src",4,"ngIf"],["class","input-style has-borders no-icon input-style-always-active validate-field mb-4",4,"ngIf"],["matInput","","type","text","name","dataModel.linkFileId","autocomplete","off","id","dataModel.linkFileId",1,"form-control","validate-name",3,"ngModelChange","click","ngModel","placeholder"],[3,"itemSelected","openFormChange","language","isPopup","openForm","tree","openDirectUploadView","openFilemanagerButtonLabelKey","selectFileType","openFilemanagerButtonView"],["class","form-actions",4,"ngIf"],[3,"modelChange","model","optionDisabled","optionLabel","optionRequired","optionSelectFirstItem"],[3,"modelChange","optionDataListResult","model","optionDisabled","optionLabel","optionRequired","optionSelectFirstItem"],["aria-hidden","","height","50","width","50",1,"ntk-hover-zoom",2,"vertical-align","middle",3,"src"],["for","dataModel.linkImageId",1,"color-highlight",3,"click"],["matInput","","type","text","name","dataModel.linkImageId","autocomplete","off","id","dataModel.linkImageId",1,"form-control","validate-name",3,"ngModelChange","click","ngModel","placeholder"],[3,"itemSelected","openFormChange","language","isPopup","openForm","tree","openFilemanagerButtonLabelKey","openDirectUploadView","selectFileType","openFilemanagerButtonView"],[1,"form-actions"],["type","button",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-gray",3,"click"],[1,"ft-x"],["type","submit",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-green",3,"disabled"],[1,"fa","fa-check-square-o"]],template:function(t,e){if(t&1){let p=F();s(0,"div",6),v(1,"app-progress-spinner",7),s(2,"div",8)(3,"p",9),c(4),a(),s(5,"p"),c(6),h(7,"translate"),a(),s(8,"form",10,0),E("ngSubmit",function(){return m(p),u(e.onFormSubmit())}),y(10,Jt,1,5,"app-cms-enum-record-status-selector",11),s(11,"div",12)(12,"label",13),c(13),a(),s(14,"input",14,1),R("ngModelChange",function(n){return m(p),w(e.dataModel.title,n)||(e.dataModel.title=n),u(n)}),a(),s(16,"em"),c(17),a(),y(18,Xt,5,4,"mat-error",15),a(),s(19,"div",12)(20,"label",16),c(21),a(),s(22,"input",17,2),R("ngModelChange",function(n){return m(p),w(e.dataModel.titleResourceLanguage,n)||(e.dataModel.titleResourceLanguage=n),u(n)}),a(),s(24,"em"),c(25),a(),y(26,Yt,5,3,"mat-error",15),a(),s(27,"app-core-module-entity-selector",18),h(28,"translate"),E("optionChange",function(n){return m(p),u(e.onActionSelectorModuleEntitySelect(n))}),a(),y(29,Zt,1,6,"app-cms-enum-x-selector",19),s(30,"div",12)(31,"label",20),c(32),a(),s(33,"textarea",21,3),R("ngModelChange",function(n){return m(p),w(e.dataModel.description,n)||(e.dataModel.description=n),u(n)}),c(35,"          "),a(),s(36,"em"),c(37),a(),y(38,$t,5,3,"mat-error",15),a(),s(39,"div",22),y(40,ei,2,3,"img",23),a(),y(41,ti,8,15,"div",24),s(42,"div",12)(43,"input",25,4),h(45,"translate"),R("ngModelChange",function(n){return m(p),w(e.dataModel.linkFileId,n)||(e.dataModel.linkFileId=n),u(n)}),E("click",function(){return m(p),u(e.fileManagerOpenFormReport=!0)}),a(),s(46,"cms-file-manager",26),E("itemSelected",function(n){return m(p),u(e.onActionFileSelectedLinkFileId(n))}),R("openFormChange",function(n){return m(p),w(e.fileManagerOpenFormReport,n)||(e.fileManagerOpenFormReport=n),u(n)}),a()(),y(47,ii,9,7,"div",27),a()()()}if(t&2){let p=L(15),f=L(23),n=L(34);l(),g("optionsInfoAreaId",e.constructor.name),l(3),S(" ",e.formInfo.formTitle," "),l(2),S(" ",C(7,36,"TITLE.Be_Careful_When_Entering_Information")," "),l(4),g("ngIf",e.fieldsInfo.recordStatus==null?null:e.fieldsInfo.recordStatus.accessWatchField),l(3),b(e.fieldsInfo.title==null?null:e.fieldsInfo.title.fieldTitle),l(),x("placeholder",e.fieldsInfo.title==null?null:e.fieldsInfo.title.fieldTitle),I("ngModel",e.dataModel.title),l(3),S("",p.value.length," / 100"),l(),g("ngIf",p.errors==null?null:p.errors.required),l(3),b(e.fieldsInfo.titleResourceLanguage==null?null:e.fieldsInfo.titleResourceLanguage.fieldTitle),l(),x("placeholder",e.fieldsInfo.titleResourceLanguage==null?null:e.fieldsInfo.titleResourceLanguage.fieldTitle),I("ngModel",e.dataModel.titleResourceLanguage),l(3),S("",f.value.length," / 100"),l(),g("ngIf",f.errors==null?null:f.errors.required),l(),g("optionDisabled",!(e.fieldsInfo.linkModuleEntityId!=null&&e.fieldsInfo.linkModuleEntityId.accessEditField))("optionSelectForce",e.dataModel.linkModuleEntityId)("optionPlaceholder",C(28,38,"TITLE.MODULE_ENTITY")),l(2),g("ngIf",e.fieldsInfo.reportFileType==null?null:e.fieldsInfo.reportFileType.accessWatchField),l(3),b(e.fieldsInfo.description==null?null:e.fieldsInfo.description.fieldTitle),l(),x("placeholder",e.fieldsInfo.description==null?null:e.fieldsInfo.description.fieldTitle),I("ngModel",e.dataModel.description),l(4),S("",n.value.length," / 500"),l(),g("ngIf",n.errors==null?null:n.errors.required),l(2),g("ngIf",(e.dataModel==null||e.dataModel.linkImageIdSrc==null?null:e.dataModel.linkImageIdSrc.length)>0),l(),g("ngIf",e.fieldsInfo.linkImageId==null?null:e.fieldsInfo.linkImageId.accessWatchField),l(2),x("placeholder",C(45,40,"TITLE.Report_File_ID")),I("ngModel",e.dataModel.linkFileId),l(3),g("language",e.appLanguage)("isPopup",!0),I("openForm",e.fileManagerOpenFormReport),g("tree",e.fileManagerTree)("openDirectUploadView",!0)("openFilemanagerButtonLabelKey","select")("selectFileType",e.selectFileTypeReport)("openFilemanagerButtonView",!1),l(),g("ngIf",e.formInfo.formSubmitAllow)}},dependencies:[N,se,re,H,le,de,pe,j,ae,ce,z,Ce,Se,_e,ye,ge,U,he],styles:[".form-body[_ngcontent-%COMP%]{width:500px}@media (max-width: 700px){.form-body[_ngcontent-%COMP%]{display:contents}}#file-manager[_ngcontent-%COMP%]{width:calc(100vw - 16px);height:calc(100vh - 16px)}.recordStatus-1.mat-select-panel[_ngcontent-%COMP%]{background:#ff0}.recordStatus-2.mat-select-panel[_ngcontent-%COMP%]{background:#000}.recordStatus-3.mat-select-panel[_ngcontent-%COMP%]{background:red}"]});let o=d;return o})();var oi=["vform"];function ni(o,d){if(o&1){let r=F();s(0,"app-cms-enum-record-status-selector",30),R("modelChange",function(t){m(r);let e=_();return w(e.dataModel.recordStatus,t)||(e.dataModel.recordStatus=t),u(t)}),a()}if(o&2){let r=_();I("model",r.dataModel.recordStatus),g("optionDisabled",!1)("optionLabel",r.fieldsInfo.recordStatus==null?null:r.fieldsInfo.recordStatus.fieldTitle)("optionRequired",!0)("optionSelectFirstItem",!0)}}function ri(o,d){if(o&1&&(s(0,"mat-error"),c(1),s(2,"strong"),c(3),h(4,"translate"),a()()),o&2){let r=_();l(),S(" ",r.fieldsInfo.title==null?null:r.fieldsInfo.title.fieldTitle," is "),l(2),b(C(4,2,"MESSAGE.required"))}}function li(o,d){o&1&&(s(0,"mat-error"),c(1," TitleResourceLanguage is "),s(2,"strong"),c(3),h(4,"translate"),a()()),o&2&&(l(3),b(C(4,1,"MESSAGE.required")))}function ai(o,d){if(o&1){let r=F();s(0,"app-cms-enum-x-selector",31),R("modelChange",function(t){m(r);let e=_();return w(e.dataModel.reportFileType,t)||(e.dataModel.reportFileType=t),u(t)}),a()}if(o&2){let r=_();g("optionDataListResult",r.dataModelReportFileTypeEnumResult),I("model",r.dataModel.reportFileType),g("optionDisabled",!1)("optionLabel",r.fieldsInfo.reportFileType==null?null:r.fieldsInfo.reportFileType.fieldTitle)("optionRequired",!0)("optionSelectFirstItem",!0)}}function si(o,d){o&1&&(s(0,"mat-error"),c(1," Description is "),s(2,"strong"),c(3),h(4,"translate"),a()()),o&2&&(l(3),b(C(4,1,"MESSAGE.required")))}function di(o,d){if(o&1&&(v(0,"img",32),h(1,"cmsthumbnail")),o&2){let r=_();x("src",C(1,1,r.dataModel.linkImageIdSrc),te)}}function pi(o,d){if(o&1){let r=F();s(0,"div",12)(1,"label",33),E("click",function(){m(r);let t=_();return u(t.fileManagerOpenForm=!0)}),c(2),h(3,"translate"),a(),s(4,"input",34,5),h(6,"translate"),R("ngModelChange",function(t){m(r);let e=_();return w(e.dataModel.linkImageId,t)||(e.dataModel.linkImageId=t),u(t)}),E("click",function(){m(r);let t=_();return u(t.fileManagerOpenForm=!0)}),a(),s(7,"cms-file-manager",35),E("itemSelected",function(t){m(r);let e=_();return u(e.onActionFileSelected(t))}),R("openFormChange",function(t){m(r);let e=_();return w(e.fileManagerOpenForm,t)||(e.fileManagerOpenForm=t),u(t)}),a()()}if(o&2){let r=_();l(2),b(C(3,11,"TITLE.Icon_File")),l(2),x("placeholder",C(6,13,"TITLE.Original_File_ID")),I("ngModel",r.dataModel.linkImageId),l(3),g("language",r.appLanguage)("isPopup",!0),I("openForm",r.fileManagerOpenForm),g("tree",r.fileManagerTree)("openFilemanagerButtonLabelKey","select")("openDirectUploadView",!0)("selectFileType",r.selectFileTypeMainImage)("openFilemanagerButtonView",!1)}}function ci(o,d){if(o&1){let r=F();s(0,"div",36)(1,"button",37),E("click",function(){m(r);let t=_();return u(t.onFormCancel())}),v(2,"i",38),c(3),h(4,"translate"),a(),s(5,"button",39),v(6,"i",40),c(7),h(8,"translate"),a()()}if(o&2){_();let r=L(9);l(3),S(" ",C(4,3,"ACTION.CANCEL")," "),l(2),g("disabled",!r.form.valid),l(2),S(" ",C(8,5,"ACTION.SAVE")," ")}}var Bt=(()=>{let d=class d extends Et{constructor(i,t,e,p,f,n,D,O){super(p,new k,n,O),this.data=i,this.dialogRef=t,this.coreEnumService=e,this.coreModuleEntityReportFileService=p,this.cmsToastrService=f,this.publicHelper=n,this.cdr=D,this.translate=O,this.requestId="",this.selectFileTypeMainImage=["jpg","jpeg","png"],this.selectFileTypeReport=["mrt"],this.appLanguage="fa",this.dataModelResult=new ze,this.dataModel=new k,this.dataModelReportFileTypeEnumResult=new V,this.formInfo=new fe,this.fileManagerOpenForm=!1,this.fileManagerOpenFormReport=!1,this.publicHelper.processService.cdr=this.cdr,i&&i.id&&(this.requestId=i.id),this.fileManagerTree=this.publicHelper.GetfileManagerTreeConfig()}ngOnInit(){if(this.requestId.length>0)this.translate.get("TITLE.Edit").subscribe(i=>{this.formInfo.formTitle=i}),this.DataGetOneContent();else{this.cmsToastrService.typeErrorComponentAction(),this.dialogRef.close({dialogChangedDate:!1});return}this.getReportFileTypeEnum()}getReportFileTypeEnum(){this.coreEnumService.ServiceReportFileTypeEnum().subscribe({next:i=>{this.dataModelReportFileTypeEnumResult=i}})}DataGetOneContent(){this.translate.get("MESSAGE.Receiving_Information_From_The_Server").subscribe(t=>{this.formInfo.formAlert=t}),this.formInfo.formError="";let i=this.constructor.name+"main";this.translate.get("MESSAGE.Receiving_information").subscribe(t=>{this.publicHelper.processService.processStart(i,t,this.constructor.name)}),this.coreModuleEntityReportFileService.setAccessLoad(),this.coreModuleEntityReportFileService.setAccessDataType(Ue.Editor),this.coreModuleEntityReportFileService.ServiceGetOneById(this.requestId).subscribe({next:t=>{this.dataModel=t.item,this.fieldsInfo=this.publicHelper.fieldInfoConvertor(t.access),t.isSuccess?(this.formInfo.formTitle=this.formInfo.formTitle+" "+t.item.id,this.formInfo.formAlert=""):(this.translate.get("ERRORMESSAGE.MESSAGE.typeError").subscribe(e=>{this.formInfo.formAlert=e}),this.formInfo.formError=t.errorMessage,this.cmsToastrService.typeErrorMessage(t.errorMessage)),this.publicHelper.processService.processStop(i)},error:t=>{this.cmsToastrService.typeError(t),this.publicHelper.processService.processStop(i,!1)}})}DataEditContent(){this.translate.get("MESSAGE.sending_information_to_the_server").subscribe(t=>{this.formInfo.formAlert=t}),this.formInfo.formError="";let i=this.constructor.name+"main";this.translate.get("MESSAGE.sending_information_to_the_server").subscribe(t=>{this.publicHelper.processService.processStart(i,t,this.constructor.name)}),this.coreModuleEntityReportFileService.ServiceEdit(this.dataModel).subscribe({next:t=>{this.formInfo.formSubmitAllow=!0,this.dataModelResult=t,t.isSuccess?(this.translate.get("MESSAGE.registration_completed_successfully").subscribe(e=>{this.formInfo.formAlert=e}),this.cmsToastrService.typeSuccessEdit(),this.dialogRef.close({dialogChangedDate:!0})):(this.translate.get("ERRORMESSAGE.MESSAGE.typeError").subscribe(e=>{this.formInfo.formAlert=e}),this.formInfo.formError=t.errorMessage,this.cmsToastrService.typeErrorMessage(t.errorMessage)),this.publicHelper.processService.processStop(i)},error:t=>{this.formInfo.formSubmitAllow=!0,this.cmsToastrService.typeError(t),this.publicHelper.processService.processStop(i,!1)}})}onActionSelectorModuleEntitySelect(i){this.dataModel.linkModuleEntityId=null,i&&i.id>0&&(this.dataModel.linkModuleEntityId=i.id)}onActionFileSelectedLinkFileId(i){this.dataModel.linkFileId=i.id,this.dataModel.linkFileIdSrc=i.downloadLinksrc}onActionFileSelected(i){this.dataModel.linkImageId=i.id,this.dataModel.linkImageIdSrc=i.downloadLinksrc}onFormSubmit(){this.formGroup.valid&&(this.formInfo.formSubmitAllow=!1,this.DataEditContent())}onFormCancel(){this.dialogRef.close({dialogChangedDate:!1})}};d.\u0275fac=function(t){return new(t||d)(M(ue),M(me),M(K),M(B),M(Q),M(J),M(G),M(q))},d.\u0275cmp=P({type:d,selectors:[["app-core-module-entity-report-file-edit"]],viewQuery:function(t,e){if(t&1&&ie(oi,5),t&2){let p;oe(p=ne())&&(e.formGroup=p.first)}},features:[W],decls:53,vars:48,consts:[["vform","ngForm"],["Title",""],["TitleResourceLanguage",""],["Description",""],["LinkFileId",""],["LinkImageId",""],[1,"card","card-style","progressOverlayContainer"],[3,"optionsInfoAreaId"],[1,"content","mb-0"],[1,"mb-0","color-highlight","font-600","font-12"],[3,"ngSubmit"],[3,"model","optionDisabled","optionLabel","optionRequired","optionSelectFirstItem","modelChange",4,"ngIf"],[1,"input-style","has-borders","no-icon","input-style-always-active","validate-field","mb-4"],["for","dataModel.title",1,"color-highlight"],["matInput","","type","text","name","dataModel.title","minlength","3","maxlength","100","id","dataModel.title",1,"form-control","validate-name",3,"ngModelChange","ngModel","placeholder"],[4,"ngIf"],["for","dataModel.titleML",1,"color-highlight"],["matInput","","type","text","name","dataModel.titleML","id","dataModel.titleML",1,"form-control","validate-name",3,"ngModelChange","ngModel","disabled"],["for","dataModel.titleResourceLanguage",1,"color-highlight"],["matInput","","type","text","name","dataModel.titleResourceLanguage","minlength","3","maxlength","100","id","dataModel.titleResourceLanguage",1,"form-control","validate-name",3,"ngModelChange","ngModel","disabled","placeholder"],[3,"optionChange","optionDisabled","optionSelectForce","optionPlaceholder"],[3,"optionDataListResult","model","optionDisabled","optionLabel","optionRequired","optionSelectFirstItem","modelChange",4,"ngIf"],["for","dataModel.description",1,"color-highlight"],["matInput","","name","dataModel.description","type","text","minlength","1","maxlength","500","rows","5","id","dataModel.description",1,"form-control","validate-name",3,"ngModelChange","ngModel","placeholder"],[1,"mb-3"],["style","vertical-align:middle;","class","ntk-hover-zoom","aria-hidden","","height","50","width","50",3,"src",4,"ngIf"],["class","input-style has-borders no-icon input-style-always-active validate-field mb-4",4,"ngIf"],["matInput","","type","text","name","dataModel.linkFileId","autocomplete","off","id","dataModel.linkFileId",1,"form-control","validate-name",3,"ngModelChange","click","ngModel","placeholder"],[3,"itemSelected","openFormChange","language","isPopup","openForm","tree","openDirectUploadView","openFilemanagerButtonLabelKey","selectFileType","openFilemanagerButtonView"],["class","form-actions",4,"ngIf"],[3,"modelChange","model","optionDisabled","optionLabel","optionRequired","optionSelectFirstItem"],[3,"modelChange","optionDataListResult","model","optionDisabled","optionLabel","optionRequired","optionSelectFirstItem"],["aria-hidden","","height","50","width","50",1,"ntk-hover-zoom",2,"vertical-align","middle",3,"src"],["for","dataModel.linkImageId",1,"color-highlight",3,"click"],["matInput","","type","text","name","dataModel.linkImageId","autocomplete","off","id","dataModel.linkImageId",1,"form-control","validate-name",3,"ngModelChange","click","ngModel","placeholder"],[3,"itemSelected","openFormChange","language","isPopup","openForm","tree","openFilemanagerButtonLabelKey","openDirectUploadView","selectFileType","openFilemanagerButtonView"],[1,"form-actions"],["type","button",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-gray",3,"click"],[1,"ft-x"],["type","submit",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-green",3,"disabled"],[1,"fa","fa-check-square-o"]],template:function(t,e){if(t&1){let p=F();s(0,"div",6),v(1,"app-progress-spinner",7),s(2,"div",8)(3,"p",9),c(4),a(),s(5,"p"),c(6),h(7,"translate"),a(),s(8,"form",10,0),E("ngSubmit",function(){return m(p),u(e.onFormSubmit())}),y(10,ni,1,5,"app-cms-enum-record-status-selector",11),s(11,"div",12)(12,"label",13),c(13),a(),s(14,"input",14,1),R("ngModelChange",function(n){return m(p),w(e.dataModel.title,n)||(e.dataModel.title=n),u(n)}),a(),s(16,"em"),c(17),a(),y(18,ri,5,4,"mat-error",15),a(),s(19,"div",12)(20,"label",16),c(21),h(22,"translate"),a(),s(23,"input",17),R("ngModelChange",function(n){return m(p),w(e.dataModel.titleML,n)||(e.dataModel.titleML=n),u(n)}),a()(),s(24,"div",12)(25,"label",18),c(26),a(),s(27,"input",19,2),R("ngModelChange",function(n){return m(p),w(e.dataModel.titleResourceLanguage,n)||(e.dataModel.titleResourceLanguage=n),u(n)}),a(),s(29,"em"),c(30),a(),y(31,li,5,3,"mat-error",15),a(),s(32,"app-core-module-entity-selector",20),h(33,"translate"),E("optionChange",function(n){return m(p),u(e.onActionSelectorModuleEntitySelect(n))}),a(),y(34,ai,1,6,"app-cms-enum-x-selector",21),s(35,"div",12)(36,"label",22),c(37),a(),s(38,"textarea",23,3),R("ngModelChange",function(n){return m(p),w(e.dataModel.description,n)||(e.dataModel.description=n),u(n)}),c(40,"          "),a(),s(41,"em"),c(42),a(),y(43,si,5,3,"mat-error",15),a(),s(44,"div",24),y(45,di,2,3,"img",25),a(),y(46,pi,8,15,"div",26),s(47,"div",12)(48,"input",27,4),h(50,"translate"),R("ngModelChange",function(n){return m(p),w(e.dataModel.linkFileId,n)||(e.dataModel.linkFileId=n),u(n)}),E("click",function(){return m(p),u(e.fileManagerOpenFormReport=!0)}),a(),s(51,"cms-file-manager",28),E("itemSelected",function(n){return m(p),u(e.onActionFileSelectedLinkFileId(n))}),R("openFormChange",function(n){return m(p),w(e.fileManagerOpenFormReport,n)||(e.fileManagerOpenFormReport=n),u(n)}),a()(),y(52,ci,9,7,"div",29),a()()()}if(t&2){let p=L(15),f=L(28),n=L(39);l(),g("optionsInfoAreaId",e.constructor.name),l(3),S(" ",e.formInfo.formTitle," "),l(2),S(" ",C(7,40,"TITLE.Be_Careful_When_Entering_Information")," "),l(4),g("ngIf",e.fieldsInfo.recordStatus==null?null:e.fieldsInfo.recordStatus.accessWatchField),l(3),b(e.fieldsInfo.title==null?null:e.fieldsInfo.title.fieldTitle),l(),x("placeholder",e.fieldsInfo.title==null?null:e.fieldsInfo.title.fieldTitle),I("ngModel",e.dataModel.title),l(3),S("",p.value.length," / 100"),l(),g("ngIf",p.errors==null?null:p.errors.required),l(3),b(C(22,42,"TITLE.TitleML")),l(2),I("ngModel",e.dataModel.titleML),g("disabled",!0),l(3),b(e.fieldsInfo.titleResourceLanguage==null?null:e.fieldsInfo.titleResourceLanguage.fieldTitle),l(),x("placeholder",e.fieldsInfo.titleResourceLanguage==null?null:e.fieldsInfo.titleResourceLanguage.fieldTitle),I("ngModel",e.dataModel.titleResourceLanguage),g("disabled",!(e.fieldsInfo.titleResourceLanguage!=null&&e.fieldsInfo.titleResourceLanguage.accessEditField)),l(3),S("",f.value.length," / 100"),l(),g("ngIf",f.errors==null?null:f.errors.required),l(),g("optionDisabled",!(e.fieldsInfo.linkModuleEntityId!=null&&e.fieldsInfo.linkModuleEntityId.accessEditField))("optionSelectForce",e.dataModel.linkModuleEntityId)("optionPlaceholder",C(33,44,"TITLE.MODULE_ENTITY")),l(2),g("ngIf",e.fieldsInfo.reportFileType==null?null:e.fieldsInfo.reportFileType.accessWatchField),l(3),b(e.fieldsInfo.description==null?null:e.fieldsInfo.description.fieldTitle),l(),x("placeholder",e.fieldsInfo.description==null?null:e.fieldsInfo.description.fieldTitle),I("ngModel",e.dataModel.description),l(4),S("",n.value.length," / 500"),l(),g("ngIf",n.errors==null?null:n.errors.required),l(2),g("ngIf",(e.dataModel==null||e.dataModel.linkImageIdSrc==null?null:e.dataModel.linkImageIdSrc.length)>0),l(),g("ngIf",e.fieldsInfo.linkImageId==null?null:e.fieldsInfo.linkImageId.accessWatchField),l(2),x("placeholder",C(50,46,"TITLE.Report_File_ID")),I("ngModel",e.dataModel.linkFileId),l(3),g("language",e.appLanguage)("isPopup",!0),I("openForm",e.fileManagerOpenFormReport),g("tree",e.fileManagerTree)("openDirectUploadView",!0)("openFilemanagerButtonLabelKey","select")("selectFileType",e.selectFileTypeReport)("openFilemanagerButtonView",!1),l(),g("ngIf",e.formInfo.formSubmitAllow)}},dependencies:[N,se,re,H,le,de,pe,j,ae,ce,z,Ce,Se,_e,ye,ge,U,he],styles:[".form-body[_ngcontent-%COMP%]{width:500px}@media (max-width: 700px){.form-body[_ngcontent-%COMP%]{display:contents}}#file-manager[_ngcontent-%COMP%]{width:calc(100vw - 16px);height:calc(100vh - 16px)}.recordStatus-1.mat-select-panel[_ngcontent-%COMP%]{background:#ff0}.recordStatus-2.mat-select-panel[_ngcontent-%COMP%]{background:#000}.recordStatus-3.mat-select-panel[_ngcontent-%COMP%]{background:red}"]});let o=d;return o})();var mi=()=>[5,10,20,100],ui=o=>({display:o});function fi(o,d){if(o&1){let r=F();s(0,"div",19)(1,"a",44),E("click",function(){m(r);let t=_();return u(t.onActionButtonNewRow())}),v(2,"i",45)(3,"br"),a(),s(4,"p",22),c(5),h(6,"translate"),a()()}o&2&&(l(5),S("",C(6,1,"ACTION.ADD")," Dependency"))}function gi(o,d){if(o&1){let r=F();s(0,"div",19)(1,"a",46),E("click",function(){m(r);let t=_();return u(t.onActionButtonEditRow(t.tableRowSelected))}),v(2,"i",47)(3,"br"),a(),s(4,"p",22),c(5),h(6,"translate"),a()()}o&2&&(l(5),b(C(6,1,"ACTION.EDIT")))}function _i(o,d){if(o&1){let r=F();s(0,"div",19)(1,"a",48),E("click",function(){m(r);let t=_();return u(t.onActionButtonDeleteRow(t.tableRowSelected))}),v(2,"i",49)(3,"br"),a(),s(4,"p",22),c(5),h(6,"translate"),a()()}o&2&&(l(5),b(C(6,1,"ACTION.DELETE")))}function hi(o,d){if(o&1&&(s(0,"mat-header-cell",50),c(1),a()),o&2){let r=_();l(),S(" ",r.fieldsInfo.id==null?null:r.fieldsInfo.id.fieldTitle," ")}}function Ci(o,d){if(o&1&&(s(0,"mat-cell"),c(1),a()),o&2){let r=d.$implicit;l(),S(" ",r.id," ")}}function Si(o,d){if(o&1&&(s(0,"mat-header-cell",50),c(1),a()),o&2){let r=_();l(),S(" ",r.fieldsInfo.recordStatus==null?null:r.fieldsInfo.recordStatus.fieldTitle," ")}}function Mi(o,d){if(o&1&&v(0,"select",53),o&2){let r=_().$implicit,i=_();g("contentService",i.contentService)("row",r)("ngStyle",Le(3,ui,r.id===(i.tableRowSelected==null?null:i.tableRowSelected.id)?"":"none"))}}function yi(o,d){if(o&1&&(s(0,"mat-cell",51),h(1,"statusCellClass"),v(2,"i",51),h(3,"statusIconClass"),y(4,Mi,1,5,"select",52),a()),o&2){let r=d.$implicit,i=_();g("ngClass",C(1,3,r.recordStatus)),l(2),g("ngClass",C(3,5,r.recordStatus)),l(2),g("ngIf",i.dataModelResult==null||i.dataModelResult.access==null?null:i.dataModelResult.access.accessEditRow)}}function Ei(o,d){if(o&1&&(s(0,"mat-header-cell",50),c(1),a()),o&2){let r=_();l(),S(" ",r.fieldsInfo.linkModuleEntityId==null?null:r.fieldsInfo.linkModuleEntityId.fieldTitle," ")}}function Ii(o,d){if(o&1&&(s(0,"mat-cell"),c(1),a()),o&2){let r=d.$implicit;l(),S(" ",r.linkModuleEntityId," ")}}function wi(o,d){if(o&1&&(s(0,"mat-header-cell",50),c(1),a()),o&2){let r=_();l(),S(" ",r.fieldsInfo.title==null?null:r.fieldsInfo.title.fieldTitle," ")}}function Ri(o,d){if(o&1&&(s(0,"mat-cell"),c(1),a()),o&2){let r=d.$implicit;l(),S(" ",r.title," ")}}function vi(o,d){if(o&1&&(s(0,"mat-header-cell",50),c(1),a()),o&2){let r=_();l(),S(" ",r.fieldsInfo.description==null?null:r.fieldsInfo.description.fieldTitle," ")}}function bi(o,d){if(o&1&&(s(0,"mat-cell"),c(1),a()),o&2){let r=d.$implicit;l(),S(" ",r.description," ")}}function Fi(o,d){if(o&1&&(s(0,"mat-header-cell",50),c(1),a()),o&2){let r=_();l(),S(" ",r.fieldsInfo.reportFileType==null?null:r.fieldsInfo.reportFileType.fieldTitle," ")}}function Ti(o,d){if(o&1&&(s(0,"mat-cell"),c(1),h(2,"enums"),a()),o&2){let r=d.$implicit,i=_();l(),S(" ",De(2,1,r.reportFileType,i.dataModelEnumReportFileTypeResult.listItems)," ")}}function Ai(o,d){o&1&&(s(0,"mat-header-cell"),c(1),h(2,"translate"),a()),o&2&&(l(),S(" ",C(2,1,"TITLE.OPTION")," "))}function xi(o,d){if(o&1&&(s(0,"mat-cell",54)(1,"button",55)(2,"mat-icon"),c(3,"more_vert"),a()(),v(4,"mat-menu",null,2),a()),o&2){let r=L(5);l(),g("matMenuTriggerFor",r)}}function Li(o,d){o&1&&(s(0,"mat-header-cell",50),c(1),h(2,"translate"),a()),o&2&&(l(),S("",C(2,1,"ACTION.ORDERING")," "))}function Di(o,d){o&1&&(s(0,"mat-cell")(1,"mat-icon",56),c(2,"reorder"),a()())}function ki(o,d){o&1&&v(0,"mat-header-row")}function Vi(o,d){if(o&1){let r=F();s(0,"mat-row",57),E("click",function(){let t=m(r).$implicit,e=_();return u(e.onActionTableRowSelect(t))}),a()}if(o&2){let r=d.$implicit,i=d.dataIndex,t=_();Te("ntk-row-odd",i%2)("ntk-row-even",!(i%2))("ntk-row-selected",r.id===(t.tableRowSelected==null?null:t.tableRowSelected.id))}}var ve=(()=>{let d=class d extends wt{constructor(i,t,e,p,f,n,D,O,Pt,be,Wt,Fe,Gt){if(super(i,new k,Fe,f,be),this.contentService=i,this.coreEnumService=t,this.cmsToastrService=e,this.cmsConfirmationDialogService=p,this.tokenHelper=f,this.activatedRoute=n,this.coreModuleEntityService=D,this.router=O,this.cdr=Pt,this.translate=be,this.pageInfo=Wt,this.publicHelper=Fe,this.dialog=Gt,this.requestLinkModuleEntityId=0,this.flag=!1,this.tableContentSelected=[],this.filteModelContent=new Re,this.dataModelCoreModuleEntityResult=new V,this.dataModelEnumReportFileTypeResult=new V,this.tabledisplayedColumns=[],this.tabledisplayedColumnsSource=["Id","RecordStatus","LinkModuleEntityId","Description","ReportFileType"],this.tabledisplayedColumnsMobileSource=["Id","RecordStatus","LinkModuleEntityId","Description","ReportFileType"],this.publicHelper.processService.cdr=this.cdr,this.optionsSearch.parentMethods={onSubmit:X=>this.onSubmitOptionsSearch(X)},this.requestLinkModuleEntityId=+Number(this.activatedRoute.snapshot.paramMap.get("LinkModuleEntityReportFileId")),this.filteModelContent.sortColumn="Id",this.filteModelContent.sortType=Y.Ascending,this.requestLinkModuleEntityId>0){let X=new we;X.propertyName="linkModuleEntityId",X.value=this.requestLinkModuleEntityId,this.filteModelContent.filters.push(X)}}ngOnInit(){this.filteModelContent.sortColumn="ShowInMenuOrder",this.tokenHelper.getCurrentToken().then(i=>{this.tokenInfo=i,this.DataGetAll()}),this.cmsApiStoreSubscribe=this.tokenHelper.getCurrentTokenOnChange().subscribe({next:i=>{this.tokenInfo=i,this.DataGetAll()}}),this.getModuleList(),this.getEnumReportFileType()}ngOnDestroy(){this.cmsApiStoreSubscribe.unsubscribe()}getEnumReportFileType(){this.coreEnumService.ServiceReportFileTypeEnum().subscribe({next:i=>{this.dataModelEnumReportFileTypeResult=i}})}getModuleList(){let i=new Re;i.rowPerPage=100,this.coreModuleEntityService.ServiceGetAll(i).subscribe({next:t=>{this.dataModelCoreModuleEntityResult=t}})}DataGetAll(){this.tabledisplayedColumns=this.publicHelper.TableDisplayedColumns(this.tabledisplayedColumnsSource,this.tabledisplayedColumnsMobileSource,[],this.tokenInfo),this.tableRowsSelected=[],this.onActionTableRowSelect(new k);let i=this.constructor.name+"main";this.translate.get("MESSAGE.get_information_list").subscribe(e=>{this.publicHelper.processService.processStart(i,e,this.constructor.name)}),this.filteModelContent.accessLoad=!0;let t=JSON.parse(JSON.stringify(this.filteModelContent));this.contentService.ServiceGetAllEditor(t).subscribe({next:e=>{e.isSuccess?(this.fieldsInfo=this.publicHelper.fieldInfoConvertor(e.access),this.dataModelResult=e,this.tableSource.data=e.listItems,this.optionsStatist?.data?.show&&this.onActionButtonStatist(!0),this.optionsSearch.childMethods&&this.optionsSearch.childMethods.setAccess(e.access)):this.cmsToastrService.typeErrorMessage(e.errorMessage),this.publicHelper.processService.processStop(i)},error:e=>{this.cmsToastrService.typeError(e),this.publicHelper.processService.processStop(i,!1)}})}onTableSortData(i){this.tableSource&&this.tableSource.sort&&this.tableSource.sort.active===i.active?this.tableSource.sort.start==="asc"?(i.start="desc",this.filteModelContent.sortColumn=i.active,this.filteModelContent.sortType=Y.Descending):this.tableSource.sort.start==="desc"?(i.start="asc",this.filteModelContent.sortColumn="",this.filteModelContent.sortType=Y.Ascending):i.start="desc":(this.filteModelContent.sortColumn=i.active,this.filteModelContent.sortType=Y.Descending),this.tableSource.sort=i,this.filteModelContent.currentPageNumber=0,this.DataGetAll()}onTablePageingData(i){this.filteModelContent.currentPageNumber=i.pageIndex+1,this.filteModelContent.rowPerPage=i.pageSize,this.DataGetAll()}onActionButtonNewRow(){var i="";this.tokenHelper.isMobile?i="dialog-fullscreen":i="dialog-min",this.dialog.open(Vt,{height:"90%",panelClass:i,enterAnimationDuration:Z.cmsViewConfig.enterAnimationDuration,exitAnimationDuration:Z.cmsViewConfig.exitAnimationDuration,data:{linkModuleEntityId:this.requestLinkModuleEntityId}}).afterClosed().subscribe(e=>{e&&e.dialogChangedDate&&this.DataGetAll()})}onActionButtonEditRow(i=this.tableRowSelected){if(!i||!i.id||i.id.length===0){this.cmsToastrService.typeErrorSelectedRow();return}if(this.onActionTableRowSelect(i),this.dataModelResult==null||this.dataModelResult.access==null||!this.dataModelResult.access.accessEditRow){this.cmsToastrService.typeErrorAccessEdit();return}var t="";this.tokenHelper.isMobile?t="dialog-fullscreen":t="dialog-min",this.dialog.open(Bt,{height:"90%",panelClass:t,enterAnimationDuration:Z.cmsViewConfig.enterAnimationDuration,exitAnimationDuration:Z.cmsViewConfig.exitAnimationDuration,data:{id:this.tableRowSelected.id}}).afterClosed().subscribe(p=>{p&&p.dialogChangedDate&&this.DataGetAll()})}onActionButtonDeleteRow(i=this.tableRowSelected){if(!i||!i.id||i.id.length===0){this.translate.get("MESSAGE.no_row_selected_to_delete").subscribe(p=>{this.cmsToastrService.typeErrorSelected(p)});return}if(this.onActionTableRowSelect(i),this.dataModelResult==null||this.dataModelResult.access==null||!this.dataModelResult.access.accessDeleteRow){this.cmsToastrService.typeErrorAccessDelete();return}var t="",e="";this.translate.get(["MESSAGE.Please_Confirm","MESSAGE.Do_you_want_to_delete_this_content"]).subscribe(p=>{t=p["MESSAGE.Please_Confirm"],e=p["MESSAGE.Do_you_want_to_delete_this_content"]+"?<br> ( "+this.tableRowSelected.id+" ) "}),this.cmsConfirmationDialogService.confirm(t,e).then(p=>{if(p){let f=this.constructor.name+"main";this.translate.get("MESSAGE.Receiving_information").subscribe(n=>{this.publicHelper.processService.processStart(f,n,this.constructor.name)}),this.contentService.ServiceDelete(this.tableRowSelected.id).subscribe({next:n=>{n.isSuccess?(this.cmsToastrService.typeSuccessRemove(),this.DataGetAll()):this.cmsToastrService.typeErrorRemove(),this.publicHelper.processService.processStop(f)},error:n=>{this.cmsToastrService.typeError(n),this.publicHelper.processService.processStop(f,!1)}})}}).catch(()=>{})}onActionButtonStatist(i=!this.optionsStatist.data.show){if(this.optionsStatist.data.show=i,!this.optionsStatist.data.show)return;let t=new Map;this.translate.get("MESSAGE.Active").subscribe(n=>{t.set(n,0)}),this.translate.get("MESSAGE.All").subscribe(n=>{t.set(n,0)});let e=this.constructor.name+".ServiceStatist";this.translate.get("MESSAGE.Get_the_statist").subscribe(n=>{this.publicHelper.processService.processStart(e,n,this.constructor.name)}),this.contentService.ServiceGetCount(this.filteModelContent).subscribe({next:n=>{n.isSuccess&&(this.translate.get("MESSAGE.All").subscribe(D=>{t.set(D,n.totalRowCount)}),this.optionsStatist.childMethods.setStatistValue(t)),this.publicHelper.processService.processStop(e)},error:n=>{this.cmsToastrService.typeError(n),this.publicHelper.processService.processStop(e,!1)}});let p=JSON.parse(JSON.stringify(this.filteModelContent)),f=new we;f.propertyName="RecordStatus",f.value=qe.Available,p.filters.push(f),this.contentService.ServiceGetCount(p).subscribe({next:n=>{n.isSuccess?(this.translate.get("MESSAGE.Active").subscribe(D=>{t.set(D,n.totalRowCount)}),this.optionsStatist.childMethods.setStatistValue(t)):this.cmsToastrService.typeErrorMessage(n.errorMessage),this.publicHelper.processService.processStop(e)},error:n=>{this.cmsToastrService.typeError(n),this.publicHelper.processService.processStop(e,!1)}})}onActionButtonModuleEntityDataReportRow(i=this.tableRowSelected){if(!i||!i.id||i.id.length===0){this.translate.get("ERRORMESSAGE.MESSAGE.typeErrorSelectedRow").subscribe(t=>{this.cmsToastrService.typeErrorSelected(t)});return}this.onActionTableRowSelect(i),this.router.navigate(["corelog/report-data/LinkModuleEntityReportFileId/",i.id])}onActionButtonReload(){this.DataGetAll()}onSubmitOptionsSearch(i){this.filteModelContent.filters=i,this.DataGetAll()}};d.\u0275fac=function(t){return new(t||d)(M(B),M(K),M(Q),M(Me),M(Je),M(We),M(Ke),M(Ge),M(G),M(q),M(Xe),M(J),M(He))},d.\u0275cmp=P({type:d,selectors:[["app-core-module-entity-report-file-list"]],features:[W],decls:67,vars:31,consts:[["tableSort","matSort"],["paginator",""],["actionMenu","matMenu"],[3,"optionActionGuideNoticeDisplayChange","optionOnActionButtonMemoRow","optionOnActionButtonMemo","optionOnActionButtonExport","optionOnActionButtonPrintRow","optionsListInfoAreaId","optionGuideNoticeKey","optionActionGuideNoticeDisplay","optionTreeDisplay","optionActionRowId","optionActionRowDisplayMenu","optionSelectRowItemTitle"],["cms-tree",""],["cms-header",""],["cms-action-header",""],[1,"d-flex","justify-content-between","flex-wrap"],[1,"justify-content-end"],[1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-highlight"],[1,"custom-slide-toggle",3,"ngModelChange","ngModel"],[3,"click","ngModelChange","ngModel"],[1,"justify-content-start"],["type","button","target","_blank",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-highlight",3,"click"],[1,"fa-solid","fa-info","font-18",2,"color","#ffffff"],[1,"fa-solid","fa-rotate-right","font-18",2,"color","#ffffff"],["cms-action-main",""],["class","col-4",4,"ngIf"],["cms-action-row",""],[1,"col-4"],["target","_blank",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-highlight",3,"click"],[1,"fa-solid","fa-file-chart-column","font-18",2,"color","#ffffff"],[1,"font-11","text-center","opacity-70"],["cms-action-area",""],[3,"optionsChange","options"],["cms-body",""],["matSort","",3,"matSortChange","dataSource"],["matColumnDef","Id"],["mat-sort-header","",4,"matHeaderCellDef"],[4,"matCellDef"],["matColumnDef","RecordStatus"],[3,"ngClass",4,"matCellDef"],["matColumnDef","LinkModuleEntityId"],["matColumnDef","Title"],["matColumnDef","Description"],["matColumnDef","ReportFileType"],["matColumnDef","Action"],[4,"matHeaderCellDef"],["class"," Action",4,"matCellDef"],["matColumnDef","position"],[4,"matHeaderRowDef"],[3,"ntk-row-odd","ntk-row-even","ntk-row-selected","click",4,"matRowDef","matRowDefColumns"],["cms-footer",""],[3,"page","length","pageIndex","pageSize","pageSizeOptions"],["type","button","target","_blank",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-teal",3,"click"],[1,"fa-solid","fa-plus","font-18",2,"color","#FFFFFF"],["target","_blank",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-magenta",3,"click"],[1,"fa-solid","fa-pen","font-18",2,"color","#FFFFFF"],["target","_blank",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-red",3,"click"],[1,"fa-solid","fa-trash","font-18",2,"color","#ffffff"],["mat-sort-header",""],[3,"ngClass"],["matNativeControl","","cmsRecordStatusSelfSave","","style","background: none; border: none;",3,"contentService","row","ngStyle",4,"ngIf"],["matNativeControl","","cmsRecordStatusSelfSave","",2,"background","none","border","none",3,"contentService","row","ngStyle"],[1,"Action"],["type","button","mat-icon-button","","aria-label","Action Menu",3,"matMenuTriggerFor"],["cdkDragHandle","",2,"pointer-events","all"],[3,"click"]],template:function(t,e){if(t&1){let p=F();s(0,"app-cms-html-list",3),R("optionActionGuideNoticeDisplayChange",function(n){return m(p),w(e.viewGuideNotice,n)||(e.viewGuideNotice=n),u(n)}),E("optionOnActionButtonMemoRow",function(){return m(p),u(e.onActionButtonMemoRow())})("optionOnActionButtonMemo",function(){return m(p),u(e.onActionButtonMemo())})("optionOnActionButtonExport",function(){return m(p),u(e.onActionButtonExport())})("optionOnActionButtonPrintRow",function(){return m(p),u(e.onActionButtonPrintRow())}),T(1,4),c(2," -------------------------------------- "),A(),Ae(3,5),T(4,6),s(5,"div",7)(6,"div",8)(7,"a",9)(8,"mat-slide-toggle",10),R("ngModelChange",function(n){return m(p),w(e.optionsSearch.data.show,n)||(e.optionsSearch.data.show=n),u(n)}),a(),c(9),h(10,"translate"),a(),s(11,"a",9)(12,"mat-slide-toggle",11),E("click",function(){return m(p),u(e.onActionButtonStatist())}),R("ngModelChange",function(n){return m(p),w(e.optionsStatist.data.show,n)||(e.optionsStatist.data.show=n),u(n)}),a(),c(13),h(14,"translate"),a()(),s(15,"div",12)(16,"a",13),E("click",function(){return m(p),u(e.viewGuideNotice=!e.viewGuideNotice)}),v(17,"i",14),a(),s(18,"a",13),E("click",function(){return m(p),u(e.onActionButtonReload())}),v(19,"i",15),a()()(),A(),T(20,16),y(21,fi,7,3,"div",17),A(),T(22,18),y(23,gi,7,3,"div",17)(24,_i,7,3,"div",17),s(25,"div",19)(26,"a",20),E("click",function(){return m(p),u(e.onActionButtonModuleEntityDataReportRow(e.tableRowSelected))}),v(27,"i",21)(28,"br"),a(),s(29,"p",22),c(30),h(31,"translate"),a()(),A(),T(32,23),s(33,"app-cms-search-list",24),R("optionsChange",function(n){return m(p),w(e.optionsSearch,n)||(e.optionsSearch=n),u(n)}),a(),s(34,"app-cms-statist-list",24),R("optionsChange",function(n){return m(p),w(e.optionsStatist,n)||(e.optionsStatist=n),u(n)}),a(),A(),T(35,25),s(36,"mat-table",26,0),E("matSortChange",function(){m(p);let n=L(37);return u(e.onTableSortData(n))}),T(38,27),y(39,hi,2,1,"mat-header-cell",28)(40,Ci,2,1,"mat-cell",29),A(),T(41,30),y(42,Si,2,1,"mat-header-cell",28)(43,yi,5,7,"mat-cell",31),A(),T(44,32),y(45,Ei,2,1,"mat-header-cell",28)(46,Ii,2,1,"mat-cell",29),A(),T(47,33),y(48,wi,2,1,"mat-header-cell",28)(49,Ri,2,1,"mat-cell",29),A(),T(50,34),y(51,vi,2,1,"mat-header-cell",28)(52,bi,2,1,"mat-cell",29),A(),T(53,35),y(54,Fi,2,1,"mat-header-cell",28)(55,Ti,3,4,"mat-cell",29),A(),T(56,36),y(57,Ai,3,3,"mat-header-cell",37)(58,xi,6,1,"mat-cell",38),A(),T(59,39),y(60,Li,3,3,"mat-header-cell",28)(61,Di,3,0,"mat-cell",29),A(),y(62,ki,1,0,"mat-header-row",40)(63,Vi,1,6,"mat-row",41),a(),A(),T(64,42),s(65,"mat-paginator",43,1),E("page",function(n){return m(p),u(e.onTablePageingData(n))}),a(),A(),a()}t&2&&(g("optionsListInfoAreaId",e.constructor.name)("optionGuideNoticeKey",""),I("optionActionGuideNoticeDisplay",e.viewGuideNotice),g("optionTreeDisplay",!1)("optionActionRowId",e.tableRowSelected==null?null:e.tableRowSelected.id)("optionActionRowDisplayMenu",e.tableRowSelectDoubleClick)("optionSelectRowItemTitle",(e.tableRowSelected==null||e.tableRowSelected.title==null?null:e.tableRowSelected.title.length)>0?e.tableRowSelected==null?null:e.tableRowSelected.title:e.tableRowSelected==null?null:e.tableRowSelected.id),l(8),I("ngModel",e.optionsSearch.data.show),l(),S("",C(10,24,"ACTION.SEARCH")," "),l(3),I("ngModel",e.optionsStatist.data.show),l(),S("",C(14,26,"ACTION.STATIST")," "),l(8),g("ngIf",e.dataModelResult==null||e.dataModelResult.access==null?null:e.dataModelResult.access.accessAddRow),l(2),g("ngIf",e.dataModelResult==null||e.dataModelResult.access==null?null:e.dataModelResult.access.accessEditRow),l(),g("ngIf",e.dataModelResult==null||e.dataModelResult.access==null?null:e.dataModelResult.access.accessDeleteRow),l(6),b(C(31,28,"ACTION.Reports")),l(3),I("options",e.optionsSearch),l(),I("options",e.optionsStatist),l(2),g("dataSource",e.tableSource),l(26),g("matHeaderRowDef",e.tabledisplayedColumns),l(),g("matRowDefColumns",e.tabledisplayedColumns),l(2),g("length",e.dataModelResult.totalRowCount)("pageIndex",e.dataModelResult.currentPageNumber-1)("pageSize",e.dataModelResult.rowPerPage)("pageSizeOptions",xe(30,mi)))},dependencies:[ke,N,Ve,H,j,Ne,je,z,Ye,Ze,$e,et,tt,it,ot,rt,dt,lt,nt,pt,at,st,ct,mt,Ct,St,ht,ut,U,ft,_t,gt],encapsulation:2});let o=d;return o})();var Bi=[{path:"",children:[{path:"",component:ve},{path:"LinkModuleEntityReportFileId/:LinkModuleEntityReportFileId",component:ve}]}],Ot=(()=>{let d=class d{};d.\u0275fac=function(t){return new(t||d)},d.\u0275mod=ee({type:d}),d.\u0275inj=$({imports:[Ie.forChild(Bi),Ie]});let o=d;return o})();var Po=(()=>{let d=class d{};d.\u0275fac=function(t){return new(t||d)},d.\u0275mod=ee({type:d}),d.\u0275inj=$({providers:[B,Me],imports:[Be,Oe,Ot,Pe.withConfig({warnOnNgModelWithFormControl:"never"}),Mt,It,Rt,vt,Qe]});let o=d;return o})();export{Po as CoreModuleEntityReportFileModule};
