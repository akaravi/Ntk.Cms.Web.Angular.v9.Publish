import{a as Ht}from"./chunk-NGVXDNWZ.js";import{a as Tt}from"./chunk-CARLNGNE.js";import{a as Ue}from"./chunk-7APFNTNH.js";import{a as It}from"./chunk-NXZG4RFJ.js";import{a as ht}from"./chunk-BRMVS3UD.js";import{a as ji,b as Bn}from"./chunk-2LRZ4YWF.js";import{a as Rt}from"./chunk-DBIX2OAK.js";import{$ as Ae,$b as Ye,Ab as L,Ac as En,Ad as qi,B as yi,Bc as yn,Bd as We,Cb as Q,Cc as An,Dc as xn,Ec as Dn,Hd as Wi,Id as je,J as we,Jc as Mt,K as Te,L as Ie,N as sn,Nb as Bi,O as cn,Oa as pe,Ob as Fi,Od as Vn,Pa as he,Qa as xe,Sc as Nt,Uc as ft,Vc as ii,Wa as De,Za as K,Zc as kt,_b as In,_c as Et,ac as Ze,ad as Rn,ba as dn,bb as Ai,bc as $e,ca as ei,cb as xi,cc as et,db as Di,dc as tt,ec as it,gc as Ni,gd as Zi,hc as Oi,ic as Gi,jc as Pi,jd as ge,lc as nt,m as ki,mc as ot,nc as rt,nd as Hi,oc as at,p as ae,pa as P,pc as lt,pd as qe,qa as H,qc as st,rc as ct,s as q,sb as Vi,sc as dt,sd as Ln,t as _e,tb as Cn,tc as pt,ub as ie,uc as mt,v as Se,va as Be,vb as N,vc as vn,w as Ei,wb as Tn,wc as bn,x as U,xc as wn,y as Ce,yc as Mn,zb as He,zc as kn}from"./chunk-C5C36AMC.js";import{a as W}from"./chunk-R73LELLD.js";import{Aa as Ut,Ab as Bt,Al as Ne,Bd as j,Bl as Sn,Cl as Oe,Db as ne,Dc as Je,Dl as Dt,Eb as oe,Ed as Ri,El as Pt,Fb as re,Fc as Ve,Fd as _t,Ha as bi,Ia as bt,Ib as D,Id as mn,Je as fn,Jl as wt,Kb as p,Kd as St,Kl as Yi,L as _i,La as r,Lb as w,Lc as ln,Ld as J,Ll as Ge,Ma as g,Mb as C,Ml as Ct,Nb as an,Nl as ut,O as Si,Od as Z,Pd as $,Qb as y,Qd as le,Rb as A,Sb as x,Vb as ze,Vd as X,W as Ci,Wb as Ke,X as Ti,Yb as S,Za as z,Zb as T,Zd as un,_b as Zt,ab as v,bb as Vt,cb as m,cg as hn,da as Ii,eb as Ee,fd as ve,g as ci,gc as O,gd as pn,hd as de,ja as F,ka as vi,kd as Xi,lb as l,mb as a,nb as I,nd as Gt,ob as k,pb as E,qb as ye,ra as f,rb as M,rd as Ft,sa as h,u as hi,ub as b,ul as gn,v as gi,vl as At,wb as u,wd as ti,wl as Fe,xb as wi,xc as yt,xl as Li,yb as Mi,yc as $t,yl as _n,zb as R,zc as G,zd as Xe,zl as xt}from"./chunk-XKQYEJGP.js";var Fn=(()=>{let s=class s{constructor(){}ngOnInit(){}};s.\u0275fac=function(i){return new(i||s)},s.\u0275cmp=F({type:s,selectors:[["app-ticketing"]],decls:1,vars:0,template:function(i,e){i&1&&I(0,"router-outlet")},dependencies:[pn],encapsulation:2});let n=s;return n})();var to=["*"];function io(n,s){if(n&1&&(l(0,"label",13),p(1),a()),n&2){let o=u();Bt("for","app-cms-site-selector-",o.id,""),r(),w(o.optionLabel)}}function no(n,s){if(n&1&&(I(0,"img",14),S(1,"cmsthumbnail")),n&2){let o=u();R("src",T(1,1,o.dataModelSelect==null?null:o.dataModelSelect.linkMainImageIdSrc),bt)}}function oo(n,s){if(n&1&&(I(0,"img",14),S(1,"cmsthumbnail")),n&2){let o=u().$implicit;R("src",T(1,1,o.linkMainImageIdSrc),bt)}}function ro(n,s){if(n&1&&(l(0,"mat-option",15),v(1,oo,2,3,"img",5),l(2,"span"),p(3),a()()),n&2){let o=s.$implicit,t=u();m("value",o)("disabled",t.optionDisabled),r(),m("ngIf",o.linkMainImageIdSrc),r(2),w(t.displayOption(o))}}function ao(n,s){n&1&&I(0,"i",16)}function lo(n,s){n&1&&I(0,"i",17)}function so(n,s){if(n&1){let o=M();l(0,"i",18),b("click",function(){f(o);let i=u();return h(i.onActionSelectClear())}),a()}}function co(n,s){n&1&&(l(0,"em"),p(1),S(2,"translate"),a()),n&2&&(r(),C("(",T(2,1,"TITLE.Necessary"),")"))}var Pe=(()=>{let s=class s{constructor(t,i,e,c,_){this.coreEnumService=t,this.cdr=i,this.publicHelper=e,this.translate=c,this.categoryService=_,this.id=++s.nextId,this.dataModelResult=new J,this.dataModelSelect=new Ge,this.formControl=new Ei,this.optionDisabled=!1,this.optionSelectFirstItem=!1,this.optionPlaceholder="",this.optionRequired=!1,this.optionLabel="",this.optionChange=new Ut,this.optionReload=()=>this.onActionButtonReload(),this.publicHelper.processService.cdr=this.cdr}set optionSelectForce(t){this.onActionSelectForce(t)}ngOnInit(){this.loadOptions()}loadOptions(){this.filteredOptions=this.formControl.valueChanges.pipe(Ci(""),_i(1500),Si(),Ti(t=>typeof t=="string"||typeof t=="number"?this.DataGetAll(t||""):[]))}displayFn(t){return t?t.title:void 0}displayOption(t){return t?t.title:void 0}DataGetAll(t){return ci(this,null,function*(){let i=new $;i.rowPerPage=20,i.accessLoad=!0;let e=new Z;e.propertyName="Title",e.value=t,e.searchType=ti.Contains,e.clauseType=Ft.Or,i.filters.push(e),t&&typeof+t=="number"&&+t>0&&(e=new Z,e.propertyName="Id",e.value=t,e.searchType=ti.Equal,e.clauseType=Ft.Or,i.filters.push(e));let c=this.constructor.name+"main";return this.translate.get("MESSAGE.Receiving_information").subscribe(_=>{this.publicHelper.processService.processStart(c,_,this.constructor.name)}),yield hi(this.categoryService.ServiceGetAll(i)).then(_=>(this.dataModelResult=_,this.optionSelectFirstItem&&(!this.dataModelSelect||!this.dataModelSelect.id||this.dataModelSelect.id<=0)&&this.dataModelResult.listItems.length>0&&(this.optionSelectFirstItem=!1,setTimeout(()=>{this.formControl.setValue(this.dataModelResult.listItems[0])},1e3),this.onActionSelect(this.dataModelResult.listItems[0])),this.publicHelper.processService.processStop(c),_.listItems))})}onActionSelect(t){this.dataModelSelect=t,this.optionChange.emit(this.dataModelSelect)}onActionSelectClear(){this.dataModelSelect=null,this.formControl.setValue(null),this.optionChange.emit(null)}push(t){return this.filteredOptions.pipe(gi(i=>(i.find(e=>e.id===t.id)||i.push(t),i)))}onActionSelectForce(t){if(typeof t=="number"&&t>0){if(this.dataModelSelect&&this.dataModelSelect.id===t)return;if(this.dataModelResult&&this.dataModelResult.listItems&&this.dataModelResult.listItems.find(i=>i.id===t)){let i=this.dataModelResult.listItems.find(e=>e.id===t);this.dataModelSelect=i,this.formControl.setValue(i);return}this.categoryService.ServiceGetOneById(t).subscribe({next:i=>{i.isSuccess&&(this.filteredOptions=this.push(i.item),this.dataModelSelect=i.item,this.formControl.setValue(i.item),this.optionChange.emit(i.item))}});return}if(typeof t==typeof Ge){this.filteredOptions=this.push(t),this.dataModelSelect=t,this.formControl.setValue(t);return}this.formControl.setValue(null)}onActionButtonReload(){this.dataModelSelect=new Ge,this.loadOptions()}};s.nextId=0,s.\u0275fac=function(i){return new(i||s)(g(X),g(O),g(L),g(P),g(Fe))},s.\u0275cmp=F({type:s,selectors:[["app-ticketing-departemen-selector"]],inputs:{optionDisabled:"optionDisabled",optionSelectFirstItem:"optionSelectFirstItem",optionPlaceholder:"optionPlaceholder",optionRequired:"optionRequired",optionLabel:"optionLabel",optionReload:"optionReload",optionSelectForce:"optionSelectForce"},outputs:{optionChange:"optionChange"},ngContentSelectors:to,decls:16,vars:18,consts:[["matauto","matAutocomplete"],[1,"input-style","has-borders","has-icon","input-style-always-active","validate-field","mb-4","progressOverlayContainer"],[3,"optionsInfoAreaId"],["class","color-highlight",3,"for",4,"ngIf"],["matPrefix",""],["style","vertical-align:middle;","class","ntk-hover-zoom","aria-hidden","","height","25","width","25",3,"src",4,"ngIf"],["type","text","aria-label","Assignee","matInput","","id","forminput",3,"placeholder","formControl","matAutocomplete","required","id"],[3,"optionSelected","displayWith"],[3,"value","disabled",4,"ngFor","ngForOf"],["class","fa fa-info  invalid color-red-dark",4,"ngIf"],["class","fa fa-check  valid color-green-dark",4,"ngIf"],["class","fa fa-times  action color-red-dark",3,"click",4,"ngIf"],[4,"ngIf"],[1,"color-highlight",3,"for"],["aria-hidden","","height","25","width","25",1,"ntk-hover-zoom",2,"vertical-align","middle",3,"src"],[3,"value","disabled"],[1,"fa","fa-info","invalid","color-red-dark"],[1,"fa","fa-check","valid","color-green-dark"],[1,"fa","fa-times","action","color-red-dark",3,"click"]],template:function(i,e){if(i&1){let c=M();wi(),l(0,"div",1),I(1,"app-progress-spinner",2),v(2,io,2,3,"label",3),l(3,"span",4),v(4,no,2,3,"img",5),p(5," \xA0"),a(),I(6,"input",6),l(7,"mat-autocomplete",7,0),b("optionSelected",function(d){return f(c),h(e.onActionSelect(d.option.value))}),v(9,ro,4,4,"mat-option",8),S(10,"async"),a(),v(11,ao,1,0,"i",9)(12,lo,1,0,"i",10)(13,so,1,0,"i",11)(14,co,3,3,"em",12),Mi(15),a()}if(i&2){let c=D(8);r(),m("optionsInfoAreaId",e.constructor.name),r(),m("ngIf",(e.optionLabel==null?null:e.optionLabel.length)>0),r(2),m("ngIf",e.dataModelSelect&&(e.dataModelSelect==null?null:e.dataModelSelect.linkMainImageIdSrc)),r(2),R("placeholder",e.optionPlaceholder),Bt("id","app-cms-site-selector-",e.id,""),m("formControl",e.formControl)("matAutocomplete",c)("required",e.optionRequired),Vt("disabled",e.optionDisabled?!0:null),r(),m("displayWith",e.displayFn),r(2),m("ngForOf",T(10,16,e.filteredOptions)),r(2),m("ngIf",!e.formControl.valid),r(),m("ngIf",e.optionRequired&&e.formControl.valid),r(),m("ngIf",(e.dataModelSelect==null?null:e.dataModelSelect.id)>0),r(),m("ngIf",e.optionRequired&&(!e.dataModelSelect||!e.dataModelSelect.id||e.dataModelSelect.id<=0))}},dependencies:[$t,G,ae,q,we,yi,Bi,ki,Fi,dn,K,Q,Ve,H,Nt],encapsulation:2});let n=s;return n})();var po=["vform"];function mo(n,s){if(n&1){let o=M();l(0,"app-cms-enum-record-status-selector",11),x("modelChange",function(i){f(o);let e=u();return A(e.dataModel.recordStatus,i)||(e.dataModel.recordStatus=i),h(i)}),a()}if(n&2){let o=u();y("model",o.dataModel.recordStatus),m("optionDisabled",!1)("optionLabel",o.fieldsInfo.recordStatus==null?null:o.fieldsInfo.recordStatus.fieldTitle)("optionRequired",!0)("optionSelectFirstItem",!0)}}function uo(n,s){if(n&1){let o=M();l(0,"div",12)(1,"label",13),p(2),S(3,"translate"),a(),l(4,"textarea",14,1),S(6,"translate"),x("ngModelChange",function(i){f(o);let e=u();return A(e.dataModel.htmlBody,i)||(e.dataModel.htmlBody=i),h(i)}),p(7,"                "),a(),l(8,"em"),p(9),a()()}if(n&2){let o=D(5),t=u();r(2),w(T(3,5,"TITLE.Answer_Text")),r(2),R("placeholder",T(6,7,"TITLE.Answer_Text")),y("ngModel",t.dataModel.htmlBody),m("disabled",!(t.fieldsInfo.htmlBody!=null&&t.fieldsInfo.htmlBody.accessAddField)),r(5),C("",o.value.length," / 1000")}}function fo(n,s){if(n&1){let o=M();l(0,"div",15)(1,"button",16),b("click",function(){f(o);let i=u();return h(i.onActionBackToParent())}),p(2),S(3,"translate"),a(),l(4,"button",17),p(5),S(6,"translate"),a()()}if(n&2){u();let o=D(9);r(2),C(" ",T(3,3,"ACTION.BACK")," "),r(2),m("disabled",!o.form.valid),r(),C(" ",T(6,5,"ACTION.SAVE")," ")}}var Nn=(()=>{let s=class s extends ht{constructor(t,i,e,c,_,d,V,B,Y,te){super(d,new wt,c,te),this.data=t,this.dialogRef=i,this.activatedRoute=e,this.publicHelper=c,this.coreEnumService=_,this.ticketingAnswerService=d,this.cmsToastrService=V,this.router=B,this.cdr=Y,this.translate=te,this.requestLinkTaskId=0,this.formInfo=new le,this.fieldsInfo=new Map,this.dataModel=new wt,this.dataModelResult=new J,this.selectFileTypeMainImage=["jpg","jpeg","png"],this.fileManagerOpenForm=!1,this.appLanguage="fa",this.mapOptonCenter=new Tt,this.publicHelper.processService.cdr=this.cdr,this.fileManagerTree=this.publicHelper.GetfileManagerTreeConfig(),t&&(this.requestLinkTaskId=+t.linkTaskId||0)}ngOnInit(){if(this.requestLinkTaskId===0){this.cmsToastrService.typeErrorAddRowParentIsNull();return}this.dataModel.linkTaskId=this.requestLinkTaskId,this.DataGetAccess()}onFormSubmit(){if(!this.formGroup.valid){this.cmsToastrService.typeErrorFormInvalid();return}this.DataAddContent()}DataAddContent(){this.formInfo.formSubmitAllow=!1,this.translate.get("MESSAGE.sending_information_to_the_server").subscribe(i=>{this.formInfo.formAlert=i}),this.formInfo.formError="";let t=this.constructor.name+"main";this.translate.get("MESSAGE.Receiving_information").subscribe(i=>{this.publicHelper.processService.processStart(t,i,this.constructor.name)}),this.ticketingAnswerService.ServiceAdd(this.dataModel).subscribe({next:i=>{this.formInfo.formSubmitAllow=!i.isSuccess,this.dataModelResult=i,i.isSuccess?(this.translate.get("MESSAGE.registration_completed_successfully").subscribe(e=>{this.formInfo.formAlert=e}),this.cmsToastrService.typeSuccessAdd(),setTimeout(()=>{this.dialogRef.close({dialogChangedDate:!0})},1e3)):this.cmsToastrService.typeErrorAdd(i.errorMessage),this.publicHelper.processService.processStop(t)},error:i=>{this.publicHelper.processService.processStop(t),this.formInfo.formSubmitAllow=!0,this.cmsToastrService.typeErrorAdd(i)}})}onStepClick(t,i){t.previouslySelectedIndex<t.selectedIndex}onActionBackToParent(){this.dialogRef.close({dialogChangedDate:!1})}onActionFileSelectedLinkMainImageId(){}onActionSelectSource(t){if(!t||t.id<=0){this.cmsToastrService.typeErrorMessage(this.translate.instant("MESSAGE.Specify_the_source"),this.translate.instant("MESSAGE.The_source_of_the_information_application_is_not_known"));return}this.dataModel.linkTicketingDepartemenId=t.id}};s.\u0275fac=function(i){return new(i||s)(g(he),g(pe),g(ve),g(L),g(X),g(At),g(N),g(de),g(O),g(P))},s.\u0275cmp=F({type:s,selectors:[["app-ticketing-answer-add"]],viewQuery:function(i,e){if(i&1&&ne(po,5),i&2){let c;oe(c=re())&&(e.formGroup=c.first)}},features:[z],decls:15,vars:13,consts:[["vform","ngForm"],["HtmlBody",""],[1,"card","card-style","progressOverlayContainer"],[3,"optionsInfoAreaId"],[1,"content","mb-0"],[1,"mb-0","color-highlight","font-600","font-12"],[3,"ngSubmit"],[3,"model","optionDisabled","optionLabel","optionRequired","optionSelectFirstItem","modelChange",4,"ngIf"],[3,"optionChange","optionSelectForce","optionPlaceholder","optionDisabled"],["class","input-style has-borders no-icon input-style-always-active validate-field mb-4",4,"ngIf"],["class","form-actions",4,"ngIf"],[3,"modelChange","model","optionDisabled","optionLabel","optionRequired","optionSelectFirstItem"],[1,"input-style","has-borders","no-icon","input-style-always-active","validate-field","mb-4"],["for","dataModel.htmlBody",1,"color-highlight"],["matInput","","name","dataModel.htmlBody","type","text","minlength","0","maxlength","1000","rows","5","id","dataModel.htmlBody",1,"form-control","validate-name",3,"ngModelChange","ngModel","placeholder","disabled"],[1,"form-actions"],["type","button",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-gray",3,"click"],["type","submit",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-green",3,"disabled"]],template:function(i,e){if(i&1){let c=M();l(0,"div",2),I(1,"app-progress-spinner",3),l(2,"div",4)(3,"p",5),p(4),a(),l(5,"p"),p(6),S(7,"translate"),a(),l(8,"form",6,0),b("ngSubmit",function(){return f(c),h(e.onFormSubmit())}),v(10,mo,1,5,"app-cms-enum-record-status-selector",7),l(11,"app-ticketing-departemen-selector",8),S(12,"translate"),b("optionChange",function(d){return f(c),h(e.onActionSelectSource(d))}),a(),v(13,uo,10,9,"div",9)(14,fo,7,7,"div",10),a()()()}i&2&&(r(),m("optionsInfoAreaId",e.constructor.name),r(3),C(" ",e.formInfo.formTitle," "),r(2),C(" ",T(7,9,"TITLE.Be_Careful_When_Entering_Information")," "),r(4),m("ngIf",e.fieldsInfo.recordStatus==null?null:e.fieldsInfo.recordStatus.accessWatchField),r(),m("optionSelectForce",e.dataModel.linkTicketingDepartemenId)("optionPlaceholder",T(12,11,"TITLE.Department"))("optionDisabled",!(e.fieldsInfo.linkTicketingDepartemenId!=null&&e.fieldsInfo.linkTicketingDepartemenId.accessAddField)),r(2),m("ngIf",e.fieldsInfo.htmlBody==null?null:e.fieldsInfo.htmlBody.accessWatchField),r(),m("ngIf",e.formInfo.formSubmitAllow))},dependencies:[G,Ce,ae,q,_e,Te,Ie,U,Se,K,ge,Q,Pe,H]});let n=s;return n})();var ho=["vform"];function go(n,s){if(n&1){let o=M();l(0,"app-cms-enum-record-status-selector",11),x("modelChange",function(i){f(o);let e=u();return A(e.dataModel.recordStatus,i)||(e.dataModel.recordStatus=i),h(i)}),a()}if(n&2){let o=u();y("model",o.dataModel.recordStatus),m("optionDisabled",!1)("optionLabel",o.fieldsInfo.recordStatus==null?null:o.fieldsInfo.recordStatus.fieldTitle)("optionRequired",!0)("optionSelectFirstItem",!0)}}function _o(n,s){if(n&1){let o=M();l(0,"div",12)(1,"label",13),p(2),S(3,"translate"),a(),l(4,"textarea",14,1),S(6,"translate"),x("ngModelChange",function(i){f(o);let e=u();return A(e.dataModel.htmlBody,i)||(e.dataModel.htmlBody=i),h(i)}),p(7,"                "),a(),l(8,"em"),p(9),a()()}if(n&2){let o=D(5),t=u();r(2),w(T(3,5,"TITLE.Answer_Text")),r(2),R("placeholder",T(6,7,"TITLE.Answer_Text")),y("ngModel",t.dataModel.htmlBody),m("disabled",!(t.fieldsInfo.htmlBody!=null&&t.fieldsInfo.htmlBody.accessEditField)),r(5),C("",o.value.length," / 1000")}}function So(n,s){if(n&1){let o=M();l(0,"div",15)(1,"button",16),b("click",function(){f(o);let i=u();return h(i.onActionBackToParent())}),p(2),S(3,"translate"),a(),l(4,"button",17),p(5),S(6,"translate"),a()()}if(n&2){u();let o=D(9);r(2),C(" ",T(3,3,"ACTION.BACK")," "),r(2),m("disabled",!o.form.valid),r(),C(" ",T(6,5,"ACTION.SAVE")," ")}}var On=(()=>{let s=class s extends It{constructor(t,i,e,c,_,d,V,B,Y,te){super(d,new wt,c,te),this.data=t,this.dialogRef=i,this.activatedRoute=e,this.publicHelper=c,this.coreEnumService=_,this.ticketingAnswerService=d,this.cmsToastrService=V,this.router=B,this.cdr=Y,this.translate=te,this.requestId=0,this.formInfo=new le,this.dataModel=new wt,this.dataModelResult=new St,this.selectFileTypeMainImage=["jpg","jpeg","png"],this.fileManagerOpenForm=!1,this.appLanguage="fa",this.mapOptonCenter=new Tt,this.publicHelper.processService.cdr=this.cdr,this.fileManagerTree=this.publicHelper.GetfileManagerTreeConfig(),t&&(this.requestId=+t.id||0)}ngOnInit(){if(this.requestId===0){this.cmsToastrService.typeErrorAddRowParentIsNull();return}this.DataGetOne(this.requestId)}onFormSubmit(){if(!this.formGroup.valid){this.cmsToastrService.typeErrorFormInvalid();return}this.DataEditContent()}DataGetOne(t){this.formInfo.formSubmitAllow=!1,this.translate.get("MESSAGE.get_information_from_the_server").subscribe(e=>{this.formInfo.formAlert=e}),this.formInfo.formError="";let i=this.constructor.name+"main";this.translate.get("MESSAGE.Receiving_information").subscribe(e=>{this.publicHelper.processService.processStart(i,e,this.constructor.name)}),this.ticketingAnswerService.setAccessLoad(),this.ticketingAnswerService.setAccessDataType(_t.Editor),this.ticketingAnswerService.ServiceGetOneById(t).subscribe({next:e=>{this.dataAccessModel=e.access,this.fieldsInfo=this.publicHelper.fieldInfoConvertor(e.access),this.publicHelper.processService.processStop(i),this.dataModelResult=e,this.formInfo.formSubmitAllow=!0,e.isSuccess?this.dataModel=e.item:this.cmsToastrService.typeErrorGetOne(e.errorMessage)},error:e=>{this.publicHelper.processService.processStop(i),this.formInfo.formSubmitAllow=!0,this.cmsToastrService.typeErrorGetOne(e)}})}DataEditContent(){this.formInfo.formSubmitAllow=!1,this.translate.get("MESSAGE.sending_information_to_the_server").subscribe(i=>{this.formInfo.formAlert=i}),this.formInfo.formError="";let t=this.constructor.name+"main";this.translate.get("MESSAGE.sending_information_to_the_server").subscribe(i=>{this.publicHelper.processService.processStart(t,i,this.constructor.name)}),this.ticketingAnswerService.ServiceEdit(this.dataModel).subscribe({next:i=>{this.formInfo.formSubmitAllow=!i.isSuccess,this.dataModelResult=i,i.isSuccess?(this.translate.get("MESSAGE.registration_completed_successfully").subscribe(e=>{this.formInfo.formAlert=e}),this.cmsToastrService.typeSuccessEdit(),setTimeout(()=>{this.dialogRef.close({dialogChangedDate:!1})},1e3)):this.cmsToastrService.typeErrorEdit(i.errorMessage),this.publicHelper.processService.processStop(t)},error:i=>{this.publicHelper.processService.processStop(t),this.formInfo.formSubmitAllow=!0,this.cmsToastrService.typeErrorEdit(i)}})}onStepClick(t,i){t.previouslySelectedIndex<t.selectedIndex}onActionBackToParent(){this.dialogRef.close({dialogChangedDate:!1})}onActionFileSelectedLinkMainImageId(){}onActionSelectSource(t){if(!t||t.id<=0){this.cmsToastrService.typeErrorMessage(this.translate.instant("MESSAGE.Specify_the_source"),this.translate.instant("MESSAGE.The_source_of_the_information_application_is_not_known"));return}}};s.\u0275fac=function(i){return new(i||s)(g(he),g(pe),g(ve),g(L),g(X),g(At),g(N),g(de),g(O),g(P))},s.\u0275cmp=F({type:s,selectors:[["app-ticketing-answer-edit"]],viewQuery:function(i,e){if(i&1&&ne(ho,5),i&2){let c;oe(c=re())&&(e.formGroup=c.first)}},features:[z],decls:15,vars:13,consts:[["vform","ngForm"],["HtmlBody",""],[1,"card","card-style","progressOverlayContainer"],[3,"optionsInfoAreaId"],[1,"content","mb-0"],[1,"mb-0","color-highlight","font-600","font-12"],[3,"ngSubmit"],[3,"model","optionDisabled","optionLabel","optionRequired","optionSelectFirstItem","modelChange",4,"ngIf"],[3,"optionChange","optionSelectForce","optionPlaceholder","optionDisabled"],["class","input-style has-borders no-icon input-style-always-active validate-field mb-4",4,"ngIf"],["class","form-actions",4,"ngIf"],[3,"modelChange","model","optionDisabled","optionLabel","optionRequired","optionSelectFirstItem"],[1,"input-style","has-borders","no-icon","input-style-always-active","validate-field","mb-4"],["for","dataModel.htmlBody",1,"color-highlight"],["matInput","","name","dataModel.htmlBody","type","text","minlength","0","maxlength","1000","rows","5","id","dataModel.htmlBody",1,"form-control","validate-name",3,"ngModelChange","ngModel","placeholder","disabled"],[1,"form-actions"],["type","button",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-gray",3,"click"],["type","submit",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-green",3,"disabled"]],template:function(i,e){if(i&1){let c=M();l(0,"div",2),I(1,"app-progress-spinner",3),l(2,"div",4)(3,"p",5),p(4),a(),l(5,"p"),p(6),S(7,"translate"),a(),l(8,"form",6,0),b("ngSubmit",function(){return f(c),h(e.onFormSubmit())}),v(10,go,1,5,"app-cms-enum-record-status-selector",7),l(11,"app-ticketing-departemen-selector",8),S(12,"translate"),b("optionChange",function(d){return f(c),h(e.onActionSelectSource(d))}),a(),v(13,_o,10,9,"div",9)(14,So,7,7,"div",10),a()()()}i&2&&(r(),m("optionsInfoAreaId",e.constructor.name),r(3),C(" ",e.formInfo.formTitle," "),r(2),C(" ",T(7,9,"TITLE.Be_Careful_When_Entering_Information")," "),r(4),m("ngIf",e.fieldsInfo.recordStatus==null?null:e.fieldsInfo.recordStatus.accessWatchField),r(),m("optionSelectForce",e.dataModel.linkTicketingDepartemenId)("optionPlaceholder",T(12,11,"TITLE.Department"))("optionDisabled",!(e.fieldsInfo.linkTicketingDepartemenId!=null&&e.fieldsInfo.linkTicketingDepartemenId.accessEditField)),r(2),m("ngIf",e.fieldsInfo.htmlBody==null?null:e.fieldsInfo.htmlBody.accessWatchField),r(),m("ngIf",e.formInfo.formSubmitAllow))},dependencies:[G,Ce,ae,q,_e,Te,Ie,U,Se,K,ge,Q,Pe,H]});let n=s;return n})();var Co=["vform"];function To(n,s){if(n&1){let o=M();l(0,"div",5)(1,"button",10),b("click",function(){f(o);let i=u();return h(i.onFormCancel())}),I(2,"i",11),p(3),S(4,"translate"),a()()}n&2&&(r(3),C(" ",T(4,1,"ACTION.CANCEL")," "))}var Gn=(()=>{let s=class s{constructor(t,i,e,c,_,d,V,B,Y){this.data=t,this.dialogRef=i,this.coreEnumService=e,this.ticketingAnswerService=c,this.cmsToastrService=_,this.tokenHelper=d,this.cdr=V,this.publicHelper=B,this.translate=Y,this.requestId=0,this.tokenInfo=new Gt,this.dataModelResult=new J,this.dataModel=new wt,this.formInfo=new le,this.dataModelEnumSendSmsStatusTypeResult=new J,this.fieldsInfo=new Map,this.fileManagerOpenForm=!1,this.publicHelper.processService.cdr=this.cdr,t&&(this.requestId=+t.id||0)}ngOnInit(){if(this.formInfo.formTitle=this.translate.instant("TITLE.VIEW"),this.requestId===0){this.cmsToastrService.typeErrorComponentAction(),this.dialogRef.close({dialogChangedDate:!1});return}this.DataGetOneContent(),this.tokenHelper.getCurrentToken().then(t=>{this.tokenInfo=t}),this.cmsApiStoreSubscribe=this.tokenHelper.getCurrentTokenOnChange().subscribe({next:t=>{this.tokenInfo=t}}),this.getEnumSendSmsStatusType()}getEnumSendSmsStatusType(){this.coreEnumService.ServiceSendSmsStatusTypeEnum().subscribe({next:t=>{this.dataModelEnumSendSmsStatusTypeResult=t}})}ngOnDestroy(){this.cmsApiStoreSubscribe.unsubscribe()}DataGetOneContent(){this.translate.get("MESSAGE.Receiving_Information_From_The_Server").subscribe(i=>{this.formInfo.formAlert=i}),this.formInfo.formError="";let t=this.constructor.name+"main";this.translate.get("MESSAGE.Receiving_information").subscribe(i=>{this.publicHelper.processService.processStart(t,i,this.constructor.name)}),this.ticketingAnswerService.setAccessLoad(),this.ticketingAnswerService.ServiceGetOneById(this.requestId).subscribe({next:i=>{this.fieldsInfo=this.publicHelper.fieldInfoConvertor(i.access),this.dataModel=i.item,console.log(this.dataModel),i.isSuccess?(this.formInfo.formTitle=this.formInfo.formTitle+" "+i.item.id,this.formInfo.formAlert=""):(this.translate.get("ERRORMESSAGE.MESSAGE.typeError").subscribe(e=>{this.formInfo.formAlert=e}),this.formInfo.formError=i.errorMessage,this.cmsToastrService.typeErrorMessage(i.errorMessage)),this.publicHelper.processService.processStop(t)},error:i=>{this.cmsToastrService.typeError(i),this.publicHelper.processService.processStop(t,!1)}})}onFormCancel(){this.dialogRef.close({dialogChangedDate:!1})}};s.\u0275fac=function(i){return new(i||s)(g(he),g(pe),g(X),g(At),g(N),g(ie),g(O),g(L),g(P))},s.\u0275cmp=F({type:s,selectors:[["app-ticketing-answer-view"]],viewQuery:function(i,e){if(i&1&&ne(Co,5),i&2){let c;oe(c=re())&&(e.formGroup=c.first)}},decls:13,vars:7,consts:[[1,"ntk-cms-html-card-header"],[1,"ntk-cms-html-card-body","progressOverlayContainer"],[3,"optionsInfoAreaId"],[3,"dataModel","optionMethod"],[1,"ntk-cms-html-card-message"],[1,"form-actions"],[1,"form-text","text-muted"],[1,"form-text","text-muted","danger"],[1,"ntk-cms-html-card-footer"],["class","form-actions",4,"ngIf"],["type","button",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-gray",3,"click"],[1,"ft-x"]],template:function(i,e){i&1&&(l(0,"div",0),p(1),a(),l(2,"div",1),I(3,"app-progress-spinner",2)(4,"app-cms-json-list",3),a(),l(5,"div",4)(6,"div",5)(7,"small",6),p(8),a(),l(9,"small",7),p(10),a()()(),l(11,"div",8),v(12,To,5,3,"div",9),a()),i&2&&(r(),C(" ",e.formInfo.formTitle," "),r(2),m("optionsInfoAreaId",e.constructor.name),r(),m("dataModel",e.dataModel)("optionMethod",1),r(4),C("",e.formInfo.formAlert," "),r(2),C("",e.formInfo.formError," "),r(2),m("ngIf",e.formInfo.formSubmitAllow))},dependencies:[G,Q,Ln,H],encapsulation:2});let n=s;return n})();function Io(n,s){n&1&&I(0,"div",10)}function vo(n,s){if(n&1&&(l(0,"div",4)(1,"div",5)(2,"b"),p(3),S(4,"translate"),a(),p(5,": "),a(),I(6,"div",15)(7,"div",12)(8,"div",11),a()),n&2){let o=u();r(3),C("",T(4,2,"TITLE.Description")," "),r(3),m("innerText",o.dataModelResult.item.htmlBody)}}var Pn=(()=>{let s=class s{constructor(t,i,e,c,_,d,V){this.headerService=t,this.publicHelper=i,this.cdr=e,this.cmsToastrService=c,this.dialog=_,this.translate=d,this.tokenHelper=V,this.optionId=0,this.dataModelResult=new J,this.fieldsInfo=new Map,this.publicHelper.processService.cdr=this.cdr}ngOnInit(){this.optionId>0&&this.DataGetOneContent(),this.cmsApiStoreSubscribe=this.tokenHelper.getCurrentTokenOnChange().subscribe({next:t=>{this.DataGetOneContent()}})}ngOnDestroy(){this.cmsApiStoreSubscribe.unsubscribe()}DataGetOneContent(){let t=this.constructor.name+"main";this.translate.get("MESSAGE.Receiving_information").subscribe(i=>{this.publicHelper.processService.processStart(t,i,this.constructor.name)}),this.headerService.setAccessLoad(),this.headerService.ServiceGetOneById(this.optionId).subscribe({next:i=>{this.fieldsInfo=this.publicHelper.fieldInfoConvertor(i.access),i.isSuccess?this.dataModelResult=i:this.cmsToastrService.typeErrorMessage(i.errorMessage),this.publicHelper.processService.processStop(t)},error:i=>{this.cmsToastrService.typeError(i),this.publicHelper.processService.processStop(t)}})}};s.\u0275fac=function(i){return new(i||s)(g(Oe),g(L),g(O),g(N),g(xe),g(P),g(ie))},s.\u0275cmp=F({type:s,selectors:[["app-ticketing-task-header"]],inputs:{optionId:"optionId"},decls:33,vars:11,consts:[[1,"card","card-style","progressOverlayContainer"],[3,"optionsInfoAreaId"],[1,"content"],[1,"table"],[1,"tr"],[1,"td","small-width"],[1,"svg-icon","svg-icon-3x","svg-icon-primary",3,"inlineSVG"],[1,"td","large-width",2,"color","darkblue"],["class","td",4,"ngIf"],[1,"td","large-width"],[1,"td"],[2,"clear","both"],[1,"td",2,"text-align","left"],["class","tr",4,"ngIf"],[1,"divider","divider-margins"],[1,"td","large-width",3,"innerText"]],template:function(i,e){i&1&&(l(0,"div",0),I(1,"app-progress-spinner",1),l(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5),I(6,"span",6),a(),l(7,"div",7)(8,"h5")(9,"b"),p(10),S(11,"translate"),a()()(),v(12,Io,1,0,"div",8),a(),l(13,"div",4)(14,"div",5)(15,"b"),p(16),a(),p(17,": "),a(),l(18,"div",9),p(19),a(),I(20,"div",10)(21,"div",11),a(),l(22,"div",4)(23,"div",5)(24,"b"),p(25),a(),p(26,": "),a(),l(27,"div",9),p(28),a(),I(29,"div",12)(30,"div",11),a(),v(31,vo,9,4,"div",13),a()()(),I(32,"div",14)),i&2&&(r(),m("optionsInfoAreaId",e.constructor.name),r(5),m("inlineSVG","./assets/media/svg/icons/Communication/Flag.svg"),r(4),C(" ",T(11,9,"TITLE.Selected_Ticket")," "),r(2),m("ngIf",e.dataModelResult==null||e.dataModelResult.item==null?null:e.dataModelResult.item.id),r(4),C("",e.fieldsInfo.id==null?null:e.fieldsInfo.id.fieldTitle," "),r(3),w(e.dataModelResult==null||e.dataModelResult.item==null?null:e.dataModelResult.item.id),r(6),C("",e.fieldsInfo.title==null?null:e.fieldsInfo.title.fieldTitle," "),r(3),w(e.dataModelResult==null||e.dataModelResult.item==null?null:e.dataModelResult.item.title),r(3),m("ngIf",(e.dataModelResult==null||e.dataModelResult.item==null||e.dataModelResult.item.htmlBody==null?null:e.dataModelResult.item.htmlBody.length)>0))},dependencies:[G,Q,Tn,H],styles:[".table[_ngcontent-%COMP%]{display:table;border:1px solid #40A1F5;padding:2px;background:#fff;border-radius:5px}.table[_ngcontent-%COMP%]   .th[_ngcontent-%COMP%]{display:table-row;background-color:#40a1f577;color:#fff;font-weight:700}.table[_ngcontent-%COMP%]   .tr[_ngcontent-%COMP%]:nth-child(odd){background-color:#f9f9f9}.table[_ngcontent-%COMP%]   .tr[_ngcontent-%COMP%]{display:table-row;border-bottom:1px solid #000}.table[_ngcontent-%COMP%]   .td[_ngcontent-%COMP%]{display:table-cell;padding:15px;border-bottom:1px solid #40A1F5;color:#3d7c7a}.table[_ngcontent-%COMP%]   .tr[_ngcontent-%COMP%]:last-child   .td[_ngcontent-%COMP%]{border:0}.small-width[_ngcontent-%COMP%]{width:90px}.large-width[_ngcontent-%COMP%]{width:400px}.clear[_ngcontent-%COMP%]{clear:both}"]});let n=s;return n})();var wo=()=>[5,10,20,100],Mo=n=>({background:n});function ko(n,s){if(n&1&&I(0,"app-ticketing-task-header",41),n&2){let o=u();m("optionId",o.requestLinkTaskId)}}function Eo(n,s){if(n&1){let o=M();l(0,"a",42),b("click",function(){f(o);let i=u();return h(i.onActionBackToParent())}),I(1,"i",43),a()}}function yo(n,s){if(n&1){let o=M();l(0,"div",44)(1,"a",45),b("click",function(){f(o);let i=u();return h(i.onActionButtonNewRow())}),I(2,"i",46)(3,"br"),a(),l(4,"p",47),p(5),S(6,"translate"),a()()}n&2&&(r(5),w(T(6,1,"ACTION.ADD")))}function Ao(n,s){if(n&1){let o=M();l(0,"div",44)(1,"a",48),b("click",function(){f(o);let i=u();return h(i.onActionButtonEditRow(i.tableRowSelected))}),I(2,"i",49)(3,"br"),a(),l(4,"p",47),p(5),S(6,"translate"),a()()}n&2&&(r(5),w(T(6,1,"ACTION.EDIT")))}function xo(n,s){if(n&1){let o=M();l(0,"div",44)(1,"a",50),b("click",function(){f(o);let i=u();return h(i.onActionButtonDeleteRow(i.tableRowSelected))}),I(2,"i",51)(3,"br"),a(),l(4,"p",47),p(5),S(6,"translate"),a()()}n&2&&(r(5),w(T(6,1,"ACTION.DELETE")))}function Do(n,s){if(n&1){let o=M();l(0,"div",44)(1,"a",52),b("click",function(){f(o);let i=u();return h(i.onActionButtonViewRow(i.tableRowSelected))}),I(2,"i",53)(3,"br"),a(),l(4,"p",47),p(5),S(6,"translate"),a()()}n&2&&(r(5),w(T(6,1,"ACTION.VIEW")))}function Ro(n,s){if(n&1&&(l(0,"mat-header-cell",54),p(1),a()),n&2){let o=u();r(),C(" ",o.fieldsInfo.id==null?null:o.fieldsInfo.id.fieldTitle," ")}}function Lo(n,s){if(n&1&&(l(0,"mat-cell"),p(1),a()),n&2){let o=s.$implicit;r(),C(" ",o.id," ")}}function Vo(n,s){if(n&1&&(l(0,"mat-header-cell",54),p(1),a()),n&2){let o=u();r(),C(" ",o.fieldsInfo.linkTaskId==null?null:o.fieldsInfo.linkTaskId.fieldTitle," ")}}function Bo(n,s){if(n&1&&(l(0,"mat-cell"),p(1),a()),n&2){let o=s.$implicit;r(),C(" ",o.linkTaskId," ")}}function Fo(n,s){if(n&1&&(l(0,"mat-header-cell",54),p(1),a()),n&2){let o=u();r(),C(" ",o.fieldsInfo.linkMemberId==null?null:o.fieldsInfo.linkMemberId.fieldTitle," ")}}function No(n,s){if(n&1&&(l(0,"mat-cell"),p(1),a()),n&2){let o=s.$implicit;r(),C(" ",o.linkMemberId," ")}}function Oo(n,s){if(n&1&&(l(0,"mat-header-cell",54),p(1),a()),n&2){let o=u();r(),C(" ",o.fieldsInfo.createdDate==null?null:o.fieldsInfo.createdDate.fieldTitle," ")}}function Go(n,s){if(n&1&&(l(0,"mat-cell"),p(1),a()),n&2){let o=s.$implicit,t=u();r(),C(" ",t.publicHelper.LocaleDate(o.createdDate)," ")}}function Po(n,s){if(n&1&&(l(0,"mat-header-cell",54),p(1),a()),n&2){let o=u();r(),C(" ",o.fieldsInfo.updatedDate==null?null:o.fieldsInfo.updatedDate.fieldTitle," ")}}function Ho(n,s){if(n&1&&(l(0,"mat-cell"),p(1),a()),n&2){let o=s.$implicit,t=u();r(),C(" ",t.publicHelper.LocaleDate(o.updatedDate)," ")}}function qo(n,s){if(n&1&&(l(0,"mat-header-cell",54),p(1),a()),n&2){let o=u();r(),C(" ",o.fieldsInfo.answerStatus==null?null:o.fieldsInfo.answerStatus.fieldTitle," ")}}function Wo(n,s){if(n&1&&(l(0,"mat-cell",55),p(1),S(2,"enums"),a()),n&2){let o=s.$implicit,t=u();m("ngStyle",Ke(5,Mo,t.publicHelper.RowStyleAnswerStatus(o.ticketStatus))),r(),C(" ",Zt(2,2,o.answerStatus,t.dataModelEnumAnswerStatusResult.listItems)," ")}}function jo(n,s){n&1&&(l(0,"mat-header-cell"),p(1),S(2,"translate"),a()),n&2&&(r(),C(" ",T(2,1,"TITLE.OPTION")," "))}function Uo(n,s){if(n&1&&(l(0,"mat-cell",56)(1,"button",57)(2,"mat-icon"),p(3,"more_vert"),a()(),I(4,"mat-menu",null,2),a()),n&2){let o=D(5),t=u();r(),m("matMenuTriggerFor",o)("disabled",!t.dataModelResult.access.accessEditRow&&!t.dataModelResult.access.accessDeleteRow)}}function Qo(n,s){n&1&&I(0,"mat-header-row")}function zo(n,s){if(n&1){let o=M();l(0,"mat-row",58),b("click",function(){let i=f(o).$implicit,e=u();return h(e.onActionTableRowSelect(i))}),a()}if(n&2){let o=s.$implicit,t=s.dataIndex,i=u();Ee("ntk-row-odd",t%2)("ntk-row-even",!(t%2))("ntk-row-selected",o.id===(i.tableRowSelected==null?null:i.tableRowSelected.id))}}var en=(()=>{let s=class s extends Ue{constructor(t,i,e,c,_,d,V,B,Y,te,Re,jt){super(t,new wt,Re,d,B),this.contentService=t,this.activatedRoute=i,this.cmsToastrService=e,this.cmsConfirmationDialogService=c,this.router=_,this.tokenHelper=d,this.cdr=V,this.translate=B,this.ticketingEnumService=Y,this.pageInfo=te,this.publicHelper=Re,this.dialog=jt,this.requestLinkTaskId=0,this.flag=!1,this.tableContentSelected=[],this.filteModelContent=new $,this.dataModelEnumAnswerStatusResult=new J,this.tabledisplayedColumns=[],this.tabledisplayedColumnsSource=["Id","LinkTaskId","LinkMemberId","CreatedDate","UpdatedDate","AnswerStatus"],this.tabledisplayedColumnsMobileSource=["Id","LinkTaskId","LinkMemberId","CreatedDate","UpdatedDate","AnswerStatus"],this.publicHelper.processService.cdr=this.cdr,this.optionsSearch.parentMethods={onSubmit:Ji=>this.onSubmitOptionsSearch(Ji)},this.filteModelContent.sortColumn="Id",this.filteModelContent.sortType=j.Ascending}ngOnInit(){this.requestLinkTaskId=+Number(this.activatedRoute.snapshot.paramMap.get("LinkTaskId")),this.tokenHelper.getCurrentToken().then(t=>{this.tokenInfo=t,this.DataGetAll()}),this.cmsApiStoreSubscribe=this.tokenHelper.getCurrentTokenOnChange().subscribe({next:t=>{this.getEnumAnswerStatus(),this.tokenInfo=t,this.DataGetAll()}}),this.getEnumAnswerStatus()}ngOnDestroy(){this.cmsApiStoreSubscribe.unsubscribe()}getEnumAnswerStatus(){this.ticketingEnumService.ServiceTicketStatusEnum().subscribe({next:t=>{this.dataModelEnumAnswerStatusResult=t}})}DataGetAll(){this.tabledisplayedColumns=this.publicHelper.TableDisplayedColumns(this.tabledisplayedColumnsSource,this.tabledisplayedColumnsMobileSource,[],this.tokenInfo),this.tableRowsSelected=[],this.onActionTableRowSelect(new wt);let t=this.constructor.name+"main";this.translate.get("MESSAGE.get_information_list").subscribe(c=>{this.publicHelper.processService.processStart(t,c,this.constructor.name)}),this.filteModelContent.accessLoad=!0;let i=JSON.parse(JSON.stringify(this.filteModelContent)),e=new Z;this.requestLinkTaskId>0&&(e.propertyName="LinkTaskId",e.value=this.requestLinkTaskId,i.filters.push(e)),this.categoryModelSelected&&this.categoryModelSelected.id>0&&(e.propertyName="LinkTaskId",e.value=this.categoryModelSelected.id,i.filters.push(e)),this.contentService.setAccessLoad(),this.contentService.ServiceGetAllEditor(i).subscribe({next:c=>{this.fieldsInfo=this.publicHelper.fieldInfoConvertor(c.access),c.isSuccess?(this.dataModelResult=c,this.tableSource.data=c.listItems,this.optionsStatist?.data?.show&&this.onActionButtonStatist(!0),this.optionsSearch.childMethods&&this.optionsSearch.childMethods.setAccess(c.access)):this.cmsToastrService.typeErrorGetAll(c.errorMessage),this.publicHelper.processService.processStop(t)},error:c=>{this.cmsToastrService.typeError(c),this.publicHelper.processService.processStop(t)}})}onTableSortData(t){this.tableSource&&this.tableSource.sort&&this.tableSource.sort.active===t.active?this.tableSource.sort.start==="asc"?(t.start="desc",this.filteModelContent.sortColumn=t.active,this.filteModelContent.sortType=j.Descending):this.tableSource.sort.start==="desc"?(t.start="asc",this.filteModelContent.sortColumn="",this.filteModelContent.sortType=j.Ascending):t.start="desc":(this.filteModelContent.sortColumn=t.active,this.filteModelContent.sortType=j.Descending),this.tableSource.sort=t,this.filteModelContent.currentPageNumber=0,this.DataGetAll()}onTablePageingData(t){this.filteModelContent.currentPageNumber=t.pageIndex+1,this.filteModelContent.rowPerPage=t.pageSize,this.DataGetAll()}onActionButtonNewRow(){if(this.categoryModelSelected==null&&this.categoryModelSelected&&this.categoryModelSelected.id===0&&(this.requestLinkTaskId==null||this.requestLinkTaskId===0)){this.translate.get("MESSAGE.Content_not_selected").subscribe(e=>{this.cmsToastrService.typeErrorSelected(e)});return}var t="";this.tokenHelper.isMobile?t="dialog-fullscreen":t="dialog-min",this.dialog.open(Nn,{height:"90%",panelClass:t,enterAnimationDuration:W.cmsViewConfig.enterAnimationDuration,exitAnimationDuration:W.cmsViewConfig.exitAnimationDuration,data:{linkTaskId:this.requestLinkTaskId>0?this.requestLinkTaskId:this.categoryModelSelected.id}}).afterClosed().subscribe(e=>{e&&e.dialogChangedDate&&this.DataGetAll()})}onActionButtonViewRow(t=this.tableRowSelected){if(!t||!t.id||t.id===0){this.cmsToastrService.typeErrorSelectedRow();return}this.tableRowSelected=t;var i="";this.tokenHelper.isMobile?i="dialog-fullscreen":i="dialog-min",this.dialog.open(Gn,{height:"90%",panelClass:i,enterAnimationDuration:W.cmsViewConfig.enterAnimationDuration,exitAnimationDuration:W.cmsViewConfig.exitAnimationDuration,data:{id:this.tableRowSelected.id}}).afterClosed().subscribe(c=>{c&&c.dialogChangedDate})}onActionSelectorSelect(t){var i=this.filteModelContent.sortColumn,e=this.filteModelContent.sortType;this.filteModelContent=new $,this.filteModelContent.sortColumn=i,this.filteModelContent.sortType=e,this.categoryModelSelected=t,this.DataGetAll()}onActionButtonEditRow(t=this.tableRowSelected){if(!t||!t.id||t.id===0){this.cmsToastrService.typeErrorSelectedRow();return}if(this.tableRowSelected=t,this.dataModelResult==null||this.dataModelResult.access==null||!this.dataModelResult.access.accessEditRow){this.cmsToastrService.typeErrorAccessEdit();return}var i="";this.tokenHelper.isMobile?i="dialog-fullscreen":i="dialog-min",this.dialog.open(On,{height:"90%",panelClass:i,enterAnimationDuration:W.cmsViewConfig.enterAnimationDuration,exitAnimationDuration:W.cmsViewConfig.exitAnimationDuration,data:{id:this.tableRowSelected.id}}).afterClosed().subscribe(c=>{c&&c.dialogChangedDate&&this.DataGetAll()})}onActionButtonDeleteRow(t=this.tableRowSelected){if(t==null||!t.id||t.id===0){this.translate.get("MESSAGE.no_row_selected_to_delete").subscribe(c=>{this.cmsToastrService.typeErrorSelected(c)});return}if(this.tableRowSelected=t,this.dataModelResult==null||this.dataModelResult.access==null||!this.dataModelResult.access.accessDeleteRow){this.cmsToastrService.typeErrorAccessDelete();return}var i="",e="";this.translate.get(["MESSAGE.Please_Confirm","MESSAGE.Do_you_want_to_delete_this_content"]).subscribe(c=>{i=c["MESSAGE.Please_Confirm"],e=c["MESSAGE.Do_you_want_to_delete_this_content"]+"?<br> ( "+this.tableRowSelected.id+" ) "}),this.cmsConfirmationDialogService.confirm(i,e).then(c=>{if(c){let _=this.constructor.name+"main";this.translate.get("MESSAGE.Receiving_information").subscribe(d=>{this.publicHelper.processService.processStart(_,d,this.constructor.name)}),this.contentService.ServiceDelete(this.tableRowSelected.id).subscribe({next:d=>{d.isSuccess?this.cmsToastrService.typeSuccessRemove():this.cmsToastrService.typeErrorRemove(),this.publicHelper.processService.processStop(_)},error:d=>{this.cmsToastrService.typeError(d),this.publicHelper.processService.processStop(_)}})}}).catch(()=>{})}onActionButtonStatist(t=!this.optionsStatist.data.show){if(this.optionsStatist.data.show=t,!this.optionsStatist.data.show)return;let i=new Map;this.translate.get("MESSAGE.Active").subscribe(d=>{i.set(d,0)}),this.translate.get("MESSAGE.All").subscribe(d=>{i.set(d,0)});let e=this.constructor.name+".ServiceStatist";this.translate.get("MESSAGE.Get_the_statist").subscribe(d=>{this.publicHelper.processService.processStart(e,d,this.constructor.name)}),this.contentService.ServiceGetCount(this.filteModelContent).subscribe({next:d=>{d.isSuccess&&(i.set("All",d.totalRowCount),this.optionsStatist.childMethods.setStatistValue(i)),this.publicHelper.processService.processStop(e)},error:d=>{this.cmsToastrService.typeError(d),this.publicHelper.processService.processStop(e)}});let c=JSON.parse(JSON.stringify(this.filteModelContent)),_=new Z;_.propertyName="RecordStatus",_.value=Xe.Available,c.filters.push(_),this.contentService.ServiceGetCount(c).subscribe({next:d=>{d.isSuccess&&(i.set("Active",d.totalRowCount),this.optionsStatist.childMethods.setStatistValue(i)),this.publicHelper.processService.processStop(e)},error:d=>{this.cmsToastrService.typeError(d),this.publicHelper.processService.processStop(e)}})}onActionButtonReload(){this.DataGetAll()}onSubmitOptionsSearch(t){this.filteModelContent.filters=t,this.DataGetAll()}onActionBackToParent(){this.router.navigate(["/ticketing/task/"])}};s.\u0275fac=function(i){return new(i||s)(g(At),g(ve),g(N),g(Rt),g(de),g(ie),g(O),g(P),g(Pt),g(He),g(L),g(xe))},s.\u0275cmp=F({type:s,selectors:[["app-ticketing-answer-list"]],features:[z],decls:60,vars:31,consts:[["tableSort","matSort"],["paginator",""],["actionMenu","matMenu"],[3,"optionId",4,"ngIf"],[3,"optionActionGuideNoticeDisplayChange","optionOnActionButtonMemoRow","optionOnActionButtonMemo","optionOnActionButtonExport","optionOnActionButtonPrintRow","optionsListInfoAreaId","optionGuideNoticeKey","optionActionGuideNoticeDisplay","optionTreeDisplay","optionActionRowId","optionActionRowDisplayMenu","optionSelectRowItemTitle"],["cms-tree",""],["cms-header",""],["cms-action-header",""],[1,"d-flex","justify-content-between","flex-wrap"],[1,"justify-content-end"],["target","_blank",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-highlight"],[3,"ngModelChange","ngModel"],[3,"click","ngModelChange","ngModel"],[1,"justify-content-start"],["type","button","class","btn font-13 font-600 btn-s m-1 rounded-s shadow-xl border-0 gradient-gray","target","_blank",3,"click",4,"ngIf"],["type","button","target","_blank",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-highlight",3,"click"],[1,"fa-solid","fa-info","font-18",2,"color","#ffffff"],[1,"fa-solid","fa-rotate-right","font-18",2,"color","#ffffff"],["cms-action-main",""],["class","col-4",4,"ngIf"],["cms-action-row",""],["cms-action-area",""],[3,"optionsChange","options"],["cms-body",""],["matSort","",3,"matSortChange","dataSource"],["matColumnDef","Id"],["mat-sort-header","",4,"matHeaderCellDef"],[4,"matCellDef"],["matColumnDef","LinkTaskId"],["matColumnDef","LinkMemberId"],["matColumnDef","CreatedDate"],["matColumnDef","UpdatedDate"],["matColumnDef","AnswerStatus"],[3,"ngStyle",4,"matCellDef"],["matColumnDef","Action"],[4,"matHeaderCellDef"],["class"," Action",4,"matCellDef"],[4,"matHeaderRowDef"],[3,"ntk-row-odd","ntk-row-even","ntk-row-selected","click",4,"matRowDef","matRowDefColumns"],["cms-footer",""],[3,"page","length","pageIndex","pageSize","pageSizeOptions"],[3,"optionId"],["type","button","target","_blank",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-gray",3,"click"],[1,"fa-solid","fa-arrow-left","font-18",2,"color","#ffffff"],[1,"col-4"],["type","button","target","_blank",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-teal",3,"click"],[1,"fa-solid","fa-plus","font-18",2,"color","#FFFFFF"],[1,"font-11","text-center","opacity-70"],["target","_blank",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-magenta",3,"click"],[1,"fa-solid","fa-pen","font-18",2,"color","#FFFFFF"],["target","_blank",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-red",3,"click"],[1,"fa-solid","fa-trash","font-18",2,"color","#ffffff"],["type","button","target","_blank","data-toggle","modal","data-target","#categoryModal",1,"btn","box-shadow-button","btn-outline-secondary",3,"click"],[1,"fa-solid","fa-eye","font-18",2,"color","#ffffff"],["mat-sort-header",""],[3,"ngStyle"],[1,"Action"],["type","button","mat-icon-button","","aria-label","Action Menu",3,"matMenuTriggerFor","disabled"],[3,"click"]],template:function(i,e){if(i&1){let c=M();v(0,ko,1,1,"app-ticketing-task-header",3),l(1,"app-cms-html-list",4),x("optionActionGuideNoticeDisplayChange",function(d){return f(c),A(e.viewGuideNotice,d)||(e.viewGuideNotice=d),h(d)}),b("optionOnActionButtonMemoRow",function(){return f(c),h(e.onActionButtonMemoRow())})("optionOnActionButtonMemo",function(){return f(c),h(e.onActionButtonMemo())})("optionOnActionButtonExport",function(){return f(c),h(e.onActionButtonExport())})("optionOnActionButtonPrintRow",function(){return f(c),h(e.onActionButtonPrintRow())}),k(2,5),p(3," -------------------------------------- "),E(),ye(4,6),k(5,7),l(6,"div",8)(7,"div",9)(8,"a",10)(9,"mat-slide-toggle",11),x("ngModelChange",function(d){return f(c),A(e.optionsSearch.data.show,d)||(e.optionsSearch.data.show=d),h(d)}),a(),p(10),S(11,"translate"),a(),l(12,"a",10)(13,"mat-slide-toggle",12),b("click",function(){return f(c),h(e.onActionButtonStatist())}),x("ngModelChange",function(d){return f(c),A(e.optionsStatist.data.show,d)||(e.optionsStatist.data.show=d),h(d)}),a(),p(14),S(15,"translate"),a()(),l(16,"div",13),v(17,Eo,2,0,"a",14),l(18,"a",15),b("click",function(){return f(c),h(e.viewGuideNotice=!e.viewGuideNotice)}),I(19,"i",16),a(),l(20,"a",15),b("click",function(){return f(c),h(e.onActionButtonReload())}),I(21,"i",17),a()()(),E(),k(22,18),v(23,yo,7,3,"div",19),E(),k(24,20),v(25,Ao,7,3,"div",19)(26,xo,7,3,"div",19)(27,Do,7,3,"div",19),E(),k(28,21),l(29,"app-cms-search-list",22),x("optionsChange",function(d){return f(c),A(e.optionsSearch,d)||(e.optionsSearch=d),h(d)}),a(),l(30,"app-cms-statist-list",22),x("optionsChange",function(d){return f(c),A(e.optionsStatist,d)||(e.optionsStatist=d),h(d)}),a(),E(),k(31,23),l(32,"mat-table",24,0),b("matSortChange",function(){f(c);let d=D(33);return h(e.onTableSortData(d))}),k(34,25),v(35,Ro,2,1,"mat-header-cell",26)(36,Lo,2,1,"mat-cell",27),E(),k(37,28),v(38,Vo,2,1,"mat-header-cell",26)(39,Bo,2,1,"mat-cell",27),E(),k(40,29),v(41,Fo,2,1,"mat-header-cell",26)(42,No,2,1,"mat-cell",27),E(),k(43,30),v(44,Oo,2,1,"mat-header-cell",26)(45,Go,2,1,"mat-cell",27),E(),k(46,31),v(47,Po,2,1,"mat-header-cell",26)(48,Ho,2,1,"mat-cell",27),E(),k(49,32),v(50,qo,2,1,"mat-header-cell",26)(51,Wo,3,7,"mat-cell",33),E(),k(52,34),v(53,jo,3,3,"mat-header-cell",35)(54,Uo,6,2,"mat-cell",36),E(),v(55,Qo,1,0,"mat-header-row",37)(56,zo,1,6,"mat-row",38),a(),E(),k(57,39),l(58,"mat-paginator",40,1),b("page",function(d){return f(c),h(e.onTablePageingData(d))}),a(),E(),a()}i&2&&(m("ngIf",e.requestLinkTaskId>0),r(),m("optionsListInfoAreaId",e.constructor.name)("optionGuideNoticeKey",""),y("optionActionGuideNoticeDisplay",e.viewGuideNotice),m("optionTreeDisplay",!1)("optionActionRowId",e.tableRowSelected==null?null:e.tableRowSelected.id)("optionActionRowDisplayMenu",e.tableRowSelectDoubleClick)("optionSelectRowItemTitle",e.tableRowSelected==null?null:e.tableRowSelected.id),r(8),y("ngModel",e.optionsSearch.data.show),r(),C("",T(11,26,"ACTION.SEARCH")," "),r(3),y("ngModel",e.optionsStatist.data.show),r(),C("",T(15,28,"ACTION.STATIST")," "),r(3),m("ngIf",e.requestLinkTaskId>0),r(6),m("ngIf",e.dataModelResult==null||e.dataModelResult.access==null?null:e.dataModelResult.access.accessAddRow),r(2),m("ngIf",e.dataModelResult==null||e.dataModelResult.access==null?null:e.dataModelResult.access.accessEditRow),r(),m("ngIf",e.dataModelResult==null||e.dataModelResult.access==null?null:e.dataModelResult.access.accessDeleteRow),r(),m("ngIf",(e.dataModelResult==null||e.dataModelResult.access==null?null:e.dataModelResult.access.accessWatchRow)&&(e.tableRowSelected==null?null:e.tableRowSelected.id)>0),r(2),y("options",e.optionsSearch),r(),y("options",e.optionsStatist),r(2),m("dataSource",e.tableSource),r(23),m("matHeaderRowDef",e.tabledisplayedColumns),r(),m("matRowDefColumns",e.tabledisplayedColumns),r(2),m("length",e.dataModelResult.totalRowCount)("pageIndex",e.dataModelResult.currentPageNumber-1)("pageSize",e.dataModelResult.rowPerPage)("pageSizeOptions",ze(30,wo)))},dependencies:[G,Je,q,U,Be,De,Ye,Ze,$e,et,tt,it,nt,rt,ct,at,ot,dt,lt,st,pt,mt,We,je,qe,Pn,H,ii],encapsulation:2});let n=s;return n})();var Jo=["vform"];function Xo(n,s){if(n&1){let o=M();l(0,"app-cms-enum-record-status-selector",14),x("modelChange",function(i){f(o);let e=u();return A(e.dataModel.recordStatus,i)||(e.dataModel.recordStatus=i),h(i)}),a()}if(n&2){let o=u();y("model",o.dataModel.recordStatus),m("optionDisabled",!1)("optionLabel",o.fieldsInfo.recordStatus==null?null:o.fieldsInfo.recordStatus.fieldTitle)("optionRequired",!0)("optionSelectFirstItem",!0)}}function Yo(n,s){n&1&&I(0,"i",21)}function Zo(n,s){n&1&&I(0,"i",22)}function $o(n,s){if(n&1&&(l(0,"mat-error"),p(1),l(2,"strong"),p(3),S(4,"translate"),a()()),n&2){let o=u(2);r(),C(" ",o.fieldsInfo.title==null?null:o.fieldsInfo.title.fieldTitle," is "),r(2),w(T(4,2,"MESSAGE.required"))}}function er(n,s){if(n&1){let o=M();l(0,"div",15)(1,"label",16),p(2),a(),l(3,"input",17,1),x("ngModelChange",function(i){f(o);let e=u();return A(e.dataModel.title,i)||(e.dataModel.title=i),h(i)}),a(),v(5,Yo,1,0,"i",18)(6,Zo,1,0,"i",19),l(7,"em"),p(8),a(),v(9,$o,5,4,"mat-error",20),a()}if(n&2){let o=D(4),t=u();r(2),w(t.fieldsInfo.title==null?null:t.fieldsInfo.title.fieldTitle),r(),R("placeholder",t.fieldsInfo.title==null?null:t.fieldsInfo.title.fieldTitle),y("ngModel",t.dataModel.title),m("disabled",!(t.fieldsInfo.title!=null&&t.fieldsInfo.title.accessAddField)),r(2),m("ngIf",!o.value),r(),m("ngIf",o.value),r(2),C("",o.value.length," / 100"),r(),m("ngIf",o.errors==null?null:o.errors.required)}}function tr(n,s){if(n&1&&(I(0,"img",23),S(1,"cmsthumbnail")),n&2){let o=u();R("src",T(1,1,o.dataModel.linkMainImageIdSrc),bt)}}function ir(n,s){if(n&1){let o=M();l(0,"div",15)(1,"label",24),b("click",function(){f(o);let i=u();return h(i.fileManagerOpenForm=!0)}),p(2),S(3,"translate"),a(),l(4,"input",25,2),S(6,"translate"),x("ngModelChange",function(i){f(o);let e=u();return A(e.dataModel.linkMainImageId,i)||(e.dataModel.linkMainImageId=i),h(i)}),b("click",function(){f(o);let i=u();return h(i.fileManagerOpenForm=!0)}),a(),l(7,"cms-file-manager",26),b("itemSelected",function(i){f(o);let e=u();return h(e.onActionFileSelected(i))}),x("openFormChange",function(i){f(o);let e=u();return A(e.fileManagerOpenForm,i)||(e.fileManagerOpenForm=i),h(i)}),a()()}if(n&2){let o=u();r(2),w(T(3,11,"TITLE.Icon_File")),r(2),R("placeholder",T(6,13,"TITLE.Original_File_ID")),y("ngModel",o.dataModel.linkMainImageId),r(3),m("language",o.appLanguage)("isPopup",!0),y("openForm",o.fileManagerOpenForm),m("tree",o.fileManagerTree)("openFilemanagerButtonLabelKey","select")("openDirectUploadView",!0)("selectFileType",o.selectFileTypeMainImage)("openFilemanagerButtonView",!1)}}function nr(n,s){if(n&1){let o=M();l(0,"div",27)(1,"button",28),b("click",function(){f(o);let i=u();return h(i.onFormCancel())}),I(2,"i",29),p(3),S(4,"translate"),a(),l(5,"button",30),I(6,"i",31),p(7),S(8,"translate"),a()()}if(n&2){u();let o=D(9);r(3),C(" ",T(4,3,"ACTION.CANCEL")," "),r(2),m("disabled",!o.form.valid),r(2),C(" ",T(8,5,"ACTION.SAVE")," ")}}var Yt=(()=>{let s=class s extends It{constructor(t,i,e,c,_,d,V,B){super(c,new Ge,d,B),this.data=t,this.dialogRef=i,this.coreEnumService=e,this.ticketingDepartemenService=c,this.cmsToastrService=_,this.publicHelper=d,this.cdr=V,this.translate=B,this.requestId=0,this.selectFileTypeMainImage=["jpg","jpeg","png"],this.appLanguage="fa",this.dataModelResult=new St,this.dataModel=new Ge,this.formInfo=new le,this.fileManagerOpenForm=!1,this.publicHelper.processService.cdr=this.cdr,t&&(this.requestId=+t.id||0),this.fileManagerTree=this.publicHelper.GetfileManagerTreeConfig()}ngOnInit(){if(this.translate.get("TITLE.Edit").subscribe(t=>{this.formInfo.formTitle=t}),this.requestId<=0){this.cmsToastrService.typeErrorComponentAction(),this.dialogRef.close({dialogChangedDate:!1});return}this.DataGetOneContent()}onActionFileSelected(t){this.dataModel.linkMainImageId=t.id,this.dataModel.linkMainImageIdSrc=t.downloadLinksrc}DataGetOneContent(){if(this.requestId<=0){this.cmsToastrService.typeErrorEditRowIsNull();return}this.translate.get("MESSAGE.Receiving_Information_From_The_Server").subscribe(i=>{this.formInfo.formAlert=i}),this.formInfo.formError="";let t=this.constructor.name+"main";this.translate.get("MESSAGE.Receiving_information").subscribe(i=>{this.publicHelper.processService.processStart(t,i,this.constructor.name)}),this.ticketingDepartemenService.setAccessLoad(),this.ticketingDepartemenService.setAccessDataType(_t.Editor),this.ticketingDepartemenService.ServiceGetOneById(this.requestId).subscribe({next:i=>{this.fieldsInfo=this.publicHelper.fieldInfoConvertor(i.access),this.dataModel=i.item,i.isSuccess?(this.formInfo.formTitle=this.formInfo.formTitle+" "+i.item.title,this.formInfo.formAlert=""):(this.translate.get("ERRORMESSAGE.MESSAGE.typeError").subscribe(e=>{this.formInfo.formAlert=e}),this.formInfo.formError=i.errorMessage,this.cmsToastrService.typeErrorMessage(i.errorMessage)),this.publicHelper.processService.processStop(t)},error:i=>{this.cmsToastrService.typeError(i),this.publicHelper.processService.processStop(t)}})}DataEditContent(){this.translate.get("MESSAGE.sending_information_to_the_server").subscribe(i=>{this.formInfo.formAlert=i}),this.formInfo.formError="";let t=this.constructor.name+"main";this.translate.get("MESSAGE.sending_information_to_the_server").subscribe(i=>{this.publicHelper.processService.processStart(t,i,this.constructor.name)}),this.ticketingDepartemenService.ServiceEdit(this.dataModel).subscribe({next:i=>{this.dataModelResult=i,i.isSuccess?(this.translate.get("MESSAGE.registration_completed_successfully").subscribe(e=>{this.formInfo.formAlert=e}),this.cmsToastrService.typeSuccessEdit(),this.dialogRef.close({dialogChangedDate:!0})):(this.translate.get("ERRORMESSAGE.MESSAGE.typeError").subscribe(e=>{this.formInfo.formAlert=e}),this.formInfo.formError=i.errorMessage,this.cmsToastrService.typeErrorMessage(i.errorMessage)),this.publicHelper.processService.processStop(t),this.formInfo.formSubmitAllow=!0},error:i=>{this.formInfo.formSubmitAllow=!0,this.cmsToastrService.typeError(i),this.publicHelper.processService.processStop(t)}})}onFormSubmit(){this.formGroup.valid&&(this.formInfo.formSubmitAllow=!1,this.DataEditContent())}onFormCancel(){this.dialogRef.close({dialogChangedDate:!1})}};s.\u0275fac=function(i){return new(i||s)(g(he),g(pe),g(X),g(Fe),g(N),g(L),g(O),g(P))},s.\u0275cmp=F({type:s,selectors:[["app-ticketing-departemen-edit"]],viewQuery:function(i,e){if(i&1&&ne(Jo,5),i&2){let c;oe(c=re())&&(e.formGroup=c.first)}},features:[z],decls:18,vars:13,consts:[["vform","ngForm"],["Title",""],["LinkMainImageId",""],[1,"card","card-style","progressOverlayContainer"],[3,"optionsInfoAreaId"],[1,"content","mb-0"],[1,"mb-0","color-highlight","font-600","font-12"],[3,"ngSubmit"],[3,"model","optionDisabled","optionLabel","optionRequired","optionSelectFirstItem","modelChange",4,"ngIf"],["class","input-style has-borders no-icon input-style-always-active validate-field mb-4",4,"ngIf"],[1,"mb-3"],["target","_blank",3,"href"],["style","vertical-align:middle;","class","ntk-hover-zoom","aria-hidden","","height","50","width","50",3,"src",4,"ngIf"],["class","form-actions",4,"ngIf"],[3,"modelChange","model","optionDisabled","optionLabel","optionRequired","optionSelectFirstItem"],[1,"input-style","has-borders","no-icon","input-style-always-active","validate-field","mb-4"],["for","dataModel.title",1,"color-highlight"],["matInput","","type","text","name","dataModel.title","type","text","minlength","3","maxlength","100","required","","id","dataModel.title",1,"form-control","validate-name",3,"ngModelChange","ngModel","placeholder","disabled"],["class","fa fa-times  invalid color-red-dark",4,"ngIf"],["class","fa fa-check  valid color-green-dark",4,"ngIf"],[4,"ngIf"],[1,"fa","fa-times","invalid","color-red-dark"],[1,"fa","fa-check","valid","color-green-dark"],["aria-hidden","","height","50","width","50",1,"ntk-hover-zoom",2,"vertical-align","middle",3,"src"],["for","dataModel.linkMainImageId",1,"color-highlight",3,"click"],["matInput","","type","text","name","dataModel.linkMainImageId","autocomplete","off","id","dataModel.linkMainImageId",1,"form-control","validate-name",3,"ngModelChange","click","ngModel","placeholder"],[3,"itemSelected","openFormChange","language","isPopup","openForm","tree","openFilemanagerButtonLabelKey","openDirectUploadView","selectFileType","openFilemanagerButtonView"],[1,"form-actions"],["type","button",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-gray",3,"click"],[1,"ft-x"],["type","submit",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-green",3,"disabled"],[1,"fa","fa-check-square-o"]],template:function(i,e){if(i&1){let c=M();l(0,"div",3),I(1,"app-progress-spinner",4),l(2,"div",5)(3,"p",6),p(4),a(),l(5,"p"),p(6),S(7,"translate"),a(),l(8,"form",7,0),b("ngSubmit",function(){return f(c),h(e.onFormSubmit())}),v(10,Xo,1,5,"app-cms-enum-record-status-selector",8)(11,er,10,8,"div",9),l(12,"div",10)(13,"a",11),S(14,"cmsthumbnail"),v(15,tr,2,3,"img",12),a()(),v(16,ir,8,15,"div",9)(17,nr,9,7,"div",13),a()()()}i&2&&(r(),m("optionsInfoAreaId",e.constructor.name),r(3),C(" ",e.formInfo.formTitle," "),r(2),C(" ",T(7,9,"TITLE.Be_Careful_When_Entering_Information")," "),r(4),m("ngIf",e.fieldsInfo.recordStatus==null?null:e.fieldsInfo.recordStatus.accessWatchField),r(),m("ngIf",e.fieldsInfo.title==null?null:e.fieldsInfo.title.accessWatchField),r(2),R("href",T(14,11,e.dataModel.linkMainImageIdSrc),bt),r(2),m("ngIf",(e.dataModel==null||e.dataModel.linkMainImageIdSrc==null?null:e.dataModel.linkMainImageIdSrc.length)>0),r(),m("ngIf",e.fieldsInfo.linkMainImageId==null?null:e.fieldsInfo.linkMainImageId.accessWatchField),r(),m("ngIf",e.formInfo.formSubmitAllow))},dependencies:[G,Ce,ae,q,_e,we,Te,Ie,U,Se,Ae,K,ge,Q,Vi,H,Nt],styles:[".form-body[_ngcontent-%COMP%]{width:500px}@media (max-width: 700px){.form-body[_ngcontent-%COMP%]{display:contents}}#file-manager[_ngcontent-%COMP%]{width:calc(100vw - 16px);height:calc(100vh - 16px)}.recordStatus-1.mat-select-panel[_ngcontent-%COMP%]{background:#ff0}.recordStatus-2.mat-select-panel[_ngcontent-%COMP%]{background:#000}.recordStatus-3.mat-select-panel[_ngcontent-%COMP%]{background:red}"]});let n=s;return n})();var or=["vform"];function rr(n,s){if(n&1){let o=M();l(0,"app-cms-enum-record-status-selector",14),x("modelChange",function(i){f(o);let e=u();return A(e.dataModel.recordStatus,i)||(e.dataModel.recordStatus=i),h(i)}),a()}if(n&2){let o=u();y("model",o.dataModel.recordStatus),m("optionDisabled",!1)("optionLabel",o.fieldsInfo.recordStatus==null?null:o.fieldsInfo.recordStatus.fieldTitle)("optionRequired",!0)("optionSelectFirstItem",!0)}}function ar(n,s){n&1&&I(0,"i",21)}function lr(n,s){n&1&&I(0,"i",22)}function sr(n,s){if(n&1&&(l(0,"mat-error"),p(1),l(2,"strong"),p(3),S(4,"translate"),a()()),n&2){let o=u(2);r(),C(" ",o.fieldsInfo.title==null?null:o.fieldsInfo.title.fieldTitle," is "),r(2),w(T(4,2,"MESSAGE.required"))}}function cr(n,s){if(n&1){let o=M();l(0,"div",15)(1,"label",16),p(2),a(),l(3,"input",17,1),x("ngModelChange",function(i){f(o);let e=u();return A(e.dataModel.title,i)||(e.dataModel.title=i),h(i)}),a(),v(5,ar,1,0,"i",18)(6,lr,1,0,"i",19),l(7,"em"),p(8),a(),v(9,sr,5,4,"mat-error",20),a()}if(n&2){let o=D(4),t=u();r(2),w(t.fieldsInfo.title==null?null:t.fieldsInfo.title.fieldTitle),r(),R("placeholder",t.fieldsInfo.title==null?null:t.fieldsInfo.title.fieldTitle),y("ngModel",t.dataModel.title),m("disabled",!(t.fieldsInfo.title!=null&&t.fieldsInfo.title.accessAddField)),r(2),m("ngIf",!o.value),r(),m("ngIf",o.value),r(2),C("",o.value.length," / 100"),r(),m("ngIf",o.errors==null?null:o.errors.required)}}function dr(n,s){if(n&1&&(I(0,"img",23),S(1,"cmsthumbnail")),n&2){let o=u();R("src",T(1,1,o.dataModel.linkMainImageIdSrc),bt)}}function pr(n,s){if(n&1){let o=M();l(0,"div",15)(1,"label",24),b("click",function(){f(o);let i=u();return h(i.fileManagerOpenForm=!0)}),p(2),S(3,"translate"),a(),l(4,"input",25,2),S(6,"translate"),x("ngModelChange",function(i){f(o);let e=u();return A(e.dataModel.linkMainImageId,i)||(e.dataModel.linkMainImageId=i),h(i)}),b("click",function(){f(o);let i=u();return h(i.fileManagerOpenForm=!0)}),a(),l(7,"cms-file-manager",26),b("itemSelected",function(i){f(o);let e=u();return h(e.onActionFileSelected(i))}),x("openFormChange",function(i){f(o);let e=u();return A(e.fileManagerOpenForm,i)||(e.fileManagerOpenForm=i),h(i)}),a()()}if(n&2){let o=u();r(2),w(T(3,11,"TITLE.Icon_File")),r(2),R("placeholder",T(6,13,"TITLE.Original_File_ID")),y("ngModel",o.dataModel.linkMainImageId),r(3),m("language",o.appLanguage)("isPopup",!0),y("openForm",o.fileManagerOpenForm),m("tree",o.fileManagerTree)("openFilemanagerButtonLabelKey","select")("openDirectUploadView",!0)("selectFileType",o.selectFileTypeMainImage)("openFilemanagerButtonView",!1)}}function mr(n,s){if(n&1){let o=M();l(0,"div",27)(1,"button",28),b("click",function(){f(o);let i=u();return h(i.onFormCancel())}),I(2,"i",29),p(3),S(4,"translate"),a(),l(5,"button",30),I(6,"i",31),p(7),S(8,"translate"),a()()}if(n&2){u();let o=D(9);r(3),C(" ",T(4,3,"ACTION.CANCEL")," "),r(2),m("disabled",!o.form.valid),r(2),C(" ",T(8,5,"ACTION.SAVE")," ")}}var Qi=(()=>{let s=class s extends ht{constructor(t,i,e,c,_,d,V,B){super(c,new Ge,d,B),this.data=t,this.dialogRef=i,this.coreEnumService=e,this.ticketingDepartemenService=c,this.cmsToastrService=_,this.publicHelper=d,this.cdr=V,this.translate=B,this.fieldsInfo=new Map,this.selectFileTypeMainImage=["jpg","jpeg","png"],this.appLanguage="fa",this.dataModelResult=new J,this.dataModel=new Ge,this.formInfo=new le,this.fileManagerOpenForm=!1,this.publicHelper.processService.cdr=this.cdr,this.fileManagerTree=this.publicHelper.GetfileManagerTreeConfig()}ngOnInit(){this.translate.get("TITLE.ADD").subscribe(t=>{this.formInfo.formTitle=t}),this.DataGetAccess()}onActionFileSelected(t){this.dataModel.linkMainImageId=t.id,this.dataModel.linkMainImageIdSrc=t.downloadLinksrc}DataAddContent(){this.translate.get("MESSAGE.sending_information_to_the_server").subscribe(i=>{this.formInfo.formAlert=i}),this.formInfo.formError="";let t=this.constructor.name+"main";this.translate.get("MESSAGE.Receiving_information").subscribe(i=>{this.publicHelper.processService.processStart(t,i,this.constructor.name)}),this.ticketingDepartemenService.ServiceAdd(this.dataModel).subscribe({next:i=>{this.dataModelResult=i,i.isSuccess?(this.translate.get("MESSAGE.registration_completed_successfully").subscribe(e=>{this.formInfo.formAlert=e}),this.cmsToastrService.typeSuccessAdd(),this.dialogRef.close({dialogChangedDate:!0})):(this.translate.get("ERRORMESSAGE.MESSAGE.typeError").subscribe(e=>{this.formInfo.formAlert=e}),this.formInfo.formError=i.errorMessage,this.cmsToastrService.typeErrorMessage(i.errorMessage)),this.publicHelper.processService.processStop(t),this.formInfo.formSubmitAllow=!0},error:i=>{this.formInfo.formSubmitAllow=!0,this.cmsToastrService.typeError(i),this.publicHelper.processService.processStop(t)}})}onFormSubmit(){this.formGroup.valid&&(this.formInfo.formSubmitAllow=!1,this.DataAddContent())}onFormCancel(){this.dialogRef.close({dialogChangedDate:!1})}};s.\u0275fac=function(i){return new(i||s)(g(he),g(pe),g(X),g(Fe),g(N),g(L),g(O),g(P))},s.\u0275cmp=F({type:s,selectors:[["app-ticketing-departemen-add"]],viewQuery:function(i,e){if(i&1&&ne(or,5),i&2){let c;oe(c=re())&&(e.formGroup=c.first)}},features:[z],decls:18,vars:13,consts:[["vform","ngForm"],["Title",""],["LinkMainImageId",""],[1,"card","card-style","progressOverlayContainer"],[3,"optionsInfoAreaId"],[1,"content","mb-0"],[1,"mb-0","color-highlight","font-600","font-12"],[3,"ngSubmit"],[3,"model","optionDisabled","optionLabel","optionRequired","optionSelectFirstItem","modelChange",4,"ngIf"],["class","input-style has-borders no-icon input-style-always-active validate-field mb-4",4,"ngIf"],[1,"mb-3"],["target","_blank",3,"href"],["style","vertical-align:middle;","class","ntk-hover-zoom","aria-hidden","","height","50","width","50",3,"src",4,"ngIf"],["class","form-actions",4,"ngIf"],[3,"modelChange","model","optionDisabled","optionLabel","optionRequired","optionSelectFirstItem"],[1,"input-style","has-borders","no-icon","input-style-always-active","validate-field","mb-4"],["for","dataModel.title",1,"color-highlight"],["matInput","","type","text","name","dataModel.title","type","text","minlength","3","maxlength","100","required","","id","dataModel.title",1,"form-control","validate-name",3,"ngModelChange","ngModel","placeholder","disabled"],["class","fa fa-times  invalid color-red-dark",4,"ngIf"],["class","fa fa-check  valid color-green-dark",4,"ngIf"],[4,"ngIf"],[1,"fa","fa-times","invalid","color-red-dark"],[1,"fa","fa-check","valid","color-green-dark"],["aria-hidden","","height","50","width","50",1,"ntk-hover-zoom",2,"vertical-align","middle",3,"src"],["for","dataModel.linkMainImageId",1,"color-highlight",3,"click"],["matInput","","type","text","name","dataModel.linkMainImageId","autocomplete","off","id","dataModel.linkMainImageId",1,"form-control","validate-name",3,"ngModelChange","click","ngModel","placeholder"],[3,"itemSelected","openFormChange","language","isPopup","openForm","tree","openFilemanagerButtonLabelKey","openDirectUploadView","selectFileType","openFilemanagerButtonView"],[1,"form-actions"],["type","button",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-gray",3,"click"],[1,"ft-x"],["type","submit",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-green",3,"disabled"],[1,"fa","fa-check-square-o"]],template:function(i,e){if(i&1){let c=M();l(0,"div",3),I(1,"app-progress-spinner",4),l(2,"div",5)(3,"p",6),p(4),a(),l(5,"p"),p(6),S(7,"translate"),a(),l(8,"form",7,0),b("ngSubmit",function(){return f(c),h(e.onFormSubmit())}),v(10,rr,1,5,"app-cms-enum-record-status-selector",8)(11,cr,10,8,"div",9),l(12,"div",10)(13,"a",11),S(14,"cmsthumbnail"),v(15,dr,2,3,"img",12),a()(),v(16,pr,8,15,"div",9)(17,mr,9,7,"div",13),a()()()}i&2&&(r(),m("optionsInfoAreaId",e.constructor.name),r(3),C(" ",e.formInfo.formTitle," "),r(2),C(" ",T(7,9,"TITLE.Be_Careful_When_Entering_Information")," "),r(4),m("ngIf",e.fieldsInfo.recordStatus==null?null:e.fieldsInfo.recordStatus.accessWatchField),r(),m("ngIf",e.fieldsInfo.title==null?null:e.fieldsInfo.title.accessWatchField),r(2),R("href",T(14,11,e.dataModel.linkMainImageIdSrc),bt),r(2),m("ngIf",(e.dataModel==null||e.dataModel.linkMainImageIdSrc==null?null:e.dataModel.linkMainImageIdSrc.length)>0),r(),m("ngIf",e.fieldsInfo.linkMainImageId==null?null:e.fieldsInfo.linkMainImageId.accessWatchField),r(),m("ngIf",e.formInfo.formSubmitAllow))},dependencies:[G,Ce,ae,q,_e,we,Te,Ie,U,Se,Ae,K,ge,Q,Vi,H,Nt],styles:[".form-body[_ngcontent-%COMP%]{width:500px}@media (max-width: 700px){.form-body[_ngcontent-%COMP%]{display:contents}}#file-manager[_ngcontent-%COMP%]{width:calc(100vw - 16px);height:calc(100vh - 16px)}.recordStatus-1.mat-select-panel[_ngcontent-%COMP%]{background:#ff0}.recordStatus-2.mat-select-panel[_ngcontent-%COMP%]{background:#000}.recordStatus-3.mat-select-panel[_ngcontent-%COMP%]{background:red}"]});let n=s;return n})();var ur=["vform"];function fr(n,s){if(n&1){let o=M();k(0),l(1,"div",7)(2,"label",8),p(3),a(),l(4,"input",9,0),x("ngModelChange",function(i){f(o);let e=u();return A(e.dataModelResultCategory.item.title,i)||(e.dataModelResultCategory.item.title=i),h(i)}),a()(),E()}if(n&2){let o=u();r(3),w(o.fieldsInfo.title==null?null:o.fieldsInfo.title.fieldTitle),r(),R("placeholder",o.fieldsInfo.title==null?null:o.fieldsInfo.title.fieldTitle),y("ngModel",o.dataModelResultCategory.item.title)}}function hr(n,s){if(n&1){let o=M();l(0,"div",10)(1,"button",11),b("click",function(){f(o);let i=u();return h(i.onFormCancel())}),I(2,"i",12),p(3),S(4,"translate"),a(),l(5,"button",13),b("click",function(){f(o);let i=u();return h(i.onFormDelete())}),I(6,"i",14),p(7),S(8,"translate"),a()()}if(n&2){let o=u();r(3),C(" ",T(4,3,"ACTION.CANCEL")," "),r(2),m("disabled",!o.formInfo.buttonSubmittedEnabled),r(2),C(" ",T(8,5,"ACTION.DELETE")," ")}}function gr(n,s){if(n&1){let o=M();l(0,"div",10)(1,"button",11),b("click",function(){f(o);let i=u();return h(i.onFormCancel())}),I(2,"i",12),p(3),S(4,"translate"),a(),l(5,"button",13),b("click",function(){f(o);let i=u();return h(i.onFormDelete())}),I(6,"i",14),p(7),S(8,"translate"),a()()}if(n&2){let o=u();r(3),C(" ",T(4,3,"ACTION.CANCEL")," "),r(2),m("disabled",!o.formInfo.buttonSubmittedEnabled),r(2),C(" ",T(8,5,"ACTION.DELETE")," ")}}var zi=(()=>{let s=class s{constructor(t,i,e,c,_,d,V){this.data=t,this.dialogRef=i,this.publicHelper=e,this.ticketingDepartemenService=c,this.cdr=_,this.translate=d,this.cmsToastrService=V,this.requestId=0,this.fieldsInfo=new Map,this.dataModelResultCategory=new J,this.dataModelResultCategoryAllData=new J,this.dataModel={},this.formInfo=new le,this.publicHelper.processService.cdr=this.cdr,t&&(this.requestId=+t.id||0)}ngOnInit(){if(this.requestId<=0){this.cmsToastrService.typeErrorDeleteRowIsNull(),this.dialogRef.close({dialogChangedDate:!1});return}this.DataGetOne(),this.DataGetAll()}DataGetOne(){if(this.requestId===0){this.cmsToastrService.typeErrorDeleteRowIsNull();return}this.translate.get("TITLE.Loading_Information").subscribe(i=>{this.formInfo.formAlert=i});let t=this.constructor.name+"main";this.translate.get("MESSAGE.Receiving_information").subscribe(i=>{this.publicHelper.processService.processStart(t,i,this.constructor.name)}),this.ticketingDepartemenService.setAccessLoad(),this.ticketingDepartemenService.setAccessDataType(_t.Editor),this.ticketingDepartemenService.ServiceGetOneById(this.requestId).subscribe({next:i=>{this.fieldsInfo=this.publicHelper.fieldInfoConvertor(i.access),this.dataModelResultCategory=i,i.isSuccess?this.formInfo.formAlert="":(this.translate.get("ERRORMESSAGE.MESSAGE.typeError").subscribe(e=>{this.formInfo.formAlert=e}),this.formInfo.formError=i.errorMessage,this.cmsToastrService.typeErrorGetOne()),this.formInfo.formErrorStatus=!0,this.publicHelper.processService.processStop(t)},error:i=>{this.translate.get("ERRORMESSAGE.MESSAGE.typeError").subscribe(e=>{this.formInfo.formAlert=e}),this.formInfo.formErrorStatus=!0,this.cmsToastrService.typeError(i),this.publicHelper.processService.processStop(t)}})}DataGetAll(){this.translate.get("TITLE.Loading_Information").subscribe(e=>{this.formInfo.formAlert=e});let t=new $;t.rowPerPage=100;let i=this.constructor.name+"main";this.translate.get("MESSAGE.Receiving_information").subscribe(e=>{this.publicHelper.processService.processStart(i,e,this.constructor.name)}),this.ticketingDepartemenService.ServiceGetAll(t).subscribe({next:e=>{this.dataModelResultCategoryAllData=e,e.isSuccess?this.formInfo.formAlert="":(this.translate.get("ERRORMESSAGE.MESSAGE.typeError").subscribe(c=>{this.formInfo.formAlert=c}),this.formInfo.formError=e.errorMessage,this.formInfo.formErrorStatus=!0,this.cmsToastrService.typeErrorGetAll()),this.publicHelper.processService.processStop(i)},error:e=>{this.translate.get("ERRORMESSAGE.MESSAGE.typeError").subscribe(c=>{this.formInfo.formAlert=c}),this.formInfo.formErrorStatus=!0,this.cmsToastrService.typeError(e),this.publicHelper.processService.processStop(i)}})}onFormDelete(){if(this.requestId===0){this.cmsToastrService.typeErrorDeleteRowIsNull();return}this.formInfo.formSubmitAllow=!1,this.formInfo.buttonSubmittedEnabled=!1;let t=this.constructor.name+"main";this.translate.get("MESSAGE.Receiving_information").subscribe(i=>{this.publicHelper.processService.processStart(t,i,this.constructor.name)}),this.ticketingDepartemenService.ServiceDelete(this.requestId).subscribe({next:i=>{this.formInfo.formSubmitAllow=!i.isSuccess,i.isSuccess?(this.translate.get("MESSAGE.Deletion_Was_Successful").subscribe(e=>{this.formInfo.formAlert=e}),this.cmsToastrService.typeSuccessRemove(),this.dialogRef.close({dialogChangedDate:!0})):(this.translate.get("ERRORMESSAGE.MESSAGE.typeError").subscribe(e=>{this.formInfo.formAlert=e}),this.formInfo.formError=i.errorMessage,this.cmsToastrService.typeErrorRemove()),this.formInfo.buttonSubmittedEnabled=!0,this.publicHelper.processService.processStop(t)},error:i=>{this.translate.get("ERRORMESSAGE.MESSAGE.typeError").subscribe(e=>{this.formInfo.formAlert=e}),this.formInfo.formSubmitAllow=!0,this.cmsToastrService.typeError(i),this.formInfo.buttonSubmittedEnabled=!0,this.publicHelper.processService.processStop(t)}})}onFormChangeNewCatId(t){if(this.formInfo.formAlert="",this.requestId===0||!t||t.id<=0){this.cmsToastrService.typeErrorDeleteRowIsNull();return}this.dataModel.newCatId=t.id,this.dataModel.newCatId===this.requestId?(this.translate.get("ERRORMESSAGE.MESSAGE.typeError").subscribe(i=>{this.formInfo.formAlert=i}),this.formInfo.formError=this.translate.instant("ERRORMESSAGE.MESSAGE.The_delete_category_ID_is_the_same_as_the_alternate_category"),this.formInfo.buttonSubmittedEnabled=!1):(this.formInfo.buttonSubmittedEnabled=!0,this.formInfo.formError="")}onFormCancel(){this.dialogRef.close({dialogChangedDate:!1})}};s.\u0275fac=function(i){return new(i||s)(g(he),g(pe),g(L),g(Fe),g(O),g(P),g(N))},s.\u0275cmp=F({type:s,selectors:[["app-ticketing-departemen-delete"]],viewQuery:function(i,e){if(i&1&&ne(ur,5),i&2){let c;oe(c=re())&&(e.formGroup=c.first)}},decls:11,vars:8,consts:[["Title",""],[1,"card","card-style","progressOverlayContainer"],[3,"optionsInfoAreaId"],[1,"content","mb-0"],[1,"mb-0","color-highlight","font-600","font-12"],[4,"ngIf"],["class","form-actions",4,"ngIf"],[1,"input-style","has-borders","no-icon","input-style-always-active","validate-field","mb-4"],["for","dataModelResultCategory.item.title",1,"color-highlight"],["matInput","","type","text","name","dataModelResultCategory.item.title","id","dataModelResultCategory.item.title","minlength","3","maxlength","50","readonly","",1,"form-control","validate-name",3,"ngModelChange","ngModel","placeholder"],[1,"form-actions"],["type","button",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-gray",3,"click"],[1,"ft-x"],["type","button",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-red",3,"click","disabled"],[1,"fa","fa-check-square-o"]],template:function(i,e){i&1&&(l(0,"div",1),I(1,"app-progress-spinner",2),l(2,"div",3)(3,"p",4),p(4),a(),l(5,"p"),p(6),S(7,"translate"),a(),v(8,fr,6,3,"ng-container",5)(9,hr,9,7,"div",6)(10,gr,9,7,"div",6),a()()),i&2&&(r(),m("optionsInfoAreaId",e.constructor.name),r(3),C(" ",e.formInfo.formTitle," "),r(2),C(" ",T(7,6,"TITLE.Be_Careful_When_Entering_Information")," "),r(2),m("ngIf",e.dataModelResultCategory==null?null:e.dataModelResultCategory.item),r(),m("ngIf",e.formInfo.formSubmitAllow),r(),m("ngIf",e.formInfo.formSubmitAllow))},dependencies:[G,ae,q,Te,Ie,U,K,Q,H]});let n=s;return n})();var _r=()=>[5,10,20,100],Sr=n=>({display:n});function Cr(n,s){if(n&1){let o=M();l(0,"div",19)(1,"a",46),b("click",function(){f(o);let i=u();return h(i.onActionButtonNewRow())}),I(2,"i",47)(3,"br"),a(),l(4,"p",22),p(5),S(6,"translate"),a()()}n&2&&(r(5),w(T(6,1,"ACTION.ADD")))}function Tr(n,s){if(n&1){let o=M();l(0,"div",19)(1,"a",48),b("click",function(){f(o);let i=u();return h(i.onActionButtonEditRow(i.tableRowSelected))}),I(2,"i",49)(3,"br"),a(),l(4,"p",22),p(5),S(6,"translate"),a()()}n&2&&(r(5),w(T(6,1,"ACTION.EDIT")))}function Ir(n,s){if(n&1){let o=M();l(0,"div",19)(1,"a",50),b("click",function(){f(o);let i=u();return h(i.onActionButtonDeleteRow(i.tableRowSelected))}),I(2,"i",51)(3,"br"),a(),l(4,"p",22),p(5),S(6,"translate"),a()()}n&2&&(r(5),w(T(6,1,"ACTION.DELETE")))}function vr(n,s){n&1&&(l(0,"mat-header-cell",52),p(1),S(2,"translate"),a()),n&2&&(r(),C(" ",T(2,1,"TITLE.PICTURE")," "))}function br(n,s){if(n&1&&(I(0,"img",54),S(1,"cmsthumbnail")),n&2){let o=u().$implicit;R("src",T(1,1,o.linkMainImageIdSrc),bt)}}function wr(n,s){if(n&1&&(l(0,"mat-cell"),v(1,br,2,3,"img",53),a()),n&2){let o=s.$implicit;r(),m("ngIf",(o==null||o.linkMainImageIdSrc==null?null:o.linkMainImageIdSrc.length)>0)}}function Mr(n,s){if(n&1&&(l(0,"mat-header-cell",52),p(1),a()),n&2){let o=u();r(),C(" ",o.fieldsInfo.id==null?null:o.fieldsInfo.id.fieldTitle," ")}}function kr(n,s){if(n&1&&(l(0,"mat-cell"),p(1),a()),n&2){let o=s.$implicit;r(),C(" ",o.id," ")}}function Er(n,s){if(n&1&&(l(0,"mat-header-cell",52),p(1),a()),n&2){let o=u();r(),C(" ",o.fieldsInfo.linkSiteId==null?null:o.fieldsInfo.linkSiteId.fieldTitle," ")}}function yr(n,s){if(n&1&&(l(0,"mat-cell"),p(1),S(2,"cmssiteinfo"),S(3,"async"),a()),n&2){let o=s.$implicit;r(),C(" ",T(3,3,T(2,1,o.linkSiteId))," ")}}function Ar(n,s){if(n&1&&(l(0,"mat-header-cell",52),p(1),a()),n&2){let o=u();r(),C(" ",o.fieldsInfo.recordStatus==null?null:o.fieldsInfo.recordStatus.fieldTitle," ")}}function xr(n,s){if(n&1&&I(0,"select",57),n&2){let o=u().$implicit,t=u();m("contentService",t.contentService)("row",o)("ngStyle",Ke(3,Sr,o.id===(t.tableRowSelected==null?null:t.tableRowSelected.id)?"":"none"))}}function Dr(n,s){if(n&1&&(l(0,"mat-cell",55),S(1,"statusCellClass"),I(2,"i",55),S(3,"statusIconClass"),v(4,xr,1,5,"select",56),a()),n&2){let o=s.$implicit,t=u();m("ngClass",T(1,3,o.recordStatus)),r(2),m("ngClass",T(3,5,o.recordStatus)),r(2),m("ngIf",t.dataModelResult==null||t.dataModelResult.access==null?null:t.dataModelResult.access.accessEditRow)}}function Rr(n,s){if(n&1&&(l(0,"mat-header-cell",52),p(1),a()),n&2){let o=u();r(),C(" ",o.fieldsInfo.title==null?null:o.fieldsInfo.title.fieldTitle," ")}}function Lr(n,s){if(n&1&&(l(0,"mat-cell"),p(1),a()),n&2){let o=s.$implicit;r(),C(" ",o.title," ")}}function Vr(n,s){if(n&1&&(l(0,"mat-header-cell",52),p(1),a()),n&2){let o=u();r(),C(" ",o.fieldsInfo.createdDate==null?null:o.fieldsInfo.createdDate.fieldTitle," ")}}function Br(n,s){if(n&1&&(l(0,"mat-cell"),p(1),a()),n&2){let o=s.$implicit,t=u();r(),C(" ",t.publicHelper.LocaleDate(o.createdDate)," ")}}function Fr(n,s){if(n&1&&(l(0,"mat-header-cell",52),p(1),a()),n&2){let o=u();r(),C(" ",o.fieldsInfo.updatedDate==null?null:o.fieldsInfo.updatedDate.fieldTitle," ")}}function Nr(n,s){if(n&1&&(l(0,"mat-cell"),p(1),a()),n&2){let o=s.$implicit,t=u();r(),C(" ",t.publicHelper.LocaleDate(o.updatedDate)," ")}}function Or(n,s){n&1&&(l(0,"mat-header-cell"),p(1),S(2,"translate"),a()),n&2&&(r(),C(" ",T(2,1,"TITLE.OPTION")," "))}function Gr(n,s){if(n&1&&(l(0,"mat-cell",58)(1,"button",59)(2,"mat-icon"),p(3,"more_vert"),a()(),I(4,"mat-menu",null,2),a()),n&2){let o=D(5);r(),m("matMenuTriggerFor",o)}}function Pr(n,s){n&1&&I(0,"mat-header-row")}function Hr(n,s){if(n&1){let o=M();l(0,"mat-row",60),b("click",function(){let i=f(o).$implicit,e=u();return h(e.onActionTableRowSelect(i))}),a()}if(n&2){let o=s.$implicit,t=s.dataIndex,i=u();Ee("ntk-row-odd",t%2)("ntk-row-even",!(t%2))("ntk-row-selected",o.id===(i.tableRowSelected==null?null:i.tableRowSelected.id))}}var qn=(()=>{let s=class s extends Ue{constructor(t,i,e,c,_,d,V,B,Y){super(t,new Ge,B,c,d),this.contentService=t,this.cmsToastrService=i,this.router=e,this.tokenHelper=c,this.cdr=_,this.translate=d,this.pageInfo=V,this.publicHelper=B,this.dialog=Y,this.flag=!1,this.tableContentSelected=[],this.filteModelContent=new $,this.tabledisplayedColumns=[],this.tabledisplayedColumnsSource=["LinkMainImageIdSrc","Id","RecordStatus"],this.tabledisplayedColumnsMobileSource=["LinkMainImageIdSrc","Id","RecordStatus"],this.publicHelper.processService.cdr=this.cdr,this.optionsSearch.parentMethods={onSubmit:te=>this.onSubmitOptionsSearch(te)},this.filteModelContent.sortColumn="Id",this.filteModelContent.sortType=j.Descending}ngOnInit(){this.filteModelContent.sortColumn="Title",this.tokenHelper.getCurrentToken().then(t=>{this.tokenInfo=t,this.DataGetAll()}),this.cmsApiStoreSubscribe=this.tokenHelper.getCurrentTokenOnChange().subscribe({next:t=>{this.tokenInfo=t,this.DataGetAll()}})}ngOnDestroy(){this.cmsApiStoreSubscribe.unsubscribe()}DataGetAll(){this.tabledisplayedColumns=this.publicHelper.TableDisplayedColumns(this.tabledisplayedColumnsSource,this.tabledisplayedColumnsMobileSource,[],this.tokenInfo),this.tableRowsSelected=[],this.onActionTableRowSelect(new Ge);let t=this.constructor.name+"main";this.translate.get("MESSAGE.get_information_list").subscribe(e=>{this.publicHelper.processService.processStart(t,e,this.constructor.name)}),this.filteModelContent.accessLoad=!0;let i=JSON.parse(JSON.stringify(this.filteModelContent));this.contentService.setAccessLoad(),this.contentService.ServiceGetAllEditor(i).subscribe({next:e=>{this.fieldsInfo=this.publicHelper.fieldInfoConvertor(e.access),e.isSuccess&&(this.dataModelResult=e,this.tableSource.data=e.listItems,this.optionsStatist?.data?.show&&this.onActionButtonStatist(!0),this.optionsSearch.childMethods&&this.optionsSearch.childMethods.setAccess(e.access)),this.publicHelper.processService.processStop(t)},error:e=>{this.cmsToastrService.typeError(e),this.publicHelper.processService.processStop(t)}})}onTableSortData(t){this.tableSource&&this.tableSource.sort&&this.tableSource.sort.active===t.active?this.tableSource.sort.start==="asc"?(t.start="desc",this.filteModelContent.sortColumn=t.active,this.filteModelContent.sortType=j.Descending):this.tableSource.sort.start==="desc"?(t.start="asc",this.filteModelContent.sortColumn="",this.filteModelContent.sortType=j.Ascending):t.start="desc":(this.filteModelContent.sortColumn=t.active,this.filteModelContent.sortType=j.Descending),this.tableSource.sort=t,this.filteModelContent.currentPageNumber=0,this.DataGetAll()}onTablePageingData(t){this.filteModelContent.currentPageNumber=t.pageIndex+1,this.filteModelContent.rowPerPage=t.pageSize,this.DataGetAll()}onActionButtonNewRow(){if(this.dataModelResult==null||this.dataModelResult.access==null||!this.dataModelResult.access.accessAddRow){this.cmsToastrService.typeErrorAccessAdd();return}var t="";this.tokenHelper.isMobile?t="dialog-fullscreen":t="dialog-min",this.dialog.open(Qi,{height:"90%",panelClass:t,enterAnimationDuration:W.cmsViewConfig.enterAnimationDuration,exitAnimationDuration:W.cmsViewConfig.exitAnimationDuration,data:{}}).afterClosed().subscribe(e=>{e&&e.dialogChangedDate&&this.DataGetAll()})}onActionButtonEditRow(t=this.tableRowSelected){if(!t||!t.id||t.id===0){this.cmsToastrService.typeErrorSelectedRow();return}if(this.onActionTableRowSelect(t),this.dataModelResult==null||this.dataModelResult.access==null||!this.dataModelResult.access.accessEditRow){this.cmsToastrService.typeErrorAccessEdit();return}var i="";this.tokenHelper.isMobile?i="dialog-fullscreen":i="dialog-min",this.dialog.open(Yt,{height:"90%",panelClass:i,enterAnimationDuration:W.cmsViewConfig.enterAnimationDuration,exitAnimationDuration:W.cmsViewConfig.exitAnimationDuration,data:{id:this.tableRowSelected.id}}).afterClosed().subscribe(c=>{c&&c.dialogChangedDate&&this.DataGetAll()})}onActionButtonDeleteRow(t=this.tableRowSelected){if(!t||!t.id||t.id===0){this.translate.get("MESSAGE.no_row_selected_to_delete").subscribe(c=>{this.cmsToastrService.typeErrorSelected(c)});return}if(this.onActionTableRowSelect(t),this.dataModelResult==null||this.dataModelResult.access==null||!this.dataModelResult.access.accessDeleteRow){this.cmsToastrService.typeErrorAccessDelete();return}var i="";this.tokenHelper.isMobile?i="dialog-fullscreen":i="dialog-min",this.dialog.open(zi,{height:"90%",panelClass:i,enterAnimationDuration:W.cmsViewConfig.enterAnimationDuration,exitAnimationDuration:W.cmsViewConfig.exitAnimationDuration,data:{id:this.tableRowSelected.id}}).afterClosed().subscribe(c=>{c&&c.dialogChangedDate&&this.DataGetAll()})}onActionButtonFaqList(t=this.tableRowSelected){if(!t||!t.id||t.id===0){this.translate.get("MESSAGE.no_row_selected_to_display").subscribe(i=>{this.cmsToastrService.typeErrorSelected(i)});return}this.onActionTableRowSelect(t),this.router.navigate(["/ticketing/faq/",this.tableRowSelected.id])}onActionButtonTemplateList(t=this.tableRowSelected){if(!t||!t.id||t.id===0){this.translate.get("MESSAGE.no_row_selected_to_display").subscribe(i=>{this.cmsToastrService.typeErrorSelected(i)});return}this.onActionTableRowSelect(t),this.router.navigate(["/ticketing/template/",this.tableRowSelected.id])}onActionButtonLogList(t=this.tableRowSelected){if(!t||!t.id||t.id===0){this.translate.get("MESSAGE.no_row_selected_to_display").subscribe(i=>{this.cmsToastrService.typeErrorSelected(i)});return}this.onActionTableRowSelect(t),this.router.navigate(["/ticketing/departemenlog/DepartemenId/",this.tableRowSelected.id])}onActionButtonTaskList(t=this.tableRowSelected){if(!t||!t.id||t.id===0){this.translate.get("MESSAGE.no_row_selected_to_display").subscribe(i=>{this.cmsToastrService.typeErrorSelected(i)});return}this.onActionTableRowSelect(t),this.router.navigate(["/ticketing/task/",this.tableRowSelected.id])}onActionButtonStatist(t=!this.optionsStatist.data.show){if(this.optionsStatist.data.show=t,!this.optionsStatist.data.show)return;let i=new Map;this.translate.get("MESSAGE.Active").subscribe(d=>{i.set(d,0)}),this.translate.get("MESSAGE.All").subscribe(d=>{i.set(d,0)});let e=this.constructor.name+".ServiceStatist";this.translate.get("MESSAGE.Get_the_statist").subscribe(d=>{this.publicHelper.processService.processStart(e,d,this.constructor.name)}),this.contentService.ServiceGetCount(this.filteModelContent).subscribe({next:d=>{d.isSuccess&&(i.set("All",d.totalRowCount),this.optionsStatist.childMethods.setStatistValue(i)),this.publicHelper.processService.processStop(e)},error:d=>{this.cmsToastrService.typeError(d),this.publicHelper.processService.processStop(e)}});let c=JSON.parse(JSON.stringify(this.filteModelContent)),_=new Z;_.propertyName="RecordStatus",_.value=Xe.Available,c.filters.push(_),this.contentService.ServiceGetCount(c).subscribe({next:d=>{d.isSuccess&&(i.set("Active",d.totalRowCount),this.optionsStatist.childMethods.setStatistValue(i)),this.publicHelper.processService.processStop(e)},error:d=>{this.cmsToastrService.typeError(d),this.publicHelper.processService.processStop(e)}})}onActionButtonReload(){this.DataGetAll()}onSubmitOptionsSearch(t){this.filteModelContent.filters=t,this.DataGetAll()}};s.\u0275fac=function(i){return new(i||s)(g(Fe),g(N),g(de),g(ie),g(O),g(P),g(He),g(L),g(xe))},s.\u0275cmp=F({type:s,selectors:[["app-ticketing-departemen-list"]],features:[z],decls:88,vars:40,consts:[["tableSort","matSort"],["paginator",""],["actionMenu","matMenu"],[3,"optionActionGuideNoticeDisplayChange","optionOnActionButtonMemoRow","optionOnActionButtonMemo","optionOnActionButtonExport","optionOnActionButtonPrintRow","optionsListInfoAreaId","optionGuideNoticeKey","optionActionGuideNoticeDisplay","optionTreeDisplay","optionActionRowId","optionActionRowDisplayMenu","optionSelectRowItemTitle"],["cms-tree",""],["cms-header",""],["cms-action-header",""],[1,"d-flex","justify-content-between","flex-wrap"],[1,"justify-content-end"],["target","_blank",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-highlight"],[3,"ngModelChange","ngModel"],[3,"click","ngModelChange","ngModel"],[1,"justify-content-start"],["type","button","target","_blank",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-highlight",3,"click"],[1,"fa-solid","fa-info","font-18",2,"color","#ffffff"],[1,"fa-solid","fa-rotate-right","font-18",2,"color","#ffffff"],["cms-action-main",""],["class","col-4",4,"ngIf"],["cms-action-row",""],[1,"col-4"],["target","_blank",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-highlight",3,"click"],[1,"fa-solid","fa-ticket","font-18",2,"color","#ffffff"],[1,"font-11","text-center","opacity-70"],[1,"fa-solid","fa-question","font-18",2,"color","#ffffff"],[1,"fa-solid","fa-memo","font-18",2,"color","#ffffff"],["cms-action-area",""],[3,"optionsChange","options"],["cms-body",""],["matSort","",3,"matSortChange","dataSource"],["matColumnDef","LinkMainImageIdSrc"],["mat-sort-header","",4,"matHeaderCellDef"],[4,"matCellDef"],["matColumnDef","Id"],["matColumnDef","LinkSiteId"],["matColumnDef","RecordStatus"],[3,"ngClass",4,"matCellDef"],["matColumnDef","Title"],["matColumnDef","CreatedDate"],["matColumnDef","UpdatedDate"],["matColumnDef","Action"],[4,"matHeaderCellDef"],["class"," Action",4,"matCellDef"],[4,"matHeaderRowDef"],[3,"ntk-row-odd","ntk-row-even","ntk-row-selected","click",4,"matRowDef","matRowDefColumns"],["cms-footer",""],[3,"page","length","pageIndex","pageSize","pageSizeOptions"],["type","button","target","_blank",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-teal",3,"click"],[1,"fa-solid","fa-plus","font-18",2,"color","#FFFFFF"],["target","_blank",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-magenta",3,"click"],[1,"fa-solid","fa-pen","font-18",2,"color","#FFFFFF"],["target","_blank",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-red",3,"click"],[1,"fa-solid","fa-trash","font-18",2,"color","#ffffff"],["mat-sort-header",""],["style","vertical-align:middle;","class","ntk-hover-zoom","aria-hidden","","height","40","width","40",3,"src",4,"ngIf"],["aria-hidden","","height","40","width","40",1,"ntk-hover-zoom",2,"vertical-align","middle",3,"src"],[3,"ngClass"],["matNativeControl","","cmsRecordStatusSelfSave","","style","background: none; border: none;",3,"contentService","row","ngStyle",4,"ngIf"],["matNativeControl","","cmsRecordStatusSelfSave","",2,"background","none","border","none",3,"contentService","row","ngStyle"],[1,"Action"],["type","button","mat-icon-button","","aria-label","Action Menu",3,"matMenuTriggerFor"],[3,"click"]],template:function(i,e){if(i&1){let c=M();l(0,"app-cms-html-list",3),x("optionActionGuideNoticeDisplayChange",function(d){return f(c),A(e.viewGuideNotice,d)||(e.viewGuideNotice=d),h(d)}),b("optionOnActionButtonMemoRow",function(){return f(c),h(e.onActionButtonMemoRow())})("optionOnActionButtonMemo",function(){return f(c),h(e.onActionButtonMemo())})("optionOnActionButtonExport",function(){return f(c),h(e.onActionButtonExport())})("optionOnActionButtonPrintRow",function(){return f(c),h(e.onActionButtonPrintRow())}),k(1,4),p(2," -------------------------------------- "),E(),ye(3,5),k(4,6),l(5,"div",7)(6,"div",8)(7,"a",9)(8,"mat-slide-toggle",10),x("ngModelChange",function(d){return f(c),A(e.optionsSearch.data.show,d)||(e.optionsSearch.data.show=d),h(d)}),a(),p(9),S(10,"translate"),a(),l(11,"a",9)(12,"mat-slide-toggle",11),b("click",function(){return f(c),h(e.onActionButtonStatist())}),x("ngModelChange",function(d){return f(c),A(e.optionsStatist.data.show,d)||(e.optionsStatist.data.show=d),h(d)}),a(),p(13),S(14,"translate"),a()(),l(15,"div",12)(16,"a",13),b("click",function(){return f(c),h(e.viewGuideNotice=!e.viewGuideNotice)}),I(17,"i",14),a(),l(18,"a",13),b("click",function(){return f(c),h(e.onActionButtonReload())}),I(19,"i",15),a()()(),E(),k(20,16),v(21,Cr,7,3,"div",17),E(),k(22,18),v(23,Tr,7,3,"div",17)(24,Ir,7,3,"div",17),l(25,"div",19)(26,"a",20),b("click",function(){return f(c),h(e.onActionButtonTaskList(e.tableRowSelected))}),I(27,"i",21)(28,"br"),a(),l(29,"p",22),p(30),S(31,"translate"),a()(),l(32,"div",19)(33,"a",20),b("click",function(){return f(c),h(e.onActionButtonFaqList(e.tableRowSelected))}),I(34,"i",23)(35,"br"),a(),l(36,"p",22),p(37),S(38,"translate"),a()(),l(39,"div",19)(40,"a",20),b("click",function(){return f(c),h(e.onActionButtonTemplateList(e.tableRowSelected))}),I(41,"i",24)(42,"br"),a(),l(43,"p",22),p(44),S(45,"translate"),a()(),l(46,"div",19)(47,"a",20),b("click",function(){return f(c),h(e.onActionButtonLogList(e.tableRowSelected))}),I(48,"i",24)(49,"br"),a(),l(50,"p",22),p(51),S(52,"translate"),a()(),E(),k(53,25),l(54,"app-cms-search-list",26),x("optionsChange",function(d){return f(c),A(e.optionsSearch,d)||(e.optionsSearch=d),h(d)}),a(),l(55,"app-cms-statist-list",26),x("optionsChange",function(d){return f(c),A(e.optionsStatist,d)||(e.optionsStatist=d),h(d)}),a(),E(),k(56,27),l(57,"mat-table",28,0),b("matSortChange",function(){f(c);let d=D(58);return h(e.onTableSortData(d))}),k(59,29),v(60,vr,3,3,"mat-header-cell",30)(61,wr,2,1,"mat-cell",31),E(),k(62,32),v(63,Mr,2,1,"mat-header-cell",30)(64,kr,2,1,"mat-cell",31),E(),k(65,33),v(66,Er,2,1,"mat-header-cell",30)(67,yr,4,5,"mat-cell",31),E(),k(68,34),v(69,Ar,2,1,"mat-header-cell",30)(70,Dr,5,7,"mat-cell",35),E(),k(71,36),v(72,Rr,2,1,"mat-header-cell",30)(73,Lr,2,1,"mat-cell",31),E(),k(74,37),v(75,Vr,2,1,"mat-header-cell",30)(76,Br,2,1,"mat-cell",31),E(),k(77,38),v(78,Fr,2,1,"mat-header-cell",30)(79,Nr,2,1,"mat-cell",31),E(),k(80,39),v(81,Or,3,3,"mat-header-cell",40)(82,Gr,6,1,"mat-cell",41),E(),v(83,Pr,1,0,"mat-header-row",42)(84,Hr,1,6,"mat-row",43),a(),E(),k(85,44),l(86,"mat-paginator",45,1),b("page",function(d){return f(c),h(e.onTablePageingData(d))}),a(),E(),a()}i&2&&(m("optionsListInfoAreaId",e.constructor.name)("optionGuideNoticeKey","ticketing.departemen.list"),y("optionActionGuideNoticeDisplay",e.viewGuideNotice),m("optionTreeDisplay",!1)("optionActionRowId",e.tableRowSelected==null?null:e.tableRowSelected.id)("optionActionRowDisplayMenu",e.tableRowSelectDoubleClick)("optionSelectRowItemTitle",(e.tableRowSelected==null||e.tableRowSelected.title==null?null:e.tableRowSelected.title.length)>0?e.tableRowSelected==null?null:e.tableRowSelected.title:e.tableRowSelected==null?null:e.tableRowSelected.id),r(8),y("ngModel",e.optionsSearch.data.show),r(),C("",T(10,27,"ACTION.SEARCH")," "),r(3),y("ngModel",e.optionsStatist.data.show),r(),C(" ",T(14,29,"ACTION.STATIST")," "),r(8),m("ngIf",e.dataModelResult==null||e.dataModelResult.access==null?null:e.dataModelResult.access.accessAddRow),r(2),m("ngIf",e.dataModelResult==null||e.dataModelResult.access==null?null:e.dataModelResult.access.accessEditRow),r(),m("ngIf",e.dataModelResult==null||e.dataModelResult.access==null?null:e.dataModelResult.access.accessDeleteRow),r(6),w(T(31,31,"ACTION.TICKETS")),r(7),w(T(38,33,"ACTION.QUESTIONS")),r(7),w(T(45,35,"ACTION.TEMPLATES")),r(7),C(" ",T(52,37,"ACTION.LOGS"),""),r(3),y("options",e.optionsSearch),r(),y("options",e.optionsStatist),r(2),m("dataSource",e.tableSource),r(26),m("matHeaderRowDef",e.tabledisplayedColumns),r(),m("matRowDefColumns",e.tabledisplayedColumns),r(2),m("length",e.dataModelResult.totalRowCount)("pageIndex",e.dataModelResult.currentPageNumber-1)("pageSize",e.dataModelResult.rowPerPage)("pageSizeOptions",ze(39,_r)))},dependencies:[yt,G,Je,q,U,Be,De,K,Ye,Ze,$e,et,tt,it,nt,rt,ct,at,ot,dt,lt,st,pt,mt,We,je,qe,Mt,Ve,H,ft,Nt,Et,kt],encapsulation:2});let n=s;return n})();function Wr(n,s){if(n&1){let o=M();l(0,"button",12),b("click",function(){f(o);let i=u();return h(i.onActionAdd())}),p(1),S(2,"translate"),a()}n&2&&(r(),w(T(2,1,"ACTION.ADD")))}function jr(n,s){if(n&1){let o=M();l(0,"button",13),b("click",function(){f(o);let i=u();return h(i.onActionEdit())}),p(1),S(2,"translate"),a()}n&2&&(r(),w(T(2,1,"ACTION.EDIT")))}function Ur(n,s){if(n&1){let o=M();l(0,"button",14),b("click",function(){f(o);let i=u();return h(i.onActionDelete())}),p(1),S(2,"translate"),a()}n&2&&(r(),w(T(2,1,"ACTION.DELETE")))}function Qr(n,s){if(n&1){let o=M();l(0,"button",15),b("click",function(){f(o);let i=u();return h(i.onActionButtonReload())}),l(1,"mat-icon",16),S(2,"translate"),p(3,"refresh"),a()()}n&2&&(r(),R("title",T(2,1,"ACTION.RELOAD")))}function zr(n,s){if(n&1){let o=M();l(0,"mat-tree-node",17),b("click",function(){let i=f(o).$implicit,e=u();return h(e.onActionSelect(i))}),I(1,"button",18),p(2),a()}if(n&2){let o=s.$implicit,t=s.dataIndex,i=u();Ee("ntk-tree-odd",t%2)("ntk-tree-even",!(t%2))("ntk-tree-selected",i.dataModelSelect.id>0&&i.dataModelSelect.id===o.id),r(2),C(" ",o.title," ")}}function Kr(n,s){if(n&1){let o=M();l(0,"mat-nested-tree-node")(1,"li")(2,"div",19),b("click",function(){let i=f(o).$implicit,e=u();return h(e.onActionSelect(i))}),l(3,"button",20),b("click",function(){let i=f(o).$implicit,e=u();return h(e.onActionSelect(i))}),l(4,"mat-icon",21),p(5),a()(),p(6),a(),l(7,"ul"),ye(8,22),a()()()}if(n&2){let o=s.$implicit,t=u();r(2),Ee("ntk-tree-selected",t.dataModelSelect.id>0&&t.dataModelSelect.id===o.id),r(),Vt("aria-label","Toggle "+o.title),r(2),C(" ",t.treeControl.isExpanded(o)?"expand_more":"chevron_right"," "),r(),C(" ",o.title," "),r(),Ee("category-tree-invisible",!t.treeControl.isExpanded(o))}}var Ot=(()=>{let s=class s{constructor(t,i,e,c,_,d,V,B){this.cmsToastrService=t,this.coreEnumService=i,this.categoryService=e,this.dialog=c,this.cdr=_,this.publicHelper=d,this.tokenHelper=V,this.translate=B,this.dataModelSelect=new Ge,this.dataModelResult=new J,this.filterModel=new $,this.treeControl=new bn(Y=>null),this.dataSource=new Dn,this.optionChange=new Ut,this.optionReload=()=>this.onActionButtonReload(),this.hasChild=(Y,te)=>!1,this.publicHelper.processService.cdr=this.cdr}set optionSelectForce(t){this.onActionSelectForce(t)}ngOnInit(){this.DataGetAll(),this.cmsApiStoreSubscribe=this.tokenHelper.getCurrentTokenOnChange().subscribe(t=>{this.DataGetAll()})}ngOnDestroy(){this.cmsApiStoreSubscribe.unsubscribe()}DataGetAll(){this.filterModel.rowPerPage=200,this.filterModel.accessLoad=!0;let t=this.constructor.name+"main";this.translate.get("MESSAGE.Receiving_information").subscribe(i=>{this.publicHelper.processService.processStart(t,i,this.constructor.name)}),this.categoryService.ServiceGetAll(this.filterModel).subscribe({next:i=>{i.isSuccess&&(this.dataModelResult=i,this.dataSource.data=this.dataModelResult.listItems),this.publicHelper.processService.processStop(t)},error:i=>{this.cmsToastrService.typeError(i),this.publicHelper.processService.processStop(t,!1)}})}onActionSelect(t){this.dataModelSelect=t,this.optionChange.emit(this.dataModelSelect)}onActionButtonReload(){this.onActionSelect(null),this.dataModelSelect=new Ge,this.DataGetAll()}onActionSelectForce(t){}onActionAdd(){var t="";this.tokenHelper.isMobile?t="dialog-fullscreen":t="dialog-min",this.dialog.open(Qi,{height:"90%",panelClass:t,enterAnimationDuration:W.cmsViewConfig.enterAnimationDuration,exitAnimationDuration:W.cmsViewConfig.exitAnimationDuration,data:{}}).afterClosed().subscribe(e=>{e&&e.dialogChangedDate&&this.DataGetAll()})}onActionEdit(){let t=0;if(this.dataModelSelect&&this.dataModelSelect.id>0&&(t=this.dataModelSelect.id),t===0){this.translate.get("ERRORMESSAGE.MESSAGE.typeErrorCategoryNotSelected").subscribe(c=>{this.cmsToastrService.typeErrorSelected(c)});return}var i="";this.tokenHelper.isMobile?i="dialog-fullscreen":i="dialog-min",this.dialog.open(Yt,{height:"90%",panelClass:i,enterAnimationDuration:W.cmsViewConfig.enterAnimationDuration,exitAnimationDuration:W.cmsViewConfig.exitAnimationDuration,data:{id:t}}).afterClosed().subscribe(c=>{c&&c.dialogChangedDate&&this.DataGetAll()})}onActionDelete(){let t=0;if(this.dataModelSelect&&this.dataModelSelect.id>0&&(t=this.dataModelSelect.id),t===0){this.translate.get("ERRORMESSAGE.MESSAGE.typeErrorCategoryNotSelected").subscribe(c=>{this.cmsToastrService.typeErrorSelected(c)});return}var i="";this.tokenHelper.isMobile?i="dialog-fullscreen":i="dialog-min",this.dialog.open(zi,{height:"90%",panelClass:i,enterAnimationDuration:W.cmsViewConfig.enterAnimationDuration,exitAnimationDuration:W.cmsViewConfig.exitAnimationDuration,data:{id:t}}).afterClosed().subscribe(c=>{c&&c.dialogChangedDate&&this.DataGetAll()})}};s.\u0275fac=function(i){return new(i||s)(g(N),g(X),g(Fe),g(xe),g(O),g(L),g(ie),g(P))},s.\u0275cmp=F({type:s,selectors:[["app-ticketing-departemen-tree"]],inputs:{optionSelectForce:"optionSelectForce",optionReload:"optionReload"},outputs:{optionChange:"optionChange"},decls:14,vars:13,consts:[[3,"optionHeaderDisplay","optionActionMainDisplay","optionFooterDisplay"],["cms-tree-header",""],["cms-tree-action",""],["type","button","class","btn font-13 font-600 btn-s m-1 rounded-s shadow-xl border-0 gradient-teal",3,"click",4,"ngIf"],["type","button","class","btn font-13 font-600 btn-s m-1 rounded-s shadow-xl border-0 gradient-magenta",3,"click",4,"ngIf"],["type","button","class","btn font-13 font-600 btn-s m-1 rounded-s shadow-xl border-0 gradient-red",3,"click",4,"ngIf"],["type","button","class","btn font-13 font-600 btn-s m-1 rounded-s shadow-xl border-0 gradient-highlight",3,"click",4,"ngIf"],["cms-tree-body",""],[1,"category-tree","cursor-pointer",3,"dataSource","treeControl"],["matTreeNodePadding","",3,"ntk-tree-odd","ntk-tree-even","ntk-tree-selected","click",4,"matTreeNodeDef"],[4,"matTreeNodeDef","matTreeNodeDefWhen"],["cms-tree-footer",""],["type","button",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-teal",3,"click"],["type","button",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-magenta",3,"click"],["type","button",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-red",3,"click"],["type","button",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-highlight",3,"click"],[2,"font-size","20px","margin","-6px",3,"title"],["matTreeNodePadding","",3,"click"],["type","button","mat-icon-button","","disabled",""],[1,"mat-tree-node",3,"click"],["type","button","mat-icon-button","","matTreeNodeToggle","",3,"click"],[1,"mat-icon-rtl-mirror"],["matTreeNodeOutlet",""]],template:function(i,e){i&1&&(l(0,"app-cms-html-tree",0),k(1,1),p(2),S(3,"translate"),E(),k(4,2),v(5,Wr,3,3,"button",3)(6,jr,3,3,"button",4)(7,Ur,3,3,"button",5)(8,Qr,4,3,"button",6),E(),k(9,7),l(10,"mat-tree",8),v(11,zr,3,7,"mat-tree-node",9)(12,Kr,9,7,"mat-nested-tree-node",10),a(),E(),ye(13,11),a()),i&2&&(m("optionHeaderDisplay",!0)("optionActionMainDisplay",!0)("optionFooterDisplay",!1),r(2),C(" ",T(3,11,"TABLE."+(e.dataModelResult==null||e.dataModelResult.access==null?null:e.dataModelResult.access.moduleEntityName))," "),r(3),m("ngIf",e.dataModelResult==null||e.dataModelResult.access==null?null:e.dataModelResult.access.accessAddRow),r(),m("ngIf",(e.dataModelResult==null||e.dataModelResult.access==null?null:e.dataModelResult.access.accessEditRow)&&(e.dataModelSelect==null?null:e.dataModelSelect.id)>0),r(),m("ngIf",(e.dataModelResult==null||e.dataModelResult.access==null?null:e.dataModelResult.access.accessDeleteRow)&&(e.dataModelSelect==null?null:e.dataModelSelect.id)>0),r(),m("ngIf",e.dataModelResult==null||e.dataModelResult.access==null?null:e.dataModelResult.access.accessWatchRow),r(2),m("dataSource",e.dataSource)("treeControl",e.treeControl),r(2),m("matTreeNodeDefWhen",e.hasChild))},dependencies:[G,Be,De,kn,Mn,En,xn,An,wn,yn,Zi,H]});let n=s;return n})();var Jr=()=>[5,10,20,100],Xr=n=>({display:n});function Yr(n,s){if(n&1){let o=M();l(0,"a",42),b("click",function(){f(o);let i=u();return h(i.onActionBackToParent())}),I(1,"i",43),a()}}function Zr(n,s){if(n&1){let o=M();l(0,"div",44)(1,"a",45),b("click",function(){f(o);let i=u();return h(i.onActionButtonEditRow(i.tableRowSelected))}),I(2,"i",46)(3,"br"),a(),l(4,"p",47),p(5),S(6,"translate"),a()()}n&2&&(r(5),w(T(6,1,"ACTION.EDIT")))}function $r(n,s){if(n&1&&(l(0,"mat-header-cell",48),p(1),a()),n&2){let o=u();r(),C(" ",o.fieldsInfo.id==null?null:o.fieldsInfo.id.fieldTitle," ")}}function ea(n,s){if(n&1&&(l(0,"mat-cell"),p(1),a()),n&2){let o=s.$implicit;r(),C(" ",o.id," ")}}function ta(n,s){if(n&1&&(l(0,"mat-header-cell",48),p(1),a()),n&2){let o=u();r(),C(" ",o.fieldsInfo.linkSiteId==null?null:o.fieldsInfo.linkSiteId.fieldTitle," ")}}function ia(n,s){if(n&1&&(l(0,"mat-cell"),p(1),S(2,"cmssiteinfo"),S(3,"async"),a()),n&2){let o=s.$implicit;r(),C(" ",T(3,3,T(2,1,o.linkSiteId))," ")}}function na(n,s){if(n&1&&(l(0,"mat-header-cell",48),p(1),a()),n&2){let o=u();r(),C(" ",o.fieldsInfo.linkSourceId==null?null:o.fieldsInfo.linkSourceId.fieldTitle," ")}}function oa(n,s){if(n&1&&(l(0,"mat-cell"),p(1),a()),n&2){let o=s.$implicit;r(),C(" ",o.linkSourceId," ")}}function ra(n,s){if(n&1&&(l(0,"mat-header-cell",48),p(1),a()),n&2){let o=u();r(),C(" ",o.fieldsInfo.recordStatus==null?null:o.fieldsInfo.recordStatus.fieldTitle," ")}}function aa(n,s){if(n&1&&I(0,"select",51),n&2){let o=u().$implicit,t=u();m("contentService",t.contentService)("row",o)("ngStyle",Ke(3,Xr,o.id===(t.tableRowSelected==null?null:t.tableRowSelected.id)?"":"none"))}}function la(n,s){if(n&1&&(l(0,"mat-cell",49),S(1,"statusCellClass"),I(2,"i",49),S(3,"statusIconClass"),v(4,aa,1,5,"select",50),a()),n&2){let o=s.$implicit,t=u();m("ngClass",T(1,3,o.recordStatus)),r(2),m("ngClass",T(3,5,o.recordStatus)),r(2),m("ngIf",t.dataModelResult==null||t.dataModelResult.access==null?null:t.dataModelResult.access.accessEditRow)}}function sa(n,s){if(n&1&&(l(0,"mat-header-cell",48),p(1),a()),n&2){let o=u();r(),C(" ",o.fieldsInfo.title==null?null:o.fieldsInfo.title.fieldTitle," ")}}function ca(n,s){if(n&1&&(l(0,"mat-cell"),p(1),a()),n&2){let o=s.$implicit;r(),C(" ",o.title," ")}}function da(n,s){if(n&1&&(l(0,"mat-header-cell",48),p(1),a()),n&2){let o=u();r(),C(" ",o.fieldsInfo.createdDate==null?null:o.fieldsInfo.createdDate.fieldTitle," ")}}function pa(n,s){if(n&1&&(l(0,"mat-cell"),p(1),a()),n&2){let o=s.$implicit,t=u();r(),C(" ",t.publicHelper.LocaleDate(o.createdDate)," ")}}function ma(n,s){if(n&1&&(l(0,"mat-header-cell",48),p(1),a()),n&2){let o=u();r(),C(" ",o.fieldsInfo.updatedDate==null?null:o.fieldsInfo.updatedDate.fieldTitle," ")}}function ua(n,s){if(n&1&&(l(0,"mat-cell"),p(1),a()),n&2){let o=s.$implicit,t=u();r(),C(" ",t.publicHelper.LocaleDate(o.updatedDate)," ")}}function fa(n,s){n&1&&(l(0,"mat-header-cell"),p(1),S(2,"translate"),a()),n&2&&(r(),C(" ",T(2,1,"TITLE.OPTION")," "))}function ha(n,s){if(n&1&&(l(0,"mat-cell",52)(1,"button",53)(2,"mat-icon"),p(3,"more_vert"),a()(),I(4,"mat-menu",null,2),a()),n&2){let o=D(5);r(),m("matMenuTriggerFor",o)}}function ga(n,s){n&1&&I(0,"mat-header-row")}function _a(n,s){if(n&1){let o=M();l(0,"mat-row",54),b("click",function(){let i=f(o).$implicit,e=u();return h(e.onActionTableRowSelect(i))}),a()}if(n&2){let o=s.$implicit,t=s.dataIndex,i=u();Ee("ntk-row-odd",t%2)("ntk-row-even",!(t%2))("ntk-row-selected",o.id===(i.tableRowSelected==null?null:i.tableRowSelected.id))}}var tn=(()=>{let s=class s extends Ue{constructor(t,i,e,c,_,d,V,B,Y,te){super(t,new Yi,Y,_,V),this.contentService=t,this.activatedRoute=i,this.cmsToastrService=e,this.router=c,this.tokenHelper=_,this.cdr=d,this.translate=V,this.pageInfo=B,this.publicHelper=Y,this.dialog=te,this.requestDepartemenId=0,this.requestOperatorId=0,this.flag=!1,this.tableContentSelected=[],this.filteModelContent=new $,this.tabledisplayedColumns=[],this.tabledisplayedColumnsSource=["Id","RecordStatus","LinkSourceId","CreatedDate","UpdatedDate"],this.tabledisplayedColumnsMobileSource=["Id","RecordStatus","LinkSourceId","CreatedDate","UpdatedDate"],this.publicHelper.processService.cdr=this.cdr,this.requestDepartemenId=+Number(this.activatedRoute.snapshot.paramMap.get("DepartemenId")),this.requestOperatorId=+Number(this.activatedRoute.snapshot.paramMap.get("OperatorId")),this.optionsSearch.parentMethods={onSubmit:Re=>this.onSubmitOptionsSearch(Re)},this.filteModelContent.sortColumn="CreatedDate",this.filteModelContent.sortType=j.Descending}ngOnInit(){this.tokenHelper.getCurrentToken().then(i=>{this.tokenInfo=i,this.DataGetAll()}),this.cmsApiStoreSubscribe=this.tokenHelper.getCurrentTokenOnChange().subscribe({next:i=>{this.tokenInfo=i,this.DataGetAll()}});let t=new Z;this.requestOperatorId>0&&(t.propertyName="LinkFromOperatorId",t.value=this.requestOperatorId,this.filteModelContent.filters.push(t)),this.requestDepartemenId>0&&(t=new Z,t.propertyName="LinkFromTicketingDepartemenId",t.value=this.requestDepartemenId,t.clauseType=Ft.Or,this.filteModelContent.filters.push(t),t=new Z,t.propertyName="LinkToTicketingDepartemenId",t.value=this.requestDepartemenId,t.clauseType=Ft.Or,this.filteModelContent.filters.push(t))}ngOnDestroy(){this.cmsApiStoreSubscribe.unsubscribe()}DataGetAll(){this.tabledisplayedColumns=this.publicHelper.TableDisplayedColumns(this.tabledisplayedColumnsSource,this.tabledisplayedColumnsMobileSource,[],this.tokenInfo),this.tableRowsSelected=[],this.onActionTableRowSelect(new Yi);let t=this.constructor.name+"main";this.translate.get("MESSAGE.get_information_list").subscribe(e=>{this.publicHelper.processService.processStart(t,e,this.constructor.name)}),this.filteModelContent.accessLoad=!0;let i=JSON.parse(JSON.stringify(this.filteModelContent));if(this.categoryModelSelected&&this.categoryModelSelected.id>0){let e=new Z;e.propertyName="LinkFromTicketingDepartemenId",e.value=this.categoryModelSelected.id,i.filters.push(e)}this.contentService.setAccessLoad(),this.contentService.ServiceGetAllEditor(i).subscribe({next:e=>{this.fieldsInfo=this.publicHelper.fieldInfoConvertor(e.access),e.isSuccess?(this.dataModelResult=e,this.tableSource.data=e.listItems,this.optionsStatist?.data?.show&&this.onActionButtonStatist(!0),this.optionsSearch.childMethods&&this.optionsSearch.childMethods.setAccess(e.access)):this.cmsToastrService.typeErrorGetAll(e.errorMessage),this.publicHelper.processService.processStop(t)},error:e=>{this.cmsToastrService.typeError(e),this.publicHelper.processService.processStop(t)}})}onTableSortData(t){this.tableSource&&this.tableSource.sort&&this.tableSource.sort.active===t.active?this.tableSource.sort.start==="asc"?(t.start="desc",this.filteModelContent.sortColumn=t.active,this.filteModelContent.sortType=j.Descending):this.tableSource.sort.start==="desc"?(t.start="asc",this.filteModelContent.sortColumn="",this.filteModelContent.sortType=j.Ascending):t.start="desc":(this.filteModelContent.sortColumn=t.active,this.filteModelContent.sortType=j.Descending),this.tableSource.sort=t,this.filteModelContent.currentPageNumber=0,this.DataGetAll()}onTablePageingData(t){this.filteModelContent.currentPageNumber=t.pageIndex+1,this.filteModelContent.rowPerPage=t.pageSize,this.DataGetAll()}onActionSelectorSelect(t){var i=this.filteModelContent.sortColumn,e=this.filteModelContent.sortType;this.filteModelContent=new $,this.filteModelContent.sortColumn=i,this.filteModelContent.sortType=e,this.categoryModelSelected=t,this.DataGetAll()}onActionButtonEditRow(t=this.tableRowSelected){if(!t||!t.id||t.id===0){this.cmsToastrService.typeErrorSelectedRow();return}if(this.tableRowSelected=t,this.dataModelResult==null||this.dataModelResult.access==null||!this.dataModelResult.access.accessEditRow){this.cmsToastrService.typeErrorAccessEdit();return}this.router.navigate(["/application/app/edit/",this.tableRowSelected.id])}onActionButtonDeleteRow(t=this.tableRowSelected){if(t==null||!t.id||t.id===0){this.cmsToastrService.typeErrorSelectedRow();return}if(this.tableRowSelected=t,this.dataModelResult==null||this.dataModelResult.access==null||!this.dataModelResult.access.accessDeleteRow){this.cmsToastrService.typeErrorAccessDelete();return}this.router.navigate(["/application/app/delete/",this.tableRowSelected.id])}onActionButtonStatist(t=!this.optionsStatist.data.show){if(this.optionsStatist.data.show=t,!this.optionsStatist.data.show)return;let i=new Map;this.translate.get("MESSAGE.Active").subscribe(d=>{i.set(d,0)}),this.translate.get("MESSAGE.All").subscribe(d=>{i.set(d,0)});let e=this.constructor.name+".ServiceStatist";this.translate.get("MESSAGE.Get_the_statist").subscribe(d=>{this.publicHelper.processService.processStart(e,d,this.constructor.name)}),this.contentService.ServiceGetCount(this.filteModelContent).subscribe({next:d=>{d.isSuccess&&(i.set("All",d.totalRowCount),this.optionsStatist.childMethods.setStatistValue(i)),this.publicHelper.processService.processStop(e)},error:d=>{this.cmsToastrService.typeError(d),this.publicHelper.processService.processStop(e)}});let c=JSON.parse(JSON.stringify(this.filteModelContent)),_=new Z;_.propertyName="RecordStatus",_.value=Xe.Available,c.filters.push(_),this.contentService.ServiceGetCount(c).subscribe({next:d=>{d.isSuccess&&(i.set("Active",d.totalRowCount),this.optionsStatist.childMethods.setStatistValue(i)),this.publicHelper.processService.processStop(e)},error:d=>{this.cmsToastrService.typeError(d),this.publicHelper.processService.processStop(e)}})}onActionButtonReload(){this.DataGetAll()}onSubmitOptionsSearch(t){this.filteModelContent.filters=t,this.DataGetAll()}onActionBackToParent(){this.requestOperatorId>0&&this.router.navigate(["/application/app/"]),this.requestDepartemenId>0&&this.router.navigate(["/ticketing/departemen/"])}};s.\u0275fac=function(i){return new(i||s)(g(Li),g(ve),g(N),g(de),g(ie),g(O),g(P),g(He),g(L),g(xe))},s.\u0275cmp=F({type:s,selectors:[["app-application-app-list"]],features:[z],decls:59,vars:27,consts:[["tableSort","matSort"],["paginator",""],["actionMenu","matMenu"],[3,"optionActionGuideNoticeDisplayChange","optionOnActionButtonMemoRow","optionOnActionButtonMemo","optionOnActionButtonExport","optionOnActionButtonPrintRow","optionsListInfoAreaId","optionGuideNoticeKey","optionActionGuideNoticeDisplay","optionTreeDisplay","optionActionRowId","optionActionRowDisplayMenu","optionSelectRowItemTitle"],["cms-tree",""],[3,"optionChange"],["cms-header",""],["cms-action-header",""],[1,"d-flex","justify-content-between","flex-wrap"],[1,"justify-content-end"],["target","_blank",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-highlight"],[3,"ngModelChange","ngModel"],[3,"click","ngModelChange","ngModel"],[1,"justify-content-start"],["type","button","class","btn font-13 font-600 btn-s m-1 rounded-s shadow-xl border-0 gradient-gray","target","_blank",3,"click",4,"ngIf"],["type","button","target","_blank",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-highlight",3,"click"],[1,"fa-solid","fa-info","font-18",2,"color","#ffffff"],[1,"fa-solid","fa-rotate-right","font-18",2,"color","#ffffff"],["cms-action-main",""],["cms-action-row",""],["class","col-4",4,"ngIf"],["cms-action-area",""],[3,"optionsChange","options"],["cms-body",""],["matSort","",3,"matSortChange","dataSource"],["matColumnDef","Id"],["mat-sort-header","",4,"matHeaderCellDef"],[4,"matCellDef"],["matColumnDef","LinkSiteId"],["matColumnDef","LinkSourceId"],["matColumnDef","RecordStatus"],[3,"ngClass",4,"matCellDef"],["matColumnDef","Title"],["matColumnDef","CreatedDate"],["matColumnDef","UpdatedDate"],["matColumnDef","Action"],[4,"matHeaderCellDef"],["class"," Action",4,"matCellDef"],[4,"matHeaderRowDef"],[3,"ntk-row-odd","ntk-row-even","ntk-row-selected","click",4,"matRowDef","matRowDefColumns"],["cms-footer",""],[3,"page","length","pageIndex","pageSize","pageSizeOptions"],["type","button","target","_blank",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-gray",3,"click"],[1,"fa-solid","fa-arrow-left","font-18",2,"color","#ffffff"],[1,"col-4"],["target","_blank",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-magenta",3,"click"],[1,"fa-solid","fa-pen","font-18",2,"color","#FFFFFF"],[1,"font-11","text-center","opacity-70"],["mat-sort-header",""],[3,"ngClass"],["matNativeControl","","cmsRecordStatusSelfSave","","style","background: none; border: none;",3,"contentService","row","ngStyle",4,"ngIf"],["matNativeControl","","cmsRecordStatusSelfSave","",2,"background","none","border","none",3,"contentService","row","ngStyle"],[1,"Action"],["type","button","mat-icon-button","","aria-label","Action Menu",3,"matMenuTriggerFor"],[3,"click"]],template:function(i,e){if(i&1){let c=M();l(0,"app-cms-html-list",3),x("optionActionGuideNoticeDisplayChange",function(d){return f(c),A(e.viewGuideNotice,d)||(e.viewGuideNotice=d),h(d)}),b("optionOnActionButtonMemoRow",function(){return f(c),h(e.onActionButtonMemoRow())})("optionOnActionButtonMemo",function(){return f(c),h(e.onActionButtonMemo())})("optionOnActionButtonExport",function(){return f(c),h(e.onActionButtonExport())})("optionOnActionButtonPrintRow",function(){return f(c),h(e.onActionButtonPrintRow())}),k(1,4),l(2,"app-ticketing-departemen-tree",5),b("optionChange",function(d){return f(c),h(e.onActionSelectorSelect(d))}),a(),E(),ye(3,6),k(4,7),l(5,"div",8)(6,"div",9)(7,"a",10)(8,"mat-slide-toggle",11),x("ngModelChange",function(d){return f(c),A(e.optionsSearch.data.show,d)||(e.optionsSearch.data.show=d),h(d)}),a(),p(9),S(10,"translate"),a(),l(11,"a",10)(12,"mat-slide-toggle",12),b("click",function(){return f(c),h(e.onActionButtonStatist())}),x("ngModelChange",function(d){return f(c),A(e.optionsStatist.data.show,d)||(e.optionsStatist.data.show=d),h(d)}),a(),p(13),S(14,"translate"),a()(),l(15,"div",13),v(16,Yr,2,0,"a",14),l(17,"a",15),b("click",function(){return f(c),h(e.viewGuideNotice=!e.viewGuideNotice)}),I(18,"i",16),a(),l(19,"a",15),b("click",function(){return f(c),h(e.onActionButtonReload())}),I(20,"i",17),a()()(),E(),ye(21,18),k(22,19),v(23,Zr,7,3,"div",20),E(),k(24,21),l(25,"app-cms-search-list",22),x("optionsChange",function(d){return f(c),A(e.optionsSearch,d)||(e.optionsSearch=d),h(d)}),a(),l(26,"app-cms-statist-list",22),x("optionsChange",function(d){return f(c),A(e.optionsStatist,d)||(e.optionsStatist=d),h(d)}),a(),E(),k(27,23),l(28,"mat-table",24,0),b("matSortChange",function(){f(c);let d=D(29);return h(e.onTableSortData(d))}),k(30,25),v(31,$r,2,1,"mat-header-cell",26)(32,ea,2,1,"mat-cell",27),E(),k(33,28),v(34,ta,2,1,"mat-header-cell",26)(35,ia,4,5,"mat-cell",27),E(),k(36,29),v(37,na,2,1,"mat-header-cell",26)(38,oa,2,1,"mat-cell",27),E(),k(39,30),v(40,ra,2,1,"mat-header-cell",26)(41,la,5,7,"mat-cell",31),E(),k(42,32),v(43,sa,2,1,"mat-header-cell",26)(44,ca,2,1,"mat-cell",27),E(),k(45,33),v(46,da,2,1,"mat-header-cell",26)(47,pa,2,1,"mat-cell",27),E(),k(48,34),v(49,ma,2,1,"mat-header-cell",26)(50,ua,2,1,"mat-cell",27),E(),k(51,35),v(52,fa,3,3,"mat-header-cell",36)(53,ha,6,1,"mat-cell",37),E(),v(54,ga,1,0,"mat-header-row",38)(55,_a,1,6,"mat-row",39),a(),E(),k(56,40),l(57,"mat-paginator",41,1),b("page",function(d){return f(c),h(e.onTablePageingData(d))}),a(),E(),a()}i&2&&(m("optionsListInfoAreaId",e.constructor.name)("optionGuideNoticeKey",""),y("optionActionGuideNoticeDisplay",e.viewGuideNotice),m("optionTreeDisplay",e.requestDepartemenId===0)("optionActionRowId",e.tableRowSelected==null?null:e.tableRowSelected.id)("optionActionRowDisplayMenu",e.tableRowSelectDoubleClick)("optionSelectRowItemTitle",e.tableRowSelected==null?null:e.tableRowSelected.id),r(8),y("ngModel",e.optionsSearch.data.show),r(),C("",T(10,22,"ACTION.SEARCH")," "),r(3),y("ngModel",e.optionsStatist.data.show),r(),C(" ",T(14,24,"ACTION.STATIST")," "),r(3),m("ngIf",e.requestDepartemenId>0),r(7),m("ngIf",e.dataModelResult==null||e.dataModelResult.access==null?null:e.dataModelResult.access.accessEditRow),r(2),y("options",e.optionsSearch),r(),y("options",e.optionsStatist),r(2),m("dataSource",e.tableSource),r(26),m("matHeaderRowDef",e.tabledisplayedColumns),r(),m("matRowDefColumns",e.tabledisplayedColumns),r(2),m("length",e.dataModelResult.totalRowCount)("pageIndex",e.dataModelResult.currentPageNumber-1)("pageSize",e.dataModelResult.rowPerPage)("pageSizeOptions",ze(26,Jr)))},dependencies:[yt,G,Je,q,U,Be,De,K,Ye,Ze,$e,et,tt,it,nt,rt,ct,at,ot,dt,lt,st,pt,mt,We,je,qe,Mt,Ot,Ve,H,ft,Et,kt],encapsulation:2});let n=s;return n})();var Ta=["vform"];function Ia(n,s){if(n&1){let o=M();l(0,"app-cms-enum-record-status-selector",18),x("modelChange",function(i){f(o);let e=u();return A(e.dataModel.recordStatus,i)||(e.dataModel.recordStatus=i),h(i)}),a()}if(n&2){let o=u();y("model",o.dataModel.recordStatus),m("optionDisabled",!1)("optionLabel",o.fieldsInfo.recordStatus==null?null:o.fieldsInfo.recordStatus.fieldTitle)("optionRequired",!0)("optionSelectFirstItem",!0)}}function va(n,s){n&1&&I(0,"i",19)}function ba(n,s){n&1&&I(0,"i",20)}function wa(n,s){n&1&&(l(0,"mat-error"),p(1," Question is "),l(2,"strong"),p(3),S(4,"translate"),a()()),n&2&&(r(3),w(T(4,1,"MESSAGE.required")))}function Ma(n,s){if(n&1){let o=M();l(0,"div",21)(1,"button",22),b("click",function(){f(o);let i=u();return h(i.onFormCancel())}),I(2,"i",23),p(3),S(4,"translate"),a(),l(5,"button",24),I(6,"i",25),p(7),S(8,"translate"),a()()}if(n&2){u();let o=D(9);r(3),C(" ",T(4,3,"ACTION.CANCEL")," "),r(2),m("disabled",!o.form.valid),r(2),C(" ",T(8,5,"ACTION.SAVE")," ")}}var Wn=(()=>{let s=class s extends ht{constructor(t,i,e,c,_,d,V,B){super(c,new Ct,d,B),this.data=t,this.dialogRef=i,this.coreEnumService=e,this.ticketingFaqService=c,this.cmsToastrService=_,this.publicHelper=d,this.cdr=V,this.translate=B,this.requestParentId=0,this.fieldsInfo=new Map,this.selectFileTypeMainImage=["jpg","jpeg","png"],this.appLanguage="fa",this.formMatcher=new Ht,this.dataModelResult=new J,this.dataModel=new Ct,this.dataFileModel=new Map,this.formInfo=new le,this.fileManagerOpenForm=!1,this.publicHelper.processService.cdr=this.cdr,t&&(this.requestParentId=+t.parentId||0),this.requestParentId>0&&(this.dataModel.linkTicketingDepartemenId=this.requestParentId),this.fileManagerTree=this.publicHelper.GetfileManagerTreeConfig()}ngOnInit(){this.formInfo.formTitle=this.translate.instant("TITLE.Submit_New_Content"),this.DataGetAccess()}DataAddContent(){this.translate.get("MESSAGE.sending_information_to_the_server").subscribe(i=>{this.formInfo.formAlert=i}),this.formInfo.formError="";let t=this.constructor.name+"main";if(this.translate.get("MESSAGE.Receiving_information").subscribe(i=>{this.publicHelper.processService.processStart(t,i,this.constructor.name)}),this.dataModel.linkFileIds="",this.dataFileModel){let i=Array.from(this.dataFileModel.keys());i&&i.length>0&&(this.dataModel.linkFileIds=i.join(","))}this.ticketingFaqService.ServiceAdd(this.dataModel).subscribe({next:i=>{this.formInfo.formSubmitAllow=!0,this.dataModelResult=i,i.isSuccess?(this.translate.get("MESSAGE.registration_completed_successfully").subscribe(e=>{this.formInfo.formAlert=e}),this.cmsToastrService.typeSuccessAdd(),this.dialogRef.close({dialogChangedDate:!0})):(this.translate.get("ERRORMESSAGE.MESSAGE.typeError").subscribe(e=>{this.formInfo.formAlert=e}),this.formInfo.formError=i.errorMessage,this.cmsToastrService.typeErrorMessage(i.errorMessage)),this.publicHelper.processService.processStop(t)},error:i=>{this.formInfo.formSubmitAllow=!0,this.cmsToastrService.typeError(i),this.publicHelper.processService.processStop(t)}})}onActionSelectorSelect(t){if(!t||t.id<=0){let i=this.translate.instant("MESSAGE.Information_department_is_not_clear");this.cmsToastrService.typeErrorSelected(i);return}this.dataModel.linkTicketingDepartemenId=t.id}onFormSubmit(){this.formGroup.valid&&(this.formInfo.formSubmitAllow=!1,this.DataAddContent())}onFormCancel(){this.dialogRef.close({dialogChangedDate:!1})}};s.\u0275fac=function(i){return new(i||s)(g(he),g(pe),g(X),g(xt),g(N),g(L),g(O),g(P))},s.\u0275cmp=F({type:s,selectors:[["app-ticketing-faq-add"]],viewQuery:function(i,e){if(i&1&&ne(Ta,5),i&2){let c;oe(c=re())&&(e.formGroup=c.first)}},features:[z],decls:33,vars:32,consts:[["vform","ngForm"],["Question",""],[1,"card","card-style","progressOverlayContainer"],[3,"optionsInfoAreaId"],[1,"content","mb-0"],[1,"mb-0","color-highlight","font-600","font-12"],[3,"ngSubmit"],[3,"model","optionDisabled","optionLabel","optionRequired","optionSelectFirstItem","modelChange",4,"ngIf"],[3,"optionChange","optionSelectForce","optionPlaceholder"],[1,"input-style","has-borders","no-icon","input-style-always-active","validate-field","mb-4"],["for","dataModel.question",1,"color-highlight"],["matInput","","type","text","name","dataModel.question","minlength","3","maxlength","1000","required","","id","dataModel.question",1,"form-control","validate-name",3,"ngModelChange","ngModel","placeholder"],["class","fa fa-times  invalid color-red-dark",4,"ngIf"],["class","fa fa-check  valid color-green-dark",4,"ngIf"],[4,"ngIf"],["id","Answer","name","dataModel.answer",3,"ngModelChange","placeholder","config","ngModel"],[3,"dataFileModelChange","dataFileModel","openDirectUploadView"],["class","form-actions",4,"ngIf"],[3,"modelChange","model","optionDisabled","optionLabel","optionRequired","optionSelectFirstItem"],[1,"fa","fa-times","invalid","color-red-dark"],[1,"fa","fa-check","valid","color-green-dark"],[1,"form-actions"],["type","button",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-gray",3,"click"],[1,"ft-x"],["type","submit",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-green",3,"disabled"],[1,"fa","fa-check-square-o"]],template:function(i,e){if(i&1){let c=M();l(0,"div",2),I(1,"app-progress-spinner",3),l(2,"div",4)(3,"p",5),p(4),a(),l(5,"p"),p(6),S(7,"translate"),a(),l(8,"form",6,0),b("ngSubmit",function(){return f(c),h(e.onFormSubmit())}),v(10,Ia,1,5,"app-cms-enum-record-status-selector",7),l(11,"app-ticketing-departemen-selector",8),S(12,"translate"),b("optionChange",function(d){return f(c),h(e.onActionSelectorSelect(d))}),a(),l(13,"div",9)(14,"label",10),p(15),S(16,"translate"),a(),l(17,"input",11,1),S(19,"translate"),x("ngModelChange",function(d){return f(c),A(e.dataModel.question,d)||(e.dataModel.question=d),h(d)}),a(),v(20,va,1,0,"i",12)(21,ba,1,0,"i",13),l(22,"em"),p(23),a(),v(24,wa,5,3,"mat-error",14),a(),l(25,"p"),p(26),S(27,"translate"),a(),l(28,"angular-editor",15),S(29,"translate"),x("ngModelChange",function(d){return f(c),A(e.dataModel.answer,d)||(e.dataModel.answer=d),h(d)}),a(),I(30,"br"),l(31,"app-cms-files-selector",16),x("dataFileModelChange",function(d){return f(c),A(e.dataFileModel,d)||(e.dataFileModel=d),h(d)}),a(),v(32,Ma,9,7,"div",17),a()()()}if(i&2){let c=D(18);r(),m("optionsInfoAreaId",e.constructor.name),r(3),C(" ",e.formInfo.formTitle," "),r(2),C(" ",T(7,20,"TITLE.Be_Careful_When_Entering_Information")," "),r(4),m("ngIf",e.fieldsInfo.recordStatus==null?null:e.fieldsInfo.recordStatus.accessWatchField),r(),m("optionSelectForce",e.dataModel.linkTicketingDepartemenId)("optionPlaceholder",T(12,22,"TITLE.Department")),r(4),w(T(16,24,"TITLE.Question")),r(2),R("placeholder",T(19,26,"TITLE.Question")),y("ngModel",e.dataModel.question),r(3),m("ngIf",!c.value),r(),m("ngIf",c.value),r(2),C("",c.value.length," / 100"),r(),m("ngIf",c.errors==null?null:c.errors.required),r(2),C(" ",T(27,28,"TITLE.Answer")," "),r(2),m("placeholder",T(29,30,"TITLE.Enter_Text"))("config",e.publicHelper.editorConfig),y("ngModel",e.dataModel.answer),r(3),y("dataFileModel",e.dataFileModel),m("openDirectUploadView",!0),r(),m("ngIf",e.formInfo.formSubmitAllow)}},dependencies:[G,Ce,ae,q,_e,we,Te,Ie,U,Se,Ae,K,ge,Q,Hi,ji,Pe,H]});let n=s;return n})();var ka=["vform"];function Ea(n,s){if(n&1){let o=M();l(0,"app-cms-enum-record-status-selector",18),x("modelChange",function(i){f(o);let e=u();return A(e.dataModel.recordStatus,i)||(e.dataModel.recordStatus=i),h(i)}),a()}if(n&2){let o=u();y("model",o.dataModel.recordStatus),m("optionDisabled",!1)("optionLabel",o.fieldsInfo.recordStatus==null?null:o.fieldsInfo.recordStatus.fieldTitle)("optionRequired",!0)("optionSelectFirstItem",!0)}}function ya(n,s){n&1&&I(0,"i",19)}function Aa(n,s){n&1&&I(0,"i",20)}function xa(n,s){n&1&&(l(0,"mat-error"),p(1," Question is "),l(2,"strong"),p(3),S(4,"translate"),a()()),n&2&&(r(3),w(T(4,1,"MESSAGE.required")))}function Da(n,s){if(n&1){let o=M();l(0,"div",21)(1,"button",22),b("click",function(){f(o);let i=u();return h(i.onFormCancel())}),I(2,"i",23),p(3),S(4,"translate"),a(),l(5,"button",24),I(6,"i",25),p(7),S(8,"translate"),a()()}if(n&2){u();let o=D(9);r(3),C(" ",T(4,3,"ACTION.CANCEL")," "),r(2),m("disabled",!o.form.valid),r(2),C(" ",T(8,5,"ACTION.SAVE")," ")}}var jn=(()=>{let s=class s extends It{constructor(t,i,e,c,_,d,V,B){super(c,new Ct,d,B),this.data=t,this.dialogRef=i,this.coreEnumService=e,this.ticketingFaqService=c,this.cmsToastrService=_,this.publicHelper=d,this.cdr=V,this.translate=B,this.requestId=0,this.selectFileTypeMainImage=["jpg","jpeg","png"],this.appLanguage="fa",this.formMatcher=new Ht,this.dataModelResult=new St,this.dataModel=new Ct,this.dataFileModel=new Map,this.formInfo=new le,this.fileManagerOpenForm=!1,this.publicHelper.processService.cdr=this.cdr,t&&(this.requestId=+t.id||0),this.fileManagerTree=this.publicHelper.GetfileManagerTreeConfig()}ngOnInit(){if(this.translate.get("TITLE.Edit").subscribe(t=>{this.formInfo.formTitle=t}),this.requestId<=0){this.cmsToastrService.typeErrorComponentAction(),this.dialogRef.close({dialogChangedDate:!1});return}this.DataGetOneContent()}DataGetOneContent(){if(this.requestId<=0){this.cmsToastrService.typeErrorEditRowIsNull();return}this.translate.get("MESSAGE.Receiving_Information_From_The_Server").subscribe(i=>{this.formInfo.formAlert=i}),this.formInfo.formError="";let t=this.constructor.name+"main";this.translate.get("MESSAGE.Receiving_information").subscribe(i=>{this.publicHelper.processService.processStart(t,i,this.constructor.name)}),this.ticketingFaqService.setAccessLoad(),this.ticketingFaqService.setAccessDataType(_t.Editor),this.ticketingFaqService.ServiceGetOneById(this.requestId).subscribe({next:i=>{this.fieldsInfo=this.publicHelper.fieldInfoConvertor(i.access),this.dataModel=i.item,i.isSuccess?(this.formInfo.formTitle=this.formInfo.formTitle+" "+i.item.question,this.formInfo.formAlert="",this.dataModel.linkFileIds&&this.dataModel.linkFileIds.length>0&&this.dataModel.linkFileIds.split(",").forEach((e,c)=>{let _="";this.dataModel.linkFileIdsSrc.length>=this.dataModel.linkFileIdsSrc.length&&(_=this.dataModel.linkFileIdsSrc[c]),this.dataFileModel.set(+e,_)})):(this.translate.get("ERRORMESSAGE.MESSAGE.typeError").subscribe(e=>{this.formInfo.formAlert=e}),this.formInfo.formError=i.errorMessage,this.cmsToastrService.typeErrorMessage(i.errorMessage)),this.publicHelper.processService.processStop(t)},error:i=>{this.cmsToastrService.typeError(i),this.publicHelper.processService.processStop(t)}})}DataEditContent(){this.translate.get("MESSAGE.sending_information_to_the_server").subscribe(i=>{this.formInfo.formAlert=i}),this.formInfo.formError="";let t=this.constructor.name+"main";if(this.translate.get("MESSAGE.sending_information_to_the_server").subscribe(i=>{this.publicHelper.processService.processStart(t,i,this.constructor.name)}),this.dataModel.linkFileIds="",this.dataFileModel){let i=Array.from(this.dataFileModel.keys());i&&i.length>0&&(this.dataModel.linkFileIds=i.join(","))}this.ticketingFaqService.ServiceEdit(this.dataModel).subscribe({next:i=>{this.formInfo.formSubmitAllow=!0,this.dataModelResult=i,i.isSuccess?(this.translate.get("MESSAGE.registration_completed_successfully").subscribe(e=>{this.formInfo.formAlert=e}),this.cmsToastrService.typeSuccessEdit(),this.dialogRef.close({dialogChangedDate:!0})):(this.translate.get("ERRORMESSAGE.MESSAGE.typeError").subscribe(e=>{this.formInfo.formAlert=e}),this.formInfo.formError=i.errorMessage,this.cmsToastrService.typeErrorMessage(i.errorMessage)),this.publicHelper.processService.processStop(t)},error:i=>{this.formInfo.formSubmitAllow=!0,this.cmsToastrService.typeError(i),this.publicHelper.processService.processStop(t)}})}onActionSelectorSelect(t){if(!t||t.id<=0){let i=this.translate.instant("MESSAGE.Information_department_is_not_clear");this.cmsToastrService.typeErrorSelected(i);return}this.dataModel.linkTicketingDepartemenId=t.id}onFormSubmit(){this.formGroup.valid&&(this.formInfo.formSubmitAllow=!1,this.DataEditContent())}onFormCancel(){this.dialogRef.close({dialogChangedDate:!1})}};s.\u0275fac=function(i){return new(i||s)(g(he),g(pe),g(X),g(xt),g(N),g(L),g(O),g(P))},s.\u0275cmp=F({type:s,selectors:[["app-ticketing-faq-add"]],viewQuery:function(i,e){if(i&1&&ne(ka,5),i&2){let c;oe(c=re())&&(e.formGroup=c.first)}},features:[z],decls:33,vars:32,consts:[["vform","ngForm"],["Question",""],[1,"card","card-style","progressOverlayContainer"],[3,"optionsInfoAreaId"],[1,"content","mb-0"],[1,"mb-0","color-highlight","font-600","font-12"],[3,"ngSubmit"],[3,"model","optionDisabled","optionLabel","optionRequired","optionSelectFirstItem","modelChange",4,"ngIf"],[3,"optionChange","optionSelectForce","optionPlaceholder"],[1,"input-style","has-borders","no-icon","input-style-always-active","validate-field","mb-4"],["for","dataModel.question",1,"color-highlight"],["matInput","","type","text","name","dataModel.question","minlength","3","maxlength","1000","required","","id","dataModel.question",1,"form-control","validate-name",3,"ngModelChange","ngModel","placeholder"],["class","fa fa-times  invalid color-red-dark",4,"ngIf"],["class","fa fa-check  valid color-green-dark",4,"ngIf"],[4,"ngIf"],["id","Answer","name","dataModel.answer",3,"ngModelChange","placeholder","config","ngModel"],[3,"dataFileModelChange","dataFileModel","openDirectUploadView"],["class","form-actions",4,"ngIf"],[3,"modelChange","model","optionDisabled","optionLabel","optionRequired","optionSelectFirstItem"],[1,"fa","fa-times","invalid","color-red-dark"],[1,"fa","fa-check","valid","color-green-dark"],[1,"form-actions"],["type","button",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-gray",3,"click"],[1,"ft-x"],["type","submit",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-green",3,"disabled"],[1,"fa","fa-check-square-o"]],template:function(i,e){if(i&1){let c=M();l(0,"div",2),I(1,"app-progress-spinner",3),l(2,"div",4)(3,"p",5),p(4),a(),l(5,"p"),p(6),S(7,"translate"),a(),l(8,"form",6,0),b("ngSubmit",function(){return f(c),h(e.onFormSubmit())}),v(10,Ea,1,5,"app-cms-enum-record-status-selector",7),l(11,"app-ticketing-departemen-selector",8),S(12,"translate"),b("optionChange",function(d){return f(c),h(e.onActionSelectorSelect(d))}),a(),l(13,"div",9)(14,"label",10),p(15),S(16,"translate"),a(),l(17,"input",11,1),S(19,"translate"),x("ngModelChange",function(d){return f(c),A(e.dataModel.question,d)||(e.dataModel.question=d),h(d)}),a(),v(20,ya,1,0,"i",12)(21,Aa,1,0,"i",13),l(22,"em"),p(23),a(),v(24,xa,5,3,"mat-error",14),a(),l(25,"p"),p(26),S(27,"translate"),a(),l(28,"angular-editor",15),S(29,"translate"),x("ngModelChange",function(d){return f(c),A(e.dataModel.answer,d)||(e.dataModel.answer=d),h(d)}),a(),I(30,"br"),l(31,"app-cms-files-selector",16),x("dataFileModelChange",function(d){return f(c),A(e.dataFileModel,d)||(e.dataFileModel=d),h(d)}),a(),v(32,Da,9,7,"div",17),a()()()}if(i&2){let c=D(18);r(),m("optionsInfoAreaId",e.constructor.name),r(3),C(" ",e.formInfo.formTitle," "),r(2),C(" ",T(7,20,"TITLE.Be_Careful_When_Entering_Information")," "),r(4),m("ngIf",e.fieldsInfo.recordStatus==null?null:e.fieldsInfo.recordStatus.accessWatchField),r(),m("optionSelectForce",e.dataModel.linkTicketingDepartemenId)("optionPlaceholder",T(12,22,"TITLE.Department")),r(4),w(T(16,24,"TITLE.Question")),r(2),R("placeholder",T(19,26,"TITLE.Question")),y("ngModel",e.dataModel.question),r(3),m("ngIf",!c.value),r(),m("ngIf",c.value),r(2),C("",c.value.length," / 100"),r(),m("ngIf",c.errors==null?null:c.errors.required),r(2),C(" ",T(27,28,"TITLE.Answer")," "),r(2),m("placeholder",T(29,30,"TITLE.Enter_Text"))("config",e.publicHelper.editorConfig),y("ngModel",e.dataModel.answer),r(3),y("dataFileModel",e.dataFileModel),m("openDirectUploadView",!0),r(),m("ngIf",e.formInfo.formSubmitAllow)}},dependencies:[G,Ce,ae,q,_e,we,Te,Ie,U,Se,Ae,K,ge,Q,Hi,ji,Pe,H]});let n=s;return n})();var Ra=()=>[5,10,20,100],La=n=>({display:n});function Va(n,s){if(n&1){let o=M();l(0,"a",39),b("click",function(){f(o);let i=u();return h(i.onActionBackToParent())}),I(1,"i",40),a()}}function Ba(n,s){if(n&1){let o=M();l(0,"div",41)(1,"a",42),b("click",function(){f(o);let i=u();return h(i.onActionButtonNewRow())}),I(2,"i",43)(3,"br"),a(),l(4,"p",44),p(5),S(6,"translate"),a()()}n&2&&(r(5),w(T(6,1,"ACTION.ADD")))}function Fa(n,s){if(n&1){let o=M();l(0,"div",41)(1,"a",45),b("click",function(){f(o);let i=u();return h(i.onActionButtonEditRow(i.tableRowSelected))}),I(2,"i",46)(3,"br"),a(),l(4,"p",44),p(5),S(6,"translate"),a()()}n&2&&(r(5),w(T(6,1,"ACTION.EDIT")))}function Na(n,s){if(n&1){let o=M();l(0,"div",41)(1,"a",47),b("click",function(){f(o);let i=u();return h(i.onActionButtonDeleteRow(i.tableRowSelected))}),I(2,"i",48)(3,"br"),a(),l(4,"p",44),p(5),S(6,"translate"),a()()}n&2&&(r(5),w(T(6,1,"ACTION.DELETE")))}function Oa(n,s){if(n&1&&(l(0,"mat-header-cell",49),p(1),a()),n&2){let o=u();r(),C(" ",o.fieldsInfo.id==null?null:o.fieldsInfo.id.fieldTitle," ")}}function Ga(n,s){if(n&1&&(l(0,"mat-cell"),p(1),a()),n&2){let o=s.$implicit;r(),C(" ",o.id," ")}}function Pa(n,s){if(n&1&&(l(0,"mat-header-cell",49),p(1),a()),n&2){let o=u();r(),C(" ",o.fieldsInfo.linkSiteId==null?null:o.fieldsInfo.linkSiteId.fieldTitle," ")}}function Ha(n,s){if(n&1&&(l(0,"mat-cell"),p(1),S(2,"cmssiteinfo"),S(3,"async"),a()),n&2){let o=s.$implicit;r(),C(" ",T(3,3,T(2,1,o.linkSiteId))," ")}}function qa(n,s){if(n&1&&(l(0,"mat-header-cell",49),p(1),a()),n&2){let o=u();r(),C(" ",o.fieldsInfo.recordStatus==null?null:o.fieldsInfo.recordStatus.fieldTitle," ")}}function Wa(n,s){if(n&1&&I(0,"select",52),n&2){let o=u().$implicit,t=u();m("contentService",t.contentService)("row",o)("ngStyle",Ke(3,La,o.id===(t.tableRowSelected==null?null:t.tableRowSelected.id)?"":"none"))}}function ja(n,s){if(n&1&&(l(0,"mat-cell",50),S(1,"statusCellClass"),I(2,"i",50),S(3,"statusIconClass"),v(4,Wa,1,5,"select",51),a()),n&2){let o=s.$implicit,t=u();m("ngClass",T(1,3,o.recordStatus)),r(2),m("ngClass",T(3,5,o.recordStatus)),r(2),m("ngIf",t.dataModelResult==null||t.dataModelResult.access==null?null:t.dataModelResult.access.accessEditRow)}}function Ua(n,s){if(n&1&&(l(0,"mat-header-cell",49),p(1),a()),n&2){let o=u();r(),C(" ",o.fieldsInfo.question==null?null:o.fieldsInfo.question.fieldTitle," ")}}function Qa(n,s){if(n&1&&(l(0,"mat-cell"),p(1),a()),n&2){let o=s.$implicit;r(),C(" ",o.question," ")}}function za(n,s){n&1&&(l(0,"mat-header-cell"),p(1),S(2,"translate"),a()),n&2&&(r(),C(" ",T(2,1,"TITLE.OPTION")," "))}function Ka(n,s){if(n&1&&(l(0,"mat-cell",53)(1,"button",54)(2,"mat-icon"),p(3,"more_vert"),a()(),I(4,"mat-menu",null,2),a()),n&2){let o=D(5);r(),m("matMenuTriggerFor",o)}}function Ja(n,s){n&1&&I(0,"mat-header-row")}function Xa(n,s){if(n&1){let o=M();l(0,"mat-row",55),b("click",function(){let i=f(o).$implicit,e=u();return h(e.onActionTableRowSelect(i))}),a()}if(n&2){let o=s.$implicit,t=s.dataIndex,i=u();Ee("ntk-row-odd",t%2)("ntk-row-even",!(t%2))("ntk-row-selected",o.id===(i.tableRowSelected==null?null:i.tableRowSelected.id))}}var nn=(()=>{let s=class s extends Ue{constructor(t,i,e,c,_,d,V,B,Y,te,Re){super(t,new Ct,te,d,B),this.contentService=t,this.activatedRoute=i,this.cmsToastrService=e,this.cmsConfirmationDialogService=c,this.router=_,this.tokenHelper=d,this.cdr=V,this.translate=B,this.pageInfo=Y,this.publicHelper=te,this.dialog=Re,this.requestDepartemenId=0,this.flag=!1,this.tableContentSelected=[],this.filteModelContent=new $,this.tabledisplayedColumns=[],this.tabledisplayedColumnsSource=["Id","RecordStatus","Question"],this.tabledisplayedColumnsMobileSource=["Id","RecordStatus","Question"],this.publicHelper.processService.cdr=this.cdr,this.optionsSearch.parentMethods={onSubmit:jt=>this.onSubmitOptionsSearch(jt)},this.filteModelContent.sortColumn="Id",this.filteModelContent.sortType=j.Ascending}ngOnInit(){if(this.requestDepartemenId=+Number(this.activatedRoute.snapshot.paramMap.get("DepartemenId")),this.requestDepartemenId>0){let t=new Z;t.propertyName="LinkTicketingDepartemenId",t.value=this.requestDepartemenId,this.filteModelContent.filters.push(t)}this.tokenHelper.getCurrentToken().then(t=>{this.tokenInfo=t,this.DataGetAll()}),this.cmsApiStoreSubscribe=this.tokenHelper.getCurrentTokenOnChange().subscribe({next:t=>{this.tokenInfo=t,this.DataGetAll()}})}ngOnDestroy(){this.cmsApiStoreSubscribe.unsubscribe()}DataGetAll(){this.tabledisplayedColumns=this.publicHelper.TableDisplayedColumns(this.tabledisplayedColumnsSource,this.tabledisplayedColumnsMobileSource,[],this.tokenInfo),this.tableRowsSelected=[],this.onActionTableRowSelect(new Ct);let t=this.constructor.name+"main";this.translate.get("MESSAGE.get_information_list").subscribe(e=>{this.publicHelper.processService.processStart(t,e,this.constructor.name)}),this.filteModelContent.accessLoad=!0;let i=JSON.parse(JSON.stringify(this.filteModelContent));if(this.categoryModelSelected&&this.categoryModelSelected.id>0){let e=new Z;e.propertyName="LinkTicketingDepartemenId",e.value=this.categoryModelSelected.id,i.filters.push(e)}this.contentService.ServiceGetAllEditor(i).subscribe({next:e=>{this.fieldsInfo=this.publicHelper.fieldInfoConvertor(e.access),e.isSuccess?(this.dataModelResult=e,this.tableSource.data=e.listItems,this.optionsStatist?.data?.show&&this.onActionButtonStatist(!0),this.optionsSearch.childMethods&&this.optionsSearch.childMethods.setAccess(e.access)):this.cmsToastrService.typeErrorGetAll(e.errorMessage),this.publicHelper.processService.processStop(t)},error:e=>{this.cmsToastrService.typeError(e),this.publicHelper.processService.processStop(t)}})}onTableSortData(t){this.tableSource&&this.tableSource.sort&&this.tableSource.sort.active===t.active?this.tableSource.sort.start==="asc"?(t.start="desc",this.filteModelContent.sortColumn=t.active,this.filteModelContent.sortType=j.Descending):this.tableSource.sort.start==="desc"?(t.start="asc",this.filteModelContent.sortColumn="",this.filteModelContent.sortType=j.Ascending):t.start="desc":(this.filteModelContent.sortColumn=t.active,this.filteModelContent.sortType=j.Descending),this.tableSource.sort=t,this.filteModelContent.currentPageNumber=0,this.DataGetAll()}onTablePageingData(t){this.filteModelContent.currentPageNumber=t.pageIndex+1,this.filteModelContent.rowPerPage=t.pageSize,this.DataGetAll()}onActionButtonNewRow(){if(this.categoryModelSelected==null&&this.categoryModelSelected&&this.categoryModelSelected.id===0&&(this.requestDepartemenId==null||this.requestDepartemenId===0)){this.translate.get("MESSAGE.Content_not_selected").subscribe(c=>{this.cmsToastrService.typeErrorSelected(c)});return}if(this.dataModelResult==null||this.dataModelResult.access==null||!this.dataModelResult.access.accessAddRow){this.cmsToastrService.typeErrorAccessAdd();return}let t=this.requestDepartemenId;this.categoryModelSelected&&this.categoryModelSelected.id>0&&(t=this.categoryModelSelected.id);var i="";this.tokenHelper.isMobile?i="dialog-fullscreen":i="dialog-min",this.dialog.open(Wn,{height:"90%",panelClass:i,enterAnimationDuration:W.cmsViewConfig.enterAnimationDuration,exitAnimationDuration:W.cmsViewConfig.exitAnimationDuration,data:{parentId:t}}).afterClosed().subscribe(c=>{c&&c.dialogChangedDate&&this.DataGetAll()})}onActionSelectorSelect(t){var i=this.filteModelContent.sortColumn,e=this.filteModelContent.sortType;this.filteModelContent=new $,this.filteModelContent.sortColumn=i,this.filteModelContent.sortType=e,this.categoryModelSelected=t,this.DataGetAll()}onActionButtonEditRow(t=this.tableRowSelected){if(!t||!t.id||t.id===0){this.cmsToastrService.typeErrorSelectedRow();return}if(this.tableRowSelected=t,this.dataModelResult==null||this.dataModelResult.access==null||!this.dataModelResult.access.accessEditRow){this.cmsToastrService.typeErrorAccessEdit();return}var i="";this.tokenHelper.isMobile?i="dialog-fullscreen":i="dialog-min",this.dialog.open(jn,{height:"90%",panelClass:i,enterAnimationDuration:W.cmsViewConfig.enterAnimationDuration,exitAnimationDuration:W.cmsViewConfig.exitAnimationDuration,data:{id:this.tableRowSelected.id}}).afterClosed().subscribe(c=>{c&&c.dialogChangedDate&&this.DataGetAll()})}onActionButtonDeleteRow(t=this.tableRowSelected){if(t==null||!t.id||t.id===0){this.cmsToastrService.typeErrorDeleteRowIsNull();return}if(this.tableRowSelected=t,this.dataModelResult==null||this.dataModelResult.access==null||!this.dataModelResult.access.accessDeleteRow){this.cmsToastrService.typeErrorAccessDelete();return}var i="",e="";this.translate.get(["MESSAGE.Please_Confirm","MESSAGE.Do_you_want_to_delete_this_content"]).subscribe(c=>{i=c["MESSAGE.Please_Confirm"],e=c["MESSAGE.Do_you_want_to_delete_this_content"]+"?<br> ( "+this.tableRowSelected.question+" ) "}),this.cmsConfirmationDialogService.confirm(i,e).then(c=>{if(c){let _=this.constructor.name+"main";this.translate.get("MESSAGE.Receiving_information").subscribe(d=>{this.publicHelper.processService.processStart(_,d,this.constructor.name)}),this.contentService.ServiceDelete(this.tableRowSelected.id).subscribe({next:d=>{d.isSuccess?(this.cmsToastrService.typeSuccessRemove(),this.DataGetAll()):this.cmsToastrService.typeErrorRemove(),this.publicHelper.processService.processStop(_)},error:d=>{this.cmsToastrService.typeError(d),this.publicHelper.processService.processStop(_)}})}}).catch(()=>{})}onActionButtonStatist(t=!this.optionsStatist.data.show){if(this.optionsStatist.data.show=t,!this.optionsStatist.data.show)return;let i=new Map;this.translate.get("MESSAGE.Active").subscribe(d=>{i.set(d,0)}),this.translate.get("MESSAGE.All").subscribe(d=>{i.set(d,0)});let e=this.constructor.name+".ServiceStatist";this.translate.get("MESSAGE.Get_the_statist").subscribe(d=>{this.publicHelper.processService.processStart(e,d,this.constructor.name)}),this.contentService.ServiceGetCount(this.filteModelContent).subscribe({next:d=>{d.isSuccess&&(i.set("All",d.totalRowCount),this.optionsStatist.childMethods.setStatistValue(i)),this.publicHelper.processService.processStop(e)},error:d=>{this.cmsToastrService.typeError(d),this.publicHelper.processService.processStop(e)}});let c=JSON.parse(JSON.stringify(this.filteModelContent)),_=new Z;_.propertyName="RecordStatus",_.value=Xe.Available,c.filters.push(_),this.contentService.ServiceGetCount(c).subscribe({next:d=>{d.isSuccess&&(i.set("Active",d.totalRowCount),this.optionsStatist.childMethods.setStatistValue(i)),this.publicHelper.processService.processStop(e)},error:d=>{this.cmsToastrService.typeError(d),this.publicHelper.processService.processStop(e)}})}onActionButtonReload(){this.DataGetAll()}onSubmitOptionsSearch(t){this.filteModelContent.filters=t,this.DataGetAll()}onActionBackToParent(){this.router.navigate(["/ticketing/departemen/"])}};s.\u0275fac=function(i){return new(i||s)(g(xt),g(ve),g(N),g(Rt),g(de),g(ie),g(O),g(P),g(He),g(L),g(xe))},s.\u0275cmp=F({type:s,selectors:[["app-application-app-list"]],features:[z],decls:52,vars:29,consts:[["tableSort","matSort"],["paginator",""],["actionMenu","matMenu"],[3,"optionActionGuideNoticeDisplayChange","optionOnActionButtonMemoRow","optionOnActionButtonMemo","optionOnActionButtonExport","optionOnActionButtonPrintRow","optionsListInfoAreaId","optionGuideNoticeKey","optionActionGuideNoticeDisplay","optionTreeDisplay","optionActionRowId","optionActionRowDisplayMenu","optionSelectRowItemTitle"],["cms-tree",""],[3,"optionChange"],["cms-header",""],["cms-action-header",""],[1,"d-flex","justify-content-between","flex-wrap"],[1,"justify-content-end"],["target","_blank",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-highlight"],[3,"ngModelChange","ngModel"],[3,"click","ngModelChange","ngModel"],[1,"justify-content-start"],["type","button","class","btn font-13 font-600 btn-s m-1 rounded-s shadow-xl border-0 gradient-gray","target","_blank",3,"click",4,"ngIf"],["type","button","target","_blank",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-highlight",3,"click"],[1,"fa-solid","fa-info","font-18",2,"color","#ffffff"],[1,"fa-solid","fa-rotate-right","font-18",2,"color","#ffffff"],["cms-action-main",""],["class","col-4",4,"ngIf"],["cms-action-row",""],["cms-action-area",""],[3,"optionsChange","options"],["cms-body",""],["matSort","",3,"matSortChange","dataSource"],["matColumnDef","Id"],["mat-sort-header","",4,"matHeaderCellDef"],[4,"matCellDef"],["matColumnDef","LinkSiteId"],["matColumnDef","RecordStatus"],[3,"ngClass",4,"matCellDef"],["matColumnDef","Question"],["matColumnDef","Action"],[4,"matHeaderCellDef"],["class"," Action",4,"matCellDef"],[4,"matHeaderRowDef"],[3,"ntk-row-odd","ntk-row-even","ntk-row-selected","click",4,"matRowDef","matRowDefColumns"],["cms-footer",""],[3,"page","length","pageIndex","pageSize","pageSizeOptions"],["type","button","target","_blank",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-gray",3,"click"],[1,"fa-solid","fa-arrow-left","font-18",2,"color","#ffffff"],[1,"col-4"],["type","button","target","_blank",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-teal",3,"click"],[1,"fa-solid","fa-plus","font-18",2,"color","#FFFFFF"],[1,"font-11","text-center","opacity-70"],["target","_blank",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-magenta",3,"click"],[1,"fa-solid","fa-pen","font-18",2,"color","#FFFFFF"],["target","_blank",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-red",3,"click"],[1,"fa-solid","fa-trash","font-18",2,"color","#FFFFFF"],["mat-sort-header",""],[3,"ngClass"],["matNativeControl","","cmsRecordStatusSelfSave","","style","background: none; border: none;",3,"contentService","row","ngStyle",4,"ngIf"],["matNativeControl","","cmsRecordStatusSelfSave","",2,"background","none","border","none",3,"contentService","row","ngStyle"],[1,"Action"],["type","button","mat-icon-button","","aria-label","Action Menu",3,"matMenuTriggerFor"],[3,"click"]],template:function(i,e){if(i&1){let c=M();l(0,"app-cms-html-list",3),x("optionActionGuideNoticeDisplayChange",function(d){return f(c),A(e.viewGuideNotice,d)||(e.viewGuideNotice=d),h(d)}),b("optionOnActionButtonMemoRow",function(){return f(c),h(e.onActionButtonMemoRow())})("optionOnActionButtonMemo",function(){return f(c),h(e.onActionButtonMemo())})("optionOnActionButtonExport",function(){return f(c),h(e.onActionButtonExport())})("optionOnActionButtonPrintRow",function(){return f(c),h(e.onActionButtonPrintRow())}),k(1,4),l(2,"app-ticketing-departemen-tree",5),b("optionChange",function(d){return f(c),h(e.onActionSelectorSelect(d))}),a(),E(),ye(3,6),k(4,7),l(5,"div",8)(6,"div",9)(7,"a",10)(8,"mat-slide-toggle",11),x("ngModelChange",function(d){return f(c),A(e.optionsSearch.data.show,d)||(e.optionsSearch.data.show=d),h(d)}),a(),p(9),S(10,"translate"),a(),l(11,"a",10)(12,"mat-slide-toggle",12),b("click",function(){return f(c),h(e.onActionButtonStatist())}),x("ngModelChange",function(d){return f(c),A(e.optionsStatist.data.show,d)||(e.optionsStatist.data.show=d),h(d)}),a(),p(13),S(14,"translate"),a()(),l(15,"div",13),v(16,Va,2,0,"a",14),l(17,"a",15),b("click",function(){return f(c),h(e.viewGuideNotice=!e.viewGuideNotice)}),I(18,"i",16),a(),l(19,"a",15),b("click",function(){return f(c),h(e.onActionButtonReload())}),I(20,"i",17),a()()(),E(),k(21,18),v(22,Ba,7,3,"div",19),E(),k(23,20),v(24,Fa,7,3,"div",19)(25,Na,7,3,"div",19),E(),k(26,21),l(27,"app-cms-search-list",22),x("optionsChange",function(d){return f(c),A(e.optionsSearch,d)||(e.optionsSearch=d),h(d)}),a(),l(28,"app-cms-statist-list",22),x("optionsChange",function(d){return f(c),A(e.optionsStatist,d)||(e.optionsStatist=d),h(d)}),a(),E(),k(29,23),l(30,"mat-table",24,0),b("matSortChange",function(){f(c);let d=D(31);return h(e.onTableSortData(d))}),k(32,25),v(33,Oa,2,1,"mat-header-cell",26)(34,Ga,2,1,"mat-cell",27),E(),k(35,28),v(36,Pa,2,1,"mat-header-cell",26)(37,Ha,4,5,"mat-cell",27),E(),k(38,29),v(39,qa,2,1,"mat-header-cell",26)(40,ja,5,7,"mat-cell",30),E(),k(41,31),v(42,Ua,2,1,"mat-header-cell",26)(43,Qa,2,1,"mat-cell",27),E(),k(44,32),v(45,za,3,3,"mat-header-cell",33)(46,Ka,6,1,"mat-cell",34),E(),v(47,Ja,1,0,"mat-header-row",35)(48,Xa,1,6,"mat-row",36),a(),E(),k(49,37),l(50,"mat-paginator",38,1),b("page",function(d){return f(c),h(e.onTablePageingData(d))}),a(),E(),a()}i&2&&(m("optionsListInfoAreaId",e.constructor.name)("optionGuideNoticeKey","ticketing.faq.list"),y("optionActionGuideNoticeDisplay",e.viewGuideNotice),m("optionTreeDisplay",e.requestDepartemenId===0)("optionActionRowId",e.tableRowSelected==null?null:e.tableRowSelected.id)("optionActionRowDisplayMenu",e.tableRowSelectDoubleClick)("optionSelectRowItemTitle",e.tableRowSelected==null?null:e.tableRowSelected.id),r(8),y("ngModel",e.optionsSearch.data.show),r(),C("",T(10,24,"ACTION.SEARCH")," "),r(3),y("ngModel",e.optionsStatist.data.show),r(),C(" ",T(14,26,"ACTION.STATIST")," "),r(3),m("ngIf",e.requestDepartemenId>0),r(6),m("ngIf",e.dataModelResult==null||e.dataModelResult.access==null?null:e.dataModelResult.access.accessAddRow),r(2),m("ngIf",e.dataModelResult==null||e.dataModelResult.access==null?null:e.dataModelResult.access.accessEditRow),r(),m("ngIf",e.dataModelResult==null||e.dataModelResult.access==null?null:e.dataModelResult.access.accessDeleteRow),r(2),y("options",e.optionsSearch),r(),y("options",e.optionsStatist),r(2),m("dataSource",e.tableSource),r(17),m("matHeaderRowDef",e.tabledisplayedColumns),r(),m("matRowDefColumns",e.tabledisplayedColumns),r(2),m("length",e.dataModelResult.totalRowCount)("pageIndex",e.dataModelResult.currentPageNumber-1)("pageSize",e.dataModelResult.rowPerPage)("pageSizeOptions",ze(28,Ra)))},dependencies:[yt,G,Je,q,U,Be,De,K,Ye,Ze,$e,et,tt,it,nt,rt,ct,at,ot,dt,lt,st,pt,mt,We,je,qe,Mt,Ot,Ve,H,ft,Et,kt],encapsulation:2});let n=s;return n})();function Ya(n,s){if(n&1&&(l(0,"div",6)(1,"button",7),I(2,"i",8),p(3),I(4,"i",9),a(),l(5,"div",10)(6,"div",11),I(7,"p",12),a()()()),n&2){let o=u().$implicit,t=u().$implicit;r(),Vt("data-bs-target","#collapse"+o.id),r(2),C(" ",o.question," "),r(2),Bt("id","collapse",o.id,""),Vt("data-bs-parent","#accordion-"+t.id),r(2),m("innerHTML",o.answer,bi)}}function Za(n,s){if(n&1&&(k(0),v(1,Ya,8,6,"div",5),E()),n&2){let o=s.$implicit,t=u().$implicit;r(),m("ngIf",o.linkTicketingDepartemenId===t.id)}}function $a(n,s){if(n&1&&(k(0),l(1,"div",2)(2,"div",3)(3,"h4"),p(4),a()(),l(5,"div",4),v(6,Za,2,1,"ng-container",1),a()(),E()),n&2){let o=s.$implicit,t=u();r(4),w(o.title),r(),Bt("id","accordion-",o.id,""),r(),m("ngForOf",t.dataModelResult.listItems)}}var Un=(()=>{let s=class s{constructor(t,i,e,c,_,d,V,B){this.ticketingFaqService=t,this.ticketingDepartemenService=i,this.publicHelper=e,this.cmsToastrService=c,this.router=_,this.cdr=d,this.translate=V,this.tokenHelper=B,this.fieldsInfo=new Map,this.flag=!1,this.tableContentSelected=[],this.filteModelContent=new $,this.dataModelResult=new J,this.dataDepartemenModelResult=new J,this.optionsSearch=new qi,this.optionsStatist=new Wi,this.tokenInfo=new Gt,this.loadingCat=new Rn,this.tableRowsSelected=[],this.tableRowSelected=new Ct,this.tableSource=new vn,this.DataDepartemanLinkSelect=0,this.DataFaqLinkSelect=0,this.publicHelper.processService.cdr=this.cdr,this.filteModelContent.sortColumn="Id",this.filteModelContent.sortType=j.Ascending}ngOnInit(){this.DataDepartemenGetAll(),this.tokenHelper.getCurrentToken().then(t=>{this.tokenInfo=t,this.DataGetAll()}),this.cmsApiStoreSubscribe=this.tokenHelper.getCurrentTokenOnChange().subscribe({next:t=>{this.DataDepartemenGetAll(),this.tokenInfo=t,this.DataGetAll()}})}ngOnDestroy(){this.cmsApiStoreSubscribe.unsubscribe()}DataGetAll(){this.tableRowsSelected=[],this.onActionTableRowSelect(new Ct);let t=this.constructor.name+"main";this.translate.get("MESSAGE.Receiving_information").subscribe(e=>{this.publicHelper.processService.processStart(t,e,this.constructor.name)}),this.filteModelContent.accessLoad=!0;let i=JSON.parse(JSON.stringify(this.filteModelContent));if(this.categoryModelSelected&&this.categoryModelSelected.id>0){let e=new Z;e.propertyName="LinkTicketingDepartemenId",e.value=this.categoryModelSelected.id,i.filters.push(e)}this.ticketingFaqService.ServiceGetAllOrigin(i).subscribe({next:e=>{this.fieldsInfo=this.publicHelper.fieldInfoConvertor(e.access),e.isSuccess?(this.dataModelResult=e,this.tableSource.data=e.listItems):this.cmsToastrService.typeErrorGetAll(e.errorMessage),this.publicHelper.processService.processStop(t)},error:e=>{this.cmsToastrService.typeError(e),this.publicHelper.processService.processStop(t)}})}DataDepartemenGetAll(){this.loadingCat.Start("main"),this.ticketingDepartemenService.ServiceGetAllOrigin(null).subscribe({next:t=>{this.fieldsInfo=this.publicHelper.fieldInfoConvertor(t.access),t.isSuccess?this.dataDepartemenModelResult=t:this.cmsToastrService.typeErrorGetAll(t.errorMessage),this.loadingCat.Stop("main"),this.cdr.detectChanges()},error:t=>{this.cmsToastrService.typeError(t),this.loadingCat.Stop("main")}})}onTableSortData(t){this.tableSource&&this.tableSource.sort&&this.tableSource.sort.active===t.active?this.tableSource.sort.start==="asc"?(t.start="desc",this.filteModelContent.sortColumn=t.active,this.filteModelContent.sortType=j.Descending):this.tableSource.sort.start==="desc"?(t.start="asc",this.filteModelContent.sortColumn="",this.filteModelContent.sortType=j.Ascending):t.start="desc":(this.filteModelContent.sortColumn=t.active,this.filteModelContent.sortType=j.Descending),this.tableSource.sort=t,this.filteModelContent.currentPageNumber=0,this.DataGetAll()}onTablePageingData(t){this.filteModelContent.currentPageNumber=t.pageIndex+1,this.filteModelContent.rowPerPage=t.pageSize,this.DataGetAll()}onActionSelectorSelect(t){var i=this.filteModelContent.sortColumn,e=this.filteModelContent.sortType;this.filteModelContent=new $,this.filteModelContent.sortColumn=i,this.filteModelContent.sortType=e,this.categoryModelSelected=t,this.DataGetAll()}onActionButtonReload(){this.DataGetAll()}onSubmitOptionsSearch(t){this.filteModelContent.filters=t,this.DataGetAll()}onActionTableRowSelect(t){this.tableRowSelected=t,t.expanded||(t.expanded=!1),t.expanded=!t.expanded}onActionBackToParent(){this.router.navigate(["/ticketing/departemen/"])}onActionButtonDeparteman(t){this.DataDepartemanLinkSelect=t,this.DataFaqLinkSelect=0}onActionButtonFaqTitle(t){this.DataFaqLinkSelect=t}};s.\u0275fac=function(i){return new(i||s)(g(xt),g(Fe),g(L),g(N),g(de),g(O),g(P),g(ie))},s.\u0275cmp=F({type:s,selectors:[["app-ticketing-faq-originlist"]],decls:2,vars:2,consts:[[3,"optionsInfoAreaId"],[4,"ngFor","ngForOf"],[1,"card","card-style"],[1,"content"],[1,"accordion",3,"id"],["class","mb-0",4,"ngIf"],[1,"mb-0"],["type","button","data-bs-toggle","collapse",1,"btn","accordion-btn","no-effect","color-theme"],[1,"fa","fa-cloud","color-yellow-dark","me-2"],[1,"fa","fa-chevron-down","font-10","accordion-icon"],[1,"collapse",3,"id"],[1,"pt-1","pb-2","ps-3","pe-3"],[3,"innerHTML"]],template:function(i,e){i&1&&(I(0,"app-progress-spinner",0),v(1,$a,7,4,"ng-container",1)),i&2&&(m("optionsInfoAreaId",e.constructor.name),r(),m("ngForOf",e.dataDepartemenModelResult.listItems))},dependencies:[$t,G,Q],encapsulation:2});let n=s;return n})();var el=["*"];function tl(n,s){if(n&1&&(l(0,"label",8),p(1),a()),n&2){let o=u();Bt("for","app-cms-site-selector-",o.id,""),r(),w(o.optionLabel)}}function il(n,s){if(n&1&&(l(0,"mat-option",9)(1,"span"),p(2),a()()),n&2){let o=s.$implicit,t=u();m("value",o)("disabled",t.optionDisabled),r(2),w(t.displayOption(o))}}function nl(n,s){if(n&1){let o=M();l(0,"mat-icon",10),b("click",function(){f(o);let i=u();return h(i.onActionSelectClear())}),p(1,"close"),a()}}var Qn=(()=>{let s=class s{constructor(t,i,e,c,_){this.coreEnumService=t,this.cdr=i,this.publicHelper=e,this.translate=c,this.categoryService=_,this.id=++s.nextId,this.dataModelResult=new J,this.dataModelSelect=new ut,this.formControl=new Ei,this.optionDisabled=!1,this.optionSelectFirstItem=!1,this.optionPlaceholder="",this.optionLabel="",this.optionChange=new Ut,this.optionReload=()=>this.onActionButtonReload(),this.optionItemCount=new Ut,this.publicHelper.processService.cdr=this.cdr}set optionSelectForce(t){this.onActionSelectForce(t)}ngOnInit(){this.loadOptions(),(!this.optionLabel||this.optionLabel.length==0&&this.optionPlaceholder?.length>0)&&(this.optionLabel=this.optionPlaceholder)}loadOptions(){this.filteredOptions=this.formControl.valueChanges.pipe(Ci(""),_i(1500),Si(),Ti(t=>typeof t=="string"||typeof t=="number"?this.DataGetAll(t||""):[]))}displayFn(t){return t?t.title:void 0}displayOption(t){return t?t.title:void 0}DataGetAll(t){return ci(this,null,function*(){let i=new $;i.rowPerPage=20,i.accessLoad=!0;let e=new Z;e.propertyName="Title",e.value=t,e.searchType=ti.Contains,e.clauseType=Ft.Or,i.filters.push(e),t&&typeof+t=="number"&&+t>0&&(e=new Z,e.propertyName="Id",e.value=t,e.searchType=ti.Equal,e.clauseType=Ft.Or,i.filters.push(e));let c=this.constructor.name+"main";return this.translate.get("MESSAGE.Receiving_information").subscribe(_=>{this.publicHelper.processService.processStart(c,_,this.constructor.name)}),yield hi(this.categoryService.ServiceGetAll(i)).then(_=>(this.dataModelResult=_,this.optionSelectFirstItem&&(!this.dataModelSelect||!this.dataModelSelect.id||this.dataModelSelect.id<=0)&&this.dataModelResult.listItems.length>0&&(this.optionSelectFirstItem=!1,setTimeout(()=>{this.formControl.setValue(this.dataModelResult.listItems[0])},1e3),this.onActionSelect(this.dataModelResult.listItems[0])),this.publicHelper.processService.processStop(c),_.listItems?.length>0?this.optionItemCount.emit(_.listItems?.length):this.optionItemCount.emit(0),_.listItems))})}onActionSelect(t){this.dataModelSelect=t,this.optionChange.emit(this.dataModelSelect)}onActionSelectClear(){this.dataModelSelect=null,this.formControl.setValue(null),this.optionChange.emit(null)}push(t){return this.filteredOptions.pipe(gi(i=>(i.find(e=>e.id===t.id)||i.push(t),i)))}onActionSelectForce(t){if(typeof t=="number"&&t>0){if(this.dataModelSelect&&this.dataModelSelect.id===t)return;if(this.dataModelResult&&this.dataModelResult.listItems&&this.dataModelResult.listItems.find(i=>i.id===t)){let i=this.dataModelResult.listItems.find(e=>e.id===t);this.dataModelSelect=i,this.formControl.setValue(i);return}this.categoryService.ServiceGetOneById(t).subscribe({next:i=>{i.isSuccess&&(this.filteredOptions=this.push(i.item),this.dataModelSelect=i.item,this.formControl.setValue(i.item),this.optionChange.emit(i.item))}});return}if(typeof t==typeof ut){this.filteredOptions=this.push(t),this.dataModelSelect=t,this.formControl.setValue(t);return}this.formControl.setValue(null)}onActionButtonReload(){this.dataModelSelect=new ut,this.loadOptions()}};s.nextId=0,s.\u0275fac=function(i){return new(i||s)(g(X),g(O),g(L),g(P),g(Dt))},s.\u0275cmp=F({type:s,selectors:[["app-ticketing-template-selector"]],inputs:{optionDisabled:"optionDisabled",optionSelectFirstItem:"optionSelectFirstItem",optionPlaceholder:"optionPlaceholder",optionLabel:"optionLabel",optionReload:"optionReload",optionSelectForce:"optionSelectForce"},outputs:{optionChange:"optionChange",optionItemCount:"optionItemCount"},ngContentSelectors:el,decls:10,vars:13,consts:[["matauto","matAutocomplete"],[1,"input-style","has-borders","no-icon","input-style-always-active","validate-field","mb-4","progressOverlayContainer"],[3,"optionsInfoAreaId"],["class","color-highlight",3,"for",4,"ngIf"],["type","text","matInput","",1,"form-control","validate-name",3,"placeholder","formControl","matAutocomplete","id"],[3,"optionSelected","displayWith"],[3,"value","disabled",4,"ngFor","ngForOf"],["matSuffix","","matSuffix","","mat-icon-button","","aria-label","Clear",3,"click",4,"ngIf"],[1,"color-highlight",3,"for"],[3,"value","disabled"],["matSuffix","","matSuffix","","mat-icon-button","","aria-label","Clear",3,"click"]],template:function(i,e){if(i&1){let c=M();wi(),l(0,"div",1),I(1,"app-progress-spinner",2),v(2,tl,2,3,"label",3),I(3,"input",4),l(4,"mat-autocomplete",5,0),b("optionSelected",function(d){return f(c),h(e.onActionSelect(d.option.value))}),v(6,il,3,3,"mat-option",6),S(7,"async"),a(),v(8,nl,2,0,"mat-icon",7),Mi(9),a()}if(i&2){let c=D(5);r(),m("optionsInfoAreaId",e.constructor.name),r(),m("ngIf",(e.optionLabel==null?null:e.optionLabel.length)>0),r(),R("placeholder",e.optionPlaceholder),Bt("id","app-cms-site-selector-",e.id,""),m("formControl",e.formControl)("matAutocomplete",c),Vt("disabled",e.optionDisabled?!0:null),r(),m("displayWith",e.displayFn),r(2),m("ngForOf",T(7,11,e.filteredOptions)),r(2),m("ngIf",e.dataModelSelect==null?null:e.dataModelSelect.id)}},dependencies:[$t,G,ae,q,yi,Bi,ki,Fi,ei,De,K,Q,Ve],encapsulation:2});let n=s;return n})();var rl=["vform"];function al(n,s){n&1&&(l(0,"mat-error"),p(1),S(2,"translate"),l(3,"strong"),p(4),S(5,"translate"),a()()),n&2&&(r(),C(" ",T(2,2,"AUTH.INPUT.FULLNAME")," "),r(3),w(T(5,4,"MESSAGE.required")))}function ll(n,s){n&1&&(l(0,"mat-error"),p(1),S(2,"translate"),l(3,"strong"),p(4),S(5,"translate"),a()()),n&2&&(r(),C(" ",T(2,2,"AUTH.INPUT.MOBILE")," "),r(3),w(T(5,4,"MESSAGE.required")))}function sl(n,s){n&1&&(l(0,"mat-error"),p(1),S(2,"translate"),l(3,"strong"),p(4),S(5,"translate"),a()()),n&2&&(r(),C(" ",T(2,2,"AUTH.INPUT.EMAIL")," "),r(3),w(T(5,4,"MESSAGE.required")))}function cl(n,s){if(n&1){let o=M();l(0,"div",36)(1,"label"),p(2),S(3,"translate"),a(),l(4,"app-ticketing-template-selector",45),b("optionItemCount",function(){f(o);let i=u(2);return h(i.templateItemCount)})("optionChange",function(i){f(o);let e=u(2);return h(e.onActionSelectorSelect(i))}),a()()}n&2&&(r(2),w(T(3,1,"TITLE.Categories")))}function dl(n,s){n&1&&(l(0,"mat-error"),p(1),S(2,"translate"),l(3,"strong"),p(4),S(5,"translate"),a()()),n&2&&(r(),C(" ",T(2,2,"AUTH.INPUT.YOURMEESAGE")," "),r(3),w(T(5,4,"MESSAGE.required")))}function pl(n,s){if(n&1){let o=M();l(0,"div",8)(1,"form",29,0),b("ngSubmit",function(){f(o);let i=u();return h(i.onFormSubmit())}),l(3,"fieldset")(4,"div",30)(5,"label",31),p(6),S(7,"translate"),l(8,"span"),p(9),S(10,"translate"),a()(),l(11,"input",32,1),S(13,"translate"),x("ngModelChange",function(i){f(o);let e=u();return A(e.dataModel.fullName,i)||(e.dataModel.fullName=i),h(i)}),a(),v(14,al,6,6,"mat-error",33),a(),l(15,"div",30)(16,"label",34),p(17),S(18,"translate"),l(19,"span"),p(20),S(21,"translate"),a()(),l(22,"input",35,2),S(24,"translate"),x("ngModelChange",function(i){f(o);let e=u();return A(e.dataModel.phoneNo,i)||(e.dataModel.phoneNo=i),h(i)}),a(),v(25,ll,6,6,"mat-error",33),a(),l(26,"div",36)(27,"label",37),p(28),S(29,"translate"),l(30,"span"),p(31),S(32,"translate"),a()(),l(33,"input",38,3),S(35,"translate"),x("ngModelChange",function(i){f(o);let e=u();return A(e.dataModel.email,i)||(e.dataModel.email=i),h(i)}),a(),v(36,sl,6,6,"mat-error",33),a(),v(37,cl,5,3,"div",39),l(38,"div",40)(39,"label",41),p(40),S(41,"translate"),l(42,"span"),p(43),S(44,"translate"),a()(),l(45,"textarea",42,4),x("ngModelChange",function(i){f(o);let e=u();return A(e.dataModel.htmlBody,i)||(e.dataModel.htmlBody=i),h(i)}),a(),v(47,dl,6,6,"mat-error",33),a(),l(48,"div",43),I(49,"input",44),S(50,"translate"),a()()()()}if(n&2){let o=D(12),t=D(23),i=D(34),e=D(46),c=u();r(6),C("",T(7,21,"AUTH.INPUT.FULLNAME"),":"),r(3),C("( ",T(10,23,"TITLE.Necessary")," )"),r(2),R("placeholder",T(13,25,"TITLE.Enter_your_first_and_last_name")),y("ngModel",c.dataModel.fullName),r(3),m("ngIf",o.errors==null?null:o.errors.required),r(3),C("",T(18,27,"AUTH.INPUT.MOBILE"),":"),r(3),C("( ",T(21,29,"TITLE.Necessary")," )"),r(2),R("placeholder",T(24,31,"TITLE.Enter_your_first_and_last_name")),y("ngModel",c.dataModel.phoneNo),r(3),m("ngIf",t.errors==null?null:t.errors.required),r(3),C("",T(29,33,"AUTH.INPUT.EMAIL"),":"),r(3),C("( ",T(32,35,"TITLE.Necessary")," )"),r(2),R("placeholder",T(35,37,"TITLE.Enter_email")),y("ngModel",c.dataModel.email),r(3),m("ngIf",i.errors==null?null:i.errors.required),r(),m("ngIf",c.templateItemCount>0),r(3),C("",T(41,39,"AUTH.INPUT.YOURMEESAGE"),":"),r(3),C("( ",T(44,41,"TITLE.Necessary")," )"),r(2),y("ngModel",c.dataModel.htmlBody),r(2),m("ngIf",e.errors==null?null:e.errors.required),r(2),R("value",T(50,43,"ACTION.SEND"))}}function ml(n,s){if(n&1&&(l(0,"div",46)(1,"div",11)(2,"div",12)(3,"h1",13),I(4,"i",14),a(),l(5,"h2",15),p(6),S(7,"translate"),a(),l(8,"p",16),p(9),S(10,"translate"),a(),l(11,"p",15),p(12),S(13,"translate"),a(),I(14,"div",47),a()()()),n&2){let o=u();r(6),w(T(7,5,"TITLE.Your_message_has_been_registered_in_the_system")),r(3),w(T(10,7,"TITLE.Note_the_tracking_code_for_further_tracking")),r(3),an(" ",T(13,9,"TITLE.Tracking_Code")," : ",o.dataModelResult.item.id," "),r(2),m("innerHTML",o.dataModelResult.item==null||o.dataModelResult.item.virtual_Departemen==null?null:o.dataModelResult.item.virtual_Departemen.DefaultAnswerBody,bi)}}var zn=(()=>{let s=class s extends ht{constructor(t,i,e,c,_,d,V,B,Y,te){super(d,new Ne,c,Y),this.tokenHelper=t,this.activatedRoute=i,this.coreAuthService=e,this.publicHelper=c,this.coreEnumService=_,this.ticketingTaskService=d,this.cmsToastrService=V,this.router=B,this.translate=Y,this.cdr=te,this.requestLinkDepartemenId=0,this.fieldsInfo=new Map,this.formInfo=new le,this.dataModel=new Sn,this.dataModelResult=new J,this.selectFileTypeMainImage=["jpg","jpeg","png"],this.fileManagerOpenForm=!1,this.appLanguage="fa",this.templateItemCount=0,this.mapOptonCenter=new Tt,this.captchaModel=new mn,this.aoutoCaptchaOrder=1,this.enumFormSubmitedStatus=Ri,this.onCaptchaOrderInProcess=!1,this.publicHelper.processService.cdr=this.cdr,this.fileManagerTree=this.publicHelper.GetfileManagerTreeConfig(),this.tokenHelper.getCurrentToken().then(Re=>{this.tokenInfo=Re,this.dataModel.fullName=this.tokenInfo.fullName,this.dataModel.email=this.tokenInfo.email,this.dataModel.phoneNo=this.tokenInfo.mobile}),this.cmsApiStoreSubscribe=this.tokenHelper.getCurrentTokenOnChange().subscribe({next:Re=>{this.tokenInfo=Re,this.dataModel.fullName=this.tokenInfo.fullName,this.dataModel.email=this.tokenInfo.email,this.dataModel.phoneNo=this.tokenInfo.mobile}})}ngOnInit(){this.requestLinkDepartemenId=+Number(this.activatedRoute.snapshot.paramMap.get("LinkDepartemenId")),this.onCaptchaOrder(),this.dataModel.linkTicketingDepartemenId=this.requestLinkDepartemenId,this.DataGetAccess()}onFormSubmit(){if(!this.formGroup.valid){this.cmsToastrService.typeErrorFormInvalid();return}this.DataAddContent()}ngOnDestroy(){this.cmsApiStoreSubscribe.unsubscribe()}DataAddContent(){this.formInfo.formSubmitAllow=!1,this.translate.get("MESSAGE.sending_information_to_the_server").subscribe(i=>{this.formInfo.formAlert=i}),this.formInfo.formError="";let t=this.constructor.name+"main";this.translate.get("MESSAGE.Receiving_information").subscribe(i=>{this.publicHelper.processService.processStart(t,i,this.constructor.name)}),this.dataModel.captchaKey=this.captchaModel.key,this.ticketingTaskService.ServiceContactUS(this.dataModel).subscribe({next:i=>{this.formInfo.formSubmitAllow=!i.isSuccess,this.dataModelResult=i,i.isSuccess?(this.formInfo.formSubmitedStatus=Ri.Success,this.translate.get("MESSAGE.registration_completed_successfully").subscribe(e=>{this.formInfo.formAlert=e}),this.cmsToastrService.typeSuccessAdd()):(this.formInfo.formSubmitedStatus=Ri.Error,this.cmsToastrService.typeErrorAdd(i.errorMessage)),this.publicHelper.processService.processStop(t),this.cdr.markForCheck()},error:i=>{this.publicHelper.processService.processStop(t),this.formInfo.formSubmitAllow=!0,this.cmsToastrService.typeErrorAdd(i),this.cdr.markForCheck()}})}onActionSelectorSelect(t){if(!t||t.id<=0){let i=this.translate.instant("MESSAGE.Information_template_is_not_clear");this.cmsToastrService.typeWarningSelected(i);return}this.dataModel.htmlBody=t.htmlBody}onActionBackToParent(){this.router.navigate(["/application/app/"])}onActionSelectSource(t){if(!t||t.id<=0){this.cmsToastrService.typeErrorMessage(this.translate.instant("MESSAGE.Specify_the_source"),this.translate.instant("MESSAGE.The_source_of_the_information_application_is_not_known"));return}this.dataModel.linkTicketingDepartemenId=t.id}onCaptchaOrder(){this.onCaptchaOrderInProcess||(this.dataModel.captchaText="",this.coreAuthService.ServiceCaptcha().subscribe({next:t=>{if(t.isSuccess){this.captchaModel=t.item,this.expireDate=t.item.expire;let i=new Date,c=new Date(t.item.expire).getTime()-i.getTime();this.aoutoCaptchaOrder<10&&(this.aoutoCaptchaOrder=this.aoutoCaptchaOrder+1,setTimeout(()=>{this.onCaptchaOrder()},c))}else this.cmsToastrService.typeErrorGetCpatcha(t.errorMessage);this.onCaptchaOrderInProcess=!1},error:t=>{this.onCaptchaOrderInProcess=!1}}))}};s.\u0275fac=function(i){return new(i||s)(g(ie),g(ve),g(fn),g(L),g(X),g(Oe),g(N),g(de),g(P),g(O))},s.\u0275cmp=F({type:s,selectors:[["app-ticketing-task-contactus"]],viewQuery:function(i,e){if(i&1&&ne(rl,5),i&2){let c;oe(c=re())&&(e.formGroup=c.first)}},features:[z],decls:35,vars:9,consts:[["vform","ngForm"],["FullName",""],["phoneNo",""],["Email",""],["HtmlBody",""],[1,"page-content","pb-3"],[1,"card","card-full","rounded-m","pb-4"],[1,"drag-line"],[1,"content"],[1,"font-600","mb-0","color-highlight"],[1,"form-sent","disabled"],[1,"card","card-style"],[1,"shadow-l","rounded-m","gradient-green","ms-n1","mb-0"],[1,"color-white","text-center","pt-4"],[1,"fa","fa-check-circle","fa-3x","shadow-s","scale-box","rounded-circle"],[1,"color-white","bold","text-center","pt-3"],[1,"color-white","pb-4","text-center","mt-n2","mb-0"],[1,"content","text-center"],[1,"boxed-text-xl"],["href","#",1,"icon","icon-xl","shadow-xl","rounded-xl","bg-facebook"],[1,"fab","fa-facebook-f"],["href","#",1,"icon","icon-xl","shadow-xl","rounded-xl","bg-instagram","ms-3","me-3"],[1,"fab","fa-instagram"],["href","#",1,"icon","icon-xl","shadow-xl","rounded-xl","bg-twitter"],[1,"fab","fa-twitter"],[3,"optionsInfoAreaId"],[1,"card","contact-form"],["class","content",4,"ngIf"],["class","form-sent",4,"ngIf"],[3,"ngSubmit"],[1,"form-field","form-name"],["for","contactNameField",1,"contactNameField","color-theme"],["type","text","name","dataModel.fullName","id","contactNameField","required","",1,"round-small",2,"text-align","center !important",3,"ngModelChange","ngModel","placeholder"],[4,"ngIf"],["for","contactPhoneField",1,"contactNameField","color-theme"],["type","text","name","dataModel.phoneNo","id","contactPhoneField","required","",1,"round-small","input-ltr-center",3,"ngModelChange","ngModel","placeholder"],[1,"form-field","form-email"],["for","contactEmailField",1,"contactEmailField","color-theme"],["type","email","name","dataModel.email","id","contactEmailField",1,"round-small","input-ltr-center",3,"ngModelChange","ngModel","placeholder"],["class","form-field form-email",4,"ngIf"],[1,"form-field","form-text"],["for","contactMessageTextarea",1,"contactMessageTextarea","color-theme"],["name","dataModel.htmlBody","id","contactMessageTextarea","rows","3","required","",1,"round-small",3,"ngModelChange","ngModel"],[1,"form-button"],["type","submit","data-formId","contactForm",1,"btn","bg-highlight","font-700","btn-m","btn-full","rounded-sm","shadow-xl","contactSubmitButton",3,"value"],[3,"optionItemCount","optionChange"],[1,"form-sent"],[3,"innerHTML"]],template:function(i,e){i&1&&(l(0,"div",5)(1,"div",6),I(2,"div",7),l(3,"div",8)(4,"p",9),p(5),S(6,"translate"),a(),l(7,"p"),p(8),S(9,"translate"),a()(),l(10,"div",10)(11,"div",11)(12,"div",12)(13,"h1",13),I(14,"i",14),a(),l(15,"h2",15),p(16,"\u067E\u06CC\u0627\u0645 \u0627\u0631\u0633\u0627\u0644 \u0634\u062F"),a(),l(17,"p",16),p(18,"\u0645\u0627 \u0628\u0647 \u0632\u0648\u062F\u06CC \u0628\u0627 \u0634\u0645\u0627 \u062A\u0645\u0627\u0633 \u062E\u0648\u0627\u0647\u06CC\u0645 \u06AF\u0631\u0641\u062A."),a()()(),l(19,"div",11)(20,"div",17)(21,"h2"),p(22,"\u062F\u0631 \u0636\u0645\u0646\u060C \u0628\u06CC\u0627\u06CC\u06CC\u062F \u0627\u062C\u062A\u0645\u0627\u0639\u06CC \u0634\u0648\u06CC\u0645!"),a(),l(23,"p",18),p(24," \u062F\u0631 \u0627\u06CC\u0646\u062C\u0627 \u067E\u0644\u062A\u0641\u0631\u0645 \u0647\u0627\u06CC \u0631\u0633\u0627\u0646\u0647 \u0647\u0627\u06CC \u0627\u062C\u062A\u0645\u0627\u0639\u06CC \u0645\u0627 \u0647\u0633\u062A\u0646\u062F! \u0645\u0627 \u0631\u0627 \u0628\u0631\u0627\u06CC \u0622\u062E\u0631\u06CC\u0646 \u0628\u0647 \u0631\u0648\u0632 \u0631\u0633\u0627\u0646\u06CC \u0647\u0627 \u062F\u0646\u0628\u0627\u0644 \u06A9\u0646\u06CC\u062F \u06CC\u0627 \u0641\u0642\u0637 \u0633\u0644\u0627\u0645 \u06A9\u0646\u06CC\u062F! "),a(),l(25,"a",19),I(26,"i",20),a(),l(27,"a",21),I(28,"i",22),a(),l(29,"a",23),I(30,"i",24),a()()()(),I(31,"app-progress-spinner",25),l(32,"div",26),v(33,pl,51,45,"div",27),a(),v(34,ml,15,11,"div",28),a()()),i&2&&(r(5),w(T(6,5,"TITLE.Send_us_your_questions")),r(3),C(" ",T(9,7,"TITLE.GetInTouchWithUs")," "),r(23),m("optionsInfoAreaId",e.constructor.name),r(2),m("ngIf",(e.formInfo==null?null:e.formInfo.formSubmitedStatus)!==e.enumFormSubmitedStatus.Success),r(),m("ngIf",(e.formInfo==null?null:e.formInfo.formSubmitedStatus)===e.enumFormSubmitedStatus.Success))},dependencies:[G,Ce,ae,q,_e,we,U,Se,Ae,Q,Qn,H],encapsulation:2});let n=s;return n})();var ul=["vform"];function fl(n,s){if(n&1){let o=M();l(0,"div",4)(1,"button",5),b("click",function(){f(o);let i=u();return h(i.onFormCancel())}),I(2,"i",6),p(3),S(4,"translate"),a()()}n&2&&(r(3),C(" ",T(4,1,"ACTION.CANCEL")," "))}var Ki=(()=>{let s=class s{constructor(t,i,e,c,_,d,V,B,Y,te){this.data=t,this.dialogRef=i,this.coreEnumService=e,this.ticketingTaskService=c,this.cmsToastrService=_,this.tokenHelper=d,this.cdr=V,this.ticketingEnumService=B,this.publicHelper=Y,this.translate=te,this.requestId=0,this.tokenInfo=new Gt,this.dataModelResult=new J,this.dataModel=new Ne,this.formInfo=new le,this.dataModelEnumTicketStatusResult=new J,this.fieldsInfo=new Map,this.dataTaskReadedResult=new St,this.fileManagerOpenForm=!1,this.publicHelper.processService.cdr=this.cdr,t&&(this.requestId=+t.id||0)}ngOnInit(){if(this.formInfo.formTitle=this.translate.instant("TITLE.VIEW"),this.requestId===0){this.cmsToastrService.typeErrorComponentAction(),this.dialogRef.close({dialogChangedDate:!1});return}this.DataGetOneContent(),this.tokenHelper.getCurrentToken().then(t=>{this.tokenInfo=t}),this.cmsApiStoreSubscribe=this.tokenHelper.getCurrentTokenOnChange().subscribe({next:t=>{this.tokenInfo=t}}),this.getEnumTicketStatus()}getEnumTicketStatus(){this.ticketingEnumService.ServiceTicketStatusEnum().subscribe({next:t=>{this.dataModelEnumTicketStatusResult=t}})}ngOnDestroy(){this.cmsApiStoreSubscribe.unsubscribe()}DataGetOneContent(){this.translate.get("MESSAGE.Receiving_Information_From_The_Server").subscribe(i=>{this.formInfo.formAlert=i}),this.formInfo.formError="";let t=this.constructor.name+"main";this.translate.get("MESSAGE.Receiving_information").subscribe(i=>{this.publicHelper.processService.processStart(t,i,this.constructor.name)}),this.ticketingTaskService.setAccessLoad(),this.ticketingTaskService.ServiceGetOneById(this.requestId).subscribe({next:i=>{this.fieldsInfo=this.publicHelper.fieldInfoConvertor(i.access),this.dataModel=i.item,i.isSuccess?(this.formInfo.formTitle=this.formInfo.formTitle+" "+i.item.id,this.formInfo.formAlert="",this.dataTaskReaded(this.requestId)):(this.translate.get("ERRORMESSAGE.MESSAGE.typeError").subscribe(e=>{this.formInfo.formAlert=e}),this.formInfo.formError=i.errorMessage,this.cmsToastrService.typeErrorMessage(i.errorMessage)),this.publicHelper.processService.processStop(t)},error:i=>{this.cmsToastrService.typeError(i),this.publicHelper.processService.processStop(t,!1)}})}dataTaskReaded(t){this.ticketingTaskService.ServiceTaskReaded(t).subscribe({next:i=>{i.isSuccess&&(this.dataTaskReadedResult=i)}})}onFormCancel(){this.dialogRef.close({dialogChangedDate:!1})}};s.\u0275fac=function(i){return new(i||s)(g(he),g(pe),g(X),g(Oe),g(N),g(ie),g(O),g(Pt),g(L),g(P))},s.\u0275cmp=F({type:s,selectors:[["app-ticketing-task-view"]],viewQuery:function(i,e){if(i&1&&ne(ul,5),i&2){let c;oe(c=re())&&(e.formGroup=c.first)}},decls:87,vars:43,consts:[[1,"table","table-striped","center"],[2,"background-color","#81D4FA"],[1,"ntk-cms-html-card-footer"],["class","form-actions",4,"ngIf"],[1,"form-actions"],["type","button",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-gray",3,"click"],[1,"ft-x"]],template:function(i,e){i&1&&(l(0,"p"),p(1),S(2,"translate"),a(),l(3,"table",0)(4,"thead",1)(5,"tr")(6,"th"),p(7),S(8,"translate"),a(),l(9,"th"),p(10),S(11,"translate"),a()()(),l(12,"tbody")(13,"tr")(14,"td"),p(15),a(),l(16,"td"),p(17),a()(),l(18,"tr")(19,"td"),p(20),a(),l(21,"td"),p(22),a()(),l(23,"tr")(24,"td"),p(25),a(),l(26,"td"),p(27),S(28,"enums"),a()(),l(29,"tr")(30,"td"),p(31),a(),l(32,"td"),p(33),a()(),l(34,"tr")(35,"td"),p(36),S(37,"translate"),a(),l(38,"td"),p(39),a()(),l(40,"tr")(41,"td"),p(42),a(),l(43,"td"),p(44),a()(),l(45,"tr")(46,"td"),p(47),a(),l(48,"td"),p(49),a()(),l(50,"tr")(51,"td"),p(52),a(),l(53,"td"),p(54),a()(),l(55,"tr")(56,"td"),p(57),a(),l(58,"td"),p(59),a()(),l(60,"tr")(61,"td"),p(62),a(),l(63,"td"),p(64),a()(),l(65,"tr")(66,"td"),p(67),a(),l(68,"td"),p(69),a()(),l(70,"tr")(71,"td"),p(72),a(),l(73,"td"),p(74),a()(),l(75,"tr")(76,"td"),p(77),a(),l(78,"td"),p(79),a()(),l(80,"tr")(81,"td"),p(82),a(),l(83,"td"),p(84),a()()(),l(85,"div",2),v(86,fl,5,3,"div",3),a()()),i&2&&(r(),w(T(2,32,"TITLE.VIEW")),r(6),w(T(8,34,"TITLE.parameter")),r(3),w(T(11,36,"TITLE.Amounts")),r(5),w(e.fieldsInfo.id==null?null:e.fieldsInfo.id.fieldTitle),r(2),w(e.dataModel.id),r(3),w(e.fieldsInfo.linkSiteId==null?null:e.fieldsInfo.linkSiteId.fieldTitle),r(2),w(e.dataModel.linkSiteId),r(3),w(e.fieldsInfo.ticketStatus==null?null:e.fieldsInfo.ticketStatus.fieldTitle),r(2),w(Zt(28,38,e.dataModel.ticketStatus,e.dataModelEnumTicketStatusResult.listItems)),r(4),w(e.fieldsInfo.title==null?null:e.fieldsInfo.title.fieldTitle),r(2),w(e.dataModel.title),r(3),w(T(37,41,"TITLE.Message_Text")),r(3),w(e.dataModel.htmlBody),r(3),w(e.fieldsInfo.fullName==null?null:e.fieldsInfo.fullName.fieldTitle),r(2),w(e.dataModel.fullName),r(3),w(e.fieldsInfo.phoneNo==null?null:e.fieldsInfo.phoneNo.fieldTitle),r(2),w(e.dataModel.phoneNo),r(3),w(e.fieldsInfo.createdDate==null?null:e.fieldsInfo.createdDate.fieldTitle),r(2),w(e.publicHelper.LocaleDate(e.dataModel.createdDate)),r(3),w(e.fieldsInfo.updatedDate==null?null:e.fieldsInfo.updatedDate.fieldTitle),r(2),w(e.publicHelper.LocaleDate(e.dataModel.updatedDate)),r(3),w(e.fieldsInfo.email==null?null:e.fieldsInfo.email.fieldTitle),r(2),w(e.dataModel.email),r(3),w(e.fieldsInfo.linkCmsUserId==null?null:e.fieldsInfo.linkCmsUserId.fieldTitle),r(2),w(e.dataModel.linkCmsUserId),r(3),w(e.fieldsInfo.linkMemberId==null?null:e.fieldsInfo.linkMemberId.fieldTitle),r(2),w(e.dataModel.linkMemberId),r(3),w(e.fieldsInfo.linkTicketingDepartemenId==null?null:e.fieldsInfo.linkTicketingDepartemenId.fieldTitle),r(2),w(e.dataModel.linkTicketingDepartemenId),r(3),w(e.fieldsInfo.ticketingDepartemenDefaultAnswerBody==null?null:e.fieldsInfo.ticketingDepartemenDefaultAnswerBody.fieldTitle),r(2),w(e.dataModel.ticketingDepartemenDefaultAnswerBody),r(2),m("ngIf",e.formInfo.formSubmitAllow))},dependencies:[G,H,ii],styles:[".table.table-bordered[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{text-align:center}.hm-gradient[_ngcontent-%COMP%]{background-image:linear-gradient(to top,#f3e7e9,#e3eeff 99% 100%)}.darken-grey-text[_ngcontent-%COMP%]{color:#2e2e2e}.input-group.md-form.form-sm.form-2[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{border:1px solid #bdbdbd;border-top-left-radius:.25rem;border-bottom-left-radius:.25rem}.input-group.md-form.form-sm.form-2[_ngcontent-%COMP%]   input.purple-border[_ngcontent-%COMP%]{border:1px solid #9e9e9e}.input-group.md-form.form-sm.form-2[_ngcontent-%COMP%]   input[type=text][_ngcontent-%COMP%]:focus:not([readonly]).purple-border{border:1px solid #ba68c8;box-shadow:none}.form-2[_ngcontent-%COMP%]   .input-group-addon[_ngcontent-%COMP%]{border:1px solid #ba68c8}.danger-text[_ngcontent-%COMP%]{color:#ff3547}.success-text[_ngcontent-%COMP%]{color:#00c851}.table-bordered.red-border[_ngcontent-%COMP%], .table-bordered.red-border[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .table-bordered.red-border[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border:1px solid #ff3547!important}.table.table-bordered[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .center[_ngcontent-%COMP%]{text-align:center}"]});let n=s;return n})();var hl=()=>[5,10,20,100],gl=n=>({display:n});function _l(n,s){if(n&1){let o=M();l(0,"a",40),b("click",function(){f(o);let i=u();return h(i.onActionBackToParent())}),I(1,"i",41),a()}}function Sl(n,s){if(n&1){let o=M();l(0,"div",42)(1,"a",43),b("click",function(){f(o);let i=u();return h(i.onActionButtonNewRow())}),I(2,"i",44)(3,"br"),a(),l(4,"p",45),p(5),S(6,"translate"),a()()}n&2&&(r(5),w(T(6,1,"ACTION.ADD")))}function Cl(n,s){if(n&1){let o=M();l(0,"div",42)(1,"a",14),b("click",function(){f(o);let i=u();return h(i.onActionButtonAnswerList())}),I(2,"i",46)(3,"br"),a(),l(4,"p",45),p(5),S(6,"translate"),a()()}n&2&&(r(5),w(T(6,1,"ACTION.ANSWERS")))}function Tl(n,s){if(n&1){let o=M();l(0,"div",42)(1,"a",47),b("click",function(){f(o);let i=u();return h(i.onActionButtonAnswerList(i.tableRowSelected))}),I(2,"i",46),a(),l(3,"p",45),p(4),S(5,"translate"),a()()}n&2&&(r(4),w(T(5,1,"ACTION.ANSWERS")))}function Il(n,s){if(n&1){let o=M();l(0,"div",42)(1,"a",48),b("click",function(){f(o);let i=u();return h(i.onActionButtonViewRow(i.tableRowSelected))}),I(2,"i",49),a(),l(3,"p",45),p(4),S(5,"translate"),a()()}n&2&&(r(4),w(T(5,1,"ACTION.VIEW")))}function vl(n,s){if(n&1&&(l(0,"mat-header-cell",50),p(1),a()),n&2){let o=u();r(),C(" ",o.fieldsInfo.id==null?null:o.fieldsInfo.id.fieldTitle," ")}}function bl(n,s){if(n&1&&(l(0,"mat-cell"),p(1),a()),n&2){let o=s.$implicit;r(),C(" ",o.id," ")}}function wl(n,s){if(n&1&&(l(0,"mat-header-cell",50),p(1),a()),n&2){let o=u();r(),C(" ",o.fieldsInfo.linkSiteId==null?null:o.fieldsInfo.linkSiteId.fieldTitle," ")}}function Ml(n,s){if(n&1&&(l(0,"mat-cell"),p(1),S(2,"cmssiteinfo"),S(3,"async"),a()),n&2){let o=s.$implicit;r(),C(" ",T(3,3,T(2,1,o.linkSiteId))," ")}}function kl(n,s){if(n&1&&(l(0,"mat-header-cell",50),p(1),a()),n&2){let o=u();r(),C(" ",o.fieldsInfo.recordStatus==null?null:o.fieldsInfo.recordStatus.fieldTitle," ")}}function El(n,s){if(n&1&&I(0,"select",53),n&2){let o=u().$implicit,t=u();m("contentService",t.contentService)("row",o)("ngStyle",Ke(3,gl,o.id===(t.tableRowSelected==null?null:t.tableRowSelected.id)?"":"none"))}}function yl(n,s){if(n&1&&(l(0,"mat-cell",51),S(1,"statusCellClass"),I(2,"i",51),S(3,"statusIconClass"),v(4,El,1,5,"select",52),a()),n&2){let o=s.$implicit,t=u();m("ngClass",T(1,3,o.recordStatus)),r(2),m("ngClass",T(3,5,o.recordStatus)),r(2),m("ngIf",t.dataModelResult==null||t.dataModelResult.access==null?null:t.dataModelResult.access.accessEditRow)}}function Al(n,s){if(n&1&&(l(0,"mat-header-cell",50),p(1),a()),n&2){let o=u();r(),C(" ",o.fieldsInfo.title==null?null:o.fieldsInfo.title.fieldTitle," ")}}function xl(n,s){if(n&1&&(l(0,"mat-cell"),p(1),a()),n&2){let o=s.$implicit;r(),C(" ",o.title," ")}}function Dl(n,s){if(n&1&&(l(0,"mat-header-cell",50),p(1),a()),n&2){let o=u();r(),C(" ",o.fieldsInfo.createdDate==null?null:o.fieldsInfo.createdDate.fieldTitle," ")}}function Rl(n,s){if(n&1&&(l(0,"mat-cell"),p(1),a()),n&2){let o=s.$implicit,t=u();r(),C(" ",t.publicHelper.LocaleDate(o.createdDate)," ")}}function Ll(n,s){if(n&1&&(l(0,"mat-header-cell",50),p(1),a()),n&2){let o=u();r(),C(" ",o.fieldsInfo.updatedDate==null?null:o.fieldsInfo.updatedDate.fieldTitle," ")}}function Vl(n,s){if(n&1&&(l(0,"mat-cell"),p(1),a()),n&2){let o=s.$implicit,t=u();r(),C(" ",t.publicHelper.LocaleDate(o.updatedDate)," ")}}function Bl(n,s){n&1&&(l(0,"mat-header-cell"),p(1),S(2,"translate"),a()),n&2&&(r(),C(" ",T(2,1,"TITLE.OPTION")," "))}function Fl(n,s){if(n&1&&(l(0,"mat-cell",54)(1,"button",55)(2,"mat-icon"),p(3,"more_vert"),a()(),I(4,"mat-menu",null,2),a()),n&2){let o=D(5);r(),m("matMenuTriggerFor",o)}}function Nl(n,s){n&1&&I(0,"mat-header-row")}function Ol(n,s){if(n&1){let o=M();l(0,"mat-row",56),b("click",function(){let i=f(o).$implicit,e=u();return h(e.onActionTableRowSelect(i))}),a()}if(n&2){let o=s.$implicit,t=s.dataIndex,i=u();Ee("ntk-row-odd",t%2)("ntk-row-even",!(t%2))("ntk-row-selected",o.id===(i.tableRowSelected==null?null:i.tableRowSelected.id))}}var on=(()=>{let s=class s extends Ue{constructor(t,i,e,c,_,d,V,B,Y,te){super(t,new Ne,Y,_,V),this.contentService=t,this.activatedRoute=i,this.cmsToastrService=e,this.router=c,this.tokenHelper=_,this.cdr=d,this.translate=V,this.pageInfo=B,this.publicHelper=Y,this.dialog=te,this.requestDepartemenId=0,this.requestLinkCmsUserId=0,this.fieldsInfo=new Map,this.flag=!1,this.tableContentSelected=[],this.filteModelContent=new $,this.optionsSearch=new qi,this.optionsStatist=new Wi,this.tokenInfo=new Gt,this.tabledisplayedColumns=[],this.tabledisplayedColumnsSource=["Id","RecordStatus","CreatedDate","UpdatedDate"],this.tabledisplayedColumnsMobileSource=["Id","RecordStatus","CreatedDate","UpdatedDate"],this.publicHelper.processService.cdr=this.cdr,this.optionsSearch.parentMethods={onSubmit:Re=>this.onSubmitOptionsSearch(Re)},this.filteModelContent.sortColumn="Id",this.filteModelContent.sortType=j.Descending}ngOnInit(){this.requestDepartemenId=+Number(this.activatedRoute.snapshot.paramMap.get("DepartemenId")),this.requestLinkCmsUserId=+Number(this.activatedRoute.snapshot.paramMap.get("LinkCmsUserId")),this.tokenHelper.getCurrentToken().then(t=>{this.tokenInfo=t,this.DataGetAll()}),this.cmsApiStoreSubscribe=this.tokenHelper.getCurrentTokenOnChange().subscribe({next:t=>{this.tokenInfo=t,this.DataGetAll()}})}ngOnDestroy(){this.cmsApiStoreSubscribe.unsubscribe()}DataGetAll(){this.tabledisplayedColumns=this.publicHelper.TableDisplayedColumns(this.tabledisplayedColumnsSource,this.tabledisplayedColumnsMobileSource,[],this.tokenInfo),this.tableRowsSelected=[],this.onActionTableRowSelect(new Ne);let t=this.constructor.name+"main";this.translate.get("MESSAGE.Receiving_information").subscribe(c=>{this.publicHelper.processService.processStart(t,c,this.constructor.name)}),this.filteModelContent.accessLoad=!0;let i=JSON.parse(JSON.stringify(this.filteModelContent)),e=new Z;this.requestDepartemenId>0&&(e.propertyName="LinkTicketingDepartemenId",e.value=this.requestDepartemenId,i.filters.push(e)),this.categoryModelSelected&&this.categoryModelSelected.id>0&&(e.propertyName="LinkTicketingDepartemenId",e.value=this.categoryModelSelected.id,i.filters.push(e)),this.requestLinkCmsUserId>0&&(e.propertyName="LinkCmsUserId",e.value=this.requestLinkCmsUserId,i.filters.push(e)),this.contentService.ServiceGetAllEditor(i).subscribe({next:c=>{this.fieldsInfo=this.publicHelper.fieldInfoConvertor(c.access),c.isSuccess?(this.dataModelResult=c,this.tableSource.data=c.listItems,this.optionsStatist?.data?.show&&this.onActionButtonStatist(!0),this.optionsSearch.childMethods&&this.optionsSearch.childMethods.setAccess(c.access)):this.cmsToastrService.typeErrorGetAll(c.errorMessage),this.publicHelper.processService.processStop(t)},error:c=>{this.cmsToastrService.typeError(c),this.publicHelper.processService.processStop(t)}})}onTableSortData(t){this.tableSource&&this.tableSource.sort&&this.tableSource.sort.active===t.active?this.tableSource.sort.start==="asc"?(t.start="desc",this.filteModelContent.sortColumn=t.active,this.filteModelContent.sortType=j.Descending):this.tableSource.sort.start==="desc"?(t.start="asc",this.filteModelContent.sortColumn="",this.filteModelContent.sortType=j.Ascending):t.start="desc":(this.filteModelContent.sortColumn=t.active,this.filteModelContent.sortType=j.Descending),this.tableSource.sort=t,this.filteModelContent.currentPageNumber=0,this.DataGetAll()}onTablePageingData(t){this.filteModelContent.currentPageNumber=t.pageIndex+1,this.filteModelContent.rowPerPage=t.pageSize,this.DataGetAll()}onActionButtonNewRow(){this.router.navigate(["/ticketing/contactus/"])}onActionSelectorSelect(t){var i=this.filteModelContent.sortColumn,e=this.filteModelContent.sortType;this.filteModelContent=new $,this.filteModelContent.sortColumn=i,this.filteModelContent.sortType=e,this.categoryModelSelected=t,this.DataGetAll()}onActionButtonViewRow(t=this.tableRowSelected){if(!t||!t.id||t.id===0){this.cmsToastrService.typeErrorSelectedRow();return}this.tableRowSelected=t;var i="";this.tokenHelper.isMobile?i="dialog-fullscreen":i="dialog-min",this.dialog.open(Ki,{height:"90%",panelClass:i,enterAnimationDuration:W.cmsViewConfig.enterAnimationDuration,exitAnimationDuration:W.cmsViewConfig.exitAnimationDuration,data:{id:this.tableRowSelected.id}}).afterClosed().subscribe(c=>{c&&c.dialogChangedDate})}onActionButtonAnswerList(t=this.tableRowSelected){if(!t||!t.id||t.id===0){this.cmsToastrService.typeErrorSelectedRow();return}if(this.tableRowSelected=t,this.dataModelResult==null||this.dataModelResult.access==null||!this.dataModelResult.access.accessWatchRow){this.cmsToastrService.typeErrorAccessWatch();return}this.router.navigate(["/ticketing/answer/LinkTaskId/",this.tableRowSelected.id])}onActionButtonStatist(t=!this.optionsStatist.data.show){if(this.optionsStatist.data.show=t,!this.optionsStatist.data.show)return;let i=new Map;this.translate.get("MESSAGE.Active").subscribe(d=>{i.set(d,0)}),this.translate.get("MESSAGE.All").subscribe(d=>{i.set(d,0)});let e=this.constructor.name+".ServiceStatist";this.translate.get("MESSAGE.Get_the_statist").subscribe(d=>{this.publicHelper.processService.processStart(e,d,this.constructor.name)}),this.contentService.ServiceGetCount(this.filteModelContent).subscribe({next:d=>{d.isSuccess&&(i.set("All",d.totalRowCount),this.optionsStatist.childMethods.setStatistValue(i)),this.publicHelper.processService.processStop(e)},error:d=>{this.cmsToastrService.typeError(d),this.publicHelper.processService.processStop(e)}});let c=JSON.parse(JSON.stringify(this.filteModelContent)),_=new Z;_.propertyName="RecordStatus",_.value=Xe.Available,c.filters.push(_),this.contentService.ServiceGetCount(c).subscribe({next:d=>{d.isSuccess&&(i.set("Active",d.totalRowCount),this.optionsStatist.childMethods.setStatistValue(i)),this.publicHelper.processService.processStop(e)},error:d=>{this.cmsToastrService.typeError(d),this.publicHelper.processService.processStop(e)}})}onActionButtonReload(){this.DataGetAll()}onSubmitOptionsSearch(t){this.filteModelContent.filters=t,this.DataGetAll()}onActionBackToParent(){this.router.navigate(["/ticketing/departemen/"])}};s.\u0275fac=function(i){return new(i||s)(g(Oe),g(ve),g(N),g(de),g(ie),g(O),g(P),g(He),g(L),g(xe))},s.\u0275cmp=F({type:s,selectors:[["app-ticketing-task-contact-us-list"]],features:[z],decls:58,vars:30,consts:[["tableSort","matSort"],["paginator",""],["actionMenu","matMenu"],[3,"optionActionGuideNoticeDisplayChange","optionOnActionButtonMemoRow","optionOnActionButtonMemo","optionOnActionButtonExport","optionOnActionButtonPrintRow","optionsListInfoAreaId","optionGuideNoticeKey","optionActionGuideNoticeDisplay","optionTreeDisplay","optionActionRowId","optionActionRowDisplayMenu","optionSelectRowItemTitle"],["cms-tree",""],["cms-header",""],["cms-action-header",""],[1,"d-flex","justify-content-between","flex-wrap"],[1,"justify-content-end"],["target","_blank",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-highlight"],[3,"ngModelChange","ngModel"],[3,"click","ngModelChange","ngModel"],[1,"justify-content-start"],["type","button","class","btn font-13 font-600 btn-s m-1 rounded-s shadow-xl border-0 gradient-gray","target","_blank",3,"click",4,"ngIf"],["type","button","target","_blank",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-highlight",3,"click"],[1,"fa-solid","fa-info","font-18",2,"color","#ffffff"],[1,"fa-solid","fa-rotate-right","font-18",2,"color","#ffffff"],["cms-action-main",""],["class","col-4",4,"ngIf"],["cms-action-row",""],["cms-action-area",""],[3,"optionsChange","options"],["cms-body",""],["matSort","",3,"matSortChange","dataSource"],["matColumnDef","Id"],["mat-sort-header","",4,"matHeaderCellDef"],[4,"matCellDef"],["matColumnDef","LinkSiteId"],["matColumnDef","RecordStatus"],[3,"ngClass",4,"matCellDef"],["matColumnDef","Title"],["matColumnDef","CreatedDate"],["matColumnDef","UpdatedDate"],["matColumnDef","Action"],[4,"matHeaderCellDef"],["class"," Action",4,"matCellDef"],[4,"matHeaderRowDef"],[3,"ntk-row-odd","ntk-row-even","ntk-row-selected","click",4,"matRowDef","matRowDefColumns"],["cms-footer",""],[3,"page","length","pageIndex","pageSize","pageSizeOptions"],["type","button","target","_blank",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-gray",3,"click"],[1,"fa-solid","fa-arrow-left","font-18",2,"color","#ffffff"],[1,"col-4"],["type","button","target","_blank",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-teal",3,"click"],[1,"fa-solid","fa-plus","font-18",2,"color","#FFFFFF"],[1,"font-11","text-center","opacity-70"],[1,"fa-solid","fa-phone-arrow-right","font-18",2,"color","#ffffff"],["mat-menu-item","","target","_blank",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-highlight",3,"click"],["type","button","target","_blank","data-toggle","modal","data-target","#categoryModal",1,"btn","font-13","font-600","btn-m","m-1","rounded-s","shadow-xl","border-0","gradient-highlight",3,"click"],[1,"fa-solid","fa-eye","font-18",2,"color","#ffffff"],["mat-sort-header",""],[3,"ngClass"],["matNativeControl","","cmsRecordStatusSelfSave","","style","background: none; border: none;",3,"contentService","row","ngStyle",4,"ngIf"],["matNativeControl","","cmsRecordStatusSelfSave","",2,"background","none","border","none",3,"contentService","row","ngStyle"],[1,"Action"],["type","button","mat-icon-button","","aria-label","Action Menu",3,"matMenuTriggerFor"],[3,"click"]],template:function(i,e){if(i&1){let c=M();l(0,"app-cms-html-list",3),x("optionActionGuideNoticeDisplayChange",function(d){return f(c),A(e.viewGuideNotice,d)||(e.viewGuideNotice=d),h(d)}),b("optionOnActionButtonMemoRow",function(){return f(c),h(e.onActionButtonMemoRow())})("optionOnActionButtonMemo",function(){return f(c),h(e.onActionButtonMemo())})("optionOnActionButtonExport",function(){return f(c),h(e.onActionButtonExport())})("optionOnActionButtonPrintRow",function(){return f(c),h(e.onActionButtonPrintRow())}),ye(1,4)(2,5),k(3,6),l(4,"div",7)(5,"div",8)(6,"a",9)(7,"mat-slide-toggle",10),x("ngModelChange",function(d){return f(c),A(e.optionsSearch.data.show,d)||(e.optionsSearch.data.show=d),h(d)}),a(),p(8),S(9,"translate"),a(),l(10,"a",9)(11,"mat-slide-toggle",11),b("click",function(){return f(c),h(e.onActionButtonStatist())}),x("ngModelChange",function(d){return f(c),A(e.optionsStatist.data.show,d)||(e.optionsStatist.data.show=d),h(d)}),a(),p(12),S(13,"translate"),a()(),l(14,"div",12),v(15,_l,2,0,"a",13),l(16,"a",14),b("click",function(){return f(c),h(e.viewGuideNotice=!e.viewGuideNotice)}),I(17,"i",15),a(),l(18,"a",14),b("click",function(){return f(c),h(e.onActionButtonReload())}),I(19,"i",16),a()()(),E(),k(20,17),v(21,Sl,7,3,"div",18)(22,Cl,7,3,"div",18),E(),k(23,19),v(24,Tl,6,3,"div",18)(25,Il,6,3,"div",18),E(),k(26,20),l(27,"app-cms-search-list",21),x("optionsChange",function(d){return f(c),A(e.optionsSearch,d)||(e.optionsSearch=d),h(d)}),a(),l(28,"app-cms-statist-list",21),x("optionsChange",function(d){return f(c),A(e.optionsStatist,d)||(e.optionsStatist=d),h(d)}),a(),E(),k(29,22),l(30,"mat-table",23,0),b("matSortChange",function(){f(c);let d=D(31);return h(e.onTableSortData(d))}),k(32,24),v(33,vl,2,1,"mat-header-cell",25)(34,bl,2,1,"mat-cell",26),E(),k(35,27),v(36,wl,2,1,"mat-header-cell",25)(37,Ml,4,5,"mat-cell",26),E(),k(38,28),v(39,kl,2,1,"mat-header-cell",25)(40,yl,5,7,"mat-cell",29),E(),k(41,30),v(42,Al,2,1,"mat-header-cell",25)(43,xl,2,1,"mat-cell",26),E(),k(44,31),v(45,Dl,2,1,"mat-header-cell",25)(46,Rl,2,1,"mat-cell",26),E(),k(47,32),v(48,Ll,2,1,"mat-header-cell",25)(49,Vl,2,1,"mat-cell",26),E(),k(50,33),v(51,Bl,3,3,"mat-header-cell",34)(52,Fl,6,1,"mat-cell",35),E(),v(53,Nl,1,0,"mat-header-row",36)(54,Ol,1,6,"mat-row",37),a(),E(),k(55,38),l(56,"mat-paginator",39,1),b("page",function(d){return f(c),h(e.onTablePageingData(d))}),a(),E(),a()}i&2&&(m("optionsListInfoAreaId",e.constructor.name)("optionGuideNoticeKey","ticketing.task.contactus-list"),y("optionActionGuideNoticeDisplay",e.viewGuideNotice),m("optionTreeDisplay",!1)("optionActionRowId",e.tableRowSelected==null?null:e.tableRowSelected.id)("optionActionRowDisplayMenu",e.tableRowSelectDoubleClick)("optionSelectRowItemTitle",(e.tableRowSelected==null||e.tableRowSelected.title==null?null:e.tableRowSelected.title.length)>0?e.tableRowSelected==null?null:e.tableRowSelected.title:e.tableRowSelected==null?null:e.tableRowSelected.id),r(7),y("ngModel",e.optionsSearch.data.show),r(),C("",T(9,25,"ACTION.SEARCH")," "),r(3),y("ngModel",e.optionsStatist.data.show),r(),C("",T(13,27,"ACTION.STATIST")," "),r(3),m("ngIf",e.requestDepartemenId>0),r(6),m("ngIf",e.dataModelResult==null||e.dataModelResult.access==null?null:e.dataModelResult.access.accessAddRow),r(),m("ngIf",(e.dataModelResult==null||e.dataModelResult.access==null?null:e.dataModelResult.access.accessWatchRow)&&(e.tableRowSelected==null?null:e.tableRowSelected.id)>0),r(2),m("ngIf",e.dataModelResult==null||e.dataModelResult.access==null?null:e.dataModelResult.access.accessWatchRow),r(),m("ngIf",(e.dataModelResult==null||e.dataModelResult.access==null?null:e.dataModelResult.access.accessWatchRow)&&(e.tableRowSelected==null?null:e.tableRowSelected.id)>0),r(2),y("options",e.optionsSearch),r(),y("options",e.optionsStatist),r(2),m("dataSource",e.tableSource),r(23),m("matHeaderRowDef",e.tabledisplayedColumns),r(),m("matRowDefColumns",e.tabledisplayedColumns),r(2),m("length",e.dataModelResult.totalRowCount)("pageIndex",e.dataModelResult.currentPageNumber-1)("pageSize",e.dataModelResult.rowPerPage)("pageSizeOptions",ze(29,hl)))},dependencies:[yt,G,Je,q,U,Be,De,K,Ye,In,Ze,$e,et,tt,it,nt,rt,ct,at,ot,dt,lt,st,pt,mt,We,je,qe,Mt,Ve,H,ft,Et,kt],encapsulation:2});let n=s;return n})();var Hl=["vform"];function ql(n,s){if(n&1){let o=M();l(0,"app-cms-enum-record-status-selector",22),x("modelChange",function(i){f(o);let e=u();return A(e.dataModel.recordStatus,i)||(e.dataModel.recordStatus=i),h(i)}),a()}if(n&2){let o=u();y("model",o.dataModel.recordStatus),m("optionDisabled",!1)("optionLabel",o.fieldsInfo.recordStatus==null?null:o.fieldsInfo.recordStatus.fieldTitle)("optionRequired",!0)("optionSelectFirstItem",!0)}}function Wl(n,s){n&1&&I(0,"i",29)}function jl(n,s){n&1&&I(0,"i",30)}function Ul(n,s){if(n&1&&(l(0,"mat-error"),p(1),l(2,"strong"),p(3),S(4,"translate"),a()()),n&2){let o=u(2);r(),C(" ",o.fieldsInfo.fullName==null?null:o.fieldsInfo.fullName.fieldTitle," is "),r(2),w(T(4,2,"MESSAGE.required"))}}function Ql(n,s){if(n&1){let o=M();l(0,"div",23)(1,"label",24),p(2),a(),l(3,"input",25,2),x("ngModelChange",function(i){f(o);let e=u();return A(e.dataModel.fullName,i)||(e.dataModel.fullName=i),h(i)}),a(),v(5,Wl,1,0,"i",26)(6,jl,1,0,"i",27),l(7,"em"),p(8),a(),v(9,Ul,5,4,"mat-error",28),a()}if(n&2){let o=D(4),t=u();r(2),w(t.fieldsInfo.fullName==null?null:t.fieldsInfo.fullName.fieldTitle),r(),R("placeholder",t.fieldsInfo.fullName==null?null:t.fieldsInfo.fullName.fieldTitle),y("ngModel",t.dataModel.fullName),m("disabled",!(t.fieldsInfo.fullName!=null&&t.fieldsInfo.fullName.accessAddField)),r(2),m("ngIf",!o.value),r(),m("ngIf",o.value),r(2),C("",o.value.length," / 100"),r(),m("ngIf",o.errors==null?null:o.errors.required)}}function zl(n,s){n&1&&I(0,"i",29)}function Kl(n,s){n&1&&I(0,"i",30)}function Jl(n,s){if(n&1&&(l(0,"mat-error"),p(1),l(2,"strong"),p(3),S(4,"translate"),a()()),n&2){let o=u(2);r(),C(" ",o.fieldsInfo.title==null?null:o.fieldsInfo.title.fieldTitle," is "),r(2),w(T(4,2,"MESSAGE.required"))}}function Xl(n,s){if(n&1){let o=M();l(0,"div",23)(1,"label",31),p(2),a(),l(3,"input",32,3),x("ngModelChange",function(i){f(o);let e=u();return A(e.dataModel.title,i)||(e.dataModel.title=i),h(i)}),a(),v(5,zl,1,0,"i",26)(6,Kl,1,0,"i",27),l(7,"em"),p(8),a(),v(9,Jl,5,4,"mat-error",28),a()}if(n&2){let o=D(4),t=u();r(2),w(t.fieldsInfo.title==null?null:t.fieldsInfo.title.fieldTitle),r(),R("placeholder",t.fieldsInfo.title==null?null:t.fieldsInfo.title.fieldTitle),y("ngModel",t.dataModel.title),m("disabled",!(t.fieldsInfo.title!=null&&t.fieldsInfo.title.accessAddField)),r(2),m("ngIf",!o.value),r(),m("ngIf",o.value),r(2),C("",o.value.length," / 100"),r(),m("ngIf",o.errors==null?null:o.errors.required)}}function Yl(n,s){n&1&&I(0,"i",29)}function Zl(n,s){n&1&&I(0,"i",30)}function $l(n,s){if(n&1&&(l(0,"mat-error"),p(1),l(2,"strong"),p(3),S(4,"translate"),a()()),n&2){let o=u(2);r(),C(" ",o.fieldsInfo.phoneNo==null?null:o.fieldsInfo.phoneNo.fieldTitle," is "),r(2),w(T(4,2,"MESSAGE.required"))}}function es(n,s){if(n&1){let o=M();l(0,"div",23)(1,"label",33),p(2),a(),l(3,"input",34,4),x("ngModelChange",function(i){f(o);let e=u();return A(e.dataModel.phoneNo,i)||(e.dataModel.phoneNo=i),h(i)}),a(),v(5,Yl,1,0,"i",26)(6,Zl,1,0,"i",27),l(7,"em"),p(8),a(),v(9,$l,5,4,"mat-error",28),a()}if(n&2){let o=D(4),t=u();r(2),w(t.fieldsInfo.phoneNo==null?null:t.fieldsInfo.phoneNo.fieldTitle),r(),R("placeholder",t.fieldsInfo.phoneNo==null?null:t.fieldsInfo.phoneNo.fieldTitle),y("ngModel",t.dataModel.phoneNo),m("disabled",!(t.fieldsInfo.phoneNo!=null&&t.fieldsInfo.phoneNo.accessAddField)),r(2),m("ngIf",!o.value),r(),m("ngIf",o.value),r(2),C("",o.value.length," / 100"),r(),m("ngIf",o.errors==null?null:o.errors.required)}}function ts(n,s){n&1&&I(0,"i",29)}function is(n,s){n&1&&I(0,"i",30)}function ns(n,s){if(n&1&&(l(0,"mat-error"),p(1),l(2,"strong"),p(3),S(4,"translate"),a()()),n&2){let o=u(2);r(),C(" ",o.fieldsInfo.email==null?null:o.fieldsInfo.email.fieldTitle," is "),r(2),w(T(4,2,"MESSAGE.required"))}}function os(n,s){if(n&1){let o=M();l(0,"div",23)(1,"label",35),p(2),a(),l(3,"input",36,5),x("ngModelChange",function(i){f(o);let e=u();return A(e.dataModel.email,i)||(e.dataModel.email=i),h(i)}),a(),v(5,ts,1,0,"i",26)(6,is,1,0,"i",27),l(7,"em"),p(8),a(),v(9,ns,5,4,"mat-error",28),a()}if(n&2){let o=D(4),t=u();r(2),w(t.fieldsInfo.email==null?null:t.fieldsInfo.email.fieldTitle),r(),R("placeholder",t.fieldsInfo.email==null?null:t.fieldsInfo.email.fieldTitle),y("ngModel",t.dataModel.email),m("disabled",!(t.fieldsInfo.email!=null&&t.fieldsInfo.email.accessAddField)),r(2),m("ngIf",!o.value),r(),m("ngIf",o.value),r(2),C("",o.value.length," / 100"),r(),m("ngIf",o.errors==null?null:o.errors.required)}}function rs(n,s){if(n&1){let o=M();l(0,"div",23)(1,"label",37),p(2),S(3,"translate"),a(),l(4,"textarea",38,6),S(6,"translate"),x("ngModelChange",function(i){f(o);let e=u();return A(e.dataModel.htmlBody,i)||(e.dataModel.htmlBody=i),h(i)}),p(7,"                        "),a(),l(8,"em"),p(9),a()()}if(n&2){let o=D(5),t=u();r(2),w(T(3,5,"TITLE.Description")),r(2),R("placeholder",T(6,7,"TITLE.Answer_Text")),y("ngModel",t.dataModel.htmlBody),m("disabled",!(t.fieldsInfo.htmlBody!=null&&t.fieldsInfo.htmlBody.accessAddField)),r(5),C("",o.value.length," / 1000")}}function as(n,s){if(n&1){let o=M();l(0,"div",23)(1,"label",39),p(2),a(),l(3,"input",40),x("ngModelChange",function(i){f(o);let e=u();return A(e.dataModel.expireDate,i)||(e.dataModel.expireDate=i),h(i)}),a(),I(4,"mat-datepicker-toggle",41)(5,"mat-datepicker",42,7),a()}if(n&2){let o=D(6),t=u();r(2),w(t.fieldsInfo.expireDate==null?null:t.fieldsInfo.expireDate.fieldTitle),r(),m("matDatepicker",o),y("ngModel",t.dataModel.expireDate),r(),m("for",o)}}function ls(n,s){if(n&1){let o=M();l(0,"div",43)(1,"button",44),b("click",function(){f(o);let i=u();return h(i.onActionBackToParent())}),p(2),S(3,"translate"),a(),l(4,"button",45),p(5),S(6,"translate"),a()()}if(n&2){u();let o=D(9);r(2),C(" ",T(3,3,"ACTION.BACK")," "),r(2),m("disabled",!o.form.valid),r(),C(" ",T(6,5,"ACTION.NEXT")," ")}}function ss(n,s){if(n&1){let o=M();l(0,"div",23)(1,"label",46),p(2),a(),l(3,"input",47,8),x("ngModelChange",function(i){f(o);let e=u();return A(e.dataModel.userIpAddress,i)||(e.dataModel.userIpAddress=i),h(i)}),a(),l(5,"em"),p(6),a()()}if(n&2){let o=D(4),t=u();r(2),w(t.fieldsInfo.userIpAddress==null?null:t.fieldsInfo.userIpAddress.fieldTitle),r(),R("placeholder",t.fieldsInfo.userIpAddress==null?null:t.fieldsInfo.userIpAddress.fieldTitle),y("ngModel",t.dataModel.userIpAddress),m("disabled",!(t.fieldsInfo.userIpAddress!=null&&t.fieldsInfo.userIpAddress.accessAddField)),r(3),C("",o.value.length," / 100")}}function cs(n,s){if(n&1){let o=M();l(0,"div",23)(1,"label",48),p(2),a(),l(3,"input",49,9),x("ngModelChange",function(i){f(o);let e=u();return A(e.dataModel.deviceInformation,i)||(e.dataModel.deviceInformation=i),h(i)}),a(),l(5,"em"),p(6),a()()}if(n&2){let o=D(4),t=u();r(2),w(t.fieldsInfo.userIpAddress==null?null:t.fieldsInfo.userIpAddress.fieldTitle),r(),R("placeholder",t.fieldsInfo.deviceInformation==null?null:t.fieldsInfo.deviceInformation.fieldTitle),y("ngModel",t.dataModel.deviceInformation),m("disabled",!(t.fieldsInfo.deviceInformation!=null&&t.fieldsInfo.deviceInformation.accessAddField)),r(3),C("",o.value.length," / 100")}}function ds(n,s){if(n&1&&(l(0,"div",43)(1,"button",50),p(2),S(3,"translate"),a(),l(4,"button",51),p(5),S(6,"translate"),a()()),n&2){u();let o=D(9);r(2),C(" ",T(3,3,"ACTION.BEFOR")," "),r(2),m("disabled",!o.form.valid),r(),C(" ",T(6,5,"ACTION.SAVE")," ")}}var Kn=(()=>{let s=class s extends ht{constructor(t,i,e,c,_,d,V,B,Y){super(c,new Ne,i,Y),this.activatedRoute=t,this.publicHelper=i,this.coreEnumService=e,this.ticketingTaskService=c,this.cmsToastrService=_,this.dialogRef=d,this.router=V,this.cdr=B,this.translate=Y,this.requestLinkDepartemenId=0,this.fieldsInfo=new Map,this.formInfo=new le,this.dataModel=new Ne,this.dataModelResult=new J,this.selectFileTypeMainImage=["jpg","jpeg","png"],this.fileManagerOpenForm=!1,this.appLanguage="fa",this.mapOptonCenter=new Tt,this.publicHelper.processService.cdr=this.cdr,this.fileManagerTree=this.publicHelper.GetfileManagerTreeConfig()}ngOnInit(){this.requestLinkDepartemenId=+Number(this.activatedRoute.snapshot.paramMap.get("LinkDepartemenId")),this.dataModel.linkTicketingDepartemenId=this.requestLinkDepartemenId,this.DataGetAccess()}onFormSubmit(){if(!this.formGroup.valid){this.cmsToastrService.typeErrorFormInvalid();return}this.DataAddContent()}DataAddContent(){this.formInfo.formSubmitAllow=!1,this.translate.get("MESSAGE.sending_information_to_the_server").subscribe(i=>{this.formInfo.formAlert=i}),this.formInfo.formError="";let t=this.constructor.name+"main";this.translate.get("MESSAGE.Receiving_information").subscribe(i=>{this.publicHelper.processService.processStart(t,i,this.constructor.name)}),this.ticketingTaskService.ServiceAdd(this.dataModel).subscribe({next:i=>{this.formInfo.formSubmitAllow=!i.isSuccess,this.dataModelResult=i,i.isSuccess?(this.translate.get("MESSAGE.registration_completed_successfully").subscribe(e=>{this.formInfo.formAlert=e}),this.cmsToastrService.typeSuccessEdit(),setTimeout(()=>this.router.navigate(["/ticketing/task/"]),1e3)):this.cmsToastrService.typeErrorEdit(i.errorMessage),this.publicHelper.processService.processStop(t)},error:i=>{this.publicHelper.processService.processStop(t),this.formInfo.formSubmitAllow=!0,this.cmsToastrService.typeErrorEdit(i)}})}onStepClick(t,i){t.previouslySelectedIndex<t.selectedIndex}onActionBackToParent(){this.dialogRef.close({dialogChangedDate:!1})}onActionFileSelectedLinkMainImageId(){}onActionSelectSource(t){if(!t||t.id<=0){this.cmsToastrService.typeErrorMessage(this.translate.instant("MESSAGE.Specify_the_source"),this.translate.instant("MESSAGE.The_source_of_the_information_application_is_not_known"));return}this.dataModel.linkTicketingDepartemenId=t.id}};s.\u0275fac=function(i){return new(i||s)(g(ve),g(L),g(X),g(Oe),g(N),g(pe),g(de),g(O),g(P))},s.\u0275cmp=F({type:s,selectors:[["app-ticketing-task-add"]],viewQuery:function(i,e){if(i&1&&ne(Hl,5),i&2){let c;oe(c=re())&&(e.formGroup=c.first)}},features:[z],decls:32,vars:30,consts:[["vform","ngForm"],["stepper",""],["FullName",""],["Title",""],["PhoneNo",""],["Email",""],["HtmlBody",""],["ExpireDate",""],["UserIpAddress",""],["DeviceInformation",""],[1,"card","card-style","progressOverlayContainer"],[3,"optionsInfoAreaId"],[1,"content","mb-0"],[1,"mb-0","color-highlight","font-600","font-12"],[3,"ngSubmit"],[3,"selectionChange"],["state","main",3,"label"],[3,"model","optionDisabled","optionLabel","optionRequired","optionSelectFirstItem","modelChange",4,"ngIf"],[3,"optionChange","optionSelectForce","optionPlaceholder","optionDisabled"],["class","input-style has-borders no-icon input-style-always-active validate-field mb-4",4,"ngIf"],["class","form-actions",4,"ngIf"],["state","seo",3,"label"],[3,"modelChange","model","optionDisabled","optionLabel","optionRequired","optionSelectFirstItem"],[1,"input-style","has-borders","no-icon","input-style-always-active","validate-field","mb-4"],["for","dataModel.fullName",1,"color-highlight"],["matInput","","type","text","name","dataModel.fullName","minlength","3","maxlength","1000","required","","id","dataModel.fullName",1,"form-control","validate-name",3,"ngModelChange","ngModel","placeholder","disabled"],["class","fa fa-times  invalid color-red-dark",4,"ngIf"],["class","fa fa-check  valid color-green-dark",4,"ngIf"],[4,"ngIf"],[1,"fa","fa-times","invalid","color-red-dark"],[1,"fa","fa-check","valid","color-green-dark"],["for","dataModel.title",1,"color-highlight"],["matInput","","type","text","name","dataModel.title","type","text","minlength","3","maxlength","100","required","","id","dataModel.title",1,"form-control","validate-name",3,"ngModelChange","ngModel","placeholder","disabled"],["for","dataModel.phoneNo",1,"color-highlight"],["matInput","","type","text","name","dataModel.phoneNo","type","text","minlength","3","maxlength","100","required","","id","dataModel.phoneNo",1,"form-control","validate-name",3,"ngModelChange","ngModel","placeholder","disabled"],["for","dataModel.email",1,"color-highlight"],["matInput","","type","text","name","dataModel.email","type","text","minlength","3","maxlength","100","required","","id","dataModel.email",1,"form-control","validate-name",3,"ngModelChange","ngModel","placeholder","disabled"],["for","dataModel.htmlBody",1,"color-highlight"],["matInput","","name","dataModel.htmlBody","type","text","minlength","0","maxlength","1000","rows","5","id","dataModel.htmlBody",1,"form-control","validate-name",3,"ngModelChange","ngModel","placeholder","disabled"],["for","dataModel.expireDate",1,"color-highlight"],["matInput","","type","text","name","dataModel.expireDate","type","text","id","dataModel.expireDate",1,"form-control","validate-name",3,"ngModelChange","matDatepicker","ngModel"],["matSuffix","",3,"for"],["touchUi",""],[1,"form-actions"],["type","button",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-gray",3,"click"],["type","button","matStepperNext","",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-blue",3,"disabled"],["for","dataModel.userIpAddress",1,"color-highlight"],["matInput","","type","text","name","dataModel.userIpAddress","type","text","minlength","0","maxlength","100","id","dataModel.userIpAddress",1,"form-control","validate-name",3,"ngModelChange","ngModel","placeholder","disabled"],["for","dataModel.deviceInformation",1,"color-highlight"],["matInput","","type","text","name","dataModel.deviceInformation","type","text","minlength","0","maxlength","100","id","dataModel.deviceInformation",1,"form-control","validate-name",3,"ngModelChange","ngModel","placeholder","disabled"],["type","button","matStepperPrevious","",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-blue"],["type","submit",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-green",3,"disabled"]],template:function(i,e){if(i&1){let c=M();l(0,"div",10),I(1,"app-progress-spinner",11),l(2,"div",12)(3,"p",13),p(4),a(),l(5,"p"),p(6),S(7,"translate"),a(),l(8,"form",14,0),b("ngSubmit",function(){return f(c),h(e.onFormSubmit())}),l(10,"mat-horizontal-stepper",15,1),b("selectionChange",function(d){f(c);let V=D(11);return h(e.onStepClick(d,V))}),l(12,"mat-step",16),S(13,"translate"),v(14,ql,1,5,"app-cms-enum-record-status-selector",17),l(15,"app-ticketing-departemen-selector",18),S(16,"translate"),b("optionChange",function(d){return f(c),h(e.onActionSelectSource(d))}),a(),v(17,Ql,10,8,"div",19)(18,Xl,10,8,"div",19)(19,es,10,8,"div",19)(20,os,10,8,"div",19)(21,rs,10,9,"div",19)(22,as,7,4,"div",19)(23,ls,7,7,"div",20),a(),l(24,"mat-step",21),S(25,"translate"),l(26,"p"),p(27),S(28,"translate"),a(),v(29,ss,7,5,"div",19)(30,cs,7,5,"div",19)(31,ds,7,7,"div",20),a()()()()()}i&2&&(r(),m("optionsInfoAreaId",e.constructor.name),r(3),C(" ",e.formInfo.formTitle," "),r(2),C(" ",T(7,20,"TITLE.Be_Careful_When_Entering_Information")," "),r(6),R("label",T(13,22,"TITLE.REQUIRED_INFORMATION")),r(2),m("ngIf",e.fieldsInfo.recordStatus==null?null:e.fieldsInfo.recordStatus.accessWatchField),r(),m("optionSelectForce",e.dataModel.linkTicketingDepartemenId)("optionPlaceholder",T(16,24,"TITLE.Department"))("optionDisabled",!(e.fieldsInfo.linkTicketingDepartemenId!=null&&e.fieldsInfo.linkTicketingDepartemenId.accessAddField)),r(2),m("ngIf",e.fieldsInfo.fullName==null?null:e.fieldsInfo.fullName.accessWatchField),r(),m("ngIf",e.fieldsInfo.title==null?null:e.fieldsInfo.title.accessWatchField),r(),m("ngIf",e.fieldsInfo.phoneNo==null?null:e.fieldsInfo.phoneNo.accessWatchField),r(),m("ngIf",e.fieldsInfo.email==null?null:e.fieldsInfo.email.accessWatchField),r(),m("ngIf",e.fieldsInfo.htmlBody==null?null:e.fieldsInfo.htmlBody.accessWatchField),r(),m("ngIf",e.fieldsInfo.expireDate==null?null:e.fieldsInfo.expireDate.accessWatchField),r(),m("ngIf",e.formInfo.formSubmitAllow),r(),R("label",T(25,26,"TITLE.REST_OF_THE_INFORMATION")),r(3),w(T(28,28,"TITLE.Rest_of_Information")),r(2),m("ngIf",e.fieldsInfo.userIpAddress==null?null:e.fieldsInfo.userIpAddress.accessWatchField),r(),m("ngIf",e.fieldsInfo.deviceInformation==null?null:e.fieldsInfo.deviceInformation.accessWatchField),r(),m("ngIf",e.formInfo.formSubmitAllow))},dependencies:[G,Ce,ae,q,_e,we,Te,Ie,U,Se,Ai,xi,Di,Ae,ei,K,Ni,Oi,Gi,Pi,ge,Q,Pe,H],encapsulation:2});let n=s;return n})();var ps=["vform"];function ms(n,s){if(n&1){let o=M();l(0,"app-cms-enum-record-status-selector",22),x("modelChange",function(i){f(o);let e=u();return A(e.dataModel.recordStatus,i)||(e.dataModel.recordStatus=i),h(i)}),a()}if(n&2){let o=u();y("model",o.dataModel.recordStatus),m("optionDisabled",!1)("optionLabel",o.fieldsInfo.recordStatus==null?null:o.fieldsInfo.recordStatus.fieldTitle)("optionRequired",!0)("optionSelectFirstItem",!0)}}function us(n,s){n&1&&I(0,"i",29)}function fs(n,s){n&1&&I(0,"i",30)}function hs(n,s){if(n&1&&(l(0,"mat-error"),p(1),l(2,"strong"),p(3),S(4,"translate"),a()()),n&2){let o=u(2);r(),C(" ",o.fieldsInfo.fullName==null?null:o.fieldsInfo.fullName.fieldTitle," is "),r(2),w(T(4,2,"MESSAGE.required"))}}function gs(n,s){if(n&1){let o=M();l(0,"div",23)(1,"label",24),p(2),a(),l(3,"input",25,2),x("ngModelChange",function(i){f(o);let e=u();return A(e.dataModel.fullName,i)||(e.dataModel.fullName=i),h(i)}),a(),v(5,us,1,0,"i",26)(6,fs,1,0,"i",27),l(7,"em"),p(8),a(),v(9,hs,5,4,"mat-error",28),a()}if(n&2){let o=D(4),t=u();r(2),w(t.fieldsInfo.fullName==null?null:t.fieldsInfo.fullName.fieldTitle),r(),R("placeholder",t.fieldsInfo.fullName==null?null:t.fieldsInfo.fullName.fieldTitle),y("ngModel",t.dataModel.fullName),m("disabled",!(t.fieldsInfo.fullName!=null&&t.fieldsInfo.fullName.accessEditField)),r(2),m("ngIf",!o.value),r(),m("ngIf",o.value),r(2),C("",o.value.length," / 100"),r(),m("ngIf",o.errors==null?null:o.errors.required)}}function _s(n,s){n&1&&I(0,"i",29)}function Ss(n,s){n&1&&I(0,"i",30)}function Cs(n,s){if(n&1&&(l(0,"mat-error"),p(1),l(2,"strong"),p(3),S(4,"translate"),a()()),n&2){let o=u(2);r(),C(" ",o.fieldsInfo.title==null?null:o.fieldsInfo.title.fieldTitle," is "),r(2),w(T(4,2,"MESSAGE.required"))}}function Ts(n,s){if(n&1){let o=M();l(0,"div",23)(1,"label",31),p(2),a(),l(3,"input",32,3),x("ngModelChange",function(i){f(o);let e=u();return A(e.dataModel.title,i)||(e.dataModel.title=i),h(i)}),a(),v(5,_s,1,0,"i",26)(6,Ss,1,0,"i",27),l(7,"em"),p(8),a(),v(9,Cs,5,4,"mat-error",28),a()}if(n&2){let o=D(4),t=u();r(2),w(t.fieldsInfo.title==null?null:t.fieldsInfo.title.fieldTitle),r(),R("placeholder",t.fieldsInfo.title==null?null:t.fieldsInfo.title.fieldTitle),y("ngModel",t.dataModel.title),m("disabled",!(t.fieldsInfo.title!=null&&t.fieldsInfo.title.accessEditField)),r(2),m("ngIf",!o.value),r(),m("ngIf",o.value),r(2),C("",o.value.length," / 100"),r(),m("ngIf",o.errors==null?null:o.errors.required)}}function Is(n,s){n&1&&I(0,"i",29)}function vs(n,s){n&1&&I(0,"i",30)}function bs(n,s){if(n&1&&(l(0,"mat-error"),p(1),l(2,"strong"),p(3),S(4,"translate"),a()()),n&2){let o=u(2);r(),C(" ",o.fieldsInfo.phoneNo==null?null:o.fieldsInfo.phoneNo.fieldTitle," is "),r(2),w(T(4,2,"MESSAGE.required"))}}function ws(n,s){if(n&1){let o=M();l(0,"div",23)(1,"label",33),p(2),a(),l(3,"input",34,4),x("ngModelChange",function(i){f(o);let e=u();return A(e.dataModel.phoneNo,i)||(e.dataModel.phoneNo=i),h(i)}),a(),v(5,Is,1,0,"i",26)(6,vs,1,0,"i",27),l(7,"em"),p(8),a(),v(9,bs,5,4,"mat-error",28),a()}if(n&2){let o=D(4),t=u();r(2),w(t.fieldsInfo.phoneNo==null?null:t.fieldsInfo.phoneNo.fieldTitle),r(),R("placeholder",t.fieldsInfo.phoneNo==null?null:t.fieldsInfo.phoneNo.fieldTitle),y("ngModel",t.dataModel.phoneNo),m("disabled",!(t.fieldsInfo.phoneNo!=null&&t.fieldsInfo.phoneNo.accessEditField)),r(2),m("ngIf",!o.value),r(),m("ngIf",o.value),r(2),C("",o.value.length," / 100"),r(),m("ngIf",o.errors==null?null:o.errors.required)}}function Ms(n,s){n&1&&I(0,"i",29)}function ks(n,s){n&1&&I(0,"i",30)}function Es(n,s){if(n&1&&(l(0,"mat-error"),p(1),l(2,"strong"),p(3),S(4,"translate"),a()()),n&2){let o=u(2);r(),C(" ",o.fieldsInfo.email==null?null:o.fieldsInfo.email.fieldTitle," is "),r(2),w(T(4,2,"MESSAGE.required"))}}function ys(n,s){if(n&1){let o=M();l(0,"div",23)(1,"label",35),p(2),a(),l(3,"input",36,5),x("ngModelChange",function(i){f(o);let e=u();return A(e.dataModel.email,i)||(e.dataModel.email=i),h(i)}),a(),v(5,Ms,1,0,"i",26)(6,ks,1,0,"i",27),l(7,"em"),p(8),a(),v(9,Es,5,4,"mat-error",28),a()}if(n&2){let o=D(4),t=u();r(2),w(t.fieldsInfo.email==null?null:t.fieldsInfo.email.fieldTitle),r(),R("placeholder",t.fieldsInfo.email==null?null:t.fieldsInfo.email.fieldTitle),y("ngModel",t.dataModel.email),m("disabled",!(t.fieldsInfo.email!=null&&t.fieldsInfo.email.accessEditField)),r(2),m("ngIf",!o.value),r(),m("ngIf",o.value),r(2),C("",o.value.length," / 100"),r(),m("ngIf",o.errors==null?null:o.errors.required)}}function As(n,s){if(n&1){let o=M();l(0,"div",23)(1,"label",37),p(2),S(3,"translate"),a(),l(4,"textarea",38,6),S(6,"translate"),x("ngModelChange",function(i){f(o);let e=u();return A(e.dataModel.htmlBody,i)||(e.dataModel.htmlBody=i),h(i)}),p(7,"                        "),a(),l(8,"em"),p(9),a()()}if(n&2){let o=D(5),t=u();r(2),w(T(3,5,"TITLE.Description")),r(2),R("placeholder",T(6,7,"TITLE.Description")),y("ngModel",t.dataModel.htmlBody),m("disabled",!(t.fieldsInfo.htmlBody!=null&&t.fieldsInfo.htmlBody.accessEditField)),r(5),C("",o.value.length," / 1000")}}function xs(n,s){if(n&1){let o=M();l(0,"div",23)(1,"label",39),p(2),a(),l(3,"input",40),x("ngModelChange",function(i){f(o);let e=u();return A(e.dataModel.expireDate,i)||(e.dataModel.expireDate=i),h(i)}),a(),I(4,"mat-datepicker-toggle",41)(5,"mat-datepicker",42,7),a()}if(n&2){let o=D(6),t=u();r(2),w(t.fieldsInfo.expireDate==null?null:t.fieldsInfo.expireDate.fieldTitle),r(),m("matDatepicker",o),y("ngModel",t.dataModel.expireDate),r(),m("for",o)}}function Ds(n,s){if(n&1){let o=M();l(0,"div",43)(1,"button",44),b("click",function(){f(o);let i=u();return h(i.onActionBackToParent())}),p(2),S(3,"translate"),a(),l(4,"button",45),p(5),S(6,"translate"),a()()}if(n&2){u();let o=D(9);r(2),C(" ",T(3,3,"ACTION.BACK")," "),r(2),m("disabled",!o.form.valid),r(),C(" ",T(6,5,"ACTION.NEXT")," ")}}function Rs(n,s){if(n&1){let o=M();l(0,"div",23)(1,"label",46),p(2),a(),l(3,"input",47,8),x("ngModelChange",function(i){f(o);let e=u();return A(e.dataModel.userIpAddress,i)||(e.dataModel.userIpAddress=i),h(i)}),a(),l(5,"em"),p(6),a()()}if(n&2){let o=D(4),t=u();r(2),w(t.fieldsInfo.userIpAddress==null?null:t.fieldsInfo.userIpAddress.fieldTitle),r(),R("placeholder",t.fieldsInfo.userIpAddress==null?null:t.fieldsInfo.userIpAddress.fieldTitle),y("ngModel",t.dataModel.userIpAddress),m("disabled",!(t.fieldsInfo.userIpAddress!=null&&t.fieldsInfo.userIpAddress.accessEditField)),r(3),C("",o.value.length," / 100")}}function Ls(n,s){if(n&1){let o=M();l(0,"div",23)(1,"label",48),p(2),a(),l(3,"input",49,9),x("ngModelChange",function(i){f(o);let e=u();return A(e.dataModel.deviceInformation,i)||(e.dataModel.deviceInformation=i),h(i)}),a(),l(5,"em"),p(6),a()()}if(n&2){let o=D(4),t=u();r(2),w(t.fieldsInfo.userIpAddress==null?null:t.fieldsInfo.userIpAddress.fieldTitle),r(),R("placeholder",t.fieldsInfo.deviceInformation==null?null:t.fieldsInfo.deviceInformation.fieldTitle),y("ngModel",t.dataModel.deviceInformation),m("disabled",!(t.fieldsInfo.deviceInformation!=null&&t.fieldsInfo.deviceInformation.accessEditField)),r(3),C("",o.value.length," / 100")}}function Vs(n,s){if(n&1&&(l(0,"div",43)(1,"button",50),p(2),S(3,"translate"),a(),l(4,"button",51),p(5),S(6,"translate"),a()()),n&2){u();let o=D(9);r(2),C(" ",T(3,3,"ACTION.BEFOR")," "),r(2),m("disabled",!o.form.valid),r(),C(" ",T(6,5,"ACTION.SAVE")," ")}}var Jn=(()=>{let s=class s extends It{constructor(t,i,e,c,_,d,V,B,Y,te){super(d,new Ne,c,te),this.data=t,this.activatedRoute=i,this.dialogRef=e,this.publicHelper=c,this.coreEnumService=_,this.ticketingTaskService=d,this.cmsToastrService=V,this.router=B,this.cdr=Y,this.translate=te,this.requestId=0,this.formInfo=new le,this.dataModel=new Ne,this.dataModelResult=new St,this.selectFileTypeMainImage=["jpg","jpeg","png"],this.fileManagerOpenForm=!1,this.appLanguage="fa",this.mapOptonCenter=new Tt,this.publicHelper.processService.cdr=this.cdr,this.fileManagerTree=this.publicHelper.GetfileManagerTreeConfig(),t&&(this.requestId=+t.id||0)}ngOnInit(){if(this.requestId===0){this.cmsToastrService.typeErrorAddRowParentIsNull(),this.dialogRef.close({dialogChangedDate:!1});return}this.DataGetOne(this.requestId)}onFormSubmit(){if(!this.formGroup.valid){this.cmsToastrService.typeErrorFormInvalid();return}this.DataEditContent()}DataGetOne(t){this.formInfo.formSubmitAllow=!1,this.translate.get("MESSAGE.get_information_from_the_server").subscribe(e=>{this.formInfo.formAlert=e}),this.formInfo.formError="";let i=this.constructor.name+"main";this.translate.get("MESSAGE.Receiving_information").subscribe(e=>{this.publicHelper.processService.processStart(i,e,this.constructor.name)}),this.ticketingTaskService.setAccessLoad(),this.ticketingTaskService.setAccessDataType(_t.Editor),this.ticketingTaskService.ServiceGetOneById(t).subscribe({next:e=>{this.dataAccessModel=e.access,this.fieldsInfo=this.publicHelper.fieldInfoConvertor(e.access),this.publicHelper.processService.processStop(i),this.dataModelResult=e,this.formInfo.formSubmitAllow=!0,e.isSuccess?(this.dataModel=e.item,this.ticketingTaskService.ServiceTaskReaded(t).subscribe({next:c=>{},error:c=>{this.cmsToastrService.typeErrorGetOne(c)}})):this.cmsToastrService.typeErrorGetOne(e.errorMessage)},error:e=>{this.publicHelper.processService.processStop(i),this.formInfo.formSubmitAllow=!0,this.cmsToastrService.typeErrorGetOne(e)}})}DataEditContent(){this.formInfo.formSubmitAllow=!1,this.translate.get("MESSAGE.sending_information_to_the_server").subscribe(i=>{this.formInfo.formAlert=i}),this.formInfo.formError="";let t=this.constructor.name+"main";this.translate.get("MESSAGE.sending_information_to_the_server").subscribe(i=>{this.publicHelper.processService.processStart(t,i,this.constructor.name)}),this.ticketingTaskService.ServiceEdit(this.dataModel).subscribe({next:i=>{this.formInfo.formSubmitAllow=!i.isSuccess,this.dataModelResult=i,i.isSuccess?(this.translate.get("MESSAGE.registration_completed_successfully").subscribe(e=>{this.formInfo.formAlert=e}),this.cmsToastrService.typeSuccessEdit(),setTimeout(()=>{this.dialogRef.close({dialogChangedDate:!0})},1e3)):this.cmsToastrService.typeErrorEdit(i.errorMessage),this.publicHelper.processService.processStop(t)},error:i=>{this.publicHelper.processService.processStop(t),this.formInfo.formSubmitAllow=!0,this.cmsToastrService.typeErrorEdit(i)}})}onStepClick(t,i){t.previouslySelectedIndex<t.selectedIndex}onActionBackToParent(){this.dialogRef.close({dialogChangedDate:!1})}onActionFileSelectedLinkMainImageId(){}onActionSelectSource(t){if(!t||t.id<=0){this.cmsToastrService.typeErrorMessage(this.translate.instant("MESSAGE.Specify_the_source"),this.translate.instant("MESSAGE.The_source_of_the_information_application_is_not_known"));return}}};s.\u0275fac=function(i){return new(i||s)(g(he),g(ve),g(pe),g(L),g(X),g(Oe),g(N),g(de),g(O),g(P))},s.\u0275cmp=F({type:s,selectors:[["app-ticketing-task-edit"]],viewQuery:function(i,e){if(i&1&&ne(ps,5),i&2){let c;oe(c=re())&&(e.formGroup=c.first)}},features:[z],decls:32,vars:30,consts:[["vform","ngForm"],["stepper",""],["FullName",""],["Title",""],["PhoneNo",""],["Email",""],["HtmlBody",""],["ExpireDate",""],["UserIpAddress",""],["DeviceInformation",""],[1,"card","card-style","progressOverlayContainer"],[3,"optionsInfoAreaId"],[1,"content","mb-0"],[1,"mb-0","color-highlight","font-600","font-12"],[3,"ngSubmit"],[3,"selectionChange"],["state","main",3,"label"],[3,"model","optionDisabled","optionLabel","optionRequired","optionSelectFirstItem","modelChange",4,"ngIf"],[3,"optionChange","optionSelectForce","optionPlaceholder","optionDisabled"],["class","input-style has-borders no-icon input-style-always-active validate-field mb-4",4,"ngIf"],["class","form-actions",4,"ngIf"],["state","seo",3,"label"],[3,"modelChange","model","optionDisabled","optionLabel","optionRequired","optionSelectFirstItem"],[1,"input-style","has-borders","no-icon","input-style-always-active","validate-field","mb-4"],["for","dataModel.fullName",1,"color-highlight"],["matInput","","type","text","name","dataModel.fullName","minlength","3","maxlength","1000","required","","id","dataModel.fullName",1,"form-control","validate-name",3,"ngModelChange","ngModel","placeholder","disabled"],["class","fa fa-times  invalid color-red-dark",4,"ngIf"],["class","fa fa-check  valid color-green-dark",4,"ngIf"],[4,"ngIf"],[1,"fa","fa-times","invalid","color-red-dark"],[1,"fa","fa-check","valid","color-green-dark"],["for","dataModel.title",1,"color-highlight"],["matInput","","type","text","name","dataModel.title","type","text","minlength","3","maxlength","100","required","","id","dataModel.title",1,"form-control","validate-name",3,"ngModelChange","ngModel","placeholder","disabled"],["for","dataModel.phoneNo",1,"color-highlight"],["matInput","","type","text","name","dataModel.phoneNo","type","text","minlength","3","maxlength","100","required","","id","dataModel.phoneNo",1,"form-control","validate-name",3,"ngModelChange","ngModel","placeholder","disabled"],["for","dataModel.email",1,"color-highlight"],["matInput","","type","text","name","dataModel.email","type","text","minlength","3","maxlength","100","required","","id","dataModel.email",1,"form-control","validate-name",3,"ngModelChange","ngModel","placeholder","disabled"],["for","dataModel.htmlBody",1,"color-highlight"],["matInput","","name","dataModel.htmlBody","type","text","minlength","0","maxlength","1000","rows","5","id","dataModel.htmlBody",1,"form-control","validate-name",3,"ngModelChange","ngModel","placeholder","disabled"],["for","dataModel.expireDate",1,"color-highlight"],["matInput","","type","text","name","dataModel.expireDate","type","text","id","dataModel.expireDate",1,"form-control","validate-name",3,"ngModelChange","matDatepicker","ngModel"],["matSuffix","",3,"for"],["touchUi",""],[1,"form-actions"],["type","button",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-gray",3,"click"],["type","button","matStepperNext","",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-blue",3,"disabled"],["for","dataModel.userIpAddress",1,"color-highlight"],["matInput","","type","text","name","dataModel.userIpAddress","type","text","minlength","0","maxlength","100","id","dataModel.userIpAddress",1,"form-control","validate-name",3,"ngModelChange","ngModel","placeholder","disabled"],["for","dataModel.deviceInformation",1,"color-highlight"],["matInput","","type","text","name","dataModel.deviceInformation","type","text","minlength","0","maxlength","100","id","dataModel.deviceInformation",1,"form-control","validate-name",3,"ngModelChange","ngModel","placeholder","disabled"],["type","button","matStepperPrevious","",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-blue"],["type","submit",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-green",3,"disabled"]],template:function(i,e){if(i&1){let c=M();l(0,"div",10),I(1,"app-progress-spinner",11),l(2,"div",12)(3,"p",13),p(4),a(),l(5,"p"),p(6),S(7,"translate"),a(),l(8,"form",14,0),b("ngSubmit",function(){return f(c),h(e.onFormSubmit())}),l(10,"mat-horizontal-stepper",15,1),b("selectionChange",function(d){f(c);let V=D(11);return h(e.onStepClick(d,V))}),l(12,"mat-step",16),S(13,"translate"),v(14,ms,1,5,"app-cms-enum-record-status-selector",17),l(15,"app-ticketing-departemen-selector",18),S(16,"translate"),b("optionChange",function(d){return f(c),h(e.onActionSelectSource(d))}),a(),v(17,gs,10,8,"div",19)(18,Ts,10,8,"div",19)(19,ws,10,8,"div",19)(20,ys,10,8,"div",19)(21,As,10,9,"div",19)(22,xs,7,4,"div",19)(23,Ds,7,7,"div",20),a(),l(24,"mat-step",21),S(25,"translate"),l(26,"p"),p(27),S(28,"translate"),a(),v(29,Rs,7,5,"div",19)(30,Ls,7,5,"div",19)(31,Vs,7,7,"div",20),a()()()()()}i&2&&(r(),m("optionsInfoAreaId",e.constructor.name),r(3),C(" ",e.formInfo.formTitle," "),r(2),C(" ",T(7,20,"TITLE.Be_Careful_When_Entering_Information")," "),r(6),R("label",T(13,22,"TITLE.REQUIRED_INFORMATION")),r(2),m("ngIf",e.fieldsInfo.recordStatus==null?null:e.fieldsInfo.recordStatus.accessWatchField),r(),m("optionSelectForce",e.dataModel.linkTicketingDepartemenId)("optionPlaceholder",T(16,24,"TITLE.Department"))("optionDisabled",!(e.fieldsInfo.linkTicketingDepartemenId!=null&&e.fieldsInfo.linkTicketingDepartemenId.accessEditField)),r(2),m("ngIf",e.fieldsInfo.fullName==null?null:e.fieldsInfo.fullName.accessWatchField),r(),m("ngIf",e.fieldsInfo.title==null?null:e.fieldsInfo.title.accessWatchField),r(),m("ngIf",e.fieldsInfo.phoneNo==null?null:e.fieldsInfo.phoneNo.accessWatchField),r(),m("ngIf",e.fieldsInfo.email==null?null:e.fieldsInfo.email.accessWatchField),r(),m("ngIf",e.fieldsInfo.htmlBody==null?null:e.fieldsInfo.htmlBody.accessWatchField),r(),m("ngIf",e.fieldsInfo.expireDate==null?null:e.fieldsInfo.expireDate.accessWatchField),r(),m("ngIf",e.formInfo.formSubmitAllow),r(),R("label",T(25,26,"TITLE.REST_OF_THE_INFORMATION")),r(3),w(T(28,28,"TITLE.Rest_of_Information")),r(2),m("ngIf",e.fieldsInfo.userIpAddress==null?null:e.fieldsInfo.userIpAddress.accessWatchField),r(),m("ngIf",e.fieldsInfo.deviceInformation==null?null:e.fieldsInfo.deviceInformation.accessWatchField),r(),m("ngIf",e.formInfo.formSubmitAllow))},dependencies:[G,Ce,ae,q,_e,we,Te,Ie,U,Se,Ai,xi,Di,Ae,ei,K,Ni,Oi,Gi,Pi,ge,Q,Pe,H]});let n=s;return n})();var Bs=()=>[5,10,20,100],Fs=n=>({background:n});function Ns(n,s){if(n&1){let o=M();l(0,"a",42),b("click",function(){f(o);let i=u();return h(i.onActionBackToParent())}),I(1,"i",43),a()}}function Os(n,s){if(n&1){let o=M();l(0,"div",44)(1,"a",45),b("click",function(){f(o);let i=u();return h(i.onActionButtonNewRow())}),I(2,"i",46)(3,"br"),a(),l(4,"p",47),p(5),S(6,"translate"),a()()}n&2&&(r(5),w(T(6,1,"ACTION.ADD")))}function Gs(n,s){if(n&1){let o=M();l(0,"div",44)(1,"a",15),b("click",function(){f(o);let i=u();return h(i.onActionButtonAnswerList())}),I(2,"i",48)(3,"br"),a(),l(4,"p",47),p(5),S(6,"translate"),a()()}n&2&&(r(5),w(T(6,1,"ACTION.ANSWERS")))}function Ps(n,s){if(n&1){let o=M();l(0,"div",44)(1,"a",49),b("click",function(){f(o);let i=u();return h(i.onActionButtonEditRow(i.tableRowSelected))}),I(2,"i",50)(3,"br"),a(),l(4,"p",47),p(5),S(6,"translate"),a()()}n&2&&(r(5),w(T(6,1,"ACTION.EDIT")))}function Hs(n,s){if(n&1){let o=M();l(0,"div",44)(1,"a",51),b("click",function(){f(o);let i=u();return h(i.onActionButtonDeleteRow(i.tableRowSelected))}),I(2,"i",52)(3,"br"),a(),l(4,"p",47),p(5),S(6,"translate"),a()()}n&2&&(r(5),w(T(6,1,"ACTION.DELETE")))}function qs(n,s){if(n&1){let o=M();l(0,"div",44)(1,"a",53),b("click",function(){f(o);let i=u();return h(i.onActionButtonAnswerList(i.tableRowSelected))}),I(2,"i",48)(3,"br"),a(),l(4,"p",47),p(5),S(6,"translate"),a()()}n&2&&(r(5),w(T(6,1,"ACTION.ANSWERS")))}function Ws(n,s){if(n&1){let o=M();l(0,"div",44)(1,"a",54),b("click",function(){f(o);let i=u();return h(i.onActionButtonViewRow(i.tableRowSelected))}),I(2,"i",55)(3,"br"),a(),l(4,"p",47),p(5),S(6,"translate"),a()()}n&2&&(r(5),w(T(6,1,"ACTION.VIEW")))}function js(n,s){if(n&1&&(l(0,"mat-header-cell",56),p(1),a()),n&2){let o=u();r(),C(" ",o.fieldsInfo.id==null?null:o.fieldsInfo.id.fieldTitle," ")}}function Us(n,s){if(n&1&&(l(0,"mat-cell"),p(1),a()),n&2){let o=s.$implicit;r(),C(" ",o.id," ")}}function Qs(n,s){if(n&1&&(l(0,"mat-header-cell",56),p(1),a()),n&2){let o=u();r(),C(" ",o.fieldsInfo.linkSiteId==null?null:o.fieldsInfo.linkSiteId.fieldTitle," ")}}function zs(n,s){if(n&1&&(l(0,"mat-cell"),p(1),S(2,"cmssiteinfo"),S(3,"async"),a()),n&2){let o=s.$implicit;r(),C(" ",T(3,3,T(2,1,o.linkSiteId))," ")}}function Ks(n,s){if(n&1&&(l(0,"mat-header-cell",56),p(1),a()),n&2){let o=u();r(),C(" ",o.fieldsInfo.linkMemberId==null?null:o.fieldsInfo.linkMemberId.fieldTitle," ")}}function Js(n,s){if(n&1&&(l(0,"mat-cell"),p(1),a()),n&2){let o=s.$implicit;r(),C(" ",o.linkMemberId," ")}}function Xs(n,s){if(n&1&&(l(0,"mat-header-cell",56),p(1),a()),n&2){let o=u();r(),C(" ",o.fieldsInfo.title==null?null:o.fieldsInfo.title.fieldTitle," ")}}function Ys(n,s){if(n&1&&(l(0,"mat-cell"),p(1),a()),n&2){let o=s.$implicit;r(),C(" ",o.title," ")}}function Zs(n,s){if(n&1&&(l(0,"mat-header-cell",56),p(1),a()),n&2){let o=u();r(),C(" ",o.fieldsInfo.createdDate==null?null:o.fieldsInfo.createdDate.fieldTitle," ")}}function $s(n,s){if(n&1&&(l(0,"mat-cell"),p(1),a()),n&2){let o=s.$implicit,t=u();r(),C(" ",t.publicHelper.LocaleDate(o.createdDate)," ")}}function ec(n,s){if(n&1&&(l(0,"mat-header-cell",56),p(1),a()),n&2){let o=u();r(),C(" ",o.fieldsInfo.updatedDate==null?null:o.fieldsInfo.updatedDate.fieldTitle," ")}}function tc(n,s){if(n&1&&(l(0,"mat-cell"),p(1),a()),n&2){let o=s.$implicit,t=u();r(),C(" ",t.publicHelper.LocaleDate(o.updatedDate)," ")}}function ic(n,s){if(n&1&&(l(0,"mat-header-cell",56),p(1),a()),n&2){let o=u();r(),C(" ",o.fieldsInfo.ticketStatus==null?null:o.fieldsInfo.ticketStatus.fieldTitle," ")}}function nc(n,s){if(n&1&&(l(0,"mat-cell",57),p(1),S(2,"enums"),a()),n&2){let o=s.$implicit,t=u();m("ngStyle",Ke(5,Fs,t.publicHelper.RowStyleTicketStatus(o.ticketStatus))),r(),C(" ",Zt(2,2,o.ticketStatus,t.dataModelEnumTicketStatusResult.listItems)," ")}}function oc(n,s){n&1&&(l(0,"mat-header-cell"),p(1),S(2,"translate"),a()),n&2&&(r(),C(" ",T(2,1,"TITLE.OPTION")," "))}function rc(n,s){if(n&1&&(l(0,"mat-cell",58)(1,"button",59)(2,"mat-icon"),p(3,"more_vert"),a()(),I(4,"mat-menu",null,2),a()),n&2){let o=D(5);r(),m("matMenuTriggerFor",o)}}function ac(n,s){n&1&&I(0,"mat-header-row")}function lc(n,s){if(n&1){let o=M();l(0,"mat-row",60),b("click",function(){let i=f(o).$implicit,e=u();return h(e.onActionTableRowSelect(i))}),a()}if(n&2){let o=s.$implicit,t=s.dataIndex,i=u();Ee("ntk-row-odd",t%2)("ntk-row-even",!(t%2))("ntk-row-selected",o.id===(i.tableRowSelected==null?null:i.tableRowSelected.id))}}var fi=(()=>{let s=class s extends Ue{constructor(t,i,e,c,_,d,V,B,Y,te,Re,jt){super(t,new Ne,Re,d,B),this.contentService=t,this.activatedRoute=i,this.cmsToastrService=e,this.cmsConfirmationDialogService=c,this.router=_,this.tokenHelper=d,this.cdr=V,this.translate=B,this.ticketingEnumService=Y,this.pageInfo=te,this.publicHelper=Re,this.dialog=jt,this.requestDepartemenId=0,this.requestLinkCmsUserId=0,this.requestTicketStatus=-1,this.flag=!1,this.tableContentSelected=[],this.filteModelContent=new $,this.dataModelEnumTicketStatusResult=new J,this.tabledisplayedColumns=[],this.tabledisplayedColumnsSource=["LinkMemberId","CreatedDate","UpdatedDate","TicketStatus"],this.tabledisplayedColumnsMobileSource=["LinkMemberId","CreatedDate","UpdatedDate","TicketStatus"],this.publicHelper.processService.cdr=this.cdr,this.optionsSearch.parentMethods={onSubmit:Ji=>this.onSubmitOptionsSearch(Ji)},this.filteModelContent.sortColumn="Id",this.filteModelContent.sortType=j.Descending}ngOnInit(){this.requestDepartemenId=+Number(this.activatedRoute.snapshot.paramMap.get("DepartemenId")),this.requestLinkCmsUserId=+Number(this.activatedRoute.snapshot.paramMap.get("LinkCmsUserId")),this.activatedRoute.snapshot.paramMap.get("TicketStatus")&&(this.requestTicketStatus=+Number(this.activatedRoute.snapshot.paramMap.get("TicketStatus"))),this.tokenHelper.getCurrentToken().then(t=>{this.tokenInfo=t,this.DataGetAll()}),this.cmsApiStoreSubscribe=this.tokenHelper.getCurrentTokenOnChange().subscribe({next:t=>{this.getEnumTicketStatus(),this.tokenInfo=t,this.DataGetAll()}}),this.getEnumTicketStatus()}ngOnDestroy(){this.cmsApiStoreSubscribe.unsubscribe()}getEnumTicketStatus(){this.ticketingEnumService.ServiceTicketStatusEnum().subscribe({next:t=>{this.dataModelEnumTicketStatusResult=t}})}DataGetAll(){this.tabledisplayedColumns=this.publicHelper.TableDisplayedColumns(this.tabledisplayedColumnsSource,this.tabledisplayedColumnsMobileSource,[],this.tokenInfo),this.tableRowsSelected=[],this.onActionTableRowSelect(new Ne);let t=this.constructor.name+"main";this.translate.get("MESSAGE.get_information_list").subscribe(c=>{this.publicHelper.processService.processStart(t,c,this.constructor.name)}),this.filteModelContent.accessLoad=!0;let i=JSON.parse(JSON.stringify(this.filteModelContent)),e=new Z;this.requestDepartemenId>0&&(e.propertyName="LinkTicketingDepartemenId",e.value=this.requestDepartemenId,i.filters.push(e)),this.categoryModelSelected&&this.categoryModelSelected.id>0&&(e.propertyName="LinkTicketingDepartemenId",e.value=this.categoryModelSelected.id,i.filters.push(e)),this.requestLinkCmsUserId>0&&(e.propertyName="LinkCmsUserId",e.value=this.requestLinkCmsUserId,i.filters.push(e)),this.requestTicketStatus>=0&&(e.propertyName="TicketStatus",e.value=this.requestTicketStatus,i.filters.push(e)),this.contentService.ServiceGetAll(i).subscribe({next:c=>{this.fieldsInfo=this.publicHelper.fieldInfoConvertor(c.access),c.isSuccess?(this.dataModelResult=c,this.tableSource.data=c.listItems,this.optionsStatist?.data?.show&&this.onActionButtonStatist(!0),this.optionsSearch.childMethods&&this.optionsSearch.childMethods.setAccess(c.access)):this.cmsToastrService.typeErrorGetAll(c.errorMessage),this.publicHelper.processService.processStop(t)},error:c=>{this.cmsToastrService.typeError(c),this.publicHelper.processService.processStop(t,!1)}})}onTableSortData(t){this.tableSource&&this.tableSource.sort&&this.tableSource.sort.active===t.active?this.tableSource.sort.start==="asc"?(t.start="desc",this.filteModelContent.sortColumn=t.active,this.filteModelContent.sortType=j.Descending):this.tableSource.sort.start==="desc"?(t.start="asc",this.filteModelContent.sortColumn="",this.filteModelContent.sortType=j.Ascending):t.start="desc":(this.filteModelContent.sortColumn=t.active,this.filteModelContent.sortType=j.Descending),this.tableSource.sort=t,this.filteModelContent.currentPageNumber=0,this.DataGetAll()}onTablePageingData(t){this.filteModelContent.currentPageNumber=t.pageIndex+1,this.filteModelContent.rowPerPage=t.pageSize,this.DataGetAll()}onActionButtonNewRow(){if(this.categoryModelSelected==null&&this.categoryModelSelected&&this.categoryModelSelected.id===0&&(this.requestDepartemenId==null||this.requestDepartemenId===0)){this.translate.get("MESSAGE.Content_not_selected").subscribe(c=>{this.cmsToastrService.typeErrorSelected(c)});return}let t=this.requestDepartemenId;this.categoryModelSelected&&this.categoryModelSelected.id>0&&(t=this.categoryModelSelected.id);var i="";this.tokenHelper.isMobile?i="dialog-fullscreen":i="dialog-min",this.dialog.open(Kn,{height:"90%",panelClass:i,enterAnimationDuration:W.cmsViewConfig.enterAnimationDuration,exitAnimationDuration:W.cmsViewConfig.exitAnimationDuration,data:{linkDepartemenId:t}}).afterClosed().subscribe(c=>{c&&c.dialogChangedDate&&this.DataGetAll()})}onActionButtonViewRow(t=this.tableRowSelected){if(!t||!t.id||t.id===0){this.cmsToastrService.typeErrorSelectedRow();return}this.tableRowSelected=t;var i="";this.tokenHelper.isMobile?i="dialog-fullscreen":i="dialog-min",this.dialog.open(Ki,{height:"90%",panelClass:i,enterAnimationDuration:W.cmsViewConfig.enterAnimationDuration,exitAnimationDuration:W.cmsViewConfig.exitAnimationDuration,data:{id:this.tableRowSelected.id}}).afterClosed().subscribe(c=>{c&&c.dialogChangedDate})}onActionSelectorSelect(t){var i=this.filteModelContent.sortColumn,e=this.filteModelContent.sortType;this.filteModelContent=new $,this.filteModelContent.sortColumn=i,this.filteModelContent.sortType=e,this.categoryModelSelected=t,this.DataGetAll()}onActionButtonEditRow(t=this.tableRowSelected){if(!t||!t.id||t.id===0){this.cmsToastrService.typeErrorSelectedRow();return}if(this.tableRowSelected=t,this.dataModelResult==null||this.dataModelResult.access==null||!this.dataModelResult.access.accessEditRow){this.cmsToastrService.typeErrorAccessEdit();return}var i="";this.tokenHelper.isMobile?i="dialog-fullscreen":i="dialog-min",this.dialog.open(Jn,{height:"90%",panelClass:i,enterAnimationDuration:W.cmsViewConfig.enterAnimationDuration,exitAnimationDuration:W.cmsViewConfig.exitAnimationDuration,data:{id:this.tableRowSelected.id}}).afterClosed().subscribe(c=>{c&&c.dialogChangedDate&&this.DataGetAll()})}onActionButtonAnswerList(t=this.tableRowSelected){if(!t||!t.id||t.id===0){this.cmsToastrService.typeErrorSelectedRow();return}if(this.tableRowSelected=t,this.dataModelResult==null||this.dataModelResult.access==null||!this.dataModelResult.access.accessWatchRow){this.cmsToastrService.typeErrorAccessWatch();return}this.router.navigate(["/ticketing/answer/LinkTaskId/",this.tableRowSelected.id])}onActionButtonDeleteRow(t=this.tableRowSelected){if(t==null||!t.id||t.id===0){this.translate.get("MESSAGE.no_row_selected_to_delete").subscribe(c=>{this.cmsToastrService.typeErrorSelected(c)});return}if(this.tableRowSelected=t,this.dataModelResult==null||this.dataModelResult.access==null||!this.dataModelResult.access.accessDeleteRow){this.cmsToastrService.typeErrorAccessDelete();return}var i="",e="";this.translate.get(["MESSAGE.Please_Confirm","MESSAGE.Do_you_want_to_delete_this_content"]).subscribe(c=>{i=c["MESSAGE.Please_Confirm"],e=c["MESSAGE.Do_you_want_to_delete_this_content"]+"?<br> ( "+this.tableRowSelected.title+" ) "}),this.cmsConfirmationDialogService.confirm(i,e).then(c=>{if(c){let _=this.constructor.name+"main";this.translate.get("MESSAGE.Receiving_information").subscribe(d=>{this.publicHelper.processService.processStart(_,d,this.constructor.name)}),this.contentService.ServiceDelete(this.tableRowSelected.id).subscribe({next:d=>{d.isSuccess?this.cmsToastrService.typeSuccessRemove():this.cmsToastrService.typeErrorRemove(),this.publicHelper.processService.processStop(_)},error:d=>{this.cmsToastrService.typeError(d),this.publicHelper.processService.processStop(_,!1)}})}}).catch(()=>{})}onActionButtonStatist(t=!this.optionsStatist.data.show){if(this.optionsStatist.data.show=t,!this.optionsStatist.data.show)return;let i=new Map;this.translate.get("MESSAGE.Active").subscribe(d=>{i.set(d,0)}),this.translate.get("MESSAGE.All").subscribe(d=>{i.set(d,0)});let e=this.constructor.name+".ServiceStatist";this.translate.get("MESSAGE.Get_the_statist").subscribe(d=>{this.publicHelper.processService.processStart(e,d,this.constructor.name)}),this.contentService.ServiceGetCount(this.filteModelContent).subscribe({next:d=>{d.isSuccess&&(this.translate.get("MESSAGE.All").subscribe(V=>{i.set(V,d.totalRowCount)}),this.optionsStatist.childMethods.setStatistValue(i)),this.publicHelper.processService.processStop(e)},error:d=>{this.cmsToastrService.typeError(d),this.publicHelper.processService.processStop(e,!1)}});let c=JSON.parse(JSON.stringify(this.filteModelContent)),_=new Z;_.propertyName="RecordStatus",_.value=Xe.Available,c.filters.push(_),this.contentService.ServiceGetCount(c).subscribe({next:d=>{d.isSuccess&&(this.translate.get("MESSAGE.Active").subscribe(V=>{i.set(V,d.totalRowCount)}),this.optionsStatist.childMethods.setStatistValue(i)),this.publicHelper.processService.processStop(e)},error:d=>{this.cmsToastrService.typeError(d),this.publicHelper.processService.processStop(e,!1)}})}onActionButtonReload(){this.requestTicketStatus=-1,this.DataGetAll()}onSubmitOptionsSearch(t){this.filteModelContent.filters=t,this.DataGetAll()}onActionBackToParent(){this.router.navigate(["/ticketing/departemen/"])}};s.\u0275fac=function(i){return new(i||s)(g(Oe),g(ve),g(N),g(Rt),g(de),g(ie),g(O),g(P),g(Pt),g(He),g(L),g(xe))},s.\u0275cmp=F({type:s,selectors:[["app-ticketing-task-list"]],features:[z],decls:64,vars:32,consts:[["tableSort","matSort"],["paginator",""],["actionMenu","matMenu"],[3,"optionActionGuideNoticeDisplayChange","optionOnActionButtonMemoRow","optionOnActionButtonMemo","optionOnActionButtonExport","optionOnActionButtonPrintRow","optionsListInfoAreaId","optionGuideNoticeKey","optionActionGuideNoticeDisplay","optionTreeDisplay","optionActionRowId","optionActionRowDisplayMenu","optionSelectRowItemTitle"],["cms-tree",""],[3,"optionChange"],["cms-header",""],["cms-action-header",""],[1,"d-flex","justify-content-between","flex-wrap"],[1,"justify-content-end"],["target","_blank",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-highlight"],[3,"ngModelChange","ngModel"],[3,"click","ngModelChange","ngModel"],[1,"justify-content-start"],["type","button","class","btn font-13 font-600 btn-s m-1 rounded-s shadow-xl border-0 gradient-gray","target","_blank",3,"click",4,"ngIf"],["type","button","target","_blank",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-highlight",3,"click"],[1,"fa-solid","fa-info","font-18",2,"color","#ffffff"],[1,"fa-solid","fa-rotate-right","font-18",2,"color","#ffffff"],["cms-action-main",""],["class","col-4",4,"ngIf"],["cms-action-row",""],["cms-action-area",""],[3,"optionsChange","options"],["cms-body",""],["matSort","",3,"matSortChange","dataSource"],["matColumnDef","Id"],["mat-sort-header","",4,"matHeaderCellDef"],[4,"matCellDef"],["matColumnDef","LinkSiteId"],["matColumnDef","LinkMemberId"],["matColumnDef","Title"],["matColumnDef","CreatedDate"],["matColumnDef","UpdatedDate"],["matColumnDef","TicketStatus"],[3,"ngStyle",4,"matCellDef"],["matColumnDef","Action"],[4,"matHeaderCellDef"],["class"," Action",4,"matCellDef"],[4,"matHeaderRowDef"],[3,"ntk-row-odd","ntk-row-even","ntk-row-selected","click",4,"matRowDef","matRowDefColumns"],["cms-footer",""],[3,"page","length","pageIndex","pageSize","pageSizeOptions"],["type","button","target","_blank",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-gray",3,"click"],[1,"fa-solid","fa-arrow-left","font-18",2,"color","#ffffff"],[1,"col-4"],["type","button","target","_blank",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-teal",3,"click"],[1,"fa-solid","fa-plus","font-18",2,"color","#FFFFFF"],[1,"font-11","text-center","opacity-70"],[1,"fa-solid","fa-phone-arrow-right","font-18",2,"color","#ffffff"],["target","_blank",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-magenta",3,"click"],[1,"fa-solid","fa-pen","font-18",2,"color","#FFFFFF"],["target","_blank",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-red",3,"click"],[1,"fa-solid","fa-trash","font-18",2,"color","#ffffff"],["target","_blank",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-highlight",3,"click"],["type","button","target","_blank","data-toggle","modal","data-target","#categoryModal",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-highlight",3,"click"],[1,"fa-solid","fa-eye","font-18",2,"color","#ffffff"],["mat-sort-header",""],[3,"ngStyle"],[1,"Action"],["type","button","mat-icon-button","","aria-label","Action Menu",3,"matMenuTriggerFor"],[3,"click"]],template:function(i,e){if(i&1){let c=M();l(0,"app-cms-html-list",3),x("optionActionGuideNoticeDisplayChange",function(d){return f(c),A(e.viewGuideNotice,d)||(e.viewGuideNotice=d),h(d)}),b("optionOnActionButtonMemoRow",function(){return f(c),h(e.onActionButtonMemoRow())})("optionOnActionButtonMemo",function(){return f(c),h(e.onActionButtonMemo())})("optionOnActionButtonExport",function(){return f(c),h(e.onActionButtonExport())})("optionOnActionButtonPrintRow",function(){return f(c),h(e.onActionButtonPrintRow())}),k(1,4),l(2,"app-ticketing-departemen-tree",5),b("optionChange",function(d){return f(c),h(e.onActionSelectorSelect(d))}),a(),E(),ye(3,6),k(4,7),l(5,"div",8)(6,"div",9)(7,"a",10)(8,"mat-slide-toggle",11),x("ngModelChange",function(d){return f(c),A(e.optionsSearch.data.show,d)||(e.optionsSearch.data.show=d),h(d)}),a(),p(9),S(10,"translate"),a(),l(11,"a",10)(12,"mat-slide-toggle",12),b("click",function(){return f(c),h(e.onActionButtonStatist())}),x("ngModelChange",function(d){return f(c),A(e.optionsStatist.data.show,d)||(e.optionsStatist.data.show=d),h(d)}),a(),p(13),S(14,"translate"),a()(),l(15,"div",13),v(16,Ns,2,0,"a",14),l(17,"a",15),b("click",function(){return f(c),h(e.viewGuideNotice=!e.viewGuideNotice)}),I(18,"i",16),a(),l(19,"a",15),b("click",function(){return f(c),h(e.onActionButtonReload())}),I(20,"i",17),a()()(),E(),k(21,18),v(22,Os,7,3,"div",19)(23,Gs,7,3,"div",19),E(),k(24,20),v(25,Ps,7,3,"div",19)(26,Hs,7,3,"div",19)(27,qs,7,3,"div",19)(28,Ws,7,3,"div",19),E(),k(29,21),l(30,"app-cms-search-list",22),x("optionsChange",function(d){return f(c),A(e.optionsSearch,d)||(e.optionsSearch=d),h(d)}),a(),l(31,"app-cms-statist-list",22),x("optionsChange",function(d){return f(c),A(e.optionsStatist,d)||(e.optionsStatist=d),h(d)}),a(),E(),k(32,23),l(33,"mat-table",24,0),b("matSortChange",function(){f(c);let d=D(34);return h(e.onTableSortData(d))}),k(35,25),v(36,js,2,1,"mat-header-cell",26)(37,Us,2,1,"mat-cell",27),E(),k(38,28),v(39,Qs,2,1,"mat-header-cell",26)(40,zs,4,5,"mat-cell",27),E(),k(41,29),v(42,Ks,2,1,"mat-header-cell",26)(43,Js,2,1,"mat-cell",27),E(),k(44,30),v(45,Xs,2,1,"mat-header-cell",26)(46,Ys,2,1,"mat-cell",27),E(),k(47,31),v(48,Zs,2,1,"mat-header-cell",26)(49,$s,2,1,"mat-cell",27),E(),k(50,32),v(51,ec,2,1,"mat-header-cell",26)(52,tc,2,1,"mat-cell",27),E(),k(53,33),v(54,ic,2,1,"mat-header-cell",26)(55,nc,3,7,"mat-cell",34),E(),k(56,35),v(57,oc,3,3,"mat-header-cell",36)(58,rc,6,1,"mat-cell",37),E(),v(59,ac,1,0,"mat-header-row",38)(60,lc,1,6,"mat-row",39),a(),E(),k(61,40),l(62,"mat-paginator",41,1),b("page",function(d){return f(c),h(e.onTablePageingData(d))}),a(),E(),a()}i&2&&(m("optionsListInfoAreaId",e.constructor.name)("optionGuideNoticeKey","ticketing.task.list"),y("optionActionGuideNoticeDisplay",e.viewGuideNotice),m("optionTreeDisplay",e.requestDepartemenId===0)("optionActionRowId",e.tableRowSelected==null?null:e.tableRowSelected.id)("optionActionRowDisplayMenu",e.tableRowSelectDoubleClick)("optionSelectRowItemTitle",(e.tableRowSelected==null||e.tableRowSelected.title==null?null:e.tableRowSelected.title.length)>0?e.tableRowSelected==null?null:e.tableRowSelected.title:e.tableRowSelected==null?null:e.tableRowSelected.id),r(8),y("ngModel",e.optionsSearch.data.show),r(),C("",T(10,27,"ACTION.SEARCH")," "),r(3),y("ngModel",e.optionsStatist.data.show),r(),C("",T(14,29,"ACTION.STATIST")," "),r(3),m("ngIf",e.requestDepartemenId>0),r(6),m("ngIf",e.dataModelResult==null||e.dataModelResult.access==null?null:e.dataModelResult.access.accessAddRow),r(),m("ngIf",(e.dataModelResult==null||e.dataModelResult.access==null?null:e.dataModelResult.access.accessWatchRow)&&(e.tableRowSelected==null?null:e.tableRowSelected.id)>0),r(2),m("ngIf",e.dataModelResult==null||e.dataModelResult.access==null?null:e.dataModelResult.access.accessEditRow),r(),m("ngIf",e.dataModelResult==null||e.dataModelResult.access==null?null:e.dataModelResult.access.accessDeleteRow),r(),m("ngIf",e.dataModelResult==null||e.dataModelResult.access==null?null:e.dataModelResult.access.accessWatchRow),r(),m("ngIf",(e.dataModelResult==null||e.dataModelResult.access==null?null:e.dataModelResult.access.accessWatchRow)&&(e.tableRowSelected==null?null:e.tableRowSelected.id)>0),r(2),y("options",e.optionsSearch),r(),y("options",e.optionsStatist),r(2),m("dataSource",e.tableSource),r(26),m("matHeaderRowDef",e.tabledisplayedColumns),r(),m("matRowDefColumns",e.tabledisplayedColumns),r(2),m("length",e.dataModelResult.totalRowCount)("pageIndex",e.dataModelResult.currentPageNumber-1)("pageSize",e.dataModelResult.rowPerPage)("pageSizeOptions",ze(31,Bs)))},dependencies:[G,Je,q,U,Be,De,Ye,Ze,$e,et,tt,it,nt,rt,ct,at,ot,dt,lt,st,pt,mt,We,je,qe,Ot,Ve,H,ii,ft],encapsulation:2});let n=s;return n})();var sc=["vform"];function cc(n,s){if(n&1){let o=M();l(0,"app-cms-enum-record-status-selector",12),x("modelChange",function(i){f(o);let e=u();return A(e.dataModel.recordStatus,i)||(e.dataModel.recordStatus=i),h(i)}),a()}if(n&2){let o=u();y("model",o.dataModel.recordStatus),m("optionDisabled",!1)("optionLabel",o.fieldsInfo.recordStatus==null?null:o.fieldsInfo.recordStatus.fieldTitle)("optionRequired",!0)("optionSelectFirstItem",!0)}}function dc(n,s){n&1&&I(0,"i",19)}function pc(n,s){n&1&&I(0,"i",20)}function mc(n,s){if(n&1&&(l(0,"mat-error"),p(1),l(2,"strong"),p(3),S(4,"translate"),a()()),n&2){let o=u(2);r(),C(" ",o.fieldsInfo.title==null?null:o.fieldsInfo.title.fieldTitle," is "),r(2),w(T(4,2,"MESSAGE.required"))}}function uc(n,s){if(n&1){let o=M();l(0,"div",13)(1,"label",14),p(2),a(),l(3,"input",15,1),x("ngModelChange",function(i){f(o);let e=u();return A(e.dataModel.title,i)||(e.dataModel.title=i),h(i)}),a(),v(5,dc,1,0,"i",16)(6,pc,1,0,"i",17),l(7,"em"),p(8),a(),v(9,mc,5,4,"mat-error",18),a()}if(n&2){let o=D(4),t=u();r(2),w(t.fieldsInfo.title==null?null:t.fieldsInfo.title.fieldTitle),r(),R("placeholder",t.fieldsInfo.title==null?null:t.fieldsInfo.title.fieldTitle),y("ngModel",t.dataModel.title),r(2),m("ngIf",!o.value),r(),m("ngIf",o.value),r(2),C("",o.value.length," / 100"),r(),m("ngIf",o.errors==null?null:o.errors.required)}}function fc(n,s){if(n&1&&(l(0,"mat-error"),p(1),l(2,"strong"),p(3),S(4,"translate"),a()()),n&2){let o=u(2);r(),C(" ",o.fieldsInfo.htmlBody==null?null:o.fieldsInfo.htmlBody.fieldTitle," "),r(2),w(T(4,2,"MESSAGE.required"))}}function hc(n,s){if(n&1){let o=M();l(0,"div",13)(1,"label",21),p(2),S(3,"translate"),a(),l(4,"textarea",22,2),S(6,"translate"),x("ngModelChange",function(i){f(o);let e=u();return A(e.dataModel.htmlBody,i)||(e.dataModel.htmlBody=i),h(i)}),p(7,"                "),a(),l(8,"em"),p(9),a(),v(10,fc,5,4,"mat-error",18),a()}if(n&2){let o=D(5),t=u();r(2),w(T(3,6,"TITLE.Description")),r(2),R("disabled",!(t.fieldsInfo.htmlBody!=null&&t.fieldsInfo.htmlBody.accessAddField)),R("placeholder",T(6,8,"TITLE.Answer_Text")),y("ngModel",t.dataModel.htmlBody),r(5),C("",o.value.length," / 2000"),r(),m("ngIf",o.errors==null?null:o.errors.required)}}function gc(n,s){if(n&1){let o=M();l(0,"div",23)(1,"button",24),b("click",function(){f(o);let i=u();return h(i.onFormCancel())}),I(2,"i",25),p(3),S(4,"translate"),a(),l(5,"button",26),I(6,"i",27),p(7),S(8,"translate"),a()()}if(n&2){u();let o=D(9);r(3),C(" ",T(4,3,"ACTION.CANCEL")," "),r(2),m("disabled",!o.form.valid),r(2),C(" ",T(8,5,"ACTION.SAVE")," ")}}var Xn=(()=>{let s=class s extends ht{constructor(t,i,e,c,_,d,V,B){super(c,new ut,d,B),this.data=t,this.dialogRef=i,this.coreEnumService=e,this.ticketingTemplateService=c,this.cmsToastrService=_,this.publicHelper=d,this.cdr=V,this.translate=B,this.requestParentId=0,this.fieldsInfo=new Map,this.formMatcher=new Ht,this.dataModelResult=new J,this.dataModel=new ut,this.formInfo=new le,this.publicHelper.processService.cdr=this.cdr,t&&(this.requestParentId=+t.parentId||0),this.requestParentId>0&&(this.dataModel.linkTicketingDepartemenId=this.requestParentId)}ngOnInit(){this.formInfo.formTitle=this.translate.instant("TITLE.Submit_New_Content"),this.DataGetAccess()}DataAddContent(){this.translate.get("MESSAGE.sending_information_to_the_server").subscribe(i=>{this.formInfo.formAlert=i}),this.formInfo.formError="";let t=this.constructor.name+"main";this.translate.get("MESSAGE.Receiving_information").subscribe(i=>{this.publicHelper.processService.processStart(t,i,this.constructor.name)}),this.ticketingTemplateService.ServiceAdd(this.dataModel).subscribe({next:i=>{this.formInfo.formSubmitAllow=!0,this.dataModelResult=i,i.isSuccess?(this.translate.get("MESSAGE.registration_completed_successfully").subscribe(e=>{this.formInfo.formAlert=e}),this.cmsToastrService.typeSuccessAdd(),this.dialogRef.close({dialogChangedDate:!0})):(this.translate.get("ERRORMESSAGE.MESSAGE.typeError").subscribe(e=>{this.formInfo.formAlert=e}),this.formInfo.formError=i.errorMessage,this.cmsToastrService.typeErrorMessage(i.errorMessage)),this.publicHelper.processService.processStop(t)},error:i=>{this.formInfo.formSubmitAllow=!0,this.cmsToastrService.typeError(i),this.publicHelper.processService.processStop(t)}})}onActionSelectorSelect(t){if(!t||t.id<=0){let i=this.translate.instant("MESSAGE.Information_department_is_not_clear");this.cmsToastrService.typeErrorSelected(i);return}this.dataModel.linkTicketingDepartemenId=t.id}onFormSubmit(){this.formGroup.valid&&(this.formInfo.formSubmitAllow=!1,this.DataAddContent())}onFormCancel(){this.dialogRef.close({dialogChangedDate:!1})}};s.\u0275fac=function(i){return new(i||s)(g(he),g(pe),g(X),g(Dt),g(N),g(L),g(O),g(P))},s.\u0275cmp=F({type:s,selectors:[["app-ticketing-template-add"]],viewQuery:function(i,e){if(i&1&&ne(sc,5),i&2){let c;oe(c=re())&&(e.formGroup=c.first)}},features:[z],decls:16,vars:13,consts:[["vform","ngForm"],["Title",""],["HtmlBody",""],[1,"card","card-style","progressOverlayContainer"],[3,"optionsInfoAreaId"],[1,"content","mb-0"],[1,"mb-0","color-highlight","font-600","font-12"],[3,"ngSubmit"],[3,"model","optionDisabled","optionLabel","optionRequired","optionSelectFirstItem","modelChange",4,"ngIf"],[3,"optionChange","optionSelectForce","optionPlaceholder"],["class","input-style has-borders no-icon input-style-always-active validate-field mb-4",4,"ngIf"],["class","form-actions",4,"ngIf"],[3,"modelChange","model","optionDisabled","optionLabel","optionRequired","optionSelectFirstItem"],[1,"input-style","has-borders","no-icon","input-style-always-active","validate-field","mb-4"],["for","dataModel.title",1,"color-highlight"],["matInput","","type","text","name","dataModel.title","type","text","minlength","3","maxlength","100","required","","id","dataModel.title",1,"form-control","validate-name",3,"ngModelChange","ngModel","placeholder"],["class","fa fa-times  invalid color-red-dark",4,"ngIf"],["class","fa fa-check  valid color-green-dark",4,"ngIf"],[4,"ngIf"],[1,"fa","fa-times","invalid","color-red-dark"],[1,"fa","fa-check","valid","color-green-dark"],["for","dataModel.htmlBody",1,"color-highlight"],["matInput","","name","dataModel.htmlBody","type","text","minlength","1","maxlength","2000","rows","7","id","dataModel.htmlBody",1,"form-control","validate-name",3,"ngModelChange","ngModel","disabled","placeholder"],[1,"form-actions"],["type","button",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-gray",3,"click"],[1,"ft-x"],["type","submit",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-green",3,"disabled"],[1,"fa","fa-check-square-o"]],template:function(i,e){if(i&1){let c=M();l(0,"div",3),I(1,"app-progress-spinner",4),l(2,"div",5)(3,"p",6),p(4),a(),l(5,"p"),p(6),S(7,"translate"),a(),l(8,"form",7,0),b("ngSubmit",function(){return f(c),h(e.onFormSubmit())}),v(10,cc,1,5,"app-cms-enum-record-status-selector",8),l(11,"app-ticketing-departemen-selector",9),S(12,"translate"),b("optionChange",function(d){return f(c),h(e.onActionSelectorSelect(d))}),a(),v(13,uc,10,7,"div",10)(14,hc,11,10,"div",10)(15,gc,9,7,"div",11),a()()()}i&2&&(r(),m("optionsInfoAreaId",e.constructor.name),r(3),C(" ",e.formInfo.formTitle," "),r(2),C(" ",T(7,9,"TITLE.Be_Careful_When_Entering_Information")," "),r(4),m("ngIf",e.fieldsInfo.recordStatus==null?null:e.fieldsInfo.recordStatus.accessWatchField),r(),m("optionSelectForce",e.dataModel.linkTicketingDepartemenId)("optionPlaceholder",T(12,11,"TITLE.Department")),r(2),m("ngIf",e.fieldsInfo.title==null?null:e.fieldsInfo.title.accessWatchField),r(),m("ngIf",e.fieldsInfo.htmlBody==null?null:e.fieldsInfo.htmlBody.accessWatchField),r(),m("ngIf",e.formInfo.formSubmitAllow))},dependencies:[G,Ce,ae,q,_e,we,Te,Ie,U,Se,Ae,K,ge,Q,Pe,H]});let n=s;return n})();var _c=["vform"];function Sc(n,s){if(n&1){let o=M();l(0,"app-cms-enum-record-status-selector",12),x("modelChange",function(i){f(o);let e=u();return A(e.dataModel.recordStatus,i)||(e.dataModel.recordStatus=i),h(i)}),a()}if(n&2){let o=u();y("model",o.dataModel.recordStatus),m("optionDisabled",!1)("optionLabel",o.fieldsInfo.recordStatus==null?null:o.fieldsInfo.recordStatus.fieldTitle)("optionRequired",!0)("optionSelectFirstItem",!0)}}function Cc(n,s){n&1&&I(0,"i",19)}function Tc(n,s){n&1&&I(0,"i",20)}function Ic(n,s){if(n&1&&(l(0,"mat-error"),p(1),l(2,"strong"),p(3),S(4,"translate"),a()()),n&2){let o=u(2);r(),C(" ",o.fieldsInfo.title==null?null:o.fieldsInfo.title.fieldTitle," is "),r(2),w(T(4,2,"MESSAGE.required"))}}function vc(n,s){if(n&1){let o=M();l(0,"div",13)(1,"label",14),p(2),a(),l(3,"input",15,1),x("ngModelChange",function(i){f(o);let e=u();return A(e.dataModel.title,i)||(e.dataModel.title=i),h(i)}),a(),v(5,Cc,1,0,"i",16)(6,Tc,1,0,"i",17),l(7,"em"),p(8),a(),v(9,Ic,5,4,"mat-error",18),a()}if(n&2){let o=D(4),t=u();r(2),w(t.fieldsInfo.title==null?null:t.fieldsInfo.title.fieldTitle),r(),R("placeholder",t.fieldsInfo.title==null?null:t.fieldsInfo.title.fieldTitle),y("ngModel",t.dataModel.title),r(2),m("ngIf",!o.value),r(),m("ngIf",o.value),r(2),C("",o.value.length," / 100"),r(),m("ngIf",o.errors==null?null:o.errors.required)}}function bc(n,s){if(n&1&&(l(0,"mat-error"),p(1),l(2,"strong"),p(3),S(4,"translate"),a()()),n&2){let o=u(2);r(),C(" ",o.fieldsInfo.htmlBody==null?null:o.fieldsInfo.htmlBody.fieldTitle," "),r(2),w(T(4,2,"MESSAGE.required"))}}function wc(n,s){if(n&1){let o=M();l(0,"div",13)(1,"label",21),p(2),S(3,"translate"),a(),l(4,"textarea",22,2),S(6,"translate"),x("ngModelChange",function(i){f(o);let e=u();return A(e.dataModel.htmlBody,i)||(e.dataModel.htmlBody=i),h(i)}),p(7,"                "),a(),l(8,"em"),p(9),a(),v(10,bc,5,4,"mat-error",18),a()}if(n&2){let o=D(5),t=u();r(2),w(T(3,6,"TITLE.Description")),r(2),R("disabled",!(t.fieldsInfo.htmlBody!=null&&t.fieldsInfo.htmlBody.accessAddField)),R("placeholder",T(6,8,"TITLE.Answer_Text")),y("ngModel",t.dataModel.htmlBody),r(5),C("",o.value.length," / 2000"),r(),m("ngIf",o.errors==null?null:o.errors.required)}}function Mc(n,s){if(n&1){let o=M();l(0,"div",23)(1,"button",24),b("click",function(){f(o);let i=u();return h(i.onFormCancel())}),I(2,"i",25),p(3),S(4,"translate"),a(),l(5,"button",26),I(6,"i",27),p(7),S(8,"translate"),a()()}if(n&2){u();let o=D(9);r(3),C(" ",T(4,3,"ACTION.CANCEL")," "),r(2),m("disabled",!o.form.valid),r(2),C(" ",T(8,5,"ACTION.SAVE")," ")}}var Yn=(()=>{let s=class s extends It{constructor(t,i,e,c,_,d,V,B){super(c,new ut,d,B),this.data=t,this.dialogRef=i,this.coreEnumService=e,this.ticketingTemplateService=c,this.cmsToastrService=_,this.publicHelper=d,this.cdr=V,this.translate=B,this.requestId=0,this.selectFileTypeMainImage=["jpg","jpeg","png"],this.appLanguage="fa",this.formMatcher=new Ht,this.dataModelResult=new St,this.dataModel=new ut,this.dataFileModel=new Map,this.formInfo=new le,this.publicHelper.processService.cdr=this.cdr,t&&(this.requestId=+t.id||0),this.fileManagerTree=this.publicHelper.GetfileManagerTreeConfig()}ngOnInit(){if(this.requestId>0)this.formInfo.formTitle=this.translate.instant("TITLE.Edit_Categories"),this.DataGetOneContent();else{this.cmsToastrService.typeErrorComponentAction(),this.dialogRef.close({dialogChangedDate:!1});return}}DataGetOneContent(){if(this.requestId<=0){this.cmsToastrService.typeErrorEditRowIsNull();return}this.translate.get("MESSAGE.Receiving_Information_From_The_Server").subscribe(i=>{this.formInfo.formAlert=i}),this.formInfo.formError="";let t=this.constructor.name+"main";this.translate.get("MESSAGE.Receiving_information").subscribe(i=>{this.publicHelper.processService.processStart(t,i,this.constructor.name)}),this.ticketingTemplateService.setAccessLoad(),this.ticketingTemplateService.setAccessDataType(_t.Editor),this.ticketingTemplateService.ServiceGetOneById(this.requestId).subscribe({next:i=>{this.fieldsInfo=this.publicHelper.fieldInfoConvertor(i.access),this.dataModel=i.item,i.isSuccess?(this.formInfo.formTitle=this.formInfo.formTitle+" "+i.item.title,this.formInfo.formAlert=""):(this.translate.get("ERRORMESSAGE.MESSAGE.typeError").subscribe(e=>{this.formInfo.formAlert=e}),this.formInfo.formError=i.errorMessage,this.cmsToastrService.typeErrorMessage(i.errorMessage)),this.publicHelper.processService.processStop(t)},error:i=>{this.cmsToastrService.typeError(i),this.publicHelper.processService.processStop(t)}})}DataEditContent(){this.translate.get("MESSAGE.sending_information_to_the_server").subscribe(i=>{this.formInfo.formAlert=i}),this.formInfo.formError="";let t=this.constructor.name+"main";this.translate.get("MESSAGE.sending_information_to_the_server").subscribe(i=>{this.publicHelper.processService.processStart(t,i,this.constructor.name)}),this.ticketingTemplateService.ServiceEdit(this.dataModel).subscribe({next:i=>{this.formInfo.formSubmitAllow=!0,this.dataModelResult=i,i.isSuccess?(this.translate.get("MESSAGE.registration_completed_successfully").subscribe(e=>{this.formInfo.formAlert=e}),this.cmsToastrService.typeSuccessEdit(),this.dialogRef.close({dialogChangedDate:!0})):(this.translate.get("ERRORMESSAGE.MESSAGE.typeError").subscribe(e=>{this.formInfo.formAlert=e}),this.formInfo.formError=i.errorMessage,this.cmsToastrService.typeErrorMessage(i.errorMessage)),this.publicHelper.processService.processStop(t)},error:i=>{this.formInfo.formSubmitAllow=!0,this.cmsToastrService.typeError(i),this.publicHelper.processService.processStop(t)}})}onActionSelectorSelect(t){if(!t||t.id<=0){let i=this.translate.instant("MESSAGE.Information_department_is_not_clear");this.cmsToastrService.typeErrorSelected(i);return}this.dataModel.linkTicketingDepartemenId=t.id}onFormSubmit(){this.formGroup.valid&&(this.formInfo.formSubmitAllow=!1,this.DataEditContent())}onFormCancel(){this.dialogRef.close({dialogChangedDate:!1})}};s.\u0275fac=function(i){return new(i||s)(g(he),g(pe),g(X),g(Dt),g(N),g(L),g(O),g(P))},s.\u0275cmp=F({type:s,selectors:[["app-ticketing-template-add"]],viewQuery:function(i,e){if(i&1&&ne(_c,5),i&2){let c;oe(c=re())&&(e.formGroup=c.first)}},features:[z],decls:16,vars:13,consts:[["vform","ngForm"],["Title",""],["HtmlBody",""],[1,"card","card-style","progressOverlayContainer"],[3,"optionsInfoAreaId"],[1,"content","mb-0"],[1,"mb-0","color-highlight","font-600","font-12"],[3,"ngSubmit"],[3,"model","optionDisabled","optionLabel","optionRequired","optionSelectFirstItem","modelChange",4,"ngIf"],[3,"optionChange","optionSelectForce","optionPlaceholder"],["class","input-style has-borders no-icon input-style-always-active validate-field mb-4",4,"ngIf"],["class","form-actions",4,"ngIf"],[3,"modelChange","model","optionDisabled","optionLabel","optionRequired","optionSelectFirstItem"],[1,"input-style","has-borders","no-icon","input-style-always-active","validate-field","mb-4"],["for","dataModel.title",1,"color-highlight"],["matInput","","type","text","name","dataModel.title","type","text","minlength","3","maxlength","100","required","","id","dataModel.title",1,"form-control","validate-name",3,"ngModelChange","ngModel","placeholder"],["class","fa fa-times  invalid color-red-dark",4,"ngIf"],["class","fa fa-check  valid color-green-dark",4,"ngIf"],[4,"ngIf"],[1,"fa","fa-times","invalid","color-red-dark"],[1,"fa","fa-check","valid","color-green-dark"],["for","dataModel.htmlBody",1,"color-highlight"],["matInput","","name","dataModel.htmlBody","type","text","minlength","1","maxlength","2000","rows","7","id","dataModel.htmlBody",1,"form-control","validate-name",3,"ngModelChange","ngModel","disabled","placeholder"],[1,"form-actions"],["type","button",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-gray",3,"click"],[1,"ft-x"],["type","submit",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-green",3,"disabled"],[1,"fa","fa-check-square-o"]],template:function(i,e){if(i&1){let c=M();l(0,"div",3),I(1,"app-progress-spinner",4),l(2,"div",5)(3,"p",6),p(4),a(),l(5,"p"),p(6),S(7,"translate"),a(),l(8,"form",7,0),b("ngSubmit",function(){return f(c),h(e.onFormSubmit())}),v(10,Sc,1,5,"app-cms-enum-record-status-selector",8),l(11,"app-ticketing-departemen-selector",9),S(12,"translate"),b("optionChange",function(d){return f(c),h(e.onActionSelectorSelect(d))}),a(),v(13,vc,10,7,"div",10)(14,wc,11,10,"div",10)(15,Mc,9,7,"div",11),a()()()}i&2&&(r(),m("optionsInfoAreaId",e.constructor.name),r(3),C(" ",e.formInfo.formTitle," "),r(2),C(" ",T(7,9,"TITLE.Be_Careful_When_Entering_Information")," "),r(4),m("ngIf",e.fieldsInfo.recordStatus==null?null:e.fieldsInfo.recordStatus.accessWatchField),r(),m("optionSelectForce",e.dataModel.linkTicketingDepartemenId)("optionPlaceholder",T(12,11,"TITLE.Department")),r(2),m("ngIf",e.fieldsInfo.title==null?null:e.fieldsInfo.title.accessWatchField),r(),m("ngIf",e.fieldsInfo.htmlBody==null?null:e.fieldsInfo.htmlBody.accessWatchField),r(),m("ngIf",e.formInfo.formSubmitAllow))},dependencies:[G,Ce,ae,q,_e,we,Te,Ie,U,Se,Ae,K,ge,Q,Pe,H]});let n=s;return n})();var kc=()=>[5,10,20,100],Ec=n=>({display:n});function yc(n,s){if(n&1){let o=M();l(0,"a",39),b("click",function(){f(o);let i=u();return h(i.onActionBackToParent())}),I(1,"i",40),a()}}function Ac(n,s){if(n&1){let o=M();l(0,"div",41)(1,"a",42),b("click",function(){f(o);let i=u();return h(i.onActionButtonNewRow())}),I(2,"i",43)(3,"br"),a(),l(4,"p",44),p(5),S(6,"translate"),a()()}n&2&&(r(5),w(T(6,1,"ACTION.ADD")))}function xc(n,s){if(n&1){let o=M();l(0,"div",41)(1,"a",45),b("click",function(){f(o);let i=u();return h(i.onActionButtonEditRow(i.tableRowSelected))}),I(2,"i",46)(3,"br"),a(),l(4,"p",44),p(5),S(6,"translate"),a()()}n&2&&(r(5),w(T(6,1,"ACTION.EDIT")))}function Dc(n,s){if(n&1){let o=M();l(0,"div",41)(1,"a",47),b("click",function(){f(o);let i=u();return h(i.onActionButtonDeleteRow(i.tableRowSelected))}),I(2,"i",48)(3,"br"),a(),l(4,"p",44),p(5),S(6,"translate"),a()()}n&2&&(r(5),w(T(6,1,"ACTION.DELETE")))}function Rc(n,s){if(n&1&&(l(0,"mat-header-cell",49),p(1),a()),n&2){let o=u();r(),C(" ",o.fieldsInfo.id==null?null:o.fieldsInfo.id.fieldTitle," ")}}function Lc(n,s){if(n&1&&(l(0,"mat-cell"),p(1),a()),n&2){let o=s.$implicit;r(),C(" ",o.id," ")}}function Vc(n,s){if(n&1&&(l(0,"mat-header-cell",49),p(1),a()),n&2){let o=u();r(),C(" ",o.fieldsInfo.linkSiteId==null?null:o.fieldsInfo.linkSiteId.fieldTitle," ")}}function Bc(n,s){if(n&1&&(l(0,"mat-cell"),p(1),S(2,"cmssiteinfo"),S(3,"async"),a()),n&2){let o=s.$implicit;r(),C(" ",T(3,3,T(2,1,o.linkSiteId))," ")}}function Fc(n,s){if(n&1&&(l(0,"mat-header-cell",49),p(1),a()),n&2){let o=u();r(),C(" ",o.fieldsInfo.recordStatus==null?null:o.fieldsInfo.recordStatus.fieldTitle," ")}}function Nc(n,s){if(n&1&&I(0,"select",52),n&2){let o=u().$implicit,t=u();m("contentService",t.contentService)("row",o)("ngStyle",Ke(3,Ec,o.id===(t.tableRowSelected==null?null:t.tableRowSelected.id)?"":"none"))}}function Oc(n,s){if(n&1&&(l(0,"mat-cell",50),S(1,"statusCellClass"),I(2,"i",50),S(3,"statusIconClass"),v(4,Nc,1,5,"select",51),a()),n&2){let o=s.$implicit,t=u();m("ngClass",T(1,3,o.recordStatus)),r(2),m("ngClass",T(3,5,o.recordStatus)),r(2),m("ngIf",t.dataModelResult==null||t.dataModelResult.access==null?null:t.dataModelResult.access.accessEditRow)}}function Gc(n,s){if(n&1&&(l(0,"mat-header-cell",49),p(1),a()),n&2){let o=u();r(),C(" ",o.fieldsInfo.title==null?null:o.fieldsInfo.title.fieldTitle," ")}}function Pc(n,s){if(n&1&&(l(0,"mat-cell"),p(1),a()),n&2){let o=s.$implicit;r(),C(" ",o.title," ")}}function Hc(n,s){n&1&&(l(0,"mat-header-cell"),p(1),S(2,"translate"),a()),n&2&&(r(),C(" ",T(2,1,"TITLE.OPTION")," "))}function qc(n,s){if(n&1&&(l(0,"mat-cell",53)(1,"button",54)(2,"mat-icon"),p(3,"more_vert"),a()(),I(4,"mat-menu",null,2),a()),n&2){let o=D(5);r(),m("matMenuTriggerFor",o)}}function Wc(n,s){n&1&&I(0,"mat-header-row")}function jc(n,s){if(n&1){let o=M();l(0,"mat-row",55),b("click",function(){let i=f(o).$implicit,e=u();return h(e.onActionTableRowSelect(i))}),a()}if(n&2){let o=s.$implicit,t=s.dataIndex,i=u();Ee("ntk-row-odd",t%2)("ntk-row-even",!(t%2))("ntk-row-selected",o.id===(i.tableRowSelected==null?null:i.tableRowSelected.id))}}var rn=(()=>{let s=class s extends Ue{constructor(t,i,e,c,_,d,V,B,Y,te,Re){super(t,new ut,te,d,B),this.contentService=t,this.activatedRoute=i,this.cmsToastrService=e,this.cmsConfirmationDialogService=c,this.router=_,this.tokenHelper=d,this.cdr=V,this.translate=B,this.pageInfo=Y,this.publicHelper=te,this.dialog=Re,this.requestDepartemenId=0,this.flag=!1,this.tableContentSelected=[],this.filteModelContent=new $,this.tabledisplayedColumns=[],this.tabledisplayedColumnsSource=["Id","RecordStatus"],this.tabledisplayedColumnsMobileSource=["Id","RecordStatus"],this.publicHelper.processService.cdr=this.cdr,this.optionsSearch.parentMethods={onSubmit:jt=>this.onSubmitOptionsSearch(jt)},this.filteModelContent.sortColumn="Id",this.filteModelContent.sortType=j.Descending}ngOnInit(){this.requestDepartemenId=+Number(this.activatedRoute.snapshot.paramMap.get("DepartemenId")),this.tokenHelper.getCurrentToken().then(t=>{this.tokenInfo=t,this.DataGetAll()}),this.cmsApiStoreSubscribe=this.tokenHelper.getCurrentTokenOnChange().subscribe({next:t=>{this.tokenInfo=t,this.DataGetAll()}})}ngOnDestroy(){this.cmsApiStoreSubscribe.unsubscribe()}DataGetAll(){this.tabledisplayedColumns=this.publicHelper.TableDisplayedColumns(this.tabledisplayedColumnsSource,this.tabledisplayedColumnsMobileSource,[],this.tokenInfo),this.tableRowsSelected=[],this.onActionTableRowSelect(new ut);let t=this.constructor.name+"main";this.translate.get("MESSAGE.get_information_list").subscribe(c=>{this.publicHelper.processService.processStart(t,c,this.constructor.name)}),this.filteModelContent.accessLoad=!0;let i=JSON.parse(JSON.stringify(this.filteModelContent)),e=new Z;this.requestDepartemenId>0&&(e.propertyName="LinkTicketingDepartemenId",e.value=this.requestDepartemenId,i.filters.push(e)),this.categoryModelSelected&&this.categoryModelSelected.id>0&&(e.propertyName="LinkTicketingDepartemenId",e.value=this.categoryModelSelected.id,i.filters.push(e)),this.contentService.ServiceGetAllEditor(i).subscribe({next:c=>{this.fieldsInfo=this.publicHelper.fieldInfoConvertor(c.access),c.isSuccess?(this.dataModelResult=c,this.tableSource.data=c.listItems,this.optionsStatist?.data?.show&&this.onActionButtonStatist(!0),this.optionsSearch.childMethods&&this.optionsSearch.childMethods.setAccess(c.access)):this.cmsToastrService.typeErrorGetAll(c.errorMessage),this.publicHelper.processService.processStop(t)},error:c=>{this.cmsToastrService.typeError(c),this.publicHelper.processService.processStop(t)}})}onTableSortData(t){this.tableSource&&this.tableSource.sort&&this.tableSource.sort.active===t.active?this.tableSource.sort.start==="asc"?(t.start="desc",this.filteModelContent.sortColumn=t.active,this.filteModelContent.sortType=j.Descending):this.tableSource.sort.start==="desc"?(t.start="asc",this.filteModelContent.sortColumn="",this.filteModelContent.sortType=j.Ascending):t.start="desc":(this.filteModelContent.sortColumn=t.active,this.filteModelContent.sortType=j.Descending),this.tableSource.sort=t,this.filteModelContent.currentPageNumber=0,this.DataGetAll()}onTablePageingData(t){this.filteModelContent.currentPageNumber=t.pageIndex+1,this.filteModelContent.rowPerPage=t.pageSize,this.DataGetAll()}onActionButtonNewRow(){if(this.categoryModelSelected==null&&this.categoryModelSelected&&this.categoryModelSelected.id===0&&(this.requestDepartemenId==null||this.requestDepartemenId===0)){this.translate.get("MESSAGE.Content_not_selected").subscribe(c=>{this.cmsToastrService.typeErrorSelected(c)});return}if(this.dataModelResult==null||this.dataModelResult.access==null||!this.dataModelResult.access.accessAddRow){this.cmsToastrService.typeErrorAccessAdd();return}let t=this.requestDepartemenId;this.categoryModelSelected&&this.categoryModelSelected.id>0&&(t=this.categoryModelSelected.id);var i="";this.tokenHelper.isMobile?i="dialog-fullscreen":i="dialog-min",this.dialog.open(Xn,{height:"90%",panelClass:i,enterAnimationDuration:W.cmsViewConfig.enterAnimationDuration,exitAnimationDuration:W.cmsViewConfig.exitAnimationDuration,data:{parentId:t}}).afterClosed().subscribe(c=>{c&&c.dialogChangedDate&&this.DataGetAll()})}onActionSelectorSelect(t){var i=this.filteModelContent.sortColumn,e=this.filteModelContent.sortType;this.filteModelContent=new $,this.filteModelContent.sortColumn=i,this.filteModelContent.sortType=e,this.categoryModelSelected=t,this.DataGetAll()}onActionButtonEditRow(t=this.tableRowSelected){if(!t||!t.id||t.id===0){this.cmsToastrService.typeErrorSelectedRow();return}if(this.tableRowSelected=t,this.dataModelResult==null||this.dataModelResult.access==null||!this.dataModelResult.access.accessEditRow){this.cmsToastrService.typeErrorAccessEdit();return}var i="";this.tokenHelper.isMobile?i="dialog-fullscreen":i="dialog-min",this.dialog.open(Yn,{height:"90%",panelClass:i,enterAnimationDuration:W.cmsViewConfig.enterAnimationDuration,exitAnimationDuration:W.cmsViewConfig.exitAnimationDuration,data:{id:this.tableRowSelected.id}}).afterClosed().subscribe(c=>{c&&c.dialogChangedDate&&this.DataGetAll()})}onActionButtonDeleteRow(t=this.tableRowSelected){if(t==null||!t.id||t.id===0){let c=this.translate.instant("MESSAGE.No_row_selected_for_editing");this.cmsToastrService.typeErrorSelected(c);return}if(this.tableRowSelected=t,this.dataModelResult==null||this.dataModelResult.access==null||!this.dataModelResult.access.accessDeleteRow){this.cmsToastrService.typeErrorAccessDelete();return}var i="",e="";this.translate.get(["MESSAGE.Please_Confirm","MESSAGE.Do_you_want_to_delete_this_content"]).subscribe(c=>{i=c["MESSAGE.Please_Confirm"],e=c["MESSAGE.Do_you_want_to_delete_this_content"]+"?<br> ( "+this.tableRowSelected.title+" ) "}),this.cmsConfirmationDialogService.confirm(i,e).then(c=>{if(c){let _=this.constructor.name+"main";this.translate.get("MESSAGE.Receiving_information").subscribe(d=>{this.publicHelper.processService.processStart(_,d,this.constructor.name)}),this.contentService.ServiceDelete(this.tableRowSelected.id).subscribe({next:d=>{d.isSuccess?this.cmsToastrService.typeSuccessRemove():this.cmsToastrService.typeErrorRemove(),this.publicHelper.processService.processStop(_)},error:d=>{this.cmsToastrService.typeError(d),this.publicHelper.processService.processStop(_)}})}}).catch(()=>{})}onActionButtonStatist(t=!this.optionsStatist.data.show){if(this.optionsStatist.data.show=t,!this.optionsStatist.data.show)return;let i=new Map;this.translate.get("MESSAGE.Active").subscribe(d=>{i.set(d,0)}),this.translate.get("MESSAGE.All").subscribe(d=>{i.set(d,0)});let e=this.constructor.name+".ServiceStatist";this.translate.get("MESSAGE.Get_the_statist").subscribe(d=>{this.publicHelper.processService.processStart(e,d,this.constructor.name)}),this.contentService.ServiceGetCount(this.filteModelContent).subscribe({next:d=>{d.isSuccess&&(i.set("All",d.totalRowCount),this.optionsStatist.childMethods.setStatistValue(i)),this.publicHelper.processService.processStop(e)},error:d=>{this.cmsToastrService.typeError(d),this.publicHelper.processService.processStop(e)}});let c=JSON.parse(JSON.stringify(this.filteModelContent)),_=new Z;_.propertyName="RecordStatus",_.value=Xe.Available,c.filters.push(_),this.contentService.ServiceGetCount(c).subscribe({next:d=>{d.isSuccess&&(i.set("Active",d.totalRowCount),this.optionsStatist.childMethods.setStatistValue(i)),this.publicHelper.processService.processStop(e)},error:d=>{this.cmsToastrService.typeError(d),this.publicHelper.processService.processStop(e)}})}onActionButtonReload(){this.DataGetAll()}onSubmitOptionsSearch(t){this.filteModelContent.filters=t,this.DataGetAll()}onActionBackToParent(){this.router.navigate(["/ticketing/departemen/"])}};s.\u0275fac=function(i){return new(i||s)(g(Dt),g(ve),g(N),g(Rt),g(de),g(ie),g(O),g(P),g(He),g(L),g(xe))},s.\u0275cmp=F({type:s,selectors:[["app-application-app-list"]],features:[z],decls:52,vars:29,consts:[["tableSort","matSort"],["paginator",""],["actionMenu","matMenu"],[3,"optionActionGuideNoticeDisplayChange","optionOnActionButtonMemoRow","optionOnActionButtonMemo","optionOnActionButtonExport","optionOnActionButtonPrintRow","optionsListInfoAreaId","optionGuideNoticeKey","optionActionGuideNoticeDisplay","optionTreeDisplay","optionActionRowId","optionActionRowDisplayMenu","optionSelectRowItemTitle"],["cms-tree",""],[3,"optionChange"],["cms-header",""],["cms-action-header",""],[1,"d-flex","justify-content-between","flex-wrap"],[1,"justify-content-end"],["target","_blank",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-highlight"],[3,"ngModelChange","ngModel"],[3,"click","ngModelChange","ngModel"],[1,"justify-content-start"],["type","button","class","btn font-13 font-600 btn-s m-1 rounded-s shadow-xl border-0 gradient-gray","target","_blank",3,"click",4,"ngIf"],["type","button","target","_blank",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-highlight",3,"click"],[1,"fa-solid","fa-info","font-18",2,"color","#ffffff"],[1,"fa-solid","fa-rotate-right","font-18",2,"color","#ffffff"],["cms-action-main",""],["class","col-4",4,"ngIf"],["cms-action-row",""],["cms-action-area",""],[3,"optionsChange","options"],["cms-body",""],["matSort","",3,"matSortChange","dataSource"],["matColumnDef","Id"],["mat-sort-header","",4,"matHeaderCellDef"],[4,"matCellDef"],["matColumnDef","LinkSiteId"],["matColumnDef","RecordStatus"],[3,"ngClass",4,"matCellDef"],["matColumnDef","Title"],["matColumnDef","Action"],[4,"matHeaderCellDef"],["class"," Action",4,"matCellDef"],[4,"matHeaderRowDef"],[3,"ntk-row-odd","ntk-row-even","ntk-row-selected","click",4,"matRowDef","matRowDefColumns"],["cms-footer",""],[3,"page","length","pageIndex","pageSize","pageSizeOptions"],["type","button","target","_blank",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-gray",3,"click"],[1,"fa-solid","fa-arrow-left","font-18",2,"color","#ffffff"],[1,"col-4"],["type","button","target","_blank",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-teal",3,"click"],[1,"fa-solid","fa-plus","font-18",2,"color","#FFFFFF"],[1,"font-11","text-center","opacity-70"],["target","_blank",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-magenta",3,"click"],[1,"fa-solid","fa-pen","font-18",2,"color","#FFFFFF"],["target","_blank",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-red",3,"click"],[1,"fa-solid","fa-trash","font-18",2,"color","#ffffff"],["mat-sort-header",""],[3,"ngClass"],["matNativeControl","","cmsRecordStatusSelfSave","","style","background: none; border: none;",3,"contentService","row","ngStyle",4,"ngIf"],["matNativeControl","","cmsRecordStatusSelfSave","",2,"background","none","border","none",3,"contentService","row","ngStyle"],[1,"Action"],["type","button","mat-icon-button","","aria-label","Action Menu",3,"matMenuTriggerFor"],[3,"click"]],template:function(i,e){if(i&1){let c=M();l(0,"app-cms-html-list",3),x("optionActionGuideNoticeDisplayChange",function(d){return f(c),A(e.viewGuideNotice,d)||(e.viewGuideNotice=d),h(d)}),b("optionOnActionButtonMemoRow",function(){return f(c),h(e.onActionButtonMemoRow())})("optionOnActionButtonMemo",function(){return f(c),h(e.onActionButtonMemo())})("optionOnActionButtonExport",function(){return f(c),h(e.onActionButtonExport())})("optionOnActionButtonPrintRow",function(){return f(c),h(e.onActionButtonPrintRow())}),k(1,4),l(2,"app-ticketing-departemen-tree",5),b("optionChange",function(d){return f(c),h(e.onActionSelectorSelect(d))}),a(),E(),ye(3,6),k(4,7),l(5,"div",8)(6,"div",9)(7,"a",10)(8,"mat-slide-toggle",11),x("ngModelChange",function(d){return f(c),A(e.optionsSearch.data.show,d)||(e.optionsSearch.data.show=d),h(d)}),a(),p(9),S(10,"translate"),a(),l(11,"a",10)(12,"mat-slide-toggle",12),b("click",function(){return f(c),h(e.onActionButtonStatist())}),x("ngModelChange",function(d){return f(c),A(e.optionsStatist.data.show,d)||(e.optionsStatist.data.show=d),h(d)}),a(),p(13),S(14,"translate"),a()(),l(15,"div",13),v(16,yc,2,0,"a",14),l(17,"a",15),b("click",function(){return f(c),h(e.viewGuideNotice=!e.viewGuideNotice)}),I(18,"i",16),a(),l(19,"a",15),b("click",function(){return f(c),h(e.onActionButtonReload())}),I(20,"i",17),a()()(),E(),k(21,18),v(22,Ac,7,3,"div",19),E(),k(23,20),v(24,xc,7,3,"div",19)(25,Dc,7,3,"div",19),E(),k(26,21),l(27,"app-cms-search-list",22),x("optionsChange",function(d){return f(c),A(e.optionsSearch,d)||(e.optionsSearch=d),h(d)}),a(),l(28,"app-cms-statist-list",22),x("optionsChange",function(d){return f(c),A(e.optionsStatist,d)||(e.optionsStatist=d),h(d)}),a(),E(),k(29,23),l(30,"mat-table",24,0),b("matSortChange",function(){f(c);let d=D(31);return h(e.onTableSortData(d))}),k(32,25),v(33,Rc,2,1,"mat-header-cell",26)(34,Lc,2,1,"mat-cell",27),E(),k(35,28),v(36,Vc,2,1,"mat-header-cell",26)(37,Bc,4,5,"mat-cell",27),E(),k(38,29),v(39,Fc,2,1,"mat-header-cell",26)(40,Oc,5,7,"mat-cell",30),E(),k(41,31),v(42,Gc,2,1,"mat-header-cell",26)(43,Pc,2,1,"mat-cell",27),E(),k(44,32),v(45,Hc,3,3,"mat-header-cell",33)(46,qc,6,1,"mat-cell",34),E(),v(47,Wc,1,0,"mat-header-row",35)(48,jc,1,6,"mat-row",36),a(),E(),k(49,37),l(50,"mat-paginator",38,1),b("page",function(d){return f(c),h(e.onTablePageingData(d))}),a(),E(),a()}i&2&&(m("optionsListInfoAreaId",e.constructor.name)("optionGuideNoticeKey",""),y("optionActionGuideNoticeDisplay",e.viewGuideNotice),m("optionTreeDisplay",e.requestDepartemenId===0)("optionActionRowId",e.tableRowSelected==null?null:e.tableRowSelected.id)("optionActionRowDisplayMenu",e.tableRowSelectDoubleClick)("optionSelectRowItemTitle",(e.tableRowSelected==null||e.tableRowSelected.title==null?null:e.tableRowSelected.title.length)>0?e.tableRowSelected==null?null:e.tableRowSelected.title:e.tableRowSelected==null?null:e.tableRowSelected.id),r(8),y("ngModel",e.optionsSearch.data.show),r(),C("",T(10,24,"ACTION.SEARCH")," "),r(3),y("ngModel",e.optionsStatist.data.show),r(),C(" ",T(14,26,"ACTION.STATIST")," "),r(3),m("ngIf",e.requestDepartemenId>0),r(6),m("ngIf",e.dataModelResult==null||e.dataModelResult.access==null?null:e.dataModelResult.access.accessAddRow),r(2),m("ngIf",e.dataModelResult==null||e.dataModelResult.access==null?null:e.dataModelResult.access.accessEditRow),r(),m("ngIf",e.dataModelResult==null||e.dataModelResult.access==null?null:e.dataModelResult.access.accessDeleteRow),r(2),y("options",e.optionsSearch),r(),y("options",e.optionsStatist),r(2),m("dataSource",e.tableSource),r(17),m("matHeaderRowDef",e.tabledisplayedColumns),r(),m("matRowDefColumns",e.tabledisplayedColumns),r(2),m("length",e.dataModelResult.totalRowCount)("pageIndex",e.dataModelResult.currentPageNumber-1)("pageSize",e.dataModelResult.rowPerPage)("pageSizeOptions",ze(28,kc)))},dependencies:[yt,G,Je,q,U,Be,De,K,Ye,Ze,$e,et,tt,it,nt,rt,ct,at,ot,dt,lt,st,pt,mt,We,je,qe,Mt,Ot,Ve,H,ft,Et,kt],encapsulation:2});let n=s;return n})();var Uc=[{path:"",component:Fn,data:{title:"ROUTE.TICKETING"},children:[{path:"config",loadChildren:()=>import("./chunk-Y6MYGQ47.js").then(n=>n.TicketingConfigModule),data:{title:"ROUTE.TICKETING"}},{path:"departemen",component:qn,data:{title:"ROUTE.TICKETING.DEPARTMENT"}},{path:"departemen/add/",component:Yt,data:{title:"ROUTE.TICKETING.DEPARTMENT"}},{path:"departemen/edit/:Id",component:Yt,data:{title:"ROUTE.TICKETING.DEPARTMENT"}},{path:"departemenlog/DepartemenId/:DepartemenId",component:tn,data:{title:"ROUTE.TICKETING.DEPARTMENTLOG"}},{path:"departemenlog/OperatorId/:OperatorId",component:tn,data:{title:"ROUTE.TICKETING.DEPARTMENTLOG"}},{path:"faq",component:Un,data:{title:"ROUTE.TICKETING.FAQ"}},{path:"faq/:DepartemenId",component:nn,data:{title:"ROUTE.TICKETING.FAQ"}},{path:"faq/list",component:nn,data:{title:"ROUTE.TICKETING.LIST"}},{path:"template",component:rn,data:{title:"ROUTE.TICKETING.TEMPLATE"}},{path:"template/:DepartemenId",component:rn,data:{title:"ROUTE.TICKETING.TEMPLATE"}},{path:"contactus",component:zn,data:{title:"ROUTE.TICKETING.CONTACTUS"}},{path:"task",component:fi,data:{title:"ROUTE.TICKETING.TASK"}},{path:"task/listTicketStatus/:TicketStatus",component:fi,data:{title:"ROUTE.TICKETING.TASK"}},{path:"task/contactus-list",component:on,data:{title:"ROUTE.TICKETING.TASK"}},{path:"task/contactus-list/LinkCmsUserId/:LinkCmsUserId",component:on,data:{title:"ROUTE.TICKETING.TASK"}},{path:"task/:DepartemenId",component:fi,data:{title:"ROUTE.TICKETING.TASK"}},{path:"task/LinkCmsUserId/:LinkCmsUserId",component:fi,data:{title:"ROUTE.TICKETING.TASK"}},{path:"answer",component:en,data:{title:"ROUTE.TICKETING.ANSWER"}},{path:"answer/LinkTaskId/:LinkTaskId",component:en,data:{title:"ROUTE.TICKETING.ANSWER"}}]}],Zn=(()=>{let s=class s{};s.\u0275fac=function(i){return new(i||s)},s.\u0275mod=vi({type:s}),s.\u0275inj=Ii({imports:[Xi.forChild(Uc),Xi]});let n=s;return n})();var bu=(()=>{let s=class s{};s.\u0275fac=function(i){return new(i||s)},s.\u0275mod=vi({type:s}),s.\u0275inj=Ii({providers:[un,X,gn,hn,Pt,Fe,Li,_n,Oe,xt,At,Dt,Rt],imports:[ln,Zn,sn,cn.withConfig({warnOnNgModelWithFormControl:"never"}),Vn,Bn,Cn]});let n=s;return n})();export{bu as TicketingModule};
