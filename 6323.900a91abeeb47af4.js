(self.webpackChunkntk_cms_web=self.webpackChunkntk_cms_web||[]).push([[6323],{9081:()=>{window.libpannellum=function(_t,w,m){"use strict";function t(q,gt){var P;q&&((P=w.createElement("canvas")).style.width=P.style.height="100%",q.appendChild(P));var f,i,rt,vt,B,A,ft,ct,xt,ae,Ot,M,nt,N,Nt,bt,mt,Lt,E=["f","b","u","d","l","r"],U=["f","r","b","l","u","d"];function st(c,C){return 1==c.level&&1!=C.level?-1:1==C.level&&1!=c.level?1:C.timestamp-c.timestamp}function ut(c,C){return c.level!=C.level?c.level-C.level:c.diff-C.diff}function Ct(c,C,g,R,F,S,T){this.vertices=c,this.side=C,this.level=g,this.x=R,this.y=F;var V="object"==typeof S?S.tileKey:S;V=V.replace("%s",C).replace("%l0",g-1).replace("%l",g).replace("%x",R).replace("%y",F),this.path="object"==typeof S?S[V]:V,this.parentPath=T}function jt(c,C,g,R,F,S){if(function ie(c,C){var g=ee(c,C.slice(0,3)),R=ee(c,C.slice(3,6)),F=ee(c,C.slice(6,9)),S=ee(c,C.slice(9,12)),T=g[0]+R[0]+F[0]+S[0];if(-4==T||4==T)return!1;var V=g[1]+R[1]+F[1]+S[1];return-4!=V&&4!=V&&4!=g[2]+R[2]+F[2]+S[2]}(c,g.vertices)){for(var T=[],V=[],k=2,Z=[],it=0,W=0;W<4;W++){var pt=$(C,g.vertices.slice(3*W,3*(W+1)));T.push(pt[0]*pt[3]),V.push(pt[1]*pt[3]);var Wt=pt[2]*pt[3];k=Math.min(k,Wt),Z.push(Math.abs(T[W])<=1&&Math.abs(V[W])<=1&&Wt>0),it+=Z[W]}var zt=M.cubeResolution*Math.pow(2,g.level-M.maxLevel),ht=Math.ceil(zt*M.invTileResolution)-1,dt=zt%M.tileResolution*2,Mt=2*zt%M.tileResolution;if(0===Mt&&(Mt=M.tileResolution),0===dt&&(dt=2*M.tileResolution),g.level>1&&k>0&&it>0){var It=0;for(W=0;W<4;W++){var wt=(W+1)%4;if(Z[W]||Z[wt]){var Vt=(T[wt]-T[W])*i.drawingBufferWidth/2,ot=(V[wt]-V[W])*i.drawingBufferHeight/2;Mt<M.tileResolution&&(g.x==ht?Vt*=M.tileResolution/Mt:g.y==ht&&(ot*=M.tileResolution/Mt)),dt<=M.tileResolution&&(g.x==ht&&(Vt*=2),g.y==ht&&(ot*=2)),It=Math.max(It,Math.sqrt(Vt*Vt+ot*ot))}}if(It<=M.tileResolution/2)return}var v=g.vertices,Dt=v[0]+v[3]+v[6]+v[9],Bt=v[1]+v[4]+v[7]+v[10],Et=v[2]+v[5]+v[8]+v[11],Ut=Math.sqrt(Dt*Dt+Bt*Bt+Et*Et),d=Math.asin(Et/Ut),r=Math.atan2(Bt,Dt)-F;r+=r>Math.PI?-2*Math.PI:r<-Math.PI?2*Math.PI:0,r=Math.abs(r),g.diff=Math.acos(Math.sin(R)*Math.sin(d)+Math.cos(R)*Math.cos(d)*Math.cos(r));for(var o=!1,l=0;l<f.nodeCache.length;l++)if(f.nodeCache[l].path==g.path){o=!0,f.nodeCache[l].timestamp=f.nodeCacheTimestamp++,f.nodeCache[l].diff=g.diff,f.currentNodes.push(f.nodeCache[l]);break}if(o||(g.timestamp=f.nodeCacheTimestamp++,f.currentNodes.push(g),f.nodeCache.push(g)),g.level<M.maxLevel){var a=.5;(g.x==ht||g.y==ht)&&(a=1-M.tileResolution/(M.tileResolution+Mt));var y,p=[],Tt=a,X=a,z=a,G=W=1-a,yt=W,St=W;for(Mt<M.tileResolution&&(g.x==ht&&g.y!=ht?(X=.5,yt=.5,("d"==g.side||"u"==g.side)&&(z=.5,St=.5)):g.x!=ht&&g.y==ht&&(Tt=.5,G=.5,("l"==g.side||"r"==g.side)&&(z=.5,St=.5))),dt<=M.tileResolution&&(g.x==ht&&(Tt=0,G=1,("l"==g.side||"r"==g.side)&&(z=0,St=1)),g.y==ht&&(X=0,yt=1,("d"==g.side||"u"==g.side)&&(z=0,St=1))),y=new Ct(new Float32Array([v[0],v[1],v[2],v[0]*Tt+v[3]*G,v[1]*a+v[4]*W,v[2]*z+v[5]*St,v[0]*Tt+v[6]*G,v[1]*X+v[7]*yt,v[2]*z+v[8]*St,v[0]*a+v[9]*W,v[1]*X+v[10]*yt,v[2]*z+v[11]*St]),g.side,g.level+1,2*g.x,2*g.y,M.fullpath,g.path),p.push(y),g.x==ht&&dt<=M.tileResolution||(y=new Ct(new Float32Array([v[0]*Tt+v[3]*G,v[1]*a+v[4]*W,v[2]*z+v[5]*St,v[3],v[4],v[5],v[3]*a+v[6]*W,v[4]*X+v[7]*yt,v[5]*z+v[8]*St,v[0]*Tt+v[6]*G,v[1]*X+v[7]*yt,v[2]*z+v[8]*St]),g.side,g.level+1,2*g.x+1,2*g.y,M.fullpath,g.path),p.push(y)),!(g.x==ht&&dt<=M.tileResolution)&&!(g.y==ht&&dt<=M.tileResolution)&&(y=new Ct(new Float32Array([v[0]*Tt+v[6]*G,v[1]*X+v[7]*yt,v[2]*z+v[8]*St,v[3]*a+v[6]*W,v[4]*X+v[7]*yt,v[5]*z+v[8]*St,v[6],v[7],v[8],v[9]*Tt+v[6]*G,v[10]*a+v[7]*W,v[11]*z+v[8]*St]),g.side,g.level+1,2*g.x+1,2*g.y+1,M.fullpath,g.path),p.push(y)),g.y==ht&&dt<=M.tileResolution||(y=new Ct(new Float32Array([v[0]*a+v[9]*W,v[1]*X+v[10]*yt,v[2]*z+v[11]*St,v[0]*Tt+v[6]*G,v[1]*X+v[7]*yt,v[2]*z+v[8]*St,v[9]*Tt+v[6]*G,v[10]*a+v[7]*W,v[11]*z+v[8]*St,v[9],v[10],v[11]]),g.side,g.level+1,2*g.x,2*g.y+1,M.fullpath,g.path),p.push(y)),wt=0;wt<p.length;wt++)jt(c,C,p[wt],R,F,S)}}}function ne(){return new Float32Array([-1,1,-1,1,1,-1,1,-1,-1,-1,-1,-1,1,1,1,-1,1,1,-1,-1,1,1,-1,1,-1,1,1,1,1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1,1,-1,1,-1,-1,1,-1,1,1,-1,1,-1,-1,-1,-1,-1,-1,1,1,1,-1,1,1,1,1,-1,1,1,-1,-1])}function te(c,C,g){var R=Math.sin(C),F=Math.cos(C);return"x"==g?new Float32Array([c[0],F*c[1]+R*c[2],F*c[2]-R*c[1],c[3],F*c[4]+R*c[5],F*c[5]-R*c[4],c[6],F*c[7]+R*c[8],F*c[8]-R*c[7]]):"y"==g?new Float32Array([F*c[0]-R*c[2],c[1],F*c[2]+R*c[0],F*c[3]-R*c[5],c[4],F*c[5]+R*c[3],F*c[6]-R*c[8],c[7],F*c[8]+R*c[6]]):"z"==g?new Float32Array([F*c[0]+R*c[1],F*c[1]-R*c[0],c[2],F*c[3]+R*c[4],F*c[4]-R*c[3],c[5],F*c[6]+R*c[7],F*c[7]-R*c[6],c[8]]):void 0}function Pt(c){return new Float32Array([c[0],c[4],c[8],c[12],c[1],c[5],c[9],c[13],c[2],c[6],c[10],c[14],c[3],c[7],c[11],c[15]])}function _e(c,C,g,R){var F=2*Math.atan(Math.tan(c/2)*i.drawingBufferHeight/i.drawingBufferWidth),S=1/Math.tan(F/2);return new Float32Array([S/C,0,0,0,0,S,0,0,0,0,(R+g)/(g-R),2*R*g/(g-R),0,0,-1,0])}function oe(c,C){i.bindTexture(i.TEXTURE_2D,C),i.texImage2D(i.TEXTURE_2D,0,i.RGB,i.RGB,i.UNSIGNED_BYTE,c),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MAG_FILTER,i.LINEAR),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MIN_FILTER,i.LINEAR),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_S,i.CLAMP_TO_EDGE),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_T,i.CLAMP_TO_EDGE),i.bindTexture(i.TEXTURE_2D,null)}gt&&(i=gt),this.init=function(c,C,g,R,F,S,T){if(C===m&&(C="equirectangular"),"equirectangular"!=C&&"cubemap"!=C&&"multires"!=C)throw console.log("Error: invalid image type specified!"),{type:"config error"};if(nt=C,M=c,Lt=T||{},f){if(rt&&(i.detachShader(f,rt),i.deleteShader(rt)),vt&&(i.detachShader(f,vt),i.deleteShader(vt)),i.bindBuffer(i.ARRAY_BUFFER,null),i.bindBuffer(i.ELEMENT_ARRAY_BUFFER,null),f.texture&&i.deleteTexture(f.texture),f.nodeCache)for(var V=0;V<f.nodeCache.length;V++)i.deleteTexture(f.nodeCache[V].texture);if(f.textureLoads)for(at=[];f.textureLoads.length>0;)f.textureLoads.shift()(!1);i.deleteProgram(f),f=m}B&&(A&&(i.detachShader(B,A),i.deleteShader(A)),ft&&(i.detachShader(B,ft),i.deleteShader(ft)),i.deleteProgram(B),B=m),Ot=m;var k,it,Z=!1;if("cubemap"==nt)for(k=0;k<6;k++)M[k].width>0?(it===m&&(it=M[k].width),it!=M[k].width&&console.log("Cube faces have inconsistent widths: "+it+" vs. "+M[k].width)):Z=!0;function W(_){if(Z){var y=_*_*4,Tt=new Uint8ClampedArray(y),X=T.backgroundColor?T.backgroundColor:[0,0,0];X[0]*=255,X[1]*=255,X[2]*=255;for(var z=0;z<y;z++)Tt[z++]=X[0],Tt[z++]=X[1],Tt[z++]=X[2];var G=new ImageData(Tt,_,_);for(k=0;k<6;k++)0==M[k].width&&(M[k]=G)}}if("cubemap"==nt&&it&it-1&&(navigator.userAgent.toLowerCase().match(/(iphone|ipod|ipad).* os 8_/)||navigator.userAgent.toLowerCase().match(/(iphone|ipod|ipad).* os 9_/)||navigator.userAgent.toLowerCase().match(/(iphone|ipod|ipad).* os 10_/)||navigator.userAgent.match(/Trident.*rv[ :]*11\./))||(i||(i=P.getContext("experimental-webgl",{alpha:!1,depth:!1})),i&&1286==i.getError()&&pe()),i||!("multires"==nt&&M.hasOwnProperty("fallbackPath")||"cubemap"==nt)||!("WebkitAppearance"in w.documentElement.style)&&!navigator.userAgent.match(/Trident.*rv[ :]*11\./)&&-1===navigator.appVersion.indexOf("MSIE 10")){if(!i)throw console.log("Error: no WebGL support detected!"),{type:"no webgl"};"cubemap"==nt&&W(it),M.fullpath=M.basePath?M.basePath+M.path:M.path,M.invTileResolution=1/M.tileResolution;var Mt=ne();for(ae=[],k=0;k<6;k++)ae[k]=Mt.slice(12*k,12*k+12),Mt=ne();var It=0;if("equirectangular"==nt){if(It=i.getParameter(i.MAX_TEXTURE_SIZE),Math.max(M.width/2,M.height)>It)throw console.log("Error: The image is too big; it's "+M.width+"px wide, but this device's maximum supported size is "+2*It+"px."),{type:"webgl size error",width:M.width,maxWidth:2*It}}else if("cubemap"==nt&&it>i.getParameter(i.MAX_CUBE_MAP_TEXTURE_SIZE))throw console.log("Error: The image is too big; it's "+it+"px wide, but this device's maximum supported size is "+It+"px."),{type:"webgl size error",width:it,maxWidth:It};if(T!==m){var wt=isNaN(T.horizonPitch)?0:Number(T.horizonPitch),Vt=isNaN(T.horizonRoll)?0:Number(T.horizonRoll);(0!=wt||0!=Vt)&&(Ot=[wt,Vt])}var ot=i.TEXTURE_2D;if(i.viewport(0,0,i.drawingBufferWidth,i.drawingBufferHeight),i.getShaderPrecisionFormat){var v=i.getShaderPrecisionFormat(i.FRAGMENT_SHADER,i.HIGH_FLOAT);v&&v.precision<1&&(tt=tt.replace("highp","mediump"))}rt=i.createShader(i.VERTEX_SHADER);var Dt=h;"multires"==nt&&(Dt=K),i.shaderSource(rt,Dt),i.compileShader(rt),vt=i.createShader(i.FRAGMENT_SHADER);var Bt=Y;if("cubemap"==nt?(ot=i.TEXTURE_CUBE_MAP,Bt=e):"multires"==nt&&(Bt=O),i.shaderSource(vt,Bt),i.compileShader(vt),f=i.createProgram(),i.attachShader(f,rt),i.attachShader(f,vt),i.linkProgram(f),i.getShaderParameter(rt,i.COMPILE_STATUS)||console.log(i.getShaderInfoLog(rt)),i.getShaderParameter(vt,i.COMPILE_STATUS)||console.log(i.getShaderInfoLog(vt)),i.getProgramParameter(f,i.LINK_STATUS)||console.log(i.getProgramInfoLog(f)),i.useProgram(f),f.drawInProgress=!1,null!==T.backgroundColor){var Et=T.backgroundColor?T.backgroundColor:[0,0,0];i.clearColor(Et[0],Et[1],Et[2],1),i.clear(i.COLOR_BUFFER_BIT)}if(f.texCoordLocation=i.getAttribLocation(f,"a_texCoord"),i.enableVertexAttribArray(f.texCoordLocation),"multires"!=nt){if(N||(N=i.createBuffer()),i.bindBuffer(i.ARRAY_BUFFER,N),i.bufferData(i.ARRAY_BUFFER,new Float32Array([-1,1,1,1,1,-1,-1,1,1,-1,-1,-1]),i.STATIC_DRAW),i.vertexAttribPointer(f.texCoordLocation,2,i.FLOAT,!1,0,0),f.aspectRatio=i.getUniformLocation(f,"u_aspectRatio"),i.uniform1f(f.aspectRatio,i.drawingBufferWidth/i.drawingBufferHeight),f.psi=i.getUniformLocation(f,"u_psi"),f.theta=i.getUniformLocation(f,"u_theta"),f.f=i.getUniformLocation(f,"u_f"),f.h=i.getUniformLocation(f,"u_h"),f.v=i.getUniformLocation(f,"u_v"),f.vo=i.getUniformLocation(f,"u_vo"),f.rot=i.getUniformLocation(f,"u_rot"),i.uniform1f(f.h,g/(2*Math.PI)),i.uniform1f(f.v,R/Math.PI),i.uniform1f(f.vo,F/Math.PI*2),"equirectangular"==nt&&(f.backgroundColor=i.getUniformLocation(f,"u_backgroundColor"),i.uniform4fv(f.backgroundColor,Et.concat([1]))),f.texture=i.createTexture(),i.bindTexture(ot,f.texture),"cubemap"==nt)i.texImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X,0,i.RGB,i.RGB,i.UNSIGNED_BYTE,M[1]),i.texImage2D(i.TEXTURE_CUBE_MAP_NEGATIVE_X,0,i.RGB,i.RGB,i.UNSIGNED_BYTE,M[3]),i.texImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_Y,0,i.RGB,i.RGB,i.UNSIGNED_BYTE,M[4]),i.texImage2D(i.TEXTURE_CUBE_MAP_NEGATIVE_Y,0,i.RGB,i.RGB,i.UNSIGNED_BYTE,M[5]),i.texImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_Z,0,i.RGB,i.RGB,i.UNSIGNED_BYTE,M[0]),i.texImage2D(i.TEXTURE_CUBE_MAP_NEGATIVE_Z,0,i.RGB,i.RGB,i.UNSIGNED_BYTE,M[2]);else if(M.width<=It)i.uniform1i(i.getUniformLocation(f,"u_splitImage"),0),i.texImage2D(ot,0,i.RGB,i.RGB,i.UNSIGNED_BYTE,M);else{i.uniform1i(i.getUniformLocation(f,"u_splitImage"),1);var Ut=w.createElement("canvas");Ut.width=M.width/2,Ut.height=M.height;var d=Ut.getContext("2d");d.drawImage(M,0,0);var x=d.getImageData(0,0,M.width/2,M.height);i.texImage2D(ot,0,i.RGB,i.RGB,i.UNSIGNED_BYTE,x),f.texture2=i.createTexture(),i.activeTexture(i.TEXTURE1),i.bindTexture(ot,f.texture2),i.uniform1i(i.getUniformLocation(f,"u_image1"),1),d.drawImage(M,-M.width/2,0),x=d.getImageData(0,0,M.width/2,M.height),i.texImage2D(ot,0,i.RGB,i.RGB,i.UNSIGNED_BYTE,x),i.texParameteri(ot,i.TEXTURE_WRAP_S,i.CLAMP_TO_EDGE),i.texParameteri(ot,i.TEXTURE_WRAP_T,i.CLAMP_TO_EDGE),i.texParameteri(ot,i.TEXTURE_MIN_FILTER,i.LINEAR),i.texParameteri(ot,i.TEXTURE_MAG_FILTER,i.LINEAR),i.activeTexture(i.TEXTURE0)}"cubemap"!=nt&&M.width&&M.width<=It&&g==2*Math.PI&&!(M.width&M.width-1)?i.texParameteri(ot,i.TEXTURE_WRAP_S,i.REPEAT):i.texParameteri(ot,i.TEXTURE_WRAP_S,i.CLAMP_TO_EDGE),i.texParameteri(ot,i.TEXTURE_WRAP_T,i.CLAMP_TO_EDGE),i.texParameteri(ot,i.TEXTURE_MIN_FILTER,i.LINEAR),i.texParameteri(ot,i.TEXTURE_MAG_FILTER,i.LINEAR)}else if(f.vertPosLocation=i.getAttribLocation(f,"a_vertCoord"),i.enableVertexAttribArray(f.vertPosLocation),Nt||(Nt=i.createBuffer()),bt||(bt=i.createBuffer()),mt||(mt=i.createBuffer()),i.bindBuffer(i.ARRAY_BUFFER,bt),i.bufferData(i.ARRAY_BUFFER,new Float32Array([0,0,1,0,1,1,0,1]),i.STATIC_DRAW),i.vertexAttribPointer(f.texCoordLocation,2,i.FLOAT,!1,0,0),i.bindBuffer(i.ELEMENT_ARRAY_BUFFER,mt),i.bufferData(i.ELEMENT_ARRAY_BUFFER,new Uint16Array([0,1,2,0,2,3]),i.STATIC_DRAW),i.bindBuffer(i.ARRAY_BUFFER,Nt),i.vertexAttribPointer(f.vertPosLocation,3,i.FLOAT,!1,0,0),f.perspUniform=i.getUniformLocation(f,"u_perspMatrix"),f.cubeUniform=i.getUniformLocation(f,"u_cubeMatrix"),f.currentNodes=[],f.nodeCache=[],f.nodeCacheTimestamp=0,f.textureLoads=[],M.shtHash||M.equirectangularThumbnail){A=i.createShader(i.VERTEX_SHADER),i.shaderSource(A,h),i.compileShader(A),ft=i.createShader(i.FRAGMENT_SHADER),i.shaderSource(ft,Y),i.compileShader(ft),B=i.createProgram(),i.attachShader(B,A),i.attachShader(B,ft),i.linkProgram(B),i.getShaderParameter(A,i.COMPILE_STATUS)||console.log(i.getShaderInfoLog(A)),i.getShaderParameter(ft,i.COMPILE_STATUS)||console.log(i.getShaderInfoLog(ft)),i.getProgramParameter(B,i.LINK_STATUS)||console.log(i.getProgramInfoLog(B)),i.useProgram(B),B.texCoordLocation=i.getAttribLocation(B,"a_texCoord"),i.enableVertexAttribArray(B.texCoordLocation),N||(N=i.createBuffer()),i.bindBuffer(i.ARRAY_BUFFER,N),i.bufferData(i.ARRAY_BUFFER,new Float32Array([-1,1,1,1,1,-1,-1,1,1,-1,-1,-1]),i.STATIC_DRAW),i.vertexAttribPointer(B.texCoordLocation,2,i.FLOAT,!1,0,0),B.aspectRatio=i.getUniformLocation(B,"u_aspectRatio"),i.uniform1f(B.aspectRatio,i.drawingBufferWidth/i.drawingBufferHeight),B.psi=i.getUniformLocation(B,"u_psi"),B.theta=i.getUniformLocation(B,"u_theta"),B.f=i.getUniformLocation(B,"u_f"),B.h=i.getUniformLocation(B,"u_h"),B.v=i.getUniformLocation(B,"u_v"),B.vo=i.getUniformLocation(B,"u_vo"),B.rot=i.getUniformLocation(B,"u_rot"),i.uniform1f(B.h,1),B.texture=i.createTexture(),i.bindTexture(ot,B.texture);var r,o,l,a=function(){i.useProgram(B),i.uniform1i(i.getUniformLocation(B,"u_splitImage"),0),i.texImage2D(ot,0,i.RGBA,i.RGBA,i.UNSIGNED_BYTE,r),i.texParameteri(ot,i.TEXTURE_WRAP_S,i.REPEAT),i.texParameteri(ot,i.TEXTURE_WRAP_T,i.CLAMP_TO_EDGE),i.texParameteri(ot,i.TEXTURE_MIN_FILTER,i.LINEAR),i.texParameteri(ot,i.TEXTURE_MAG_FILTER,i.LINEAR),i.uniform1f(B.v,o),i.uniform1f(B.vo,l),i.useProgram(f)};if(M.shtHash&&(r=function Yt(c){if(Rt.length<1)for(var C=$t.length/32,g=0;g<32;g++){Rt.push([]);for(var R=0;R<C;R++)Rt[g].push(ce(Xt($t[g*C+R],1),41)*fe)}Xt(c[0],1);var S=255*(ce(Xt(c[1],1),41)+1)/2,T=Xt(c.slice(2),2),V=[],k=[],Z=[];for(g=0;g<T.length;g++){var it=de(T[g],S);V.push(it[0]),k.push(it[1]),Z.push(it[2])}var W=.03125*Math.PI,pt=[];for(g=31;g>=0;g--)for(R=0;R<64;R++)pt.push(qt(V,Rt[g],(R+.5)*W)),pt.push(qt(k,Rt[g],(R+.5)*W)),pt.push(qt(Z,Rt[g],(R+.5)*W)),pt.push(255);return new ImageData(new Uint8ClampedArray(pt),64,32)}(M.shtHash),o=(2+1/31)/2,l=1-(2+1/31)/2,a()),M.equirectangularThumbnail)if("string"==typeof M.equirectangularThumbnail){if("data:"!=M.equirectangularThumbnail.slice(0,5))throw console.log("Error: thumbnail string is not a data URI!"),{type:"config error"};(r=new Image).onload=function(){o=1,l=0,a()},r.src=M.equirectangularThumbnail}else r=M.equirectangularThumbnail,o=1,l=0,a();i.bindBuffer(i.ARRAY_BUFFER,Nt),i.vertexAttribPointer(f.vertPosLocation,3,i.FLOAT,!1,0,0),i.useProgram(f)}var p=i.getError();if(0!==p)throw console.log("Error: Something went wrong with WebGL!",p),{type:"webgl error"};S()}else{var pt;xt&&q.removeChild(xt),(xt=w.createElement("div")).className="pnlm-world",pt=M.basePath?M.basePath+M.fallbackPath:M.fallbackPath;var Wt=0,zt=function(){var _=w.createElement("canvas");_.className="pnlm-face pnlm-"+U[this.side]+"face",xt.appendChild(_);var y=_.getContext("2d");_.style.width=this.width+4+"px",_.style.height=this.height+4+"px",_.width=this.width+4,_.height=this.height+4,y.drawImage(this,2,2);var z,G,Tt=y.getImageData(0,0,_.width,_.height),X=Tt.data;for(z=2;z<_.width-2;z++)for(G=0;G<4;G++)X[4*(z+_.width)+G]=X[4*(z+2*_.width)+G],X[4*(z+_.width*(_.height-2))+G]=X[4*(z+_.width*(_.height-3))+G];for(z=2;z<_.height-2;z++)for(G=0;G<4;G++)X[4*(z*_.width+1)+G]=X[4*(z*_.width+2)+G],X[4*((z+1)*_.width-2)+G]=X[4*((z+1)*_.width-3)+G];for(G=0;G<4;G++)X[4*(_.width+1)+G]=X[4*(2*_.width+2)+G],X[4*(2*_.width-2)+G]=X[4*(3*_.width-3)+G],X[4*(_.width*(_.height-2)+1)+G]=X[4*(_.width*(_.height-3)+2)+G],X[4*(_.width*(_.height-1)-2)+G]=X[4*(_.width*(_.height-2)-3)+G];for(z=1;z<_.width-1;z++)for(G=0;G<4;G++)X[4*z+G]=X[4*(z+_.width)+G],X[4*(z+_.width*(_.height-1))+G]=X[4*(z+_.width*(_.height-2))+G];for(z=1;z<_.height-1;z++)for(G=0;G<4;G++)X[z*_.width*4+G]=X[4*(z*_.width+1)+G],X[4*((z+1)*_.width-1)+G]=X[4*((z+1)*_.width-2)+G];for(G=0;G<4;G++)X[G]=X[4*(_.width+1)+G],X[4*(_.width-1)+G]=X[4*(2*_.width-2)+G],X[_.width*(_.height-1)*4+G]=X[4*(_.width*(_.height-2)+1)+G],X[4*(_.width*_.height-1)+G]=X[4*(_.width*(_.height-1)-2)+G];y.putImageData(Tt,0,0),ht.call(this)},ht=function(){this.width>0?(ct===m&&(ct=this.width),ct!=this.width&&console.log("Fallback faces have inconsistent widths: "+ct+" vs. "+this.width)):Z=!0,6==++Wt&&(ct=this.width,q.appendChild(xt),S())};for(Z=!1,k=0;k<6;k++){var dt=new Image;dt.crossOrigin=Lt.crossOrigin?Lt.crossOrigin:"anonymous",dt.side=k,dt.onload=zt,dt.onerror=ht,dt.src="multires"==nt?pt.replace("%s",U[k])+(M.extension?"."+M.extension:""):M[k].src}W(ct)}},this.destroy=function(){if(q!==m&&(P!==m&&q.contains(P)&&q.removeChild(P),xt!==m&&q.contains(xt)&&q.removeChild(xt)),i){var c=i.getExtension("WEBGL_lose_context");c&&c.loseContext()}},this.resize=function(){var c=_t.devicePixelRatio||1;P.width=P.clientWidth*c,P.height=P.clientHeight*c,i&&(1286==i.getError()&&pe(),i.viewport(0,0,i.drawingBufferWidth,i.drawingBufferHeight),"multires"!=nt?i.uniform1f(f.aspectRatio,P.clientWidth/P.clientHeight):M.shtHash&&(i.useProgram(B),i.uniform1f(B.aspectRatio,P.clientWidth/P.clientHeight),i.useProgram(f)))},P&&this.resize(),this.setPose=function(c,C){c=isNaN(c)?0:Number(c),C=isNaN(C)?0:Number(C),Ot=0==c&&0==C?m:[c,C]},this.render=function(c,C,g,R){var F,T,V=0;if(R===m&&(R={}),R.roll&&(V=R.roll),R.dynamic)var k=R.dynamic;if(Ot!==m){var Z=Ot[0],it=Ot[1],W=c,pt=C,Wt=Math.cos(it)*Math.sin(c)*Math.sin(Z)+Math.cos(c)*(Math.cos(Z)*Math.cos(C)+Math.sin(it)*Math.sin(Z)*Math.sin(C)),zt=-Math.sin(c)*Math.sin(it)+Math.cos(c)*Math.cos(it)*Math.sin(C),ht=Math.cos(it)*Math.cos(Z)*Math.sin(c)+Math.cos(c)*(-Math.cos(C)*Math.sin(Z)+Math.cos(Z)*Math.sin(it)*Math.sin(C));c=Math.asin(Math.max(Math.min(ht,1),-1)),C=Math.atan2(zt,Wt);var dt=[Math.cos(W)*(Math.sin(it)*Math.sin(Z)*Math.cos(pt)-Math.cos(Z)*Math.sin(pt)),Math.cos(W)*Math.cos(it)*Math.cos(pt),Math.cos(W)*(Math.cos(Z)*Math.sin(it)*Math.cos(pt)+Math.sin(pt)*Math.sin(Z))],Mt=[-Math.cos(c)*Math.sin(C),Math.cos(c)*Math.cos(C)],It=Math.acos(Math.max(Math.min((dt[0]*Mt[0]+dt[1]*Mt[1])/(Math.sqrt(dt[0]*dt[0]+dt[1]*dt[1]+dt[2]*dt[2])*Math.sqrt(Mt[0]*Mt[0]+Mt[1]*Mt[1])),1),-1));dt[2]<0&&(It=2*Math.PI-It),V+=It}if(R.hook&&R.hook({gl:i,program:f,previewProgram:B,imageType:nt,texCoordBuffer:N,cubeVertBuf:Nt,cubeVertTexCoordBuf:bt,cubeVertIndBuf:mt}),i||"multires"!=nt&&"cubemap"!=nt){if("multires"!=nt){var Bt=2*Math.atan(Math.tan(.5*g)/(i.drawingBufferWidth/i.drawingBufferHeight));F=1/Math.tan(.5*Bt),i.uniform1f(f.psi,C),i.uniform1f(f.theta,c),i.uniform1f(f.rot,V),i.uniform1f(f.f,F),!0===k&&"equirectangular"==nt&&(i.bindTexture(i.TEXTURE_2D,f.texture),i.texImage2D(i.TEXTURE_2D,0,i.RGB,i.RGB,i.UNSIGNED_BYTE,M)),i.drawArrays(i.TRIANGLES,0,6)}else{var Et=typeof M.shtHash<"u"||typeof M.equirectangularThumbnail<"u",Ut=Et;if(Et&&f.currentNodes.length>=6){Ut=!1;for(var S=0;S<6;S++)if(!f.currentNodes[S].textureLoaded){Ut=!0;break}}Ut&&(i.useProgram(B),i.bindBuffer(i.ARRAY_BUFFER,N),i.vertexAttribPointer(B.texCoordLocation,2,i.FLOAT,!1,0,0),i.bindTexture(i.TEXTURE_2D,B.texture),Bt=2*Math.atan(Math.tan(.5*g)/(i.drawingBufferWidth/i.drawingBufferHeight)),F=1/Math.tan(.5*Bt),i.uniform1f(B.psi,C),i.uniform1f(B.theta,c),i.uniform1f(B.rot,V),i.uniform1f(B.f,F),i.drawArrays(i.TRIANGLES,0,6),i.bindBuffer(i.ARRAY_BUFFER,Nt),i.vertexAttribPointer(f.vertPosLocation,3,i.FLOAT,!1,0,0),i.useProgram(f));var d=_e(g,i.drawingBufferWidth/i.drawingBufferHeight,.1,100),x=_e(g,i.drawingBufferWidth/i.drawingBufferHeight,-100,100),r=function Qt(){return new Float32Array([1,0,0,0,1,0,0,0,1])}();r=te(r,-V,"z"),r=te(r,-c,"x"),r=function ue(c){return new Float32Array([c[0],c[1],c[2],0,c[3],c[4],c[5],0,c[6],c[7],c[8],0,0,0,0,1])}(r=te(r,C,"y")),i.uniformMatrix4fv(f.perspUniform,!1,Pt(d)),i.uniformMatrix4fv(f.cubeUniform,!1,Pt(r));var o=se(d,r),l=se(x,r);if(f.nodeCache.sort(st),f.nodeCache.length>200&&f.nodeCache.length>f.currentNodes.length+50)for(var a=f.nodeCache.splice(200,f.nodeCache.length-200),p=0;p<a.length;p++)i.deleteTexture(a[p].texture);for(f.currentNodes=[],T=0;T<6;T++)jt(o,l,new Ct(ae[T],E[T],1,0,0,M.fullpath,null),c,C,g);for(f.currentNodes.sort(ut),S=at.length-1;S>=0;S--)-1===f.currentNodes.indexOf(at[S].node)&&(at[S].node.textureLoad=!1,at.splice(S,1));if(0===at.length)for(S=0;S<f.currentNodes.length;S++){var y=f.currentNodes[S];if(!y.texture&&!y.textureLoad){y.textureLoad=!0,setTimeout(kt,0,y);break}}f.textureLoads.length>0&&f.textureLoads.shift()(!0),function Q(c){if(!f.drawInProgress){f.drawInProgress=!0,c&&i.clear(i.COLOR_BUFFER_BIT);for(var C={},g=0;g<f.currentNodes.length;g++)C[f.currentNodes[g].parentPath]===m&&(C[f.currentNodes[g].parentPath]=0),C[f.currentNodes[g].parentPath]+=!(f.currentNodes[g].textureLoaded>1);for(g=0;g<f.currentNodes.length;g++)f.currentNodes[g].textureLoaded>1&&4!=C[f.currentNodes[g].path]&&(i.bufferData(i.ARRAY_BUFFER,f.currentNodes[g].vertices,i.STATIC_DRAW),i.bindTexture(i.TEXTURE_2D,f.currentNodes[g].texture),i.drawElements(i.TRIANGLES,6,i.UNSIGNED_SHORT,0));f.drawInProgress=!1}}(!Et)}if(R.returnImage!==m)return _t.createImageBitmap&&"ImageBitmap"==R.returnImage?createImageBitmap(P):0==R.returnImage.toString().indexOf("image/")?P.toDataURL(R.returnImage):P.toDataURL("image/png")}else{var wt={f:"translate3d(-"+(2+(T=ct/2))+"px, -"+(T+2)+"px, -"+T+"px)",b:"translate3d("+(T+2)+"px, -"+(T+2)+"px, "+T+"px) rotateX(180deg) rotateZ(180deg)",u:"translate3d(-"+(T+2)+"px, -"+T+"px, "+(T+2)+"px) rotateX(270deg)",d:"translate3d(-"+(T+2)+"px, "+T+"px, -"+(T+2)+"px) rotateX(90deg)",l:"translate3d(-"+T+"px, -"+(T+2)+"px, "+(T+2)+"px) rotateX(180deg) rotateY(90deg) rotateZ(180deg)",r:"translate3d("+T+"px, -"+(T+2)+"px, -"+(T+2)+"px) rotateY(270deg)"},Vt=(F=1/Math.tan(g/2))*P.clientWidth/2+"px",ot="perspective("+Vt+") translateZ("+Vt+") rotateX("+c+"rad) rotateY("+C+"rad) ",v=Object.keys(wt);for(S=0;S<6;S++){var Dt=xt.querySelector(".pnlm-"+v[S]+"face");Dt&&(Dt.style.webkitTransform=ot+wt[v[S]],Dt.style.transform=ot+wt[v[S]])}}},this.isLoading=function(){if(i&&"multires"==nt)for(var c=0;c<f.currentNodes.length;c++)if(!f.currentNodes[c].textureLoaded)return!0;return!1},this.isBaseLoaded=function(){if(f.currentNodes.length>=6){for(var c=0;c<6;c++)if(!f.currentNodes[c].textureLoaded)return!1;return!0}return!1},this.getCanvas=function(){return P};var kt,at=[],Ht=function(){var g,c=4,C={};function R(){var V=this;this.texture=this.callback=null,this.image=new Image,this.image.crossOrigin=g||"anonymous";var k=function(){f.textureLoads.push(function(Z){Z&&(V.image.width>0&&V.image.height>0?(oe(V.image,V.texture),V.callback(V.texture,!0)):V.callback(V.texture,!1)),function S(V){if(at.length){var k=at.shift();V.loadTexture(k.src,k.texture,k.callback)}else C[c++]=V}(V)})};this.image.addEventListener("load",k),this.image.addEventListener("error",k)}function F(V,k,Z,it){this.node=V,this.src=k,this.texture=Z,this.callback=it}R.prototype.loadTexture=function(V,k,Z){this.texture=k,this.callback=Z,this.image.src=V};for(var T=0;T<c;T++)C[T]=new R;return function(V,k,Z,it){g=it;var W=i.createTexture();return c?C[--c].loadTexture(k,W,Z):at.push(new F(V,k,W,Z)),W}}();if(_t.Worker&&_t.createImageBitmap){var re=new Blob(["("+function(){self.onmessage=function(C){var g=C.data[0];fetch(g,{mode:"cors",credentials:"use-credentials"==C.data[1]?"include":"same-origin"}).then(function(F){return F.blob()}).then(function(F){return createImageBitmap(F)}).then(function(F){postMessage([g,!0,F],[F])}).catch(function(){postMessage([g,!1])})}}.toString()+")()"],{type:"application/javascript"}),me=new Worker(URL.createObjectURL(re)),D={};me.onmessage=function(C){var g=C.data[0],R=C.data[1],F=C.data[2];f.textureLoads.push(function(S){var T,V=!1;R&&S&&(T=i.createTexture(),oe(F,T),V=!0);var k=D[g];delete D[g],k!==m&&(k.texture=T,k.textureLoaded=V?2:1)})},kt=function(C){var g=new URL(C.path+(M.extension?"."+M.extension:""),_t.location).href;D[g]=C,me.postMessage([g,Lt.crossOrigin])}}else kt=function At(c){Ht(c,c.path+(M.extension?"."+M.extension:""),function(C,g){c.texture=C,c.textureLoaded=g?2:1},Lt.crossOrigin)};function se(c,C){return new Float32Array([c[0]*C[0],c[0]*C[1],c[0]*C[2],0,c[5]*C[4],c[5]*C[5],c[5]*C[6],0,c[10]*C[8],c[10]*C[9],c[10]*C[10],c[11],-C[8],-C[9],-C[10],0])}function $(c,C){return new Float32Array([c[0]*C[0]+c[1]*C[1]+c[2]*C[2],c[4]*C[0]+c[5]*C[1]+c[6]*C[2],c[11]+c[8]*C[0]+c[9]*C[1]+c[10]*C[2],1/(c[12]*C[0]+c[13]*C[1]+c[14]*C[2])])}function ee(c,C){var g=$(c,C),R=g[0]*g[3],F=g[1]*g[3],S=g[2]*g[3],T=[0,0,0];return R<-1&&(T[0]=-1),R>1&&(T[0]=1),F<-1&&(T[1]=-1),F>1&&(T[1]=1),(S<-1||S>1)&&(T[2]=1),T}function pe(){console.log("Reducing canvas size due to error 1286!"),P.width=Math.round(P.width/2),P.height=Math.round(P.height/2)}var le="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz#$%*+,-.:;=?@[]^_{|}~",$t="Bf[ff4fff|ffff0fffffBo@Ri5xag{Jmdf2+WiefCs@Ll7+Vi]Btag6[NmdgCv=Ho9;Qk;7zWiF_GsahDy:ErE?Mn$5+SkS_AyWiD#-CuJ[Iqp6;Nnx?7*SlE$*BxR@FtPA?Jq+%7:NnF*zAzn?CwIG@Ft-Y9?IrG+vA%w:AzGR?Cx*IF@EuI,nA+$*9%Gu:A#xCR?ByJ-VB-*wA+J**9*ZBv:9%L.QD.*aB.O.v9-MF+$8,O:MG:*OD;a:UB:IO:n9:Q:KJ;#IG=u-KE=Hs:MC?T:IO=wEL?#%FJ@K**FI@Y;HV=pDU?*sCS@S.uCR[m;Hp=VDq?*SCs@s.QCt[r:Iw=OEz?#IF$@#*HF%@u:K$;KI+=uEK-=*sCM:?w:M+:HO.;aCU;:%OCn?:z.Q..Ha;.ODv?-yFG$@,$-V;-Hw=+JH*?*lBP:?%%,n=+J*?%GQ:=#NCt?;y++v=%O:=zGt?:xHI,@-u,*z=zX?:wI+@,tEY??%r-$*;xt@,tP=?$qG%[:xn.#-:u$[%qp];xnN?[*sl.y:-r-?yn$^+sks_=yoi:v=*o?;uk;[zoi,_+skh:s@zl[+pi];tkg][xmhg;o@ti^xkg{$mhf|+oigf;f[ff_fff|ffff~fffff",fe=3.317,Rt=[];function ce(c,C){return Math.pow((Math.abs(c)-C)/C,2)*(c-C>0?1:-1)}function de(c,C){var g=Math.floor(c/361),R=Math.floor(c/19)%19,F=c%19;return[ce(g,9)*C,ce(R,9)*C,ce(F,9)*C]}function Xt(c,C){for(var g=Math.floor(c.length/C),R=[],F=0;F<g;F++){for(var S=0,T=0;T<C;T++)S=83*S+le.indexOf(c[F*C+T]);R.push(S)}return R}function qt(c,C,g){var R=Math.floor(Math.sqrt(c.length))-1,F=Array(R+1),S=Array(R+1);S[0]=0,F[0]=1,S[1]=Math.sin(g),F[1]=Math.cos(g);for(var T=2;T<=R;T++)S[T]=2*S[T-1]*F[1]-S[T-2],F[T]=2*F[T-1]*F[1]-F[T-2];for(var V=0,k=0,Z=1;Z<=R+1;Z++)k+=Z;for(var it=R;it>=0;it--){var W=Math.floor((it+1)*it/2);for(V+=0!=W?c[W]*C[W-1]:c[W],T=1;T<=it;T++)V+=(c[++W]*F[T]+c[W+k-it-1]*S[T])*C[W-1]}return Math.round(V)}}var h=["attribute vec2 a_texCoord;","varying vec2 v_texCoord;","void main() {","gl_Position = vec4(a_texCoord, 0.0, 1.0);","v_texCoord = a_texCoord;","}"].join(""),K=["attribute vec3 a_vertCoord;","attribute vec2 a_texCoord;","uniform mat4 u_cubeMatrix;","uniform mat4 u_perspMatrix;","varying mediump vec2 v_texCoord;","void main(void) {","gl_Position = u_perspMatrix * u_cubeMatrix * vec4(a_vertCoord, 1.0);","v_texCoord = a_texCoord;","}"].join(""),tt=["precision highp float;","uniform float u_aspectRatio;","uniform float u_psi;","uniform float u_theta;","uniform float u_f;","uniform float u_h;","uniform float u_v;","uniform float u_vo;","uniform float u_rot;","const float PI = 3.14159265358979323846264;","uniform sampler2D u_image0;","uniform sampler2D u_image1;","uniform bool u_splitImage;","uniform samplerCube u_imageCube;","varying vec2 v_texCoord;","uniform vec4 u_backgroundColor;","void main() {","float x = v_texCoord.x * u_aspectRatio;","float y = v_texCoord.y;","float sinrot = sin(u_rot);","float cosrot = cos(u_rot);","float rot_x = x * cosrot - y * sinrot;","float rot_y = x * sinrot + y * cosrot;","float sintheta = sin(u_theta);","float costheta = cos(u_theta);","float a = u_f * costheta - rot_y * sintheta;","float root = sqrt(rot_x * rot_x + a * a);","float lambda = atan(rot_x / root, a / root) + u_psi;","float phi = atan((rot_y * costheta + u_f * sintheta) / root);"].join("\n"),e=tt+["float cosphi = cos(phi);","gl_FragColor = textureCube(u_imageCube, vec3(cosphi*sin(lambda), sin(phi), cosphi*cos(lambda)));","}"].join("\n"),Y=tt+["lambda = mod(lambda + PI, PI * 2.0) - PI;","vec2 coord = vec2(lambda / PI, phi / (PI / 2.0));","if(coord.x < -u_h || coord.x > u_h || coord.y < -u_v + u_vo || coord.y > u_v + u_vo)","gl_FragColor = u_backgroundColor;","else {","if(u_splitImage) {","if(coord.x < 0.0)","gl_FragColor = texture2D(u_image0, vec2((coord.x + u_h) / u_h, (-coord.y + u_v + u_vo) / (u_v * 2.0)));","else","gl_FragColor = texture2D(u_image1, vec2((coord.x + u_h) / u_h - 1.0, (-coord.y + u_v + u_vo) / (u_v * 2.0)));","} else {","gl_FragColor = texture2D(u_image0, vec2((coord.x + u_h) / (u_h * 2.0), (-coord.y + u_v + u_vo) / (u_v * 2.0)));","}","}","}"].join("\n"),O=["varying mediump vec2 v_texCoord;","uniform sampler2D u_sampler;","void main(void) {","gl_FragColor = texture2D(u_sampler, v_texCoord);","}"].join("");return{renderer:function(q,gt,P){return new t(q,gt,P)}}}(window,document)},6846:()=>{window.pannellum=function(_t,w,m){"use strict";function t(h,K){var e,Y,O,q,ct,M,nt,Lt,U,st,te,Pt,tt=this,gt=!1,P=Date.now(),f=0,i=0,rt=-1,vt=0,B=0,A=new Array(10),ft=!1,xt=!1,Ot=!1,N={yaw:0,pitch:0,hfov:0},Nt=!1,bt=!1,mt=0,E=0,ut={},Q={},Ct=[],jt=!1,ne=!1,Qt=1e-6,ue=!1,_e=!1,oe={hfov:100,minHfov:50,multiResMinHfov:!1,maxHfov:120,pitch:0,minPitch:m,maxPitch:m,yaw:0,minYaw:-180,maxYaw:180,roll:0,haov:360,vaov:180,vOffset:0,autoRotate:!1,autoRotateInactivityDelay:-1,autoRotateStopDelay:m,type:"equirectangular",northOffset:0,showFullscreenCtrl:!0,dynamic:!1,dynamicUpdate:!1,doubleClickZoom:!0,keyboardZoom:!0,mouseZoom:!0,showZoomCtrl:!0,autoLoad:!1,showControls:!0,orientationOnByDefault:!1,hotSpotDebug:!1,backgroundColor:[0,0,0],avoidShowingBackground:!1,animationTimingFunction:function Vt(n){return n<.5?2*n*n:(4-2*n)*n-1},draggable:!0,dragConfirm:!1,disableKeyboardCtrl:!1,crossOrigin:"anonymous",targetBlank:!1,touchPanSpeedCoeffFactor:1,capturedKeyNumbers:[16,17,27,37,38,39,40,61,65,68,83,87,107,109,173,187,189],friction:.15,strings:{loadButtonLabel:"Click to<br>Load<br>Panorama",loadingLabel:"Loading...",bylineLabel:"by %s",noPanoramaError:"No panorama image was specified.",fileAccessError:"The file %s could not be accessed.",malformedURLError:"There is something wrong with the panorama URL.",iOS8WebGLError:"Due to iOS 8's broken WebGL implementation, only progressive encoded JPEGs work for your device (this panorama uses standard encoding).",genericWebGLError:"Your browser does not have the necessary WebGL support to display this panorama.",textureSizeError:"This panorama is too big for your device! It's %spx wide, but your device only supports images up to %spx wide. Try another device. (If you're the author, try scaling down the image.)",unknownError:"Unknown error. Check developer console.",twoTouchActivate:"Use two fingers together to pan the panorama.",twoTouchXActivate:"Use two fingers together to pan the panorama horizontally.",twoTouchYActivate:"Use two fingers together to pan the panorama vertically.",ctrlZoomActivate:"Use %s + scroll to zoom the panorama."}};(h="string"==typeof h?w.getElementById(h):h).classList.add("pnlm-container"),h.tabIndex=0;var at=w.createElement("div");at.className="pnlm-ui",h.appendChild(at);var Ht=w.createElement("div");Ht.className="pnlm-render-container",h.appendChild(Ht);var At=w.createElement("div");At.className="pnlm-dragfix",at.appendChild(At);var kt=w.createElement("span");kt.className="pnlm-about-msg";var re=w.createElement("a");re.href="https://pannellum.org/",re.textContent="Pannellum",kt.appendChild(re);var me=w.createElement("span");kt.appendChild(me),at.appendChild(kt),At.addEventListener("contextmenu",function qt(n){var s=Yt(n);kt.style.left=s.x+"px",kt.style.top=s.y+"px",clearTimeout(qt.t1),clearTimeout(qt.t2),kt.style.display="block",kt.style.opacity=1,qt.t1=setTimeout(function(){kt.style.opacity=0},2e3),qt.t2=setTimeout(function(){kt.style.display="none"},2500),n.preventDefault()});var D={},se=w.createElement("div");se.className="pnlm-sprite pnlm-hot-spot-debug-indicator",at.appendChild(se),D.container=w.createElement("div"),D.container.className="pnlm-panorama-info",D.title=w.createElement("div"),D.title.className="pnlm-title-box",D.container.appendChild(D.title),D.author=w.createElement("div"),D.author.className="pnlm-author-box",D.container.appendChild(D.author),at.appendChild(D.container),D.load={},D.load.box=w.createElement("div"),D.load.box.className="pnlm-load-box",D.load.boxp=w.createElement("p"),D.load.box.appendChild(D.load.boxp),D.load.lbox=w.createElement("div"),D.load.lbox.className="pnlm-lbox",D.load.lbox.innerHTML='<div class="pnlm-loading"></div>',D.load.box.appendChild(D.load.lbox),D.load.lbar=w.createElement("div"),D.load.lbar.className="pnlm-lbar",D.load.lbarFill=w.createElement("div"),D.load.lbarFill.className="pnlm-lbar-fill",D.load.lbar.appendChild(D.load.lbarFill),D.load.box.appendChild(D.load.lbar),D.load.msg=w.createElement("p"),D.load.msg.className="pnlm-lmsg",D.load.box.appendChild(D.load.msg),at.appendChild(D.load.box),D.errorMsg=w.createElement("div"),D.errorMsg.className="pnlm-error-msg pnlm-info-box",at.appendChild(D.errorMsg),D.interactionMsg=w.createElement("div"),D.interactionMsg.className="pnlm-interaction-msg pnlm-info-box",at.appendChild(D.interactionMsg);var $={};$.container=w.createElement("div"),$.container.className="pnlm-controls-container",at.appendChild($.container),$.load=w.createElement("button"),$.load.className="pnlm-load-button",$.load.addEventListener("click",function(){z(),we()}),at.appendChild($.load),$.zoom=w.createElement("div"),$.zoom.className="pnlm-zoom-controls pnlm-controls",$.zoomIn=w.createElement("div"),$.zoomIn.className="pnlm-zoom-in pnlm-sprite pnlm-control",$.zoomIn.addEventListener("click",function St(){ct&&(Jt(e.hfov-5),v())}),$.zoom.appendChild($.zoomIn),$.zoomOut=w.createElement("div"),$.zoomOut.className="pnlm-zoom-out pnlm-sprite pnlm-control",$.zoomOut.addEventListener("click",function xe(){ct&&(Jt(e.hfov+5),v())}),$.zoom.appendChild($.zoomOut),$.container.appendChild($.zoom),$.fullscreen=w.createElement("div"),$.fullscreen.addEventListener("click",G),$.fullscreen.className="pnlm-fullscreen-toggle-button pnlm-sprite pnlm-fullscreen-toggle-button-inactive pnlm-controls pnlm-control",(w.fullscreenEnabled||w.mozFullScreenEnabled||w.webkitFullscreenEnabled||w.msFullscreenEnabled)&&$.container.appendChild($.fullscreen),$.orientation=w.createElement("div"),$.orientation.addEventListener("click",function(n){bt?Ce():be()}),$.orientation.addEventListener("mousedown",function(n){n.stopPropagation()}),$.orientation.addEventListener("touchstart",function(n){n.stopPropagation()}),$.orientation.addEventListener("pointerdown",function(n){n.stopPropagation()}),$.orientation.className="pnlm-orientation-button pnlm-orientation-button-inactive pnlm-sprite pnlm-controls pnlm-control";var ee=!1;_t.DeviceOrientationEvent&&"https:"==location.protocol&&(navigator.userAgent.toLowerCase().indexOf("mobi")>=0||navigator.userAgent.indexOf("Mac")>=0&&navigator.maxTouchPoints&&navigator.maxTouchPoints>0)&&($.container.appendChild($.orientation),ee=!0);var ie=w.createElement("div");function pe(){var n=w.createElement("div");if(n.innerHTML="\x3c!--[if lte IE 9]><i></i><![endif]--\x3e",1!=n.getElementsByTagName("i").length){var s,u;if(U=e.hfov,st=e.pitch,"cubemap"==e.type){for(M=[],s=0;s<6;s++)M.push(new Image),M[s].crossOrigin=e.crossOrigin;D.load.lbox.style.display="block",D.load.lbar.style.display="none"}else if("multires"==e.type){var b=JSON.parse(JSON.stringify(e.multiRes));e.basePath&&e.multiRes.basePath&&!/^(?:[a-z]+:)?\/\//i.test(e.multiRes.basePath)?b.basePath=e.basePath+e.multiRes.basePath:e.multiRes.basePath?b.basePath=e.multiRes.basePath:e.basePath&&(b.basePath=e.basePath),M=b}else if(!0===e.dynamic)M=e.panorama;else{if(e.panorama===m)return void Rt(e.strings.noPanoramaError);M=new Image}if("cubemap"==e.type){var I=6,L=function(){0==--I&&$t()},et=function(j){var H=w.createElement("a");H.href=j.target.src,H.textContent=H.href,Rt(e.strings.fileAccessError.replace("%s",H.outerHTML))};for(s=0;s<M.length;s++)"null"==(u=e.cubeMap[s])?(console.log("Will use background instead of missing cubemap face "+s),L()):(e.basePath&&!le(u)&&(u=e.basePath+u),M[s].onload=L,M[s].onerror=et,M[s].src=ge(u))}else if("multires"==e.type)$t();else if(u="",e.basePath&&(u=e.basePath),!0!==e.dynamic){if(e.panorama instanceof Image||e.panorama instanceof ImageData||_t.ImageBitmap&&e.panorama instanceof ImageBitmap)return M=e.panorama,void $t();u=le(e.panorama)?e.panorama:u+e.panorama,M.onload=function(){_t.URL.revokeObjectURL(this.src),$t()},(Pt=new XMLHttpRequest).onloadend=function(){if(200!=Pt.status){var j=w.createElement("a");return j.href=u,j.textContent=j.href,void Rt(e.strings.fileAccessError.replace("%s",j.outerHTML))}(function fe(n,s){var u=new FileReader;u.addEventListener("loadend",function(){var b=u.result;if(navigator.userAgent.toLowerCase().match(/(iphone|ipod|ipad).* os 8_/)){var I=b.indexOf("\xff\xc2");(I<0||I>65536)&&Rt(e.strings.iOS8WebGLError)}var L=b.indexOf("<x:xmpmeta");if(L>-1&&!0!==e.ignoreGPanoXMP){var et=b.substring(L,b.indexOf("</x:xmpmeta>")+12),j=function(J){var lt;return et.indexOf(J+'="')>=0?lt=(lt=et.substring(et.indexOf(J+'="')+J.length+2)).substring(0,lt.indexOf('"')):et.indexOf(J+">")>=0&&(lt=(lt=et.substring(et.indexOf(J+">")+J.length+1)).substring(0,lt.indexOf("<"))),lt!==m?Number(lt):null},H={fullWidth:j("GPano:FullPanoWidthPixels"),croppedWidth:j("GPano:CroppedAreaImageWidthPixels"),fullHeight:j("GPano:FullPanoHeightPixels"),croppedHeight:j("GPano:CroppedAreaImageHeightPixels"),topPixels:j("GPano:CroppedAreaTopPixels"),heading:j("GPano:PoseHeadingDegrees"),horizonPitch:j("GPano:PosePitchDegrees"),horizonRoll:j("GPano:PoseRollDegrees"),pitch:j("GPano:InitialViewPitchDegrees"),yaw:j("GPano:InitialViewHeadingDegrees"),hfov:j("GPano:InitialHorizontalFOVDegrees")};null!==H.fullWidth&&null!==H.croppedWidth&&null!==H.fullHeight&&null!==H.croppedHeight&&null!==H.topPixels&&(Ct.indexOf("haov")<0&&(e.haov=H.croppedWidth/H.fullWidth*360),Ct.indexOf("vaov")<0&&(e.vaov=H.croppedHeight/H.fullHeight*180),Ct.indexOf("vOffset")<0&&(e.vOffset=-180*((H.topPixels+H.croppedHeight/2)/H.fullHeight-.5)),null!==H.heading&&Ct.indexOf("northOffset")<0&&(e.northOffset=H.heading,!1!==e.compass&&(e.compass=!0)),null!==H.horizonPitch&&null!==H.horizonRoll&&(Ct.indexOf("horizonPitch")<0&&(e.horizonPitch=H.horizonPitch),Ct.indexOf("horizonRoll")<0&&(e.horizonRoll=H.horizonRoll)),null!=H.pitch&&Ct.indexOf("pitch")<0&&(e.pitch=H.pitch),null!=H.yaw&&Ct.indexOf("yaw")<0&&(e.yaw=H.yaw),null!=H.hfov&&Ct.indexOf("hfov")<0&&(e.hfov=H.hfov))}M.src=_t.URL.createObjectURL(n),M.onerror=function(){(function J(){return _t.fetch?_t.fetch(w.location.href).then(function(lt){return lt.headers.get("Content-Security-Policy")}):null})().then(function(lt){lt&&lt.split(";").find(function(Ft){var Zt=Ft.match(/img-src(.*)/);if(Zt)return!Zt[1].includes("blob")})&&(console.log("CSP blocks blobs; reverting to URL."),M.crossOrigin=e.crossOrigin,M.src=s)})}}),u.readAsBinaryString!==m?u.readAsBinaryString(n):u.readAsText(n)})(this.response,u),D.load.msg.innerHTML=""},Pt.onprogress=function(j){var J,lt,Gt;j.lengthComputable?(D.load.lbarFill.style.width=j.loaded/j.total*100+"%",j.total>1e6?(J="MB",lt=(j.loaded/1e6).toFixed(2),Gt=(j.total/1e6).toFixed(2)):j.total>1e3?(J="kB",lt=(j.loaded/1e3).toFixed(1),Gt=(j.total/1e3).toFixed(1)):(J="B",lt=j.loaded,Gt=j.total),D.load.msg.innerHTML=lt+" / "+Gt+" "+J):(D.load.lbox.style.display="block",D.load.lbar.style.display="none")};try{Pt.open("GET",u,!0)}catch{Rt(e.strings.malformedURLError)}Pt.responseType="blob",Pt.setRequestHeader("Accept","image/*,*/*;q=0.9"),Pt.setRequestHeader("cache-control","no-cache"),Pt.withCredentials="use-credentials"===e.crossOrigin,Pt.send()}e.draggable&&at.classList.add("pnlm-grab"),at.classList.remove("pnlm-grabbing"),jt=!0===e.dynamicUpdate,e.dynamic&&jt&&(M=e.panorama,$t())}else Rt()}function le(n){return new RegExp("^(?:[a-z]+:)?//","i").test(n)||"/"==n[0]||"blob:"==n.slice(0,5)}function $t(){Y||(Y=new libpannellum.renderer(Ht)),Ot||(Ot=!0,At.addEventListener("mousedown",c,!1),w.addEventListener("mousemove",R,!1),w.addEventListener("mouseup",F,!1),e.mouseZoom&&(at.addEventListener("mousewheel",Wt,!1),at.addEventListener("DOMMouseScroll",Wt,!1)),e.doubleClickZoom&&At.addEventListener("dblclick",C,!1),h.addEventListener("mozfullscreenchange",yt,!1),h.addEventListener("webkitfullscreenchange",yt,!1),h.addEventListener("msfullscreenchange",yt,!1),h.addEventListener("fullscreenchange",yt,!1),"function"==typeof ResizeObserver?(te=new ResizeObserver(ot)).observe(h):(_t.addEventListener("resize",ot,!1),_t.addEventListener("orientationchange",ot,!1)),e.disableKeyboardCtrl||(h.addEventListener("keydown",zt,!1),h.addEventListener("keyup",dt,!1),h.addEventListener("blur",ht,!1)),w.addEventListener("mouseleave",F,!1),""===w.documentElement.style.pointerAction&&""===w.documentElement.style.touchAction?(At.addEventListener("pointerdown",it,!1),At.addEventListener("pointermove",W,!1),At.addEventListener("pointerup",pt,!1),At.addEventListener("pointerleave",pt,!1)):(At.addEventListener("touchstart",S,!1),At.addEventListener("touchmove",T,!1),At.addEventListener("touchend",V,!1)),_t.navigator.pointerEnabled&&(h.style.touchAction="none")),function r(){try{var n={};e.horizonPitch!==m&&(n.horizonPitch=e.horizonPitch*Math.PI/180),e.horizonRoll!==m&&(n.horizonRoll=e.horizonRoll*Math.PI/180),e.backgroundColor!==m&&(n.backgroundColor=e.backgroundColor),Y.init(M,e.type,e.haov*Math.PI/180,e.vaov*Math.PI/180,e.vOffset*Math.PI/180,o,n)}catch(s){if(!0!==e.dynamic&&(M=m),"webgl error"==s.type||"no webgl"==s.type)Rt();else{if("webgl size error"!=s.type)throw Rt(e.strings.unknownError),s;Rt(e.strings.textureSizeError.replace("%s",s.width).replace("%s",s.maxWidth))}}}(),Jt(e.hfov),setTimeout(function(){},500)}function Rt(n){n===m&&(n=e.strings.genericWebGLError),D.errorMsg.innerHTML="<p>"+n+"</p>",$.load.style.display="none",D.load.box.style.display="none",D.errorMsg.style.display="table",xt=!0,ct=m,Ht.style.display="none",Kt("error",n)}function de(n){D.interactionMsg.style.opacity=1,D.interactionMsg.innerHTML="<p>"+n+"</p>",D.interactionMsg.style.display="table",Kt("messageshown"),clearTimeout(D.interactionMsg.timeout),D.interactionMsg.removeEventListener("transitionend",Xt),D.interactionMsg.timeout=setTimeout(function(){D.interactionMsg.style.opacity=0,D.interactionMsg.addEventListener("transitionend",Xt)},2e3)}function Xt(){D.interactionMsg.style.opacity=0,D.interactionMsg.style.display="none",Kt("messagecleared")}function Yt(n){var s=h.getBoundingClientRect(),u={};return u.x=(n.clientX||n.pageX)-s.left,u.y=(n.clientY||n.pageY)-s.top,u}function c(n){if(n.preventDefault(),h.focus(),ct&&e.draggable&&!e.draggingHotSpot){var s=Yt(n);if(e.hotSpotDebug){var u=g(n);console.log("Pitch: "+u[0]+", Yaw: "+u[1]+", Center Pitch: "+e.pitch+", Center Yaw: "+e.yaw+", HFOV: "+e.hfov)}ve(),Ce(),e.roll=0,N.hfov=0,gt=!0,P=Date.now(),f=s.x,i=s.y,vt=e.yaw,B=e.pitch,at.classList.add("pnlm-grabbing"),at.classList.remove("pnlm-grab"),Kt("mousedown",n),v()}}function C(n){if(e.minHfov===e.hfov)tt.setHfov(U,1e3);else{var s=g(n);tt.lookAt(s[0],s[1],e.minHfov,1e3)}}function g(n){var s=Yt(n),u=Y.getCanvas(),b=u.clientWidth,I=u.clientHeight,L=s.x/b*2-1,et=(1-s.y/I*2)*I/b,j=1/Math.tan(e.hfov*Math.PI/360),H=Math.sin(e.pitch*Math.PI/180),J=Math.cos(e.pitch*Math.PI/180),lt=j*J-et*H,Gt=Math.sqrt(L*L+lt*lt),Ft=180*Math.atan((et*J+j*H)/Gt)/Math.PI,Zt=180*Math.atan2(L/Gt,lt/Gt)/Math.PI+e.yaw;return Zt<-180&&(Zt+=360),Zt>180&&(Zt-=360),[Ft,Zt]}function R(n){if(q)a(q,n);else if(gt&&ct){P=Date.now();var s=Y.getCanvas(),u=s.clientWidth,b=s.clientHeight,I=Yt(n),L=180*(Math.atan(f/u*2-1)-Math.atan(I.x/u*2-1))/Math.PI*e.hfov/90+vt;N.yaw=(L-e.yaw)%360*.2,e.yaw=L;var et=2*Math.atan(Math.tan(e.hfov/360*Math.PI)*b/u)*180/Math.PI,j=180*(Math.atan(I.y/b*2-1)-Math.atan(i/b*2-1))/Math.PI*et/90+B;N.pitch=.2*(j-e.pitch),e.pitch=j}}function F(n){q&&q.dragHandlerFunc&&q.dragHandlerFunc(n,q.dragHandlerArgs),q=null,gt&&(gt=!1,Date.now()-P>15&&(N.pitch=N.yaw=0),at.classList.add("pnlm-grab"),at.classList.remove("pnlm-grabbing"),P=Date.now(),Kt("mouseup",n))}function S(n){if(ct&&e.draggable&&!q){ve(),Ce(),e.roll=0,N.hfov=0;var s=Yt(n.targetTouches[0]);if(f=s.x,i=s.y,2==n.targetTouches.length){var u=Yt(n.targetTouches[1]);f+=.5*(u.x-s.x),i+=.5*(u.y-s.y),rt=Math.sqrt((s.x-u.x)*(s.x-u.x)+(s.y-u.y)*(s.y-u.y))}gt=!0,P=Date.now(),vt=e.yaw,B=e.pitch,Kt("touchstart",n),v()}}function T(n){if(e.draggable&&(e.dragConfirm||n.preventDefault(),ct&&(P=Date.now()),gt&&ct)){var s=Yt(n.targetTouches[0]),u=s.x,b=s.y;if(2==n.targetTouches.length&&-1!=rt){var I=Yt(n.targetTouches[1]);u+=.5*(I.x-s.x),b+=.5*(I.y-s.y);var L=Math.sqrt((s.x-I.x)*(s.x-I.x)+(s.y-I.y)*(s.y-I.y));Jt(e.hfov+.1*(rt-L)),rt=L}var et=e.hfov/360*e.touchPanSpeedCoeffFactor;if(ft||"both"!=e.dragConfirm&&"yaw"!=e.dragConfirm||2==n.targetTouches.length){var j=(f-u)*et+vt;N.yaw=(j-e.yaw)%360*.2,e.yaw=j}else f!=u&&de("yaw"==e.dragConfirm?e.strings.twoTouchXActivate:e.strings.twoTouchActivate);if(ft||"both"!=e.dragConfirm&&"pitch"!=e.dragConfirm||2==n.targetTouches.length){var H=(b-i)*et+B;N.pitch=.2*(H-e.pitch),e.pitch=H}else i!=b&&de("pitch"==e.dragConfirm?e.strings.twoTouchYActivate:e.strings.twoTouchActivate);("yaw"==e.dragConfirm||"pitch"==e.dragConfirm||"both"==e.dragConfirm)&&2==n.targetTouches.length&&(Xt(),n.preventDefault())}}function V(){q=null,gt=!1,Date.now()-P>150&&(N.pitch=N.yaw=0),rt=-1,P=Date.now(),Kt("touchend",event)}ie.className="pnlm-compass pnlm-controls pnlm-control",at.appendChild(ie),X(K.firstScene?K.firstScene:K.default&&K.default.firstScene?K.default.firstScene:null),z(!0);var k=[],Z=[];function it(n){if("touch"==n.pointerType){if(!ct||!e.draggable)return;k.push(n.pointerId),Z.push({clientX:n.clientX,clientY:n.clientY}),n.targetTouches=Z,S(n),n.preventDefault()}}function W(n){if("touch"==n.pointerType){if(q)return void a(q,n);if(!e.draggable)return;for(var s=0;s<k.length;s++)if(n.pointerId==k[s])return Z[s].clientX=n.clientX,Z[s].clientY=n.clientY,n.targetTouches=Z,T(n),void n.preventDefault()}}function pt(n){if(q&&q.dragHandlerFunc&&q.dragHandlerFunc(n,q.dragHandlerArgs),q=null,"touch"==n.pointerType){for(var s=!1,u=0;u<k.length;u++)n.pointerId==k[u]&&(k[u]=m),k[u]&&(s=!0);s||(k=[],Z=[],V()),n.preventDefault()}}function Wt(n){if(ct&&("fullscreenonly"!=e.mouseZoom||ft)){if(!ft&&"ctrl"==e.mouseZoom&&!n.ctrlKey){var s=-1!=navigator.platform.indexOf("Mac")?"control":"ctrl";return void de(e.strings.ctrlZoomActivate.replace("%s",'<kbd class="pnlm-outline">'+s+"</kbd>"))}Xt(),n.preventDefault(),ve(),P=Date.now(),n.wheelDeltaY?(Jt(e.hfov-.05*n.wheelDeltaY),N.hfov=n.wheelDelta<0?1:-1):n.wheelDelta?(Jt(e.hfov-.05*n.wheelDelta),N.hfov=n.wheelDelta<0?1:-1):n.detail&&(Jt(e.hfov+1.5*n.detail),N.hfov=n.detail>0?1:-1),v()}}function zt(n){ve(),P=Date.now(),Ce(),e.roll=0;var s=n.which||n.keycode;e.capturedKeyNumbers.indexOf(s)<0||!ft&&(16==s||17==s)&&"ctrl"==e.mouseZoom||(n.preventDefault(),27==s?ft&&G():Mt(s,!0))}function ht(){for(var n=0;n<10;n++)A[n]=!1}function dt(n){var s=n.which||n.keycode;e.capturedKeyNumbers.indexOf(s)<0||(n.preventDefault(),Mt(s,!1))}function Mt(n,s){var u=!1;switch(n){case 109:case 189:case 17:case 173:A[0]!=s&&(u=!0),A[0]=s;break;case 107:case 187:case 16:case 61:A[1]!=s&&(u=!0),A[1]=s;break;case 38:A[2]!=s&&(u=!0),A[2]=s;break;case 87:A[6]!=s&&(u=!0),A[6]=s;break;case 40:A[3]!=s&&(u=!0),A[3]=s;break;case 83:A[7]!=s&&(u=!0),A[7]=s;break;case 37:A[4]!=s&&(u=!0),A[4]=s;break;case 65:A[8]!=s&&(u=!0),A[8]=s;break;case 39:A[5]!=s&&(u=!0),A[5]=s;break;case 68:A[9]!=s&&(u=!0),A[9]=s}u&&s&&(nt=typeof performance<"u"&&performance.now()?performance.now():Date.now(),v())}function wt(n){var s=ut[n],u=Math.min(1,Math.max((Date.now()-s.startTime)/1e3/(s.duration/1e3),0)),b=s.startPosition+e.animationTimingFunction(u)*(s.endPosition-s.startPosition);(s.endPosition>s.startPosition&&b>=s.endPosition||s.endPosition<s.startPosition&&b<=s.endPosition||s.endPosition===s.startPosition)&&(b=s.endPosition,N[n]=0,delete ut[n]),e[n]=b}function ot(){yt("resize")}function v(){Nt||(Nt=!0,Dt())}function Dt(){if(!_e)if(function Bt(){var n;if(ct){var s=Y.getCanvas();!1!==e.autoRotate&&(e.yaw>360?e.yaw-=360:e.yaw<-360&&(e.yaw+=360)),n=e.yaw;var u=0;if(e.avoidShowingBackground){var I=e.hfov/2,L=180*Math.atan2(Math.tan(I/180*Math.PI),s.width/s.height)/Math.PI;e.vaov>e.haov?Math.min(Math.cos((e.pitch-I)/180*Math.PI),Math.cos((e.pitch+I)/180*Math.PI)):u=I*(1-Math.min(Math.cos((e.pitch-L)/180*Math.PI),Math.cos((e.pitch+L)/180*Math.PI)))}var j=e.maxYaw-e.minYaw,H=-180,J=180;j<360&&(H=e.minYaw+e.hfov/2+u,J=e.maxYaw-e.hfov/2-u,j<e.hfov&&(H=J=(H+J)/2),e.yaw=Math.max(H,Math.min(J,e.yaw))),!1===e.autoRotate&&(e.yaw>360?e.yaw-=360:e.yaw<-360&&(e.yaw+=360)),!1!==e.autoRotate&&n!=e.yaw&&nt!==m&&(e.autoRotate*=-1);var lt=2*Math.atan(Math.tan(e.hfov/180*Math.PI*.5)/(s.width/s.height))/Math.PI*180,Gt=e.minPitch+lt/2,Ft=e.maxPitch-lt/2;e.maxPitch-e.minPitch<lt&&(Gt=Ft=(Gt+Ft)/2),isNaN(Gt)&&(Gt=-90),isNaN(Ft)&&(Ft=90),e.pitch=Math.max(Gt,Math.min(Ft,e.pitch)),Y.render(e.pitch*Math.PI/180,e.yaw*Math.PI/180,e.hfov*Math.PI/180,{roll:e.roll*Math.PI/180,dynamic:jt}),ne&&(ne=jt=!1),Tt(),e.compass&&(ie.style.transform="rotate("+(-e.yaw-e.northOffset)+"deg)",ie.style.webkitTransform="rotate("+(-e.yaw-e.northOffset)+"deg)")}}(),Lt&&clearTimeout(Lt),gt||!0===bt)requestAnimationFrame(Dt);else if(A[0]||A[1]||A[2]||A[3]||A[4]||A[5]||A[6]||A[7]||A[8]||A[9]||e.autoRotate||ut.pitch||ut.yaw||ut.hfov||Math.abs(N.yaw)>.01||Math.abs(N.pitch)>.01||Math.abs(N.hfov)>.01)(function It(){if(ct){var I,n=!1,s=e.pitch,u=e.yaw,b=e.hfov;I=typeof performance<"u"&&performance.now()?performance.now():Date.now(),nt===m&&(nt=I);var L=(I-nt)*e.hfov/1200;if(L=Math.min(L,10),A[0]&&!0===e.keyboardZoom&&(Jt(e.hfov+(.8*N.hfov+.4)*L),n=!0),A[1]&&!0===e.keyboardZoom&&(Jt(e.hfov+(.8*N.hfov-.2)*L),n=!0),(A[2]||A[6])&&(e.pitch+=(.8*N.pitch+.2)*L,n=!0),(A[3]||A[7])&&(e.pitch+=(.8*N.pitch-.2)*L,n=!0),(A[4]||A[8])&&(e.yaw+=(.8*N.yaw-.2)*L,n=!0),(A[5]||A[9])&&(e.yaw+=(.8*N.yaw+.2)*L,n=!0),n&&(P=Date.now()),e.autoRotate){if(I-nt>.001){var et=(I-nt)/1e3,j=(N.yaw/et*L-.2*e.autoRotate)*et;j=(-e.autoRotate>0?1:-1)*Math.min(Math.abs(e.autoRotate*et),Math.abs(j)),e.yaw+=j}e.autoRotateStopDelay&&(e.autoRotateStopDelay-=I-nt,e.autoRotateStopDelay<=0&&(e.autoRotateStopDelay=!1,E=e.autoRotate,e.autoRotate=0))}if(ut.pitch&&(wt("pitch"),s=e.pitch),ut.yaw&&(wt("yaw"),u=e.yaw),ut.hfov&&(wt("hfov"),b=e.hfov),L>0&&!e.autoRotate){var H=1-e.friction;!A[4]&&!A[5]&&!A[8]&&!A[9]&&!ut.yaw&&(e.yaw+=N.yaw*L*H),!A[2]&&!A[3]&&!A[6]&&!A[7]&&!ut.pitch&&(e.pitch+=N.pitch*L*H),!A[0]&&!A[1]&&!ut.hfov&&(e.hfov>90&&(H*=1-(e.hfov-90)/90),Jt(e.hfov+N.hfov*L*H))}if(nt=I,L>0){N.yaw=.8*N.yaw+(e.yaw-u)/L*.2,N.pitch=.8*N.pitch+(e.pitch-s)/L*.2,N.hfov=.8*N.hfov+(e.hfov-b)/L*.2;var J=e.autoRotate?Math.abs(e.autoRotate):5;N.yaw=Math.min(J,Math.max(N.yaw,-J)),N.pitch=Math.min(J,Math.max(N.pitch,-J)),N.hfov=Math.min(J,Math.max(N.hfov,-J))}A[0]&&A[1]&&(N.hfov=0),(A[2]||A[6])&&(A[3]||A[7])&&(N.pitch=0),(A[4]||A[8])&&(A[5]||A[9])&&(N.yaw=0)}})(),e.autoRotateInactivityDelay>=0&&E&&Date.now()-P>e.autoRotateInactivityDelay&&!e.autoRotate&&(e.autoRotate=E,tt.lookAt(st,m,U,3e3)),requestAnimationFrame(Dt);else if(Y&&(Y.isLoading()||!0===e.dynamic&&jt))requestAnimationFrame(Dt);else{tt.getPitch&&tt.getYaw&&tt.getHfov&&Kt("animatefinished",{pitch:tt.getPitch(),yaw:tt.getYaw(),hfov:tt.getHfov()}),Nt=!1,nt=m;var n=e.autoRotateInactivityDelay-(Date.now()-P);n>0?Lt=setTimeout(function(){e.autoRotate=E,tt.lookAt(st,m,U,3e3),v()},n):e.autoRotateInactivityDelay>=0&&E&&(e.autoRotate=E,tt.lookAt(st,m,U,3e3),v())}}function Et(n,s,u,b){this.w=n,this.x=s,this.y=u,this.z=b}function x(n){var s=function d(n,s,u){var b=function Ut(n,s,u){var b=[s?s*Math.PI/180/2:0,u?u*Math.PI/180/2:0,n?n*Math.PI/180/2:0],I=[Math.cos(b[0]),Math.cos(b[1]),Math.cos(b[2])],L=[Math.sin(b[0]),Math.sin(b[1]),Math.sin(b[2])];return new Et(I[0]*I[1]*I[2]-L[0]*L[1]*L[2],L[0]*I[1]*I[2]-I[0]*L[1]*L[2],I[0]*L[1]*I[2]+L[0]*I[1]*L[2],I[0]*I[1]*L[2]+L[0]*L[1]*I[2])}(n,s,u);b=b.multiply(new Et(Math.sqrt(.5),-Math.sqrt(.5),0,0));var I=_t.orientation?-_t.orientation*Math.PI/180/2:0;return b.multiply(new Et(Math.cos(I),0,-Math.sin(I),0))}(n.alpha,n.beta,n.gamma).toEulerAngles();"number"==typeof bt&&bt<10?bt+=1:10===bt?(mt=s[2]/Math.PI*180+e.yaw,bt=!0,requestAnimationFrame(Dt)):(e.pitch=s[0]/Math.PI*180,e.roll=-s[1]/Math.PI*180,e.yaw=-s[2]/Math.PI*180+mt)}function o(){if(e.sceneFadeDuration&&Y.fadeImg!==m){Y.fadeImg.style.opacity=0;var n=Y.fadeImg;delete Y.fadeImg,setTimeout(function(){Ht.removeChild(n),Kt("scenechangefadedone")},e.sceneFadeDuration)}ie.style.display=e.compass?"inline":"none",function p(){ue||(e.hotSpots?(e.hotSpots=e.hotSpots.sort(function(n,s){return n.pitch<s.pitch}),e.hotSpots.forEach(l)):e.hotSpots=[],ue=!0,Tt())}(),D.load.box.style.display="none",O!==m&&(Ht.removeChild(O),O=m),ct=!0,!0!==e.dynamic&&(M=m),v(),Kt("load")}function l(n){n.pitch=Number(n.pitch)||0,n.yaw=Number(n.yaw)||0;var s=w.createElement("div");s.tabIndex=-1,s.className="pnlm-hotspot-base",s.className+=n.cssClass?" "+n.cssClass:" pnlm-hotspot pnlm-sprite pnlm-"+he(n.type);var b,u=w.createElement("span");if(n.text&&(u.innerHTML=he(n.text)),n.video){var I=w.createElement("video"),L=n.video;e.basePath&&!le(L)&&(L=e.basePath+L),I.src=ge(L),I.controls=!0,I.style.width=n.width+"px",at.appendChild(s),u.appendChild(I)}else if(n.image){var et=n.image;e.basePath&&!le(et)&&(et=e.basePath+et),(b=w.createElement("a")).href=ge(n.URL?n.URL:et,!0),e.targetBlank&&(b.target="_blank",b.rel="noopener"),u.appendChild(b);var j=w.createElement("img");j.src=ge(et),j.style.width=n.width+"px",j.style.paddingTop="5px",at.appendChild(s),b.appendChild(j),u.style.maxWidth="initial"}else if(n.URL){if((b=w.createElement("a")).href=ge(n.URL,!0),n.attributes)for(var H in n.attributes)b.setAttribute(H,n.attributes[H]);else e.targetBlank&&(b.target="_blank",b.rel="noopener");at.appendChild(b),s.className+=" pnlm-pointer",u.className+=" pnlm-pointer",b.appendChild(s)}else n.sceneId&&(s.onclick=s.ontouchend=function(){return s.clicked||(s.clicked=!0,Me(n.sceneId,n.targetPitch,n.targetYaw,n.targetHfov)),!1},s.className+=" pnlm-pointer",u.className+=" pnlm-pointer"),at.appendChild(s);n.createTooltipFunc?n.createTooltipFunc(s,n.createTooltipArgs):(n.text||n.video||n.image)&&(s.classList.add("pnlm-tooltip"),s.appendChild(u),u.style.width=u.scrollWidth-20+"px",u.style.marginLeft=-(u.scrollWidth-s.offsetWidth)/2+"px",u.style.marginTop=-u.scrollHeight-12+"px"),n.clickHandlerFunc&&(s.addEventListener("click",function(J){n.clickHandlerFunc(J,n.clickHandlerArgs)},"false"),s.addEventListener(""===w.documentElement.style.pointerAction&&""===w.documentElement.style.touchAction?"pointerup":"touchend",function(J){n.clickHandlerFunc(J,n.clickHandlerArgs)},!1),s.className+=" pnlm-pointer",u.className+=" pnlm-pointer"),n.draggable&&(s.addEventListener("mousedown",function(J){n.dragHandlerFunc&&n.dragHandlerFunc(J,n.dragHandlerArgs),q=n}),""===w.documentElement.style.pointerAction&&""===w.documentElement.style.touchAction&&s.addEventListener("pointerdown",function(J){n.dragHandlerFunc&&n.dragHandlerFunc(J,n.dragHandlerArgs),q=n}),s.addEventListener("touchmove",function(J){a(n,J.targetTouches[0])}),s.addEventListener("touchend",function(J){n.dragHandlerFunc&&n.dragHandlerFunc(J,n.dragHandlerArgs),q=null})),n.div=s}function a(n,s){var u=g(s);n.pitch=u[0],n.yaw=u[1],y(n)}function y(n){var s=Math.sin(n.pitch*Math.PI/180),u=Math.cos(n.pitch*Math.PI/180),b=Math.sin(e.pitch*Math.PI/180),I=Math.cos(e.pitch*Math.PI/180),L=Math.cos((-n.yaw+e.yaw)*Math.PI/180),et=s*b+u*L*I;if(n.yaw<=90&&n.yaw>-90&&et<=0||(n.yaw>90||n.yaw<=-90)&&et<=0)n.div.style.visibility="hidden";else{var j=Math.sin((-n.yaw+e.yaw)*Math.PI/180),H=Math.tan(e.hfov*Math.PI/360);n.div.style.visibility="visible";var J=Y.getCanvas(),lt=J.clientWidth,Gt=J.clientHeight,Ft=[-lt/H*j*u/et/2,-lt/H*(s*I-u*L*b)/et/2],Zt=Math.sin(e.roll*Math.PI/180),Te=Math.cos(e.roll*Math.PI/180);(Ft=[Ft[0]*Te-Ft[1]*Zt,Ft[0]*Zt+Ft[1]*Te])[0]+=(lt-n.div.offsetWidth)/2,Ft[1]+=(Gt-n.div.offsetHeight)/2;var Ee="translate("+Ft[0]+"px, "+Ft[1]+"px) translateZ(9999px) rotate("+e.roll+"deg)";n.scale&&(Ee+=" scale("+U/e.hfov/et+")"),n.div.style.webkitTransform=Ee,n.div.style.MozTransform=Ee,n.div.style.transform=Ee}}function Tt(){e.hotSpots.forEach(y)}function X(n){e={};var s,u,b=["haov","vaov","vOffset","northOffset","horizonPitch","horizonRoll"];for(s in Ct=[],oe)oe.hasOwnProperty(s)&&(e[s]=oe[s]);for(s in K.default)if(K.default.hasOwnProperty(s))if("strings"==s)for(u in K.default.strings)K.default.strings.hasOwnProperty(u)&&(e.strings[u]=he(K.default.strings[u]));else e[s]=K.default[s],b.indexOf(s)>=0&&Ct.push(s);if(null!==n&&""!==n&&K.scenes&&K.scenes[n]){var I=K.scenes[n];for(s in I)if(I.hasOwnProperty(s))if("strings"==s)for(u in I.strings)I.strings.hasOwnProperty(u)&&(e.strings[u]=he(I.strings[u]));else e[s]=I[s],b.indexOf(s)>=0&&Ct.push(s);e.scene=n}for(s in K)if(K.hasOwnProperty(s))if("strings"==s)for(u in K.strings)K.strings.hasOwnProperty(u)&&(e.strings[u]=he(K.strings[u]));else e[s]=K[s],b.indexOf(s)>=0&&Ct.push(s)}function z(n){if((n=n||!1)&&"preview"in e){var s=e.preview;e.basePath&&!le(s)&&(s=e.basePath+s),(O=w.createElement("div")).className="pnlm-preview-img",O.style.backgroundImage="url('"+function De(n){return ge(n).replace(/"/g,"%22").replace(/'/g,"%27")}(s)+"')",Ht.appendChild(O)}var u=e.title,b=e.author;for(var I in n&&("previewTitle"in e&&(e.title=e.previewTitle),"previewAuthor"in e&&(e.author=e.previewAuthor)),e.hasOwnProperty("title")||(D.title.innerHTML=""),e.hasOwnProperty("author")||(D.author.innerHTML=""),!e.hasOwnProperty("title")&&!e.hasOwnProperty("author")&&(D.container.style.display="none"),e.targetBlank&&(re.rel="noopener",re.target="_blank"),$.load.innerHTML="<div><p>"+e.strings.loadButtonLabel+"</p></div>",D.load.boxp.innerHTML=e.strings.loadingLabel,e)if(e.hasOwnProperty(I))switch(I){case"title":D.title.innerHTML=he(e[I]),D.container.style.display="inline";break;case"author":var L=he(e[I]);if(e.authorURL){var et=w.createElement("a");et.href=ge(e.authorURL,!0),e.targetBlank&&(et.target="_blank",et.rel="noopener"),et.innerHTML=he(e[I]),L=et.outerHTML}D.author.innerHTML=e.strings.bylineLabel.replace("%s",L),D.container.style.display="inline";break;case"hfov":Jt(Number(e[I]));break;case"autoLoad":!0===e[I]&&Y===m&&(D.load.box.style.display="inline",$.load.style.display="none",pe());break;case"showZoomCtrl":$.zoom.style.display=e[I]&&0!=e.showControls?"block":"none";break;case"showFullscreenCtrl":$.fullscreen.style.display=e[I]&&0!=e.showControls&&("fullscreen"in w||"mozFullScreen"in w||"webkitIsFullScreen"in w||"msFullscreenElement"in w)?"block":"none";break;case"hotSpotDebug":se.style.display=e[I]?"block":"none";break;case"showControls":e[I]||($.orientation.style.display="none",$.zoom.style.display="none",$.fullscreen.style.display="none");break;case"orientationOnByDefault":e[I]&&be()}n&&(u?e.title=u:delete e.title,b?e.author=b:delete e.author)}function G(){if(ct&&!xt)if(ft)w.exitFullscreen?w.exitFullscreen():w.mozCancelFullScreen?w.mozCancelFullScreen():w.webkitCancelFullScreen?w.webkitCancelFullScreen():w.msExitFullscreen&&w.msExitFullscreen();else try{h.requestFullscreen?h.requestFullscreen():h.mozRequestFullScreen?h.mozRequestFullScreen():h.msRequestFullscreen?h.msRequestFullscreen():h.webkitRequestFullScreen()}catch{}}function yt(n){w.fullscreenElement||w.fullscreen||w.mozFullScreen||w.webkitIsFullScreen||w.msFullscreenElement?($.fullscreen.classList.add("pnlm-fullscreen-toggle-button-active"),ft=!0):($.fullscreen.classList.remove("pnlm-fullscreen-toggle-button-active"),ft=!1),"resize"!==n&&Kt("fullscreenchange",ft),Y.resize(),Jt(e.hfov),v()}function Ie(n){var s=e.minHfov;if("multires"==e.type&&Y&&!e.multiResMinHfov&&(s=Math.min(s,Y.getCanvas().width/(e.multiRes.cubeResolution/90*.9))),s>e.maxHfov)return console.log("HFOV bounds do not make sense (minHfov > maxHfov)."),e.hfov;var u=e.hfov;if(u=n<s?s:n>e.maxHfov?e.maxHfov:n,e.avoidShowingBackground&&Y&&!isNaN(e.maxPitch-e.minPitch)){var b=Y.getCanvas();u=Math.min(u,360*Math.atan(Math.tan((e.maxPitch-e.minPitch)/360*Math.PI)/b.height*b.width)/Math.PI)}return u}function Jt(n){e.hfov=Ie(n),Kt("zoomchange",e.hfov)}function ve(){ut={},E=e.autoRotate?e.autoRotate:E,e.autoRotate=!1}function we(){(function ce(){xt&&(D.load.box.style.display="none",D.errorMsg.style.display="none",xt=!1,Ht.style.display="block",Kt("errorcleared"))})(),ct=!1,Xt(),$.load.style.display="none",D.load.box.style.display="inline",pe()}function Me(n,s,u,b,I){var L,et,j,H;if(ct||(I=!0),ct=!1,ut={},e.sceneFadeDuration&&!I){var J=Y.render(e.pitch*Math.PI/180,e.yaw*Math.PI/180,e.hfov*Math.PI/180,{returnImage:"ImageBitmap"});if(J!==m)return(L=J.then?w.createElement("canvas"):new Image).className="pnlm-fade-img",L.style.transition="opacity "+e.sceneFadeDuration/1e3+"s",L.style.width="100%",L.style.height="100%",J.then?J.then(function(lt){L.width=lt.width,L.height=lt.height,L.getContext("2d").drawImage(lt,0,0),Me(n,s,u,b,!0)}):(L.onload=function(){Me(n,s,u,b,!0)},L.src=J),Ht.appendChild(L),void(Y.fadeImg=L)}et="same"===s?e.pitch:s,j="same"===u?e.yaw:"sameAzimuth"===u?e.yaw+(e.northOffset||0)-(K.scenes[n].northOffset||0):u,H="same"===b?e.hfov:b,function _(){var n=e.hotSpots;if(ue=!1,delete e.hotSpots,n)for(var s=0;s<n.length;s++){var u=n[s].div;if(u){for(;u.parentNode&&u.parentNode!=at;)u=u.parentNode;at.removeChild(u)}delete n[s].div}}(),X(n),N.yaw=N.pitch=N.hfov=0,z(),et!==m&&(e.pitch=et),j!==m&&(e.yaw=j),H!==m&&(e.hfov=H),Kt("scenechange",n),we()}function Ce(){_t.removeEventListener("deviceorientation",x),$.orientation.classList.remove("pnlm-orientation-button-active"),bt=!1}function be(){ee&&(typeof DeviceMotionEvent<"u"&&"function"==typeof DeviceMotionEvent.requestPermission?DeviceOrientationEvent.requestPermission().then(function(n){"granted"==n&&(bt=1,_t.addEventListener("deviceorientation",x),$.orientation.classList.add("pnlm-orientation-button-active"))}):(bt=1,_t.addEventListener("deviceorientation",x),$.orientation.classList.add("pnlm-orientation-button-active")))}function he(n){return K.escapeHTML?String(n).split(/&/g).join("&amp;").split('"').join("&quot;").split("'").join("&#39;").split("<").join("&lt;").split(">").join("&gt;").split("/").join("&#x2f;").split("\n").join("<br>"):String(n).split("\n").join("<br>")}function ge(n,s){try{var u=decodeURIComponent(function Re(n){return n.replace(/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/gi,function(s,u){return"colon"===(u=u.toLowerCase())?":":"#"===u.charAt(0)?"x"===u.charAt(1)?String.fromCharCode(parseInt(u.substring(2),16)):String.fromCharCode(+u.substring(1)):""})}(n)).replace(/[^\w:]/g,"").toLowerCase()}catch{return"about:blank"}return 0===u.indexOf("javascript:")||0===u.indexOf("vbscript:")?(console.log("Script URL removed."),"about:blank"):s&&0===u.indexOf("data:")?(console.log("Data URI removed from link."),"about:blank"):n}function Kt(n){if(n in Q)for(var s=Q[n].length;s>0;s--)Q[n][Q[n].length-s].apply(null,[].slice.call(arguments,1))}Et.prototype.multiply=function(n){return new Et(this.w*n.w-this.x*n.x-this.y*n.y-this.z*n.z,this.x*n.w+this.w*n.x+this.y*n.z-this.z*n.y,this.y*n.w+this.w*n.y+this.z*n.x-this.x*n.z,this.z*n.w+this.w*n.z+this.x*n.y-this.y*n.x)},Et.prototype.toEulerAngles=function(){return[Math.atan2(2*(this.w*this.x+this.y*this.z),1-2*(this.x*this.x+this.y*this.y)),Math.asin(2*(this.w*this.y-this.z*this.x)),Math.atan2(2*(this.w*this.z+this.x*this.y),1-2*(this.y*this.y+this.z*this.z))]},this.isLoaded=function(){return!!ct},this.getPitch=function(){return e.pitch},this.setPitch=function(n,s,u,b){return P=Date.now(),Math.abs(n-e.pitch)<=Qt?("function"==typeof u&&u(b),this):((s=s==m?1e3:Number(s))?(ut.pitch={startTime:Date.now(),startPosition:e.pitch,endPosition:n,duration:s},"function"==typeof u&&setTimeout(function(){u(b)},s)):e.pitch=n,v(),this)},this.getPitchBounds=function(){return[e.minPitch,e.maxPitch]},this.setPitchBounds=function(n){return e.minPitch=Math.max(-90,Math.min(n[0],90)),e.maxPitch=Math.max(-90,Math.min(n[1],90)),this},this.getYaw=function(){return(e.yaw+540)%360-180},this.setYaw=function(n,s,u,b){return P=Date.now(),Math.abs(n-e.yaw)<=Qt?("function"==typeof u&&u(b),this):(n=(n+180)%360-180,(s=s==m?1e3:Number(s))?(e.yaw-n>180?n+=360:n-e.yaw>180&&(n-=360),ut.yaw={startTime:Date.now(),startPosition:e.yaw,endPosition:n,duration:s},"function"==typeof u&&setTimeout(function(){u(b)},s)):e.yaw=n,v(),this)},this.getYawBounds=function(){return[e.minYaw,e.maxYaw]},this.setYawBounds=function(n){return e.minYaw=Math.max(-360,Math.min(n[0],360)),e.maxYaw=Math.max(-360,Math.min(n[1],360)),this},this.getHfov=function(){return e.hfov},this.setHfov=function(n,s,u,b){return P=Date.now(),Math.abs(n-e.hfov)<=Qt?("function"==typeof u&&u(b),this):((s=s==m?1e3:Number(s))?(ut.hfov={startTime:Date.now(),startPosition:e.hfov,endPosition:Ie(n),duration:s},"function"==typeof u&&setTimeout(function(){u(b)},s)):Jt(n),v(),this)},this.getHfovBounds=function(){return[e.minHfov,e.maxHfov]},this.setHfovBounds=function(n){return e.minHfov=Math.max(0,n[0]),e.maxHfov=Math.max(0,n[1]),this},this.lookAt=function(n,s,u,b,I,L){return b=b==m?1e3:Number(b),n!==m&&Math.abs(n-e.pitch)>Qt&&(this.setPitch(n,b,I,L),I=m),s!==m&&Math.abs(s-e.yaw)>Qt&&(this.setYaw(s,b,I,L),I=m),u!==m&&Math.abs(u-e.hfov)>Qt&&(this.setHfov(u,b,I,L),I=m),"function"==typeof I&&I(L),this},this.getNorthOffset=function(){return e.northOffset},this.setNorthOffset=function(n){return e.northOffset=Math.min(360,Math.max(0,n)),v(),this},this.getHorizonRoll=function(){return e.horizonRoll},this.setHorizonRoll=function(n){return e.horizonRoll=Math.min(90,Math.max(-90,n)),Y.setPose(e.horizonPitch*Math.PI/180,e.horizonRoll*Math.PI/180),v(),this},this.getHorizonPitch=function(){return e.horizonPitch},this.setHorizonPitch=function(n){return e.horizonPitch=Math.min(90,Math.max(-90,n)),Y.setPose(e.horizonPitch*Math.PI/180,e.horizonRoll*Math.PI/180),v(),this},this.startAutoRotate=function(n,s,u,b){return s=s===m?st:s,u=u===m?U:u,e.autoRotate=n=n||E||1,b!==m&&(e.autoRotateInactivityDelay=b),tt.lookAt(s,m,u,3e3),v(),this},this.stopAutoRotate=function(){return E=e.autoRotate?e.autoRotate:E,e.autoRotate=!1,e.autoRotateInactivityDelay=-1,this},this.stopMovement=function(){ve(),N={yaw:0,pitch:0,hfov:0}},this.getRenderer=function(){return Y},this.setUpdate=function(n){return(jt=!0===n)&&(ne=!1,Y===m?$t():v()),this},this.updateOnce=function(){return jt=ne=!0,Y===m?$t():v(),this},this.mouseEventToCoords=function(n){return g(n)},this.loadScene=function(n,s,u,b){return!1!==ct&&Me(n,s,u,b),this},this.getScene=function(){return e.scene},this.addScene=function(n,s){return K.scenes[n]=s,this},this.removeScene=function(n){return!(e.scene==n||!K.scenes.hasOwnProperty(n)||(delete K.scenes[n],0))},this.toggleFullscreen=function(){return G(),this},this.getConfig=function(){return e},this.getContainer=function(){return h},this.addHotSpot=function(n,s){if(s===m&&e.scene===m)e.hotSpots.push(n);else{var u=s!==m?s:e.scene;if(!K.scenes.hasOwnProperty(u))throw"Invalid scene ID!";K.scenes[u].hasOwnProperty("hotSpots")||(K.scenes[u].hotSpots=[],u==e.scene&&(e.hotSpots=K.scenes[u].hotSpots)),K.scenes[u].hotSpots.push(n)}return(s===m||e.scene==s)&&(l(n),ct&&y(n)),this},this.removeHotSpot=function(n,s){if(s===m||e.scene==s){if(!e.hotSpots)return!1;for(var u=0;u<e.hotSpots.length;u++)if(e.hotSpots[u].hasOwnProperty("id")&&e.hotSpots[u].id==n){for(var b=e.hotSpots[u].div;b.parentNode!=at;)b=b.parentNode;return at.removeChild(b),delete e.hotSpots[u].div,e.hotSpots.splice(u,1),!0}}else{if(!K.scenes.hasOwnProperty(s))return!1;if(!K.scenes[s].hasOwnProperty("hotSpots"))return!1;for(var I=0;I<K.scenes[s].hotSpots.length;I++)if(K.scenes[s].hotSpots[I].hasOwnProperty("id")&&K.scenes[s].hotSpots[I].id==n)return K.scenes[s].hotSpots.splice(I,1),!0}},this.resize=function(){Y&&ot()},this.isOrientationSupported=function(){return ee||!1},this.stopOrientation=function(){Ce()},this.startOrientation=function(){be()},this.isOrientationActive=function(){return!!bt},this.on=function(n,s){return Q[n]=Q[n]||[],Q[n].push(s),this},this.off=function(n,s){if(!n)return Q={},this;if(s){var u=Q[n].indexOf(s);u>=0&&Q[n].splice(u,1),0==Q[n].length&&delete Q[n]}else delete Q[n];return this},this.destroy=function(){if(_e=!0,clearTimeout(Lt),Pt&&Pt.abort(),Array.isArray(M))for(var n=0;n<6;n++)M[n].src="";Y&&Y.destroy(),Ot&&(w.removeEventListener("mousemove",R,!1),w.removeEventListener("mouseup",F,!1),h.removeEventListener("mozfullscreenchange",yt,!1),h.removeEventListener("webkitfullscreenchange",yt,!1),h.removeEventListener("msfullscreenchange",yt,!1),h.removeEventListener("fullscreenchange",yt,!1),te?te.disconnect():(_t.removeEventListener("resize",ot,!1),_t.removeEventListener("orientationchange",ot,!1)),h.removeEventListener("keydown",zt,!1),h.removeEventListener("keyup",dt,!1),h.removeEventListener("blur",ht,!1),w.removeEventListener("mouseleave",F,!1)),h.innerHTML="",h.classList.remove("pnlm-container")}}return{viewer:function(h,K){return new t(h,K)}}}(window,document)},4252:(_t,w,m)=>{"use strict";m.d(w,{r:()=>K});var t=m(7788),h=m(8351);let K=(()=>{class tt{constructor(Y){this.stepper=Y}selectionChanged(){const Y=this.stepper._getStepLabelId(this.stepper.selectedIndex),O=document.getElementById(Y);O&&O.scrollIntoView({block:"start",inline:"nearest",behavior:"smooth"})}static#t=this.\u0275fac=function(O){return new(O||tt)(t.rXU(h.M6))};static#e=this.\u0275dir=t.FsC({type:tt,selectors:[["mat-vertical-stepper"]],hostBindings:function(O,q){1&O&&t.bIt("animationDone",function(){return q.selectionChanged()})}})}return tt})()},9256:(_t,w,m)=>{"use strict";m.d(w,{G:()=>t});class t{}},4434:(_t,w,m)=>{"use strict";m.d(w,{o:()=>K});var t=m(5312),h=m(9417);class K{constructor(){this.message="\u062f\u0631 \u062d\u0627\u0644 \u062f\u0631\u06cc\u0627\u0641\u062a \u0627\u0637\u0644\u0627\u0639\u0627\u062a",this.diameter=20,this.strokeWidth=50,this.backdropEnabled=!0,this.Globally=!0,this.positionGloballyCenter=!0,this.display=!1,this.consoleLog=!0,this.guid="",this.processInfoAll=new Map,this.guid=`${this.S4()}${this.S4()}-${this.S4()}-${this.S4()}-${this.S4()}-${this.S4()}${this.S4()}${this.S4()}`,this.consoleLog=t.c.ProgressConsoleLog,this.mode="indeterminate"}S4(){return(65536*(1+Math.random())|0).toString(16).substring(1)}displayItem(e){if(!this.processInfoAll)return!1;for(const[Y,O]of this.processInfoAll)if(Y===e)return O.isComplate;return!1}Start(e,Y=" "){let O=new h.X;O.isComplate=!0,O.title=Y,this.processInfoAll.set(e,O);const q=[];for(const[gt,P]of this.processInfoAll)P&&!0===P.isComplate&&q.push(gt);this.processRunList=q,q&&q.length>0?this.display=!0:(this.processInfoAll=new Map,this.display=!1),this.consoleLog&&console.log(this.guid,"Start:",name,"Globally:",this.Globally,"Display:",this.display,"key:",e,"title:",O.title,"processRunList:",this.processRunList),this.cdr&&!this.display&&this.cdr.detectChanges()}Stop(e){let Y=this.processInfoAll.get(e);Y||(Y=new h.X),Y.isComplate=!1,this.processInfoAll.set(e,Y);const O=[];for(const[q,gt]of this.processInfoAll)gt&&!0===gt.isComplate&&O.push(q);this.processRunList=O,O&&O.length>0?this.display=!0:(this.processInfoAll=new Map,this.display=!1),this.consoleLog&&console.log(this.guid,"Stop:",name,"Globally:",this.Globally,"Display:","Display:",this.display,"key:",e,"title:",Y.title,"processRunList:",this.processRunList),this.cdr&&!this.display&&this.cdr.detectChanges()}}},8522:(_t,w,m)=>{"use strict";m.d(w,{N:()=>Ut});var t=m(7788),h=m(8403),O=(m(9081),m(6846),m(8189)),q=m(4434),gt=m(9722),P=m(5154),f=m(2882),i=m(6610),rt=m(7222),vt=m(8278),B=m(9344),A=m(6182),ft=m(4587),ct=m(6865),xt=m(8058),ae=m(6566),Ot=m(295),M=m(7912),nt=m(8267);const N=["container"];function Nt(d,x){if(1&d){const r=t.RV6();t.j41(0,"button",9),t.bIt("click",function(){t.eBV(r);const l=t.XpG();return t.Njj(l.onActionShowView360Add())}),t.EFF(1),t.nI1(2,"translate"),t.k0s()}2&d&&(t.R7$(),t.SpI(" ",t.bMT(2,1,"ACTION.Add_To_List"),"\n"))}function bt(d,x){if(1&d){const r=t.RV6();t.j41(0,"mat-icon",50),t.bIt("click",function(){t.eBV(r);const l=t.XpG(2);return t.Njj(l.dataDetailModel.title="")}),t.EFF(1,"close"),t.k0s()}}function mt(d,x){if(1&d){const r=t.RV6();t.j41(0,"mat-icon",50),t.bIt("click",function(){t.eBV(r);const l=t.XpG(2);return t.Njj(l.dataDetailModel.description="")}),t.EFF(1,"close"),t.k0s()}}function Lt(d,x){if(1&d){const r=t.RV6();t.j41(0,"mat-icon",51),t.bIt("click",function(){t.eBV(r);const l=t.XpG(2);return t.Njj(l.dataDetailModel.linkFileId=null)}),t.EFF(1,"close"),t.k0s()}}function E(d,x){if(1&d&&(t.nrm(0,"img",52),t.nI1(1,"cmsthumbnail")),2&d){const r=t.XpG(2);t.FS9("src",t.bMT(1,1,r.dataDetailModel.panorama),t.B4B)}}function U(d,x){if(1&d&&(t.j41(0,"table",53)(1,"tr")(2,"td"),t.EFF(3,"viewer Yaw"),t.k0s(),t.j41(4,"td"),t.EFF(5,"viewer Pitch"),t.k0s(),t.j41(6,"td"),t.EFF(7,"click Yaw"),t.k0s(),t.j41(8,"td"),t.EFF(9,"click Pitch"),t.k0s()(),t.j41(10,"tr")(11,"td"),t.EFF(12),t.k0s(),t.j41(13,"td"),t.EFF(14),t.k0s(),t.j41(15,"td"),t.EFF(16),t.k0s(),t.j41(17,"td"),t.EFF(18),t.k0s()()()),2&d){const r=t.XpG(2);t.R7$(12),t.JRh(r.postionView.viewerGetYaw),t.R7$(2),t.JRh(r.postionView.viewerGetPitch),t.R7$(2),t.JRh(r.postionView.clickGetYaw),t.R7$(2),t.JRh(r.postionView.clickGetPitch)}}function st(d,x){if(1&d){const r=t.RV6();t.j41(0,"button",54),t.bIt("click",function(){t.eBV(r);const l=t.XpG(2);return t.Njj(l.onActionShowHotspotAdd())}),t.EFF(1),t.nI1(2,"translate"),t.k0s()}2&d&&(t.R7$(),t.SpI(" ",t.bMT(2,1,"ACTION.ADD")," "))}function ut(d,x){1&d&&(t.j41(0,"mat-header-cell"),t.EFF(1,"\u0634\u0646\u0627\u0633\u0647 \u0635\u062d\u0646\u0647"),t.k0s())}function Q(d,x){if(1&d&&(t.qex(0),t.j41(1,"p",56),t.EFF(2),t.k0s(),t.bVm()),2&d){const r=t.XpG().$implicit;t.R7$(2),t.SpI("",r.sceneId||"N/A"," ")}}function Ct(d,x){if(1&d){const r=t.RV6();t.qex(0),t.j41(1,"div",12)(2,"input",57),t.mxI("ngModelChange",function(l){t.eBV(r);const a=t.XpG().$implicit;return t.DH7(a.sceneId,l)||(a.sceneId=l),t.Njj(l)}),t.k0s()(),t.bVm()}if(2&d){const r=t.XpG().$implicit,o=t.XpG(2);t.R7$(2),t.Y8G("disabled",o.editdisabled),t.R50("ngModel",r.sceneId)}}function jt(d,x){if(1&d&&(t.j41(0,"mat-cell"),t.DNE(1,Q,3,1,"ng-container",55)(2,Ct,3,2,"ng-container",55),t.k0s()),2&d){const r=x.$implicit,o=t.XpG(2);t.R7$(),t.Y8G("ngIf",!o.editHotspot.guid||!r.guid||r.guid!==o.editHotspot.guid),t.R7$(),t.Y8G("ngIf",o.editHotspot.guid&&r.guid&&r.guid===o.editHotspot.guid)}}function ne(d,x){1&d&&(t.j41(0,"mat-header-cell"),t.EFF(1,"pitch"),t.k0s())}function Qt(d,x){if(1&d&&(t.qex(0),t.j41(1,"p",56),t.EFF(2),t.k0s(),t.bVm()),2&d){const r=t.XpG().$implicit;t.R7$(2),t.SpI("",r.pitch||"N/A"," ")}}function te(d,x){if(1&d){const r=t.RV6();t.qex(0),t.j41(1,"div",12)(2,"input",58),t.mxI("ngModelChange",function(l){t.eBV(r);const a=t.XpG().$implicit;return t.DH7(a.pitch,l)||(a.pitch=l),t.Njj(l)}),t.k0s()(),t.bVm()}if(2&d){const r=t.XpG().$implicit,o=t.XpG(2);t.R7$(2),t.Y8G("disabled",o.editdisabled),t.R50("ngModel",r.pitch)}}function ue(d,x){if(1&d&&(t.j41(0,"mat-cell"),t.DNE(1,Qt,3,1,"ng-container",55)(2,te,3,2,"ng-container",55),t.k0s()),2&d){const r=x.$implicit,o=t.XpG(2);t.R7$(),t.Y8G("ngIf",!o.editHotspot.guid||!r.guid||r.guid!==o.editHotspot.guid),t.R7$(),t.Y8G("ngIf",o.editHotspot.guid&&r.guid&&r.guid===o.editHotspot.guid)}}function Pt(d,x){1&d&&(t.j41(0,"mat-header-cell"),t.EFF(1,"yaw"),t.k0s())}function _e(d,x){if(1&d&&(t.qex(0),t.j41(1,"p",59),t.EFF(2),t.k0s(),t.bVm()),2&d){const r=t.XpG().$implicit;t.R7$(2),t.SpI("",r.yaw||"N/A"," ")}}function oe(d,x){if(1&d){const r=t.RV6();t.qex(0),t.j41(1,"div",12)(2,"input",60),t.mxI("ngModelChange",function(l){t.eBV(r);const a=t.XpG().$implicit;return t.DH7(a.yaw,l)||(a.yaw=l),t.Njj(l)}),t.k0s()(),t.bVm()}if(2&d){const r=t.XpG().$implicit,o=t.XpG(2);t.R7$(2),t.Y8G("disabled",o.editdisabled),t.R50("ngModel",r.yaw)}}function at(d,x){if(1&d&&(t.j41(0,"mat-cell"),t.DNE(1,_e,3,1,"ng-container",55)(2,oe,3,2,"ng-container",55),t.k0s()),2&d){const r=x.$implicit,o=t.XpG(2);t.R7$(),t.Y8G("ngIf",!o.editHotspot.guid||!r.guid||r.guid!==o.editHotspot.guid),t.R7$(),t.Y8G("ngIf",o.editHotspot.guid&&r.guid&&r.guid===o.editHotspot.guid)}}function Ht(d,x){1&d&&(t.j41(0,"mat-header-cell"),t.EFF(1,"\u0646\u0648\u0639"),t.k0s())}function At(d,x){if(1&d&&(t.qex(0),t.j41(1,"p",59),t.EFF(2),t.k0s(),t.bVm()),2&d){const r=t.XpG().$implicit;t.R7$(2),t.JRh(r.type)}}function kt(d,x){if(1&d){const r=t.RV6();t.qex(0),t.j41(1,"div",12)(2,"mat-select",61),t.mxI("ngModelChange",function(l){t.eBV(r);const a=t.XpG().$implicit;return t.DH7(a.type,l)||(a.type=l),t.Njj(l)}),t.j41(3,"mat-option",62),t.EFF(4,"\u0627\u0637\u0644\u0627\u0639\u0627\u062a"),t.k0s()()(),t.bVm()}if(2&d){const r=t.XpG().$implicit,o=t.XpG(2);t.R7$(2),t.Y8G("disabled",o.editdisabled),t.R50("ngModel",r.type),t.R7$(),t.Y8G("value","info")}}function re(d,x){if(1&d&&(t.j41(0,"mat-cell"),t.DNE(1,At,3,1,"ng-container",55)(2,kt,5,3,"ng-container",55),t.k0s()),2&d){const r=x.$implicit,o=t.XpG(2);t.R7$(),t.Y8G("ngIf",!o.editHotspot.guid||!r.guid||r.guid!==o.editHotspot.guid),t.R7$(),t.Y8G("ngIf",o.editHotspot.guid&&r.guid&&r.guid===o.editHotspot.guid)}}function me(d,x){1&d&&(t.j41(0,"mat-header-cell"),t.EFF(1,"targetYaw"),t.k0s())}function D(d,x){if(1&d&&(t.qex(0),t.j41(1,"p",59),t.EFF(2),t.k0s(),t.bVm()),2&d){const r=t.XpG().$implicit;t.R7$(2),t.SpI("",r.targetYaw||"N/A"," ")}}function se(d,x){if(1&d){const r=t.RV6();t.qex(0),t.j41(1,"div",12)(2,"input",63),t.mxI("ngModelChange",function(l){t.eBV(r);const a=t.XpG().$implicit;return t.DH7(a.targetYaw,l)||(a.targetYaw=l),t.Njj(l)}),t.k0s()(),t.bVm()}if(2&d){const r=t.XpG().$implicit,o=t.XpG(2);t.R7$(2),t.Y8G("disabled",o.editdisabled),t.R50("ngModel",r.targetYaw)}}function $(d,x){if(1&d&&(t.j41(0,"mat-cell"),t.DNE(1,D,3,1,"ng-container",55)(2,se,3,2,"ng-container",55),t.k0s()),2&d){const r=x.$implicit,o=t.XpG(2);t.R7$(),t.Y8G("ngIf",!o.editHotspot.guid||!r.guid||r.guid!==o.editHotspot.guid),t.R7$(),t.Y8G("ngIf",o.editHotspot.guid&&r.guid&&r.guid===o.editHotspot.guid)}}function ee(d,x){1&d&&(t.j41(0,"mat-header-cell"),t.EFF(1,"targetPitch"),t.k0s())}function ie(d,x){if(1&d&&(t.qex(0),t.j41(1,"p",59),t.EFF(2),t.k0s(),t.bVm()),2&d){const r=t.XpG().$implicit;t.R7$(2),t.SpI("",r.targetPitch||"N/A"," ")}}function pe(d,x){if(1&d){const r=t.RV6();t.qex(0),t.j41(1,"div",12)(2,"input",64),t.mxI("ngModelChange",function(l){t.eBV(r);const a=t.XpG().$implicit;return t.DH7(a.targetPitch,l)||(a.targetPitch=l),t.Njj(l)}),t.k0s()(),t.bVm()}if(2&d){const r=t.XpG().$implicit,o=t.XpG(2);t.R7$(2),t.Y8G("disabled",o.editdisabled),t.R50("ngModel",r.targetPitch)}}function le(d,x){if(1&d&&(t.j41(0,"mat-cell"),t.DNE(1,ie,3,1,"ng-container",55)(2,pe,3,2,"ng-container",55),t.k0s()),2&d){const r=x.$implicit,o=t.XpG(2);t.R7$(),t.Y8G("ngIf",!o.editHotspot.guid||!r.guid||r.guid!==o.editHotspot.guid),t.R7$(),t.Y8G("ngIf",o.editHotspot.guid&&r.guid&&r.guid===o.editHotspot.guid)}}function $t(d,x){1&d&&(t.j41(0,"mat-header-cell"),t.EFF(1,"\u062a\u0648\u0636\u06cc\u062d\u0627\u062a"),t.k0s())}function fe(d,x){if(1&d&&(t.qex(0),t.j41(1,"p",56),t.EFF(2),t.k0s(),t.bVm()),2&d){const r=t.XpG().$implicit;t.R7$(2),t.SpI("",r.text||"N/A"," ")}}function Rt(d,x){if(1&d){const r=t.RV6();t.qex(0),t.j41(1,"div",12)(2,"input",65),t.mxI("ngModelChange",function(l){t.eBV(r);const a=t.XpG().$implicit;return t.DH7(a.text,l)||(a.text=l),t.Njj(l)}),t.k0s()(),t.bVm()}if(2&d){const r=t.XpG().$implicit,o=t.XpG(2);t.R7$(2),t.Y8G("disabled",o.editdisabled),t.R50("ngModel",r.text)}}function ce(d,x){if(1&d&&(t.j41(0,"mat-cell"),t.DNE(1,fe,3,1,"ng-container",55)(2,Rt,3,2,"ng-container",55),t.k0s()),2&d){const r=x.$implicit,o=t.XpG(2);t.R7$(),t.Y8G("ngIf",!o.editHotspot.guid||!r.guid||r.guid!==o.editHotspot.guid),t.R7$(),t.Y8G("ngIf",o.editHotspot.guid&&r.guid&&r.guid===o.editHotspot.guid)}}function de(d,x){1&d&&(t.j41(0,"mat-header-cell"),t.EFF(1,"\u0622\u062f\u0631\u0633 \u0648\u0628 \u0633\u0627\u06cc\u062a"),t.k0s())}function Xt(d,x){if(1&d&&(t.qex(0),t.j41(1,"p",66),t.EFF(2),t.k0s(),t.bVm()),2&d){const r=t.XpG().$implicit;t.R7$(2),t.SpI("",r.url||"N/A"," ")}}function qt(d,x){if(1&d){const r=t.RV6();t.qex(0),t.j41(1,"div",12)(2,"input",67),t.mxI("ngModelChange",function(l){t.eBV(r);const a=t.XpG().$implicit;return t.DH7(a.url,l)||(a.url=l),t.Njj(l)}),t.k0s()(),t.bVm()}if(2&d){const r=t.XpG().$implicit,o=t.XpG(2);t.R7$(2),t.Y8G("disabled",o.editdisabled),t.R50("ngModel",r.url)}}function Yt(d,x){if(1&d&&(t.j41(0,"mat-cell"),t.DNE(1,Xt,3,1,"ng-container",55)(2,qt,3,2,"ng-container",55),t.k0s()),2&d){const r=x.$implicit,o=t.XpG(2);t.R7$(),t.Y8G("ngIf",!o.editHotspot.guid||!r.guid||r.guid!==o.editHotspot.guid),t.R7$(),t.Y8G("ngIf",o.editHotspot.guid&&r.guid&&r.guid===o.editHotspot.guid)}}function c(d,x){1&d&&(t.j41(0,"mat-header-cell"),t.EFF(1,"Action"),t.k0s())}function C(d,x){if(1&d){const r=t.RV6();t.qex(0),t.j41(1,"mat-icon",69),t.bIt("click",function(){t.eBV(r);const l=t.XpG().$implicit,a=t.XpG(2);return t.Njj(a.editROw(l))}),t.EFF(2,"edit"),t.k0s(),t.j41(3,"mat-icon",69),t.bIt("click",function(){t.eBV(r);const l=t.XpG().$implicit,a=t.XpG(2);return t.Njj(a.removeROw(l))}),t.EFF(4,"delete"),t.k0s(),t.bVm()}}function g(d,x){if(1&d){const r=t.RV6();t.j41(0,"button",73),t.bIt("click",function(){t.eBV(r);const l=t.XpG(4);return t.Njj(l.updateEdit())}),t.EFF(1),t.nI1(2,"translate"),t.k0s()}if(2&d){const r=t.XpG(4);t.Y8G("disabled",r.editdisabled||!r.editHotspot.text||0===r.editHotspot.text.length),t.R7$(),t.JRh(t.bMT(2,2,"ACTION.Update"))}}function R(d,x){if(1&d){const r=t.RV6();t.j41(0,"button",74),t.bIt("click",function(){t.eBV(r);const l=t.XpG(4);return t.Njj(l.onActionPannellumClickLastPoint())}),t.EFF(1,"\u0646\u0642\u0637\u0647"),t.k0s()}if(2&d){const r=t.XpG(4);t.Y8G("disabled",r.editdisabled)}}function F(d,x){if(1&d){const r=t.RV6();t.qex(0),t.DNE(1,g,3,4,"button",70),t.j41(2,"button",71),t.bIt("click",function(){t.eBV(r);const l=t.XpG(3);return t.Njj(l.cancelEdit())}),t.EFF(3),t.nI1(4,"translate"),t.k0s(),t.DNE(5,R,2,1,"button",72),t.bVm()}if(2&d){const r=t.XpG(3);t.R7$(),t.Y8G("ngIf",r.postionView),t.R7$(),t.Y8G("disabled",r.editdisabled),t.R7$(),t.JRh(t.bMT(4,4,"ACTION.CANCEL")),t.R7$(2),t.Y8G("ngIf",r.editHotspot.pitch!==(null==r.postionView?null:r.postionView.clickGetPitch)&&r.editHotspot.yaw!==(null==r.postionView?null:r.postionView.clickGetYaw))}}function S(d,x){if(1&d&&(t.j41(0,"mat-cell")(1,"span",68),t.DNE(2,C,5,0,"ng-container",55)(3,F,6,6,"ng-container",55),t.k0s()()),2&d){const r=x.$implicit,o=t.XpG(2);t.R7$(2),t.Y8G("ngIf",!o.editHotspot.guid||!r.guid||r.guid!==o.editHotspot.guid),t.R7$(),t.Y8G("ngIf",o.editHotspot.guid&&r.guid&&r.guid===o.editHotspot.guid)}}function T(d,x){1&d&&t.nrm(0,"mat-header-row")}function V(d,x){if(1&d&&t.nrm(0,"mat-row"),2&d){const r=x.dataIndex;t.AVh("ntk-row-odd",r%2)("ntk-row-even",!(r%2))}}function k(d,x){if(1&d){const r=t.RV6();t.j41(0,"mat-icon",50),t.bIt("click",function(){t.eBV(r);const l=t.XpG(2);return t.Njj(l.dataDetailModel.configDataJson="")}),t.EFF(1,"close"),t.k0s()}}function Z(d,x){if(1&d){const r=t.RV6();t.j41(0,"div",10)(1,"div",11)(2,"div",12)(3,"label",13),t.EFF(4),t.nI1(5,"translate"),t.k0s(),t.j41(6,"input",14,1),t.nI1(8,"translate"),t.mxI("ngModelChange",function(l){t.eBV(r);const a=t.XpG();return t.DH7(a.dataDetailModel.title,l)||(a.dataDetailModel.title=l),t.Njj(l)}),t.k0s(),t.DNE(9,bt,2,0,"mat-icon",15),t.j41(10,"mat-icon",16),t.EFF(11,"mode_edit"),t.k0s()(),t.j41(12,"div",12)(13,"label",17),t.EFF(14),t.nI1(15,"translate"),t.k0s(),t.j41(16,"input",18,2),t.nI1(18,"translate"),t.mxI("ngModelChange",function(l){t.eBV(r);const a=t.XpG();return t.DH7(a.dataDetailModel.description,l)||(a.dataDetailModel.description=l),t.Njj(l)}),t.k0s(),t.DNE(19,mt,2,0,"mat-icon",15),t.j41(20,"mat-icon",16),t.EFF(21,"mode_edit"),t.k0s()(),t.j41(22,"div",12)(23,"label",19),t.EFF(24),t.nI1(25,"translate"),t.k0s(),t.j41(26,"input",20,3),t.nI1(28,"translate"),t.mxI("ngModelChange",function(l){t.eBV(r);const a=t.XpG();return t.DH7(a.dataDetailModel.linkFileId,l)||(a.dataDetailModel.linkFileId=l),t.Njj(l)}),t.bIt("click",function(){t.eBV(r);const l=t.XpG();return t.Njj(l.fileManagerOpenFormReport=!0)}),t.k0s(),t.DNE(29,Lt,2,0,"mat-icon",21),t.j41(30,"mat-icon",22),t.bIt("click",function(){t.eBV(r);const l=t.XpG();return t.Njj(l.fileManagerOpenFormReport=!0)}),t.EFF(31,"mode_edit"),t.k0s()(),t.j41(32,"cms-file-manager",23),t.bIt("itemSelected",function(l){t.eBV(r);const a=t.XpG();return t.Njj(a.onActionFileSelect(l))}),t.mxI("openFormChange",function(l){t.eBV(r);const a=t.XpG();return t.DH7(a.fileManagerOpenFormReport,l)||(a.fileManagerOpenFormReport=l),t.Njj(l)}),t.k0s(),t.j41(33,"a",24),t.nI1(34,"cmsthumbnail"),t.DNE(35,E,2,3,"img",25),t.k0s(),t.nrm(36,"hr"),t.DNE(37,U,19,4,"table",26),t.nrm(38,"hr"),t.j41(39,"h5"),t.EFF(40,"\u062a\u0646\u0638\u06cc\u0645\u0627\u062a "),t.k0s(),t.j41(41,"p"),t.EFF(42,"\u062f\u0631 \u0648\u0631\u0648\u062f \u0627\u06cc\u0646 \u062a\u0646\u0638\u06cc\u0645\u0627\u062a \u0628\u0627 \u0645\u062f\u06cc\u0631\u06cc\u062a \u0633\u0627\u0645\u0627\u0646\u0647 \u0647\u0645\u0627\u0647\u0646\u06af \u0628\u0627\u0634\u06cc\u062f"),t.k0s(),t.j41(43,"div",27)(44,"div",28),t.DNE(45,st,3,3,"button",29),t.k0s(),t.j41(46,"mat-table",30,4),t.qex(48,31),t.DNE(49,ut,2,0,"mat-header-cell",32)(50,jt,3,2,"mat-cell",33),t.bVm(),t.qex(51,34),t.DNE(52,ne,2,0,"mat-header-cell",32)(53,ue,3,2,"mat-cell",33),t.bVm(),t.qex(54,35),t.DNE(55,Pt,2,0,"mat-header-cell",32)(56,at,3,2,"mat-cell",33),t.bVm(),t.qex(57,36),t.DNE(58,Ht,2,0,"mat-header-cell",32)(59,re,3,2,"mat-cell",33),t.bVm(),t.qex(60,37),t.DNE(61,me,2,0,"mat-header-cell",32)(62,$,3,2,"mat-cell",33),t.bVm(),t.qex(63,38),t.DNE(64,ee,2,0,"mat-header-cell",32)(65,le,3,2,"mat-cell",33),t.bVm(),t.qex(66,39),t.DNE(67,$t,2,0,"mat-header-cell",32)(68,ce,3,2,"mat-cell",33),t.bVm(),t.qex(69,40),t.DNE(70,de,2,0,"mat-header-cell",32)(71,Yt,3,2,"mat-cell",33),t.bVm(),t.qex(72,41),t.DNE(73,c,2,0,"mat-header-cell",32)(74,S,4,2,"mat-cell",33),t.bVm(),t.DNE(75,T,1,0,"mat-header-row",42)(76,V,1,4,"mat-row",43),t.k0s()(),t.j41(77,"div",44)(78,"label",45),t.EFF(79),t.nI1(80,"translate"),t.k0s(),t.j41(81,"input",46,2),t.nI1(83,"translate"),t.mxI("ngModelChange",function(l){t.eBV(r);const a=t.XpG();return t.DH7(a.dataDetailModel.configDataJson,l)||(a.dataDetailModel.configDataJson=l),t.Njj(l)}),t.k0s(),t.DNE(84,k,2,0,"mat-icon",15),t.j41(85,"mat-icon",16),t.EFF(86,"mode_edit"),t.k0s()(),t.j41(87,"div",28)(88,"button",9),t.bIt("click",function(){t.eBV(r);const l=t.XpG();return t.Njj(l.onActionSubmitView360())}),t.nrm(89,"i",47),t.EFF(90),t.nI1(91,"translate"),t.k0s(),t.j41(92,"button",48),t.bIt("click",function(){t.eBV(r);const l=t.XpG();return t.Njj(l.onActionCancellView360())}),t.nrm(93,"i",49),t.EFF(94),t.nI1(95,"translate"),t.k0s()(),t.nrm(96,"br"),t.k0s()()}if(2&d){const r=t.XpG();t.R7$(4),t.JRh(t.bMT(5,34,"TITLE.Photography_Place")),t.R7$(2),t.FS9("placeholder",t.bMT(8,36,"TITLE.Photography_Place")),t.R50("ngModel",r.dataDetailModel.title),t.R7$(3),t.Y8G("ngIf",r.dataDetailModel.title),t.R7$(5),t.JRh(t.bMT(15,38,"TITLE.DESCRIPTION")),t.R7$(2),t.FS9("placeholder",t.bMT(18,40,"TITLE.DESCRIPTION")),t.R50("ngModel",r.dataDetailModel.description),t.R7$(3),t.Y8G("ngIf",r.dataDetailModel.description),t.R7$(5),t.JRh(t.bMT(25,42,"TITLE.View_360_File_ID")),t.R7$(2),t.FS9("placeholder",t.bMT(28,44,"TITLE.View_360_File_ID")),t.R50("ngModel",r.dataDetailModel.linkFileId),t.R7$(3),t.Y8G("ngIf",r.dataDetailModel.linkFileId),t.R7$(3),t.Y8G("language",r.appLanguage)("isPopup",!0),t.R50("openForm",r.fileManagerOpenFormReport),t.Y8G("tree",r.fileManagerTree)("openDirectUploadView",!0)("openFilemanagerButtonLabelKey","select")("selectFileType",r.selectFileTypeReport)("openFilemanagerButtonView",!1),t.R7$(),t.FS9("href",t.bMT(34,46,r.dataDetailModel.panorama),t.B4B),t.R7$(2),t.Y8G("ngIf",(null==r.dataDetailModel||null==r.dataDetailModel.panorama?null:r.dataDetailModel.panorama.length)>0),t.R7$(2),t.Y8G("ngIf",r.postionView),t.R7$(8),t.Y8G("ngIf",r.postionView),t.R7$(),t.Y8G("dataSource",r.tableHotSpotdataSource),t.R7$(29),t.Y8G("matHeaderRowDef",r.tableHotspotDisplayedColumns)("matHeaderRowDefSticky",!0),t.R7$(),t.Y8G("matRowDefColumns",r.tableHotspotDisplayedColumns),t.R7$(3),t.JRh(t.bMT(80,48,"TITLE.configDataJson")),t.R7$(2),t.FS9("placeholder",t.bMT(83,50,"TITLE.configDataJson")),t.R50("ngModel",r.dataDetailModel.configDataJson),t.R7$(3),t.Y8G("ngIf",r.dataDetailModel.configDataJson),t.R7$(6),t.SpI(" ",t.bMT(91,52,"ACTION.SUBMIT_BUTTON")," "),t.R7$(4),t.SpI(" ",t.bMT(95,54,"ACTION.CANCEL")," ")}}function it(d,x){1&d&&(t.j41(0,"mat-header-cell"),t.EFF(1),t.nI1(2,"translate"),t.k0s()),2&d&&(t.R7$(),t.SpI(" ",t.bMT(2,1,"TITLE.PHOTO")," "))}function W(d,x){if(1&d&&t.nrm(0,"img",52),2&d){const r=t.XpG(2).$implicit;t.FS9("src",r.panorama,t.B4B)}}function pt(d,x){if(1&d&&(t.qex(0),t.j41(1,"a",24),t.DNE(2,W,1,1,"img",25),t.k0s(),t.bVm()),2&d){const r=t.XpG().$implicit;t.R7$(),t.FS9("href",r.panorama,t.B4B),t.R7$(),t.Y8G("ngIf",(null==r||null==r.panorama?null:r.panorama.length)>0)}}function Wt(d,x){if(1&d&&(t.j41(0,"mat-cell"),t.DNE(1,pt,3,2,"ng-container",55),t.k0s()),2&d){const r=x.$implicit;t.R7$(),t.Y8G("ngIf",r.panorama)}}function zt(d,x){1&d&&(t.j41(0,"mat-header-cell"),t.EFF(1),t.nI1(2,"translate"),t.k0s()),2&d&&(t.R7$(),t.SpI(" ",t.bMT(2,1,"TITLE.Photography_Place")," "))}function ht(d,x){if(1&d&&(t.qex(0),t.EFF(1),t.bVm()),2&d){const r=t.XpG().$implicit;t.R7$(),t.SpI(" ",r.title," ")}}function dt(d,x){if(1&d&&(t.j41(0,"mat-cell"),t.DNE(1,ht,2,1,"ng-container",55),t.k0s()),2&d){const r=x.$implicit;t.R7$(),t.Y8G("ngIf",r.title)}}function Mt(d,x){1&d&&(t.j41(0,"mat-header-cell"),t.EFF(1),t.nI1(2,"translate"),t.k0s()),2&d&&(t.R7$(),t.SpI(" ",t.bMT(2,1,"TITLE.DESCRIPTION")," "))}function It(d,x){if(1&d&&(t.qex(0),t.EFF(1),t.bVm()),2&d){const r=t.XpG().$implicit;t.R7$(),t.SpI(" ",r.description," ")}}function wt(d,x){if(1&d&&(t.j41(0,"mat-cell"),t.DNE(1,It,2,1,"ng-container",55),t.k0s()),2&d){const r=x.$implicit;t.R7$(),t.Y8G("ngIf",r.description)}}function Vt(d,x){1&d&&(t.j41(0,"mat-header-cell"),t.EFF(1),t.nI1(2,"translate"),t.nI1(3,"translate"),t.k0s()),2&d&&(t.R7$(),t.Lme(" ",t.bMT(2,2,"TITLE.Edit")," | ",t.bMT(3,4,"TITLE.Delete")," "))}function ot(d,x){if(1&d){const r=t.RV6();t.j41(0,"mat-cell",81)(1,"small")(2,"mat-icon",82),t.bIt("click",function(){const l=t.eBV(r).renderIndex,a=t.XpG(2);return t.Njj(a.onActionOptionEditView360(l))}),t.EFF(3,"edit"),t.k0s()(),t.EFF(4,"| "),t.j41(5,"small")(6,"mat-icon",83),t.bIt("click",function(){const l=t.eBV(r).renderIndex,a=t.XpG(2);return t.Njj(a.onActionOptionRemoveView360(l))}),t.EFF(7,"delete"),t.k0s()()()}}function v(d,x){1&d&&t.nrm(0,"mat-header-row")}function Dt(d,x){if(1&d&&t.nrm(0,"mat-row"),2&d){const r=x.dataIndex;t.AVh("ntk-row-odd",r%2)("ntk-row-even",!(r%2))}}function Bt(d,x){if(1&d&&(t.j41(0,"div",10)(1,"mat-table",75),t.qex(2,76),t.DNE(3,it,3,3,"mat-header-cell",32)(4,Wt,2,1,"mat-cell",33),t.bVm(),t.qex(5,77),t.DNE(6,zt,3,3,"mat-header-cell",32)(7,dt,2,1,"mat-cell",33),t.bVm(),t.qex(8,78),t.DNE(9,Mt,3,3,"mat-header-cell",32)(10,wt,2,1,"mat-cell",33),t.bVm(),t.qex(11,41),t.DNE(12,Vt,4,6,"mat-header-cell",32)(13,ot,8,0,"mat-cell",79),t.bVm(),t.DNE(14,v,1,0,"mat-header-row",80)(15,Dt,1,4,"mat-row",43),t.k0s()()),2&d){const r=t.XpG();t.R7$(),t.Y8G("dataSource",r.tabledataSource),t.R7$(13),t.Y8G("matHeaderRowDef",r.tabledisplayedColumns),t.R7$(),t.Y8G("matRowDefColumns",r.tabledisplayedColumns)}}class Et{}let Ut=(()=>{class d{static#t=this.nextId=0;constructor(r,o,l){this.cmsToastrService=r,this.publicHelper=o,this.translate=l,this.id=++d.nextId,this.privateDataModel=[],this.dataDetailModel=new O.oDM,this.dataModelChange=new t.bkB,this.formInfo=new O.IL9,this.loadingOption=new q.o,this.tabledataSource=new h.I6,this.tableHotSpotdataSource=new h.I6,this.tabledisplayedColumns=["panorama","Title","Description","Action"],this.tableHotspotDisplayedColumns=["type","text","url","pitch","yaw","Action"],this.selectFileTypeReport=["jpeg","jpg"],this.appLanguage="fa",this.showAddView360=!1,this.fileManagerOpenFormReport=!1,this.inAddhotspotGuid="",this.selectIndex=-1,this.fileManagerTree=this.publicHelper.GetfileManagerTreeConfig()}set dataModel(r){r||(r=[]),this.privateDataModel=r,this.privateDataModel.forEach(o=>{o.hotSpots||(o.hotSpots=[]),o.hotSpots=this.uniqByReduce(o.hotSpots),o.hotSpots.forEach(l=>{l.guid=this.getGuid()})}),this.tabledataSource.data=this.privateDataModel,this.tableHotSpotdataSource.data=[]}get dataModel(){return this.privateDataModel}uniqByReduce(r){const o=[];return r.forEach(l=>{!o.includes(l)&&0==o.filter(a=>a.pitch==l.pitch&&a.yaw==l.yaw).length&&o.push(l)}),o}ngOnInit(){this.translate.get("TITLE.Edit").subscribe(r=>{this.formInfo.formTitle=r})}ngAfterViewInit(){this.container.nativeElement.style.display="none"}getGuid(){return Math.floor(Math.random()*(new Date).getTime()).toString()}actionPannellumImageLoad(r,o){const l={type:"equirectangular",panorama:r,autoLoad:!0,autoRotate:1.5,crossOrigin:"anonymous"};o&&o.length>0&&(l.hotSpots=o);const a=Object.assign({},l,this.options);this.viewer&&this.onActionPannellumDestroy(),this.viewer=pannellum.viewer(this.container.nativeElement,a),this.container.nativeElement.style.display="block"}actionPrivateDataModelOptimaze(){const r=[];this.privateDataModel||(this.privateDataModel=[]),this.privateDataModel.forEach(o=>{o.hotSpots||(o.hotSpots=[]),o.hotSpots.forEach(l=>{l.type&&l.type.length>0&&r.push(l)}),o.hotSpots=this.uniqByReduce(r)})}onActionPannellumClick(r){if(!this.viewer)return;this.postionView=new Et,this.postionView.viewerGetYaw=this.viewer.getYaw(),this.postionView.viewerGetPitch=this.viewer.getPitch();const o=this.viewer.mouseEventToCoords(r);!o||0==o.length||(this.postionView.clickGetYaw=o[1],this.postionView.clickGetPitch=o[0])}onActionPannellumDestroy(){this.container.nativeElement.style.display="none",this.postionView=null,this.viewer&&this.viewer.destroy()}onActionPannellumClickLastPoint(){this.postionView&&(0!=this.postionView.clickGetYaw||0!=this.postionView.clickGetPitch)&&(this.editHotspot.yaw=this.postionView.clickGetYaw,this.editHotspot.pitch=this.postionView.clickGetPitch)}onActionFileSelect(r){r&&r.id&&0!==r.id?(this.dataDetailModel.linkFileId=r.id,this.dataDetailModel.panorama=r.downloadLinksrc,this.dataDetailModel.preview=r.downloadLinksrc,this.actionPannellumImageLoad(this.dataDetailModel.panorama,[])):this.cmsToastrService.typeErrorSelectedRow()}onActionSubmitView360(){(!this.dataDetailModel.linkFileId||this.dataDetailModel.linkFileId<=0)&&this.cmsToastrService.typeErrorMessage("\u0641\u0627\u06cc\u0644 \u0627\u0646\u062a\u062e\u0627\u0628 \u0646\u0634\u062f\u0647"),this.privateDataModel||(this.privateDataModel=[]),this.selectIndex>=0?this.privateDataModel[this.selectIndex]=this.dataDetailModel:this.privateDataModel.push(this.dataDetailModel),this.actionPrivateDataModelOptimaze(),this.dataModel=this.privateDataModel,this.dataModelChange.emit(this.privateDataModel),this.showAddView360=!this.showAddView360,this.selectIndex=-1,this.onActionPannellumDestroy()}onActionCancellView360(){this.showAddView360=!1,this.onActionPannellumDestroy()}onActionShowView360Add(){this.dataDetailModel=new O.oDM,this.showAddView360=!this.showAddView360}onActionShowHotspotAdd(){this.dataDetailModel||(this.dataDetailModel=new O.oDM),this.dataDetailModel.hotSpots||(this.dataDetailModel.hotSpots=[]),this.editHotspot=new O.I1z;const r=new O.I1z;r.type="info",r.guid=this.getGuid(),this.inAddhotspotGuid=r.guid,this.dataDetailModel.hotSpots.push(r),this.tableHotSpotdataSource.data=this.uniqByReduce(this.dataDetailModel.hotSpots),this.newROw(r),this.onActionPannellumClickLastPoint()}onActionOptionRemoveView360(r){r<0||!this.privateDataModel||0===this.privateDataModel.length||(this.privateDataModel.splice(r,1),this.actionPrivateDataModelOptimaze(),this.dataModel=this.privateDataModel,this.dataModelChange.emit(this.privateDataModel),this.onActionPannellumDestroy())}onActionOptionEditView360(r){r<0||!this.privateDataModel||0===this.privateDataModel.length||(this.dataDetailModel=this.privateDataModel[r],this.dataDetailModel.hotSpots||(this.dataDetailModel.hotSpots=[]),this.actionPannellumImageLoad(this.dataDetailModel.panorama,this.dataDetailModel.hotSpots),this.oldHotspot=new O.I1z,this.editHotspot=new O.I1z,this.tableHotSpotdataSource.data=this.uniqByReduce(this.dataDetailModel.hotSpots),this.selectIndex=r,this.showAddView360=!this.showAddView360)}newROw(r){this.editHotspot=r&&r.guid?r:new O.I1z,this.oldHotspot={...this.editHotspot}}editROw(r){this.editHotspot=r&&r.guid?r:new O.I1z,this.oldHotspot={...this.editHotspot},this.inAddhotspotGuid=""}removeROw(r){const o=this.dataDetailModel.hotSpots.findIndex(l=>l.guid==r.guid);o>=0&&(this.dataDetailModel.hotSpots.splice(o,1),this.tableHotSpotdataSource.data=this.uniqByReduce(this.dataDetailModel.hotSpots))}updateEdit(){this.inAddhotspotGuid="",this.editdisabled=!0;const r=this.dataDetailModel.hotSpots.findIndex(o=>o.guid==this.oldHotspot.guid);r>=0&&(this.dataDetailModel.hotSpots[r]=this.editHotspot),this.editdisabled=!1,this.oldHotspot=new O.I1z,this.editHotspot=new O.I1z}cancelEdit(){this.inAddhotspotGuid?.length>0&&(this.dataDetailModel.hotSpots=this.dataDetailModel.hotSpots.filter(r=>r.guid!=this.inAddhotspotGuid)),this.editHotspot=new O.I1z,this.oldHotspot&&this.oldHotspot.guid&&(this.dataDetailModel.hotSpots||(this.dataDetailModel.hotSpots=[]),this.tableHotSpotdataSource.data=this.uniqByReduce(this.dataDetailModel.hotSpots))}static#e=this.\u0275fac=function(o){return new(o||d)(t.rXU(gt.k),t.rXU(P.A),t.rXU(f.c$))};static#i=this.\u0275cmp=t.VBU({type:d,selectors:[["app-cms-360-image-list"]],viewQuery:function(o,l){if(1&o&&t.GBs(N,5),2&o){let a;t.mGM(a=t.lsd())&&(l.container=a.first)}},inputs:{dataModel:"dataModel"},outputs:{dataModelChange:"dataModelChange"},decls:6,vars:5,consts:[["container",""],["Title",""],["Description",""],["LinkFileId",""],["table",""],["type","button","class","btn font-13 font-600 btn-s m-1 rounded-s shadow-xl border-0 gradient-highlight",3,"click",4,"ngIf"],[1,"container",2,"height","380px","width","100%","direction","ltr",3,"click","id"],["class","example-container mat-elevation-z8",4,"ngIf"],[3,"optionsInfoAreaId"],["type","button",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-highlight",3,"click"],[1,"example-container","mat-elevation-z8"],[1,"m-2"],[1,"input-style","has-borders","no-icon","input-style-always-active","validate-field","mb-4"],["for","dataDetailModel.title",1,"color-highlight"],["type","text","name","dataDetailModel.title","id","dataDetailModel.title","minlength","3","maxlength","100","required","",1,"form-control","validate-name",3,"ngModelChange","ngModel","placeholder"],["matSuffix","","class","pointer","matSuffix","","mat-icon-button","","aria-label","Clear",3,"click",4,"ngIf"],["matSuffix","",1,"pointer"],["for","dataDetailModel.description",1,"color-highlight"],["type","text","name","dataDetailModel.description","id","dataDetailModel.description","minlength","3","maxlength","100",1,"form-control","validate-name",3,"ngModelChange","ngModel","placeholder"],["for","dataDetailModel.linkFileId",1,"color-highlight"],["type","text","name","dataDetailModel.linkFileId","id","dataDetailModel.linkFileId",1,"form-control","validate-name",3,"ngModelChange","click","ngModel","placeholder"],["matSuffix","","matSuffix","","mat-icon-button","","aria-label","Clear",3,"click",4,"ngIf"],["matSuffix","",3,"click"],[3,"itemSelected","openFormChange","language","isPopup","openForm","tree","openDirectUploadView","openFilemanagerButtonLabelKey","selectFileType","openFilemanagerButtonView"],["target","_blank",3,"href"],["style","vertical-align:middle;","class","ntk-hover-zoom","aria-hidden","","height","50","width","50",3,"src",4,"ngIf"],["class","grid-row-ltr-center",4,"ngIf"],[2,"background-color","bisque","padding","5px"],[1,"form-actions",2,"direction","ltr"],["type","button","class","btn font-13 font-600 btn-s m-1 rounded-s shadow-xl border-0 gradient-teal",3,"click",4,"ngIf"],["matSort","",3,"dataSource"],["matColumnDef","sceneId"],[4,"matHeaderCellDef"],[4,"matCellDef"],["matColumnDef","pitch"],["matColumnDef","yaw"],["matColumnDef","type"],["matColumnDef","targetYaw"],["matColumnDef","targetPitch"],["matColumnDef","text"],["matColumnDef","url"],["matColumnDef","Action"],[4,"matHeaderRowDef","matHeaderRowDefSticky"],[3,"ntk-row-odd","ntk-row-even",4,"matRowDef","matRowDefColumns"],[1,"input-style","has-borders","no-icon","input-style-always-active","validate-field","mb-4",2,"visibility","hidden"],["for","dataDetailModel.configDataJson",1,"color-highlight"],["type","text","name","dataDetailModel.configDataJson","id","dataDetailModel.configDataJson","minlength","0","maxlength","10000","required","",1,"form-control","validate-name",3,"ngModelChange","ngModel","placeholder"],[1,"fa","fa-check-square-o"],["type","button",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-gray",3,"click"],[1,"ft-x"],["matSuffix","","matSuffix","","mat-icon-button","","aria-label","Clear",1,"pointer",3,"click"],["matSuffix","","matSuffix","","mat-icon-button","","aria-label","Clear",3,"click"],["aria-hidden","","height","50","width","50",1,"ntk-hover-zoom",2,"vertical-align","middle",3,"src"],[1,"grid-row-ltr-center"],["type","button",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-teal",3,"click"],[4,"ngIf"],[1,"text-truncate"],["matInput","","placeholder","\u0634\u0646\u0627\u0633\u0647 \u0635\u062d\u0646\u0647","name","sceneId",1,"form-control","validate-name",2,"direction","ltr","text-align","left",3,"ngModelChange","disabled","ngModel"],["matInput","","type","number","placeholder","pitch","name","pitch",1,"form-control","validate-name",2,"direction","ltr","text-align","left",3,"ngModelChange","disabled","ngModel"],[1,"text-truncate","grid-row-ltr-center"],["matInput","","type","number","placeholder","yaw","name","yaw",1,"form-control","validate-name",2,"direction","ltr","text-align","left",3,"ngModelChange","disabled","ngModel"],["placeholder","Select","name","type",1,"form-control","validate-name",3,"ngModelChange","disabled","ngModel"],[3,"value"],["matInput","","placeholder","targetYaw","name","targetYaw",1,"form-control","validate-name",2,"direction","ltr","text-align","left",3,"ngModelChange","disabled","ngModel"],["matInput","","placeholder","targetPitch","name","targetPitch",1,"form-control","validate-name",2,"direction","ltr","text-align","left",3,"ngModelChange","disabled","ngModel"],["matInput","","placeholder","text","name","text",1,"form-control","validate-name",2,"direction","ltr","text-align","left",3,"ngModelChange","disabled","ngModel"],[1,"text-truncate","grid-row-ltr"],["matInput","","placeholder","url","name","url",1,"form-control","validate-name",2,"direction","ltr","text-align","left",3,"ngModelChange","disabled","ngModel"],[1,"m-1",2,"text-align","center"],[3,"click"],["type","button","class","mb-2",3,"disabled","click",4,"ngIf"],["type","button",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-gray",3,"click","disabled"],["type","button","class","btn font-13 font-600 btn-s m-1 rounded-s shadow-xl border-0 gradient-green","matTooltip","\u062b\u0628\u062a \u0622\u062e\u0631\u06cc\u0646 \u0646\u0642\u0637\u0647 \u06a9\u0644\u06cc\u06a9 \u0634\u062f\u0647",3,"disabled","click",4,"ngIf"],["type","button",1,"mb-2",3,"click","disabled"],["type","button","matTooltip","\u062b\u0628\u062a \u0622\u062e\u0631\u06cc\u0646 \u0646\u0642\u0637\u0647 \u06a9\u0644\u06cc\u06a9 \u0634\u062f\u0647",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-green",3,"click","disabled"],["multiTemplateDataRows","",3,"dataSource"],["matColumnDef","panorama"],["matColumnDef","Title"],["matColumnDef","Description"],["class","Action",4,"matCellDef"],[4,"matHeaderRowDef"],[1,"Action"],["matTooltipPosition","before","aria-hidden","false",2,"color","blue","cursor","pointer",3,"click"],["matTooltipPosition","before","aria-hidden","false",2,"color","red","cursor","pointer",3,"click"]],template:function(o,l){if(1&o){const a=t.RV6();t.DNE(0,Nt,3,3,"button",5),t.j41(1,"div",6,0),t.bIt("click",function(_){return t.eBV(a),t.Njj(l.onActionPannellumClick(_))}),t.k0s(),t.DNE(3,Z,97,56,"div",7),t.nrm(4,"app-progress-spinner",8),t.DNE(5,Bt,16,3,"div",7)}2&o&&(t.Y8G("ngIf",!l.showAddView360),t.R7$(),t.Y8G("id",l.id),t.R7$(2),t.Y8G("ngIf",l.showAddView360),t.R7$(),t.Y8G("optionsInfoAreaId",l.constructor.name),t.R7$(),t.Y8G("ngIf",!l.showAddView360))},dependencies:[i.bT,rt.me,rt.Q0,rt.BC,rt.YS,rt.xh,rt.tU,rt.vS,vt.wT,B.yw,A.An,ft.fg,ct.VO,xt.B4,h.Zl,h.tL,h.ji,h.cC,h.YV,h.iL,h.KS,h.$R,h.YZ,h.NB,ae.oV,Ot.e5,M._,f.D9,nt.r],encapsulation:2})}return d})()},9908:(_t,w,m)=>{"use strict";m.d(w,{Y:()=>r});var t=m(7788),h=m(8403),O=(m(9081),m(6846),m(8189)),q=m(4434),gt=m(9722),P=m(5154),f=m(2882),i=m(6610),rt=m(7222),vt=m(8278),B=m(9344),A=m(6182),ft=m(6865),ct=m(8058),xt=m(6566),ae=m(295),Ot=m(7912),M=m(8267);const nt=["container"];function N(o,l){if(1&o){const a=t.RV6();t.j41(0,"button",9),t.bIt("click",function(){t.eBV(a);const _=t.XpG();return t.Njj(_.onActionShowView360Add())}),t.EFF(1),t.nI1(2,"translate"),t.k0s()}2&o&&(t.R7$(),t.SpI(" ",t.bMT(2,1,"ACTION.Add_To_List"),"\n"))}function Nt(o,l){if(1&o){const a=t.RV6();t.j41(0,"button",10),t.bIt("click",function(){t.eBV(a);const _=t.XpG();return t.Njj(_.onActionImportFile360View())}),t.EFF(1," \u0648\u0631\u0648\u062f \u0627\u0637\u0644\u0627\u0639\u0627\u062a \u0639\u06a9\u0633 \u0647\u0627\u06cc 360\n"),t.k0s()}}function bt(o,l){if(1&o){const a=t.RV6();t.j41(0,"button",10),t.bIt("click",function(){t.eBV(a);const _=t.XpG();return t.Njj(_.actionPannellumTourLoad())}),t.EFF(1," \u0646\u0645\u0627\u06cc\u0634 \u062a\u0648\u0631\n"),t.k0s()}}function mt(o,l){if(1&o){const a=t.RV6();t.j41(0,"mat-icon",46),t.bIt("click",function(){t.eBV(a);const _=t.XpG(2);return t.Njj(_.dataDetailModel.title="")}),t.EFF(1,"close"),t.k0s()}}function Lt(o,l){if(1&o){const a=t.RV6();t.j41(0,"mat-icon",47),t.bIt("click",function(){t.eBV(a);const _=t.XpG(2);return t.Njj(_.dataDetailModel.linkFileId=null)}),t.EFF(1,"close"),t.k0s()}}function E(o,l){if(1&o&&(t.nrm(0,"img",48),t.nI1(1,"cmsthumbnail")),2&o){const a=t.XpG(2);t.FS9("src",t.bMT(1,1,a.dataDetailModel.panorama),t.B4B)}}function U(o,l){if(1&o&&(t.j41(0,"table",49)(1,"tr")(2,"td"),t.EFF(3,"viewer Yaw"),t.k0s(),t.j41(4,"td"),t.EFF(5,"viewer Pitch"),t.k0s(),t.j41(6,"td"),t.EFF(7,"click Yaw"),t.k0s(),t.j41(8,"td"),t.EFF(9,"click Pitch"),t.k0s()(),t.j41(10,"tr")(11,"td"),t.EFF(12),t.k0s(),t.j41(13,"td"),t.EFF(14),t.k0s(),t.j41(15,"td"),t.EFF(16),t.k0s(),t.j41(17,"td"),t.EFF(18),t.k0s()()()),2&o){const a=t.XpG(2);t.R7$(12),t.JRh(a.postionView.viewerGetYaw),t.R7$(2),t.JRh(a.postionView.viewerGetPitch),t.R7$(2),t.JRh(a.postionView.clickGetYaw),t.R7$(2),t.JRh(a.postionView.clickGetPitch)}}function st(o,l){if(1&o){const a=t.RV6();t.j41(0,"button",50),t.bIt("click",function(){t.eBV(a);const _=t.XpG(2);return t.Njj(_.onActionShowHotspotAdd())}),t.EFF(1),t.nI1(2,"translate"),t.k0s()}2&o&&(t.R7$(),t.SpI(" ",t.bMT(2,1,"ACTION.ADD")," "))}function ut(o,l){1&o&&(t.j41(0,"mat-header-cell"),t.EFF(1,"\u0646\u0648\u0639"),t.k0s())}function Q(o,l){if(1&o&&(t.qex(0),t.j41(1,"p",52),t.EFF(2),t.k0s(),t.bVm()),2&o){const a=t.XpG().$implicit;t.R7$(2),t.JRh(a.type)}}function Ct(o,l){if(1&o){const a=t.RV6();t.qex(0),t.j41(1,"div",13)(2,"mat-select",53),t.mxI("ngModelChange",function(_){t.eBV(a);const y=t.XpG().$implicit;return t.DH7(y.type,_)||(y.type=_),t.Njj(_)}),t.j41(3,"mat-option",54),t.EFF(4,"\u0635\u062d\u0646\u0647"),t.k0s(),t.j41(5,"mat-option",54),t.EFF(6,"\u0627\u0637\u0644\u0627\u0639\u0627\u062a"),t.k0s()()(),t.bVm()}if(2&o){const a=t.XpG().$implicit,p=t.XpG(2);t.R7$(2),t.Y8G("disabled",p.editdisabled),t.R50("ngModel",a.type),t.R7$(),t.Y8G("value","scene"),t.R7$(2),t.Y8G("value","info")}}function jt(o,l){if(1&o&&(t.j41(0,"mat-cell"),t.DNE(1,Q,3,1,"ng-container",51)(2,Ct,7,4,"ng-container",51),t.k0s()),2&o){const a=l.$implicit,p=t.XpG(2);t.R7$(),t.Y8G("ngIf",!p.editHotspot.guid||!a.guid||a.guid!==p.editHotspot.guid),t.R7$(),t.Y8G("ngIf",p.editHotspot.guid&&a.guid&&a.guid===p.editHotspot.guid)}}function ne(o,l){1&o&&(t.j41(0,"mat-header-cell"),t.EFF(1,"\u0634\u0646\u0627\u0633\u0647 \u0635\u062d\u0646\u0647"),t.k0s())}function Qt(o,l){if(1&o&&(t.qex(0),t.j41(1,"p",55),t.EFF(2),t.k0s(),t.bVm()),2&o){const a=t.XpG().$implicit;t.R7$(2),t.SpI("",a.sceneId||"N/A"," ")}}function te(o,l){if(1&o){const a=t.RV6();t.qex(0),t.j41(1,"div",13)(2,"input",56),t.mxI("ngModelChange",function(_){t.eBV(a);const y=t.XpG().$implicit;return t.DH7(y.sceneId,_)||(y.sceneId=_),t.Njj(_)}),t.k0s()(),t.bVm()}if(2&o){const a=t.XpG().$implicit,p=t.XpG(2);t.R7$(2),t.Y8G("disabled",p.editdisabled),t.R50("ngModel",a.sceneId)}}function ue(o,l){if(1&o&&(t.j41(0,"mat-cell"),t.DNE(1,Qt,3,1,"ng-container",51)(2,te,3,2,"ng-container",51),t.k0s()),2&o){const a=l.$implicit,p=t.XpG(2);t.R7$(),t.Y8G("ngIf",!p.editHotspot.guid||!a.guid||a.guid!==p.editHotspot.guid),t.R7$(),t.Y8G("ngIf",p.editHotspot.guid&&a.guid&&a.guid===p.editHotspot.guid&&"scene"===a.type)}}function Pt(o,l){1&o&&(t.j41(0,"mat-header-cell"),t.EFF(1,"\u0634\u0646\u0627\u0633\u0647 \u0635\u062d\u0646\u0647"),t.k0s())}function _e(o,l){if(1&o&&(t.qex(0),t.j41(1,"p",52),t.EFF(2),t.k0s(),t.bVm()),2&o){const a=t.XpG().$implicit;t.R7$(2),t.JRh(a.sceneId)}}function oe(o,l){if(1&o&&(t.j41(0,"mat-option",54),t.EFF(1),t.k0s()),2&o){const a=l.$implicit;t.Y8G("value",a.linkFileId),t.R7$(),t.JRh(a.title)}}function at(o,l){if(1&o){const a=t.RV6();t.qex(0),t.j41(1,"div",13)(2,"mat-select",57),t.mxI("ngModelChange",function(_){t.eBV(a);const y=t.XpG().$implicit;return t.DH7(y.sceneId,_)||(y.sceneId=_),t.Njj(_)}),t.DNE(3,oe,2,2,"mat-option",58),t.k0s()(),t.bVm()}if(2&o){const a=t.XpG().$implicit,p=t.XpG(2);t.R7$(2),t.Y8G("disabled",p.editdisabled),t.R50("ngModel",a.sceneId),t.R7$(),t.Y8G("ngForOf",p.scenesList)}}function Ht(o,l){if(1&o&&(t.j41(0,"mat-cell"),t.DNE(1,_e,3,1,"ng-container",51)(2,at,4,3,"ng-container",51),t.k0s()),2&o){const a=l.$implicit,p=t.XpG(2);t.R7$(),t.Y8G("ngIf",!p.editHotspot.guid||!a.guid||a.guid!==p.editHotspot.guid),t.R7$(),t.Y8G("ngIf",p.editHotspot.guid&&a.guid&&a.guid===p.editHotspot.guid&&"scene"===a.type)}}function At(o,l){1&o&&(t.j41(0,"mat-header-cell"),t.EFF(1,"pitch"),t.k0s())}function kt(o,l){if(1&o&&(t.qex(0),t.j41(1,"p",55),t.EFF(2),t.k0s(),t.bVm()),2&o){const a=t.XpG().$implicit;t.R7$(2),t.SpI("",a.pitch||"N/A"," ")}}function re(o,l){if(1&o){const a=t.RV6();t.qex(0),t.j41(1,"div",13)(2,"input",59),t.mxI("ngModelChange",function(_){t.eBV(a);const y=t.XpG().$implicit;return t.DH7(y.pitch,_)||(y.pitch=_),t.Njj(_)}),t.k0s()(),t.bVm()}if(2&o){const a=t.XpG().$implicit,p=t.XpG(2);t.R7$(2),t.Y8G("disabled",p.editdisabled),t.R50("ngModel",a.pitch)}}function me(o,l){if(1&o&&(t.j41(0,"mat-cell"),t.DNE(1,kt,3,1,"ng-container",51)(2,re,3,2,"ng-container",51),t.k0s()),2&o){const a=l.$implicit,p=t.XpG(2);t.R7$(),t.Y8G("ngIf",!p.editHotspot.guid||!a.guid||a.guid!==p.editHotspot.guid),t.R7$(),t.Y8G("ngIf",p.editHotspot.guid&&a.guid&&a.guid===p.editHotspot.guid)}}function D(o,l){1&o&&(t.j41(0,"mat-header-cell"),t.EFF(1,"yaw"),t.k0s())}function se(o,l){if(1&o&&(t.qex(0),t.j41(1,"p",52),t.EFF(2),t.k0s(),t.bVm()),2&o){const a=t.XpG().$implicit;t.R7$(2),t.SpI("",a.yaw||"N/A"," ")}}function $(o,l){if(1&o){const a=t.RV6();t.qex(0),t.j41(1,"div",13)(2,"input",60),t.mxI("ngModelChange",function(_){t.eBV(a);const y=t.XpG().$implicit;return t.DH7(y.yaw,_)||(y.yaw=_),t.Njj(_)}),t.k0s()(),t.bVm()}if(2&o){const a=t.XpG().$implicit,p=t.XpG(2);t.R7$(2),t.Y8G("disabled",p.editdisabled),t.R50("ngModel",a.yaw)}}function ee(o,l){if(1&o&&(t.j41(0,"mat-cell"),t.DNE(1,se,3,1,"ng-container",51)(2,$,3,2,"ng-container",51),t.k0s()),2&o){const a=l.$implicit,p=t.XpG(2);t.R7$(),t.Y8G("ngIf",!p.editHotspot.guid||!a.guid||a.guid!==p.editHotspot.guid),t.R7$(),t.Y8G("ngIf",p.editHotspot.guid&&a.guid&&a.guid===p.editHotspot.guid)}}function ie(o,l){1&o&&(t.j41(0,"mat-header-cell"),t.EFF(1,"targetYaw"),t.k0s())}function pe(o,l){if(1&o&&(t.qex(0),t.j41(1,"p",52),t.EFF(2),t.k0s(),t.bVm()),2&o){const a=t.XpG().$implicit;t.R7$(2),t.SpI("",a.targetYaw||"N/A"," ")}}function le(o,l){if(1&o){const a=t.RV6();t.qex(0),t.j41(1,"div",13)(2,"input",61),t.mxI("ngModelChange",function(_){t.eBV(a);const y=t.XpG().$implicit;return t.DH7(y.targetYaw,_)||(y.targetYaw=_),t.Njj(_)}),t.k0s()(),t.bVm()}if(2&o){const a=t.XpG().$implicit,p=t.XpG(2);t.R7$(2),t.Y8G("disabled",p.editdisabled),t.R50("ngModel",a.targetYaw)}}function $t(o,l){if(1&o&&(t.j41(0,"mat-cell"),t.DNE(1,pe,3,1,"ng-container",51)(2,le,3,2,"ng-container",51),t.k0s()),2&o){const a=l.$implicit,p=t.XpG(2);t.R7$(),t.Y8G("ngIf",!p.editHotspot.guid||!a.guid||a.guid!==p.editHotspot.guid),t.R7$(),t.Y8G("ngIf",p.editHotspot.guid&&a.guid&&a.guid===p.editHotspot.guid)}}function fe(o,l){1&o&&(t.j41(0,"mat-header-cell"),t.EFF(1,"targetPitch"),t.k0s())}function Rt(o,l){if(1&o&&(t.qex(0),t.j41(1,"p",52),t.EFF(2),t.k0s(),t.bVm()),2&o){const a=t.XpG().$implicit;t.R7$(2),t.SpI("",a.targetPitch||"N/A"," ")}}function ce(o,l){if(1&o){const a=t.RV6();t.qex(0),t.j41(1,"div",13)(2,"input",62),t.mxI("ngModelChange",function(_){t.eBV(a);const y=t.XpG().$implicit;return t.DH7(y.targetPitch,_)||(y.targetPitch=_),t.Njj(_)}),t.k0s()(),t.bVm()}if(2&o){const a=t.XpG().$implicit,p=t.XpG(2);t.R7$(2),t.Y8G("disabled",p.editdisabled),t.R50("ngModel",a.targetPitch)}}function de(o,l){if(1&o&&(t.j41(0,"mat-cell"),t.DNE(1,Rt,3,1,"ng-container",51)(2,ce,3,2,"ng-container",51),t.k0s()),2&o){const a=l.$implicit,p=t.XpG(2);t.R7$(),t.Y8G("ngIf",!p.editHotspot.guid||!a.guid||a.guid!==p.editHotspot.guid),t.R7$(),t.Y8G("ngIf",p.editHotspot.guid&&a.guid&&a.guid===p.editHotspot.guid)}}function Xt(o,l){1&o&&(t.j41(0,"mat-header-cell"),t.EFF(1,"\u062a\u0648\u0636\u06cc\u062d\u0627\u062a"),t.k0s())}function qt(o,l){if(1&o&&(t.qex(0),t.j41(1,"p",55),t.EFF(2),t.k0s(),t.bVm()),2&o){const a=t.XpG().$implicit;t.R7$(2),t.SpI("",a.text||"N/A"," ")}}function Yt(o,l){if(1&o){const a=t.RV6();t.qex(0),t.j41(1,"div",13)(2,"input",63),t.mxI("ngModelChange",function(_){t.eBV(a);const y=t.XpG().$implicit;return t.DH7(y.text,_)||(y.text=_),t.Njj(_)}),t.k0s()(),t.bVm()}if(2&o){const a=t.XpG().$implicit,p=t.XpG(2);t.R7$(2),t.Y8G("disabled",p.editdisabled),t.R50("ngModel",a.text)}}function c(o,l){if(1&o&&(t.j41(0,"mat-cell"),t.DNE(1,qt,3,1,"ng-container",51)(2,Yt,3,2,"ng-container",51),t.k0s()),2&o){const a=l.$implicit,p=t.XpG(2);t.R7$(),t.Y8G("ngIf",!p.editHotspot.guid||!a.guid||a.guid!==p.editHotspot.guid),t.R7$(),t.Y8G("ngIf",p.editHotspot.guid&&a.guid&&a.guid===p.editHotspot.guid)}}function C(o,l){1&o&&(t.j41(0,"mat-header-cell"),t.EFF(1,"\u0622\u062f\u0631\u0633 \u0648\u0628 \u0633\u0627\u06cc\u062a"),t.k0s())}function g(o,l){if(1&o&&(t.qex(0),t.j41(1,"p",64),t.EFF(2),t.k0s(),t.bVm()),2&o){const a=t.XpG().$implicit;t.R7$(2),t.SpI("",a.url||"N/A"," ")}}function R(o,l){if(1&o){const a=t.RV6();t.qex(0),t.j41(1,"div",13)(2,"input",65),t.mxI("ngModelChange",function(_){t.eBV(a);const y=t.XpG().$implicit;return t.DH7(y.url,_)||(y.url=_),t.Njj(_)}),t.k0s()(),t.bVm()}if(2&o){const a=t.XpG().$implicit,p=t.XpG(2);t.R7$(2),t.Y8G("disabled",p.editdisabled),t.R50("ngModel",a.url)}}function F(o,l){if(1&o&&(t.j41(0,"mat-cell"),t.DNE(1,g,3,1,"ng-container",51)(2,R,3,2,"ng-container",51),t.k0s()),2&o){const a=l.$implicit,p=t.XpG(2);t.R7$(),t.Y8G("ngIf",!p.editHotspot.guid||!a.guid||a.guid!==p.editHotspot.guid),t.R7$(),t.Y8G("ngIf",p.editHotspot.guid&&a.guid&&a.guid===p.editHotspot.guid)}}function S(o,l){1&o&&(t.j41(0,"mat-header-cell"),t.EFF(1,"Action"),t.k0s())}function T(o,l){if(1&o){const a=t.RV6();t.qex(0),t.j41(1,"mat-icon",67),t.bIt("click",function(){t.eBV(a);const _=t.XpG().$implicit,y=t.XpG(2);return t.Njj(y.editROw(_))}),t.EFF(2,"edit"),t.k0s(),t.j41(3,"mat-icon",67),t.bIt("click",function(){t.eBV(a);const _=t.XpG().$implicit,y=t.XpG(2);return t.Njj(y.removeROw(_))}),t.EFF(4,"delete"),t.k0s(),t.bVm()}}function V(o,l){if(1&o){const a=t.RV6();t.j41(0,"button",71),t.bIt("click",function(){t.eBV(a);const _=t.XpG(4);return t.Njj(_.updateEdit())}),t.EFF(1),t.nI1(2,"translate"),t.k0s()}if(2&o){const a=t.XpG(4);t.Y8G("disabled",a.editdisabled||!a.editHotspot.text||0===a.editHotspot.text.length),t.R7$(),t.JRh(t.bMT(2,2,"ACTION.Update"))}}function k(o,l){if(1&o){const a=t.RV6();t.j41(0,"button",72),t.bIt("click",function(){t.eBV(a);const _=t.XpG(4);return t.Njj(_.onActionPannellumClickLastPoint())}),t.EFF(1,"\u0646\u0642\u0637\u0647"),t.k0s()}if(2&o){const a=t.XpG(4);t.Y8G("disabled",a.editdisabled)}}function Z(o,l){if(1&o){const a=t.RV6();t.qex(0),t.DNE(1,V,3,4,"button",68),t.j41(2,"button",69),t.bIt("click",function(){t.eBV(a);const _=t.XpG(3);return t.Njj(_.cancelEdit())}),t.EFF(3),t.nI1(4,"translate"),t.k0s(),t.DNE(5,k,2,1,"button",70),t.bVm()}if(2&o){const a=t.XpG(3);t.R7$(),t.Y8G("ngIf",a.postionView),t.R7$(),t.Y8G("disabled",a.editdisabled),t.R7$(),t.JRh(t.bMT(4,4,"ACTION.CANCEL")),t.R7$(2),t.Y8G("ngIf",a.editHotspot.pitch!==(null==a.postionView?null:a.postionView.clickGetPitch)&&a.editHotspot.yaw!==(null==a.postionView?null:a.postionView.clickGetYaw))}}function it(o,l){if(1&o&&(t.j41(0,"mat-cell")(1,"span",66),t.DNE(2,T,5,0,"ng-container",51)(3,Z,6,6,"ng-container",51),t.k0s()()),2&o){const a=l.$implicit,p=t.XpG(2);t.R7$(2),t.Y8G("ngIf",!p.editHotspot.guid||!a.guid||a.guid!==p.editHotspot.guid),t.R7$(),t.Y8G("ngIf",p.editHotspot.guid&&a.guid&&a.guid===p.editHotspot.guid)}}function W(o,l){1&o&&t.nrm(0,"mat-header-row")}function pt(o,l){if(1&o&&t.nrm(0,"mat-row"),2&o){const a=l.dataIndex;t.AVh("ntk-row-odd",a%2)("ntk-row-even",!(a%2))}}function Wt(o,l){if(1&o){const a=t.RV6();t.j41(0,"div",11)(1,"div",12)(2,"div",13)(3,"mat-label"),t.EFF(4),t.nI1(5,"translate"),t.k0s(),t.j41(6,"label",14),t.EFF(7),t.nI1(8,"translate"),t.k0s(),t.j41(9,"input",15,1),t.nI1(11,"translate"),t.mxI("ngModelChange",function(_){t.eBV(a);const y=t.XpG();return t.DH7(y.dataDetailModel.title,_)||(y.dataDetailModel.title=_),t.Njj(_)}),t.k0s(),t.DNE(12,mt,2,0,"mat-icon",16),t.j41(13,"mat-icon",17),t.EFF(14,"mode_edit"),t.k0s()(),t.j41(15,"div",13)(16,"input",18,2),t.nI1(18,"translate"),t.mxI("ngModelChange",function(_){t.eBV(a);const y=t.XpG();return t.DH7(y.dataDetailModel.linkFileId,_)||(y.dataDetailModel.linkFileId=_),t.Njj(_)}),t.bIt("click",function(){t.eBV(a);const _=t.XpG();return t.Njj(_.fileManagerOpenFormReport=!0)}),t.k0s(),t.DNE(19,Lt,2,0,"mat-icon",19),t.j41(20,"mat-icon",20),t.bIt("click",function(){t.eBV(a);const _=t.XpG();return t.Njj(_.fileManagerOpenFormReport=!0)}),t.EFF(21,"mode_edit"),t.k0s()(),t.j41(22,"cms-file-manager",21),t.bIt("itemSelected",function(_){t.eBV(a);const y=t.XpG();return t.Njj(y.onActionFileSelect(_))}),t.mxI("openFormChange",function(_){t.eBV(a);const y=t.XpG();return t.DH7(y.fileManagerOpenFormReport,_)||(y.fileManagerOpenFormReport=_),t.Njj(_)}),t.k0s(),t.j41(23,"a",22),t.nI1(24,"cmsthumbnail"),t.DNE(25,E,2,3,"img",23),t.k0s(),t.nrm(26,"hr"),t.DNE(27,U,19,4,"table",24),t.nrm(28,"hr"),t.j41(29,"h5"),t.EFF(30,"\u062a\u0646\u0638\u06cc\u0645\u0627\u062a \u062a\u0648\u0631"),t.k0s(),t.j41(31,"p"),t.EFF(32,"\u062f\u0631 \u0648\u0631\u0648\u062f \u0627\u06cc\u0646 \u062a\u0646\u0638\u06cc\u0645\u0627\u062a \u0628\u0627 \u0645\u062f\u06cc\u0631\u06cc\u062a \u0633\u0627\u0645\u0627\u0646\u0647 \u0647\u0645\u0627\u0647\u0646\u06af \u0628\u0627\u0634\u06cc\u062f"),t.k0s(),t.j41(33,"div",25)(34,"div",26),t.DNE(35,st,3,3,"button",27),t.k0s(),t.j41(36,"mat-table",28,3),t.qex(38,29),t.DNE(39,ut,2,0,"mat-header-cell",30)(40,jt,3,2,"mat-cell",31),t.bVm(),t.qex(41,32),t.DNE(42,ne,2,0,"mat-header-cell",30)(43,ue,3,2,"mat-cell",31),t.bVm(),t.qex(44,33),t.DNE(45,Pt,2,0,"mat-header-cell",30)(46,Ht,3,2,"mat-cell",31),t.bVm(),t.qex(47,34),t.DNE(48,At,2,0,"mat-header-cell",30)(49,me,3,2,"mat-cell",31),t.bVm(),t.qex(50,35),t.DNE(51,D,2,0,"mat-header-cell",30)(52,ee,3,2,"mat-cell",31),t.bVm(),t.qex(53,36),t.DNE(54,ie,2,0,"mat-header-cell",30)(55,$t,3,2,"mat-cell",31),t.bVm(),t.qex(56,37),t.DNE(57,fe,2,0,"mat-header-cell",30)(58,de,3,2,"mat-cell",31),t.bVm(),t.qex(59,38),t.DNE(60,Xt,2,0,"mat-header-cell",30)(61,c,3,2,"mat-cell",31),t.bVm(),t.qex(62,39),t.DNE(63,C,2,0,"mat-header-cell",30)(64,F,3,2,"mat-cell",31),t.bVm(),t.qex(65,40),t.DNE(66,S,2,0,"mat-header-cell",30)(67,it,4,2,"mat-cell",31),t.bVm(),t.DNE(68,W,1,0,"mat-header-row",41)(69,pt,1,4,"mat-row",42),t.k0s()(),t.j41(70,"div",26)(71,"button",9),t.bIt("click",function(){t.eBV(a);const _=t.XpG();return t.Njj(_.onActionSubmitView360())}),t.nrm(72,"i",43),t.EFF(73),t.nI1(74,"translate"),t.k0s(),t.j41(75,"button",44),t.bIt("click",function(){t.eBV(a);const _=t.XpG();return t.Njj(_.onActionCancellView360())}),t.nrm(76,"i",45),t.EFF(77),t.nI1(78,"translate"),t.k0s()(),t.nrm(79,"br"),t.k0s()()}if(2&o){const a=t.XpG();t.R7$(4),t.JRh(t.bMT(5,26,"TITLE.Photography_Place")),t.R7$(3),t.JRh(t.bMT(8,28,"TITLE.title")),t.R7$(2),t.FS9("placeholder",t.bMT(11,30,"TITLE.Photography_Place")),t.R50("ngModel",a.dataDetailModel.title),t.R7$(3),t.Y8G("ngIf",a.dataDetailModel.title),t.R7$(4),t.FS9("placeholder",t.bMT(18,32,"TITLE.View_360_File_ID")),t.R50("ngModel",a.dataDetailModel.linkFileId),t.R7$(3),t.Y8G("ngIf",a.dataDetailModel.linkFileId),t.R7$(3),t.Y8G("language",a.appLanguage)("isPopup",!0),t.R50("openForm",a.fileManagerOpenFormReport),t.Y8G("tree",a.fileManagerTree)("openDirectUploadView",!0)("openFilemanagerButtonLabelKey","select")("selectFileType",a.selectFileTypeReport)("openFilemanagerButtonView",!1),t.R7$(),t.FS9("href",t.bMT(24,34,a.dataDetailModel.panorama),t.B4B),t.R7$(2),t.Y8G("ngIf",(null==a.dataDetailModel||null==a.dataDetailModel.panorama?null:a.dataDetailModel.panorama.length)>0),t.R7$(2),t.Y8G("ngIf",a.postionView),t.R7$(8),t.Y8G("ngIf",a.postionView),t.R7$(),t.Y8G("dataSource",a.tableHotSpotdataSource),t.R7$(32),t.Y8G("matHeaderRowDef",a.tableHotspotDisplayedColumns)("matHeaderRowDefSticky",!0),t.R7$(),t.Y8G("matRowDefColumns",a.tableHotspotDisplayedColumns),t.R7$(4),t.SpI(" ",t.bMT(74,36,"ACTION.SUBMIT_BUTTON")," "),t.R7$(4),t.SpI(" ",t.bMT(78,38,"ACTION.CANCEL")," ")}}function zt(o,l){1&o&&(t.j41(0,"mat-header-cell"),t.EFF(1),t.nI1(2,"translate"),t.k0s()),2&o&&(t.R7$(),t.SpI(" ",t.bMT(2,1,"TITLE.PHOTO")," "))}function ht(o,l){if(1&o&&t.nrm(0,"img",48),2&o){const a=t.XpG(2).$implicit;t.FS9("src",a.panorama,t.B4B)}}function dt(o,l){if(1&o&&(t.qex(0),t.j41(1,"a",22),t.DNE(2,ht,1,1,"img",23),t.k0s(),t.bVm()),2&o){const a=t.XpG().$implicit;t.R7$(),t.FS9("href",a.panorama,t.B4B),t.R7$(),t.Y8G("ngIf",(null==a||null==a.panorama?null:a.panorama.length)>0)}}function Mt(o,l){if(1&o&&(t.j41(0,"mat-cell"),t.DNE(1,dt,3,2,"ng-container",51),t.k0s()),2&o){const a=l.$implicit;t.R7$(),t.Y8G("ngIf",a.panorama)}}function It(o,l){1&o&&(t.j41(0,"mat-header-cell"),t.EFF(1),t.nI1(2,"translate"),t.k0s()),2&o&&(t.R7$(),t.SpI(" ",t.bMT(2,1,"TITLE.Photography_Place")," "))}function wt(o,l){if(1&o&&(t.qex(0),t.EFF(1),t.bVm()),2&o){const a=t.XpG().$implicit;t.R7$(),t.SpI(" ",a.title," ")}}function Vt(o,l){if(1&o&&(t.j41(0,"mat-cell"),t.DNE(1,wt,2,1,"ng-container",51),t.k0s()),2&o){const a=l.$implicit;t.R7$(),t.Y8G("ngIf",a.title)}}function ot(o,l){1&o&&(t.j41(0,"mat-header-cell"),t.EFF(1," \u0634\u0646\u0627\u0633\u0647 \u0635\u062d\u0646\u0647 "),t.k0s())}function v(o,l){if(1&o&&(t.j41(0,"mat-cell"),t.qex(1),t.EFF(2),t.bVm(),t.k0s()),2&o){const a=l.$implicit;t.R7$(2),t.SpI(" ",a.linkFileId," ")}}function Dt(o,l){1&o&&(t.j41(0,"mat-header-cell"),t.EFF(1),t.nI1(2,"translate"),t.nI1(3,"translate"),t.k0s()),2&o&&(t.R7$(),t.Lme(" ",t.bMT(2,2,"TITLE.Edit")," | ",t.bMT(3,4,"TITLE.Delete")," "))}function Bt(o,l){if(1&o){const a=t.RV6();t.j41(0,"mat-cell",79)(1,"small")(2,"mat-icon",80),t.bIt("click",function(){const _=t.eBV(a).renderIndex,y=t.XpG(2);return t.Njj(y.onActionOptionEditView360(_))}),t.EFF(3,"edit"),t.k0s()(),t.EFF(4,"| "),t.j41(5,"small")(6,"mat-icon",81),t.bIt("click",function(){const _=t.eBV(a).renderIndex,y=t.XpG(2);return t.Njj(y.onActionOptionRemoveView360(_))}),t.EFF(7,"delete"),t.k0s()()()}}function Et(o,l){1&o&&t.nrm(0,"mat-header-row")}function Ut(o,l){if(1&o&&t.nrm(0,"mat-row"),2&o){const a=l.dataIndex;t.AVh("ntk-row-odd",a%2)("ntk-row-even",!(a%2))}}function d(o,l){if(1&o&&(t.j41(0,"div",11)(1,"mat-table",73),t.qex(2,74),t.DNE(3,zt,3,3,"mat-header-cell",30)(4,Mt,2,1,"mat-cell",31),t.bVm(),t.qex(5,75),t.DNE(6,It,3,3,"mat-header-cell",30)(7,Vt,2,1,"mat-cell",31),t.bVm(),t.qex(8,76),t.DNE(9,ot,2,0,"mat-header-cell",30)(10,v,3,1,"mat-cell",31),t.bVm(),t.qex(11,40),t.DNE(12,Dt,4,6,"mat-header-cell",30)(13,Bt,8,0,"mat-cell",77),t.bVm(),t.DNE(14,Et,1,0,"mat-header-row",78)(15,Ut,1,4,"mat-row",42),t.k0s()()),2&o){const a=t.XpG();t.R7$(),t.Y8G("dataSource",a.tabledataSource),t.R7$(13),t.Y8G("matHeaderRowDef",a.tabledisplayedColumns),t.R7$(),t.Y8G("matRowDefColumns",a.tabledisplayedColumns)}}class x{}let r=(()=>{class o{static#t=this.nextId=0;constructor(a,p,_){this.cmsToastrService=a,this.publicHelper=p,this.translate=_,this.id=++o.nextId,this.scenesList=[],this.dataDetailModel=new O.k49,this.dataModelChange=new t.bkB,this.formInfo=new O.IL9,this.loadingOption=new q.o,this.tabledataSource=new h.I6,this.tableHotSpotdataSource=new h.I6,this.tabledisplayedColumns=["linkFileId","panorama","Title","Action"],this.tableHotspotDisplayedColumns=["type","sceneIdSelector","text","url","pitch","yaw","Action"],this.selectFileTypeReport=["jpeg","jpg"],this.appLanguage="fa",this.showAddView360=!1,this.fileManagerOpenFormReport=!1,this.actionPannellumTourLoadClick=!1,this.inAddhotspotGuid="",this.selectIndex=-1,this.fileManagerTree=this.publicHelper.GetfileManagerTreeConfig()}getGuid(){return Math.floor(1e3*Math.random())+""}set dataModel(a){a||(a=new O.J6_),a.defaultValue||(a.defaultValue=new O.SBG),a.scenes||(a.scenes=new Map),this.scenesList=[],Object.keys(a.scenes).map(p=>{a.scenes[p].guid=this.getGuid(),this.scenesList.push(a.scenes[p])}),this.scenesList.forEach(p=>{p.hotSpots||(p.hotSpots=[]),p.hotSpots.forEach(_=>{_.guid=this.getGuid()})}),this.privateDataModel=a,this.tabledataSource.data=this.scenesList,this.tableHotSpotdataSource.data=[]}get dataModel(){return this.privateDataModel}set dataImageModel(a){a||(a=[]),this.privateDataImageModel=a}ngOnInit(){this.translate.get("TITLE.Edit").subscribe(a=>{this.formInfo.formTitle=a})}ngAfterViewInit(){this.container.nativeElement.style.display="none"}uniqByReduce(a){const p=[];return a.forEach(_=>{!p.includes(_)&&0==p.filter(y=>y.pitch==_.pitch&&y.yaw==_.yaw).length&&p.push(_)}),p}actionPannellumImageLoad(a,p){const _={type:"equirectangular",panorama:a,autoLoad:!0,autoRotate:1.5,crossOrigin:"anonymous"};p&&p.length>0&&(_.hotSpots=this.uniqByReduce(p));const y=Object.assign({},_,this.options);this.viewer&&this.onActionPannellumDestroy(),this.viewer=pannellum.viewer(this.container.nativeElement,y),this.container.nativeElement.style.display="block"}actionPannellumTourLoad(){this.actionPannellumTourLoadClick=!0,this.actionPrivateDataModelOptimaze();const a={};a.default=this.privateDataModel.defaultValue,this.privateDataModel&&this.privateDataModel.scenes&&(a.scenes=this.privateDataModel.scenes);const p=Object.assign({},a,this.options);this.viewer&&this.onActionPannellumDestroy(),this.viewer=pannellum.viewer(this.container.nativeElement,p),this.container.nativeElement.style.display="block"}onActionPannellumClick(a){if(!this.viewer)return;if(this.actionPannellumTourLoadClick)return void(this.actionPannellumTourLoadClick=!1);this.postionView=new x,this.postionView.viewerGetYaw=this.viewer.getYaw(),this.postionView.viewerGetPitch=this.viewer.getPitch();const p=this.viewer.mouseEventToCoords(a);!p||0==p.length||(this.postionView.clickGetYaw=p[1],this.postionView.clickGetPitch=p[0])}onActionPannellumDestroy(){this.container.nativeElement.style.display="none",this.postionView=null,this.viewer&&this.viewer.destroy()}onActionPannellumClickLastPoint(){this.postionView&&(0!=this.postionView.clickGetYaw||0!=this.postionView.clickGetPitch)&&(this.editHotspot.yaw=this.postionView.clickGetYaw,this.editHotspot.pitch=this.postionView.clickGetPitch)}onActionFileSelect(a){a&&a.id&&0!==a.id?(this.dataDetailModel.linkFileId=a.id,this.dataDetailModel.panorama=a.downloadLinksrc,this.dataDetailModel.preview=a.downloadLinksrc,this.actionPannellumImageLoad(this.dataDetailModel.panorama,[])):this.cmsToastrService.typeErrorSelectedRow()}onActionSubmitView360(){(!this.dataDetailModel.linkFileId||this.dataDetailModel.linkFileId<=0)&&this.cmsToastrService.typeErrorMessage("\u0641\u0627\u06cc\u0644 \u0627\u0646\u062a\u062e\u0627\u0628 \u0646\u0634\u062f\u0647"),this.scenesList||(this.scenesList=[]),this.selectIndex>=0?this.scenesList[this.selectIndex]=this.dataDetailModel:this.scenesList.push(this.dataDetailModel),this.actionPrivateDataModelOptimaze(),this.dataModelChange.emit(this.privateDataModel),this.showAddView360=!this.showAddView360,this.selectIndex=-1,this.onActionPannellumDestroy()}actionPrivateDataModelOptimaze(){this.privateDataModel.defaultValue||(this.privateDataModel.defaultValue=new O.SBG),this.privateDataModel.scenes=new Map,this.scenesList||(this.scenesList=[]),this.scenesList.forEach(a=>{if(a.title&&a.title.length>0){const p=[];a.hotSpots||(a.hotSpots=[]),a.hotSpots.forEach(_=>{_.type&&_.type.length>0&&p.push(_)}),a.hotSpots=this.uniqByReduce(p),this.privateDataModel.scenes[a.linkFileId]=a,this.privateDataModel.scenes[a.linkFileId].hfov=110}}),(!this.privateDataModel.defaultValue.firstScene||0==this.privateDataModel.defaultValue.firstScene.length)&&(this.privateDataModel.scenes&&this.scenesList&&this.scenesList.length>0&&(this.privateDataModel.defaultValue.firstScene=this.scenesList[0].linkFileId+""),this.privateDataModel.defaultValue.sceneFadeDuration=1e3)}onActionCancellView360(){this.showAddView360=!1,this.onActionPannellumDestroy()}onActionShowView360Add(){this.dataDetailModel=new O.k49,this.showAddView360=!this.showAddView360,this.tableHotSpotdataSource.data=[]}onActionShowHotspotAdd(){this.dataDetailModel||(this.dataDetailModel=new O.k49),this.dataDetailModel.hotSpots||(this.dataDetailModel.hotSpots=[]),this.editHotspot=new O.I1z;const a=new O.I1z;a.guid=this.getGuid(),this.inAddhotspotGuid=a.guid,this.dataDetailModel.hotSpots.push(a),this.tableHotSpotdataSource.data=this.uniqByReduce(this.dataDetailModel.hotSpots),this.newROw(a),this.onActionPannellumClickLastPoint()}onActionOptionRemoveView360(a){a<0||!this.scenesList||0===this.scenesList.length||(this.scenesList.splice(a,1),this.actionPrivateDataModelOptimaze(),this.dataModel=this.privateDataModel,this.dataModelChange.emit(this.privateDataModel),this.onActionPannellumDestroy())}onActionOptionEditView360(a){a<0||!this.scenesList||0===this.scenesList.length||(this.dataDetailModel=this.scenesList[a],this.dataDetailModel.hotSpots||(this.dataDetailModel.hotSpots=[]),this.actionPannellumImageLoad(this.dataDetailModel.panorama,this.dataDetailModel.hotSpots),this.oldHotspot=new O.I1z,this.editHotspot=new O.I1z,this.tableHotSpotdataSource.data=this.uniqByReduce(this.dataDetailModel.hotSpots),this.selectIndex=a,this.showAddView360=!this.showAddView360)}newROw(a){this.editHotspot=a&&a.guid?a:new O.I1z,this.oldHotspot={...this.editHotspot}}editROw(a){this.editHotspot=a&&a.guid?a:new O.I1z,this.oldHotspot={...this.editHotspot},this.inAddhotspotGuid=""}removeROw(a){const p=this.dataDetailModel.hotSpots.findIndex(_=>_.guid==a.guid);p>=0&&(this.dataDetailModel.hotSpots.splice(p,1),this.tableHotSpotdataSource.data=this.uniqByReduce(this.dataDetailModel.hotSpots))}updateEdit(){this.inAddhotspotGuid="",this.editdisabled=!0;const a=this.dataDetailModel.hotSpots.findIndex(p=>p.guid==this.oldHotspot.guid);a>=0&&(this.dataDetailModel.hotSpots[a]=this.editHotspot),this.editdisabled=!1,this.oldHotspot=new O.I1z,this.editHotspot=new O.I1z}cancelEdit(){this.inAddhotspotGuid?.length>0&&(this.dataDetailModel.hotSpots=this.dataDetailModel.hotSpots.filter(a=>a.guid!=this.inAddhotspotGuid)),this.editHotspot=new O.I1z,this.oldHotspot&&this.oldHotspot.guid&&(this.dataDetailModel.hotSpots||(this.dataDetailModel.hotSpots=[]),this.tableHotSpotdataSource.data=this.uniqByReduce(this.dataDetailModel.hotSpots))}onActionImportFile360View(){this.privateDataImageModel&&this.privateDataImageModel.length>0&&(this.actionPrivateDataModelOptimaze(),this.privateDataImageModel.forEach(a=>{if(!this.privateDataModel.scenes[a.linkFileId]&&a.linkFileId>0){const p=new O.k49;p.guid=this.getGuid(),p.linkFileId=a.linkFileId,p.title=a.title,p.hotSpots=this.uniqByReduce(a.hotSpots),p.panorama=a.panorama,p.preview=a.preview,p.hfov=110,this.privateDataModel.scenes[a.linkFileId]=p}}),this.dataModel=this.privateDataModel)}static#e=this.\u0275fac=function(p){return new(p||o)(t.rXU(gt.k),t.rXU(P.A),t.rXU(f.c$))};static#i=this.\u0275cmp=t.VBU({type:o,selectors:[["app-cms-360-tour-list"]],viewQuery:function(p,_){if(1&p&&t.GBs(nt,5),2&p){let y;t.mGM(y=t.lsd())&&(_.container=y.first)}},inputs:{dataModel:"dataModel",dataImageModel:"dataImageModel"},outputs:{dataModelChange:"dataModelChange"},decls:8,vars:7,consts:[["container",""],["Title",""],["LinkFileId",""],["table",""],["type","button","class","btn font-13 font-600 btn-s m-1 rounded-s shadow-xl border-0 gradient-highlight",3,"click",4,"ngIf"],["type","button","class","btn font-13 font-600 btn-s m-1 rounded-s shadow-xl border-0 gradient-highlight","style","margin: 10px ",3,"click",4,"ngIf"],[1,"container",2,"height","380px","width","100%","direction","ltr",3,"click","id"],["class","example-container mat-elevation-z8",4,"ngIf"],[3,"optionsInfoAreaId"],["type","button",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-highlight",3,"click"],["type","button",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-highlight",2,"margin","10px",3,"click"],[1,"example-container","mat-elevation-z8"],[1,"m-2"],[1,"input-style","has-borders","no-icon","input-style-always-active","validate-field","mb-4"],["for","dataDetailModel.title",1,"color-highlight"],["type","text","name","dataDetailModel.title","id","dataDetailModel.title","minlength","3","maxlength","100","required","",1,"form-control","validate-name",3,"ngModelChange","ngModel","placeholder"],["matSuffix","","class","pointer","matSuffix","","mat-icon-button","","aria-label","Clear",3,"click",4,"ngIf"],["matSuffix","",1,"pointer"],["type","text","name","dataDetailModel.linkFileId",1,"form-control","validate-name",3,"ngModelChange","click","ngModel","placeholder"],["matSuffix","","matSuffix","","mat-icon-button","","aria-label","Clear",3,"click",4,"ngIf"],["matSuffix","",3,"click"],[3,"itemSelected","openFormChange","language","isPopup","openForm","tree","openDirectUploadView","openFilemanagerButtonLabelKey","selectFileType","openFilemanagerButtonView"],["target","_blank",3,"href"],["style","vertical-align:middle;","class","ntk-hover-zoom","aria-hidden","","height","50","width","50",3,"src",4,"ngIf"],["class","grid-row-ltr-center",4,"ngIf"],[2,"background-color","bisque","padding","5px"],[1,"form-actions",2,"direction","ltr"],["type","button","class","btn font-13 font-600 btn-s m-1 rounded-s shadow-xl border-0 gradient-teal",3,"click",4,"ngIf"],["matSort","",3,"dataSource"],["matColumnDef","type"],[4,"matHeaderCellDef"],[4,"matCellDef"],["matColumnDef","sceneId"],["matColumnDef","sceneIdSelector"],["matColumnDef","pitch"],["matColumnDef","yaw"],["matColumnDef","targetYaw"],["matColumnDef","targetPitch"],["matColumnDef","text"],["matColumnDef","url"],["matColumnDef","Action"],[4,"matHeaderRowDef","matHeaderRowDefSticky"],[3,"ntk-row-odd","ntk-row-even",4,"matRowDef","matRowDefColumns"],[1,"fa","fa-check-square-o"],["type","button",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-gray",3,"click"],[1,"ft-x"],["matSuffix","","matSuffix","","mat-icon-button","","aria-label","Clear",1,"pointer",3,"click"],["matSuffix","","matSuffix","","mat-icon-button","","aria-label","Clear",3,"click"],["aria-hidden","","height","50","width","50",1,"ntk-hover-zoom",2,"vertical-align","middle",3,"src"],[1,"grid-row-ltr-center"],["type","button",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-teal",3,"click"],[4,"ngIf"],[1,"text-truncate","grid-row-ltr-center"],["placeholder","Select","name","type",1,"form-control","validate-name",3,"ngModelChange","disabled","ngModel"],[3,"value"],[1,"text-truncate"],["type","text","placeholder","sceneId","name","sceneId",1,"form-control","validate-name",2,"direction","ltr","text-align","left",3,"ngModelChange","disabled","ngModel"],["placeholder","Select","name","sceneId",1,"form-control","validate-name",3,"ngModelChange","disabled","ngModel"],[3,"value",4,"ngFor","ngForOf"],["type","number","placeholder","pitch","name","pitch",1,"form-control","validate-name",2,"direction","ltr","text-align","left",3,"ngModelChange","disabled","ngModel"],["type","number","placeholder","yaw","name","yaw",1,"form-control","validate-name",2,"direction","ltr","text-align","left",3,"ngModelChange","disabled","ngModel"],["type","text","placeholder","targetYaw","name","targetYaw",1,"form-control","validate-name",2,"direction","ltr","text-align","left",3,"ngModelChange","disabled","ngModel"],["type","text","placeholder","targetPitch","name","targetPitch",1,"form-control","validate-name",2,"direction","ltr","text-align","left",3,"ngModelChange","disabled","ngModel"],["type","text","placeholder","text","name","text",1,"form-control","validate-name",2,"direction","ltr","text-align","left",3,"ngModelChange","disabled","ngModel"],[1,"text-truncate","grid-row-ltr"],["type","text","placeholder","url","name","url",1,"form-control","validate-name",2,"direction","ltr","text-align","left",3,"ngModelChange","disabled","ngModel"],[1,"m-1",2,"text-align","center"],[3,"click"],["type","button","class","mb-2",3,"disabled","click",4,"ngIf"],["type","button",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-gray",3,"click","disabled"],["type","button","class","btn font-13 font-600 btn-s m-1 rounded-s shadow-xl border-0 gradient-green","matTooltip","\u062b\u0628\u062a \u0622\u062e\u0631\u06cc\u0646 \u0646\u0642\u0637\u0647 \u06a9\u0644\u06cc\u06a9 \u0634\u062f\u0647",3,"disabled","click",4,"ngIf"],["type","button",1,"mb-2",3,"click","disabled"],["type","button","matTooltip","\u062b\u0628\u062a \u0622\u062e\u0631\u06cc\u0646 \u0646\u0642\u0637\u0647 \u06a9\u0644\u06cc\u06a9 \u0634\u062f\u0647",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-green",3,"click","disabled"],["multiTemplateDataRows","",3,"dataSource"],["matColumnDef","panorama"],["matColumnDef","Title"],["matColumnDef","linkFileId"],["class","Action",4,"matCellDef"],[4,"matHeaderRowDef"],[1,"Action"],["matTooltipPosition","before","aria-hidden","false",2,"color","blue","cursor","pointer",3,"click"],["matTooltipPosition","before","aria-hidden","false",2,"color","red","cursor","pointer",3,"click"]],template:function(p,_){if(1&p){const y=t.RV6();t.DNE(0,N,3,3,"button",4)(1,Nt,2,0,"button",5)(2,bt,2,0,"button",5),t.j41(3,"div",6,0),t.bIt("click",function(X){return t.eBV(y),t.Njj(_.onActionPannellumClick(X))}),t.k0s(),t.DNE(5,Wt,80,40,"div",7),t.nrm(6,"app-progress-spinner",8),t.DNE(7,d,16,3,"div",7)}2&p&&(t.Y8G("ngIf",!_.showAddView360),t.R7$(),t.Y8G("ngIf",_.privateDataImageModel&&_.privateDataImageModel.length>0),t.R7$(),t.Y8G("ngIf",_.privateDataModel&&_.privateDataModel&&_.privateDataModel.scenes&&_.scenesList&&_.scenesList.length>0),t.R7$(),t.Y8G("id",_.id),t.R7$(2),t.Y8G("ngIf",_.showAddView360),t.R7$(),t.Y8G("optionsInfoAreaId",_.constructor.name),t.R7$(),t.Y8G("ngIf",!_.showAddView360))},dependencies:[i.Sq,i.bT,rt.me,rt.Q0,rt.BC,rt.YS,rt.xh,rt.tU,rt.vS,vt.wT,B.nJ,B.yw,A.An,ft.VO,ct.B4,h.Zl,h.tL,h.ji,h.cC,h.YV,h.iL,h.KS,h.$R,h.YZ,h.NB,xt.oV,ae.e5,Ot._,f.D9,M.r],encapsulation:2})}return o})()},4660:(_t,w,m)=>{"use strict";m.d(w,{p:()=>bt});var t=m(3308),h=m(7788),K=m(7222),tt=m(8189),e=m(5804),Y=m(965),O=m(8887),q=m(3793),gt=m(2831),P=m(3527),f=m(2882),i=m(5154),rt=m(6610),vt=m(2497),B=m(8278),A=m(9344),ft=m(6182),ct=m(4587),xt=m(7912),ae=m(8267);const Ot=["*"];function M(mt,Lt){if(1&mt&&(h.j41(0,"label",8),h.EFF(1),h.k0s()),2&mt){const E=h.XpG();h.Mz_("for","app-cms-site-selector-",E.id,""),h.R7$(),h.JRh(E.optionLabel)}}function nt(mt,Lt){if(1&mt&&(h.nrm(0,"img",11),h.nI1(1,"cmsthumbnail")),2&mt){const E=h.XpG().$implicit;h.FS9("src",h.bMT(1,1,E.linkImageIdSrc),h.B4B)}}function N(mt,Lt){if(1&mt&&(h.j41(0,"mat-option",9),h.DNE(1,nt,2,3,"img",10),h.j41(2,"span"),h.EFF(3),h.k0s()()),2&mt){const E=Lt.$implicit,U=h.XpG();h.Y8G("value",E)("disabled",U.optionDisabled),h.R7$(),h.Y8G("ngIf",E.linkImageIdSrc),h.R7$(2),h.JRh(U.displayOption(E))}}function Nt(mt,Lt){if(1&mt){const E=h.RV6();h.j41(0,"mat-icon",12),h.bIt("click",function(){h.eBV(E);const st=h.XpG();return h.Njj(st.onActionSelectClear())}),h.EFF(1,"close"),h.k0s()}}let bt=(()=>{class mt{static#t=this.nextId=0;constructor(E,U,st,ut,Q){this.coreEnumService=E,this.translate=U,this.publicHelper=st,this.cdr=ut,this.categoryService=Q,this.id=++mt.nextId,this.dataModelResult=new tt.N$V,this.dataModelSelect=new tt.skK,this.formControl=new K.MJ,this.optionDisabled=!1,this.optionSelectFirstItem=!1,this.optionPlaceholder="",this.optionLabel="",this.optionChange=new h.bkB,this.optionReload=()=>this.onActionButtonReload(),this.publicHelper.processService.cdr=this.cdr}set optionSelectForce(E){this.onActionSelectForce(E)}ngOnInit(){this.loadOptions(),(!this.optionLabel||0==this.optionLabel.length&&this.optionPlaceholder?.length>0)&&(this.optionLabel=this.optionPlaceholder)}loadOptions(){this.filteredOptions=this.formControl.valueChanges.pipe((0,Y.Z)(""),(0,O.B)(1500),(0,q.F)(),(0,gt.n)(E=>this.DataGetAll("string"==typeof E||"number"==typeof E?E:"")))}displayFn(E){return E&&E.virtual_Parent&&E.virtual_Parent.title.length>0&&E.virtual_Parent.virtual_Parent&&E.virtual_Parent.virtual_Parent.title.length>0&&E.virtual_Parent.virtual_Parent.virtual_Parent&&E.virtual_Parent.virtual_Parent.virtual_Parent.title.length>0?E.virtual_Parent.virtual_Parent.virtual_Parent.titleML+" > "+E.virtual_Parent.virtual_Parent.titleML+" > "+E.virtual_Parent.titleML+" > "+E.titleML:E&&E.virtual_Parent&&E.virtual_Parent.title.length>0&&E.virtual_Parent.virtual_Parent&&E.virtual_Parent.virtual_Parent.title.length>0?E.virtual_Parent.virtual_Parent.titleML+" > "+E.virtual_Parent.titleML+" > "+E.titleML:E&&E.virtual_Parent&&E.virtual_Parent.title.length>0?E.virtual_Parent.titleML+" > "+E.titleML:E?E.titleML:void 0}displayOption(E){return E&&E.virtual_Parent&&E.virtual_Parent.title.length>0&&E.virtual_Parent.virtual_Parent&&E.virtual_Parent.virtual_Parent.title.length>0&&E.virtual_Parent.virtual_Parent.virtual_Parent&&E.virtual_Parent.virtual_Parent.virtual_Parent.title.length>0?E.virtual_Parent.virtual_Parent.virtual_Parent.titleML+" > "+E.virtual_Parent.virtual_Parent.titleML+" > "+E.virtual_Parent.titleML+" > "+E.titleML:E&&E.virtual_Parent&&E.virtual_Parent.title.length>0&&E.virtual_Parent.virtual_Parent&&E.virtual_Parent.virtual_Parent.title.length>0?E.virtual_Parent.virtual_Parent.titleML+" > "+E.virtual_Parent.titleML+" > "+E.titleML:E&&E.virtual_Parent&&E.virtual_Parent.title.length>0?E.virtual_Parent.titleML+" > "+E.titleML:E?E.titleML:void 0}DataGetAll(E){var U=this;return(0,t.A)(function*(){const st=new tt.O2i;if(st.rowPerPage=20,st.accessLoad=!0,E&&E.length>0){let Q=new tt.ycK;Q=new tt.ycK,Q.propertyName="Symbol",Q.value=E,Q.searchType=tt._GO.Contains,Q.clauseType=tt.jL_.Or,st.filters.push(Q),Q=new tt.ycK,Q.propertyName="Title",Q.value=E,Q.searchType=tt._GO.Contains,Q.clauseType=tt.jL_.Or,st.filters.push(Q),E&&"number"==typeof+E&&+E>0&&(Q=new tt.ycK,Q.propertyName="Id",Q.value=E,Q.searchType=tt._GO.Equal,Q.clauseType=tt.jL_.Or,st.filters.push(Q))}const ut=U.constructor.name+"main";return U.translate.get("MESSAGE.Receiving_information").subscribe(Q=>{U.publicHelper.processService.processStart(ut,Q,U.constructor.name)}),yield(0,e._)(U.categoryService.ServiceGetAll(st)).then(Q=>(U.dataModelResult=Q,U.optionSelectFirstItem&&(!U.dataModelSelect||!U.dataModelSelect.id||U.dataModelSelect.id<=0)&&U.dataModelResult.listItems.length>0&&(U.optionSelectFirstItem=!1,setTimeout(()=>{U.formControl.setValue(U.dataModelResult.listItems[0])},1e3),U.onActionSelect(U.dataModelResult.listItems[0])),U.publicHelper.processService.processStop(ut),Q.listItems))})()}onActionSelect(E){this.optionDisabled||(this.dataModelSelect=E,this.optionChange.emit(this.dataModelSelect))}onActionSelectClear(){this.optionDisabled||(this.dataModelSelect=null,this.formControl.setValue(null),this.optionChange.emit(null))}push(E){return this.filteredOptions.pipe((0,P.T)(U=>(U.find(st=>st.id===E.id)||U.push(E),U)))}onActionSelectForce(E){if("number"==typeof E&&E>0){if(this.dataModelSelect&&this.dataModelSelect.id===E)return;if(this.dataModelResult&&this.dataModelResult.listItems&&this.dataModelResult.listItems.find(U=>U.id===E)){const U=this.dataModelResult.listItems.find(st=>st.id===E);return this.dataModelSelect=U,void this.formControl.setValue(U)}this.categoryService.ServiceGetOneIncludeParent(E).subscribe({next:U=>{U.isSuccess&&(this.filteredOptions=this.push(U.item),this.dataModelSelect=U.item,this.formControl.setValue(U.item),this.optionChange.emit(U.item))}})}else{if(typeof E==typeof tt.skK)return this.filteredOptions=this.push(E),this.dataModelSelect=E,void this.formControl.setValue(E);this.formControl.setValue(null)}}onActionButtonReload(){this.dataModelSelect=new tt.skK,this.loadOptions()}static#e=this.\u0275fac=function(U){return new(U||mt)(h.rXU(tt.i9D),h.rXU(f.c$),h.rXU(i.A),h.rXU(h.gRc),h.rXU(tt.QZQ))};static#i=this.\u0275cmp=h.VBU({type:mt,selectors:[["app-cms-location-selector"]],inputs:{optionDisabled:"optionDisabled",optionSelectFirstItem:"optionSelectFirstItem",optionPlaceholder:"optionPlaceholder",optionLabel:"optionLabel",optionReload:"optionReload",optionSelectForce:"optionSelectForce"},outputs:{optionChange:"optionChange"},ngContentSelectors:Ot,decls:10,vars:13,consts:[["matauto","matAutocomplete"],[1,"input-style","has-borders","no-icon","input-style-always-active","validate-field","mb-4","progressOverlayContainer"],[3,"optionsInfoAreaId"],["class","color-highlight",3,"for",4,"ngIf"],["type","text","matInput","",1,"form-control","validate-name",3,"placeholder","formControl","matAutocomplete","id"],[3,"optionSelected","displayWith"],[3,"value","disabled",4,"ngFor","ngForOf"],["matSuffix","","matSuffix","","mat-icon-button","","aria-label","Clear",3,"click",4,"ngIf"],[1,"color-highlight",3,"for"],[3,"value","disabled"],["style","vertical-align:middle;","class","ntk-hover-zoom","aria-hidden","","height","25","width","25",3,"src",4,"ngIf"],["aria-hidden","","height","25","width","25",1,"ntk-hover-zoom",2,"vertical-align","middle",3,"src"],["matSuffix","","matSuffix","","mat-icon-button","","aria-label","Clear",3,"click"]],template:function(U,st){if(1&U){const ut=h.RV6();h.NAR(),h.j41(0,"div",1),h.nrm(1,"app-progress-spinner",2),h.DNE(2,M,2,3,"label",3),h.nrm(3,"input",4),h.j41(4,"mat-autocomplete",5,0),h.bIt("optionSelected",function(Ct){return h.eBV(ut),h.Njj(st.onActionSelect(Ct.option.value))}),h.DNE(6,N,4,4,"mat-option",6),h.nI1(7,"async"),h.k0s(),h.DNE(8,Nt,2,0,"mat-icon",7),h.SdG(9),h.k0s()}if(2&U){const ut=h.sdS(5);h.R7$(),h.Y8G("optionsInfoAreaId",st.constructor.name),h.R7$(),h.Y8G("ngIf",(null==st.optionLabel?null:st.optionLabel.length)>0),h.R7$(),h.FS9("placeholder",st.optionPlaceholder),h.Mz_("id","app-cms-site-selector-",st.id,""),h.Y8G("formControl",st.formControl)("matAutocomplete",ut),h.BMQ("disabled",!!st.optionDisabled||null),h.R7$(),h.Y8G("displayWith",st.displayFn),h.R7$(2),h.Y8G("ngForOf",h.bMT(7,11,st.filteredOptions)),h.R7$(2),h.Y8G("ngIf",null==st.dataModelSelect?null:st.dataModelSelect.id)}},dependencies:[rt.Sq,rt.bT,K.me,K.BC,K.l_,vt.$3,B.wT,vt.pN,A.yw,ft.An,ct.fg,xt._,rt.Jj,ae.r],encapsulation:2})}return mt})()},4768:(_t,w,m)=>{"use strict";m.d(w,{p:()=>O});var t=m(7788),h=m(9197),tt=m(5312),e=m(9722),Y=m(8786);let O=(()=>{class q{static#t=this.nextId=0;set optonCenter(P){this.map&&P&&P.lat&&P.lon&&0!==P.lat&&0!==P.lon&&this.map.setView(new h.LatLng(P.lat,P.lon),this.zoom)}set optionCurrentPoint(P){this.onActionCurrentPoint(P)}constructor(P){this.cmsToastrService=P,this.id=++q.nextId,this.map$=new t.bkB,this.zoom$=new t.bkB,this.options={layers:[(0,h.tileLayer)(tt.c.leafletUrl,{opacity:.7,maxZoom:19,detectRetina:!0})],zoom:16,center:[32.684985,51.6359425]},this.destroy=!1}ngOnInit(){const rt=h.icon({iconRetinaUrl:"assets/leaflet/marker-icon-2x.png",iconUrl:"assets/leaflet/marker-icon.png",shadowUrl:"assets/leaflet/marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]});h.Marker.prototype.options.icon=rt}ngOnDestroy(){this.map&&(this.map.clearAllEventListeners(),this.destroy=!0)}onMapReady(P){setTimeout(()=>{this.map&&!this.destroy&&P.invalidateSize()},500),this.map=P,this.map$.emit(P),this.zoom=P.getZoom(),this.zoom$.emit(this.zoom)}onMapZoomEnd(P){this.zoom=P.target.getZoom(),this.zoom$.emit(this.zoom)}onActionCurrentPoint(P=!0){this.getPosition().then(f=>{this.map.setView(new h.LatLng(f.lat,f.lon),this.zoom)})}getPosition(){return new Promise((P,f)=>{navigator.geolocation.getCurrentPosition(i=>{P({lon:i.coords.longitude,lat:i.coords.latitude})},i=>{this.cmsToastrService.typeErrorGetPosition()})})}static#e=this.\u0275fac=function(f){return new(f||q)(t.rXU(e.k))};static#i=this.\u0275cmp=t.VBU({type:q,selectors:[["app-cms-map"]],inputs:{options:"options",optonCenter:"optonCenter",optionCurrentPoint:"optionCurrentPoint"},outputs:{map$:"map$",zoom$:"zoom$"},decls:1,vars:1,consts:[["leaflet","",1,"map-container",3,"leafletMapReady","leafletMapZoomEnd","leafletOptions"]],template:function(f,i){1&f&&(t.j41(0,"div",0),t.bIt("leafletMapReady",function(vt){return i.onMapReady(vt)})("leafletMapZoomEnd",function(vt){return i.onMapZoomEnd(vt)}),t.k0s()),2&f&&t.Y8G("leafletOptions",i.options)},dependencies:[Y.V1],styles:[".map-container[_ngcontent-%COMP%]{width:100%;height:300px}"]})}return q})()}}]);