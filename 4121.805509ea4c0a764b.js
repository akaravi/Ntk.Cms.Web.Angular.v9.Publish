"use strict";(self.webpackChunkntk_cms_web=self.webpackChunkntk_cms_web||[]).push([[4121],{3673:(g,f,i)=>{i.d(f,{G:()=>d});var l=i(8239),t=i(8692),h=i(4511),r=i(4537),p=i(4032),s=i(2607);let d=(()=>{class m{elRef;renderer;publicHelper;cmsToastrService;cdr;document;row;contentService;constructor(e,a,o,_,C,S){this.elRef=e,this.renderer=a,this.publicHelper=o,this.cmsToastrService=_,this.cdr=C,this.document=S,this.DataEnumRecordStatus()}DataEnumRecordStatus(){var e=this;return(0,l.Z)(function*(){(yield e.publicHelper.getEnumRecordStatus()).listItems.forEach(o=>{const _=document.createElement("option");_.innerHTML=" "+o.title+' <i Class="'+e.iconStatus(o.value)+'"></i>',_.value=o.value.toString(),e.elRef.nativeElement.add(_)}),e.elRef.nativeElement.options.length>0&&e.row&&e.row.recordStatus&&e.renderer.setProperty(e.elRef.nativeElement,"value",e.row.recordStatus)})()}onChange(){const e=this.elRef.nativeElement,a=e.value;this.addLoader(e),this.contentService.setAccessDataType(h.dR.Editor),this.contentService.ServiceSetStatus(this.row.id,a).subscribe(o=>{o.isSuccess?(this.handleSuccessCase(e),this.cmsToastrService.typeSuccessSetStatus(o.errorMessage),this.row.recordStatus=0|a,this.cdr.markForCheck()):(this.renderer.setProperty(this.elRef.nativeElement,"value",this.row.recordStatus),this.cmsToastrService.typeErrorSetStatus(o.errorMessage),this.handleErrorCase(e))},o=>{this.renderer.setProperty(this.elRef.nativeElement,"value",this.row.recordStatus),this.cmsToastrService.typeError(o),this.handleErrorCase(e)})}handleSuccessCase(e){this.removeBackground(e),this.addSuccess(e),setTimeout(()=>{this.removeBackground(e)},1e3)}handleErrorCase(e){this.removeBackground(e);const a=this.document.createElement("img");a.style.width="20px",a.src="https://www.seekpng.com/png/detail/334-3345964_error-icon-download-attention-symbol.png";const o=this.renderer.parentNode(this.elRef.nativeElement);this.renderer.appendChild(o,a),setTimeout(()=>{this.renderer.removeChild(o,a)},1e3)}addLoader(e){this.addBackground(e,"https://replit.com/public/images/loading_dots.gif",20)}addSuccess(e){this.addBackground(e,"https://i.pinimg.com/originals/7b/dd/1b/7bdd1bc7db7fd48025d4e39a0e2f0fd8.jpg",20)}addBackground(e,a,o){e.style.background=`#fff url("${a}") no-repeat right 20px center`,e.style.backgroundSize=`${o}px`}removeBackground(e){e.style.background="none"}iconStatus(e){let a="";switch(e){case 1:default:a="fa fa-check";break;case 2:a="fa fa-eye-slash";break;case 3:a="fa fa-times";break;case 4:a="fa fa-hourglass-half";break;case 5:a="far fa-thumbs-down";break;case 6:a="fa fa-archive"}return a}static \u0275fac=function(a){return new(a||m)(r.Y36(r.SBq),r.Y36(r.Qsj),r.Y36(p.i),r.Y36(s.e),r.Y36(r.sBO),r.Y36(t.K0))};static \u0275dir=r.lG2({type:m,selectors:[["","cmsRecordStatusSelfSave",""]],hostBindings:function(a,o){1&a&&r.NdJ("change",function(){return o.onChange()})},inputs:{row:"row",contentService:"contentService"}})}return m})()},5897:(g,f,i)=>{i.d(f,{Y:()=>h});var l=i(4537),t=i(5998);let h=(()=>{class r{sanitizer;constructor(s){this.sanitizer=s}transform(s){return"cms-RecordStatusEnum-cell-"+s}static \u0275fac=function(u){return new(u||r)(l.Y36(t.H7,16))};static \u0275pipe=l.Yjl({name:"statusCellClass",type:r,pure:!0})}return r})()},6639:(g,f,i)=>{i.d(f,{G:()=>h});var l=i(4537),t=i(5998);let h=(()=>{class r{sanitizer;constructor(s){this.sanitizer=s}transform(s,u=!1){let n="";switch(s){case 1:default:n="fa fa-check";break;case 2:n="fa fa-times";break;case 3:n="fa fa-trash";break;case 4:n="fa fa-hourglass-half";break;case 5:n="far fa-thumbs-down";break;case 6:n="fa fa-archive"}return n}static \u0275fac=function(u){return new(u||r)(l.Y36(t.H7,16))};static \u0275pipe=l.Yjl({name:"statusIconClass",type:r,pure:!0})}return r})()},3914:(g,f,i)=>{i.d(f,{s:()=>p});var l=i(4536),t=i(4537);let h=(()=>{class s{dialogRef;data;static nextId=0;id=++s.nextId;title;message;btnOkText;btnCancelText;constructor(n,c){this.dialogRef=n,this.data=c}ngOnInit(){}onDismiss(){this.dialogRef.close(!1)}onConfirm(){this.dialogRef.close(!0)}static \u0275fac=function(c){return new(c||s)(t.Y36(l.so),t.Y36(l.WI))};static \u0275cmp=t.Xpm({type:s,selectors:[["app-confirmation-dialog"]],inputs:{title:"title",message:"message",btnOkText:"btnOkText",btnCancelText:"btnCancelText"},decls:9,vars:4,consts:[["mat-dialog-title",""],["mat-dialog-content",""],[3,"innerHTML"],["mat-dialog-actions",""],["mat-button","",3,"click"],["mat-raised-button","","color","primary",3,"click"]],template:function(c,d){1&c&&(t.TgZ(0,"h1",0),t._uU(1),t.qZA(),t.TgZ(2,"div",1),t._UZ(3,"p",2),t.qZA(),t.TgZ(4,"div",3)(5,"button",4),t.NdJ("click",function(){return d.onDismiss()}),t._uU(6),t.qZA(),t.TgZ(7,"button",5),t.NdJ("click",function(){return d.onConfirm()}),t._uU(8),t.qZA()()),2&c&&(t.xp6(1),t.hij(" ",d.title,"\n"),t.xp6(2),t.Q6J("innerHTML",d.message,t.oJD),t.xp6(3),t.Oqu(d.btnCancelText),t.xp6(2),t.Oqu(d.btnOkText))},encapsulation:2})}return s})();class r{title;message;constructor(u,n){this.title=u,this.message=n}btnOkText="OK";btnCancelText="Cancel";dialogSize="sm"}let p=(()=>{class s{dialog;constructor(n){this.dialog=n}confirm(n,c,d="OK",m="Cancel",v="sm"){const e=new r(n,c);return e.btnOkText=d,e.btnCancelText=m,e.dialogSize=v,this.dialog.open(h,{data:e}).afterClosed().toPromise().then(o=>Promise.resolve(o))}static \u0275fac=function(c){return new(c||s)(t.LFG(l.uw))};static \u0275prov=t.Yz7({token:s,factory:s.\u0275fac})}return s})()}}]);