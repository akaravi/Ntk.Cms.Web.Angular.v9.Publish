"use strict";(self.webpackChunkntk_cms_web=self.webpackChunkntk_cms_web||[]).push([[8953],{8953:(R,f,a)=>{a.d(f,{r:()=>B});var i=a(8296),e=a(7788),c=a(3769),_=a(8189),u=a(5312),g=a(403),M=a(8185),b=a(9722),E=a(6482),C=a(5154),T=a(8339),r=a(2882),p=a(6610),D=a(2221),h=a(6182),m=a(1704),S=a(8267);function A(l,d){if(1&l){const t=e.RV6();e.j41(0,"button",12),e.bIt("click",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.onActionAdd())}),e.EFF(1),e.nI1(2,"translate"),e.k0s()}2&l&&(e.R7$(),e.JRh(e.bMT(2,1,"ACTION.ADD")))}function I(l,d){if(1&l){const t=e.RV6();e.j41(0,"button",13),e.bIt("click",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.onActionEdit())}),e.EFF(1),e.nI1(2,"translate"),e.k0s()}2&l&&(e.R7$(),e.JRh(e.bMT(2,1,"ACTION.EDIT")))}function v(l,d){if(1&l){const t=e.RV6();e.j41(0,"button",14),e.bIt("click",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.onActionDelete())}),e.EFF(1),e.nI1(2,"translate"),e.k0s()}2&l&&(e.R7$(),e.JRh(e.bMT(2,1,"ACTION.DELETE")))}function y(l,d){if(1&l){const t=e.RV6();e.j41(0,"button",15),e.bIt("click",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.onActionButtonReload())}),e.j41(1,"mat-icon",16),e.nI1(2,"translate"),e.EFF(3,"refresh"),e.k0s()()}2&l&&(e.R7$(),e.FS9("title",e.bMT(2,1,"ACTION.RELOAD")))}function k(l,d){if(1&l&&(e.nrm(0,"img",20),e.nI1(1,"cmsthumbnail")),2&l){const t=e.XpG().$implicit;e.FS9("src",e.bMT(1,1,t.linkMainImageIdSrc),e.B4B)}}function O(l,d){if(1&l){const t=e.RV6();e.j41(0,"mat-tree-node",17),e.bIt("click",function(){const n=e.eBV(t).$implicit,s=e.XpG();return e.Njj(s.onActionSelect(n))}),e.nrm(1,"button",18),e.DNE(2,k,2,3,"img",19),e.EFF(3),e.k0s()}if(2&l){const t=d.$implicit,o=d.dataIndex,n=e.XpG();e.AVh("ntk-tree-odd",o%2)("ntk-tree-even",!(o%2))("ntk-tree-selected",n.dataModelSelect.id>0&&n.dataModelSelect.id===t.id),e.R7$(2),e.Y8G("ngIf",t.linkMainImageIdSrc),e.R7$(),e.SpI(" ",t.title," ")}}function G(l,d){if(1&l&&(e.nrm(0,"img",20),e.nI1(1,"cmsthumbnail")),2&l){const t=e.XpG().$implicit;e.FS9("src",e.bMT(1,1,t.linkMainImageIdSrc),e.B4B)}}function P(l,d){if(1&l){const t=e.RV6();e.j41(0,"mat-nested-tree-node")(1,"li")(2,"div",21),e.bIt("click",function(){const n=e.eBV(t).$implicit,s=e.XpG();return e.Njj(s.onActionSelect(n))}),e.j41(3,"button",22),e.bIt("click",function(){const n=e.eBV(t).$implicit,s=e.XpG();return e.Njj(s.onActionSelect(n))}),e.j41(4,"mat-icon",23),e.EFF(5),e.k0s()(),e.DNE(6,G,2,3,"img",19),e.EFF(7),e.k0s(),e.j41(8,"ul"),e.eu8(9,24),e.k0s()()()}if(2&l){const t=d.$implicit,o=e.XpG();e.R7$(2),e.AVh("ntk-tree-selected",o.dataModelSelect.id>0&&o.dataModelSelect.id===t.id),e.R7$(),e.BMQ("aria-label","Toggle "+t.title),e.R7$(2),e.SpI(" ",o.treeControl.isExpanded(t)?"expand_more":"chevron_right"," "),e.R7$(),e.Y8G("ngIf",t.linkMainImageIdSrc),e.R7$(),e.SpI(" ",t.title," "),e.R7$(),e.AVh("category-tree-invisible",!o.treeControl.isExpanded(t))}}let B=(()=>{class l{constructor(t,o,n,s,F,$,j,N){this.cmsToastrService=t,this.coreEnumService=o,this.categoryService=n,this.dialog=s,this.cdr=F,this.publicHelper=$,this.tokenHelper=j,this.translate=N,this.dataModelSelect=new _.fq5,this.dataModelResult=new _.N$V,this.filterModel=new _.O2i,this.treeControl=new i.XO(U=>null),this.dataSource=new c.Zh,this.optionChange=new e.bkB,this.optionReload=()=>this.onActionButtonReload(),this.hasChild=(U,V)=>!1,this.publicHelper.processService.cdr=this.cdr}set optionSelectForce(t){this.onActionSelectForce(t)}ngOnInit(){this.DataGetAll(),this.cmsApiStoreSubscribe=this.tokenHelper.getCurrentTokenOnChange().subscribe(t=>{this.DataGetAll()})}ngOnDestroy(){this.cmsApiStoreSubscribe.unsubscribe()}DataGetAll(){this.filterModel.rowPerPage=200,this.filterModel.accessLoad=!0;const t=this.constructor.name+"main";this.translate.get("MESSAGE.Receiving_information").subscribe(o=>{this.publicHelper.processService.processStart(t,o,this.constructor.name)}),this.categoryService.ServiceGetAll(this.filterModel).subscribe({next:o=>{o.isSuccess?(this.dataModelResult=o,this.dataSource.data=this.dataModelResult.listItems):this.cmsToastrService.typeErrorMessage(o.errorMessage),this.publicHelper.processService.processStop(t)},error:o=>{this.cmsToastrService.typeError(o),this.publicHelper.processService.processStop(t,!1)}})}onActionSelect(t){this.dataModelSelect=t,this.optionChange.emit(this.dataModelSelect)}onActionButtonReload(){this.onActionSelect(null),this.dataModelSelect=new _.fq5,this.DataGetAll()}onActionSelectForce(t){}onActionAdd(){this.dialog.open(g.s,{height:"90%",panelClass:this.tokenHelper.isMobile?"dialog-fullscreen":"dialog-min",enterAnimationDuration:u.c.cmsViewConfig.enterAnimationDuration,exitAnimationDuration:u.c.cmsViewConfig.exitAnimationDuration,data:{}}).afterClosed().subscribe(n=>{n&&n.dialogChangedDate&&this.DataGetAll()})}onActionEdit(){let t=0;this.dataModelSelect&&this.dataModelSelect.id>0&&(t=this.dataModelSelect.id),0!==t?this.dialog.open(M.V,{height:"90%",panelClass:this.tokenHelper.isMobile?"dialog-fullscreen":"dialog-min",enterAnimationDuration:u.c.cmsViewConfig.enterAnimationDuration,exitAnimationDuration:u.c.cmsViewConfig.exitAnimationDuration,data:{id:t}}).afterClosed().subscribe(s=>{s&&s.dialogChangedDate&&this.DataGetAll()}):this.translate.get("ERRORMESSAGE.MESSAGE.typeErrorCategoryNotSelected").subscribe(s=>{this.cmsToastrService.typeErrorSelected(s)})}onActionDelete(){let t=0;this.dataModelSelect&&this.dataModelSelect.id>0&&(t=this.dataModelSelect.id),0!==t||this.translate.get("ERRORMESSAGE.MESSAGE.typeErrorCategoryNotSelected").subscribe(o=>{this.cmsToastrService.typeErrorSelected(o)})}static#e=this.\u0275fac=function(o){return new(o||l)(e.rXU(b.k),e.rXU(_.i9D),e.rXU(_.XBe),e.rXU(E.bZ),e.rXU(e.gRc),e.rXU(C.A),e.rXU(T._),e.rXU(r.c$))};static#t=this.\u0275cmp=e.VBU({type:l,selectors:[["app-core-module-tree"]],inputs:{optionSelectForce:"optionSelectForce",optionReload:"optionReload"},outputs:{optionChange:"optionChange"},decls:14,vars:13,consts:[[3,"optionHeaderDisplay","optionActionMainDisplay","optionFooterDisplay"],["cms-tree-header",""],["cms-tree-action",""],["type","button","class","btn font-13 font-600 btn-s m-1 rounded-s shadow-xl border-0 gradient-teal",3,"click",4,"ngIf"],["type","button","class","btn font-13 font-600 btn-s m-1 rounded-s shadow-xl border-0 gradient-magenta",3,"click",4,"ngIf"],["type","button","class","btn font-13 font-600 btn-s m-1 rounded-s shadow-xl border-0 gradient-red",3,"click",4,"ngIf"],["type","button","class","btn font-13 font-600 btn-s m-1 rounded-s shadow-xl border-0 gradient-highlight",3,"click",4,"ngIf"],["cms-tree-body",""],[1,"category-tree","cursor-pointer",3,"dataSource","treeControl"],["matTreeNodePadding","",3,"ntk-tree-odd","ntk-tree-even","ntk-tree-selected","click",4,"matTreeNodeDef"],[4,"matTreeNodeDef","matTreeNodeDefWhen"],["cms-tree-footer",""],["type","button",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-teal",3,"click"],["type","button",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-magenta",3,"click"],["type","button",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-red",3,"click"],["type","button",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-highlight",3,"click"],[2,"font-size","20px","margin","-6px",3,"title"],["matTreeNodePadding","",3,"click"],["type","button","mat-icon-button","","disabled","",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-highlight"],["style","vertical-align:middle;","class","ntk-hover-zoom","aria-hidden","","height","25","width","25",3,"src",4,"ngIf"],["aria-hidden","","height","25","width","25",1,"ntk-hover-zoom",2,"vertical-align","middle",3,"src"],[1,"mat-tree-node",3,"click"],["type","button","mat-icon-button","","matTreeNodeToggle","",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-highlight",3,"click"],[1,"mat-icon-rtl-mirror"],["matTreeNodeOutlet",""]],template:function(o,n){1&o&&(e.j41(0,"app-cms-html-tree",0),e.qex(1,1),e.EFF(2),e.nI1(3,"translate"),e.bVm(),e.qex(4,2),e.DNE(5,A,3,3,"button",3)(6,I,3,3,"button",4)(7,v,3,3,"button",5)(8,y,4,3,"button",6),e.bVm(),e.qex(9,7),e.j41(10,"mat-tree",8),e.DNE(11,O,4,8,"mat-tree-node",9)(12,P,10,8,"mat-nested-tree-node",10),e.k0s(),e.bVm(),e.eu8(13,11),e.k0s()),2&o&&(e.Y8G("optionHeaderDisplay",!0)("optionActionMainDisplay",!0)("optionFooterDisplay",!1),e.R7$(2),e.SpI(" ",e.bMT(3,11,"TABLE."+(null==n.dataModelResult||null==n.dataModelResult.access?null:n.dataModelResult.access.moduleEntityName))," "),e.R7$(3),e.Y8G("ngIf",null==n.dataModelResult||null==n.dataModelResult.access?null:n.dataModelResult.access.accessAddRow),e.R7$(),e.Y8G("ngIf",(null==n.dataModelResult||null==n.dataModelResult.access?null:n.dataModelResult.access.accessEditRow)&&(null==n.dataModelSelect?null:n.dataModelSelect.id)>0),e.R7$(),e.Y8G("ngIf",(null==n.dataModelResult||null==n.dataModelResult.access?null:n.dataModelResult.access.accessDeleteRow)&&(null==n.dataModelSelect?null:n.dataModelSelect.id)>0),e.R7$(),e.Y8G("ngIf",null==n.dataModelResult||null==n.dataModelResult.access?null:n.dataModelResult.access.accessWatchRow),e.R7$(2),e.Y8G("dataSource",n.dataSource)("treeControl",n.treeControl),e.R7$(2),e.Y8G("matTreeNodeDefWhen",n.hasChild))},dependencies:[p.bT,D.iY,h.An,c.q1,c.yI,c.yF,c.pO,c.lQ,c.d6,c.wx,m.E,r.D9,S.r],encapsulation:2})}return l})()},1704:(R,f,a)=>{a.d(f,{E:()=>T});var i=a(7788),e=a(6610);const c=[[["","cms-tree-body",""]],[["","cms-tree-header",""]],[["","cms-tree-action",""]],[["","cms-tree-footer",""]]],_=["[cms-tree-body]","[cms-tree-header]","[cms-tree-action]","[cms-tree-footer]"];function u(r,p){1&r&&(i.j41(0,"div",8)(1,"p",9),i.SdG(2,1),i.k0s()())}function g(r,p){1&r&&i.nrm(0,"div",10)}function M(r,p){1&r&&(i.j41(0,"div",11),i.SdG(1,2),i.k0s())}function b(r,p){1&r&&i.nrm(0,"div",12)}function E(r,p){1&r&&i.nrm(0,"div",10)}function C(r,p){1&r&&(i.j41(0,"div",6)(1,"p",13),i.SdG(2,3),i.k0s()())}let T=(()=>{class r{static#e=this.nextId=0;constructor(){this.id=++r.nextId,this.optionHeaderDisplay=!0,this.optionActionMainDisplay=!0,this.optionFooterDisplay=!0}ngOnInit(){}static#t=this.\u0275fac=function(h){return new(h||r)};static#n=this.\u0275cmp=i.VBU({type:r,selectors:[["app-cms-html-tree"]],inputs:{optionHeaderDisplay:"optionHeaderDisplay",optionActionMainDisplay:"optionActionMainDisplay",optionFooterDisplay:"optionFooterDisplay"},ngContentSelectors:_,decls:10,vars:6,consts:[[1,"card","card-style"],[1,"row","justify-content-center","tree-parent"],["class","font-14 opacity-50",4,"ngIf"],["class","divider mb-1",4,"ngIf"],["class","col-12 pe-0 tree-child-hidden",4,"ngIf"],["class","divider mb-1 tree-child-hidden",4,"ngIf"],[1,"col-12","pe-0"],["class","col-12 pe-0",4,"ngIf"],[1,"font-14","opacity-50"],[1,"text-center","mb-2","mt-2","color-highlight","font-600"],[1,"divider","mb-1"],[1,"col-12","pe-0","tree-child-hidden"],[1,"divider","mb-1","tree-child-hidden"],[1,"text-center"]],template:function(h,m){1&h&&(i.NAR(c),i.j41(0,"div",0)(1,"div",1),i.DNE(2,u,3,0,"div",2)(3,g,1,0,"div",3)(4,M,2,0,"div",4)(5,b,1,0,"div",5),i.j41(6,"div",6),i.SdG(7),i.k0s(),i.DNE(8,E,1,0,"div",3)(9,C,3,0,"div",7),i.k0s()()),2&h&&(i.R7$(2),i.Y8G("ngIf",m.optionHeaderDisplay),i.R7$(),i.Y8G("ngIf",m.optionHeaderDisplay),i.R7$(),i.Y8G("ngIf",m.optionActionMainDisplay),i.R7$(),i.Y8G("ngIf",m.optionActionMainDisplay),i.R7$(3),i.Y8G("ngIf",m.optionFooterDisplay),i.R7$(),i.Y8G("ngIf",m.optionFooterDisplay))},dependencies:[e.bT],encapsulation:2})}return r})()}}]);