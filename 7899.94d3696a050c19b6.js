"use strict";(self.webpackChunkntk_cms_web=self.webpackChunkntk_cms_web||[]).push([[7899],{7899:(P,g,s)=>{s.r(g),s.d(g,{CoreMainActionModule:()=>Q});var f=s(8692),l=s(92),_=s(8659),h=s(3331),M=s(707),T=s(4079),Z=s(8908),r=s(4511),b=s(3914),x=s(6087),u=s(6114),t=s(4537);let S=(()=>{class o{constructor(){}ngOnInit(){}static \u0275fac=function(i){return new(i||o)};static \u0275cmp=t.Xpm({type:o,selectors:[["app-core-main-action"]],decls:1,vars:0,template:function(i,e){1&i&&t._UZ(0,"router-outlet")},dependencies:[u.lC],encapsulation:2})}return o})();var v=s(8239),C=s(656),N=s(2607),y=s(4032),A=s(6707),d=s(7914),I=s(9665),L=s(5738);const E=["vform"],w=["Message"];function O(o,p){if(1&o){const n=t.EpF();t.TgZ(0,"textarea",30),t.NdJ("ngModelChange",function(e){t.CHM(n);const a=t.oxw();return t.KtG(a.dataMessageContentModel.messageBody=e)}),t._uU(1,"                  "),t.qZA()}if(2&o){const n=t.oxw();t.Q6J("ngModel",n.dataMessageContentModel.messageBody)}}function U(o,p){if(1&o){const n=t.EpF();t.TgZ(0,"button",31),t.NdJ("click",function(){t.CHM(n);const e=t.oxw();return t.KtG(e.onActionMessageContentAdd())}),t._UZ(1,"i",32),t._uU(2),t.ALo(3,"translate"),t.qZA()}2&o&&(t.xp6(2),t.hij(" ",t.lcZ(3,1,"TITLE.Added_to_the_text")," "))}function J(o,p){if(1&o){const n=t.EpF();t.TgZ(0,"button",31),t.NdJ("click",function(){t.CHM(n);const e=t.oxw();return t.KtG(e.onActionMessageContentNew())}),t._UZ(1,"i",32),t._uU(2),t.ALo(3,"translate"),t.qZA()}2&o&&(t.xp6(2),t.hij(" ",t.lcZ(3,1,"TITLE.Message_Text")," "))}function k(o,p){1&o&&(t.TgZ(0,"mat-error"),t._uU(1),t.ALo(2,"translate"),t.TgZ(3,"strong"),t._uU(4),t.ALo(5,"translate"),t.qZA()()),2&o&&(t.xp6(1),t.hij(" ",t.lcZ(2,2,"TITLE.Message_Text")," "),t.xp6(3),t.Oqu(t.lcZ(5,4,"content.required")))}function q(o,p){if(1&o){const n=t.EpF();t.TgZ(0,"button",35),t.NdJ("click",function(){t.CHM(n);const e=t.oxw(2);return t.KtG(e.onFormSubmit())}),t._UZ(1,"i",36),t._uU(2),t.ALo(3,"translate"),t.qZA()}if(2&o){t.oxw(2);const n=t.MAs(12);t.Q6J("disabled",!n.valid),t.xp6(2),t.hij(" ",t.lcZ(3,2,"ACTION.Send_Message")," ")}}function F(o,p){if(1&o&&(t.TgZ(0,"div",33),t._UZ(1,"app-progress-spinner",0),t.YNc(2,q,4,4,"button",34),t.qZA()),2&o){const n=t.oxw();t.xp6(1),t.Q6J("options",n.loadingAction),t.xp6(1),t.Q6J("ngIf",!n.loading.display)}}let m=(()=>{class o{coreEnumService;coreTokenNotificationService;activatedRoute;cmsToastrService;cdr;publicHelper;translate;router;constructor(n,i,e,a,c,G,Y,R){this.coreEnumService=n,this.coreTokenNotificationService=i,this.activatedRoute=e,this.cmsToastrService=a,this.cdr=c,this.publicHelper=G,this.translate=Y,this.router=R,this.loading.cdr=this.cdr,this.loading.message=this.translate.instant("MESSAGE.Receiving_information"),this.loadingAction.cdr=this.cdr}formGroup;message;loading=new C.O;loadingAction=new C.O;dataModelParentSelected=new r.lWT;dataModel=new r.OM3;dataModelResult=new r.y$4;formInfo=new r.LEF;clipboardText="";isCronDisabled=!1;cronOptions={formInputClass:"form-control cron-editor-input",formSelectClass:"form-control cron-editor-select",formRadioClass:"cron-editor-radio",formCheckboxClass:"cron-editor-checkbox",defaultTime:"10:00:00",use24HourTime:!0,hideMinutesTab:!1,hideHourlyTab:!1,hideDailyTab:!1,hideWeeklyTab:!1,hideMonthlyTab:!1,hideYearlyTab:!1,hideAdvancedTab:!1,hideSeconds:!0,removeSeconds:!0,removeYears:!0};ngOnInit(){}readClipboardFromDevTools(){return new Promise((n,i)=>{const e=function(){var a=(0,v.Z)(function*(){try{const c=yield navigator.clipboard.readText();n(c)}catch(c){i(c)}window.removeEventListener("focus",e)});return function(){return a.apply(this,arguments)}}();window.addEventListener("focus",e),console.log("Hit <Tab> to give focus back to document (or we will face a DOMException);")})}onActionMessageLTR(){this.message.nativeElement.style.direction="ltr",this.message.nativeElement.style.textAlign="left"}onActionMessageRTL(){this.message.nativeElement.style.direction="rtl",this.message.nativeElement.style.textAlign="right"}dataMessageCategoryModel=new r._fd;onActionSelectMessageCategory(n){this.dataMessageCategoryModel=n&&n.id.length>0?n:new r._fd}dataMessageContentModel=new r.Lnx;onActionSelectMessageContent(n){this.dataMessageContentModel=n&&n.id.length>0?n:new r.Lnx}onActionMessageContentAdd(){this.dataMessageContentModel?.messageBody?.length>0?this.dataModel.content.length>0&&(this.dataModel.content=this.dataModel.content+" "+this.dataMessageContentModel.messageBody):this.dataModel.content=this.dataMessageContentModel.messageBody}onActionMessageContentNew(){this.dataMessageContentModel?.messageBody?.length>0&&(this.dataModel.content=this.dataMessageContentModel.messageBody)}onFormSubmit(){if(!this.formGroup.valid)return;this.formInfo.formSubmitAllow=!1;const n=this.constructor.name+"main";this.loadingAction.Start(n),this.formInfo.formAlert="",this.formInfo.formError="",this.coreTokenNotificationService.ServiceSendNotification(this.dataModel).subscribe({next:i=>{this.formInfo.formSubmitAllow=!0,this.dataModelResult=i,i.isSuccess?(this.formInfo.formAlert=this.translate.instant("MESSAGE.Submit_request_was_successfully_registered"),this.cmsToastrService.typeSuccessMessage(this.translate.instant("MESSAGE.Send_request_was_successfully_registered"))):(this.formInfo.formAlert=this.translate.instant("ERRORMESSAGE.MESSAGE.typeError"),this.formInfo.formError=i.errorMessage,this.cmsToastrService.typeErrorMessage(i.errorMessage)),this.loadingAction.Stop(n)},error:i=>{this.formInfo.formSubmitAllow=!0,this.cmsToastrService.typeError(i),this.loadingAction.Stop(n)},complete:()=>{}})}step=0;setStep(n){this.step=n}nextStep(){this.step++}prevStep(){this.step--}static \u0275fac=function(i){return new(i||o)(t.Y36(r.FLW),t.Y36(r.Ozq),t.Y36(u.gz),t.Y36(N.e),t.Y36(t.sBO),t.Y36(y.i),t.Y36(A.sK),t.Y36(u.F0))};static \u0275cmp=t.Xpm({type:o,selectors:[["app-core-main-action-send-notification"]],viewQuery:function(i,e){if(1&i&&(t.Gf(E,5),t.Gf(w,5)),2&i){let a;t.iGM(a=t.CRH())&&(e.formGroup=a.first),t.iGM(a=t.CRH())&&(e.message=a.first)}},decls:144,vars:91,consts:[[3,"options"],[1,"card","card-style"],[1,"content","mb-0"],[1,"mb-0","color-highlight","font-600","font-12"],[3,"ngSubmit"],["vform","ngForm"],[1,"ntk-cms-html-card-body"],[1,"row"],[1,"col-6"],[1,"example-headers-align"],["hideToggle","",3,"expanded","opened"],["type","button",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-blue",3,"click"],["matInput","","name","dataMessageContentModel.messageBody","type","text","rows","10","id","dataMessageContentModel.messageBody",3,"ngModel","ngModelChange",4,"ngIf"],["type","button","class","btn font-13 font-600 btn-s m-1 rounded-s shadow-xl border-0 gradient-gray",3,"click",4,"ngIf"],["type","button",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-teal",3,"click"],[1,"d-flex","mb-3"],[1,"pt-1"],["data-trigger-switch","dataModel.sendToAll",1,"font-600","font-14"],[1,"ms-auto","me-3","pe-2"],[1,"custom-control","ios-switch","small-switch"],["type","checkbox","id","dataModel.sendToAll","name","dataModel.sendToAll",1,"ios-input",3,"ngModel","ngModelChange"],["for","dataModel.sendToAll",1,"custom-control-label"],[1,"message-box"],[1,"row",2,"height","300px"],[1,"input-style","has-borders","no-icon","input-style-always-active","validate-field","mb-4"],["for","dataModel.content",1,"color-highlight"],["matInput","","name","dataModel.content","type","text","placeholder","...","minlength","1","maxlength","500","rows","9","id","dataModel.content",1,"form-control","validate-name",3,"ngModel","ngModelChange"],["content",""],[4,"ngIf"],["class","row","style","height:140px;bottom: 4vh;justify-content: center;",4,"ngIf"],["matInput","","name","dataMessageContentModel.messageBody","type","text","rows","10","id","dataMessageContentModel.messageBody",3,"ngModel","ngModelChange"],["type","button",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-gray",3,"click"],[1,"ft-x"],[1,"row",2,"height","140px","bottom","4vh","justify-content","center"],["type","submit","class","message-box-button","class","btn font-13 font-600 btn-s m-1 rounded-s shadow-xl border-0 gradient-highlight",3,"disabled","click",4,"ngIf"],["type","submit",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-highlight",3,"disabled","click"],[1,"fa","fa-check-square-o"]],template:function(i,e){if(1&i&&(t._UZ(0,"app-progress-spinner",0),t.TgZ(1,"div",1)(2,"div",2)(3,"p",3),t._uU(4," \u062d\u0633\u0627\u0628 \u06a9\u0627\u0631\u0628\u0631\u06cc \u062e\u0648\u062f \u0631\u0627 \u0648\u06cc\u0631\u0627\u06cc\u0634 \u06a9\u0646\u06cc\u062f "),t.qZA(),t.TgZ(5,"h4"),t._uU(6,"\u0627\u0637\u0644\u0627\u0639\u0627\u062a"),t.qZA(),t.TgZ(7,"h4"),t._uU(8,"\u0627\u0637\u0644\u0627\u0639\u0627\u062a \u0627\u0648\u0644\u06cc\u0647"),t.qZA(),t.TgZ(9,"p"),t._uU(10," \u0627\u0637\u0644\u0627\u0639\u0627\u062a \u0639\u0645\u0648\u0645\u06cc \u06a9\u0647 \u062f\u0631 \u0628\u0627\u0644\u0627\u06cc \u06a9\u0627\u0631\u062a \u0634\u0645\u0627 \u062f\u0631 \u0635\u0641\u062d\u0647 \u0646\u0645\u0627\u06cc\u0647 \u0634\u0645\u0627 \u0646\u0634\u0627\u0646 \u062f\u0627\u062f\u0647 \u0645\u06cc \u0634\u0648\u062f. \u0627\u06cc\u0646 \u0641\u0642\u0637 \u06cc\u06a9 \u0635\u0641\u062d\u0647 \u0633\u0627\u062e\u062a\u06af\u06cc \u0627\u0633\u062a. "),t.qZA(),t.TgZ(11,"form",4,5),t.NdJ("ngSubmit",function(){return e.onFormSubmit()}),t._uU(13),t.TgZ(14,"div",6)(15,"div",7)(16,"div",8)(17,"mat-accordion",9)(18,"mat-expansion-panel",10),t.NdJ("opened",function(){return e.setStep(0)}),t.TgZ(19,"mat-expansion-panel-header")(20,"mat-panel-title"),t._uU(21),t.ALo(22,"translate"),t.qZA(),t.TgZ(23,"mat-panel-description"),t._uU(24),t.ALo(25,"translate"),t.TgZ(26,"mat-icon"),t._uU(27,"account_circle"),t.qZA()()(),t.TgZ(28,"mat-action-row")(29,"button",11),t.NdJ("click",function(){return e.nextStep()}),t._uU(30),t.ALo(31,"translate"),t.qZA()()(),t.TgZ(32,"mat-expansion-panel",10),t.NdJ("opened",function(){return e.setStep(1)}),t.TgZ(33,"mat-expansion-panel-header")(34,"mat-panel-title"),t._uU(35),t.ALo(36,"translate"),t.qZA(),t.TgZ(37,"mat-panel-description"),t._uU(38),t.ALo(39,"translate"),t.TgZ(40,"mat-icon"),t._uU(41,"map"),t.qZA()()(),t.YNc(42,O,2,1,"textarea",12),t.YNc(43,U,4,3,"button",13),t.YNc(44,J,4,3,"button",13),t.TgZ(45,"mat-action-row")(46,"button",14),t.NdJ("click",function(){return e.prevStep()}),t._uU(47),t.ALo(48,"translate"),t.qZA(),t.TgZ(49,"button",11),t.NdJ("click",function(){return e.nextStep()}),t._uU(50),t.ALo(51,"translate"),t.qZA()()(),t.TgZ(52,"mat-expansion-panel",10),t.NdJ("opened",function(){return e.setStep(2)}),t.TgZ(53,"mat-expansion-panel-header")(54,"mat-panel-title"),t._uU(55),t.ALo(56,"translate"),t.qZA(),t.TgZ(57,"mat-panel-description"),t._uU(58),t.ALo(59,"translate"),t.TgZ(60,"mat-icon"),t._uU(61,"date_range"),t.qZA()()(),t.TgZ(62,"mat-action-row")(63,"button",14),t.NdJ("click",function(){return e.prevStep()}),t._uU(64),t.ALo(65,"translate"),t.qZA(),t.TgZ(66,"button",11),t.NdJ("click",function(){return e.nextStep()}),t._uU(67),t.ALo(68,"translate"),t.qZA()()(),t.TgZ(69,"mat-expansion-panel",10),t.NdJ("opened",function(){return e.setStep(3)}),t.TgZ(70,"mat-expansion-panel-header")(71,"mat-panel-title"),t._uU(72),t.ALo(73,"translate"),t.qZA(),t.TgZ(74,"mat-panel-description"),t._uU(75),t.ALo(76,"translate"),t.TgZ(77,"mat-icon"),t._uU(78,"date_range"),t.qZA()()(),t._UZ(79,"div",7)(80,"hr"),t.TgZ(81,"mat-action-row")(82,"button",14),t.NdJ("click",function(){return e.prevStep()}),t._uU(83),t.ALo(84,"translate"),t.qZA(),t.TgZ(85,"button",11),t.NdJ("click",function(){return e.nextStep()}),t._uU(86),t.ALo(87,"translate"),t.qZA()()(),t.TgZ(88,"mat-expansion-panel",10),t.NdJ("opened",function(){return e.setStep(4)}),t.TgZ(89,"mat-expansion-panel-header")(90,"mat-panel-title"),t._uU(91),t.ALo(92,"translate"),t.qZA(),t.TgZ(93,"mat-panel-description"),t._uU(94),t.ALo(95,"translate"),t.TgZ(96,"mat-icon"),t._uU(97,"date_range"),t.qZA()()(),t.TgZ(98,"mat-action-row")(99,"button",14),t.NdJ("click",function(){return e.prevStep()}),t._uU(100),t.ALo(101,"translate"),t.qZA(),t.TgZ(102,"button",11),t.NdJ("click",function(){return e.nextStep()}),t._uU(103),t.ALo(104,"translate"),t.qZA()()(),t.TgZ(105,"mat-expansion-panel",10),t.NdJ("opened",function(){return e.setStep(5)}),t.TgZ(106,"mat-expansion-panel-header")(107,"mat-panel-title"),t._uU(108),t.ALo(109,"translate"),t.qZA(),t.TgZ(110,"mat-panel-description"),t._uU(111),t.ALo(112,"translate"),t.TgZ(113,"mat-icon"),t._uU(114,"date_range"),t.qZA()()(),t.TgZ(115,"div",15)(116,"div",16)(117,"h5",17),t._uU(118),t.ALo(119,"translate"),t.qZA()(),t.TgZ(120,"div",18)(121,"div",19)(122,"input",20),t.NdJ("ngModelChange",function(c){return e.dataModel.sendToAll=c}),t.qZA(),t._UZ(123,"label",21),t.qZA()()(),t.TgZ(124,"mat-action-row")(125,"button",14),t.NdJ("click",function(){return e.prevStep()}),t._uU(126),t.ALo(127,"translate"),t.qZA(),t.TgZ(128,"button",11),t.NdJ("click",function(){return e.nextStep()}),t._uU(129),t.ALo(130,"translate"),t.qZA()()()()(),t.TgZ(131,"div",8)(132,"div",22)(133,"div",23)(134,"div",24)(135,"label",25),t._uU(136),t.ALo(137,"translate"),t.qZA(),t.TgZ(138,"textarea",26,27),t.NdJ("ngModelChange",function(c){return e.dataModel.content=c}),t.qZA(),t.TgZ(140,"em"),t._uU(141),t.qZA(),t.YNc(142,k,6,6,"mat-error",28),t.qZA()(),t.YNc(143,F,3,2,"div",29),t.qZA()()()()()()()),2&i){const a=t.MAs(139);t.Q6J("options",e.loading),t.xp6(13),t.hij(" ",e.formInfo.formTitle," "),t.xp6(5),t.Q6J("expanded",0===e.step),t.xp6(3),t.hij(" ",t.lcZ(22,41,"TITLE.Direction")," "),t.xp6(3),t.hij(" ",t.lcZ(25,43,"TITLE.Select_the_path_to_send_the_message")," "),t.xp6(6),t.Oqu(t.lcZ(31,45,"ACTION.NEXT")),t.xp6(2),t.Q6J("expanded",1===e.step),t.xp6(3),t.hij(" ",t.lcZ(36,47,"TITLE.Message_Text")," "),t.xp6(3),t.hij(" ",t.lcZ(39,49,"TITLE.Select_the_text_of_the_default_messages")," "),t.xp6(4),t.Q6J("ngIf",(null==e.dataMessageContentModel||null==e.dataMessageContentModel.messageBody?null:e.dataMessageContentModel.messageBody.length)>0),t.xp6(1),t.Q6J("ngIf",(null==e.dataMessageContentModel||null==e.dataMessageContentModel.messageBody?null:e.dataMessageContentModel.messageBody.length)>0&&(null==e.dataModel.content?null:e.dataModel.content.length)>0),t.xp6(1),t.Q6J("ngIf",(null==e.dataMessageContentModel||null==e.dataMessageContentModel.messageBody?null:e.dataMessageContentModel.messageBody.length)>0),t.xp6(3),t.Oqu(t.lcZ(48,51,"ACTION.BACK")),t.xp6(3),t.Oqu(t.lcZ(51,53,"ACTION.NEXT")),t.xp6(2),t.Q6J("expanded",2===e.step),t.xp6(3),t.hij(" ",t.lcZ(56,55,"TITLE.Phonebook")," "),t.xp6(3),t.hij(" ",t.lcZ(59,57,"TITLE.Audience_selection")," "),t.xp6(6),t.Oqu(t.lcZ(65,59,"ACTION.BACK")),t.xp6(3),t.Oqu(t.lcZ(68,61,"ACTION.NEXT")),t.xp6(2),t.Q6J("expanded",3===e.step),t.xp6(3),t.hij(" ",t.lcZ(73,63,"TITLE.Shipping_time")," "),t.xp6(3),t.hij(" ",t.lcZ(76,65,"TITLE.Time_to_start_sending_and_finish")," "),t.xp6(8),t.Oqu(t.lcZ(84,67,"ACTION.BACK")),t.xp6(3),t.Oqu(t.lcZ(87,69,"ACTION.NEXT")),t.xp6(2),t.Q6J("expanded",4===e.step),t.xp6(3),t.hij(" ",t.lcZ(92,71,"TITLE.Timing")," "),t.xp6(3),t.hij(" ",t.lcZ(95,73,"TITLE.Retry_schedule")," "),t.xp6(6),t.Oqu(t.lcZ(101,75,"ACTION.BACK")),t.xp6(3),t.Oqu(t.lcZ(104,77,"ACTION.NEXT")),t.xp6(2),t.Q6J("expanded",5===e.step),t.xp6(3),t.hij(" ",t.lcZ(109,79,"TITLE.Settings")," "),t.xp6(3),t.hij(" ",t.lcZ(112,81,"TITLE.Send_settings")," "),t.xp6(7),t.hij(" ",t.lcZ(119,83,"TITLE.Send_To_All"),""),t.xp6(4),t.Q6J("ngModel",e.dataModel.sendToAll),t.xp6(4),t.Oqu(t.lcZ(127,85,"ACTION.BACK")),t.xp6(3),t.Oqu(t.lcZ(130,87,"ACTION.END")),t.xp6(7),t.Oqu(t.lcZ(137,89,"TITLE.Message_Text")),t.xp6(2),t.Q6J("ngModel",e.dataModel.content),t.xp6(3),t.hij("",a.value.length," / 500"),t.xp6(1),t.Q6J("ngIf",null==a.errors?null:a.errors.required),t.xp6(1),t.Q6J("ngIf",e.formInfo.formSubmitAllow&&!(null!=e.loading&&e.loading.display))}},dependencies:[f.O5,l._Y,l.Fj,l.Wl,l.JJ,l.JL,l.wO,l.nD,l.On,l.F,d.pp,d.ib,d.VG,d.yz,d.yK,d.u4,_.TO,h.Hw,I.Nt,L.O,A.X$],styles:[".form-body[_ngcontent-%COMP%]{width:500px}@media (max-width: 700px){.form-body[_ngcontent-%COMP%]{display:contents}}#file-manager[_ngcontent-%COMP%]{width:calc(100vw - 16px);height:calc(100vh - 16px)}.recordStatus-1.mat-select-panel[_ngcontent-%COMP%]{background:yellow}.recordStatus-2.mat-select-panel[_ngcontent-%COMP%]{background:black}.recordStatus-3.mat-select-panel[_ngcontent-%COMP%]{background:red}.mat-tab-group[_ngcontent-%COMP%]{height:95%}.message-box[_ngcontent-%COMP%]{background-image:url(/assets/media/bg/iphone.png);height:600px;width:300px;background-position:center;background-repeat:no-repeat;background-size:cover;padding-right:33px;padding-left:33px}.message-box-button[_ngcontent-%COMP%]{color:#00f;border-color:transparent;background-color:transparent}.message-box-button[_ngcontent-%COMP%]:hover{color:red;font-size:initial}.message-box-button[_ngcontent-%COMP%]:active{color:#a200ff}"]})}return o})();const B=[{path:"",component:S,children:[{path:"send-notification",component:m},{path:"send-notification/inbox-extras",component:m},{path:"send-notification/outbox-extras",component:m}]}];let j=(()=>{class o{static \u0275fac=function(i){return new(i||o)};static \u0275mod=t.oAB({type:o});static \u0275inj=t.cJS({imports:[u.Bz.forChild(B),u.Bz]})}return o})(),Q=(()=>{class o{static \u0275fac=function(i){return new(i||o)};static \u0275mod=t.oAB({type:o});static \u0275inj=t.cJS({providers:[r.EAm,r.FLW,r.Z8z,b.s,r.Ozq],imports:[f.ez,j,l.u5,l.UX.withConfig({warnOnNgModelWithFormControl:"never"}),x.m.forRoot(),T.rK,Z.g$,h.Ps,_.lN,M.T5]})}return o})()}}]);