import{a as Fe,b as wt}from"./chunk-BUVYCQFU.js";import{d as Oe,g as It}from"./chunk-Z7UVLV46.js";import{a as vt}from"./chunk-NPPX2JZQ.js";import{a as yt}from"./chunk-F5EN44AO.js";import{a as Mt}from"./chunk-BRMVS3UD.js";import{b as bt}from"./chunk-FZRIMTB7.js";import{a as ee}from"./chunk-UO2EWDRH.js";import{$b as ct,Ab as L,Bd as ht,Cb as z,Id as gt,Jc as ut,K as fe,L as Se,N as Ke,O as $e,Oa as he,Od as _t,Pa as ge,Qa as tt,Wa as it,Za as K,Zc as Ct,_c as ft,ac as dt,bc as be,cc as mt,dc as ve,ec as Ie,jd as Ne,lc as we,mc as Ee,nc as Te,oc as Ae,p as me,pa as W,pc as Re,pd as St,qa as J,qc as ke,rc as xe,s as U,sc as De,t as pe,tc as Ve,ub as Z,uc as Le,v as ue,va as et,vb as V,vc as pt,x as Y,y as Ce,zb as lt}from"./chunk-JW2D2QPI.js";import{a as X}from"./chunk-APBBKJ6G.js";import{Bd as G,Db as se,Dc as Ue,Eb as le,Fb as ce,Fd as rt,Ib as x,Kb as p,Kd as at,La as a,Lb as F,Lc as Ye,Ld as _e,Ma as S,Mb as g,Od as P,Pd as $,Qb as T,Qd as Me,Rb as A,Sb as R,Vb as de,Vd as ye,Wb as ze,Yb as M,Za as Q,Zb as y,Zd as st,ab as b,cb as m,da as ne,de as D,df as k,eb as ae,fd as Xe,gc as j,hd as Ze,ja as H,ka as re,kd as Pe,lb as l,mb as c,nb as v,nd as ot,ob as w,pb as E,qb as Je,ra as u,rb as I,sa as C,ub as _,wb as h,xc as Qe,zc as q,zd as nt}from"./chunk-XKQYEJGP.js";var Gt=["vform"];function Pt(o,n){if(o&1){let r=I();l(0,"app-cms-enum-record-status-selector",12),R("modelChange",function(i){u(r);let t=h();return A(t.dataModel.recordStatus,i)||(t.dataModel.recordStatus=i),C(i)}),c()}if(o&2){let r=h();T("model",r.dataModel.recordStatus),m("optionDisabled",!1)("optionLabel",r.fieldsInfo.recordStatus==null?null:r.fieldsInfo.recordStatus.fieldTitle)("optionRequired",!0)("optionSelectFirstItem",!0)}}function Bt(o,n){if(o&1){let r=I();l(0,"div",13)(1,"label",14),p(2),c(),l(3,"textarea",15,1),R("ngModelChange",function(i){u(r);let t=h();return A(t.dataModel.configValuesJson,i)||(t.dataModel.configValuesJson=i),C(i)}),p(5,"                "),c(),l(6,"em"),p(7),c()()}if(o&2){let r=x(4),e=h();a(2),F(e.fieldsInfo.configValuesJson==null?null:e.fieldsInfo.configValuesJson.fieldTitle),a(),T("ngModel",e.dataModel.configValuesJson),m("disabled",!(e.fieldsInfo.configValuesJson!=null&&e.fieldsInfo.configValuesJson.accessAddField)),a(4),g("",r.value.length," / 10000")}}function Ht(o,n){if(o&1){let r=I();l(0,"div",16)(1,"button",17),_("click",function(){u(r);let i=h();return C(i.onFormCancel())}),v(2,"i",18),p(3),M(4,"translate"),c(),l(5,"button",19),v(6,"i",20),p(7),M(8,"translate"),c()()}if(o&2){h();let r=x(9);a(3),g(" ",y(4,3,"ACTION.CANCEL")," "),a(2),m("disabled",!r.form.valid),a(2),g(" ",y(8,5,"ACTION.SAVE")," ")}}var Rt=(()=>{let n=class n extends Mt{constructor(e,i,t,s,f,d,N,B){super(s,new k,d,B),this.data=e,this.dialogRef=i,this.coreEnumService=t,this.coreSiteCategoryCmsModuleService=s,this.cmsToastrService=f,this.publicHelper=d,this.cdr=N,this.translate=B,this.requestLinkCmsModuleId=0,this.requestLinkCmsSiteCategoryId=0,this.fieldsInfo=new Map,this.dataModelResult=new _e,this.dataModel=new k,this.formInfo=new Me,this.fileManagerOpenForm=!1,this.publicHelper.processService.cdr=this.cdr,e&&(this.requestLinkCmsSiteCategoryId=+e.linkCmsSiteCategoryId||0,this.requestLinkCmsModuleId=+e.linkCmsModuleId||0),this.requestLinkCmsSiteCategoryId>0&&(this.dataModel.linkCmsSiteCategoryId=this.requestLinkCmsSiteCategoryId),this.requestLinkCmsModuleId>0&&(this.dataModel.linkCmsModuleId=this.requestLinkCmsModuleId)}ngOnInit(){this.DataGetAccess()}DataAddContent(){this.translate.get("MESSAGE.sending_information_to_the_server").subscribe(i=>{this.formInfo.formAlert=i}),this.formInfo.formError="";let e=this.constructor.name+"main";this.translate.get("MESSAGE.Receiving_information").subscribe(i=>{this.publicHelper.processService.processStart(e,i,this.constructor.name)}),this.coreSiteCategoryCmsModuleService.ServiceAdd(this.dataModel).subscribe({next:i=>{this.formInfo.formSubmitAllow=!0,this.dataModelResult=i,i.isSuccess?(this.translate.get("MESSAGE.registration_completed_successfully").subscribe(t=>{this.formInfo.formAlert=t}),this.cmsToastrService.typeSuccessAdd(),this.dialogRef.close({dialogChangedDate:!0})):(this.translate.get("ERRORMESSAGE.MESSAGE.typeError").subscribe(t=>{this.formInfo.formAlert=t}),this.formInfo.formError=i.errorMessage,this.cmsToastrService.typeErrorMessage(i.errorMessage)),this.publicHelper.processService.processStop(e)},error:i=>{this.formInfo.formSubmitAllow=!0,this.cmsToastrService.typeError(i),this.publicHelper.processService.processStop(e,!1)}})}onFormSubmit(){this.formGroup.valid&&(this.formInfo.formSubmitAllow=!1,this.DataAddContent())}onActionSiteCategorySelect(e){this.dataModel.linkCmsSiteCategoryId=null,e&&e.id>0&&(this.dataModel.linkCmsSiteCategoryId=e.id)}onActionSelectorModuleSelect(e){this.dataModel.linkCmsModuleId=null,e&&e.id>0&&(this.dataModel.linkCmsModuleId=e.id)}onFormCancel(){this.dialogRef.close({dialogChangedDate:!1})}};n.\u0275fac=function(i){return new(i||n)(S(ge),S(he),S(ye),S(D),S(V),S(L),S(j),S(W))},n.\u0275cmp=H({type:n,selectors:[["app-core-sitecategorycmsmodule-add"]],viewQuery:function(i,t){if(i&1&&se(Gt,5),i&2){let s;le(s=ce())&&(t.formGroup=s.first)}},features:[Q],decls:17,vars:19,consts:[["vform","ngForm"],["ConfigValuesJson",""],[1,"card","card-style","progressOverlayContainer"],[3,"optionsInfoAreaId"],[1,"content","mb-0"],[1,"mb-0","color-highlight","font-600","font-12"],[3,"ngSubmit"],[3,"model","optionDisabled","optionLabel","optionRequired","optionSelectFirstItem","modelChange",4,"ngIf"],[3,"optionChange","optionDisabled","optionSelectForce","optionPlaceholder"],[3,"optionChange","optionDisabled","optionSelectFirstItem","optionSelectForce","optionPlaceholder"],["class","input-style has-borders no-icon input-style-always-active validate-field mb-4",4,"ngIf"],["class","form-actions",4,"ngIf"],[3,"modelChange","model","optionDisabled","optionLabel","optionRequired","optionSelectFirstItem"],[1,"input-style","has-borders","no-icon","input-style-always-active","validate-field","mb-4"],["for","dataModel.configValuesJson",1,"color-highlight"],["matInput","","name","dataModel.configValuesJson","type","text","placeholder","ConfigValuesJson","minlength","0","maxlength","10000","rows","6","id","dataModel.configValuesJson",1,"form-control","validate-name",3,"ngModelChange","ngModel","disabled"],[1,"form-actions"],["type","button",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-gray",3,"click"],[1,"ft-x"],["type","submit",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-green",3,"disabled"],[1,"fa","fa-check-square-o"]],template:function(i,t){if(i&1){let s=I();l(0,"div",2),v(1,"app-progress-spinner",3),l(2,"div",4)(3,"p",5),p(4),c(),l(5,"p"),p(6),M(7,"translate"),c(),l(8,"form",6,0),_("ngSubmit",function(){return u(s),C(t.onFormSubmit())}),b(10,Pt,1,5,"app-cms-enum-record-status-selector",7),l(11,"app-core-sitecategory-selector",8),M(12,"translate"),_("optionChange",function(d){return u(s),C(t.onActionSiteCategorySelect(d))}),c(),l(13,"app-core-module-selector",9),M(14,"translate"),_("optionChange",function(d){return u(s),C(t.onActionSelectorModuleSelect(d))}),c(),b(15,Bt,8,4,"div",10)(16,Ht,9,7,"div",11),c()()()}i&2&&(a(),m("optionsInfoAreaId",t.constructor.name),a(3),g(" ",t.formInfo.formTitle," "),a(2),g(" ",y(7,13,"TITLE.Be_Careful_When_Entering_Information")," "),a(4),m("ngIf",t.fieldsInfo.recordStatus==null?null:t.fieldsInfo.recordStatus.accessWatchField),a(),m("optionDisabled",!1)("optionSelectForce",t.dataModel.linkCmsSiteCategoryId)("optionPlaceholder",y(12,15,"TITLE.SITE_CATEGORY")),a(2),m("optionDisabled",!1)("optionSelectFirstItem",!0)("optionSelectForce",t.dataModel.linkCmsModuleId)("optionPlaceholder",y(14,17,"TITLE.MODULE")),a(2),m("ngIf",t.fieldsInfo.configValuesJson==null?null:t.fieldsInfo.configValuesJson.accessWatchField),a(),m("ngIf",t.formInfo.formSubmitAllow))},dependencies:[q,Ce,me,U,pe,fe,Se,Y,ue,K,Ne,z,Oe,Fe,J],styles:[".form-body[_ngcontent-%COMP%]{width:500px}@media (max-width: 700px){.form-body[_ngcontent-%COMP%]{display:contents}}#file-manager[_ngcontent-%COMP%]{width:calc(100vw - 16px);height:calc(100vh - 16px)}.recordStatus-1.mat-select-panel[_ngcontent-%COMP%]{background:#ff0}.recordStatus-2.mat-select-panel[_ngcontent-%COMP%]{background:#000}.recordStatus-3.mat-select-panel[_ngcontent-%COMP%]{background:red}"]});let o=n;return o})();var jt=["vform"];function qt(o,n){if(o&1){let r=I();l(0,"app-cms-enum-record-status-selector",11),R("modelChange",function(i){u(r);let t=h();return A(t.dataModel.recordStatus,i)||(t.dataModel.recordStatus=i),C(i)}),c()}if(o&2){let r=h();T("model",r.dataModel.recordStatus),m("optionDisabled",!1)("optionLabel",r.fieldsInfo.recordStatus==null?null:r.fieldsInfo.recordStatus.fieldTitle)("optionRequired",!0)("optionSelectFirstItem",!0)}}function Wt(o,n){if(o&1){let r=I();l(0,"div",12)(1,"label",13),p(2),c(),l(3,"textarea",14,1),R("ngModelChange",function(i){u(r);let t=h();return A(t.dataModel.configValuesJson,i)||(t.dataModel.configValuesJson=i),C(i)}),p(5,"                "),c(),l(6,"em"),p(7),c()()}if(o&2){let r=x(4),e=h();a(2),F(e.fieldsInfo.configValuesJson==null?null:e.fieldsInfo.configValuesJson.fieldTitle),a(),T("ngModel",e.dataModel.configValuesJson),m("disabled",!(e.fieldsInfo.configValuesJson!=null&&e.fieldsInfo.configValuesJson.accessAddField)),a(4),g("",r.value.length," / 10000")}}function Jt(o,n){if(o&1){let r=I();l(0,"div",15)(1,"button",16),_("click",function(){u(r);let i=h();return C(i.onFormCancel())}),v(2,"i",17),p(3),M(4,"translate"),c(),l(5,"button",18),v(6,"i",19),p(7),M(8,"translate"),c()()}if(o&2){h();let r=x(9);a(3),g(" ",y(4,3,"ACTION.CANCEL")," "),a(2),m("disabled",!r.form.valid),a(2),g(" ",y(8,5,"ACTION.SAVE")," ")}}var kt=(()=>{let n=class n extends yt{constructor(e,i,t,s,f,d,N,B){super(s,new k,B,d),this.data=e,this.dialogRef=i,this.coreEnumService=t,this.coreSiteCategoryCmsModuleService=s,this.cmsToastrService=f,this.translate=d,this.cdr=N,this.publicHelper=B,this.requestLinkCmsModuleId=0,this.requestLinkCmsSiteCategoryId=0,this.dataModelResult=new at,this.dataModel=new k,this.formInfo=new Me,this.fileManagerOpenForm=!1,this.publicHelper.processService.cdr=this.cdr,e&&(this.requestLinkCmsSiteCategoryId=+e.linkCmsSiteCategoryId||0,this.requestLinkCmsModuleId=+e.linkCmsModuleId||0)}ngOnInit(){if(this.requestLinkCmsSiteCategoryId<=0||this.requestLinkCmsModuleId<=0){this.cmsToastrService.typeErrorComponentAction(),this.dialogRef.close({dialogChangedDate:!1});return}this.DataGetOneContent()}DataGetOneContent(){this.translate.get("MESSAGE.Receiving_Information_From_The_Server").subscribe(s=>{this.formInfo.formAlert=s}),this.formInfo.formError="";let e=this.constructor.name+"main";this.translate.get("MESSAGE.Receiving_information").subscribe(s=>{this.publicHelper.processService.processStart(e,s,this.constructor.name)});let i=new $,t=new P;t.propertyName="LinkCmsSiteCategoryId",t.value=this.requestLinkCmsSiteCategoryId,i.filters.push(t),t=new P,t.propertyName="LinkCmsModuleId",t.value=this.requestLinkCmsModuleId,i.filters.push(t),i.accessLoad=!0,this.coreSiteCategoryCmsModuleService.setAccessLoad(),this.coreSiteCategoryCmsModuleService.setAccessDataType(rt.Editor),this.coreSiteCategoryCmsModuleService.ServiceGetAll(i).subscribe({next:s=>{this.dataAccessModel=s.access,this.fieldsInfo=this.publicHelper.fieldInfoConvertor(s.access),this.dataModel=s.item,s.isSuccess?s.listItems&&s.listItems.length>0?(this.dataModel=s.listItems[0],this.formInfo.formTitle=this.formInfo.formTitle+" "+s.item.linkCmsModuleId+"<==>"+s.item.linkCmsSiteCategoryId,this.formInfo.formAlert=""):this.cmsToastrService.typeErrorMessage(this.translate.instant("MESSAGE.Module_not_found_for_editing")):(this.translate.get("ERRORMESSAGE.MESSAGE.typeError").subscribe(f=>{this.formInfo.formAlert=f}),this.formInfo.formError=s.errorMessage,this.cmsToastrService.typeErrorMessage(s.errorMessage)),this.publicHelper.processService.processStop(e)},error:s=>{this.cmsToastrService.typeError(s),this.publicHelper.processService.processStop(e,!1)}})}DataEditContent(){this.translate.get("MESSAGE.sending_information_to_the_server").subscribe(i=>{this.formInfo.formAlert=i}),this.formInfo.formError="";let e=this.constructor.name+"main";this.translate.get("MESSAGE.sending_information_to_the_server").subscribe(i=>{this.publicHelper.processService.processStart(e,i,this.constructor.name)}),this.coreSiteCategoryCmsModuleService.ServiceEdit(this.dataModel).subscribe({next:i=>{this.formInfo.formSubmitAllow=!0,this.dataModelResult=i,i.isSuccess?(this.translate.get("MESSAGE.registration_completed_successfully").subscribe(t=>{this.formInfo.formAlert=t}),this.cmsToastrService.typeSuccessEdit(),this.dialogRef.close({dialogChangedDate:!0})):(this.translate.get("ERRORMESSAGE.MESSAGE.typeError").subscribe(t=>{this.formInfo.formAlert=t}),this.formInfo.formError=i.errorMessage,this.cmsToastrService.typeErrorMessage(i.errorMessage)),this.publicHelper.processService.processStop(e)},error:i=>{this.formInfo.formSubmitAllow=!0,this.cmsToastrService.typeError(i),this.publicHelper.processService.processStop(e,!1)}})}onActionSiteCategorySelect(e){this.dataModel.linkCmsSiteCategoryId=null,e&&e.id>0&&(this.dataModel.linkCmsSiteCategoryId=e.id)}onActionSelectorModuleSelect(e){this.dataModel.linkCmsModuleId=null,e&&e.id>0&&(this.dataModel.linkCmsModuleId=e.id)}onFormSubmit(){this.formGroup.valid&&(this.formInfo.formSubmitAllow=!1,this.DataEditContent())}onFormCancel(){this.dialogRef.close({dialogChangedDate:!1})}onStepClick(e,i){e.previouslySelectedIndex<e.selectedIndex&&(this.formGroup.valid||(this.cmsToastrService.typeErrorFormInvalid(),setTimeout(()=>{i.selectedIndex=e.previouslySelectedIndex},10)))}};n.\u0275fac=function(i){return new(i||n)(S(ge),S(he),S(ye),S(D),S(V),S(W),S(j),S(L))},n.\u0275cmp=H({type:n,selectors:[["app-core-sitecategorycmsmodule-edit"]],viewQuery:function(i,t){if(i&1&&se(jt,5),i&2){let s;le(s=ce())&&(t.formGroup=s.first)}},features:[Q],decls:17,vars:18,consts:[["vform","ngForm"],["ConfigValuesJson",""],[1,"card","card-style","progressOverlayContainer"],[3,"optionsInfoAreaId"],[1,"content","mb-0"],[1,"mb-0","color-highlight","font-600","font-12"],[3,"ngSubmit"],[3,"model","optionDisabled","optionLabel","optionRequired","optionSelectFirstItem","modelChange",4,"ngIf"],[3,"optionChange","optionDisabled","optionSelectForce","optionPlaceholder"],["class","input-style has-borders no-icon input-style-always-active validate-field mb-4",4,"ngIf"],["class","form-actions",4,"ngIf"],[3,"modelChange","model","optionDisabled","optionLabel","optionRequired","optionSelectFirstItem"],[1,"input-style","has-borders","no-icon","input-style-always-active","validate-field","mb-4"],["for","dataModel.configValuesJson",1,"color-highlight"],["matInput","","name","dataModel.configValuesJson","type","text","placeholder","ConfigValuesJson","minlength","0","maxlength","10000","rows","6","id","dataModel.configValuesJson",1,"form-control","validate-name",3,"ngModelChange","ngModel","disabled"],[1,"form-actions"],["type","button",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-gray",3,"click"],[1,"ft-x"],["type","submit",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-green",3,"disabled"],[1,"fa","fa-check-square-o"]],template:function(i,t){if(i&1){let s=I();l(0,"div",2),v(1,"app-progress-spinner",3),l(2,"div",4)(3,"p",5),p(4),c(),l(5,"p"),p(6),M(7,"translate"),c(),l(8,"form",6,0),_("ngSubmit",function(){return u(s),C(t.onFormSubmit())}),b(10,qt,1,5,"app-cms-enum-record-status-selector",7),l(11,"app-core-sitecategory-selector",8),M(12,"translate"),_("optionChange",function(d){return u(s),C(t.onActionSiteCategorySelect(d))}),c(),l(13,"app-core-module-selector",8),M(14,"translate"),_("optionChange",function(d){return u(s),C(t.onActionSelectorModuleSelect(d))}),c(),b(15,Wt,8,4,"div",9)(16,Jt,9,7,"div",10),c()()()}i&2&&(a(),m("optionsInfoAreaId",t.constructor.name),a(3),g(" ",t.formInfo.formTitle," "),a(2),g(" ",y(7,12,"TITLE.Be_Careful_When_Entering_Information")," "),a(4),m("ngIf",t.fieldsInfo.recordStatus==null?null:t.fieldsInfo.recordStatus.accessWatchField),a(),m("optionDisabled",!(t.fieldsInfo.linkCmsSiteCategoryId!=null&&t.fieldsInfo.linkCmsSiteCategoryId.accessEditField))("optionSelectForce",t.dataModel.linkCmsSiteCategoryId)("optionPlaceholder",y(12,14,"TITLE.SITE_CATEGORY")),a(2),m("optionDisabled",!(t.fieldsInfo.linkCmsModuleId!=null&&t.fieldsInfo.linkCmsModuleId.accessEditField))("optionSelectForce",t.dataModel.linkCmsModuleId)("optionPlaceholder",y(14,16,"TITLE.MODULE")),a(2),m("ngIf",t.fieldsInfo.configValuesJson==null?null:t.fieldsInfo.configValuesJson.accessWatchField),a(),m("ngIf",t.formInfo.formSubmitAllow))},dependencies:[q,Ce,me,U,pe,fe,Se,Y,ue,K,Ne,z,Oe,Fe,J],styles:[".form-body[_ngcontent-%COMP%]{width:500px}@media (max-width: 700px){.form-body[_ngcontent-%COMP%]{display:contents}}#file-manager[_ngcontent-%COMP%]{width:calc(100vw - 16px);height:calc(100vh - 16px)}.recordStatus-1.mat-select-panel[_ngcontent-%COMP%]{background:#ff0}.recordStatus-2.mat-select-panel[_ngcontent-%COMP%]{background:#000}.recordStatus-3.mat-select-panel[_ngcontent-%COMP%]{background:red}"]});let o=n;return o})();var Kt=()=>[5,10,20,100],$t=o=>({display:o});function Xt(o,n){if(o&1){let r=I();l(0,"a",14),_("click",function(){u(r);let i=h();return C(i.onActionBackToParentModule())}),v(1,"i",39),c()}}function Zt(o,n){if(o&1){let r=I();l(0,"a",14),_("click",function(){u(r);let i=h();return C(i.onActionBackToParent())}),v(1,"i",39),c()}}function ei(o,n){if(o&1){let r=I();l(0,"div",40)(1,"a",41),_("click",function(){u(r);let i=h();return C(i.onActionButtonNewRow())}),v(2,"i",42)(3,"br"),c(),l(4,"p",43),p(5),M(6,"translate"),c()()}o&2&&(a(5),F(y(6,1,"ACTION.ADD")))}function ti(o,n){if(o&1){let r=I();l(0,"div",40)(1,"a",44),_("click",function(){u(r);let i=h();return C(i.onActionButtonEditRow(i.tableRowSelected))}),v(2,"i",45)(3,"br"),c(),l(4,"p",43),p(5),M(6,"translate"),c()()}o&2&&(a(5),F(y(6,1,"ACTION.EDIT")))}function ii(o,n){if(o&1){let r=I();l(0,"div",40)(1,"a",46),_("click",function(){u(r);let i=h();return C(i.onActionButtonDeleteRow(i.tableRowSelected))}),v(2,"i",47)(3,"br"),c(),l(4,"p",43),p(5),M(6,"translate"),c()()}o&2&&(a(5),F(y(6,1,"ACTION.DELETE")))}function oi(o,n){if(o&1){let r=I();l(0,"div",40)(1,"a",48),_("click",function(){u(r);let i=h();return C(i.onActionButtonConfigMainAdminRow(i.tableRowSelected))}),v(2,"i",49)(3,"br"),c(),l(4,"p",43),p(5),M(6,"translate"),c()()}o&2&&(a(5),F(y(6,1,"ACTION.MODULE_MANAGEMENT_SETTING")))}function ni(o,n){if(o&1&&(l(0,"mat-header-cell",50),p(1),c()),o&2){let r=h();a(),g(" ",r.fieldsInfo.linkCmsModuleId==null?null:r.fieldsInfo.linkCmsModuleId.fieldTitle," ")}}function ri(o,n){if(o&1&&(l(0,"mat-cell"),p(1),c()),o&2){let r=n.$implicit;a(),g(" ",r.linkCmsModuleId," ")}}function ai(o,n){if(o&1&&(l(0,"mat-header-cell",50),p(1),c()),o&2){let r=h();a(),g(" ",r.fieldsInfo.linkCmsSiteCategoryId==null?null:r.fieldsInfo.linkCmsSiteCategoryId.fieldTitle," ")}}function si(o,n){if(o&1&&(l(0,"mat-cell"),p(1),c()),o&2){let r=n.$implicit;a(),g(" ",r.linkCmsSiteCategoryId," ")}}function li(o,n){if(o&1&&(l(0,"mat-header-cell",50),p(1),c()),o&2){let r=h();a(),g(" ",r.fieldsInfo.recordStatus==null?null:r.fieldsInfo.recordStatus.fieldTitle," ")}}function ci(o,n){if(o&1&&v(0,"select",53),o&2){let r=h().$implicit,e=h();m("contentService",e.contentService)("row",r)("ngStyle",ze(3,$t,r.id===(e.tableRowSelected==null?null:e.tableRowSelected.id)?"":"none"))}}function di(o,n){if(o&1&&(l(0,"mat-cell",51),M(1,"statusCellClass"),v(2,"i",51),M(3,"statusIconClass"),b(4,ci,1,5,"select",52),c()),o&2){let r=n.$implicit,e=h();m("ngClass",y(1,3,r.recordStatus)),a(2),m("ngClass",y(3,5,r.recordStatus)),a(2),m("ngIf",e.dataModelResult==null||e.dataModelResult.access==null?null:e.dataModelResult.access.accessEditRow)}}function mi(o,n){o&1&&(l(0,"mat-header-cell",50),p(1),M(2,"translate"),c()),o&2&&(a(),g(" ",y(2,1,"TITLE.SITE_CATEGORY")," "))}function pi(o,n){if(o&1&&(l(0,"mat-cell"),p(1),c()),o&2){let r=n.$implicit;a(),g(" ",r.virtual_CmsSiteCategory.title," ")}}function ui(o,n){o&1&&(l(0,"mat-header-cell",50),p(1),M(2,"translate"),c()),o&2&&(a(),g(" ",y(2,1,"TITLE.MODULE")," "))}function Ci(o,n){if(o&1&&(l(0,"mat-cell"),p(1),c()),o&2){let r=n.$implicit;a(),g(" ",r.virtual_CmsModule.title," ")}}function fi(o,n){o&1&&(l(0,"mat-header-cell"),p(1),M(2,"translate"),c()),o&2&&(a(),g(" ",y(2,1,"TITLE.OPTION")," "))}function Si(o,n){if(o&1&&(l(0,"mat-cell",54)(1,"button",55)(2,"mat-icon"),p(3,"more_vert"),c()(),v(4,"mat-menu",null,2),c()),o&2){let r=x(5);a(),m("matMenuTriggerFor",r)}}function hi(o,n){o&1&&v(0,"mat-header-row")}function gi(o,n){if(o&1){let r=I();l(0,"mat-row",56),_("click",function(){let i=u(r).$implicit,t=h();return C(t.onActionTableRowSelect(i))}),c()}if(o&2){let r=n.$implicit,e=n.dataIndex,i=h();ae("ntk-row-odd",e%2)("ntk-row-even",!(e%2))("ntk-row-selected",r.linkCmsModuleId===(i.tableRowSelected==null?null:i.tableRowSelected.linkCmsModuleId)&&r.linkCmsSiteCategoryId===(i.tableRowSelected==null?null:i.tableRowSelected.linkCmsSiteCategoryId))}}var Ge=(()=>{let n=class n extends vt{constructor(e,i,t,s,f,d,N,B,Vt,We,Lt){if(super(e,new k,We,f,B),this.contentService=e,this.cmsToastrService=i,this.router=t,this.activatedRoute=s,this.tokenHelper=f,this.cmsConfirmationDialogService=d,this.cdr=N,this.translate=B,this.pageInfo=Vt,this.publicHelper=We,this.dialog=Lt,this.requestLinkCmsModuleId=0,this.requestLinkCmsSiteCategoryId=0,this.flag=!1,this.tableContentSelected=[],this.filteModelContent=new $,this.tabledisplayedColumns=[],this.tabledisplayedColumnsSource=["LinkCmsModuleId","LinkCmsSiteCategoryId","RecordStatus","virtual_CmsSiteCategory.title","virtual_CmsModule.title"],this.tabledisplayedColumnsMobileSource=["LinkCmsModuleId","LinkCmsSiteCategoryId","RecordStatus","virtual_CmsSiteCategory.title","virtual_CmsModule.title"],this.publicHelper.processService.cdr=this.cdr,this.optionsSearch.parentMethods={onSubmit:O=>this.onSubmitOptionsSearch(O)},this.filteModelContent.sortColumn="Id",this.filteModelContent.sortType=G.Descending,this.requestLinkCmsModuleId=+Number(this.activatedRoute.snapshot.paramMap.get("LinkCmsModuleId")),this.requestLinkCmsSiteCategoryId=+Number(this.activatedRoute.snapshot.paramMap.get("LinkCmsSiteCategoryId")),this.requestLinkCmsModuleId>0){let O=new P;O.propertyName="LinkCmsModuleId",O.value=this.requestLinkCmsModuleId,this.filteModelContent.filters.push(O)}if(this.requestLinkCmsSiteCategoryId>0){let O=new P;O.propertyName="LinkCmsSiteCategoryId",O.value=this.requestLinkCmsSiteCategoryId,this.filteModelContent.filters.push(O)}}ngOnInit(){this.filteModelContent.sortColumn="LinkCmsModuleId",this.tokenHelper.getCurrentToken().then(e=>{this.tokenInfo=e,this.DataGetAll()}),this.cmsApiStoreSubscribe=this.tokenHelper.getCurrentTokenOnChange().subscribe({next:e=>{this.tokenInfo=e,this.DataGetAll()}})}ngOnDestroy(){this.cmsApiStoreSubscribe.unsubscribe()}DataGetAll(){this.tabledisplayedColumns=this.publicHelper.TableDisplayedColumns(this.tabledisplayedColumnsSource,this.tabledisplayedColumnsMobileSource,[],this.tokenInfo),this.tableRowsSelected=[],this.onActionTableRowSelect(new k);let e=this.constructor.name+"main";this.translate.get("MESSAGE.get_information_list").subscribe(t=>{this.publicHelper.processService.processStart(e,t,this.constructor.name)}),this.filteModelContent.accessLoad=!0;let i=JSON.parse(JSON.stringify(this.filteModelContent));this.contentService.ServiceGetAllEditor(i).subscribe({next:t=>{t.isSuccess?(this.fieldsInfo=this.publicHelper.fieldInfoConvertor(t.access),this.dataModelResult=t,this.tableSource.data=t.listItems,this.optionsStatist?.data?.show&&this.onActionButtonStatist(!0),this.optionsSearch.childMethods&&this.optionsSearch.childMethods.setAccess(t.access)):this.cmsToastrService.typeErrorMessage(t.errorMessage),this.publicHelper.processService.processStop(e)},error:t=>{this.cmsToastrService.typeError(t),this.publicHelper.processService.processStop(e,!1)}})}onTableSortData(e){this.tableSource&&this.tableSource.sort&&this.tableSource.sort.active===e.active?this.tableSource.sort.start==="asc"?(e.start="desc",this.filteModelContent.sortColumn=e.active,this.filteModelContent.sortType=G.Descending):this.tableSource.sort.start==="desc"?(e.start="asc",this.filteModelContent.sortColumn="",this.filteModelContent.sortType=G.Ascending):e.start="desc":(this.filteModelContent.sortColumn=e.active,this.filteModelContent.sortType=G.Descending),this.tableSource.sort=e,this.filteModelContent.currentPageNumber=0,this.DataGetAll()}onTablePageingData(e){this.filteModelContent.currentPageNumber=e.pageIndex+1,this.filteModelContent.rowPerPage=e.pageSize,this.DataGetAll()}onActionButtonNewRow(){if(this.dataModelResult==null||this.dataModelResult.access==null||!this.dataModelResult.access.accessAddRow){this.cmsToastrService.typeErrorAccessAdd();return}var e="";this.tokenHelper.isMobile?e="dialog-fullscreen":e="dialog-min",this.dialog.open(Rt,{height:"90%",panelClass:e,enterAnimationDuration:X.cmsViewConfig.enterAnimationDuration,exitAnimationDuration:X.cmsViewConfig.exitAnimationDuration,data:{linkCmsModuleId:this.requestLinkCmsModuleId,linkCmsSiteCategoryId:this.requestLinkCmsSiteCategoryId}}).afterClosed().subscribe(t=>{t&&t.dialogChangedDate&&this.DataGetAll()})}onActionButtonEditRow(e=this.tableRowSelected){if(!e||!e.linkCmsModuleId||e.linkCmsModuleId===0||!e.linkCmsSiteCategoryId||e.linkCmsSiteCategoryId===0){this.cmsToastrService.typeErrorSelectedRow();return}if(this.onActionTableRowSelect(e),this.dataModelResult==null||this.dataModelResult.access==null||!this.dataModelResult.access.accessEditRow){this.cmsToastrService.typeErrorAccessEdit();return}var i="";this.tokenHelper.isMobile?i="dialog-fullscreen":i="dialog-min",this.dialog.open(kt,{height:"90%",panelClass:i,enterAnimationDuration:X.cmsViewConfig.enterAnimationDuration,exitAnimationDuration:X.cmsViewConfig.exitAnimationDuration,data:{linkCmsModuleId:this.tableRowSelected.linkCmsModuleId,linkCmsSiteCategoryId:this.tableRowSelected.linkCmsSiteCategoryId}}).afterClosed().subscribe(s=>{s&&s.dialogChangedDate&&this.DataGetAll()})}onActionButtonDeleteRow(e=this.tableRowSelected){if(!e||!e.linkCmsModuleId||e.linkCmsModuleId===0||!e.linkCmsSiteCategoryId||e.linkCmsSiteCategoryId===0){this.translate.get("MESSAGE.no_row_selected_to_delete").subscribe(s=>{this.cmsToastrService.typeErrorSelected(s)});return}if(this.onActionTableRowSelect(e),this.dataModelResult==null||this.dataModelResult.access==null||!this.dataModelResult.access.accessDeleteRow){this.cmsToastrService.typeErrorAccessDelete();return}var i="",t="";this.translate.get(["MESSAGE.Please_Confirm","MESSAGE.Do_you_want_to_delete_this_content"]).subscribe(s=>{i=s["MESSAGE.Please_Confirm"],t=s["MESSAGE.Do_you_want_to_delete_this_content"]+"?<br> ( "+this.tableRowSelected.virtual_CmsModule.title+"<==>"+this.tableRowSelected.virtual_CmsSiteCategory.title+" ) "}),this.cmsConfirmationDialogService.confirm(i,t).then(s=>{if(s){let f=this.constructor.name+"main";this.translate.get("MESSAGE.Receiving_information").subscribe(d=>{this.publicHelper.processService.processStart(f,d,this.constructor.name)}),this.contentService.ServiceDeleteEntity(this.tableRowSelected).subscribe({next:d=>{d.isSuccess?(this.cmsToastrService.typeSuccessRemove(),this.DataGetAll()):this.cmsToastrService.typeErrorRemove(),this.publicHelper.processService.processStop(f)},error:d=>{this.cmsToastrService.typeError(d),this.publicHelper.processService.processStop(f,!1)}})}}).catch(()=>{})}onActionButtonGoToSiteCategoryCmsModuleList(e=this.tableRowSelected){if(!e||!e.linkCmsModuleId||e.linkCmsModuleId===0||!e.linkCmsSiteCategoryId||e.linkCmsSiteCategoryId===0){this.translate.get("MESSAGE.no_row_selected_to_display").subscribe(i=>{this.cmsToastrService.typeErrorSelected(i)});return}this.onActionTableRowSelect(e),this.router.navigate(["/core/siteSiteCategoryCmsModule/",this.tableRowSelected.id])}onActionButtonStatist(e=!this.optionsStatist.data.show){if(this.optionsStatist.data.show=e,!this.optionsStatist.data.show)return;let i=new Map;this.translate.get("MESSAGE.Active").subscribe(d=>{i.set(d,0)}),this.translate.get("MESSAGE.All").subscribe(d=>{i.set(d,0)});let t=this.constructor.name+".ServiceStatist";this.translate.get("MESSAGE.Get_the_statist").subscribe(d=>{this.publicHelper.processService.processStart(t,d,this.constructor.name)}),this.contentService.ServiceGetCount(this.filteModelContent).subscribe({next:d=>{d.isSuccess?(this.translate.get("MESSAGE.All").subscribe(N=>{i.set(N,d.totalRowCount)}),this.optionsStatist.childMethods.setStatistValue(i)):this.cmsToastrService.typeErrorMessage(d.errorMessage),this.publicHelper.processService.processStop(t)},error:d=>{this.cmsToastrService.typeError(d),this.publicHelper.processService.processStop(t,!1)}});let s=JSON.parse(JSON.stringify(this.filteModelContent)),f=new P;f.propertyName="RecordStatus",f.value=nt.Available,s.filters.push(f),this.contentService.ServiceGetCount(s).subscribe({next:d=>{d.isSuccess?(this.translate.get("MESSAGE.Active").subscribe(N=>{i.set(N,d.totalRowCount)}),this.optionsStatist.childMethods.setStatistValue(i)):this.cmsToastrService.typeErrorMessage(d.errorMessage),this.publicHelper.processService.processStop(t)},error:d=>{this.cmsToastrService.typeError(d),this.publicHelper.processService.processStop(t,!1)}})}onActionButtonConfigMainAdminRow(e=this.tableRowSelected){if(!e||!e.linkCmsModuleId||e.linkCmsModuleId===0||!e.linkCmsSiteCategoryId||e.linkCmsSiteCategoryId===0){this.translate.get("ERRORMESSAGE.MESSAGE.typeErrorSelectedRow").subscribe(i=>{this.cmsToastrService.typeErrorSelected(i)});return}this.onActionTableRowSelect(e),this.router.navigate([e.virtual_CmsModule.className+"/config/mainadmin/"])}onActionButtonReload(){this.DataGetAll()}onSubmitOptionsSearch(e){this.filteModelContent.filters=e,this.DataGetAll()}onActionBackToParent(){this.router.navigate(["/core/sitecategory/"])}onActionBackToParentModule(){this.router.navigate(["/core/module/"])}};n.\u0275fac=function(i){return new(i||n)(S(D),S(V),S(Ze),S(Xe),S(Z),S(ee),S(j),S(W),S(lt),S(L),S(tt))},n.\u0275cmp=H({type:n,selectors:[["app-core-sitecategorycmsmodule-list"]],features:[Q],decls:57,vars:31,consts:[["tableSort","matSort"],["paginator",""],["actionMenu","matMenu"],[3,"optionActionGuideNoticeDisplayChange","optionOnActionButtonMemoRow","optionOnActionButtonMemo","optionOnActionButtonExport","optionOnActionButtonPrintRow","optionsListInfoAreaId","optionGuideNoticeKey","optionActionGuideNoticeDisplay","optionTreeDisplay","optionActionRowId","optionActionRowDisplayMenu","optionSelectRowItemTitle"],["cms-tree",""],["cms-header",""],["cms-action-header",""],[1,"d-flex","justify-content-between","flex-wrap"],[1,"justify-content-end"],[1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-highlight"],[1,"custom-slide-toggle",3,"ngModelChange","ngModel"],[3,"click","ngModelChange","ngModel"],[1,"justify-content-start"],["type","button","class","btn font-13 font-600 btn-s m-1 rounded-s shadow-xl border-0 gradient-highlight","target","_blank",3,"click",4,"ngIf"],["type","button","target","_blank",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-highlight",3,"click"],[1,"fa-solid","fa-info","font-18",2,"color","#ffffff"],[1,"fa-solid","fa-rotate-right","font-18",2,"color","#ffffff"],["cms-action-main",""],["class","col-4",4,"ngIf"],["cms-action-row",""],["cms-action-area",""],[3,"optionsChange","options"],["cms-body",""],["matSort","",3,"matSortChange","dataSource"],["matColumnDef","LinkCmsModuleId"],["mat-sort-header","",4,"matHeaderCellDef"],[4,"matCellDef"],["matColumnDef","LinkCmsSiteCategoryId"],["matColumnDef","RecordStatus"],[3,"ngClass",4,"matCellDef"],["matColumnDef","virtual_CmsSiteCategory.title"],["matColumnDef","virtual_CmsModule.title"],["matColumnDef","Action"],[4,"matHeaderCellDef"],["class"," Action",4,"matCellDef"],[4,"matHeaderRowDef"],[3,"ntk-row-odd","ntk-row-even","ntk-row-selected","click",4,"matRowDef","matRowDefColumns"],["cms-footer",""],[3,"page","length","pageIndex","pageSize","pageSizeOptions"],[1,"fa-solid","fa-arrow-left","font-18",2,"color","#ffffff"],[1,"col-4"],["type","button","target","_blank",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-teal",3,"click"],[1,"fa-solid","fa-plus","font-18",2,"color","#FFFFFF"],[1,"font-11","text-center","opacity-70"],["target","_blank",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-magenta",3,"click"],[1,"fa-solid","fa-pen","font-18",2,"color","#FFFFFF"],["target","_blank",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-red",3,"click"],[1,"fa-solid","fa-trash","font-18",2,"color","#ffffff"],["target","_blank",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-highlight",3,"click"],[1,"fa-solid","fa-gear","font-18",2,"color","#ffffff"],["mat-sort-header",""],[3,"ngClass"],["matNativeControl","","cmsRecordStatusSelfSave","","style","background: none; border: none;",3,"contentService","row","ngStyle",4,"ngIf"],["matNativeControl","","cmsRecordStatusSelfSave","",2,"background","none","border","none",3,"contentService","row","ngStyle"],[1,"Action"],["type","button","mat-icon-button","","aria-label","Action Menu",3,"matMenuTriggerFor"],[3,"click"]],template:function(i,t){if(i&1){let s=I();l(0,"app-cms-html-list",3),R("optionActionGuideNoticeDisplayChange",function(d){return u(s),A(t.viewGuideNotice,d)||(t.viewGuideNotice=d),C(d)}),_("optionOnActionButtonMemoRow",function(){return u(s),C(t.onActionButtonMemoRow())})("optionOnActionButtonMemo",function(){return u(s),C(t.onActionButtonMemo())})("optionOnActionButtonExport",function(){return u(s),C(t.onActionButtonExport())})("optionOnActionButtonPrintRow",function(){return u(s),C(t.onActionButtonPrintRow())}),w(1,4),p(2," -------------------------------------- "),E(),Je(3,5),w(4,6),l(5,"div",7)(6,"div",8)(7,"a",9)(8,"mat-slide-toggle",10),R("ngModelChange",function(d){return u(s),A(t.optionsSearch.data.show,d)||(t.optionsSearch.data.show=d),C(d)}),c(),p(9),M(10,"translate"),c(),l(11,"a",9)(12,"mat-slide-toggle",11),_("click",function(){return u(s),C(t.onActionButtonStatist())}),R("ngModelChange",function(d){return u(s),A(t.optionsStatist.data.show,d)||(t.optionsStatist.data.show=d),C(d)}),c(),p(13),M(14,"translate"),c()(),l(15,"div",12),b(16,Xt,2,0,"a",13)(17,Zt,2,0,"a",13),l(18,"a",14),_("click",function(){return u(s),C(t.viewGuideNotice=!t.viewGuideNotice)}),v(19,"i",15),c(),l(20,"a",14),_("click",function(){return u(s),C(t.onActionButtonReload())}),v(21,"i",16),c()()(),E(),w(22,17),b(23,ei,7,3,"div",18),E(),w(24,19),b(25,ti,7,3,"div",18)(26,ii,7,3,"div",18)(27,oi,7,3,"div",18),E(),w(28,20),l(29,"app-cms-search-list",21),R("optionsChange",function(d){return u(s),A(t.optionsSearch,d)||(t.optionsSearch=d),C(d)}),c(),l(30,"app-cms-statist-list",21),R("optionsChange",function(d){return u(s),A(t.optionsStatist,d)||(t.optionsStatist=d),C(d)}),c(),E(),w(31,22),l(32,"mat-table",23,0),_("matSortChange",function(){u(s);let d=x(33);return C(t.onTableSortData(d))}),w(34,24),b(35,ni,2,1,"mat-header-cell",25)(36,ri,2,1,"mat-cell",26),E(),w(37,27),b(38,ai,2,1,"mat-header-cell",25)(39,si,2,1,"mat-cell",26),E(),w(40,28),b(41,li,2,1,"mat-header-cell",25)(42,di,5,7,"mat-cell",29),E(),w(43,30),b(44,mi,3,3,"mat-header-cell",25)(45,pi,2,1,"mat-cell",26),E(),w(46,31),b(47,ui,3,3,"mat-header-cell",25)(48,Ci,2,1,"mat-cell",26),E(),w(49,32),b(50,fi,3,3,"mat-header-cell",33)(51,Si,6,1,"mat-cell",34),E(),b(52,hi,1,0,"mat-header-row",35)(53,gi,1,6,"mat-row",36),c(),E(),w(54,37),l(55,"mat-paginator",38,1),_("page",function(d){return u(s),C(t.onTablePageingData(d))}),c(),E(),c()}i&2&&(m("optionsListInfoAreaId",t.constructor.name)("optionGuideNoticeKey",""),T("optionActionGuideNoticeDisplay",t.viewGuideNotice),m("optionTreeDisplay",!1)("optionActionRowId",t.tableRowSelected==null?null:t.tableRowSelected.id)("optionActionRowDisplayMenu",t.tableRowSelectDoubleClick)("optionSelectRowItemTitle",t.tableRowSelected==null?null:t.tableRowSelected.id),a(8),T("ngModel",t.optionsSearch.data.show),a(),g("",y(10,26,"ACTION.SEARCH")," "),a(3),T("ngModel",t.optionsStatist.data.show),a(),g("",y(14,28,"ACTION.STATIST")," "),a(3),m("ngIf",t.requestLinkCmsModuleId>0),a(),m("ngIf",t.requestLinkCmsSiteCategoryId>0),a(6),m("ngIf",t.dataModelResult==null||t.dataModelResult.access==null?null:t.dataModelResult.access.accessAddRow),a(2),m("ngIf",t.dataModelResult==null||t.dataModelResult.access==null?null:t.dataModelResult.access.accessEditRow),a(),m("ngIf",t.dataModelResult==null||t.dataModelResult.access==null?null:t.dataModelResult.access.accessDeleteRow),a(),m("ngIf",t.tokenInfo.userAccessAdminAllowToProfessionalData),a(2),T("options",t.optionsSearch),a(),T("options",t.optionsStatist),a(2),m("dataSource",t.tableSource),a(20),m("matHeaderRowDef",t.tabledisplayedColumns),a(),m("matRowDefColumns",t.tabledisplayedColumns),a(2),m("length",t.dataModelResult.totalRowCount)("pageIndex",t.dataModelResult.currentPageNumber-1)("pageSize",t.dataModelResult.rowPerPage)("pageSizeOptions",de(30,Kt)))},dependencies:[Qe,q,Ue,U,Y,et,it,K,ct,dt,be,mt,ve,Ie,we,Te,xe,Ae,Ee,De,Re,ke,Ve,Le,ht,gt,St,ut,J,ft,Ct],encapsulation:2});let o=n;return o})();var _i=[{path:"",children:[{path:"",component:Ge},{path:"LinkCmsModuleId/:LinkCmsModuleId",component:Ge},{path:"LinkCmsSiteCategoryId/:LinkCmsSiteCategoryId",component:Ge}]}],Dt=(()=>{let n=class n{};n.\u0275fac=function(i){return new(i||n)},n.\u0275mod=re({type:n}),n.\u0275inj=ne({imports:[Pe.forChild(_i),Pe]});let o=n;return o})();var Mi=()=>[5,10,20,100];function yi(o,n){o&1&&(l(0,"mat-header-cell",14),p(1),M(2,"translate"),c()),o&2&&(a(),g(" ",y(2,1,"TITLE.SITE_CATEGORY")," "))}function bi(o,n){if(o&1&&(l(0,"mat-cell"),p(1),c()),o&2){let r=n.$implicit;a(),g(" ",r.virtual_CmsSiteCategory.title," ")}}function vi(o,n){o&1&&(l(0,"mat-header-cell",14),p(1),M(2,"translate"),c()),o&2&&(a(),g(" ",y(2,1,"TITLE.MODULE")," "))}function Ii(o,n){if(o&1&&(l(0,"mat-cell"),p(1),c()),o&2){let r=n.$implicit;a(),g(" ",r.virtual_CmsModule.title," ")}}function wi(o,n){o&1&&(l(0,"mat-header-cell",14),p(1),M(2,"translate"),c()),o&2&&(a(),g(" ",y(2,1,"TITLE.DESCRIPTION")," "))}function Ei(o,n){if(o&1&&(l(0,"mat-cell"),p(1),c()),o&2){let r=n.$implicit;a(),g(" ",r.virtual_CmsModule.Description," ")}}function Ti(o,n){o&1&&v(0,"mat-header-row")}function Ai(o,n){if(o&1){let r=I();l(0,"mat-row",15),_("click",function(){let i=u(r).$implicit,t=h(2);return C(t.onActionTableRowSelect(i))}),c()}if(o&2){let r=n.$implicit,e=n.dataIndex,i=h(2);ae("ntk-row-odd",e%2)("ntk-row-even",!(e%2))("ntk-row-selected",r.id===(i.tableRowSelected==null?null:i.tableRowSelected.id))}}function Ri(o,n){if(o&1){let r=I();l(0,"mat-table",6,1),_("matSortChange",function(){u(r);let i=x(1),t=h();return C(t.onTableSortData(i))}),w(2,7),b(3,yi,3,3,"mat-header-cell",8)(4,bi,2,1,"mat-cell",9),E(),w(5,10),b(6,vi,3,3,"mat-header-cell",8)(7,Ii,2,1,"mat-cell",9),E(),w(8,11),b(9,wi,3,3,"mat-header-cell",8)(10,Ei,2,1,"mat-cell",9),E(),b(11,Ti,1,0,"mat-header-row",12)(12,Ai,1,6,"mat-row",13),c()}if(o&2){let r=h();m("dataSource",r.tableSource),a(11),m("matHeaderRowDef",r.tabledisplayedColumns),a(),m("matRowDefColumns",r.tabledisplayedColumns)}}var fo=(()=>{let n=class n{set optionSiteCategoryId(e){this.LinkSiteCategoryId=e,this.DataGetAll()}constructor(e,i,t,s,f,d){this.coreSiteCategoryCmsModuleService=e,this.publicHelper=i,this.cmsToastrService=t,this.tokenHelper=s,this.cdr=f,this.translate=d,this.LinkSiteCategoryId=0,this.fieldsInfo=new Map,this.tableContentSelected=[],this.filteModelContent=new $,this.dataModelResult=new _e,this.tokenInfo=new ot,this.tableRowsSelected=[],this.tableRowSelected=new k,this.tableSource=new pt,this.tabledisplayedColumns=[],this.tabledisplayedColumnsSource=["virtual_CmsSiteCategory.title","virtual_CmsModule.title","virtual_CmsModule.Description"],this.tabledisplayedColumnsMobileSource=["virtual_CmsSiteCategory.title","virtual_CmsModule.title","virtual_CmsModule.Description"],this.publicHelper.processService.cdr=this.cdr}ngOnInit(){this.filteModelContent.sortColumn="Title",this.tokenHelper.getCurrentToken().then(e=>{this.tokenInfo=e,this.DataGetAll()}),this.cmsApiStoreSubscribe=this.tokenHelper.getCurrentTokenOnChange().subscribe({next:e=>{this.tokenInfo=e,this.DataGetAll()}})}ngOnDestroy(){this.cmsApiStoreSubscribe.unsubscribe()}DataGetAll(){this.tabledisplayedColumns=this.publicHelper.TableDisplayedColumns(this.tabledisplayedColumnsSource,this.tabledisplayedColumnsMobileSource,[],this.tokenInfo),this.tableRowsSelected=[],this.onActionTableRowSelect(new k),this.filteModelContent.accessLoad=!0;let e=JSON.parse(JSON.stringify(this.filteModelContent));if(this.LinkSiteCategoryId&&this.LinkSiteCategoryId>0){let t=new P;t.propertyName="LinkCmsSiteCategoryId",t.value=this.LinkSiteCategoryId,e.filters.push(t)}let i=this.constructor.name+".ServiceGetAll";this.translate.get("MESSAGE.Request_new_access").subscribe(t=>{this.publicHelper.processService.processStart(i,t,this.constructor.name)}),this.coreSiteCategoryCmsModuleService.ServiceGetAll(e).subscribe({next:t=>{this.fieldsInfo=this.publicHelper.fieldInfoConvertor(t.access),t.isSuccess?(this.LinkSiteCategoryId&&this.LinkSiteCategoryId>0&&(this.tabledisplayedColumns=this.publicHelper.listRemoveIfExist(this.tabledisplayedColumns,"virtual_CmsSiteCategory.title")),this.dataModelResult=t,this.tableSource.data=t.listItems):this.cmsToastrService.typeErrorMessage(t.errorMessage),this.publicHelper.processService.processStop(i)},error:t=>{this.cmsToastrService.typeError(t),this.publicHelper.processService.processStop(i,!1)}})}onTableSortData(e){this.tableSource&&this.tableSource.sort&&this.tableSource.sort.active===e.active?this.tableSource.sort.start==="asc"?(e.start="desc",this.filteModelContent.sortColumn=e.active,this.filteModelContent.sortType=G.Descending):this.tableSource.sort.start==="desc"?(e.start="asc",this.filteModelContent.sortColumn="",this.filteModelContent.sortType=G.Ascending):e.start="desc":(this.filteModelContent.sortColumn=e.active,this.filteModelContent.sortType=G.Descending),this.tableSource.sort=e,this.filteModelContent.currentPageNumber=0,this.DataGetAll()}onTablePageingData(e){this.filteModelContent.currentPageNumber=e.pageIndex+1,this.filteModelContent.rowPerPage=e.pageSize,this.DataGetAll()}onActionButtonReload(){this.DataGetAll()}onActionTableRowSelect(e){this.tableRowSelected=e,e.expanded||(e.expanded=!1),e.expanded=!e.expanded}};n.\u0275fac=function(i){return new(i||n)(S(D),S(L),S(V),S(Z),S(j),S(W))},n.\u0275cmp=H({type:n,selectors:[["app-core-sitecategorycmsmodule-listview"]],inputs:{optionSiteCategoryId:"optionSiteCategoryId"},decls:5,vars:7,consts:[["paginator",""],["tableSort","matSort"],[1,"example-container","mat-elevation-z8"],[3,"optionsInfoAreaId"],["matSort","",3,"dataSource","matSortChange",4,"ngIf"],[3,"page","length","pageIndex","pageSize","pageSizeOptions"],["matSort","",3,"matSortChange","dataSource"],["matColumnDef","virtual_CmsSiteCategory.title"],["mat-sort-header","",4,"matHeaderCellDef"],[4,"matCellDef"],["matColumnDef","virtual_CmsModule.title"],["matColumnDef","virtual_CmsModule.Description"],[4,"matHeaderRowDef"],[3,"ntk-row-odd","ntk-row-even","ntk-row-selected","click",4,"matRowDef","matRowDefColumns"],["mat-sort-header",""],[3,"click"]],template:function(i,t){if(i&1){let s=I();l(0,"div",2),v(1,"app-progress-spinner",3),b(2,Ri,13,3,"mat-table",4),l(3,"mat-paginator",5,0),_("page",function(d){return u(s),C(t.onTablePageingData(d))}),c()()}i&2&&(a(),m("optionsInfoAreaId",t.constructor.name),a(),m("ngIf",!t.publicHelper.processService.processInRun),a(),m("length",t.dataModelResult.totalRowCount)("pageIndex",t.dataModelResult.currentPageNumber-1)("pageSize",t.dataModelResult.rowPerPage)("pageSizeOptions",de(6,Mi)))},dependencies:[q,be,ve,Ie,we,Te,xe,Ae,Ee,De,Re,ke,Ve,Le,z,J],encapsulation:2});let o=n;return o})();var Bo=(()=>{let n=class n{};n.\u0275fac=function(i){return new(i||n)},n.\u0275mod=re({type:n}),n.\u0275inj=ne({providers:[D,ee,st],imports:[Ye,Ke,Dt,$e.withConfig({warnOnNgModelWithFormControl:"never"}),_t,bt,It,wt]});let o=n;return o})();export{fo as a,Bo as b};
