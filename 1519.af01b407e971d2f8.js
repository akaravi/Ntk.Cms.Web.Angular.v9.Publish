"use strict";(self.webpackChunkntk_cms_web=self.webpackChunkntk_cms_web||[]).push([[1519],{2317:(G,m,a)=>{a.d(m,{z:()=>B});var h=a(3308),t=a(7788),c=a(7222),i=a(8189),f=a(5804),E=a(965),M=a(8887),g=a(3793),S=a(2831),C=a(3527),O=a(4434),D=a(5154),y=a(2882),p=a(6610),u=a(2497),R=a(8278),I=a(9344),v=a(6182),P=a(4587),A=a(7912);const T=["*"];function L(s,_){if(1&s&&(t.j41(0,"label",8),t.EFF(1),t.k0s()),2&s){const e=t.XpG();t.Mz_("for","app-cms-site-selector-",e.id,""),t.R7$(),t.JRh(e.optionLabel)}}function b(s,_){if(1&s&&(t.j41(0,"mat-option",9)(1,"span"),t.EFF(2),t.k0s()()),2&s){const e=_.$implicit,o=t.XpG();t.Y8G("value",e)("disabled",o.optionDisabled),t.R7$(2),t.JRh(o.displayOption(e))}}function U(s,_){if(1&s){const e=t.RV6();t.j41(0,"mat-icon",10),t.bIt("click",function(){t.eBV(e);const l=t.XpG();return t.Njj(l.onActionSelectClear())}),t.EFF(1,"close"),t.k0s()}}let B=(()=>{class s{coreEnumService;cdr;publicHelper;translate;categoryService;static nextId=0;id=++s.nextId;constructor(e,o,l,r,n){this.coreEnumService=e,this.cdr=o,this.publicHelper=l,this.translate=r,this.categoryService=n,this.publicHelper.processService.cdr=this.cdr,this.translate.get("MESSAGE.Receiving_information").subscribe(d=>{this.loading.message=d})}dataModelResult=new i.N$V;dataModelSelect=new i.UAV;loading=new O.o;get optionLoading(){return this.loading}set optionLoading(e){this.loading=e}formControl=new c.MJ;filteredOptions;optionDisabled=!1;optionSelectFirstItem=!1;optionPlaceholder="";optionLabel="";optionChange=new t.bkB;optionReload=()=>this.onActionButtonReload();set optionSelectForce(e){this.onActionSelectForce(e)}ngOnInit(){this.loadOptions(),(!this.optionLabel||0==this.optionLabel.length&&this.optionPlaceholder?.length>0)&&(this.optionLabel=this.optionPlaceholder)}loadOptions(){this.filteredOptions=this.formControl.valueChanges.pipe((0,E.Z)(""),(0,M.B)(1500),(0,g.F)(),(0,S.n)(e=>this.DataGetAll("string"==typeof e||"number"==typeof e?e:"")))}displayFn(e){return e?e.title:void 0}displayOption(e){return e?e.title:void 0}DataGetAll(e){var o=this;return(0,h.A)(function*(){const l=new i.O2i;if(l.rowPerPage=20,l.accessLoad=!0,e&&e.length>0){let n=new i.ycK;n=new i.ycK,n.propertyName="SubDomain",n.value=e,n.searchType=i._GO.Contains,n.clauseType=i.jL_.Or,l.filters.push(n),n=new i.ycK,n.propertyName="Domain",n.value=e,n.searchType=i._GO.Contains,n.clauseType=i.jL_.Or,l.filters.push(n),n=new i.ycK,n.propertyName="Title",n.value=e,n.searchType=i._GO.Contains,n.clauseType=i.jL_.Or,l.filters.push(n),e&&"number"==typeof+e&&+e>0&&(n=new i.ycK,n.propertyName="Id",n.value=e,n.searchType=i._GO.Equal,n.clauseType=i.jL_.Or,l.filters.push(n))}const r=o.constructor.name+"main";return o.translate.get("MESSAGE.Receiving_information").subscribe(n=>{o.publicHelper.processService.processStart(r,n,o.constructor.name)}),yield(0,f._)(o.categoryService.ServiceGetAll(l)).then(n=>(o.dataModelResult=n,o.optionSelectFirstItem&&(!o.dataModelSelect||!o.dataModelSelect.id||o.dataModelSelect.id<=0)&&o.dataModelResult.listItems.length>0&&(o.optionSelectFirstItem=!1,setTimeout(()=>{o.formControl.setValue(o.dataModelResult.listItems[0])},1e3),o.onActionSelect(o.dataModelResult.listItems[0])),o.publicHelper.processService.processStop(r),n.listItems))})()}onActionSelect(e){this.optionDisabled||(this.dataModelSelect=e,this.optionChange.emit(this.dataModelSelect))}onActionSelectClear(){this.optionDisabled||(this.dataModelSelect=null,this.formControl.setValue(null),this.optionChange.emit(null))}push(e){return this.filteredOptions.pipe((0,C.T)(o=>(o.find(l=>l.id===e.id)||o.push(e),o)))}onActionSelectForce(e){if("number"==typeof e&&e>0){if(this.dataModelSelect&&this.dataModelSelect.id===e)return;if(this.dataModelResult&&this.dataModelResult.listItems&&this.dataModelResult.listItems.find(o=>o.id===e)){const o=this.dataModelResult.listItems.find(l=>l.id===e);return this.dataModelSelect=o,void this.formControl.setValue(o)}this.categoryService.ServiceGetOneById(e).subscribe({next:o=>{o.isSuccess&&(this.filteredOptions=this.push(o.item),this.dataModelSelect=o.item,this.formControl.setValue(o.item),this.optionChange.emit(o.item))}})}else{if(typeof e==typeof i.UAV)return this.filteredOptions=this.push(e),this.dataModelSelect=e,void this.formControl.setValue(e);this.formControl.setValue(null)}}onActionButtonReload(){this.dataModelSelect=new i.UAV,this.loadOptions()}static \u0275fac=function(o){return new(o||s)(t.rXU(i.i9D),t.rXU(t.gRc),t.rXU(D.A),t.rXU(y.c$),t.rXU(i.WCW))};static \u0275cmp=t.VBU({type:s,selectors:[["app-cms-sitecategory-selector"]],inputs:{optionLoading:"optionLoading",optionDisabled:"optionDisabled",optionSelectFirstItem:"optionSelectFirstItem",optionPlaceholder:"optionPlaceholder",optionLabel:"optionLabel",optionReload:"optionReload",optionSelectForce:"optionSelectForce"},outputs:{optionChange:"optionChange"},ngContentSelectors:T,decls:10,vars:13,consts:[["matauto","matAutocomplete"],[1,"input-style","has-borders","no-icon","input-style-always-active","validate-field","mb-4","progressOverlayContainer"],[3,"optionsInfoAreaId"],["class","color-highlight",3,"for",4,"ngIf"],["type","text","matInput","",1,"form-control","validate-name",3,"placeholder","formControl","matAutocomplete","id"],[3,"optionSelected","displayWith"],["class","color-highlight",3,"value","disabled",4,"ngFor","ngForOf"],["matSuffix","","matSuffix","","mat-icon-button","","aria-label","Clear",3,"click",4,"ngIf"],[1,"color-highlight",3,"for"],[1,"color-highlight",3,"value","disabled"],["matSuffix","","matSuffix","","mat-icon-button","","aria-label","Clear",3,"click"]],template:function(o,l){if(1&o){const r=t.RV6();t.NAR(),t.j41(0,"div",1),t.nrm(1,"app-progress-spinner",2),t.DNE(2,L,2,3,"label",3),t.nrm(3,"input",4),t.j41(4,"mat-autocomplete",5,0),t.bIt("optionSelected",function(d){return t.eBV(r),t.Njj(l.onActionSelect(d.option.value))}),t.DNE(6,b,3,3,"mat-option",6),t.nI1(7,"async"),t.k0s(),t.DNE(8,U,2,0,"mat-icon",7),t.SdG(9),t.k0s()}if(2&o){const r=t.sdS(5);t.R7$(),t.Y8G("optionsInfoAreaId",l.constructor.name),t.R7$(),t.Y8G("ngIf",(null==l.optionLabel?null:l.optionLabel.length)>0),t.R7$(),t.FS9("placeholder",l.optionPlaceholder),t.Mz_("id","app-cms-site-selector-",l.id,""),t.Y8G("formControl",l.formControl)("matAutocomplete",r),t.BMQ("disabled",!!l.optionDisabled||null),t.R7$(),t.Y8G("displayWith",l.displayFn),t.R7$(2),t.Y8G("ngForOf",t.bMT(7,11,l.filteredOptions)),t.R7$(2),t.Y8G("ngIf",null==l.dataModelSelect?null:l.dataModelSelect.id)}},dependencies:[p.Sq,p.bT,c.me,c.BC,c.l_,u.$3,R.wT,u.pN,I.yw,v.An,P.fg,A._,p.Jj],encapsulation:2})}return s})()},5435:(G,m,a)=>{a.d(m,{E:()=>B});var h=a(3308),t=a(7788),c=a(7222),i=a(8189),f=a(5804),E=a(965),M=a(8887),g=a(3793),S=a(2831),C=a(3527),O=a(4434),D=a(5154),y=a(2882),p=a(6610),u=a(2497),R=a(8278),I=a(9344),v=a(6182),P=a(4587),A=a(7912);const T=["*"];function L(s,_){if(1&s&&(t.j41(0,"label",8),t.EFF(1),t.k0s()),2&s){const e=t.XpG();t.Mz_("for","app-cms-site-selector-",e.id,""),t.R7$(),t.JRh(e.optionLabel)}}function b(s,_){if(1&s&&(t.j41(0,"mat-option",9)(1,"span"),t.EFF(2),t.k0s()()),2&s){const e=_.$implicit,o=t.XpG();t.Y8G("value",e)("disabled",o.optionDisabled),t.R7$(2),t.JRh(o.displayOption(e))}}function U(s,_){if(1&s){const e=t.RV6();t.j41(0,"mat-icon",10),t.bIt("click",function(){t.eBV(e);const l=t.XpG();return t.Njj(l.onActionSelectClear())}),t.EFF(1,"close"),t.k0s()}}let B=(()=>{class s{coreEnumService;cdr;publicHelper;translate;categoryService;static nextId=0;id=++s.nextId;constructor(e,o,l,r,n){this.coreEnumService=e,this.cdr=o,this.publicHelper=l,this.translate=r,this.categoryService=n,this.publicHelper.processService.cdr=this.cdr,this.translate.get("MESSAGE.Receiving_information").subscribe(d=>{this.loading.message=d})}dataModelResult=new i.N$V;dataModelSelect=new i.fNb;loading=new O.o;get optionLoading(){return this.loading}set optionLoading(e){this.loading=e}formControl=new c.MJ;filteredOptions;optionDisabled=!1;optionSelectFirstItem=!1;optionPlaceholder="";optionLabel="";optionChange=new t.bkB;optionReload=()=>this.onActionButtonReload();set optionSelectForce(e){this.onActionSelectForce(e)}ngOnInit(){this.loadOptions(),(!this.optionLabel||0==this.optionLabel.length&&this.optionPlaceholder?.length>0)&&(this.optionLabel=this.optionPlaceholder)}loadOptions(){this.filteredOptions=this.formControl.valueChanges.pipe((0,E.Z)(""),(0,M.B)(1500),(0,g.F)(),(0,S.n)(e=>this.DataGetAll("string"==typeof e||"number"==typeof e?e:"")))}displayFn(e){return e?e.title:void 0}displayOption(e){return e?e.title:void 0}DataGetAll(e){var o=this;return(0,h.A)(function*(){const l=new i.O2i;if(l.rowPerPage=20,l.accessLoad=!0,e&&e.length>0){let n=new i.ycK;n=new i.ycK,n.propertyName="username",n.value=e,n.searchType=i._GO.Contains,n.clauseType=i.jL_.Or,l.filters.push(n),n=new i.ycK,n.propertyName="name",n.value=e,n.searchType=i._GO.Contains,n.clauseType=i.jL_.Or,l.filters.push(n),n=new i.ycK,n.propertyName="email",n.value=e,n.searchType=i._GO.Contains,n.clauseType=i.jL_.Or,l.filters.push(n),n=new i.ycK,n.propertyName="lastname",n.value=e,n.searchType=i._GO.Contains,n.clauseType=i.jL_.Or,l.filters.push(n),e&&"number"==typeof+e&&+e>0&&(n=new i.ycK,n.propertyName="Id",n.value=e,n.searchType=i._GO.Equal,n.clauseType=i.jL_.Or,l.filters.push(n))}const r=o.constructor.name+"main";return o.translate.get("MESSAGE.Receiving_information").subscribe(n=>{o.publicHelper.processService.processStart(r,n,o.constructor.name)}),yield(0,f._)(o.categoryService.ServiceGetAll(l)).then(n=>(o.dataModelResult=n,o.optionSelectFirstItem&&(!o.dataModelSelect||!o.dataModelSelect.id||o.dataModelSelect.id<=0)&&o.dataModelResult.listItems.length>0&&(o.optionSelectFirstItem=!1,setTimeout(()=>{o.formControl.setValue(o.dataModelResult.listItems[0])},1e3),o.onActionSelect(o.dataModelResult.listItems[0])),o.publicHelper.processService.processStop(r),n.listItems))})()}onActionSelect(e){this.optionDisabled||(this.dataModelSelect=e,this.optionChange.emit(this.dataModelSelect))}onActionSelectClear(){this.optionDisabled||(this.dataModelSelect=null,this.formControl.setValue(null),this.optionChange.emit(null))}push(e){return this.filteredOptions.pipe((0,C.T)(o=>(o.find(l=>l.id===e.id)||o.push(e),o)))}onActionSelectForce(e){if("number"==typeof e&&e>0){if(this.dataModelSelect&&this.dataModelSelect.id===e)return;if(this.dataModelResult&&this.dataModelResult.listItems&&this.dataModelResult.listItems.find(o=>o.id===e)){const o=this.dataModelResult.listItems.find(l=>l.id===e);return this.dataModelSelect=o,void this.formControl.setValue(o)}this.categoryService.ServiceGetOneById(e).subscribe({next:o=>{o.isSuccess&&(this.filteredOptions=this.push(o.item),this.dataModelSelect=o.item,this.formControl.setValue(o.item),this.optionChange.emit(o.item))}})}else{if(typeof e==typeof i.fNb)return this.filteredOptions=this.push(e),this.dataModelSelect=e,void this.formControl.setValue(e);this.formControl.setValue(null)}}onActionButtonReload(){this.dataModelSelect=new i.fNb,this.loadOptions()}static \u0275fac=function(o){return new(o||s)(t.rXU(i.i9D),t.rXU(t.gRc),t.rXU(D.A),t.rXU(y.c$),t.rXU(i.jmw))};static \u0275cmp=t.VBU({type:s,selectors:[["app-cms-usergroup-selector"]],inputs:{optionLoading:"optionLoading",optionDisabled:"optionDisabled",optionSelectFirstItem:"optionSelectFirstItem",optionPlaceholder:"optionPlaceholder",optionLabel:"optionLabel",optionReload:"optionReload",optionSelectForce:"optionSelectForce"},outputs:{optionChange:"optionChange"},ngContentSelectors:T,decls:10,vars:13,consts:[["matauto","matAutocomplete"],[1,"input-style","has-borders","no-icon","input-style-always-active","validate-field","mb-4","progressOverlayContainer"],[3,"optionsInfoAreaId"],["class","color-highlight",3,"for",4,"ngIf"],["type","text","matInput","",1,"form-control","validate-name",3,"placeholder","formControl","matAutocomplete","id"],[3,"optionSelected","displayWith"],["class","color-highlight",3,"value","disabled",4,"ngFor","ngForOf"],["matSuffix","","matSuffix","","mat-icon-button","","aria-label","Clear",3,"click",4,"ngIf"],[1,"color-highlight",3,"for"],[1,"color-highlight",3,"value","disabled"],["matSuffix","","matSuffix","","mat-icon-button","","aria-label","Clear",3,"click"]],template:function(o,l){if(1&o){const r=t.RV6();t.NAR(),t.j41(0,"div",1),t.nrm(1,"app-progress-spinner",2),t.DNE(2,L,2,3,"label",3),t.nrm(3,"input",4),t.j41(4,"mat-autocomplete",5,0),t.bIt("optionSelected",function(d){return t.eBV(r),t.Njj(l.onActionSelect(d.option.value))}),t.DNE(6,b,3,3,"mat-option",6),t.nI1(7,"async"),t.k0s(),t.DNE(8,U,2,0,"mat-icon",7),t.SdG(9),t.k0s()}if(2&o){const r=t.sdS(5);t.R7$(),t.Y8G("optionsInfoAreaId",l.constructor.name),t.R7$(),t.Y8G("ngIf",(null==l.optionLabel?null:l.optionLabel.length)>0),t.R7$(),t.FS9("placeholder",l.optionPlaceholder),t.Mz_("id","app-cms-site-selector-",l.id,""),t.Y8G("formControl",l.formControl)("matAutocomplete",r),t.BMQ("disabled",!!l.optionDisabled||null),t.R7$(),t.Y8G("displayWith",l.displayFn),t.R7$(2),t.Y8G("ngForOf",t.bMT(7,11,l.filteredOptions)),t.R7$(2),t.Y8G("ngIf",null==l.dataModelSelect?null:l.dataModelSelect.id)}},dependencies:[p.Sq,p.bT,c.me,c.BC,c.l_,u.$3,R.wT,u.pN,I.yw,v.An,P.fg,A._,p.Jj],encapsulation:2})}return s})()}}]);