"use strict";(self.webpackChunkntk_cms_web=self.webpackChunkntk_cms_web||[]).push([[9264,4121],{3673:(A,E,a)=>{a.d(E,{G:()=>r});var d=a(8239),t=a(8692),P=a(4511),n=a(4537),y=a(4032),p=a(2607);let r=(()=>{class g{elRef;renderer;publicHelper;cmsToastrService;cdr;document;row;contentService;constructor(o,s,h,T,I,R){this.elRef=o,this.renderer=s,this.publicHelper=h,this.cmsToastrService=T,this.cdr=I,this.document=R,this.DataEnumRecordStatus()}DataEnumRecordStatus(){var o=this;return(0,d.Z)(function*(){(yield o.publicHelper.getEnumRecordStatus()).listItems.forEach(h=>{const T=document.createElement("option");T.innerHTML=" "+h.title+' <i Class="'+o.iconStatus(h.value)+'"></i>',T.value=h.value.toString(),o.elRef.nativeElement.add(T)}),o.elRef.nativeElement.options.length>0&&o.row&&o.row.recordStatus&&o.renderer.setProperty(o.elRef.nativeElement,"value",o.row.recordStatus)})()}onChange(){const o=this.elRef.nativeElement,s=o.value;this.addLoader(o),this.contentService.setAccessDataType(P.dR.Editor),this.contentService.ServiceSetStatus(this.row.id,s).subscribe(h=>{h.isSuccess?(this.handleSuccessCase(o),this.cmsToastrService.typeSuccessSetStatus(h.errorMessage),this.row.recordStatus=0|s,this.cdr.markForCheck()):(this.renderer.setProperty(this.elRef.nativeElement,"value",this.row.recordStatus),this.cmsToastrService.typeErrorSetStatus(h.errorMessage),this.handleErrorCase(o))},h=>{this.renderer.setProperty(this.elRef.nativeElement,"value",this.row.recordStatus),this.cmsToastrService.typeError(h),this.handleErrorCase(o)})}handleSuccessCase(o){this.removeBackground(o),this.addSuccess(o),setTimeout(()=>{this.removeBackground(o)},1e3)}handleErrorCase(o){this.removeBackground(o);const s=this.document.createElement("img");s.style.width="20px",s.src="https://www.seekpng.com/png/detail/334-3345964_error-icon-download-attention-symbol.png";const h=this.renderer.parentNode(this.elRef.nativeElement);this.renderer.appendChild(h,s),setTimeout(()=>{this.renderer.removeChild(h,s)},1e3)}addLoader(o){this.addBackground(o,"https://replit.com/public/images/loading_dots.gif",20)}addSuccess(o){this.addBackground(o,"https://i.pinimg.com/originals/7b/dd/1b/7bdd1bc7db7fd48025d4e39a0e2f0fd8.jpg",20)}addBackground(o,s,h){o.style.background=`#fff url("${s}") no-repeat right 20px center`,o.style.backgroundSize=`${h}px`}removeBackground(o){o.style.background="none"}iconStatus(o){let s="";switch(o){case 1:default:s="fa fa-check";break;case 2:s="fa fa-eye-slash";break;case 3:s="fa fa-times";break;case 4:s="fa fa-hourglass-half";break;case 5:s="far fa-thumbs-down";break;case 6:s="fa fa-archive"}return s}static \u0275fac=function(s){return new(s||g)(n.Y36(n.SBq),n.Y36(n.Qsj),n.Y36(y.i),n.Y36(p.e),n.Y36(n.sBO),n.Y36(t.K0))};static \u0275dir=n.lG2({type:g,selectors:[["","cmsRecordStatusSelfSave",""]],hostBindings:function(s,h){1&s&&n.NdJ("change",function(){return h.onChange()})},inputs:{row:"row",contentService:"contentService"}})}return g})()},7548:(A,E,a)=>{a.d(E,{o:()=>P});var d=a(4537),t=a(707);let P=(()=>{class n{stepper;constructor(p){this.stepper=p}selectionChanged(){const p=this.stepper._getStepLabelId(this.stepper.selectedIndex),C=document.getElementById(p);C&&C.scrollIntoView({block:"start",inline:"nearest",behavior:"smooth"})}static \u0275fac=function(C){return new(C||n)(d.Y36(t.Vq))};static \u0275dir=d.lG2({type:n,selectors:[["mat-vertical-stepper"]],hostBindings:function(C,u){1&C&&d.NdJ("animationDone",function(){return u.selectionChanged()})}})}return n})()},532:(A,E,a)=>{a.d(E,{t:()=>d});var d=(()=>{return(t=d||(d={}))[t.none=0]="none",t[t.add=1]="add",t[t.edit=2]="edit",t[t.delete=3]="delete",t[t.list=4]="list",t[t.select=5]="select",d;var t})()},1447:(A,E,a)=>{a.d(E,{t:()=>d});class d{lat;lon}},5897:(A,E,a)=>{a.d(E,{Y:()=>P});var d=a(4537),t=a(5998);let P=(()=>{class n{sanitizer;constructor(p){this.sanitizer=p}transform(p){return"cms-RecordStatusEnum-cell-"+p}static \u0275fac=function(C){return new(C||n)(d.Y36(t.H7,16))};static \u0275pipe=d.Yjl({name:"statusCellClass",type:n,pure:!0})}return n})()},6639:(A,E,a)=>{a.d(E,{G:()=>P});var d=a(4537),t=a(5998);let P=(()=>{class n{sanitizer;constructor(p){this.sanitizer=p}transform(p,C=!1){let u="";switch(p){case 1:default:u="fa fa-check";break;case 2:u="fa fa-times";break;case 3:u="fa fa-trash";break;case 4:u="fa fa-hourglass-half";break;case 5:u="far fa-thumbs-down";break;case 6:u="fa fa-archive"}return u}static \u0275fac=function(C){return new(C||n)(d.Y36(t.H7,16))};static \u0275pipe=d.Yjl({name:"statusIconClass",type:n,pure:!0})}return n})()},3914:(A,E,a)=>{a.d(E,{s:()=>y});var d=a(4536),t=a(4537);let P=(()=>{class p{dialogRef;data;static nextId=0;id=++p.nextId;title;message;btnOkText;btnCancelText;constructor(u,O){this.dialogRef=u,this.data=O}ngOnInit(){}onDismiss(){this.dialogRef.close(!1)}onConfirm(){this.dialogRef.close(!0)}static \u0275fac=function(O){return new(O||p)(t.Y36(d.so),t.Y36(d.WI))};static \u0275cmp=t.Xpm({type:p,selectors:[["app-confirmation-dialog"]],inputs:{title:"title",message:"message",btnOkText:"btnOkText",btnCancelText:"btnCancelText"},decls:9,vars:4,consts:[["mat-dialog-title",""],["mat-dialog-content",""],[3,"innerHTML"],["mat-dialog-actions",""],["mat-button","",3,"click"],["mat-raised-button","","color","primary",3,"click"]],template:function(O,r){1&O&&(t.TgZ(0,"h1",0),t._uU(1),t.qZA(),t.TgZ(2,"div",1),t._UZ(3,"p",2),t.qZA(),t.TgZ(4,"div",3)(5,"button",4),t.NdJ("click",function(){return r.onDismiss()}),t._uU(6),t.qZA(),t.TgZ(7,"button",5),t.NdJ("click",function(){return r.onConfirm()}),t._uU(8),t.qZA()()),2&O&&(t.xp6(1),t.hij(" ",r.title,"\n"),t.xp6(2),t.Q6J("innerHTML",r.message,t.oJD),t.xp6(3),t.Oqu(r.btnCancelText),t.xp6(2),t.Oqu(r.btnOkText))},encapsulation:2})}return p})();class n{title;message;constructor(C,u){this.title=C,this.message=u}btnOkText="OK";btnCancelText="Cancel";dialogSize="sm"}let y=(()=>{class p{dialog;constructor(u){this.dialog=u}confirm(u,O,r="OK",g="Cancel",D="sm"){const o=new n(u,O);return o.btnOkText=r,o.btnCancelText=g,o.dialogSize=D,this.dialog.open(P,{data:o}).afterClosed().toPromise().then(h=>Promise.resolve(h))}static \u0275fac=function(O){return new(O||p)(t.LFG(d.uw))};static \u0275prov=t.Yz7({token:p,factory:p.\u0275fac})}return p})()},7904:(A,E,a)=>{a.d(E,{L:()=>D});var d=a(656),t=a(4537),P=a(8692);function n(o,s){1&o&&(t.TgZ(0,"div",8)(1,"p",9),t.Hsn(2,1),t.qZA()())}function y(o,s){1&o&&t._UZ(0,"div",10)}function p(o,s){1&o&&(t.TgZ(0,"div",11),t.Hsn(1,2),t.qZA())}function C(o,s){1&o&&t._UZ(0,"div",12)}function u(o,s){1&o&&t._UZ(0,"div",10)}function O(o,s){1&o&&(t.TgZ(0,"div",6)(1,"p",13),t.Hsn(2,3),t.qZA()())}const r=[[["","cms-tree-body",""]],[["","cms-tree-header",""]],[["","cms-tree-action",""]],[["","cms-tree-footer",""]]],g=["[cms-tree-body]","[cms-tree-header]","[cms-tree-action]","[cms-tree-footer]"];let D=(()=>{class o{static nextId=0;id=++o.nextId;optionHeaderDisplay=!0;optionActionMainDisplay=!0;optionFooterDisplay=!0;set optionLoading(h){this.loading=h}loading=new d.O;constructor(){}ngOnInit(){}static \u0275fac=function(T){return new(T||o)};static \u0275cmp=t.Xpm({type:o,selectors:[["app-cms-html-tree"]],inputs:{optionHeaderDisplay:"optionHeaderDisplay",optionActionMainDisplay:"optionActionMainDisplay",optionFooterDisplay:"optionFooterDisplay",optionLoading:"optionLoading"},ngContentSelectors:g,decls:10,vars:6,consts:[[1,"card","card-style"],[1,"row","justify-content-center","tree-parent"],["class","font-14 opacity-50",4,"ngIf"],["class","divider mb-1",4,"ngIf"],["class","col-12 pe-0 tree-child-hidden",4,"ngIf"],["class","divider mb-1 tree-child-hidden",4,"ngIf"],[1,"col-12","pe-0"],["class","col-12 pe-0",4,"ngIf"],[1,"font-14","opacity-50"],[1,"text-center","mb-2","mt-2","color-highlight","font-600"],[1,"divider","mb-1"],[1,"col-12","pe-0","tree-child-hidden"],[1,"divider","mb-1","tree-child-hidden"],[1,"text-center"]],template:function(T,I){1&T&&(t.F$t(r),t.TgZ(0,"div",0)(1,"div",1),t.YNc(2,n,3,0,"div",2),t.YNc(3,y,1,0,"div",3),t.YNc(4,p,2,0,"div",4),t.YNc(5,C,1,0,"div",5),t.TgZ(6,"div",6),t.Hsn(7),t.qZA(),t.YNc(8,u,1,0,"div",3),t.YNc(9,O,3,0,"div",7),t.qZA()()),2&T&&(t.xp6(2),t.Q6J("ngIf",I.optionHeaderDisplay),t.xp6(1),t.Q6J("ngIf",I.optionHeaderDisplay),t.xp6(1),t.Q6J("ngIf",I.optionActionMainDisplay),t.xp6(1),t.Q6J("ngIf",I.optionActionMainDisplay),t.xp6(3),t.Q6J("ngIf",I.optionFooterDisplay),t.xp6(1),t.Q6J("ngIf",I.optionFooterDisplay))},dependencies:[P.O5],encapsulation:2})}return o})()},6609:(A,E,a)=>{a.d(E,{D:()=>M});var d=a(8239),t=a(4537),P=a(92),n=a(4511),y=a(7445),p=a(1927),C=a(3151),u=a(2147),O=a(1528),r=a(7969),g=a(656),D=a(6707),o=a(8692),s=a(1637),h=a(1379),T=a(8659),I=a(3331),R=a(9665),K=a(5738),B=a(1418);function S(m,U){if(1&m&&(t.TgZ(0,"label",8),t._uU(1),t.qZA()),2&m){const e=t.oxw();t.MGl("for","app-cms-site-selector-",e.id,""),t.xp6(1),t.Oqu(e.optionLabel)}}function b(m,U){if(1&m&&(t._UZ(0,"img",11),t.ALo(1,"cmsthumbnail")),2&m){const e=t.oxw().$implicit;t.s9C("src",t.lcZ(1,1,e.linkImageIdSrc),t.LSH)}}function c(m,U){if(1&m&&(t.TgZ(0,"mat-option",9),t.YNc(1,b,2,3,"img",10),t.TgZ(2,"span"),t._uU(3),t.qZA()()),2&m){const e=U.$implicit,l=t.oxw();t.Q6J("value",e)("disabled",l.optionDisabled),t.xp6(1),t.Q6J("ngIf",e.linkImageIdSrc),t.xp6(2),t.Oqu(l.displayOption(e))}}function _(m,U){if(1&m){const e=t.EpF();t.TgZ(0,"mat-icon",12),t.NdJ("click",function(){t.CHM(e);const f=t.oxw();return t.KtG(f.onActionSelectClear())}),t._uU(1,"close"),t.qZA()}}const i=["*"];let M=(()=>{class m{coreEnumService;translate;cdr;categoryService;static nextId=0;id=++m.nextId;constructor(e,l,f,L){this.coreEnumService=e,this.translate=l,this.cdr=f,this.categoryService=L,this.loading.cdr=this.cdr,this.translate.get("MESSAGE.Receiving_information").subscribe(v=>{this.loading.message=v})}dataModelResult=new n.y$4;dataModelSelect=new n.Dp$;formControl=new P.NI;filteredOptions;optionDisabled=!1;optionSelectFirstItem=!1;optionPlaceholder="";optionLabel="";optionChange=new t.vpe;optionReload=()=>this.onActionReload();set optionSelectForce(e){this.onActionSelectForce(e)}loading=new g.O;get optionLoading(){return this.loading}set optionLoading(e){this.loading=e}ngOnInit(){this.loadOptions(),(!this.optionLabel||0==this.optionLabel.length&&this.optionPlaceholder?.length>0)&&(this.optionLabel=this.optionPlaceholder)}loadOptions(){this.filteredOptions=this.formControl.valueChanges.pipe((0,p.O)(""),(0,C.b)(1500),(0,u.x)(),(0,O.w)(e=>this.DataGetAll("string"==typeof e||"number"==typeof e?e:"")))}displayFn(e){return e&&e.virtual_Parent&&e.virtual_Parent.title.length>0&&e.virtual_Parent.virtual_Parent&&e.virtual_Parent.virtual_Parent.title.length>0&&e.virtual_Parent.virtual_Parent.virtual_Parent&&e.virtual_Parent.virtual_Parent.virtual_Parent.title.length>0?e.virtual_Parent.virtual_Parent.virtual_Parent.titleML+" > "+e.virtual_Parent.virtual_Parent.titleML+" > "+e.virtual_Parent.titleML+" > "+e.titleML:e&&e.virtual_Parent&&e.virtual_Parent.title.length>0&&e.virtual_Parent.virtual_Parent&&e.virtual_Parent.virtual_Parent.title.length>0?e.virtual_Parent.virtual_Parent.titleML+" > "+e.virtual_Parent.titleML+" > "+e.titleML:e&&e.virtual_Parent&&e.virtual_Parent.title.length>0?e.virtual_Parent.titleML+" > "+e.titleML:e?e.titleML:void 0}displayOption(e){return e&&e.virtual_Parent&&e.virtual_Parent.title.length>0&&e.virtual_Parent.virtual_Parent&&e.virtual_Parent.virtual_Parent.title.length>0&&e.virtual_Parent.virtual_Parent.virtual_Parent&&e.virtual_Parent.virtual_Parent.virtual_Parent.title.length>0?e.virtual_Parent.virtual_Parent.virtual_Parent.titleML+" > "+e.virtual_Parent.virtual_Parent.titleML+" > "+e.virtual_Parent.titleML+" > "+e.titleML:e&&e.virtual_Parent&&e.virtual_Parent.title.length>0&&e.virtual_Parent.virtual_Parent&&e.virtual_Parent.virtual_Parent.title.length>0?e.virtual_Parent.virtual_Parent.titleML+" > "+e.virtual_Parent.titleML+" > "+e.titleML:e&&e.virtual_Parent&&e.virtual_Parent.title.length>0?e.virtual_Parent.titleML+" > "+e.titleML:e?e.titleML:void 0}DataGetAll(e){var l=this;return(0,d.Z)(function*(){const f=new n.Hay;if(f.rowPerPage=20,f.accessLoad=!0,e&&e.length>0){let v=new n.AO3;v=new n.AO3,v.propertyName="Symbol",v.value=e,v.searchType=n.J6G.Contains,v.clauseType=n.ppe.Or,f.filters.push(v),v=new n.AO3,v.propertyName="Title",v.value=e,v.searchType=n.J6G.Contains,v.clauseType=n.ppe.Or,f.filters.push(v),e&&"number"==typeof+e&&+e>0&&(v=new n.AO3,v.propertyName="Id",v.value=e,v.searchType=n.J6G.Equal,v.clauseType=n.ppe.Or,f.filters.push(v))}const L=l.constructor.name+"main";return l.loading.Start(L),yield(0,y.z)(l.categoryService.ServiceGetAll(f)).then(v=>(l.dataModelResult=v,l.optionSelectFirstItem&&(!l.dataModelSelect||!l.dataModelSelect.id||l.dataModelSelect.id<=0)&&l.dataModelResult.listItems.length>0&&(l.optionSelectFirstItem=!1,setTimeout(()=>{l.formControl.setValue(l.dataModelResult.listItems[0])},1e3),l.onActionSelect(l.dataModelResult.listItems[0])),l.loading.Stop(L),v.listItems))})()}onActionSelect(e){this.optionDisabled||(this.dataModelSelect=e,this.optionChange.emit(this.dataModelSelect))}onActionSelectClear(){this.optionDisabled||(this.dataModelSelect=null,this.formControl.setValue(null),this.optionChange.emit(null))}push(e){return this.filteredOptions.pipe((0,r.U)(l=>(l.find(f=>f.id===e.id)||l.push(e),l)))}onActionSelectForce(e){if("number"==typeof e&&e>0){if(this.dataModelSelect&&this.dataModelSelect.id===e)return;if(this.dataModelResult&&this.dataModelResult.listItems&&this.dataModelResult.listItems.find(l=>l.id===e)){const l=this.dataModelResult.listItems.find(f=>f.id===e);return this.dataModelSelect=l,void this.formControl.setValue(l)}this.categoryService.ServiceGetOneIncludeParent(e).subscribe(l=>{l.isSuccess&&(this.filteredOptions=this.push(l.item),this.dataModelSelect=l.item,this.formControl.setValue(l.item),this.optionChange.emit(l.item))})}else{if(typeof e==typeof n.Dp$)return this.filteredOptions=this.push(e),this.dataModelSelect=e,void this.formControl.setValue(e);this.formControl.setValue(null)}}onActionReload(){this.dataModelSelect=new n.Dp$,this.loadOptions()}static \u0275fac=function(l){return new(l||m)(t.Y36(n.FLW),t.Y36(D.sK),t.Y36(t.sBO),t.Y36(n.XRW))};static \u0275cmp=t.Xpm({type:m,selectors:[["app-cms-location-selector"]],inputs:{optionDisabled:"optionDisabled",optionSelectFirstItem:"optionSelectFirstItem",optionPlaceholder:"optionPlaceholder",optionLabel:"optionLabel",optionReload:"optionReload",optionSelectForce:"optionSelectForce",optionLoading:"optionLoading"},outputs:{optionChange:"optionChange"},ngContentSelectors:i,decls:10,vars:12,consts:[[1,"input-style","has-borders","no-icon","input-style-always-active","validate-field","mb-4"],[3,"options"],["class","color-highlight",3,"for",4,"ngIf"],["type","text","matInput","",1,"form-control","validate-name",3,"placeholder","formControl","matAutocomplete","id"],[3,"displayWith","optionSelected"],["matauto","matAutocomplete"],[3,"value","disabled",4,"ngFor","ngForOf"],["matSuffix","","matSuffix","","mat-icon-button","","aria-label","Clear",3,"click",4,"ngIf"],[1,"color-highlight",3,"for"],[3,"value","disabled"],["style","vertical-align:middle;","class","ntk-hover-zoom","aria-hidden","","height","25","width","25",3,"src",4,"ngIf"],["aria-hidden","","height","25","width","25",1,"ntk-hover-zoom",2,"vertical-align","middle",3,"src"],["matSuffix","","matSuffix","","mat-icon-button","","aria-label","Clear",3,"click"]],template:function(l,f){if(1&l&&(t.F$t(),t.TgZ(0,"div",0),t._UZ(1,"app-progress-spinner",1),t.YNc(2,S,2,2,"label",2),t._UZ(3,"input",3),t.TgZ(4,"mat-autocomplete",4,5),t.NdJ("optionSelected",function(v){return f.onActionSelect(v.option.value)}),t.YNc(6,c,4,4,"mat-option",6),t.ALo(7,"async"),t.qZA(),t.YNc(8,_,2,0,"mat-icon",7),t.Hsn(9),t.qZA()),2&l){const L=t.MAs(5);t.xp6(1),t.Q6J("options",f.loading),t.xp6(1),t.Q6J("ngIf",(null==f.optionLabel?null:f.optionLabel.length)>0),t.xp6(1),t.s9C("placeholder",f.optionPlaceholder),t.MGl("id","app-cms-site-selector-",f.id,""),t.Q6J("formControl",f.formControl)("matAutocomplete",L),t.uIk("disabled",!!f.optionDisabled||null),t.xp6(1),t.Q6J("displayWith",f.displayFn),t.xp6(2),t.Q6J("ngForOf",t.lcZ(7,10,f.filteredOptions)),t.xp6(2),t.Q6J("ngIf",null==f.dataModelSelect?null:f.dataModelSelect.id)}},dependencies:[o.sg,o.O5,P.Fj,P.JJ,P.oH,s.XC,h.ey,s.ZL,T.R9,I.Hw,R.Nt,K.O,o.Ov,B.v],encapsulation:2})}return m})()},7407:(A,E,a)=>{a.d(E,{r:()=>C});var d=a(4537),t=a(4216),n=a(2340),y=a(2607),p=a(7128);let C=(()=>{class u{cmsToastrService;static nextId=0;id=++u.nextId;map$=new d.vpe;zoom$=new d.vpe;options={layers:[(0,t.tileLayer)(n.N.leafletUrl,{opacity:.7,maxZoom:19,detectRetina:!0})],zoom:16,center:[32.684985,51.6359425]};set optonCenter(r){this.map&&r&&r.lat&&r.lon&&0!==r.lat&&0!==r.lon&&this.map.setView(new t.LatLng(r.lat,r.lon),this.zoom)}set optionCurrentPoint(r){this.onActionCurrentPoint(r)}map;zoom;destroy=!1;constructor(r){this.cmsToastrService=r}ngOnInit(){const o=t.icon({iconRetinaUrl:"assets/leaflet/marker-icon-2x.png",iconUrl:"assets/leaflet/marker-icon.png",shadowUrl:"assets/leaflet/marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]});t.Marker.prototype.options.icon=o}ngAfterViewInit(){}ngOnDestroy(){this.map&&(this.map.clearAllEventListeners(),this.destroy=!0)}onMapReady(r){setTimeout(()=>{this.map&&!this.destroy&&r.invalidateSize()},500),this.map=r,this.map$.emit(r),this.zoom=r.getZoom(),this.zoom$.emit(this.zoom)}onMapZoomEnd(r){this.zoom=r.target.getZoom(),this.zoom$.emit(this.zoom)}onActionCurrentPoint(r=!0){this.getPosition().then(g=>{this.map.setView(new t.LatLng(g.lat,g.lon),this.zoom)})}getPosition(){return new Promise((r,g)=>{navigator.geolocation.getCurrentPosition(D=>{r({lon:D.coords.longitude,lat:D.coords.latitude})},D=>{this.cmsToastrService.typeErrorGetPosition()})})}static \u0275fac=function(g){return new(g||u)(d.Y36(y.e))};static \u0275cmp=d.Xpm({type:u,selectors:[["app-cms-map"]],inputs:{options:"options",optonCenter:"optonCenter",optionCurrentPoint:"optionCurrentPoint"},outputs:{map$:"map$",zoom$:"zoom$"},decls:1,vars:1,consts:[["leaflet","",1,"map-container",3,"leafletOptions","leafletMapReady","leafletMapZoomEnd"]],template:function(g,D){1&g&&(d.TgZ(0,"div",0),d.NdJ("leafletMapReady",function(s){return D.onMapReady(s)})("leafletMapZoomEnd",function(s){return D.onMapZoomEnd(s)}),d.qZA()),2&g&&d.Q6J("leafletOptions",D.options)},dependencies:[p.je],styles:[".map-container[_ngcontent-%COMP%]{width:100%;height:300px}"]})}return u})()},9831:(A,E,a)=>{a.d(E,{u:()=>B});var d=a(5436),t=a(4537),P=a(92),n=a(4511),y=a(1927),p=a(3151),C=a(1528),u=a(7969),O=a(2607),r=a(8692),g=a(1637),D=a(1379),o=a(7084),s=a(8659),h=a(3331);const T=["tagInput"];function I(S,b){if(1&S){const c=t.EpF();t.TgZ(0,"mat-chip",9),t.NdJ("removed",function(){const M=t.CHM(c).$implicit,m=t.oxw();return t.KtG(m.remove(M))}),t._uU(1),t.TgZ(2,"button",10)(3,"mat-icon"),t._uU(4,"cancel"),t.qZA()()()}if(2&S){const c=b.$implicit;t.xp6(1),t.hij(" ",c.display," ")}}function R(S,b){if(1&S&&(t.TgZ(0,"mat-option",11),t._uU(1),t.qZA()),2&S){const c=b.$implicit;t.Q6J("value",c),t.xp6(1),t.hij(" ",c.display," ")}}let B=(()=>{class S{service;cmsToastrService;static nextId=0;id=++S.nextId;constructor(c,_){this.service=c,this.cmsToastrService=_,this.filteredOptions=this.tagCtrl.valueChanges.pipe((0,y.O)(null),(0,p.b)(400),(0,C.w)(i=>this.filter(i||"")))}optionDisabled=!1;tagInput;optionPlaceholder="+ Tag";optionLabel="";optionChange=new t.vpe;set optionSelectForce(c){this.onActionSelectForce(c)}tagDataModel=[];tagLastDataModel=[];selectForceStatus=!0;separatorKeysCodes=[d.K5];tagCtrl=new P.NI("");filteredOptions;addOnBlur=!0;ngOnInit(){(!this.optionLabel||0==this.optionLabel.length&&this.optionPlaceholder?.length>0)&&(this.optionLabel=this.optionPlaceholder)}filter(c){const _=new n.Hay;_.rowPerPage=20,_.accessLoad=!0;let i=new n.AO3;return i.propertyName="Title",i.value=c,i.searchType=n.J6G.Contains,i.clauseType=n.ppe.Or,_.filters.push(i),c&&"number"==typeof+c&&+c>0&&(i=new n.AO3,i.propertyName="Id",i.value=c,i.searchType=n.J6G.Equal,i.clauseType=n.ppe.Or,_.filters.push(i)),this.service.ServiceGetAll(_).pipe((0,u.U)(M=>(this.tagLastDataModel=M.listItems.map(m=>({display:m.title,value:m.id})),this.tagLastDataModel)))}checkIndex(c){let _=0,i=-1;return this.tagDataModel.forEach(M=>{M.value==c&&(i=_),_++}),i}add(c){let _;c.value&&this.tagLastDataModel.forEach(i=>{(i.display==c.value||i.value+""==c.value)&&(_=i)}),_&&this.checkIndex(_.value)<0&&(this.tagDataModel.push(_),this.onActionChange()),c.chipInput.clear(),this.tagCtrl.setValue(null)}remove(c){const _=this.checkIndex(c.value);_>=0&&(this.tagDataModel.splice(_,1),this.onActionChange())}selected(c){const _=c.option.value;this.checkIndex(_.value)<0&&this.tagDataModel.push(_),this.tagInput.nativeElement.value="",this.tagCtrl.setValue(null),this.onActionChange()}onActionChange(){const c=[];this.tagDataModel.forEach(_=>{c.findIndex(i=>i==_.value)<0&&c.push(_.value)}),this.selectForceStatus=!1,this.optionChange.emit(c)}onActionSelectForce(c){if(!this.selectForceStatus||!c||0===c.length)return;const _=new n.Hay;c.forEach(i=>{if(i>0){const M=new n.AO3;M.propertyName="Id",M.value=i,M.clauseType=n.ppe.Or,_.filters.push(M)}}),this.service.ServiceGetAll(_).pipe((0,u.U)(i=>{i.isSuccess?i.listItems.forEach(M=>{this.tagDataModel.findIndex(m=>m.value==M.id)<0&&this.tagDataModel.push({value:M.id,display:M.title})}):this.cmsToastrService.typeErrorGetAll(i.errorMessage)},i=>{this.cmsToastrService.typeErrorGetAll(i)})).toPromise()}static \u0275fac=function(_){return new(_||S)(t.Y36(n.dF2),t.Y36(O.e))};static \u0275cmp=t.Xpm({type:S,selectors:[["app-cms-tag-autocomplete"]],viewQuery:function(_,i){if(1&_&&t.Gf(T,5),2&_){let M;t.iGM(M=t.CRH())&&(i.tagInput=M.first)}},inputs:{optionDisabled:"optionDisabled",optionPlaceholder:"optionPlaceholder",optionLabel:"optionLabel",optionSelectForce:"optionSelectForce"},outputs:{optionChange:"optionChange"},decls:12,vars:12,consts:[["appearance","fill",2,"width","100%"],["aria-label","tag selection",3,"disabled"],["chipList",""],[3,"removed",4,"ngFor","ngForOf"],[3,"placeholder","matChipInputAddOnBlur","formControl","matAutocomplete","matChipInputFor","matChipInputSeparatorKeyCodes","matChipInputTokenEnd"],["tagInput",""],[3,"optionSelected"],["auto","matAutocomplete"],[3,"value",4,"ngFor","ngForOf"],[3,"removed"],["matChipRemove","",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-gray"],[3,"value"]],template:function(_,i){if(1&_&&(t.TgZ(0,"mat-form-field",0)(1,"mat-label"),t._uU(2),t.qZA(),t.TgZ(3,"mat-chip-grid",1,2),t.YNc(5,I,5,1,"mat-chip",3),t.TgZ(6,"input",4,5),t.NdJ("matChipInputTokenEnd",function(m){return i.add(m)}),t.qZA()(),t.TgZ(8,"mat-autocomplete",6,7),t.NdJ("optionSelected",function(m){return i.selected(m)}),t.YNc(10,R,2,2,"mat-option",8),t.ALo(11,"async"),t.qZA()()),2&_){const M=t.MAs(4),m=t.MAs(9);t.xp6(2),t.Oqu(i.optionLabel),t.xp6(1),t.Q6J("disabled",i.optionDisabled),t.xp6(2),t.Q6J("ngForOf",i.tagDataModel),t.xp6(1),t.Q6J("placeholder"," + "+i.optionPlaceholder)("matChipInputAddOnBlur",i.addOnBlur)("formControl",i.tagCtrl)("matAutocomplete",m)("matChipInputFor",M)("matChipInputSeparatorKeyCodes",i.separatorKeysCodes),t.xp6(4),t.Q6J("ngForOf",t.lcZ(11,10,i.filteredOptions))}},dependencies:[r.sg,P.Fj,P.JJ,P.oH,g.XC,D.ey,g.ZL,o.HS,o.RA,o.oH,o.qH,s.KE,s.hX,h.Hw,r.Ov],encapsulation:2})}return S})()}}]);