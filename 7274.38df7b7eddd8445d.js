"use strict";(self.webpackChunkntk_cms_web=self.webpackChunkntk_cms_web||[]).push([[7274],{8918:(D,w,a)=>{a.d(w,{dj:()=>e});class e{childMethods;parentMethods;data=new t;constructor(){this.data=new t}}class t{show=!1;select;defaultQuery;access}},7147:(D,w,a)=>{a.d(w,{TV:()=>e});class e{childMethods;parentMethods;data=new t;constructor(){this.data=new t}}class t{show=!1}},223:(D,w,a)=>{a.d(w,{R:()=>y});var e=a(4511),f=a(5237),h=a(9966),t=a(1435),o=a(3336),M=a(2340),I=a(6619),R=a(656),E=a(8918),Z=a(7147);class y{baseService;item;publicHelper;constructor(_,p,v){this.baseService=_,this.item=p,this.publicHelper=v,v.pageInfo.updateContentService(_)}tokenInfo=new e.OdC;fieldsInfo=new Map;loading=new R.O;optionsSearch=new E.dj;optionsStatist=new Z.TV;tableRowSelected;tableRowsSelected=[];dataModelResult=new e.y$4;onActionTableRowSelect(_){this.tableRowSelected=_,this.publicHelper.pageInfo.updateContentInfo(new I.D(_.id,_.title,_.viewContentHidden,"",_.urlViewContent)),_.expanded=!0}onActionTableRowMouseClick(_){this.tableRowSelected.id===_.id?(_.expanded=!1,this.onActionTableRowSelect(this.item),this.publicHelper.pageInfo.updateContentInfo(new I.D("","",!1,"",""))):(this.onActionTableRowSelect(_),_.expanded=!0)}onActionTableRowMouseEnter(_){M.N.cmsViewConfig.tableRowMouseEnter&&(_.expanded=!0)}onActionTableRowMouseLeave(_){M.N.cmsViewConfig.tableRowMouseEnter&&(!this.tableRowSelected||this.tableRowSelected.id!==_.id)&&(_.expanded=!1)}onActionbuttonMemo(){this.publicHelper.dialog.open(h.m,{height:"70%",panelClass:this.publicHelper.isMobile?"dialog-fullscreen":"dialog-min",enterAnimationDuration:M.N.cmsViewConfig.enterAnimationDuration,exitAnimationDuration:M.N.cmsViewConfig.exitAnimationDuration,data:{service:this.baseService}}).afterClosed().subscribe(v=>{})}onActionbuttonMemoRow(_=this.tableRowSelected){this.publicHelper.dialog.open(h.m,{height:"70%",panelClass:this.publicHelper.isMobile?"dialog-fullscreen":"dialog-min",enterAnimationDuration:M.N.cmsViewConfig.enterAnimationDuration,exitAnimationDuration:M.N.cmsViewConfig.exitAnimationDuration,data:{service:this.baseService,id:this.tableRowSelected?this.tableRowSelected.id:"",title:this.tableRowSelected?this.tableRowSelected.title:""}}).afterClosed().subscribe(S=>{})}onActionbuttonPin(_=this.tableRowSelected){this.publicHelper.dialog.open(t.I,{height:"70%",panelClass:this.publicHelper.isMobile?"dialog-fullscreen":"dialog-min",enterAnimationDuration:M.N.cmsViewConfig.enterAnimationDuration,exitAnimationDuration:M.N.cmsViewConfig.exitAnimationDuration,data:{service:this.baseService,id:this.tableRowSelected?this.tableRowSelected.id:"",title:this.tableRowSelected?this.tableRowSelected.title:""}}).afterClosed().subscribe(S=>{})}onActionbuttonTask(_=this.tableRowSelected){this.publicHelper.dialog.open(o.G,{height:"70%",panelClass:this.publicHelper.isMobile?"dialog-fullscreen":"dialog-min",enterAnimationDuration:M.N.cmsViewConfig.enterAnimationDuration,exitAnimationDuration:M.N.cmsViewConfig.exitAnimationDuration,data:{service:this.baseService,id:this.tableRowSelected?this.tableRowSelected.id:"",title:this.tableRowSelected?this.tableRowSelected.title:""}}).afterClosed().subscribe(S=>{})}onActionbuttonComment(_=this.tableRowSelected){this.publicHelper.dialog.open(f.X,{height:"70%",panelClass:this.publicHelper.isMobile?"dialog-fullscreen":"dialog-min",enterAnimationDuration:M.N.cmsViewConfig.enterAnimationDuration,exitAnimationDuration:M.N.cmsViewConfig.exitAnimationDuration,data:{service:this.baseService,id:this.tableRowSelected?this.tableRowSelected.id:"",title:this.tableRowSelected?this.tableRowSelected.title:""}}).afterClosed().subscribe(S=>{})}DataGetAccess(){const _=this.constructor.name+"main";this.loading.Start(_),this.baseService.ServiceViewModel().subscribe({next:p=>{p.isSuccess?this.fieldsInfo=this.publicHelper.fieldInfoConvertor(p.access):this.publicHelper.cmsToastrService.typeErrorGetAccess(p.errorMessage),this.loading.Stop(_)},error:p=>{this.publicHelper.cmsToastrService.typeErrorGetAccess(p),this.loading.Stop(_)}})}}},5814:(D,w,a)=>{a.d(w,{r:()=>g});var e=a(92),f=a(4536),h=a(4511),t=a(656),o=a(4537),M=a(2607),I=a(6707),R=a(727),E=a(8692),Z=a(8659);function y(l,c){if(1&l&&(o.TgZ(0,"option",18),o._uU(1),o.qZA()),2&l){const u=c.$implicit;o.Q6J("value",u.value),o.xp6(1),o.hij(" ",u.description," ")}}function x(l,c){1&l&&(o.TgZ(0,"mat-error"),o._uU(1," RecordStatus is "),o.TgZ(2,"strong"),o._uU(3),o.ALo(4,"translate"),o.qZA()()),2&l&&(o.xp6(3),o.Oqu(o.lcZ(4,1,"MESSAGE.required")))}function _(l,c){if(1&l&&(o.TgZ(0,"option",18),o._uU(1),o.qZA()),2&l){const u=c.$implicit;o.Q6J("value",u.value),o.xp6(1),o.hij(" ",u.description," ")}}function p(l,c){1&l&&(o.TgZ(0,"mat-error"),o._uU(1," RecordStatus is "),o.TgZ(2,"strong"),o._uU(3),o.ALo(4,"translate"),o.qZA()()),2&l&&(o.xp6(3),o.Oqu(o.lcZ(4,1,"MESSAGE.required")))}function v(l,c){if(1&l){const u=o.EpF();o.TgZ(0,"option",22),o.NdJ("onSelectionChange",function(){const s=o.CHM(u).$implicit,m=o.oxw(2);return o.KtG(m.onActionFileSelect(s))}),o._uU(1),o.qZA()}if(2&l){const u=c.$implicit;o.Q6J("value",u.id),o.xp6(1),o.hij(" ",u.title," ")}}function S(l,c){1&l&&(o.TgZ(0,"mat-error"),o._uU(1," RecordStatus is "),o.TgZ(2,"strong"),o._uU(3),o.ALo(4,"translate"),o.qZA()()),2&l&&(o.xp6(3),o.Oqu(o.lcZ(4,1,"MESSAGE.required")))}function T(l,c){if(1&l){const u=o.EpF();o.TgZ(0,"div",5)(1,"label",19),o._uU(2),o.ALo(3,"translate"),o.qZA(),o.TgZ(4,"select",20,7),o.NdJ("ngModelChange",function(d){o.CHM(u);const s=o.oxw();return o.KtG(s.dataModel.reportFormatFileId=d)}),o.YNc(6,v,2,2,"option",21),o.qZA(),o.TgZ(7,"em"),o._uU(8),o.ALo(9,"translate"),o.qZA(),o.YNc(10,S,5,3,"mat-error",9),o.qZA()}if(2&l){const u=o.MAs(5),i=o.oxw();o.xp6(2),o.Oqu(o.lcZ(3,5,"TITLE.Report_Format")),o.xp6(2),o.Q6J("ngModel",i.dataModel.reportFormatFileId),o.xp6(2),o.Q6J("ngForOf",i.dataModelReportFileResult.listItems),o.xp6(2),o.Oqu(o.lcZ(9,7,"TITLE.Report_Format_Select")),o.xp6(2),o.Q6J("ngIf",null==u.errors?null:u.errors.required)}}function O(l,c){if(1&l){const u=o.EpF();o.TgZ(0,"button",23),o.NdJ("click",function(){o.CHM(u);const d=o.oxw();return o.KtG(d.onOpenPage())}),o._UZ(1,"i",24),o._uU(2),o.ALo(3,"translate"),o.qZA()}2&l&&(o.xp6(2),o.hij(" ",o.lcZ(3,1,"TITLE.download_link")," "))}const n=function(l){return{direction:l}};let g=(()=>{class l{cmsToastrService;data;dialogRef;translate;tokenHelper;static nextId=0;id=++l.nextId;requestId="";requestTitle="";requestService;constructor(u,i,d,s,m){this.cmsToastrService=u,this.data=i,this.dialogRef=d,this.translate=s,this.tokenHelper=m,i?(i.service?this.requestService=i.service:this.dialogRef.close({dialogChangedDate:!0}),i.id?this.requestId=i.id:this.dialogRef.close({dialogChangedDate:!0}),i.title&&(this.requestTitle=i.title)):this.dialogRef.close({dialogChangedDate:!0});let r=new h.svN;r.value=1,r.key="Excel",r.description="Excel",this.fileTypeListItems.push(r),r=new h.svN,r.value=3,r.key="Json",r.description="Json",this.fileTypeListItems.push(r),r=new h.svN,r.value=4,r.key="Report",r.description="Report",this.fileTypeListItems.push(r),r=new h.svN,r.value=0,r.key="Now",r.description="Now",this.recieveMethodListItems.push(r),r=new h.svN,r.value=1,r.key="Email",r.description="Email",this.recieveMethodListItems.push(r),r=new h.svN,r.value=2,r.key="FileManager",r.description="FileManager",this.recieveMethodListItems.push(r),this.tokenHelper.getCurrentToken().then(b=>{this.tokenInfo=b})}dataModelReportFileResult=new h.y$4;dataModelSubmitResult=new h.vZ4;fileTypeListItems=new Array;recieveMethodListItems=new Array;loading=new t.O;get optionLoading(){return this.loading}set optionLoading(u){this.loading=u}formControl=new e.NI;tokenInfo=new h.OdC;filteredOptions;dataModelFileSelect=new h.wlu;dataModel=new h.w2X;EnumExportFileTypeReport=h.TtJ.Report;EnumExportReceiveMethodNow=h.$XY.Now;formInfo=new h.LEF;ngOnInit(){this.DataGetAll(),this.formInfo.formTitle=this.translate.instant("TITLE.EXPORTFILE")+" : "+this.requestTitle,this.dataModel.fileType=this.EnumExportFileTypeReport,this.dataModel.recieveMethod=this.EnumExportReceiveMethodNow}ngOnDestroy(){}DataGetAll(){const u=this.constructor.name+"main";this.loading.Start(u,this.translate.instant("MESSAGE.get_information_list")),this.dataModelSubmitResult=new h.vZ4,this.formInfo.formSubmitAllow=!1,this.requestService.ServiceReportFileGetAll().subscribe({next:i=>{this.dataModelReportFileResult=i,i.isSuccess?this.dataModelReportFileResult.listItems=this.dataModelReportFileResult.listItems.filter(d=>d.reportFileType==h.UO$.Item):this.cmsToastrService.typeErrorMessage(i.errorMessage),this.loading.Stop(u),this.formInfo.formSubmitAllow=!0},error:i=>{this.cmsToastrService.typeError(i),this.loading.Stop(u),this.formInfo.formSubmitAllow=!0}})}onActionFileSelect(u){this.dataModelFileSelect=u,this.dataModel.reportFormatFileId=u.id,this.dataModelSubmitResult=new h.vZ4}onFormSubmit(){this.dataModelSubmitResult=new h.vZ4;const u=this.constructor.name+"main";this.loading.Start(u,this.translate.instant("MESSAGE.get_information_list")),this.formInfo.formSubmitAllow=!1,this.requestService.ServiceExportFileGetOne(this.requestId,this.dataModel).subscribe({next:i=>{this.dataModelSubmitResult=i,i.isSuccess?this.formInfo.formAlert=this.translate.instant("MESSAGE.registration_completed_successfully"):(this.formInfo.formAlert=this.translate.instant("ERRORMESSAGE.MESSAGE.typeError"),this.formInfo.formError=i.errorMessage,this.cmsToastrService.typeErrorMessage(i.errorMessage)),this.loading.Stop(u),this.formInfo.formSubmitAllow=!0},error:i=>{this.cmsToastrService.typeError(i),this.loading.Stop(u),this.formInfo.formSubmitAllow=!0}})}onFormCancel(){this.dialogRef.close({dialogChangedDate:!1})}onOpenPage(){this.dataModelSubmitResult&&this.dataModelSubmitResult.isSuccess&&this.dataModelSubmitResult.linkFile.length>0&&window.open(this.dataModelSubmitResult.linkFile,"_blank")}static \u0275fac=function(i){return new(i||l)(o.Y36(M.e),o.Y36(f.WI),o.Y36(f.so),o.Y36(I.sK),o.Y36(R.v))};static \u0275cmp=o.Xpm({type:l,selectors:[["app-cms-export-entity"]],inputs:{optionLoading:"optionLoading"},decls:40,vars:25,consts:[[1,"card","card-style"],[1,"content","mb-0"],[1,"mb-0","color-highlight","font-600","font-12"],[3,"ngStyle","ngSubmit"],["vform","ngForm"],[1,"input-style","has-borders","input-style-always-active","validate-field","no-icon","mb-4"],["id","dataModel.fileType","name","dataModel.fileType",1,"form-control","validate-name",3,"ngModel","ngModelChange"],["RecordStatus","ngModel"],[3,"value",4,"ngFor","ngForOf"],[4,"ngIf"],["id","dataModel.recieveMethod","name","dataModel.recieveMethod",1,"form-control","validate-name",3,"ngModel","ngModelChange"],["class","input-style has-borders input-style-always-active validate-field no-icon mb-4",4,"ngIf"],[1,"form-actions"],["type","button",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-gray",3,"click"],[1,"ft-x"],["type","submit",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-green",2,"margin","1px",3,"disabled","click"],[1,"fa-solid","fa-print"],["type","button","class","btn font-13 font-600 btn-s m-1 rounded-s shadow-xl border-0 gradient-highlight","style","margin: 1px;",3,"click",4,"ngIf"],[3,"value"],["for","dataModel.reportFormatFileId",1,"color-highlight"],["id","dataModel.reportFormatFileId","name","dataModel.reportFormatFileId",1,"form-control","validate-name",3,"ngModel","ngModelChange"],[3,"value","onSelectionChange",4,"ngFor","ngForOf"],[3,"value","onSelectionChange"],["type","button",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-highlight",2,"margin","1px",3,"click"],[1,"fa-solid","fa-download"]],template:function(i,d){if(1&i&&(o.TgZ(0,"div",0)(1,"div",1)(2,"p",2),o._uU(3," \u062d\u0633\u0627\u0628 \u06a9\u0627\u0631\u0628\u0631\u06cc \u062e\u0648\u062f \u0631\u0627 \u0648\u06cc\u0631\u0627\u06cc\u0634 \u06a9\u0646\u06cc\u062f "),o.qZA(),o.TgZ(4,"h4"),o._uU(5,"\u0627\u0637\u0644\u0627\u0639\u0627\u062a"),o.qZA(),o.TgZ(6,"h4"),o._uU(7,"\u0627\u0637\u0644\u0627\u0639\u0627\u062a \u0627\u0648\u0644\u06cc\u0647"),o.qZA(),o.TgZ(8,"p"),o._uU(9," \u0627\u0637\u0644\u0627\u0639\u0627\u062a \u0639\u0645\u0648\u0645\u06cc \u06a9\u0647 \u062f\u0631 \u0628\u0627\u0644\u0627\u06cc \u06a9\u0627\u0631\u062a \u0634\u0645\u0627 \u062f\u0631 \u0635\u0641\u062d\u0647 \u0646\u0645\u0627\u06cc\u0647 \u0634\u0645\u0627 \u0646\u0634\u0627\u0646 \u062f\u0627\u062f\u0647 \u0645\u06cc \u0634\u0648\u062f. \u0627\u06cc\u0646 \u0641\u0642\u0637 \u06cc\u06a9 \u0635\u0641\u062d\u0647 \u0633\u0627\u062e\u062a\u06af\u06cc \u0627\u0633\u062a. "),o.qZA(),o.TgZ(10,"form",3,4),o.NdJ("ngSubmit",function(){return d.onFormSubmit()}),o._uU(12),o.TgZ(13,"div",5)(14,"select",6,7),o.NdJ("ngModelChange",function(m){return d.dataModel.fileType=m}),o.YNc(16,y,2,2,"option",8),o.qZA(),o.TgZ(17,"em"),o._uU(18),o.ALo(19,"translate"),o.qZA(),o.YNc(20,x,5,3,"mat-error",9),o.qZA(),o.TgZ(21,"div",5)(22,"select",10,7),o.NdJ("ngModelChange",function(m){return d.dataModel.recieveMethod=m}),o.YNc(24,_,2,2,"option",8),o.qZA(),o.TgZ(25,"em"),o._uU(26),o.ALo(27,"translate"),o.qZA(),o.YNc(28,p,5,3,"mat-error",9),o.qZA(),o.YNc(29,T,11,9,"div",11),o.TgZ(30,"div",12)(31,"button",13),o.NdJ("click",function(){return d.onFormCancel()}),o._UZ(32,"i",14),o._uU(33),o.ALo(34,"translate"),o.qZA(),o.TgZ(35,"button",15),o.NdJ("click",function(){return d.onFormSubmit()}),o._UZ(36,"i",16),o._uU(37),o.ALo(38,"translate"),o.qZA(),o.YNc(39,O,4,3,"button",17),o.qZA()()()()),2&i){const s=o.MAs(11),m=o.MAs(15);o.xp6(10),o.Q6J("ngStyle",o.VKq(23,n,d.tokenInfo.direction)),o.xp6(2),o.hij(" ",d.formInfo.formTitle," "),o.xp6(2),o.Q6J("ngModel",d.dataModel.fileType),o.xp6(2),o.Q6J("ngForOf",d.fileTypeListItems),o.xp6(2),o.Oqu(o.lcZ(19,15,"TITLE.Select_the_file_format")),o.xp6(2),o.Q6J("ngIf",null==m.errors?null:m.errors.required),o.xp6(2),o.Q6J("ngModel",d.dataModel.recieveMethod),o.xp6(2),o.Q6J("ngForOf",d.recieveMethodListItems),o.xp6(2),o.Oqu(o.lcZ(27,17,"TITLE.Select_the_method_of_receiving_the_file")),o.xp6(2),o.Q6J("ngIf",null==m.errors?null:m.errors.required),o.xp6(1),o.Q6J("ngIf",d.dataModel.fileType===d.EnumExportFileTypeReport),o.xp6(4),o.hij(" ",o.lcZ(34,19,"ACTION.CANCEL")," "),o.xp6(2),o.Q6J("disabled",!s.form.valid||!d.formInfo.formSubmitAllow),o.xp6(2),o.hij(" ",o.lcZ(38,21,"ACTION.FILE_CREATION")," "),o.xp6(2),o.Q6J("ngIf",d.dataModelSubmitResult&&d.dataModelSubmitResult.isSuccess&&(null==d.dataModelSubmitResult.linkFile?null:d.dataModelSubmitResult.linkFile.length)>0)}},dependencies:[E.sg,E.O5,E.PC,e._Y,e.YN,e.Kr,e.EJ,e.JJ,e.JL,e.On,e.F,Z.TO,I.X$],encapsulation:2})}return l})()},7154:(D,w,a)=>{a.d(w,{Z:()=>u});var e=a(4536),f=a(4511),h=a(656),t=a(4537),o=a(2607),M=a(6707),I=a(727),R=a(8692),E=a(92),Z=a(8659),y=a(9665);function x(i,d){if(1&i&&(t.TgZ(0,"option",30),t._uU(1),t.qZA()),2&i){const s=d.$implicit;t.Q6J("value",s.value),t.xp6(1),t.hij(" ",s.description," ")}}function _(i,d){1&i&&(t.TgZ(0,"mat-error"),t._uU(1," RecordStatus is "),t.TgZ(2,"strong"),t._uU(3),t.ALo(4,"translate"),t.qZA()()),2&i&&(t.xp6(3),t.Oqu(t.lcZ(4,1,"MESSAGE.required")))}function p(i,d){if(1&i&&(t.TgZ(0,"option",30),t._uU(1),t.qZA()),2&i){const s=d.$implicit;t.Q6J("value",s.value),t.xp6(1),t.hij(" ",s.description," ")}}function v(i,d){1&i&&(t.TgZ(0,"mat-error"),t._uU(1," RecordStatus is "),t.TgZ(2,"strong"),t._uU(3),t.ALo(4,"translate"),t.qZA()()),2&i&&(t.xp6(3),t.Oqu(t.lcZ(4,1,"MESSAGE.required")))}function S(i,d){if(1&i){const s=t.EpF();t.TgZ(0,"option",31),t.NdJ("onSelectionChange",function(){const b=t.CHM(s).$implicit,A=t.oxw();return t.KtG(A.onActionFileSelect(b))}),t._uU(1),t.qZA()}if(2&i){const s=d.$implicit;t.Q6J("value",s.id),t.xp6(1),t.hij(" ",s.title," ")}}function T(i,d){1&i&&(t.TgZ(0,"mat-error"),t._uU(1," RecordStatus is "),t.TgZ(2,"strong"),t._uU(3),t.ALo(4,"translate"),t.qZA()()),2&i&&(t.xp6(3),t.Oqu(t.lcZ(4,1,"MESSAGE.required")))}function O(i,d){1&i&&(t.TgZ(0,"mat-error"),t._uU(1," Current Page Number is "),t.TgZ(2,"strong"),t._uU(3),t.ALo(4,"translate"),t.qZA()()),2&i&&(t.xp6(3),t.Oqu(t.lcZ(4,1,"MESSAGE.required")))}function n(i,d){1&i&&(t.TgZ(0,"mat-error"),t._uU(1," Row Per Page is "),t.TgZ(2,"strong"),t._uU(3),t.ALo(4,"translate"),t.qZA()()),2&i&&(t.xp6(3),t.Oqu(t.lcZ(4,1,"MESSAGE.required")))}function g(i,d){1&i&&(t.TgZ(0,"mat-error"),t._uU(1," Skip Row Data is "),t.TgZ(2,"strong"),t._uU(3),t.ALo(4,"translate"),t.qZA()()),2&i&&(t.xp6(3),t.Oqu(t.lcZ(4,1,"MESSAGE.required")))}function l(i,d){if(1&i){const s=t.EpF();t.TgZ(0,"button",32),t.NdJ("click",function(){t.CHM(s);const r=t.oxw();return t.KtG(r.onOpenPage())}),t._UZ(1,"i",33),t._uU(2),t.ALo(3,"translate"),t.qZA()}2&i&&(t.xp6(2),t.hij(" ",t.lcZ(3,1,"TITLE.download_link")," "))}const c=function(i){return{direction:i}};let u=(()=>{class i{cmsToastrService;data;dialogRef;translate;tokenHelper;static nextId=0;id=++i.nextId;filterModel=new f.Hay;requestTitle="";requestService;constructor(s,m,r,b,A){this.cmsToastrService=s,this.data=m,this.dialogRef=r,this.translate=b,this.tokenHelper=A,m?(m.service?this.requestService=m.service:this.dialogRef.close({dialogChangedDate:!0}),m.filterModel?this.filterModel=m.filterModel:this.dialogRef.close({dialogChangedDate:!0}),m.title&&(this.requestTitle=m.title)):this.dialogRef.close({dialogChangedDate:!0}),this.filterModel.exportFile=new f.w2X;let C=new f.svN;C.value=1,C.key="Excel",C.description="Excel",this.fileTypeListItems.push(C),C=new f.svN,C.value=3,C.key="Json",C.description="Json",this.fileTypeListItems.push(C),C=new f.svN,C.value=4,C.key="Report",C.description="Report",this.fileTypeListItems.push(C),C=new f.svN,C.value=0,C.key="Now",C.description="Now",this.recieveMethodListItems.push(C),C=new f.svN,C.value=1,C.key="Email",C.description="Email",this.recieveMethodListItems.push(C),C=new f.svN,C.value=2,C.key="FileManager",C.description="FileManager",this.recieveMethodListItems.push(C),this.tokenHelper.getCurrentToken().then(L=>{this.tokenInfo=L})}formInfo=new f.LEF;tokenInfo=new f.OdC;dataModelReportFileResult=new f.y$4;dataModelSubmitResult=new f.vZ4;dataModelFileSelect=new f.wlu;EnumExportFileTypeReport=f.TtJ.Report;EnumExportReceiveMethodNow=f.$XY.Now;loading=new h.O;get optionLoading(){return this.loading}set optionLoading(s){this.loading=s}ngOnInit(){this.DataGetAll(),this.formInfo.formTitle=this.translate.instant("TITLE.EXPORTFILE")+" : "+this.requestTitle,this.filterModel.exportFile.fileType=this.EnumExportFileTypeReport,this.filterModel.exportFile.recieveMethod=this.EnumExportReceiveMethodNow}DataGetAll(){const s=this.constructor.name+"main";this.loading.Start(s,this.translate.instant("MESSAGE.get_information_list")),this.dataModelSubmitResult=new f.vZ4,this.formInfo.formSubmitAllow=!1,this.requestService.ServiceReportFileGetAll().subscribe({next:m=>{this.dataModelReportFileResult=m,m.isSuccess?this.dataModelReportFileResult.listItems=this.dataModelReportFileResult.listItems.filter(r=>r.reportFileType==f.UO$.List):this.cmsToastrService.typeErrorMessage(m.errorMessage),this.loading.Stop(s),this.formInfo.formSubmitAllow=!0},error:m=>{this.cmsToastrService.typeError(m),this.loading.Stop(s),this.formInfo.formSubmitAllow=!0}})}onActionFileSelect(s){this.dataModelFileSelect=s,this.filterModel.exportFile.reportFormatFileId=s.id,this.dataModelSubmitResult=new f.vZ4}fileTypeListItems=new Array;recieveMethodListItems=new Array;onFormSubmit(){this.dataModelSubmitResult=new f.vZ4;const s=this.constructor.name+"main";this.loading.Start(s,this.translate.instant("MESSAGE.get_information_list")),this.formInfo.formSubmitAllow=!1,this.requestService.ServiceExportFile(this.filterModel).subscribe({next:m=>{this.dataModelSubmitResult=m,m.isSuccess?this.formInfo.formAlert=this.translate.instant("MESSAGE.registration_completed_successfully"):(this.formInfo.formAlert=this.translate.instant("ERRORMESSAGE.MESSAGE.typeError"),this.formInfo.formError=m.errorMessage,this.cmsToastrService.typeErrorMessage(m.errorMessage)),this.loading.Stop(s),this.formInfo.formSubmitAllow=!0},error:m=>{this.cmsToastrService.typeError(m),this.loading.Stop(s),this.formInfo.formSubmitAllow=!0}})}onFormCancel(){this.dialogRef.close({dialogChangedDate:!1})}onOpenPage(){this.dataModelSubmitResult&&this.dataModelSubmitResult.isSuccess&&this.dataModelSubmitResult.linkFile.length>0&&window.open(this.dataModelSubmitResult.linkFile,"_blank")}static \u0275fac=function(m){return new(m||i)(t.Y36(o.e),t.Y36(e.WI),t.Y36(e.so),t.Y36(M.sK),t.Y36(I.v))};static \u0275cmp=t.Xpm({type:i,selectors:[["app-cms-export-list"]],inputs:{optionLoading:"optionLoading"},decls:74,vars:57,consts:[[1,"card","card-style"],[1,"content","mb-0"],[1,"mb-0","color-highlight","font-600","font-12"],[3,"ngStyle","ngSubmit"],["vform","ngForm"],[1,"input-style","has-borders","input-style-always-active","validate-field","no-icon","mb-4"],["id","filterModel.exportFile.fileType","name","filterModel.exportFile.fileType",1,"form-control","validate-name",3,"ngModel","ngModelChange"],["RecordStatus","ngModel"],[3,"value",4,"ngFor","ngForOf"],[4,"ngIf"],["id","filterModel.exportFile.recieveMethod","name","filterModel.exportFile.recieveMethod",1,"form-control","validate-name",3,"ngModel","ngModelChange"],["for","filterModel.exportFile.reportFormatFileId",1,"color-highlight"],["id","filterModel.exportFile.reportFormatFileId","name","filterModel.exportFile.reportFormatFileId",1,"form-control","validate-name",3,"ngModel","ngModelChange"],[3,"value","onSelectionChange",4,"ngFor","ngForOf"],[1,"input-style","has-borders","no-icon","input-style-always-active","validate-field","mb-4"],["for","filterModel.currentPageNumber",1,"color-highlight"],["type","number","name","filterModel.currentPageNumber","id","filterModel.currentPageNumber","required","",1,"form-control","validate-name",3,"ngModel","placeholder","ngModelChange"],["CurrentPageNumber",""],["for","filterModel.rowPerPage",1,"color-highlight"],["type","number","name","filterModel.rowPerPage","id","filterModel.rowPerPage","required","",1,"form-control","validate-name",3,"ngModel","placeholder","ngModelChange"],["RowPerPage",""],["for","filterModel.skipRowData",1,"color-highlight"],["matInput","","type","number","name","filterModel.skipRowData","id","filterModel.skipRowData","required","",1,"form-control","validate-name",3,"ngModel","placeholder","ngModelChange"],["SkipRowData",""],[1,"form-actions"],["type","button",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-gray",3,"click"],[1,"ft-x"],["type","submit",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-green",2,"margin","1px",3,"disabled","click"],[1,"fa-solid","fa-print"],["type","button","class","btn font-13 font-600 btn-s m-1 rounded-s shadow-xl border-0 gradient-highlight","style","margin: 1px;",3,"click",4,"ngIf"],[3,"value"],[3,"value","onSelectionChange"],["type","button",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-highlight",2,"margin","1px",3,"click"],[1,"fa-solid","fa-download"]],template:function(m,r){if(1&m&&(t.TgZ(0,"div",0)(1,"div",1)(2,"p",2),t._uU(3," \u062d\u0633\u0627\u0628 \u06a9\u0627\u0631\u0628\u0631\u06cc \u062e\u0648\u062f \u0631\u0627 \u0648\u06cc\u0631\u0627\u06cc\u0634 \u06a9\u0646\u06cc\u062f "),t.qZA(),t.TgZ(4,"h4"),t._uU(5,"\u0627\u0637\u0644\u0627\u0639\u0627\u062a"),t.qZA(),t.TgZ(6,"h4"),t._uU(7,"\u0627\u0637\u0644\u0627\u0639\u0627\u062a \u0627\u0648\u0644\u06cc\u0647"),t.qZA(),t.TgZ(8,"p"),t._uU(9," \u0627\u0637\u0644\u0627\u0639\u0627\u062a \u0639\u0645\u0648\u0645\u06cc \u06a9\u0647 \u062f\u0631 \u0628\u0627\u0644\u0627\u06cc \u06a9\u0627\u0631\u062a \u0634\u0645\u0627 \u062f\u0631 \u0635\u0641\u062d\u0647 \u0646\u0645\u0627\u06cc\u0647 \u0634\u0645\u0627 \u0646\u0634\u0627\u0646 \u062f\u0627\u062f\u0647 \u0645\u06cc \u0634\u0648\u062f. \u0627\u06cc\u0646 \u0641\u0642\u0637 \u06cc\u06a9 \u0635\u0641\u062d\u0647 \u0633\u0627\u062e\u062a\u06af\u06cc \u0627\u0633\u062a. "),t.qZA(),t.TgZ(10,"form",3,4),t.NdJ("ngSubmit",function(){return r.onFormSubmit()}),t._uU(12),t.TgZ(13,"div",5)(14,"select",6,7),t.NdJ("ngModelChange",function(A){return r.filterModel.exportFile.fileType=A}),t.YNc(16,x,2,2,"option",8),t.qZA(),t.TgZ(17,"em"),t._uU(18),t.ALo(19,"translate"),t.qZA(),t.YNc(20,_,5,3,"mat-error",9),t.qZA(),t.TgZ(21,"div",5)(22,"select",10,7),t.NdJ("ngModelChange",function(A){return r.filterModel.exportFile.recieveMethod=A}),t.YNc(24,p,2,2,"option",8),t.qZA(),t.TgZ(25,"em"),t._uU(26),t.ALo(27,"translate"),t.qZA(),t.YNc(28,v,5,3,"mat-error",9),t.qZA(),t.TgZ(29,"div",5)(30,"label",11),t._uU(31),t.ALo(32,"translate"),t.qZA(),t.TgZ(33,"select",12,7),t.NdJ("ngModelChange",function(A){return r.filterModel.exportFile.reportFormatFileId=A}),t.YNc(35,S,2,2,"option",13),t.qZA(),t.TgZ(36,"em"),t._uU(37),t.ALo(38,"translate"),t.qZA(),t.YNc(39,T,5,3,"mat-error",9),t.qZA(),t.TgZ(40,"div",14)(41,"label",15),t._uU(42),t.ALo(43,"translate"),t.qZA(),t.TgZ(44,"input",16,17),t.NdJ("ngModelChange",function(A){return r.filterModel.currentPageNumber=A}),t.ALo(46,"translate"),t.qZA(),t.YNc(47,O,5,3,"mat-error",9),t.qZA(),t.TgZ(48,"div",14)(49,"label",18),t._uU(50),t.ALo(51,"translate"),t.qZA(),t.TgZ(52,"input",19,20),t.NdJ("ngModelChange",function(A){return r.filterModel.rowPerPage=A}),t.ALo(54,"translate"),t.qZA(),t.YNc(55,n,5,3,"mat-error",9),t.qZA(),t.TgZ(56,"div",14)(57,"label",21),t._uU(58),t.ALo(59,"translate"),t.qZA(),t.TgZ(60,"input",22,23),t.NdJ("ngModelChange",function(A){return r.filterModel.skipRowData=A}),t.ALo(62,"translate"),t.qZA(),t.YNc(63,g,5,3,"mat-error",9),t.qZA(),t.TgZ(64,"div",24)(65,"button",25),t.NdJ("click",function(){return r.onFormCancel()}),t._UZ(66,"i",26),t._uU(67),t.ALo(68,"translate"),t.qZA(),t.TgZ(69,"button",27),t.NdJ("click",function(){return r.onFormSubmit()}),t._UZ(70,"i",28),t._uU(71),t.ALo(72,"translate"),t.qZA(),t.YNc(73,l,4,3,"button",29),t.qZA()()()()),2&m){const b=t.MAs(11),A=t.MAs(15),C=t.MAs(45),L=t.MAs(53),F=t.MAs(61);t.xp6(10),t.Q6J("ngStyle",t.VKq(55,c,r.tokenInfo.direction)),t.xp6(2),t.hij(" ",r.formInfo.formTitle," "),t.xp6(2),t.Q6J("ngModel",r.filterModel.exportFile.fileType),t.xp6(2),t.Q6J("ngForOf",r.fileTypeListItems),t.xp6(2),t.Oqu(t.lcZ(19,31,"TITLE.Select_the_file_format")),t.xp6(2),t.Q6J("ngIf",null==A.errors?null:A.errors.required),t.xp6(2),t.Q6J("ngModel",r.filterModel.exportFile.recieveMethod),t.xp6(2),t.Q6J("ngForOf",r.recieveMethodListItems),t.xp6(2),t.Oqu(t.lcZ(27,33,"TITLE.Select_the_method_of_receiving_the_file")),t.xp6(2),t.Q6J("ngIf",null==A.errors?null:A.errors.required),t.xp6(3),t.Oqu(t.lcZ(32,35,"TITLE.Report_Format")),t.xp6(2),t.Q6J("ngModel",r.filterModel.exportFile.reportFormatFileId),t.xp6(2),t.Q6J("ngForOf",r.dataModelReportFileResult.listItems),t.xp6(2),t.Oqu(t.lcZ(38,37,"TITLE.Report_Format_Select")),t.xp6(2),t.Q6J("ngIf",null==A.errors?null:A.errors.required),t.xp6(3),t.Oqu(t.lcZ(43,39,"TITLE.from_page")),t.xp6(2),t.s9C("placeholder",t.lcZ(46,41,"TITLE.page_number")),t.Q6J("ngModel",r.filterModel.currentPageNumber),t.xp6(3),t.Q6J("ngIf",null==C.errors?null:C.errors.required),t.xp6(3),t.Oqu(t.lcZ(51,43,"TITLE.page_number")),t.xp6(2),t.s9C("placeholder",t.lcZ(54,45,"TITLE.number_of_output_file_rows")),t.Q6J("ngModel",r.filterModel.rowPerPage),t.xp6(3),t.Q6J("ngIf",null==L.errors?null:L.errors.required),t.xp6(3),t.Oqu(t.lcZ(59,47,"TITLE.Over_the_number_of_rows")),t.xp6(2),t.s9C("placeholder",t.lcZ(62,49,"TITLE.Number_of_rows_row_rowss")),t.Q6J("ngModel",r.filterModel.skipRowData),t.xp6(3),t.Q6J("ngIf",null==F.errors?null:F.errors.required),t.xp6(4),t.hij(" ",t.lcZ(68,51,"ACTION.CANCEL")," "),t.xp6(2),t.Q6J("disabled",!b.form.valid||!r.formInfo.formSubmitAllow),t.xp6(2),t.hij(" ",t.lcZ(72,53,"ACTION.FILE_CREATION")," "),t.xp6(2),t.Q6J("ngIf",r.dataModelSubmitResult&&r.dataModelSubmitResult.isSuccess&&(null==r.dataModelSubmitResult.linkFile?null:r.dataModelSubmitResult.linkFile.length)>0)}},dependencies:[R.sg,R.O5,R.PC,E._Y,E.YN,E.Kr,E.Fj,E.wV,E.EJ,E.JJ,E.JL,E.Q7,E.On,E.F,Z.TO,y.Nt,M.X$],encapsulation:2})}return i})()},7980:(D,w,a)=>{a.d(w,{Z:()=>l});var e=a(4537),f=a(656),h=a(727),t=a(8692),o=a(5738),M=a(6707);function I(c,u){if(1&c&&(e.TgZ(0,"div",2),e.Hsn(1,4),e.qZA()),2&c){const i=e.oxw();e.Q6J("ngClass",i.tokenHelper.isMobile?i.viewTree?"menu-active  menu menu-box-right rounded-0":"menu menu-box-right rounded-0":"col-xl-3")}}function R(c,u){1&c&&e.Hsn(0,6,["*ngIf","optionHeaderDisplay"])}function E(c,u){if(1&c&&(e.TgZ(0,"div",23),e.YNc(1,R,1,0,"ng-content",7),e.Hsn(2,5),e.qZA()),2&c){const i=e.oxw();e.xp6(1),e.Q6J("ngIf",i.optionHeaderDisplay)}}function Z(c,u){1&c&&e._UZ(0,"hr")}function y(c,u){1&c&&(e.TgZ(0,"div",23)(1,"p",10),e.Hsn(2,7),e.Hsn(3,8),e.qZA()())}function x(c,u){if(1&c){const i=e.EpF();e.TgZ(0,"div",24)(1,"div",0)(2,"div",25)(3,"a",26),e.NdJ("click",function(){e.CHM(i);const s=e.oxw();return e.KtG(s.actionViewTree())}),e._UZ(4,"i",27),e.TgZ(5,"strong",28),e._uU(6),e.qZA()()()()()}if(2&c){const i=e.oxw();e.xp6(4),e.Udp("transform",i.viewTree?"rotate(90deg)":"rotate(0deg)"),e.xp6(2),e.Oqu(i.optionCategoryTitle)}}function _(c,u){if(1&c){const i=e.EpF();e.TgZ(0,"div",29)(1,"div",0)(2,"div",25)(3,"a",26),e.NdJ("click",function(){e.CHM(i);const s=e.oxw();return e.KtG(s.actionViewMenuMain())}),e._UZ(4,"i",27),e.TgZ(5,"strong",28),e._uU(6),e.qZA()()()()()}if(2&c){const i=e.oxw();e.xp6(4),e.Udp("transform",i.viewMenuMain?"rotate(90deg)":"rotate(0deg)"),e.xp6(2),e.Oqu(i.optionTitle)}}function p(c,u){if(1&c){const i=e.EpF();e.TgZ(0,"div",30)(1,"div",0)(2,"div",25)(3,"a",26),e.NdJ("click",function(){e.CHM(i);const s=e.oxw();return e.KtG(s.actionViewMenuItemRow())}),e._UZ(4,"i",27),e.TgZ(5,"strong",28),e._uU(6),e.qZA()()()()()}if(2&c){const i=e.oxw();e.xp6(4),e.Udp("transform",i.viewMenuItemRow?"rotate(90deg)":"rotate(0deg)"),e.xp6(2),e.Oqu(i.optionSelectRowItemTitle)}}function v(c,u){if(1&c&&(e.TgZ(0,"h1"),e._uU(1),e.qZA()),2&c){const i=e.oxw();e.xp6(1),e.Oqu(i.optionTitle)}}function S(c,u){if(1&c){const i=e.EpF();e.TgZ(0,"div",31)(1,"a",32),e.NdJ("click",function(){e.CHM(i);const s=e.oxw();return e.KtG(s.onActionbuttonMemo())}),e._UZ(2,"i",33)(3,"br"),e.qZA(),e.TgZ(4,"p",34),e._uU(5),e.ALo(6,"translate"),e.qZA()()}2&c&&(e.xp6(5),e.Oqu(e.lcZ(6,1,"ACTION.MEMO")))}function T(c,u){if(1&c&&(e.TgZ(0,"h1"),e._uU(1),e.qZA()),2&c){const i=e.oxw();e.xp6(1),e.Oqu(i.optionSelectRowItemTitle)}}function O(c,u){if(1&c){const i=e.EpF();e.TgZ(0,"div",31)(1,"a",32),e.NdJ("click",function(){e.CHM(i);const s=e.oxw();return e.KtG(s.onActionbuttonMemoRow())}),e._UZ(2,"i",33)(3,"br"),e.qZA(),e.TgZ(4,"p",34),e._uU(5),e.ALo(6,"translate"),e.qZA()()}2&c&&(e.xp6(5),e.Oqu(e.lcZ(6,1,"ACTION.MEMO")))}const n=[[["","cms-action-area",""]],[["","cms-body",""]],[["","cms-action",""]],[["","cms-action-row",""]],[["","cms-tree",""]],[["","cms-action-header",""]],[["","cms-header",""]],[["","cms-message",""]],[["","cms-footer",""]]],g=["[cms-action-area]","[cms-body]","[cms-action]","[cms-action-row]","[cms-tree]","[cms-action-header]","[cms-header]","[cms-message]","[cms-footer]"];let l=(()=>{class c{tokenHelper;static nextId=0;id=++c.nextId;optionHeaderDisplay=!0;optionActionDisplay=!0;optionFooterDisplay=!0;optionActionRowDisplay=!1;optionTitle="\u0645\u0646\u0648\u06cc \u0639\u0645\u0644\u06cc\u0627\u062a";optionCategoryTitle="\u062f\u0633\u062a\u0647 \u0628\u0646\u062f\u06cc";optionSelectRowItemTitle="";optionClassBody="ntk-cms-html-tree-body";optionTreeDisplay=!0;set optionLoading(i){this.loading=i}optionOnActionbuttonMemo=new e.vpe;optionOnActionbuttonMemoRow=new e.vpe;loading=new f.O;constructor(i){this.tokenHelper=i}ngOnInit(){}viewMenuItemRow=!1;viewMenuMain=!1;viewTree=!1;actionViewTree(i){this.viewTree=1!=i&&(0==i||!this.viewTree),this.viewMenuMain=!1,this.viewMenuItemRow=!1}actionViewMenuItemRow(i){this.viewMenuItemRow=1==i||0!=i&&!this.viewMenuItemRow,this.viewMenuMain=!1,this.viewTree=!1}actionViewMenuMain(i){this.viewMenuMain=1==i||0!=i&&!this.viewMenuMain,this.viewMenuItemRow=!1,this.viewTree=!1}onActionbuttonMemo(){this.optionOnActionbuttonMemo.emit()}onActionbuttonMemoRow(){this.optionOnActionbuttonMemoRow.emit()}static \u0275fac=function(d){return new(d||c)(e.Y36(h.v))};static \u0275cmp=e.Xpm({type:c,selectors:[["app-cms-html-list"]],inputs:{optionHeaderDisplay:"optionHeaderDisplay",optionActionDisplay:"optionActionDisplay",optionFooterDisplay:"optionFooterDisplay",optionActionRowDisplay:"optionActionRowDisplay",optionTitle:"optionTitle",optionCategoryTitle:"optionCategoryTitle",optionSelectRowItemTitle:"optionSelectRowItemTitle",optionClassBody:"optionClassBody",optionTreeDisplay:"optionTreeDisplay",optionLoading:"optionLoading"},outputs:{optionOnActionbuttonMemo:"optionOnActionbuttonMemo",optionOnActionbuttonMemoRow:"optionOnActionbuttonMemoRow"},ngContentSelectors:g,decls:40,vars:16,consts:[[1,"row"],[3,"ngClass",4,"ngIf"],[3,"ngClass"],[1,"card","card-style"],[1,"content","mb-0"],[1,"row","justify-content-center"],["class","col-12 pe-0",4,"ngIf"],[4,"ngIf"],[1,"col-12","pe-0",3,"ngClass"],["topbody",""],[1,"text-center"],[3,"options"],["class","content","style","position: fixed;top: 100px; left: 1px; z-index: 99; min-width: 30px!important;height:30px;margin:0px;",4,"ngIf"],["class","content","style","position: fixed;top: 140px; left: 1px; z-index: 99; min-width: 30px!important;height:30px;margin:0px;",4,"ngIf"],["class","content","style","position: fixed;top: 180px; left: 1px; z-index: 99; min-width: 30px!important;height:30px;margin:0px;",4,"ngIf"],[1,"menu","menu-box-modal","rounded-m",2,"display","block","width","350px","height","320px",3,"ngClass"],[1,"menu-title"],[1,"color-highlight"],[1,"close-menu",3,"click"],[1,"fa","fa-times-circle"],[1,"divider","divider-margins"],[1,"row","text-center"],["class","col-4",4,"ngIf"],[1,"col-12","pe-0"],[1,"content",2,"position","fixed","top","100px","left","1px","z-index","99","min-width","30px!important","height","30px","margin","0px"],[1,"col-12"],[1,"chip","chip-s","bg-gray-light",2,"cursor","pointer",3,"click"],[1,"fa","fa-bars","bg-green-dark","color-white"],[1,"color-black","font-400"],[1,"content",2,"position","fixed","top","140px","left","1px","z-index","99","min-width","30px!important","height","30px","margin","0px"],[1,"content",2,"position","fixed","top","180px","left","1px","z-index","99","min-width","30px!important","height","30px","margin","0px"],[1,"col-4"],["type","button","target","_blank",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-highlight",3,"click"],[1,"fa-regular","fa-file-lines","font-22",2,"color","#ffffff"],[1,"font-11","text-center","opacity-70"]],template:function(d,s){1&d&&(e.F$t(n),e.TgZ(0,"div",0),e.YNc(1,I,2,1,"div",1),e.TgZ(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5),e.YNc(6,E,3,1,"div",6),e.Hsn(7),e.YNc(8,Z,1,0,"hr",7),e.TgZ(9,"div",8,9)(11,"p",10),e._UZ(12,"app-progress-spinner",11),e.Hsn(13,1),e.qZA()(),e.YNc(14,y,4,0,"div",6),e.qZA()()()()(),e.YNc(15,x,7,3,"div",12),e.YNc(16,_,7,3,"div",13),e.YNc(17,p,7,3,"div",14),e.TgZ(18,"div",15)(19,"div",16)(20,"p",17),e._uU(21,"\u0645\u0646\u0648"),e.qZA(),e.YNc(22,v,2,1,"h1",7),e.TgZ(23,"a",18),e.NdJ("click",function(){return s.actionViewMenuMain(!1)}),e._UZ(24,"i",19),e.qZA()(),e._UZ(25,"div",20),e.TgZ(26,"div",21),e.Hsn(27,2),e.YNc(28,S,7,3,"div",22),e.qZA()(),e.TgZ(29,"div",15)(30,"div",16)(31,"p",17),e._uU(32,"\u0645\u0646\u0648 \u0631\u062f\u06cc\u0641 \u0627\u0646\u062a\u062e\u0627\u0628\u06cc"),e.qZA(),e.YNc(33,T,2,1,"h1",7),e.TgZ(34,"a",18),e.NdJ("click",function(){return s.actionViewMenuItemRow(!1)}),e._UZ(35,"i",19),e.qZA()(),e._UZ(36,"div",20),e.TgZ(37,"div",21),e.Hsn(38,3),e.YNc(39,O,7,3,"div",22),e.qZA()()),2&d&&(e.xp6(1),e.Q6J("ngIf",s.optionTreeDisplay),e.xp6(1),e.Q6J("ngClass",s.optionTreeDisplay&&!s.tokenHelper.isMobile?"col-xl-9":"col-xl-12"),e.xp6(4),e.Q6J("ngIf",s.optionHeaderDisplay),e.xp6(2),e.Q6J("ngIf",s.optionHeaderDisplay||s.optionActionDisplay),e.xp6(1),e.Q6J("ngClass",s.optionClassBody),e.xp6(3),e.Q6J("options",s.loading),e.xp6(2),e.Q6J("ngIf",s.optionFooterDisplay&&!(null!=s.loading&&s.loading.display)),e.xp6(1),e.Q6J("ngIf",s.optionTreeDisplay&&s.tokenHelper.isMobile),e.xp6(1),e.Q6J("ngIf",s.optionActionDisplay),e.xp6(1),e.Q6J("ngIf",s.optionActionRowDisplay),e.xp6(1),e.Q6J("ngClass",s.viewMenuMain?"menu-active":""),e.xp6(4),e.Q6J("ngIf",(null==s.optionTitle?null:s.optionTitle.length)>0),e.xp6(6),e.Q6J("ngIf",s.optionOnActionbuttonMemo),e.xp6(1),e.Q6J("ngClass",s.viewMenuItemRow?"menu-active":""),e.xp6(4),e.Q6J("ngIf",(null==s.optionSelectRowItemTitle?null:s.optionSelectRowItemTitle.length)>0),e.xp6(6),e.Q6J("ngIf",s.optionOnActionbuttonMemoRow))},dependencies:[t.mk,t.O5,o.O,M.X$],encapsulation:2})}return c})()},3014:(D,w,a)=>{a.d(w,{y:()=>S});var e=a(4537),f=a(4511),h=a(8918),t=a(6707),o=a(2607),M=a(8692),I=a(92),R=a(8077),E=a(4580);function Z(T,O){if(1&T){const n=e.EpF();e.TgZ(0,"a",7),e.NdJ("click",function(){e.CHM(n);const l=e.oxw(2);return e.KtG(l.onActionCopied())}),e.ALo(1,"json"),e._UZ(2,"i",8),e.TgZ(3,"span",9),e._uU(4,"Copied!"),e.qZA()()}if(2&T){const n=e.oxw(2);e.Q6J("cdkCopyToClipboard",e.lcZ(1,2,n.filters)),e.xp6(3),e.Q6J("ngClass",n.showLabel?"submited":"")}}function y(T,O){if(1&T){const n=e.EpF();e.TgZ(0,"a",10),e.NdJ("click",function(){e.CHM(n);const l=e.oxw(2);return e.KtG(l.onActionSaveRules())}),e._uU(1),e.ALo(2,"translate"),e.qZA()}2&T&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"ACTION.SAVE")))}function x(T,O){if(1&T){const n=e.EpF();e.TgZ(0,"a",11),e.NdJ("click",function(){e.CHM(n);const l=e.oxw(2);return e.KtG(l.onActionLoadRules())}),e._uU(1),e.ALo(2,"translate"),e.qZA()}2&T&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"ACTION.LOAD")))}function _(T,O){if(1&T){const n=e.EpF();e.TgZ(0,"a",11),e.NdJ("click",function(){e.CHM(n);const l=e.oxw(2);return e.KtG(l.onActionRemoveRules())}),e._uU(1),e.ALo(2,"translate"),e.qZA()}2&T&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"ACTION.REMOVE")))}function p(T,O){if(1&T){const n=e.EpF();e.TgZ(0,"div",1)(1,"ngx-ntk-query-builder",2),e.NdJ("ngModelChange",function(l){e.CHM(n);const c=e.oxw();return e.KtG(c.query=l)}),e.qZA(),e.Hsn(2),e.YNc(3,Z,5,4,"a",3),e.YNc(4,y,3,3,"a",4),e.YNc(5,x,3,3,"a",5),e.YNc(6,_,3,3,"a",5),e.TgZ(7,"a",6),e.NdJ("click",function(){e.CHM(n);const l=e.oxw();return e.KtG(l.onSubmit())}),e._uU(8),e.ALo(9,"translate"),e.qZA()()}if(2&T){const n=e.oxw();e.xp6(1),e.Q6J("ngModel",n.query)("fieldMap",n.fieldMap)("language",n.lang),e.xp6(2),e.Q6J("ngIf",n.submited),e.xp6(1),e.Q6J("ngIf",n.allowSaveSearch),e.xp6(1),e.Q6J("ngIf",n.allowLoadSearch),e.xp6(1),e.Q6J("ngIf",n.allowLoadSearch),e.xp6(2),e.Oqu(e.lcZ(9,8,"ACTION.SEARCH"))}}const v=["*"];let S=(()=>{class T{translate;cmsToastrService;static nextId=0;id=++T.nextId;optionsData=new h.dj;optionsChange=new e.vpe;set options(n){n||(n=new h.dj),this.optionsData=n,this.optionsData.childMethods={setAccess:g=>this.setAccess(g)},this.optionsChange.emit(n),this.checkLoadSearch(!1)}get options(){return this.optionsData}allowLoadSearch=!1;allowSaveSearch=!1;submited=!1;showLabel=!1;filters;lang;model;query;fieldMap={};constructor(n,g){this.translate=n,this.cmsToastrService=g,this.lang=this.translate.currentLang}ngOnInit(){this.submited=!1}setAccess(n){this.optionsData.data.access=n,(!this.filters||0===this.filters.length)&&this.setFields(),this.checkLoadSearch(!1),this.checkLoadDefaultQuery()}setFields(){this.optionsData&&this.optionsData.data.access&&this.optionsData.data.access.fieldsInfo&&this.optionsData.data.access.fieldsInfo.forEach(n=>{n.accessSearchField&&("System.Int32"===n.fieldTypeString||"System.Int64"===n.fieldTypeString?this.fieldMap[n.fieldName]={name:n.fieldTitle,type:"integer"}:"System.String"===n.fieldTypeString?this.fieldMap[n.fieldName]={name:n.fieldTitle,type:"string"}:"MongoDB.Bson.ObjectId"===n.fieldTypeString?this.fieldMap[n.fieldName]={name:n.fieldName,type:"string"}:"System.Boolean"===n.fieldTypeString?this.fieldMap[n.fieldName]={name:n.fieldTitle,type:"select",options:[{name:"\u0628\u0644\u0647",value:!0},{name:"\u062e\u06cc\u0631",value:!1}]}:n.fieldTypeString.indexOf(".RecordStatusEnum")>0?this.fieldMap[n.fieldName]={name:n.fieldTitle,type:"select",options:[{name:"Available",value:1},{name:"Disable",value:2},{name:"Deleted",value:3},{name:"Pending",value:4},{name:"DeniedConfirmed",value:5},{name:"Archive",value:6}]}:"System.DateTime"===n.fieldTypeString?this.fieldMap[n.fieldName]={name:n.fieldTitle,type:"date",settings:{}}:"link"===n.fieldTypeString&&(this.fieldMap[n.fieldName]={name:n.fieldTitle,type:"string"}))})}getRules(){this.filters=new Array;let n=f.ppe.And;!this.query||!this.query.condition||("or"===this.query.condition&&(n=f.ppe.Or),this.query.rules.forEach(g=>{const l=g,c=g;if(l&&l.condition&&l.rules&&l.rules.length>0){const u=new f.AO3;u.filters=this.getRulesSetChild(l),u.clauseType=n,this.filters.push(u)}else if(c){const u=this.getRulesChild(c);u.clauseType=n,this.filters.push(u)}}))}getRulesChild(n){const g=this.getSearchType(n.operator),l=new f.AO3;return l.propertyName=n.field,l.value=n.value,l.searchType=g,l}getRulesSetChild(n){const g=new Array;let l=f.ppe.And;return"or"===n.condition&&(l=f.ppe.Or),n.rules.forEach(c=>{const u=c,i=c;if(u&&u.condition&&u.rules&&u.rules.length>0){const d=new f.AO3;d.filters=this.getRulesSetChild(u),d.clauseType=l,g.push(d)}else if(i){const d=this.getRulesChild(i);d.clauseType=l,g.push(d)}}),g}onSubmit(){this.submited=!0,this.allowSaveSearch=!0,this.getRules(),this.optionsData.parentMethods&&this.optionsData.parentMethods.onSubmit(this.filters)}onActionCopied(){this.showLabel=!this.showLabel,setTimeout(()=>{this.showLabel=!1},3e3),this.cmsToastrService.typeSuccessCopedToClipboard()}onActionLoadRules(){this.checkLoadSearch(!0)}onActionRemoveRules(){localStorage.removeItem(this.optionsData.data.access.moduleName+"_"+this.optionsData.data.access.moduleEntityName),this.allowLoadSearch=!1}onActionSaveRules(){localStorage.setItem(this.optionsData.data.access.moduleName+"_"+this.optionsData.data.access.moduleEntityName,JSON.stringify(this.query))}onSetRules(){}getSearchType(n){switch(n){case"equal":return 0;case"not_equal":return 1;case"less":return 2;case"greater":return 3;case"between":return 4;case"contains":return 5;case"not_contains":return 6;case"begins_with":return 7;case"ends_with":return 8;case"less_or_equal":return 9;case"greater_or_equal":return 10}return 0}checkLoadSearch(n){if(this.optionsData&&this.optionsData.data&&this.optionsData.data.access){const g=localStorage.getItem(this.optionsData.data.access.moduleName+"_"+this.optionsData.data.access.moduleEntityName);if(g)try{return n&&(this.query=JSON.parse(g),this.getRules()),this.allowLoadSearch=!0,this.allowSaveSearch=!0,!0}catch{this.allowLoadSearch=!1}}return!1}checkLoadDefaultQuery(){if(this.optionsData&&this.optionsData.data&&this.optionsData.data.defaultQuery){const n=this.optionsData.data.defaultQuery;if(n)try{return this.query=JSON.parse(n),this.getRules(),setTimeout(()=>{this.onSubmit()},1e3),this.optionsData.data.defaultQuery="",!0}catch{}}return!1}static \u0275fac=function(g){return new(g||T)(e.Y36(t.sK),e.Y36(o.e))};static \u0275cmp=e.Xpm({type:T,selectors:[["app-cms-search-list"]],inputs:{options:"options"},outputs:{optionsChange:"optionsChange"},ngContentSelectors:v,decls:1,vars:1,consts:[["class","alert alert-primary",4,"ngIf"],[1,"alert","alert-primary"],[3,"ngModel","fieldMap","language","ngModelChange"],["class","btn font-13 font-600 btn-s m-1 rounded-s shadow-xl border-0 gradient-highlight","style","float: left;",3,"cdkCopyToClipboard","click",4,"ngIf"],["href","javascript:void(0)","style","float: left;","class","btn font-13 font-600 btn-s m-1 rounded-s shadow-xl border-0 gradient-green",3,"click",4,"ngIf"],["href","javascript:void(0)","style","float: left;","class","btn font-13 font-600 btn-s m-1 rounded-s shadow-xl border-0 gradient-highlight",3,"click",4,"ngIf"],["href","javascript:void(0)",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-highlight",3,"click"],[1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-highlight",2,"float","left",3,"cdkCopyToClipboard","click"],[1,"flaticon2-copy"],["id","myPopup",1,"popuptext",3,"ngClass"],["href","javascript:void(0)",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-green",2,"float","left",3,"click"],["href","javascript:void(0)",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-highlight",2,"float","left",3,"click"]],template:function(g,l){1&g&&(e.F$t(),e.YNc(0,p,10,10,"div",0)),2&g&&e.Q6J("ngIf",l.optionsData.data.show)},dependencies:[M.mk,M.O5,I.JJ,I.On,R.YH,E.i3,M.Ts,t.X$],encapsulation:2})}return T})()},626:(D,w,a)=>{a.d(w,{q:()=>y});var e=a(4537),f=a(7147),h=a(8692),t=a(1379),o=a(3331),M=a(814),I=a(6438),R=a(6707);function E(x,_){if(1&x&&(e.TgZ(0,"mat-list-item",4)(1,"mat-icon",5),e._uU(2,"insights"),e.qZA(),e.TgZ(3,"div",6),e._uU(4),e.qZA(),e.TgZ(5,"div",6),e._uU(6),e.qZA()()),2&x){const p=_.$implicit;e.xp6(4),e.Oqu(p.key),e.xp6(2),e.hij(" ",p.value," ")}}function Z(x,_){if(1&x&&(e.TgZ(0,"div",1)(1,"mat-list")(2,"div",2),e._uU(3),e.ALo(4,"translate"),e.qZA(),e.YNc(5,E,7,2,"mat-list-item",3),e.ALo(6,"keyvalue"),e._UZ(7,"mat-divider"),e.qZA()()),2&x){const p=e.oxw();e.xp6(3),e.Oqu(e.lcZ(4,2,"ACTION.STATIST")),e.xp6(2),e.Q6J("ngForOf",e.lcZ(6,4,p.modelData))}}let y=(()=>{class x{static nextId=0;id=++x.nextId;constructor(){}optionsData=new f.TV;optionsChange=new e.vpe;set options(p){p||(p=new f.TV),this.optionsData=p,this.optionsData.childMethods={setStatistValue:v=>this.setStatistValue(v)},this.optionsChange.emit(p)}get options(){return this.optionsData}modelData=new Map;ngOnInit(){}setStatistValue(p){this.modelData=p}static \u0275fac=function(v){return new(v||x)};static \u0275cmp=e.Xpm({type:x,selectors:[["app-cms-statist-list"]],inputs:{options:"options"},outputs:{optionsChange:"optionsChange"},decls:1,vars:1,consts:[["class","alert alert-info",4,"ngIf"],[1,"alert","alert-info"],[2,"font-size","30px"],["style","height: auto;",4,"ngFor","ngForOf"],[2,"height","auto"],["mat-list-icon",""],["mat-line",""]],template:function(v,S){1&v&&e.YNc(0,Z,8,6,"div",0),2&v&&e.Q6J("ngIf",S.optionsData.data.show)},dependencies:[h.sg,h.O5,t.X2,o.Hw,M.i$,M.Tg,I.d,h.Nd,R.X$],encapsulation:2})}return x})()}}]);