"use strict";(self.webpackChunkntk_cms_web=self.webpackChunkntk_cms_web||[]).push([[2852],{12:($,Z,r)=>{r.d(Z,{T:()=>W});var A=r(8239),i=r(4537),p=r(92),g=r(4511),F=r(7445),w=r(1927),G=r(3151),B=r(2147),L=r(1528),U=r(7969),R=r(656),I=r(2607),Y=r(4032),e=r(6707),S=r(8692),b=r(1637),y=r(1379),D=r(8659),x=r(3331),N=r(9665),P=r(7529);function k(_,T){if(1&_&&(i.TgZ(0,"label",8),i._uU(1),i.qZA()),2&_){const l=i.oxw();i.MGl("for","app-cms-site-selector-",l.id,""),i.xp6(1),i.Oqu(l.optionLabel)}}function H(_,T){if(1&_&&(i.TgZ(0,"mat-option",9)(1,"span"),i._uU(2),i.qZA()()),2&_){const l=T.$implicit,a=i.oxw();i.Q6J("value",l)("disabled",a.optionDisabled),i.xp6(2),i.Oqu(a.displayOption(l))}}function Q(_,T){if(1&_){const l=i.EpF();i.TgZ(0,"mat-icon",10),i.NdJ("click",function(){i.CHM(l);const d=i.oxw();return i.KtG(d.onActionSelectClear())}),i._uU(1,"close"),i.qZA()}}const K=["*"];let W=(()=>{class _{coreEnumService;cmsToastrService;cdr;publicHelper;translate;categoryService;static nextId=0;id=++_.nextId;constructor(l,a,d,C,h,O){this.coreEnumService=l,this.cmsToastrService=a,this.cdr=d,this.publicHelper=C,this.translate=h,this.categoryService=O,this.publicHelper.processService.cdr=this.cdr,this.translate.get("MESSAGE.Receiving_information").subscribe(V=>{this.loading.message=V})}dataModelResult=new g.y$4;dataModelSelect=new g.six;formControl=new p.NI;filteredOptions;optionDisabled=!1;optionSelectFirstItem=!1;optionPlaceholder="";optionLabel="";optionChange=new i.vpe;optionReload=()=>this.onActionButtonReload();set optionSelectForce(l){this.onActionSelectForce(l)}loading=new R.O;get optionLoading(){return this.loading}set optionLoading(l){this.loading=l}ngOnInit(){this.loadOptions(),(!this.optionLabel||0==this.optionLabel.length&&this.optionPlaceholder?.length>0)&&(this.optionLabel=this.optionPlaceholder)}loadOptions(){this.filteredOptions=this.formControl.valueChanges.pipe((0,w.O)(""),(0,G.b)(1500),(0,B.x)(),(0,L.w)(l=>"string"==typeof l||"number"==typeof l?this.DataGetAll(l||""):[]))}displayFn(l){return l?l.title:void 0}displayOption(l){return l?l.title:void 0}DataGetAll(l){var a=this;return(0,A.Z)(function*(){const d=new g.Hay;d.rowPerPage=20,d.accessLoad=!0;let C=new g.AO3;C.propertyName="Title",C.value=l,C.searchType=g.J6G.Contains,C.clauseType=g.ppe.Or,d.filters.push(C),l&&"number"==typeof+l&&+l>0&&(C=new g.AO3,C.propertyName="Id",C.value=l,C.searchType=g.J6G.Equal,C.clauseType=g.ppe.Or,d.filters.push(C));const h=a.constructor.name+"main";return a.publicHelper.processService.processStart(h),yield(0,F.z)(a.categoryService.ServiceGetAll(d)).then(O=>(a.dataModelResult=O,a.optionSelectFirstItem&&(!a.dataModelSelect||!a.dataModelSelect.id||a.dataModelSelect.id<=0)&&a.dataModelResult.listItems.length>0&&(a.optionSelectFirstItem=!1,setTimeout(()=>{a.formControl.setValue(a.dataModelResult.listItems[0])},1e3),a.onActionSelect(a.dataModelResult.listItems[0])),a.publicHelper.processService.processStop(h),O.listItems))})()}onActionSelect(l){this.optionDisabled||(this.dataModelSelect=l,this.optionChange.emit(this.dataModelSelect))}onActionSelectClear(){this.optionDisabled||(this.dataModelSelect=null,this.formControl.setValue(null),this.optionChange.emit(null))}onActionEmpty(){this.formControl.setValue(0),this.dataModelSelect=new g.six,this.optionChange.emit(this.dataModelSelect)}push(l){return this.filteredOptions.pipe((0,U.U)(a=>(a.find(d=>d.id===l.id)||a.push(l),a)))}onActionSelectForce(l){if("number"==typeof l&&l>0){if(this.dataModelSelect&&this.dataModelSelect.id===l)return;if(this.dataModelResult&&this.dataModelResult.listItems&&this.dataModelResult.listItems.find(a=>a.id===l)){const a=this.dataModelResult.listItems.find(d=>d.id===l);return this.dataModelSelect=a,void this.formControl.setValue(a)}this.categoryService.ServiceGetOneById(l).subscribe({next:a=>{a.isSuccess?(this.filteredOptions=this.push(a.item),this.dataModelSelect=a.item,this.formControl.setValue(a.item),this.optionChange.emit(a.item)):this.cmsToastrService.typeErrorMessage(a.errorMessage)}})}else{if(typeof l==typeof g.six)return this.filteredOptions=this.push(l),this.dataModelSelect=l,void this.formControl.setValue(l);this.formControl.setValue(null)}}onActionButtonReload(){this.dataModelSelect=new g.six,this.loadOptions()}static \u0275fac=function(a){return new(a||_)(i.Y36(g.FLW),i.Y36(I.e),i.Y36(i.sBO),i.Y36(Y.i),i.Y36(e.sK),i.Y36(g.EAm))};static \u0275cmp=i.Xpm({type:_,selectors:[["app-core-module-selector"]],inputs:{optionDisabled:"optionDisabled",optionSelectFirstItem:"optionSelectFirstItem",optionPlaceholder:"optionPlaceholder",optionLabel:"optionLabel",optionReload:"optionReload",optionSelectForce:"optionSelectForce",optionLoading:"optionLoading"},outputs:{optionChange:"optionChange"},ngContentSelectors:K,decls:10,vars:12,consts:[[1,"input-style","has-borders","no-icon","input-style-always-active","validate-field","mb-4"],[3,"options"],["class","color-highlight",3,"for",4,"ngIf"],["type","text","matInput","",1,"form-control","validate-name",3,"placeholder","formControl","matAutocomplete","id"],[3,"displayWith","optionSelected"],["matauto","matAutocomplete"],[3,"value","disabled",4,"ngFor","ngForOf"],["matSuffix","","matSuffix","","mat-icon-button","","aria-label","Clear",3,"click",4,"ngIf"],[1,"color-highlight",3,"for"],[3,"value","disabled"],["matSuffix","","matSuffix","","mat-icon-button","","aria-label","Clear",3,"click"]],template:function(a,d){if(1&a&&(i.F$t(),i.TgZ(0,"div",0),i._UZ(1,"cms-progress-spinner",1),i.YNc(2,k,2,2,"label",2),i._UZ(3,"input",3),i.TgZ(4,"mat-autocomplete",4,5),i.NdJ("optionSelected",function(h){return d.onActionSelect(h.option.value)}),i.YNc(6,H,3,3,"mat-option",6),i.ALo(7,"async"),i.qZA(),i.YNc(8,Q,2,0,"mat-icon",7),i.Hsn(9),i.qZA()),2&a){const C=i.MAs(5);i.xp6(1),i.Q6J("options",d.loading),i.xp6(1),i.Q6J("ngIf",(null==d.optionLabel?null:d.optionLabel.length)>0),i.xp6(1),i.s9C("placeholder",d.optionPlaceholder),i.MGl("id","app-cms-site-selector-",d.id,""),i.Q6J("formControl",d.formControl)("matAutocomplete",C),i.uIk("disabled",!!d.optionDisabled||null),i.xp6(1),i.Q6J("displayWith",d.displayFn),i.xp6(2),i.Q6J("ngForOf",i.lcZ(7,10,d.filteredOptions)),i.xp6(2),i.Q6J("ngIf",null==d.dataModelSelect?null:d.dataModelSelect.id)}},dependencies:[S.sg,S.O5,p.Fj,p.JJ,p.oH,b.XC,y.ey,b.ZL,D.R9,x.Hw,N.Nt,P.I,S.Ov],encapsulation:2})}return _})()},2852:($,Z,r)=>{r.r(Z),r.d(Z,{CoreSiteCategoryCmsModuleModule:()=>ke});var A=r(8692),i=r(92),p=r(4511),g=r(4592),F=r(4721),w=r(3914),G=r(7360),B=r(4691),L=r(6114),U=r(4252),R=r(2340),I=r(4536),Y=r(1730),e=r(4537),S=r(2607),b=r(4032),y=r(6707),D=r(9665),x=r(2260),N=r(7529),P=r(12),k=r(1838);const H=["vform"];function Q(s,f){if(1&s){const t=e.EpF();e.TgZ(0,"app-cms-enum-record-status-selector",11),e.NdJ("modelChange",function(o){e.CHM(t);const c=e.oxw();return e.KtG(c.dataModel.recordStatus=o)}),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("model",t.dataModel.recordStatus)("optionDisabled",!1)("optionLabel",null==t.fieldsInfo.recordStatus?null:t.fieldsInfo.recordStatus.fieldTitle)("optionRequired",!0)("optionSelectFirstItem",!0)}}function K(s,f){if(1&s){const t=e.EpF();e.TgZ(0,"div",12)(1,"label",13),e._uU(2),e.qZA(),e.TgZ(3,"textarea",14,15),e.NdJ("ngModelChange",function(o){e.CHM(t);const c=e.oxw();return e.KtG(c.dataModel.configValuesJson=o)}),e._uU(5,"                "),e.qZA(),e.TgZ(6,"em"),e._uU(7),e.qZA()()}if(2&s){const t=e.MAs(4),n=e.oxw();e.xp6(2),e.Oqu(null==n.fieldsInfo.configValuesJson?null:n.fieldsInfo.configValuesJson.fieldTitle),e.xp6(1),e.Q6J("ngModel",n.dataModel.configValuesJson)("disabled",!(null!=n.fieldsInfo.configValuesJson&&n.fieldsInfo.configValuesJson.accessAddField)),e.xp6(4),e.hij("",t.value.length," / 10000")}}function W(s,f){if(1&s){const t=e.EpF();e.TgZ(0,"div",16)(1,"button",17),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.onFormCancel())}),e._UZ(2,"i",18),e._uU(3),e.ALo(4,"translate"),e.qZA(),e.TgZ(5,"button",19),e._UZ(6,"i",20),e._uU(7),e.ALo(8,"translate"),e.qZA()()}if(2&s){e.oxw();const t=e.MAs(9);e.xp6(3),e.hij(" ",e.lcZ(4,3,"ACTION.CANCEL")," "),e.xp6(2),e.Q6J("disabled",!t.form.valid),e.xp6(2),e.hij(" ",e.lcZ(8,5,"ACTION.SAVE")," ")}}let _=(()=>{class s extends Y.c{data;dialogRef;coreEnumService;coreSiteCategoryCmsModuleService;cmsToastrService;publicHelper;cdr;translate;requestLinkCmsModuleId=0;requestLinkCmsSiteCategoryId=0;constructor(t,n,o,c,u,m,E,J){super(c,new p.h1N,m),this.data=t,this.dialogRef=n,this.coreEnumService=o,this.coreSiteCategoryCmsModuleService=c,this.cmsToastrService=u,this.publicHelper=m,this.cdr=E,this.translate=J,this.publicHelper.processService.cdr=this.cdr,this.translate.get("MESSAGE.Receiving_information").subscribe(j=>{this.loading.message=j}),t&&(this.requestLinkCmsSiteCategoryId=+t.linkCmsSiteCategoryId||0,this.requestLinkCmsModuleId=+t.linkCmsModuleId||0),this.requestLinkCmsSiteCategoryId>0&&(this.dataModel.linkCmsSiteCategoryId=this.requestLinkCmsSiteCategoryId),this.requestLinkCmsModuleId>0&&(this.dataModel.linkCmsModuleId=this.requestLinkCmsModuleId)}formGroup;fieldsInfo=new Map;dataAccessModel;dataModelResult=new p.y$4;dataModel=new p.h1N;formInfo=new p.LEF;fileManagerOpenForm=!1;ngOnInit(){this.DataGetAccess()}DataAddContent(){this.translate.get("MESSAGE.sending_information_to_the_server").subscribe(n=>{this.formInfo.formAlert=n}),this.formInfo.formError="";const t=this.constructor.name+"main";this.publicHelper.processService.processStart(t),this.coreSiteCategoryCmsModuleService.ServiceAdd(this.dataModel).subscribe({next:n=>{this.formInfo.formSubmitAllow=!0,this.dataModelResult=n,n.isSuccess?(this.translate.get("MESSAGE.registration_completed_successfully").subscribe(o=>{this.formInfo.formAlert=o}),this.cmsToastrService.typeSuccessAdd(),this.dialogRef.close({dialogChangedDate:!0})):(this.translate.get("ERRORMESSAGE.MESSAGE.typeError").subscribe(o=>{this.formInfo.formAlert=o}),this.formInfo.formError=n.errorMessage,this.cmsToastrService.typeErrorMessage(n.errorMessage)),this.publicHelper.processService.processStop(t)},error:n=>{this.formInfo.formSubmitAllow=!0,this.cmsToastrService.typeError(n),this.publicHelper.processService.processStop(t,!1)}})}onFormSubmit(){this.formGroup.valid&&(this.formInfo.formSubmitAllow=!1,this.DataAddContent())}onActionSiteCategorySelect(t){this.dataModel.linkCmsSiteCategoryId=null,t&&t.id>0&&(this.dataModel.linkCmsSiteCategoryId=t.id)}onActionSelectorModuleSelect(t){this.dataModel.linkCmsModuleId=null,t&&t.id>0&&(this.dataModel.linkCmsModuleId=t.id)}onFormCancel(){this.dialogRef.close({dialogChangedDate:!1})}static \u0275fac=function(n){return new(n||s)(e.Y36(I.WI),e.Y36(I.so),e.Y36(p.FLW),e.Y36(p.LCu),e.Y36(S.e),e.Y36(b.i),e.Y36(e.sBO),e.Y36(y.sK))};static \u0275cmp=e.Xpm({type:s,selectors:[["app-core-sitecategorycmsmodule-add"]],viewQuery:function(n,o){if(1&n&&e.Gf(H,5),2&n){let c;e.iGM(c=e.CRH())&&(o.formGroup=c.first)}},features:[e.qOj],decls:17,vars:21,consts:[[3,"options"],[1,"card","card-style"],[1,"content","mb-0"],[1,"mb-0","color-highlight","font-600","font-12"],[3,"ngSubmit"],["vform","ngForm"],[3,"model","optionDisabled","optionLabel","optionRequired","optionSelectFirstItem","modelChange",4,"ngIf"],[3,"optionDisabled","optionLoading","optionSelectForce","optionPlaceholder","optionChange","optionLoadingChange"],[3,"optionDisabled","optionLoading","optionSelectFirstItem","optionSelectForce","optionPlaceholder","optionChange","optionLoadingChange"],["class","input-style has-borders no-icon input-style-always-active validate-field mb-4",4,"ngIf"],["class","form-actions",4,"ngIf"],[3,"model","optionDisabled","optionLabel","optionRequired","optionSelectFirstItem","modelChange"],[1,"input-style","has-borders","no-icon","input-style-always-active","validate-field","mb-4"],["for","dataModel.configValuesJson",1,"color-highlight"],["matInput","","name","dataModel.configValuesJson","type","text","placeholder","ConfigValuesJson","minlength","0","maxlength","10000","rows","6","id","dataModel.configValuesJson",1,"form-control","validate-name",3,"ngModel","disabled","ngModelChange"],["ConfigValuesJson",""],[1,"form-actions"],["type","button",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-gray",3,"click"],[1,"ft-x"],["type","submit",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-green",3,"disabled"],[1,"fa","fa-check-square-o"]],template:function(n,o){1&n&&(e._UZ(0,"cms-progress-spinner",0),e.TgZ(1,"div",1)(2,"div",2)(3,"p",3),e._uU(4),e.qZA(),e.TgZ(5,"p"),e._uU(6),e.ALo(7,"translate"),e.qZA(),e.TgZ(8,"form",4,5),e.NdJ("ngSubmit",function(){return o.onFormSubmit()}),e.YNc(10,Q,1,5,"app-cms-enum-record-status-selector",6),e.TgZ(11,"app-core-sitecategory-selector",7),e.NdJ("optionChange",function(u){return o.onActionSiteCategorySelect(u)})("optionLoadingChange",function(u){return o.loading=u}),e.ALo(12,"translate"),e.qZA(),e.TgZ(13,"app-core-module-selector",8),e.NdJ("optionChange",function(u){return o.onActionSelectorModuleSelect(u)})("optionLoadingChange",function(u){return o.loading=u}),e.ALo(14,"translate"),e.qZA(),e.YNc(15,K,8,4,"div",9),e.YNc(16,W,9,7,"div",10),e.qZA()()()),2&n&&(e.Q6J("options",o.loading),e.xp6(4),e.hij(" ",o.formInfo.formTitle," "),e.xp6(2),e.hij(" ",e.lcZ(7,15,"TITLE.Be_Careful_When_Entering_Information")," "),e.xp6(4),e.Q6J("ngIf",null==o.fieldsInfo.recordStatus?null:o.fieldsInfo.recordStatus.accessWatchField),e.xp6(1),e.Q6J("optionDisabled",!1)("optionLoading",o.loading)("optionSelectForce",o.dataModel.linkCmsSiteCategoryId)("optionPlaceholder",e.lcZ(12,17,"TITLE.SITE_CATEGORY")),e.xp6(2),e.Q6J("optionDisabled",!1)("optionLoading",o.loading)("optionSelectFirstItem",!0)("optionSelectForce",o.dataModel.linkCmsModuleId)("optionPlaceholder",e.lcZ(14,19,"TITLE.MODULE")),e.xp6(2),e.Q6J("ngIf",null==o.fieldsInfo.configValuesJson?null:o.fieldsInfo.configValuesJson.accessWatchField),e.xp6(1),e.Q6J("ngIf",o.formInfo.formSubmitAllow&&!(null!=o.loading&&o.loading.display)))},dependencies:[A.O5,i._Y,i.Fj,i.JJ,i.JL,i.wO,i.nD,i.On,i.F,D.Nt,x.t,N.I,P.T,k.h,y.X$],styles:[".form-body[_ngcontent-%COMP%]{width:500px}@media (max-width: 700px){.form-body[_ngcontent-%COMP%]{display:contents}}#file-manager[_ngcontent-%COMP%]{width:calc(100vw - 16px);height:calc(100vh - 16px)}.recordStatus-1.mat-select-panel[_ngcontent-%COMP%]{background:yellow}.recordStatus-2.mat-select-panel[_ngcontent-%COMP%]{background:black}.recordStatus-3.mat-select-panel[_ngcontent-%COMP%]{background:red}"]})}return s})();var T=r(140);const l=["vform"];function a(s,f){if(1&s){const t=e.EpF();e.TgZ(0,"app-cms-enum-record-status-selector",10),e.NdJ("modelChange",function(o){e.CHM(t);const c=e.oxw();return e.KtG(c.dataModel.recordStatus=o)}),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("model",t.dataModel.recordStatus)("optionDisabled",!1)("optionLabel",null==t.fieldsInfo.recordStatus?null:t.fieldsInfo.recordStatus.fieldTitle)("optionRequired",!0)("optionSelectFirstItem",!0)}}function d(s,f){if(1&s){const t=e.EpF();e.TgZ(0,"div",11)(1,"label",12),e._uU(2),e.qZA(),e.TgZ(3,"textarea",13,14),e.NdJ("ngModelChange",function(o){e.CHM(t);const c=e.oxw();return e.KtG(c.dataModel.configValuesJson=o)}),e._uU(5,"                "),e.qZA(),e.TgZ(6,"em"),e._uU(7),e.qZA()()}if(2&s){const t=e.MAs(4),n=e.oxw();e.xp6(2),e.Oqu(null==n.fieldsInfo.configValuesJson?null:n.fieldsInfo.configValuesJson.fieldTitle),e.xp6(1),e.Q6J("ngModel",n.dataModel.configValuesJson)("disabled",!(null!=n.fieldsInfo.configValuesJson&&n.fieldsInfo.configValuesJson.accessAddField)),e.xp6(4),e.hij("",t.value.length," / 10000")}}function C(s,f){if(1&s){const t=e.EpF();e.TgZ(0,"div",15)(1,"button",16),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.onFormCancel())}),e._UZ(2,"i",17),e._uU(3),e.ALo(4,"translate"),e.qZA(),e.TgZ(5,"button",18),e._UZ(6,"i",19),e._uU(7),e.ALo(8,"translate"),e.qZA()()}if(2&s){e.oxw();const t=e.MAs(9);e.xp6(3),e.hij(" ",e.lcZ(4,3,"ACTION.CANCEL")," "),e.xp6(2),e.Q6J("disabled",!t.form.valid),e.xp6(2),e.hij(" ",e.lcZ(8,5,"ACTION.SAVE")," ")}}let h=(()=>{class s extends T.b{data;dialogRef;coreEnumService;coreSiteCategoryCmsModuleService;cmsToastrService;translate;cdr;publicHelper;requestLinkCmsModuleId=0;requestLinkCmsSiteCategoryId=0;constructor(t,n,o,c,u,m,E,J){super(c,new p.h1N,J),this.data=t,this.dialogRef=n,this.coreEnumService=o,this.coreSiteCategoryCmsModuleService=c,this.cmsToastrService=u,this.translate=m,this.cdr=E,this.publicHelper=J,this.publicHelper.processService.cdr=this.cdr,this.translate.get("MESSAGE.Receiving_information").subscribe(j=>{this.loading.message=j}),t&&(this.requestLinkCmsSiteCategoryId=+t.linkCmsSiteCategoryId||0,this.requestLinkCmsModuleId=+t.linkCmsModuleId||0)}formGroup;dataModelResult=new p.ODe;dataModel=new p.h1N;formInfo=new p.LEF;fileManagerOpenForm=!1;dataAccessModel;ngOnInit(){if(this.requestLinkCmsSiteCategoryId<=0||this.requestLinkCmsModuleId<=0)return this.cmsToastrService.typeErrorComponentAction(),void this.dialogRef.close({dialogChangedDate:!1});this.DataGetOneContent()}DataGetOneContent(){this.translate.get("MESSAGE.Receiving_Information_From_The_Server").subscribe(c=>{this.formInfo.formAlert=c}),this.formInfo.formError="";const t=this.constructor.name+"main";this.publicHelper.processService.processStart(t);const n=new p.Hay;let o=new p.AO3;o.propertyName="LinkCmsSiteCategoryId",o.value=this.requestLinkCmsSiteCategoryId,n.filters.push(o),o=new p.AO3,o.propertyName="LinkCmsModuleId",o.value=this.requestLinkCmsModuleId,n.filters.push(o),n.accessLoad=!0,this.coreSiteCategoryCmsModuleService.setAccessLoad(),this.coreSiteCategoryCmsModuleService.setAccessDataType(p.dR.Editor),this.coreSiteCategoryCmsModuleService.ServiceGetAll(n).subscribe({next:c=>{this.dataAccessModel=c.access,this.fieldsInfo=this.publicHelper.fieldInfoConvertor(c.access),this.dataModel=c.item,c.isSuccess?c.listItems&&c.listItems.length>0?(this.dataModel=c.listItems[0],this.formInfo.formTitle=this.formInfo.formTitle+" "+c.item.linkCmsModuleId+"<==>"+c.item.linkCmsSiteCategoryId,this.formInfo.formAlert=""):this.cmsToastrService.typeErrorMessage(this.translate.instant("MESSAGE.Module_not_found_for_editing")):(this.translate.get("ERRORMESSAGE.MESSAGE.typeError").subscribe(u=>{this.formInfo.formAlert=u}),this.formInfo.formError=c.errorMessage,this.cmsToastrService.typeErrorMessage(c.errorMessage)),this.publicHelper.processService.processStop(t)},error:c=>{this.cmsToastrService.typeError(c),this.publicHelper.processService.processStop(t,!1)}})}DataEditContent(){this.translate.get("MESSAGE.sending_information_to_the_server").subscribe(n=>{this.formInfo.formAlert=n}),this.formInfo.formError="";const t=this.constructor.name+"main";this.translate.get("MESSAGE.sending_information_to_the_server").subscribe(n=>{this.publicHelper.processService.processStart(t,n)}),this.coreSiteCategoryCmsModuleService.ServiceEdit(this.dataModel).subscribe({next:n=>{this.formInfo.formSubmitAllow=!0,this.dataModelResult=n,n.isSuccess?(this.translate.get("MESSAGE.registration_completed_successfully").subscribe(o=>{this.formInfo.formAlert=o}),this.cmsToastrService.typeSuccessEdit(),this.dialogRef.close({dialogChangedDate:!0})):(this.translate.get("ERRORMESSAGE.MESSAGE.typeError").subscribe(o=>{this.formInfo.formAlert=o}),this.formInfo.formError=n.errorMessage,this.cmsToastrService.typeErrorMessage(n.errorMessage)),this.publicHelper.processService.processStop(t)},error:n=>{this.formInfo.formSubmitAllow=!0,this.cmsToastrService.typeError(n),this.publicHelper.processService.processStop(t,!1)}})}onActionSiteCategorySelect(t){this.dataModel.linkCmsSiteCategoryId=null,t&&t.id>0&&(this.dataModel.linkCmsSiteCategoryId=t.id)}onActionSelectorModuleSelect(t){this.dataModel.linkCmsModuleId=null,t&&t.id>0&&(this.dataModel.linkCmsModuleId=t.id)}onFormSubmit(){this.formGroup.valid&&(this.formInfo.formSubmitAllow=!1,this.DataEditContent())}onFormCancel(){this.dialogRef.close({dialogChangedDate:!1})}onStepClick(t,n){t.previouslySelectedIndex<t.selectedIndex&&(this.formGroup.valid||(this.cmsToastrService.typeErrorFormInvalid(),setTimeout(()=>{n.selectedIndex=t.previouslySelectedIndex},10)))}static \u0275fac=function(n){return new(n||s)(e.Y36(I.WI),e.Y36(I.so),e.Y36(p.FLW),e.Y36(p.LCu),e.Y36(S.e),e.Y36(y.sK),e.Y36(e.sBO),e.Y36(b.i))};static \u0275cmp=e.Xpm({type:s,selectors:[["app-core-sitecategorycmsmodule-edit"]],viewQuery:function(n,o){if(1&n&&e.Gf(l,5),2&n){let c;e.iGM(c=e.CRH())&&(o.formGroup=c.first)}},features:[e.qOj],decls:17,vars:20,consts:[[3,"options"],[1,"card","card-style"],[1,"content","mb-0"],[1,"mb-0","color-highlight","font-600","font-12"],[3,"ngSubmit"],["vform","ngForm"],[3,"model","optionDisabled","optionLabel","optionRequired","optionSelectFirstItem","modelChange",4,"ngIf"],[3,"optionLoading","optionDisabled","optionSelectForce","optionPlaceholder","optionChange","optionLoadingChange"],["class","input-style has-borders no-icon input-style-always-active validate-field mb-4",4,"ngIf"],["class","form-actions",4,"ngIf"],[3,"model","optionDisabled","optionLabel","optionRequired","optionSelectFirstItem","modelChange"],[1,"input-style","has-borders","no-icon","input-style-always-active","validate-field","mb-4"],["for","dataModel.configValuesJson",1,"color-highlight"],["matInput","","name","dataModel.configValuesJson","type","text","placeholder","ConfigValuesJson","minlength","0","maxlength","10000","rows","6","id","dataModel.configValuesJson",1,"form-control","validate-name",3,"ngModel","disabled","ngModelChange"],["ConfigValuesJson",""],[1,"form-actions"],["type","button",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-gray",3,"click"],[1,"ft-x"],["type","submit",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-green",3,"disabled"],[1,"fa","fa-check-square-o"]],template:function(n,o){1&n&&(e._UZ(0,"cms-progress-spinner",0),e.TgZ(1,"div",1)(2,"div",2)(3,"p",3),e._uU(4),e.qZA(),e.TgZ(5,"p"),e._uU(6),e.ALo(7,"translate"),e.qZA(),e.TgZ(8,"form",4,5),e.NdJ("ngSubmit",function(){return o.onFormSubmit()}),e.YNc(10,a,1,5,"app-cms-enum-record-status-selector",6),e.TgZ(11,"app-core-sitecategory-selector",7),e.NdJ("optionChange",function(u){return o.onActionSiteCategorySelect(u)})("optionLoadingChange",function(u){return o.loading=u}),e.ALo(12,"translate"),e.qZA(),e.TgZ(13,"app-core-module-selector",7),e.NdJ("optionChange",function(u){return o.onActionSelectorModuleSelect(u)})("optionLoadingChange",function(u){return o.loading=u}),e.ALo(14,"translate"),e.qZA(),e.YNc(15,d,8,4,"div",8),e.YNc(16,C,9,7,"div",9),e.qZA()()()),2&n&&(e.Q6J("options",o.loading),e.xp6(4),e.hij(" ",o.formInfo.formTitle," "),e.xp6(2),e.hij(" ",e.lcZ(7,14,"TITLE.Be_Careful_When_Entering_Information")," "),e.xp6(4),e.Q6J("ngIf",null==o.fieldsInfo.recordStatus?null:o.fieldsInfo.recordStatus.accessWatchField),e.xp6(1),e.Q6J("optionLoading",o.loading)("optionDisabled",!(null!=o.fieldsInfo.linkCmsSiteCategoryId&&o.fieldsInfo.linkCmsSiteCategoryId.accessEditField))("optionSelectForce",o.dataModel.linkCmsSiteCategoryId)("optionPlaceholder",e.lcZ(12,16,"TITLE.SITE_CATEGORY")),e.xp6(2),e.Q6J("optionLoading",o.loading)("optionDisabled",!(null!=o.fieldsInfo.linkCmsModuleId&&o.fieldsInfo.linkCmsModuleId.accessEditField))("optionSelectForce",o.dataModel.linkCmsModuleId)("optionPlaceholder",e.lcZ(14,18,"TITLE.MODULE")),e.xp6(2),e.Q6J("ngIf",null==o.fieldsInfo.configValuesJson?null:o.fieldsInfo.configValuesJson.accessWatchField),e.xp6(1),e.Q6J("ngIf",o.formInfo.formSubmitAllow&&!(null!=o.loading&&o.loading.display)))},dependencies:[A.O5,i._Y,i.Fj,i.JJ,i.JL,i.wO,i.nD,i.On,i.F,D.Nt,x.t,N.I,P.T,k.h,y.X$],styles:[".form-body[_ngcontent-%COMP%]{width:500px}@media (max-width: 700px){.form-body[_ngcontent-%COMP%]{display:contents}}#file-manager[_ngcontent-%COMP%]{width:calc(100vw - 16px);height:calc(100vh - 16px)}.recordStatus-1.mat-select-panel[_ngcontent-%COMP%]{background:yellow}.recordStatus-2.mat-select-panel[_ngcontent-%COMP%]{background:black}.recordStatus-3.mat-select-panel[_ngcontent-%COMP%]{background:red}"]})}return s})();var O=r(727),V=r(6845),te=r(9638),oe=r(3331),z=r(3319),ie=r(3538),ne=r(4639),X=r(6558),v=r(418),se=r(1850),le=r(8564),ae=r(7980),re=r(3673),ce=r(6639),de=r(5897);function ue(s,f){if(1&s){const t=e.EpF();e.TgZ(0,"a",11),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.onActionBackToParentModule())}),e._UZ(1,"i",38),e.qZA()}}function pe(s,f){if(1&s){const t=e.EpF();e.TgZ(0,"a",11),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.onActionBackToParent())}),e._UZ(1,"i",38),e.qZA()}}function me(s,f){if(1&s){const t=e.EpF();e.TgZ(0,"div",39)(1,"a",40),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.onActionButtonNewRow())}),e._UZ(2,"i",41)(3,"br"),e.qZA(),e.TgZ(4,"p",42),e._uU(5),e.ALo(6,"translate"),e.qZA()()}2&s&&(e.xp6(5),e.Oqu(e.lcZ(6,1,"ACTION.ADD")))}function Ce(s,f){if(1&s){const t=e.EpF();e.TgZ(0,"div",39)(1,"a",43),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.onActionButtonEditRow(o.tableRowSelected))}),e._UZ(2,"i",44)(3,"br"),e.qZA(),e.TgZ(4,"p",42),e._uU(5),e.ALo(6,"translate"),e.qZA()()}2&s&&(e.xp6(5),e.Oqu(e.lcZ(6,1,"ACTION.EDIT")))}function fe(s,f){if(1&s){const t=e.EpF();e.TgZ(0,"div",39)(1,"a",45),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.onActionButtonDeleteRow(o.tableRowSelected))}),e._UZ(2,"i",46)(3,"br"),e.qZA(),e.TgZ(4,"p",42),e._uU(5),e.ALo(6,"translate"),e.qZA()()}2&s&&(e.xp6(5),e.Oqu(e.lcZ(6,1,"ACTION.DELETE")))}function ge(s,f){if(1&s){const t=e.EpF();e.TgZ(0,"div",39)(1,"a",47),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.onActionButtonConfigMainAdminRow(o.tableRowSelected))}),e._UZ(2,"i",48)(3,"br"),e.qZA(),e.TgZ(4,"p",42),e._uU(5),e.ALo(6,"translate"),e.qZA()()}2&s&&(e.xp6(5),e.Oqu(e.lcZ(6,1,"ACTION.MODULE_MANAGEMENT_SETTING")))}function _e(s,f){if(1&s&&(e.TgZ(0,"mat-header-cell",49),e._uU(1),e.qZA()),2&s){const t=e.oxw();e.xp6(1),e.hij(" ",null==t.fieldsInfo.linkCmsModuleId?null:t.fieldsInfo.linkCmsModuleId.fieldTitle," ")}}function he(s,f){if(1&s&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&s){const t=f.$implicit;e.xp6(1),e.hij(" ",t.linkCmsModuleId," ")}}function Se(s,f){if(1&s&&(e.TgZ(0,"mat-header-cell",49),e._uU(1),e.qZA()),2&s){const t=e.oxw();e.xp6(1),e.hij(" ",null==t.fieldsInfo.linkCmsSiteCategoryId?null:t.fieldsInfo.linkCmsSiteCategoryId.fieldTitle," ")}}function Me(s,f){if(1&s&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&s){const t=f.$implicit;e.xp6(1),e.hij(" ",t.linkCmsSiteCategoryId," ")}}function Ae(s,f){if(1&s&&(e.TgZ(0,"mat-header-cell",49),e._uU(1),e.qZA()),2&s){const t=e.oxw();e.xp6(1),e.hij(" ",null==t.fieldsInfo.recordStatus?null:t.fieldsInfo.recordStatus.fieldTitle," ")}}const ye=function(s){return{display:s}};function ve(s,f){if(1&s&&e._UZ(0,"select",52),2&s){const t=e.oxw().$implicit,n=e.oxw();e.Q6J("contentService",n.contentService)("row",t)("ngStyle",e.VKq(3,ye,t.id===(null==n.tableRowSelected?null:n.tableRowSelected.id)?"":"none"))}}function Ie(s,f){if(1&s&&(e.TgZ(0,"mat-cell",50),e.ALo(1,"statusCellClass"),e._UZ(2,"i",50),e.ALo(3,"statusIconClass"),e.YNc(4,ve,1,5,"select",51),e.qZA()),2&s){const t=f.$implicit,n=e.oxw();e.Q6J("ngClass",e.lcZ(1,3,t.recordStatus)),e.xp6(2),e.Q6J("ngClass",e.lcZ(3,5,t.recordStatus)),e.xp6(2),e.Q6J("ngIf",null==n.dataModelResult||null==n.dataModelResult.access?null:n.dataModelResult.access.accessEditRow)}}function be(s,f){1&s&&(e.TgZ(0,"mat-header-cell",49),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&s&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"TITLE.SITE_CATEGORY")," "))}function Te(s,f){if(1&s&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&s){const t=f.$implicit;e.xp6(1),e.hij(" ",t.virtual_CmsSiteCategory.title," ")}}function Ee(s,f){1&s&&(e.TgZ(0,"mat-header-cell",49),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&s&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"TITLE.MODULE")," "))}function Le(s,f){if(1&s&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&s){const t=f.$implicit;e.xp6(1),e.hij(" ",t.virtual_CmsModule.title," ")}}function Re(s,f){1&s&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&s&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"TITLE.OPTION")," "))}function Oe(s,f){if(1&s&&(e.TgZ(0,"mat-cell",53)(1,"button",54)(2,"mat-icon"),e._uU(3,"more_vert"),e.qZA()(),e._UZ(4,"mat-menu",null,55),e.qZA()),2&s){const t=e.MAs(5);e.xp6(1),e.Q6J("matMenuTriggerFor",t)}}function De(s,f){1&s&&e._UZ(0,"mat-header-row")}const Ze=function(s){return{background:s}};function we(s,f){if(1&s){const t=e.EpF();e.TgZ(0,"mat-row",56),e.NdJ("click",function(){const c=e.CHM(t).$implicit,u=e.oxw();return e.KtG(u.onActionTableRowSelect(c))}),e.qZA()}if(2&s){const t=f.$implicit,n=e.oxw();e.Q6J("ngStyle",e.VKq(1,Ze,t.linkCmsModuleId===(null==n.tableRowSelected?null:n.tableRowSelected.linkCmsModuleId)&&t.linkCmsSiteCategoryId===(null==n.tableRowSelected?null:n.tableRowSelected.linkCmsSiteCategoryId)?"#d3d3da":""))}}const xe=function(){return[5,10,20,100]};let q=(()=>{class s extends U.R{contentService;cmsToastrService;router;activatedRoute;tokenHelper;cmsConfirmationDialogService;cdr;translate;pageInfo;publicHelper;dialog;requestLinkCmsModuleId=0;requestLinkCmsSiteCategoryId=0;constructor(t,n,o,c,u,m,E,J,j,ee,Je){if(super(t,new p.h1N,ee,u),this.contentService=t,this.cmsToastrService=n,this.router=o,this.activatedRoute=c,this.tokenHelper=u,this.cmsConfirmationDialogService=m,this.cdr=E,this.translate=J,this.pageInfo=j,this.publicHelper=ee,this.dialog=Je,this.publicHelper.processService.cdr=this.cdr,this.translate.get("MESSAGE.Receiving_information").subscribe(M=>{this.loading.message=M}),this.optionsSearch.parentMethods={onSubmit:M=>this.onSubmitOptionsSearch(M)},this.filteModelContent.sortColumn="Id",this.filteModelContent.sortType=p.oYR.Descending,this.requestLinkCmsModuleId=+Number(this.activatedRoute.snapshot.paramMap.get("LinkCmsModuleId")),this.requestLinkCmsSiteCategoryId=+Number(this.activatedRoute.snapshot.paramMap.get("LinkCmsSiteCategoryId")),this.requestLinkCmsModuleId>0){const M=new p.AO3;M.propertyName="LinkCmsModuleId",M.value=this.requestLinkCmsModuleId,this.filteModelContent.filters.push(M)}if(this.requestLinkCmsSiteCategoryId>0){const M=new p.AO3;M.propertyName="LinkCmsSiteCategoryId",M.value=this.requestLinkCmsSiteCategoryId,this.filteModelContent.filters.push(M)}}comment;author;dataSource;flag=!1;tableContentSelected=[];filteModelContent=new p.Hay;tabledisplayedColumns=[];tabledisplayedColumnsSource=["LinkCmsModuleId","LinkCmsSiteCategoryId","RecordStatus","virtual_CmsSiteCategory.title","virtual_CmsModule.title"];expandedElement;cmsApiStoreSubscribe;ngOnInit(){this.filteModelContent.sortColumn="LinkCmsModuleId",this.tokenHelper.getCurrentToken().then(t=>{this.tokenInfo=t,this.DataGetAll()}),this.cmsApiStoreSubscribe=this.tokenHelper.getCurrentTokenOnChange().subscribe({next:t=>{this.tokenInfo=t,this.DataGetAll()}})}ngOnDestroy(){this.cmsApiStoreSubscribe.unsubscribe()}DataGetAll(){this.tabledisplayedColumns=this.publicHelper.TabledisplayedColumnsCheckByAllDataAccess(this.tabledisplayedColumnsSource,[],this.tokenInfo),this.tableRowsSelected=[],this.onActionTableRowSelect(new p.h1N);const t=this.constructor.name+"main";this.translate.get("MESSAGE.get_information_list").subscribe(o=>{this.publicHelper.processService.processStart(t,o)}),this.filteModelContent.accessLoad=!0;const n=JSON.parse(JSON.stringify(this.filteModelContent));this.contentService.ServiceGetAllEditor(n).subscribe({next:o=>{o.isSuccess?(this.fieldsInfo=this.publicHelper.fieldInfoConvertor(o.access),this.dataModelResult=o,this.tableSource.data=o.listItems,this.optionsStatist?.data?.show&&this.onActionButtonStatist(!0),this.optionsSearch.childMethods&&this.optionsSearch.childMethods.setAccess(o.access)):this.cmsToastrService.typeErrorMessage(o.errorMessage),this.publicHelper.processService.processStop(t)},error:o=>{this.cmsToastrService.typeError(o),this.publicHelper.processService.processStop(t,!1)}})}onTableSortData(t){this.tableSource&&this.tableSource.sort&&this.tableSource.sort.active===t.active?"asc"===this.tableSource.sort.start?(t.start="desc",this.filteModelContent.sortColumn=t.active,this.filteModelContent.sortType=p.oYR.Descending):"desc"===this.tableSource.sort.start?(t.start="asc",this.filteModelContent.sortColumn="",this.filteModelContent.sortType=p.oYR.Ascending):t.start="desc":(this.filteModelContent.sortColumn=t.active,this.filteModelContent.sortType=p.oYR.Descending),this.tableSource.sort=t,this.filteModelContent.currentPageNumber=0,this.DataGetAll()}onTablePageingData(t){this.filteModelContent.currentPageNumber=t.pageIndex+1,this.filteModelContent.rowPerPage=t.pageSize,this.DataGetAll()}onActionButtonNewRow(){null!=this.dataModelResult&&null!=this.dataModelResult.access&&this.dataModelResult.access.accessAddRow?this.dialog.open(_,{height:"90%",panelClass:this.tokenHelper.isMobile?"dialog-fullscreen":"dialog-min",enterAnimationDuration:R.N.cmsViewConfig.enterAnimationDuration,exitAnimationDuration:R.N.cmsViewConfig.exitAnimationDuration,data:{linkCmsModuleId:this.requestLinkCmsModuleId,linkCmsSiteCategoryId:this.requestLinkCmsSiteCategoryId}}).afterClosed().subscribe(o=>{o&&o.dialogChangedDate&&this.DataGetAll()}):this.cmsToastrService.typeErrorAccessAdd()}onActionButtonEditRow(t=this.tableRowSelected){t&&t.linkCmsModuleId&&0!==t.linkCmsModuleId&&t.linkCmsSiteCategoryId&&0!==t.linkCmsSiteCategoryId?(this.onActionTableRowSelect(t),null!=this.dataModelResult&&null!=this.dataModelResult.access&&this.dataModelResult.access.accessEditRow?this.dialog.open(h,{height:"90%",panelClass:this.tokenHelper.isMobile?"dialog-fullscreen":"dialog-min",enterAnimationDuration:R.N.cmsViewConfig.enterAnimationDuration,exitAnimationDuration:R.N.cmsViewConfig.exitAnimationDuration,data:{linkCmsModuleId:this.tableRowSelected.linkCmsModuleId,linkCmsSiteCategoryId:this.tableRowSelected.linkCmsSiteCategoryId}}).afterClosed().subscribe(c=>{c&&c.dialogChangedDate&&this.DataGetAll()}):this.cmsToastrService.typeErrorAccessEdit()):this.cmsToastrService.typeErrorSelectedRow()}onActionButtonDeleteRow(t=this.tableRowSelected){if(t&&t.linkCmsModuleId&&0!==t.linkCmsModuleId&&t.linkCmsSiteCategoryId&&0!==t.linkCmsSiteCategoryId)if(this.onActionTableRowSelect(t),null!=this.dataModelResult&&null!=this.dataModelResult.access&&this.dataModelResult.access.accessDeleteRow){var n="",o="";this.translate.get(["MESSAGE.Please_Confirm","MESSAGE.Do_you_want_to_delete_this_content"]).subscribe(c=>{n=c["MESSAGE.Please_Confirm"],o=c["MESSAGE.Do_you_want_to_delete_this_content"]+"?<br> ( "+this.tableRowSelected.virtual_CmsModule.title+"<==>"+this.tableRowSelected.virtual_CmsSiteCategory.title+" ) "}),this.cmsConfirmationDialogService.confirm(n,o).then(c=>{if(c){const u=this.constructor.name+"main";this.publicHelper.processService.processStart(u),this.contentService.ServiceDeleteEntity(this.tableRowSelected).subscribe({next:m=>{m.isSuccess?(this.cmsToastrService.typeSuccessRemove(),this.DataGetAll()):this.cmsToastrService.typeErrorRemove(),this.publicHelper.processService.processStop(u)},error:m=>{this.cmsToastrService.typeError(m),this.publicHelper.processService.processStop(u,!1)}})}}).catch(()=>{})}else this.cmsToastrService.typeErrorAccessDelete();else this.translate.get("MESSAGE.no_row_selected_to_delete").subscribe(c=>{this.cmsToastrService.typeErrorSelected(c)})}onActionButtonGoToSiteCategoryCmsModuleList(t=this.tableRowSelected){t&&t.linkCmsModuleId&&0!==t.linkCmsModuleId&&t.linkCmsSiteCategoryId&&0!==t.linkCmsSiteCategoryId?(this.onActionTableRowSelect(t),this.router.navigate(["/core/siteSiteCategoryCmsModule/",this.tableRowSelected.id])):this.translate.get("MESSAGE.no_row_selected_to_display").subscribe(n=>{this.cmsToastrService.typeErrorSelected(n)})}onActionButtonStatist(t=!this.optionsStatist.data.show){if(this.optionsStatist.data.show=t,!this.optionsStatist.data.show)return;const n=new Map;this.translate.get("MESSAGE.Active").subscribe(m=>{n.set(m,0)}),this.translate.get("MESSAGE.All").subscribe(m=>{n.set(m,0)});const o=this.constructor.name+".ServiceStatist";this.translate.get("MESSAGE.Get_the_statist").subscribe(m=>{this.publicHelper.processService.processStart(o,m)}),this.contentService.ServiceGetCount(this.filteModelContent).subscribe({next:m=>{m.isSuccess?(this.translate.get("MESSAGE.All").subscribe(E=>{n.set(E,m.totalRowCount)}),this.optionsStatist.childMethods.setStatistValue(n)):this.cmsToastrService.typeErrorMessage(m.errorMessage),this.publicHelper.processService.processStop(o)},error:m=>{this.cmsToastrService.typeError(m),this.publicHelper.processService.processStop(o,!1)}});const c=JSON.parse(JSON.stringify(this.filteModelContent)),u=new p.AO3;u.propertyName="RecordStatus",u.value=p.Anr.Available,c.filters.push(u),this.contentService.ServiceGetCount(c).subscribe({next:m=>{m.isSuccess?(this.translate.get("MESSAGE.Active").subscribe(E=>{n.set(E,m.totalRowCount)}),this.optionsStatist.childMethods.setStatistValue(n)):this.cmsToastrService.typeErrorMessage(m.errorMessage),this.publicHelper.processService.processStop(o)},error:m=>{this.cmsToastrService.typeError(m),this.publicHelper.processService.processStop(o,!1)}})}onActionButtonConfigMainAdminRow(t=this.tableRowSelected){t&&t.linkCmsModuleId&&0!==t.linkCmsModuleId&&t.linkCmsSiteCategoryId&&0!==t.linkCmsSiteCategoryId?(this.onActionTableRowSelect(t),this.router.navigate([t.virtual_CmsModule.className+"/config/mainadmin/"])):this.translate.get("ERRORMESSAGE.MESSAGE.typeErrorSelectedRow").subscribe(n=>{this.cmsToastrService.typeErrorSelected(n)})}onActionButtonReload(){this.DataGetAll()}onSubmitOptionsSearch(t){this.filteModelContent.filters=t,this.DataGetAll()}onActionBackToParent(){this.router.navigate(["/core/sitecategory/"])}onActionBackToParentModule(){this.router.navigate(["/core/module/"])}static \u0275fac=function(n){return new(n||s)(e.Y36(p.LCu),e.Y36(S.e),e.Y36(L.F0),e.Y36(L.gz),e.Y36(O.v),e.Y36(w.s),e.Y36(e.sBO),e.Y36(y.sK),e.Y36(V.Z),e.Y36(b.i),e.Y36(I.uw))};static \u0275cmp=e.Xpm({type:s,selectors:[["app-core-sitecategorycmsmodule-list"]],features:[e.qOj],decls:57,vars:30,consts:[[3,"optionGuideNoticeKey","optionActionGuideNoticeDisplay","optionLoading","optionTreeDisplay","optionActionRowId","optionActionRowDisplayMenu","optionSelectRowItemTitle","optionActionGuideNoticeDisplayChange","optionOnActionButtonMemoRow","optionOnActionButtonMemo","optionOnActionButtonExport","optionOnActionButtonPrintRow"],["cms-tree",""],["cms-header",""],["cms-action-header",""],[1,"d-flex","justify-content-between","flex-wrap"],[1,"justify-content-end"],[1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-highlight"],[1,"custom-slide-toggle",3,"ngModel","ngModelChange"],[3,"click"],[1,"justify-content-start"],["type","button","class","btn font-13 font-600 btn-s m-1 rounded-s shadow-xl border-0 gradient-highlight","target","_blank",3,"click",4,"ngIf"],["type","button","target","_blank",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-highlight",3,"click"],[1,"fa-solid","fa-info","font-18",2,"color","#ffffff"],[1,"fa-solid","fa-rotate-right","font-18",2,"color","#ffffff"],["cms-action-main",""],["class","col-4",4,"ngIf"],["cms-action-row",""],["cms-action-area",""],[3,"options","optionsChange"],["cms-body",""],["matSort","",3,"dataSource","matSortChange"],["tableSort","matSort"],["matColumnDef","LinkCmsModuleId"],["mat-sort-header","",4,"matHeaderCellDef"],[4,"matCellDef"],["matColumnDef","LinkCmsSiteCategoryId"],["matColumnDef","RecordStatus"],[3,"ngClass",4,"matCellDef"],["matColumnDef","virtual_CmsSiteCategory.title"],["matColumnDef","virtual_CmsModule.title"],["matColumnDef","Action"],[4,"matHeaderCellDef"],["class"," Action",4,"matCellDef"],[4,"matHeaderRowDef"],[3,"ngStyle","click",4,"matRowDef","matRowDefColumns"],["cms-footer",""],[3,"length","pageIndex","pageSize","pageSizeOptions","page"],["paginator",""],[1,"fa-solid","fa-arrow-left","font-18",2,"color","#ffffff"],[1,"col-4"],["type","button","target","_blank",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-teal",3,"click"],[1,"fa-solid","fa-plus","font-18",2,"color","#FFFFFF"],[1,"font-11","text-center","opacity-70"],["target","_blank",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-magenta",3,"click"],[1,"fa-solid","fa-pen","font-18",2,"color","#FFFFFF"],["target","_blank",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-red",3,"click"],[1,"fa-solid","fa-trash","font-18",2,"color","#ffffff"],["target","_blank",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-highlight",3,"click"],[1,"fa-solid","fa-gear","font-18",2,"color","#ffffff"],["mat-sort-header",""],[3,"ngClass"],["matNativeControl","","cmsRecordStatusSelfSave","","style","background: none; border: none;",3,"contentService","row","ngStyle",4,"ngIf"],["matNativeControl","","cmsRecordStatusSelfSave","",2,"background","none","border","none",3,"contentService","row","ngStyle"],[1,"Action"],["type","button","mat-icon-button","","aria-label","Action Menu",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-highlight",3,"matMenuTriggerFor"],["actionMenu","matMenu"],[3,"ngStyle","click"]],template:function(n,o){if(1&n){const c=e.EpF();e.TgZ(0,"app-cms-html-list",0),e.NdJ("optionActionGuideNoticeDisplayChange",function(m){return o.viewGuideNotice=m})("optionOnActionButtonMemoRow",function(){return o.onActionButtonMemoRow()})("optionOnActionButtonMemo",function(){return o.onActionButtonMemo()})("optionOnActionButtonExport",function(){return o.onActionButtonExport()})("optionOnActionButtonPrintRow",function(){return o.onActionButtonPrintRow()}),e.ynx(1,1),e._uU(2," -------------------------------------- "),e.BQk(),e.GkF(3,2),e.ynx(4,3),e.TgZ(5,"div",4)(6,"div",5)(7,"a",6)(8,"mat-slide-toggle",7),e.NdJ("ngModelChange",function(m){return o.optionsSearch.data.show=m}),e.qZA(),e._uU(9),e.ALo(10,"translate"),e.qZA(),e.TgZ(11,"a",6)(12,"mat-slide-toggle",8),e.NdJ("click",function(){return o.onActionButtonStatist()}),e.qZA(),e._uU(13),e.ALo(14,"translate"),e.qZA()(),e.TgZ(15,"div",9),e.YNc(16,ue,2,0,"a",10),e.YNc(17,pe,2,0,"a",10),e.TgZ(18,"a",11),e.NdJ("click",function(){return o.viewGuideNotice=!o.viewGuideNotice}),e._UZ(19,"i",12),e.qZA(),e.TgZ(20,"a",11),e.NdJ("click",function(){return o.onActionButtonReload()}),e._UZ(21,"i",13),e.qZA()()(),e.BQk(),e.ynx(22,14),e.YNc(23,me,7,3,"div",15),e.BQk(),e.ynx(24,16),e.YNc(25,Ce,7,3,"div",15),e.YNc(26,fe,7,3,"div",15),e.YNc(27,ge,7,3,"div",15),e.BQk(),e.ynx(28,17),e.TgZ(29,"app-cms-search-list",18),e.NdJ("optionsChange",function(m){return o.optionsSearch=m}),e.qZA(),e.TgZ(30,"app-cms-statist-list",18),e.NdJ("optionsChange",function(m){return o.optionsStatist=m}),e.qZA(),e.BQk(),e.ynx(31,19),e.TgZ(32,"mat-table",20,21),e.NdJ("matSortChange",function(){e.CHM(c);const m=e.MAs(33);return e.KtG(o.onTableSortData(m))}),e.ynx(34,22),e.YNc(35,_e,2,1,"mat-header-cell",23),e.YNc(36,he,2,1,"mat-cell",24),e.BQk(),e.ynx(37,25),e.YNc(38,Se,2,1,"mat-header-cell",23),e.YNc(39,Me,2,1,"mat-cell",24),e.BQk(),e.ynx(40,26),e.YNc(41,Ae,2,1,"mat-header-cell",23),e.YNc(42,Ie,5,7,"mat-cell",27),e.BQk(),e.ynx(43,28),e.YNc(44,be,3,3,"mat-header-cell",23),e.YNc(45,Te,2,1,"mat-cell",24),e.BQk(),e.ynx(46,29),e.YNc(47,Ee,3,3,"mat-header-cell",23),e.YNc(48,Le,2,1,"mat-cell",24),e.BQk(),e.ynx(49,30),e.YNc(50,Re,3,3,"mat-header-cell",31),e.YNc(51,Oe,6,1,"mat-cell",32),e.BQk(),e.YNc(52,De,1,0,"mat-header-row",33),e.YNc(53,we,1,3,"mat-row",34),e.qZA(),e.BQk(),e.ynx(54,35),e.TgZ(55,"mat-paginator",36,37),e.NdJ("page",function(m){return o.onTablePageingData(m)}),e.qZA(),e.BQk(),e.qZA()}2&n&&(e.Q6J("optionGuideNoticeKey","")("optionActionGuideNoticeDisplay",o.viewGuideNotice)("optionLoading",o.loading)("optionTreeDisplay",!1)("optionActionRowId",null==o.tableRowSelected?null:o.tableRowSelected.id)("optionActionRowDisplayMenu",o.tableRowSelectDoubleClick)("optionSelectRowItemTitle",null==o.tableRowSelected?null:o.tableRowSelected.id),e.xp6(8),e.Q6J("ngModel",o.optionsSearch.data.show),e.xp6(1),e.hij("",e.lcZ(10,25,"ACTION.SEARCH")," "),e.xp6(4),e.hij("",e.lcZ(14,27,"ACTION.STATIST")," "),e.xp6(3),e.Q6J("ngIf",o.requestLinkCmsModuleId>0),e.xp6(1),e.Q6J("ngIf",o.requestLinkCmsSiteCategoryId>0),e.xp6(6),e.Q6J("ngIf",null==o.dataModelResult||null==o.dataModelResult.access?null:o.dataModelResult.access.accessAddRow),e.xp6(2),e.Q6J("ngIf",null==o.dataModelResult||null==o.dataModelResult.access?null:o.dataModelResult.access.accessEditRow),e.xp6(1),e.Q6J("ngIf",null==o.dataModelResult||null==o.dataModelResult.access?null:o.dataModelResult.access.accessDeleteRow),e.xp6(1),e.Q6J("ngIf",o.tokenInfo.userAccessAdminAllowToProfessionalData),e.xp6(2),e.Q6J("options",o.optionsSearch),e.xp6(1),e.Q6J("options",o.optionsStatist),e.xp6(2),e.Q6J("dataSource",o.tableSource),e.xp6(20),e.Q6J("matHeaderRowDef",o.tabledisplayedColumns),e.xp6(1),e.Q6J("matRowDefColumns",o.tabledisplayedColumns),e.xp6(2),e.Q6J("length",o.dataModelResult.totalRowCount)("pageIndex",o.dataModelResult.currentPageNumber-1)("pageSize",o.dataModelResult.rowPerPage)("pageSizeOptions",e.DdM(29,xe)))},dependencies:[A.mk,A.O5,A.PC,i.JJ,i.On,te.RK,oe.Hw,D.Nt,z.VK,z.p6,ie.NW,ne.Rr,X.YE,X.nU,v.BZ,v.fO,v.as,v.w1,v.Dz,v.nj,v.ge,v.ev,v.XQ,v.Gk,se.y,le.q,ae.Z,re.G,y.X$,ce.G,de.Y],encapsulation:2})}return s})();const Ne=[{path:"",children:[{path:"",component:q},{path:"LinkCmsModuleId/:LinkCmsModuleId",component:q},{path:"LinkCmsSiteCategoryId/:LinkCmsSiteCategoryId",component:q}]}];let Pe=(()=>{class s{static \u0275fac=function(n){return new(n||s)};static \u0275mod=e.oAB({type:s});static \u0275inj=e.cJS({imports:[L.Bz.forChild(Ne),L.Bz]})}return s})(),ke=(()=>{class s{static \u0275fac=function(n){return new(n||s)};static \u0275mod=e.oAB({type:s});static \u0275inj=e.cJS({providers:[p.LCu,w.s,p.EAm],imports:[A.ez,i.u5,Pe,i.UX.withConfig({warnOnNgModelWithFormControl:"never"}),g.m,F.UM,G.CoreModuleModule,B.CoreSiteCategoryCmsModule]})}return s})()},1838:($,Z,r)=>{r.d(Z,{h:()=>W});var A=r(8239),i=r(4537),p=r(92),g=r(4511),F=r(7445),w=r(1927),G=r(3151),B=r(2147),L=r(1528),U=r(7969),R=r(656),I=r(2607),Y=r(4032),e=r(6707),S=r(8692),b=r(1637),y=r(1379),D=r(8659),x=r(3331),N=r(9665),P=r(7529);function k(_,T){if(1&_&&(i.TgZ(0,"label",8),i._uU(1),i.qZA()),2&_){const l=i.oxw();i.MGl("for","app-cms-site-selector-",l.id,""),i.xp6(1),i.Oqu(l.optionLabel)}}function H(_,T){if(1&_&&(i.TgZ(0,"mat-option",9)(1,"span"),i._uU(2),i.qZA()()),2&_){const l=T.$implicit,a=i.oxw();i.Q6J("value",l)("disabled",a.optionDisabled),i.xp6(2),i.Oqu(a.displayOption(l))}}function Q(_,T){if(1&_){const l=i.EpF();i.TgZ(0,"mat-icon",10),i.NdJ("click",function(){i.CHM(l);const d=i.oxw();return i.KtG(d.onActionSelectClear())}),i._uU(1,"close"),i.qZA()}}const K=["*"];let W=(()=>{class _{coreEnumService;cmsToastrService;cdr;publicHelper;translate;categoryService;static nextId=0;id=++_.nextId;constructor(l,a,d,C,h,O){this.coreEnumService=l,this.cmsToastrService=a,this.cdr=d,this.publicHelper=C,this.translate=h,this.categoryService=O,this.publicHelper.processService.cdr=this.cdr,this.translate.get("MESSAGE.Receiving_information").subscribe(V=>{this.loading.message=V})}dataModelResult=new g.y$4;dataModelSelect=new g.MCb;formControl=new p.NI;filteredOptions;optionDisabled=!1;optionSelectFirstItem=!1;optionPlaceholder="";optionLabel="";optionChange=new i.vpe;optionReload=()=>this.onActionButtonReload();set optionSelectForce(l){this.onActionSelectForce(l)}loading=new R.O;get optionLoading(){return this.loading}set optionLoading(l){this.loading=l}ngOnInit(){this.loadOptions(),(!this.optionLabel||0==this.optionLabel.length&&this.optionPlaceholder?.length>0)&&(this.optionLabel=this.optionPlaceholder)}loadOptions(){this.filteredOptions=this.formControl.valueChanges.pipe((0,w.O)(""),(0,G.b)(1500),(0,B.x)(),(0,L.w)(l=>"string"==typeof l||"number"==typeof l?this.DataGetAll(l||""):[]))}displayFn(l){return l?l.title:void 0}displayOption(l){return l?l.title:void 0}DataGetAll(l){var a=this;return(0,A.Z)(function*(){const d=new g.Hay;d.rowPerPage=20,d.accessLoad=!0;let C=new g.AO3;return C.propertyName="Title",C.value=l,C.searchType=g.J6G.Contains,C.clauseType=g.ppe.Or,d.filters.push(C),l&&"number"==typeof+l&&+l>0&&(C=new g.AO3,C.propertyName="Id",C.value=l,C.searchType=g.J6G.Equal,C.clauseType=g.ppe.Or,d.filters.push(C)),a.publicHelper.processService.processStart("DataGetAll"),yield(0,F.z)(a.categoryService.ServiceGetAll(d)).then(h=>(a.dataModelResult=h,a.optionSelectFirstItem&&(!a.dataModelSelect||!a.dataModelSelect.id||a.dataModelSelect.id<=0)&&a.dataModelResult.listItems.length>0&&(a.optionSelectFirstItem=!1,setTimeout(()=>{a.formControl.setValue(a.dataModelResult.listItems[0])},1e3),a.onActionSelect(a.dataModelResult.listItems[0])),a.publicHelper.processService.processStop("DataGetAll"),h.listItems))})()}onActionSelect(l){this.optionDisabled||(this.dataModelSelect=l,this.optionChange.emit(this.dataModelSelect))}onActionSelectClear(){this.optionDisabled||(this.dataModelSelect=null,this.formControl.setValue(null),this.optionChange.emit(null))}push(l){return this.filteredOptions.pipe((0,U.U)(a=>(a.find(d=>d.id===l.id)||a.push(l),a)))}onActionSelectForce(l){if("number"==typeof l&&l>0){if(this.dataModelSelect&&this.dataModelSelect.id===l)return;if(this.dataModelResult&&this.dataModelResult.listItems&&this.dataModelResult.listItems.find(a=>a.id===l)){const a=this.dataModelResult.listItems.find(d=>d.id===l);return this.dataModelSelect=a,void this.formControl.setValue(a)}this.categoryService.ServiceGetOneById(l).subscribe({next:a=>{a.isSuccess?(this.filteredOptions=this.push(a.item),this.dataModelSelect=a.item,this.formControl.setValue(a.item),this.optionChange.emit(a.item)):this.cmsToastrService.typeErrorMessage(a.errorMessage)}})}else{if(typeof l==typeof g.MCb)return this.filteredOptions=this.push(l),this.dataModelSelect=l,void this.formControl.setValue(l);this.formControl.setValue(null)}}onActionButtonReload(){this.dataModelSelect=new g.MCb,this.loadOptions()}static \u0275fac=function(a){return new(a||_)(i.Y36(g.FLW),i.Y36(I.e),i.Y36(i.sBO),i.Y36(Y.i),i.Y36(e.sK),i.Y36(g.PwI))};static \u0275cmp=i.Xpm({type:_,selectors:[["app-core-sitecategory-selector"]],inputs:{optionDisabled:"optionDisabled",optionSelectFirstItem:"optionSelectFirstItem",optionPlaceholder:"optionPlaceholder",optionLabel:"optionLabel",optionReload:"optionReload",optionSelectForce:"optionSelectForce",optionLoading:"optionLoading"},outputs:{optionChange:"optionChange"},ngContentSelectors:K,decls:10,vars:12,consts:[[1,"input-style","has-borders","no-icon","input-style-always-active","validate-field","mb-4"],[3,"options"],["class","color-highlight",3,"for",4,"ngIf"],["type","text","matInput","",1,"form-control","validate-name",3,"placeholder","formControl","matAutocomplete","id"],[3,"displayWith","optionSelected"],["matauto","matAutocomplete"],[3,"value","disabled",4,"ngFor","ngForOf"],["matSuffix","","matSuffix","","mat-icon-button","","aria-label","Clear",3,"click",4,"ngIf"],[1,"color-highlight",3,"for"],[3,"value","disabled"],["matSuffix","","matSuffix","","mat-icon-button","","aria-label","Clear",3,"click"]],template:function(a,d){if(1&a&&(i.F$t(),i.TgZ(0,"div",0),i._UZ(1,"cms-progress-spinner",1),i.YNc(2,k,2,2,"label",2),i._UZ(3,"input",3),i.TgZ(4,"mat-autocomplete",4,5),i.NdJ("optionSelected",function(h){return d.onActionSelect(h.option.value)}),i.YNc(6,H,3,3,"mat-option",6),i.ALo(7,"async"),i.qZA(),i.YNc(8,Q,2,0,"mat-icon",7),i.Hsn(9),i.qZA()),2&a){const C=i.MAs(5);i.xp6(1),i.Q6J("options",d.loading),i.xp6(1),i.Q6J("ngIf",(null==d.optionLabel?null:d.optionLabel.length)>0),i.xp6(1),i.s9C("placeholder",d.optionPlaceholder),i.MGl("id","app-cms-site-selector-",d.id,""),i.Q6J("formControl",d.formControl)("matAutocomplete",C),i.uIk("disabled",!!d.optionDisabled||null),i.xp6(1),i.Q6J("displayWith",d.displayFn),i.xp6(2),i.Q6J("ngForOf",i.lcZ(7,10,d.filteredOptions)),i.xp6(2),i.Q6J("ngIf",null==d.dataModelSelect?null:d.dataModelSelect.id)}},dependencies:[S.sg,S.O5,p.Fj,p.JJ,p.oH,b.XC,y.ey,b.ZL,D.R9,x.Hw,N.Nt,P.I,S.Ov],encapsulation:2})}return _})()}}]);