"use strict";(self.webpackChunkntk_cms_web=self.webpackChunkntk_cms_web||[]).push([[7141,4121],{3673:(D,C,a)=>{a.d(C,{G:()=>d});var c=a(8239),e=a(8692),o=a(4511),s=a(4537),O=a(4032),m=a(2607);let d=(()=>{class p{elRef;renderer;publicHelper;cmsToastrService;cdr;document;row;contentService;constructor(t,r,h,f,P,I){this.elRef=t,this.renderer=r,this.publicHelper=h,this.cmsToastrService=f,this.cdr=P,this.document=I,this.DataEnumRecordStatus()}DataEnumRecordStatus(){var t=this;return(0,c.Z)(function*(){(yield t.publicHelper.getEnumRecordStatus()).listItems.forEach(h=>{const f=document.createElement("option");f.innerHTML=" "+h.title+' <i Class="'+t.iconStatus(h.value)+'"></i>',f.value=h.value.toString(),t.elRef.nativeElement.add(f)}),t.elRef.nativeElement.options.length>0&&t.row&&t.row.recordStatus&&t.renderer.setProperty(t.elRef.nativeElement,"value",t.row.recordStatus)})()}onChange(){const t=this.elRef.nativeElement,r=t.value;this.addLoader(t),this.contentService.setAccessDataType(o.dR.Editor),this.contentService.ServiceSetStatus(this.row.id,r).subscribe({next:h=>{h.isSuccess?(this.handleSuccessCase(t),this.cmsToastrService.typeSuccessSetStatus(h.errorMessage),this.row.recordStatus=0|r,this.cdr.markForCheck()):(this.renderer.setProperty(this.elRef.nativeElement,"value",this.row.recordStatus),this.cmsToastrService.typeErrorSetStatus(h.errorMessage),this.handleErrorCase(t))},error:h=>{this.renderer.setProperty(this.elRef.nativeElement,"value",this.row.recordStatus),this.cmsToastrService.typeError(h),this.handleErrorCase(t)}})}handleSuccessCase(t){this.removeBackground(t),this.addSuccess(t),setTimeout(()=>{this.removeBackground(t)},1e3)}handleErrorCase(t){this.removeBackground(t);const r=this.document.createElement("img");r.style.width="20px",r.src="https://www.seekpng.com/png/detail/334-3345964_error-icon-download-attention-symbol.png";const h=this.renderer.parentNode(this.elRef.nativeElement);this.renderer.appendChild(h,r),setTimeout(()=>{this.renderer.removeChild(h,r)},1e3)}addLoader(t){this.addBackground(t,"https://replit.com/public/images/loading_dots.gif",20)}addSuccess(t){this.addBackground(t,"https://i.pinimg.com/originals/7b/dd/1b/7bdd1bc7db7fd48025d4e39a0e2f0fd8.jpg",20)}addBackground(t,r,h){t.style.background=`#fff url("${r}") no-repeat right 20px center`,t.style.backgroundSize=`${h}px`}removeBackground(t){t.style.background="none"}iconStatus(t){let r="";switch(t){case 1:default:r="fa fa-check";break;case 2:r="fa fa-eye-slash";break;case 3:r="fa fa-times";break;case 4:r="fa fa-hourglass-half";break;case 5:r="far fa-thumbs-down";break;case 6:r="fa fa-archive"}return r}static \u0275fac=function(r){return new(r||p)(s.Y36(s.SBq),s.Y36(s.Qsj),s.Y36(O.i),s.Y36(m.e),s.Y36(s.sBO),s.Y36(e.K0))};static \u0275dir=s.lG2({type:p,selectors:[["","cmsRecordStatusSelfSave",""]],hostBindings:function(r,h){1&r&&s.NdJ("change",function(){return h.onChange()})},inputs:{row:"row",contentService:"contentService"}})}return p})()},7548:(D,C,a)=>{a.d(C,{o:()=>o});var c=a(4537),e=a(707);let o=(()=>{class s{stepper;constructor(m){this.stepper=m}selectionChanged(){const m=this.stepper._getStepLabelId(this.stepper.selectedIndex),v=document.getElementById(m);v&&v.scrollIntoView({block:"start",inline:"nearest",behavior:"smooth"})}static \u0275fac=function(v){return new(v||s)(c.Y36(e.Vq))};static \u0275dir=c.lG2({type:s,selectors:[["mat-vertical-stepper"]],hostBindings:function(v,_){1&v&&c.NdJ("animationDone",function(){return _.selectionChanged()})}})}return s})()},532:(D,C,a)=>{a.d(C,{t:()=>c});var c=(()=>{return(e=c||(c={}))[e.none=0]="none",e[e.add=1]="add",e[e.edit=2]="edit",e[e.delete=3]="delete",e[e.list=4]="list",e[e.select=5]="select",c;var e})()},1447:(D,C,a)=>{a.d(C,{t:()=>c});class c{lat;lon}},5897:(D,C,a)=>{a.d(C,{Y:()=>o});var c=a(4537),e=a(5998);let o=(()=>{class s{sanitizer;constructor(m){this.sanitizer=m}transform(m){return"cms-RecordStatusEnum-cell-"+m}static \u0275fac=function(v){return new(v||s)(c.Y36(e.H7,16))};static \u0275pipe=c.Yjl({name:"statusCellClass",type:s,pure:!0})}return s})()},6639:(D,C,a)=>{a.d(C,{G:()=>o});var c=a(4537),e=a(5998);let o=(()=>{class s{sanitizer;constructor(m){this.sanitizer=m}transform(m,v=!1){let _="";switch(m){case 1:default:_="fa fa-check";break;case 2:_="fa fa-times";break;case 3:_="fa fa-trash";break;case 4:_="fa fa-hourglass-half";break;case 5:_="far fa-thumbs-down";break;case 6:_="fa fa-archive"}return _}static \u0275fac=function(v){return new(v||s)(c.Y36(e.H7,16))};static \u0275pipe=c.Yjl({name:"statusIconClass",type:s,pure:!0})}return s})()},3914:(D,C,a)=>{a.d(C,{s:()=>_});var c=a(2340),e=a(4536),o=a(4537);let s=(()=>{class E{dialogRef;data;static nextId=0;id=++E.nextId;constructor(p,u){this.dialogRef=p,this.data=u,u||this.dialogRef.close(!1)}ngOnInit(){}onDismiss(){this.dialogRef.close(!1)}onConfirm(){this.dialogRef.close(!0)}static \u0275fac=function(u){return new(u||E)(o.Y36(e.so),o.Y36(e.WI))};static \u0275cmp=o.Xpm({type:E,selectors:[["app-confirmation-dialog"]],decls:18,vars:4,consts:[[1,"menu","menu-box-modal","rounded-m","menu-active",2,"display","block","width","350px","height","320px","padding","20px"],[1,"menu-title"],[1,"fa","fa-question-circle","scale-box","float-start","me-3","ms-3","fa-3x","mt-1","color-blue-dark"],[1,"color-highlight"],[1,"font-20"],[1,"close-menu",3,"click"],[1,"fa","fa-times-circle"],[1,"content","mt-0"],[1,"pe-3",3,"innerHTML"],[1,"row","mb-0"],[1,"col-6"],[1,"btn","close-menu","btn-full","btn-m","bg-red-dark","font-600","rounded-s",3,"click"],[1,"btn","close-menu","btn-full","btn-m","bg-green-dark","font-600","rounded-s",3,"click"]],template:function(u,t){1&u&&(o.TgZ(0,"div",0)(1,"div",1),o._UZ(2,"i",2),o.TgZ(3,"p",3),o._uU(4),o.qZA(),o.TgZ(5,"h1",4),o._uU(6,"\u0645\u0637\u0645\u0626\u0646\u06cc\u062f\u061f"),o.qZA(),o.TgZ(7,"a",5),o.NdJ("click",function(){return t.onDismiss()}),o._UZ(8,"i",6),o.qZA()(),o.TgZ(9,"div",7),o._UZ(10,"p",8),o.TgZ(11,"div",9)(12,"div",10)(13,"a",11),o.NdJ("click",function(){return t.onDismiss()}),o._uU(14),o.qZA()(),o.TgZ(15,"div",10)(16,"a",12),o.NdJ("click",function(){return t.onConfirm()}),o._uU(17),o.qZA()()()()()),2&u&&(o.xp6(4),o.hij(" ",t.data.title,""),o.xp6(6),o.Q6J("innerHTML",t.data.message,o.oJD),o.xp6(4),o.Oqu(t.data.btnCancelText),o.xp6(3),o.Oqu(t.data.btnConfirmText))},encapsulation:2})}return E})();var O=a(727),m=a(6707);class v{title;message;constructor(d,p){this.title=d,this.message=p}btnConfirmText="OK";btnCancelText="Cancel";dialogSize="sm"}let _=(()=>{class E{dialog;tokenHelper;translate;constructor(p,u,t){this.dialog=p,this.tokenHelper=u,this.translate=t}confirm(p,u,t="",r="",h="sm"){const f=new v(p,u);return f.btnConfirmText=t,f.btnCancelText=r,f.dialogSize=h,(!f.btnConfirmText||""==f.btnConfirmText||0==f.btnConfirmText.length)&&this.translate.get("ACTION.CONFIRM").subscribe(S=>{f.btnConfirmText=S}),(!f.btnCancelText||""==f.btnCancelText||0==f.btnCancelText.length)&&this.translate.get("ACTION.CANCEL").subscribe(S=>{f.btnCancelText=S}),this.dialog.open(s,{height:"90%",panelClass:this.tokenHelper.isMobile?"dialog-fullscreen":"dialog-min",enterAnimationDuration:c.N.cmsViewConfig.enterAnimationDuration,exitAnimationDuration:c.N.cmsViewConfig.exitAnimationDuration,data:f}).afterClosed().toPromise().then(S=>Promise.resolve(S))}static \u0275fac=function(u){return new(u||E)(o.LFG(e.uw),o.LFG(O.v),o.LFG(m.sK))};static \u0275prov=o.Yz7({token:E,factory:E.\u0275fac})}return E})()},7407:(D,C,a)=>{a.d(C,{r:()=>v});var c=a(4537),e=a(4216),s=a(2340),O=a(2607),m=a(7128);let v=(()=>{class _{cmsToastrService;static nextId=0;id=++_.nextId;map$=new c.vpe;zoom$=new c.vpe;options={layers:[(0,e.tileLayer)(s.N.leafletUrl,{opacity:.7,maxZoom:19,detectRetina:!0})],zoom:16,center:[32.684985,51.6359425]};set optonCenter(d){this.map&&d&&d.lat&&d.lon&&0!==d.lat&&0!==d.lon&&this.map.setView(new e.LatLng(d.lat,d.lon),this.zoom)}set optionCurrentPoint(d){this.onActionCurrentPoint(d)}map;zoom;destroy=!1;constructor(d){this.cmsToastrService=d}ngOnInit(){const t=e.icon({iconRetinaUrl:"assets/leaflet/marker-icon-2x.png",iconUrl:"assets/leaflet/marker-icon.png",shadowUrl:"assets/leaflet/marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]});e.Marker.prototype.options.icon=t}ngAfterViewInit(){}ngOnDestroy(){this.map&&(this.map.clearAllEventListeners(),this.destroy=!0)}onMapReady(d){setTimeout(()=>{this.map&&!this.destroy&&d.invalidateSize()},500),this.map=d,this.map$.emit(d),this.zoom=d.getZoom(),this.zoom$.emit(this.zoom)}onMapZoomEnd(d){this.zoom=d.target.getZoom(),this.zoom$.emit(this.zoom)}onActionCurrentPoint(d=!0){this.getPosition().then(p=>{this.map.setView(new e.LatLng(p.lat,p.lon),this.zoom)})}getPosition(){return new Promise((d,p)=>{navigator.geolocation.getCurrentPosition(u=>{d({lon:u.coords.longitude,lat:u.coords.latitude})},u=>{this.cmsToastrService.typeErrorGetPosition()})})}static \u0275fac=function(p){return new(p||_)(c.Y36(O.e))};static \u0275cmp=c.Xpm({type:_,selectors:[["app-cms-map"]],inputs:{options:"options",optonCenter:"optonCenter",optionCurrentPoint:"optionCurrentPoint"},outputs:{map$:"map$",zoom$:"zoom$"},decls:1,vars:1,consts:[["leaflet","",1,"map-container",3,"leafletOptions","leafletMapReady","leafletMapZoomEnd"]],template:function(p,u){1&p&&(c.TgZ(0,"div",0),c.NdJ("leafletMapReady",function(r){return u.onMapReady(r)})("leafletMapZoomEnd",function(r){return u.onMapZoomEnd(r)}),c.qZA()),2&p&&c.Q6J("leafletOptions",u.options)},dependencies:[m.je],styles:[".map-container[_ngcontent-%COMP%]{width:100%;height:300px}"]})}return _})()},9831:(D,C,a)=>{a.d(C,{u:()=>y});var c=a(5436),e=a(4537),o=a(92),s=a(4511),O=a(1927),m=a(3151),v=a(1528),_=a(7969),E=a(2607),d=a(8692),p=a(1637),u=a(1379),t=a(7084),r=a(8659),h=a(3331);const f=["tagInput"];function P(T,A){if(1&T){const i=e.EpF();e.TgZ(0,"mat-chip",9),e.NdJ("removed",function(){const g=e.CHM(i).$implicit,M=e.oxw();return e.KtG(M.remove(g))}),e._uU(1),e.TgZ(2,"button",10)(3,"mat-icon"),e._uU(4,"cancel"),e.qZA()()()}if(2&T){const i=A.$implicit;e.xp6(1),e.hij(" ",i.display," ")}}function I(T,A){if(1&T&&(e.TgZ(0,"mat-option",11),e._uU(1),e.qZA()),2&T){const i=A.$implicit;e.Q6J("value",i),e.xp6(1),e.hij(" ",i.display," ")}}let y=(()=>{class T{service;cmsToastrService;static nextId=0;id=++T.nextId;constructor(i,l){this.service=i,this.cmsToastrService=l,this.filteredOptions=this.tagCtrl.valueChanges.pipe((0,O.O)(null),(0,m.b)(400),(0,v.w)(n=>this.filter(n||"")))}optionDisabled=!1;tagInput;optionPlaceholder="+ Tag";optionLabel="";optionChange=new e.vpe;set optionSelectForce(i){this.onActionSelectForce(i)}tagDataModel=[];tagLastDataModel=[];selectForceStatus=!0;separatorKeysCodes=[c.K5];tagCtrl=new o.NI("");filteredOptions;addOnBlur=!0;ngOnInit(){(!this.optionLabel||0==this.optionLabel.length&&this.optionPlaceholder?.length>0)&&(this.optionLabel=this.optionPlaceholder)}filter(i){const l=new s.Hay;l.rowPerPage=20,l.accessLoad=!0;let n=new s.AO3;return n.propertyName="Title",n.value=i,n.searchType=s.J6G.Contains,n.clauseType=s.ppe.Or,l.filters.push(n),i&&"number"==typeof+i&&+i>0&&(n=new s.AO3,n.propertyName="Id",n.value=i,n.searchType=s.J6G.Equal,n.clauseType=s.ppe.Or,l.filters.push(n)),this.service.ServiceGetAll(l).pipe((0,_.U)(g=>(this.tagLastDataModel=g.listItems.map(M=>({display:M.title,value:M.id})),this.tagLastDataModel)))}checkIndex(i){let l=0,n=-1;return this.tagDataModel.forEach(g=>{g.value==i&&(n=l),l++}),n}add(i){let l;i.value&&this.tagLastDataModel.forEach(n=>{(n.display==i.value||n.value+""==i.value)&&(l=n)}),l&&this.checkIndex(l.value)<0&&(this.tagDataModel.push(l),this.onActionChange()),i.chipInput.clear(),this.tagCtrl.setValue(null)}remove(i){const l=this.checkIndex(i.value);l>=0&&(this.tagDataModel.splice(l,1),this.onActionChange())}selected(i){const l=i.option.value;this.checkIndex(l.value)<0&&this.tagDataModel.push(l),this.tagInput.nativeElement.value="",this.tagCtrl.setValue(null),this.onActionChange()}onActionChange(){const i=[];this.tagDataModel.forEach(l=>{i.findIndex(n=>n==l.value)<0&&i.push(l.value)}),this.selectForceStatus=!1,this.optionChange.emit(i)}onActionSelectForce(i){if(!this.selectForceStatus||!i||0===i.length)return;const l=new s.Hay;i.forEach(n=>{if(n>0){const g=new s.AO3;g.propertyName="Id",g.value=n,g.clauseType=s.ppe.Or,l.filters.push(g)}}),this.service.ServiceGetAll(l).subscribe({next:n=>{n.isSuccess?n.listItems.forEach(g=>{this.tagDataModel.findIndex(M=>M.value==g.id)<0&&this.tagDataModel.push({value:g.id,display:g.title})}):this.cmsToastrService.typeErrorGetAll(n.errorMessage)},error:n=>{this.cmsToastrService.typeErrorGetAll(n)}})}static \u0275fac=function(l){return new(l||T)(e.Y36(s.dF2),e.Y36(E.e))};static \u0275cmp=e.Xpm({type:T,selectors:[["app-cms-tag-autocomplete"]],viewQuery:function(l,n){if(1&l&&e.Gf(f,5),2&l){let g;e.iGM(g=e.CRH())&&(n.tagInput=g.first)}},inputs:{optionDisabled:"optionDisabled",optionPlaceholder:"optionPlaceholder",optionLabel:"optionLabel",optionSelectForce:"optionSelectForce"},outputs:{optionChange:"optionChange"},decls:12,vars:12,consts:[["appearance","fill",2,"width","100%"],["aria-label","tag selection",3,"disabled"],["chipList",""],[3,"removed",4,"ngFor","ngForOf"],[3,"placeholder","matChipInputAddOnBlur","formControl","matAutocomplete","matChipInputFor","matChipInputSeparatorKeyCodes","matChipInputTokenEnd"],["tagInput",""],[3,"optionSelected"],["auto","matAutocomplete"],[3,"value",4,"ngFor","ngForOf"],[3,"removed"],["type","button","matChipRemove","",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-gray"],[3,"value"]],template:function(l,n){if(1&l&&(e.TgZ(0,"mat-form-field",0)(1,"mat-label"),e._uU(2),e.qZA(),e.TgZ(3,"mat-chip-grid",1,2),e.YNc(5,P,5,1,"mat-chip",3),e.TgZ(6,"input",4,5),e.NdJ("matChipInputTokenEnd",function(M){return n.add(M)}),e.qZA()(),e.TgZ(8,"mat-autocomplete",6,7),e.NdJ("optionSelected",function(M){return n.selected(M)}),e.YNc(10,I,2,2,"mat-option",8),e.ALo(11,"async"),e.qZA()()),2&l){const g=e.MAs(4),M=e.MAs(9);e.xp6(2),e.Oqu(n.optionLabel),e.xp6(1),e.Q6J("disabled",n.optionDisabled),e.xp6(2),e.Q6J("ngForOf",n.tagDataModel),e.xp6(1),e.Q6J("placeholder"," + "+n.optionPlaceholder)("matChipInputAddOnBlur",n.addOnBlur)("formControl",n.tagCtrl)("matAutocomplete",M)("matChipInputFor",g)("matChipInputSeparatorKeyCodes",n.separatorKeysCodes),e.xp6(4),e.Q6J("ngForOf",e.lcZ(11,10,n.filteredOptions))}},dependencies:[d.sg,o.Fj,o.JJ,o.oH,p.XC,u.ey,p.ZL,t.HS,t.RA,t.oH,t.qH,r.KE,r.hX,h.Hw,d.Ov],encapsulation:2})}return T})()}}]);