"use strict";(self.webpackChunkntk_cms_web=self.webpackChunkntk_cms_web||[]).push([[9969],{7647:(Q,G,r)=>{r.d(G,{S:()=>K});var b=r(3308),i=r(7788),u=r(7222),h=r(8189),w=r(5804),j=r(965),N=r(8887),U=r(3793),D=r(2831),X=r(3527),L=r(4434),R=r(9722),$=r(5154),e=r(2882),M=r(6610),v=r(2497),y=r(8278),k=r(9344),F=r(6182),B=r(4587),P=r(7912);const V=["*"];function W(_,A){if(1&_&&(i.j41(0,"label",8),i.EFF(1),i.k0s()),2&_){const l=i.XpG();i.Mz_("for","app-cms-site-selector-",l.id,""),i.R7$(),i.JRh(l.optionLabel)}}function Y(_,A){if(1&_&&(i.j41(0,"mat-option",9)(1,"span"),i.EFF(2),i.k0s()()),2&_){const l=A.$implicit,a=i.XpG();i.Y8G("value",l)("disabled",a.optionDisabled),i.R7$(2),i.JRh(a.displayOption(l))}}function H(_,A){if(1&_){const l=i.RV6();i.j41(0,"mat-icon",10),i.bIt("click",function(){i.eBV(l);const m=i.XpG();return i.Njj(m.onActionSelectClear())}),i.EFF(1,"close"),i.k0s()}}let K=(()=>{class _{static#e=this.nextId=0;constructor(l,a,m,f,S,g){this.coreEnumService=l,this.cmsToastrService=a,this.cdr=m,this.publicHelper=f,this.translate=S,this.categoryService=g,this.id=++_.nextId,this.dataModelResult=new h.N$V,this.dataModelSelect=new h.fq5,this.formControl=new u.MJ,this.optionDisabled=!1,this.optionSelectFirstItem=!1,this.optionPlaceholder="",this.optionLabel="",this.optionChange=new i.bkB,this.optionReload=()=>this.onActionButtonReload(),this.loading=new L.o,this.publicHelper.processService.cdr=this.cdr,this.translate.get("MESSAGE.Receiving_information").subscribe(x=>{this.loading.message=x})}set optionSelectForce(l){this.onActionSelectForce(l)}get optionLoading(){return this.loading}set optionLoading(l){this.loading=l}ngOnInit(){this.loadOptions(),(!this.optionLabel||0==this.optionLabel.length&&this.optionPlaceholder?.length>0)&&(this.optionLabel=this.optionPlaceholder)}loadOptions(){this.filteredOptions=this.formControl.valueChanges.pipe((0,j.Z)(""),(0,N.B)(1500),(0,U.F)(),(0,D.n)(l=>"string"==typeof l||"number"==typeof l?this.DataGetAll(l||""):[]))}displayFn(l){return l?l.title:void 0}displayOption(l){return l?l.title:void 0}DataGetAll(l){var a=this;return(0,b.A)(function*(){const m=new h.O2i;m.rowPerPage=20,m.accessLoad=!0;let f=new h.ycK;f.propertyName="Title",f.value=l,f.searchType=h._GO.Contains,f.clauseType=h.jL_.Or,m.filters.push(f),l&&"number"==typeof+l&&+l>0&&(f=new h.ycK,f.propertyName="Id",f.value=l,f.searchType=h._GO.Equal,f.clauseType=h.jL_.Or,m.filters.push(f));const S=a.constructor.name+"main";return a.translate.get("MESSAGE.Receiving_information").subscribe(g=>{a.publicHelper.processService.processStart(S,g,a.constructor.name)}),yield(0,w._)(a.categoryService.ServiceGetAll(m)).then(g=>(a.dataModelResult=g,a.optionSelectFirstItem&&(!a.dataModelSelect||!a.dataModelSelect.id||a.dataModelSelect.id<=0)&&a.dataModelResult.listItems.length>0&&(a.optionSelectFirstItem=!1,setTimeout(()=>{a.formControl.setValue(a.dataModelResult.listItems[0])},1e3),a.onActionSelect(a.dataModelResult.listItems[0])),a.publicHelper.processService.processStop(S),g.listItems))})()}onActionSelect(l){this.optionDisabled||(this.dataModelSelect=l,this.optionChange.emit(this.dataModelSelect))}onActionSelectClear(){this.optionDisabled||(this.dataModelSelect=null,this.formControl.setValue(null),this.optionChange.emit(null))}onActionEmpty(){this.formControl.setValue(0),this.dataModelSelect=new h.fq5,this.optionChange.emit(this.dataModelSelect)}push(l){return this.filteredOptions.pipe((0,X.T)(a=>(a.find(m=>m.id===l.id)||a.push(l),a)))}onActionSelectForce(l){if("number"==typeof l&&l>0){if(this.dataModelSelect&&this.dataModelSelect.id===l)return;if(this.dataModelResult&&this.dataModelResult.listItems&&this.dataModelResult.listItems.find(a=>a.id===l)){const a=this.dataModelResult.listItems.find(m=>m.id===l);return this.dataModelSelect=a,void this.formControl.setValue(a)}this.categoryService.ServiceGetOneById(l).subscribe({next:a=>{a.isSuccess?(this.filteredOptions=this.push(a.item),this.dataModelSelect=a.item,this.formControl.setValue(a.item),this.optionChange.emit(a.item)):this.cmsToastrService.typeErrorMessage(a.errorMessage)}})}else{if(typeof l==typeof h.fq5)return this.filteredOptions=this.push(l),this.dataModelSelect=l,void this.formControl.setValue(l);this.formControl.setValue(null)}}onActionButtonReload(){this.dataModelSelect=new h.fq5,this.loadOptions()}static#t=this.\u0275fac=function(a){return new(a||_)(i.rXU(h.i9D),i.rXU(R.k),i.rXU(i.gRc),i.rXU($.A),i.rXU(e.c$),i.rXU(h.XBe))};static#o=this.\u0275cmp=i.VBU({type:_,selectors:[["app-core-module-selector"]],inputs:{optionDisabled:"optionDisabled",optionSelectFirstItem:"optionSelectFirstItem",optionPlaceholder:"optionPlaceholder",optionLabel:"optionLabel",optionReload:"optionReload",optionSelectForce:"optionSelectForce",optionLoading:"optionLoading"},outputs:{optionChange:"optionChange"},ngContentSelectors:V,decls:10,vars:13,consts:[["matauto","matAutocomplete"],[1,"input-style","has-borders","no-icon","input-style-always-active","validate-field","mb-4","progressOverlayContainer"],[3,"optionsInfoAreaId"],["class","color-highlight",3,"for",4,"ngIf"],["type","text","matInput","",1,"form-control","validate-name",3,"placeholder","formControl","matAutocomplete","id"],[3,"optionSelected","displayWith"],[3,"value","disabled",4,"ngFor","ngForOf"],["matSuffix","","matSuffix","","mat-icon-button","","aria-label","Clear",3,"click",4,"ngIf"],[1,"color-highlight",3,"for"],[3,"value","disabled"],["matSuffix","","matSuffix","","mat-icon-button","","aria-label","Clear",3,"click"]],template:function(a,m){if(1&a){const f=i.RV6();i.NAR(),i.j41(0,"div",1),i.nrm(1,"app-progress-spinner",2),i.DNE(2,W,2,3,"label",3),i.nrm(3,"input",4),i.j41(4,"mat-autocomplete",5,0),i.bIt("optionSelected",function(g){return i.eBV(f),i.Njj(m.onActionSelect(g.option.value))}),i.DNE(6,Y,3,3,"mat-option",6),i.nI1(7,"async"),i.k0s(),i.DNE(8,H,2,0,"mat-icon",7),i.SdG(9),i.k0s()}if(2&a){const f=i.sdS(5);i.R7$(),i.Y8G("optionsInfoAreaId",m.constructor.name),i.R7$(),i.Y8G("ngIf",(null==m.optionLabel?null:m.optionLabel.length)>0),i.R7$(),i.FS9("placeholder",m.optionPlaceholder),i.Mz_("id","app-cms-site-selector-",m.id,""),i.Y8G("formControl",m.formControl)("matAutocomplete",f),i.BMQ("disabled",!!m.optionDisabled||null),i.R7$(),i.Y8G("displayWith",m.displayFn),i.R7$(2),i.Y8G("ngForOf",i.bMT(7,11,m.filteredOptions)),i.R7$(2),i.Y8G("ngIf",null==m.dataModelSelect?null:m.dataModelSelect.id)}},dependencies:[M.Sq,M.bT,u.me,u.BC,u.l_,v.$3,y.wT,v.pN,k.yw,F.An,B.fg,P._,M.Jj],encapsulation:2})}return _})()},9969:(Q,G,r)=>{r.r(G),r.d(G,{CoreSiteCategoryCmsModuleModule:()=>Pe});var b=r(6610),i=r(7222),u=r(8189),h=r(8550),w=r(3627),j=r(5459),N=r(4429),U=r(8012),D=r(9675),X=r(9915),L=r(5312),R=r(6482),$=r(8784),e=r(7788),M=r(9722),v=r(5154),y=r(2882),k=r(4587),F=r(1536),B=r(7912),P=r(7647),V=r(2243);const W=["vform"];function Y(s,C){if(1&s){const t=e.RV6();e.j41(0,"app-cms-enum-record-status-selector",12),e.mxI("modelChange",function(o){e.eBV(t);const c=e.XpG();return e.DH7(c.dataModel.recordStatus,o)||(c.dataModel.recordStatus=o),e.Njj(o)}),e.k0s()}if(2&s){const t=e.XpG();e.R50("model",t.dataModel.recordStatus),e.Y8G("optionDisabled",!1)("optionLabel",null==t.fieldsInfo.recordStatus?null:t.fieldsInfo.recordStatus.fieldTitle)("optionRequired",!0)("optionSelectFirstItem",!0)}}function H(s,C){if(1&s){const t=e.RV6();e.j41(0,"div",13)(1,"label",14),e.EFF(2),e.k0s(),e.j41(3,"textarea",15,1),e.mxI("ngModelChange",function(o){e.eBV(t);const c=e.XpG();return e.DH7(c.dataModel.configValuesJson,o)||(c.dataModel.configValuesJson=o),e.Njj(o)}),e.EFF(5,"                "),e.k0s(),e.j41(6,"em"),e.EFF(7),e.k0s()()}if(2&s){const t=e.sdS(4),n=e.XpG();e.R7$(2),e.JRh(null==n.fieldsInfo.configValuesJson?null:n.fieldsInfo.configValuesJson.fieldTitle),e.R7$(),e.R50("ngModel",n.dataModel.configValuesJson),e.Y8G("disabled",!(null!=n.fieldsInfo.configValuesJson&&n.fieldsInfo.configValuesJson.accessAddField)),e.R7$(4),e.SpI("",t.value.length," / 10000")}}function K(s,C){if(1&s){const t=e.RV6();e.j41(0,"div",16)(1,"button",17),e.bIt("click",function(){e.eBV(t);const o=e.XpG();return e.Njj(o.onFormCancel())}),e.nrm(2,"i",18),e.EFF(3),e.nI1(4,"translate"),e.k0s(),e.j41(5,"button",19),e.nrm(6,"i",20),e.EFF(7),e.nI1(8,"translate"),e.k0s()()}if(2&s){e.XpG();const t=e.sdS(9);e.R7$(3),e.SpI(" ",e.bMT(4,3,"ACTION.CANCEL")," "),e.R7$(2),e.Y8G("disabled",!t.form.valid),e.R7$(2),e.SpI(" ",e.bMT(8,5,"ACTION.SAVE")," ")}}let _=(()=>{class s extends $.Q{constructor(t,n,o,c,p,d,T,O){super(c,new u.pP,d,O),this.data=t,this.dialogRef=n,this.coreEnumService=o,this.coreSiteCategoryCmsModuleService=c,this.cmsToastrService=p,this.publicHelper=d,this.cdr=T,this.translate=O,this.requestLinkCmsModuleId=0,this.requestLinkCmsSiteCategoryId=0,this.fieldsInfo=new Map,this.dataModelResult=new u.N$V,this.dataModel=new u.pP,this.formInfo=new u.IL9,this.fileManagerOpenForm=!1,this.publicHelper.processService.cdr=this.cdr,this.translate.get("MESSAGE.Receiving_information").subscribe(J=>{this.loading.message=J}),t&&(this.requestLinkCmsSiteCategoryId=+t.linkCmsSiteCategoryId||0,this.requestLinkCmsModuleId=+t.linkCmsModuleId||0),this.requestLinkCmsSiteCategoryId>0&&(this.dataModel.linkCmsSiteCategoryId=this.requestLinkCmsSiteCategoryId),this.requestLinkCmsModuleId>0&&(this.dataModel.linkCmsModuleId=this.requestLinkCmsModuleId)}ngOnInit(){this.DataGetAccess()}DataAddContent(){this.translate.get("MESSAGE.sending_information_to_the_server").subscribe(n=>{this.formInfo.formAlert=n}),this.formInfo.formError="";const t=this.constructor.name+"main";this.translate.get("MESSAGE.Receiving_information").subscribe(n=>{this.publicHelper.processService.processStart(t,n,this.constructor.name)}),this.coreSiteCategoryCmsModuleService.ServiceAdd(this.dataModel).subscribe({next:n=>{this.formInfo.formSubmitAllow=!0,this.dataModelResult=n,n.isSuccess?(this.translate.get("MESSAGE.registration_completed_successfully").subscribe(o=>{this.formInfo.formAlert=o}),this.cmsToastrService.typeSuccessAdd(),this.dialogRef.close({dialogChangedDate:!0})):(this.translate.get("ERRORMESSAGE.MESSAGE.typeError").subscribe(o=>{this.formInfo.formAlert=o}),this.formInfo.formError=n.errorMessage,this.cmsToastrService.typeErrorMessage(n.errorMessage)),this.publicHelper.processService.processStop(t)},error:n=>{this.formInfo.formSubmitAllow=!0,this.cmsToastrService.typeError(n),this.publicHelper.processService.processStop(t,!1)}})}onFormSubmit(){this.formGroup.valid&&(this.formInfo.formSubmitAllow=!1,this.DataAddContent())}onActionSiteCategorySelect(t){this.dataModel.linkCmsSiteCategoryId=null,t&&t.id>0&&(this.dataModel.linkCmsSiteCategoryId=t.id)}onActionSelectorModuleSelect(t){this.dataModel.linkCmsModuleId=null,t&&t.id>0&&(this.dataModel.linkCmsModuleId=t.id)}onFormCancel(){this.dialogRef.close({dialogChangedDate:!1})}static#e=this.\u0275fac=function(n){return new(n||s)(e.rXU(R.Vh),e.rXU(R.CP),e.rXU(u.i9D),e.rXU(u.V2o),e.rXU(M.k),e.rXU(v.A),e.rXU(e.gRc),e.rXU(y.c$))};static#t=this.\u0275cmp=e.VBU({type:s,selectors:[["app-core-sitecategorycmsmodule-add"]],viewQuery:function(n,o){if(1&n&&e.GBs(W,5),2&n){let c;e.mGM(c=e.lsd())&&(o.formGroup=c.first)}},features:[e.Vt3],decls:17,vars:21,consts:[["vform","ngForm"],["ConfigValuesJson",""],[1,"card","card-style","progressOverlayContainer"],[3,"optionsInfoAreaId"],[1,"content","mb-0"],[1,"mb-0","color-highlight","font-600","font-12"],[3,"ngSubmit"],[3,"model","optionDisabled","optionLabel","optionRequired","optionSelectFirstItem","modelChange",4,"ngIf"],[3,"optionChange","optionLoadingChange","optionDisabled","optionLoading","optionSelectForce","optionPlaceholder"],[3,"optionChange","optionLoadingChange","optionDisabled","optionLoading","optionSelectFirstItem","optionSelectForce","optionPlaceholder"],["class","input-style has-borders no-icon input-style-always-active validate-field mb-4",4,"ngIf"],["class","form-actions",4,"ngIf"],[3,"modelChange","model","optionDisabled","optionLabel","optionRequired","optionSelectFirstItem"],[1,"input-style","has-borders","no-icon","input-style-always-active","validate-field","mb-4"],["for","dataModel.configValuesJson",1,"color-highlight"],["matInput","","name","dataModel.configValuesJson","type","text","placeholder","ConfigValuesJson","minlength","0","maxlength","10000","rows","6","id","dataModel.configValuesJson",1,"form-control","validate-name",3,"ngModelChange","ngModel","disabled"],[1,"form-actions"],["type","button",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-gray",3,"click"],[1,"ft-x"],["type","submit",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-green",3,"disabled"],[1,"fa","fa-check-square-o"]],template:function(n,o){if(1&n){const c=e.RV6();e.j41(0,"div",2),e.nrm(1,"app-progress-spinner",3),e.j41(2,"div",4)(3,"p",5),e.EFF(4),e.k0s(),e.j41(5,"p"),e.EFF(6),e.nI1(7,"translate"),e.k0s(),e.j41(8,"form",6,0),e.bIt("ngSubmit",function(){return e.eBV(c),e.Njj(o.onFormSubmit())}),e.DNE(10,Y,1,5,"app-cms-enum-record-status-selector",7),e.j41(11,"app-core-sitecategory-selector",8),e.nI1(12,"translate"),e.bIt("optionChange",function(d){return e.eBV(c),e.Njj(o.onActionSiteCategorySelect(d))}),e.mxI("optionLoadingChange",function(d){return e.eBV(c),e.DH7(o.loading,d)||(o.loading=d),e.Njj(d)}),e.k0s(),e.j41(13,"app-core-module-selector",9),e.nI1(14,"translate"),e.bIt("optionChange",function(d){return e.eBV(c),e.Njj(o.onActionSelectorModuleSelect(d))}),e.mxI("optionLoadingChange",function(d){return e.eBV(c),e.DH7(o.loading,d)||(o.loading=d),e.Njj(d)}),e.k0s(),e.DNE(15,H,8,4,"div",10)(16,K,9,7,"div",11),e.k0s()()()}2&n&&(e.R7$(),e.Y8G("optionsInfoAreaId",o.constructor.name),e.R7$(3),e.SpI(" ",o.formInfo.formTitle," "),e.R7$(2),e.SpI(" ",e.bMT(7,15,"TITLE.Be_Careful_When_Entering_Information")," "),e.R7$(4),e.Y8G("ngIf",null==o.fieldsInfo.recordStatus?null:o.fieldsInfo.recordStatus.accessWatchField),e.R7$(),e.Y8G("optionDisabled",!1),e.R50("optionLoading",o.loading),e.Y8G("optionSelectForce",o.dataModel.linkCmsSiteCategoryId)("optionPlaceholder",e.bMT(12,17,"TITLE.SITE_CATEGORY")),e.R7$(2),e.Y8G("optionDisabled",!1),e.R50("optionLoading",o.loading),e.Y8G("optionSelectFirstItem",!0)("optionSelectForce",o.dataModel.linkCmsModuleId)("optionPlaceholder",e.bMT(14,19,"TITLE.MODULE")),e.R7$(2),e.Y8G("ngIf",null==o.fieldsInfo.configValuesJson?null:o.fieldsInfo.configValuesJson.accessWatchField),e.R7$(),e.Y8G("ngIf",o.formInfo.formSubmitAllow&&!(null!=o.loading&&o.loading.display)))},dependencies:[b.bT,i.qT,i.me,i.BC,i.cb,i.xh,i.tU,i.vS,i.cV,k.fg,F.m,B._,P.S,V.n,y.D9],styles:[".form-body[_ngcontent-%COMP%]{width:500px}@media (max-width: 700px){.form-body[_ngcontent-%COMP%]{display:contents}}#file-manager[_ngcontent-%COMP%]{width:calc(100vw - 16px);height:calc(100vh - 16px)}.recordStatus-1.mat-select-panel[_ngcontent-%COMP%]{background:#ff0}.recordStatus-2.mat-select-panel[_ngcontent-%COMP%]{background:#000}.recordStatus-3.mat-select-panel[_ngcontent-%COMP%]{background:red}"]})}return s})();var A=r(5113);const l=["vform"];function a(s,C){if(1&s){const t=e.RV6();e.j41(0,"app-cms-enum-record-status-selector",11),e.mxI("modelChange",function(o){e.eBV(t);const c=e.XpG();return e.DH7(c.dataModel.recordStatus,o)||(c.dataModel.recordStatus=o),e.Njj(o)}),e.k0s()}if(2&s){const t=e.XpG();e.R50("model",t.dataModel.recordStatus),e.Y8G("optionDisabled",!1)("optionLabel",null==t.fieldsInfo.recordStatus?null:t.fieldsInfo.recordStatus.fieldTitle)("optionRequired",!0)("optionSelectFirstItem",!0)}}function m(s,C){if(1&s){const t=e.RV6();e.j41(0,"div",12)(1,"label",13),e.EFF(2),e.k0s(),e.j41(3,"textarea",14,1),e.mxI("ngModelChange",function(o){e.eBV(t);const c=e.XpG();return e.DH7(c.dataModel.configValuesJson,o)||(c.dataModel.configValuesJson=o),e.Njj(o)}),e.EFF(5,"                "),e.k0s(),e.j41(6,"em"),e.EFF(7),e.k0s()()}if(2&s){const t=e.sdS(4),n=e.XpG();e.R7$(2),e.JRh(null==n.fieldsInfo.configValuesJson?null:n.fieldsInfo.configValuesJson.fieldTitle),e.R7$(),e.R50("ngModel",n.dataModel.configValuesJson),e.Y8G("disabled",!(null!=n.fieldsInfo.configValuesJson&&n.fieldsInfo.configValuesJson.accessAddField)),e.R7$(4),e.SpI("",t.value.length," / 10000")}}function f(s,C){if(1&s){const t=e.RV6();e.j41(0,"div",15)(1,"button",16),e.bIt("click",function(){e.eBV(t);const o=e.XpG();return e.Njj(o.onFormCancel())}),e.nrm(2,"i",17),e.EFF(3),e.nI1(4,"translate"),e.k0s(),e.j41(5,"button",18),e.nrm(6,"i",19),e.EFF(7),e.nI1(8,"translate"),e.k0s()()}if(2&s){e.XpG();const t=e.sdS(9);e.R7$(3),e.SpI(" ",e.bMT(4,3,"ACTION.CANCEL")," "),e.R7$(2),e.Y8G("disabled",!t.form.valid),e.R7$(2),e.SpI(" ",e.bMT(8,5,"ACTION.SAVE")," ")}}let S=(()=>{class s extends A.n{constructor(t,n,o,c,p,d,T,O){super(c,new u.pP,O,d),this.data=t,this.dialogRef=n,this.coreEnumService=o,this.coreSiteCategoryCmsModuleService=c,this.cmsToastrService=p,this.translate=d,this.cdr=T,this.publicHelper=O,this.requestLinkCmsModuleId=0,this.requestLinkCmsSiteCategoryId=0,this.dataModelResult=new u.YyC,this.dataModel=new u.pP,this.formInfo=new u.IL9,this.fileManagerOpenForm=!1,this.publicHelper.processService.cdr=this.cdr,this.translate.get("MESSAGE.Receiving_information").subscribe(J=>{this.loading.message=J}),t&&(this.requestLinkCmsSiteCategoryId=+t.linkCmsSiteCategoryId||0,this.requestLinkCmsModuleId=+t.linkCmsModuleId||0)}ngOnInit(){if(this.requestLinkCmsSiteCategoryId<=0||this.requestLinkCmsModuleId<=0)return this.cmsToastrService.typeErrorComponentAction(),void this.dialogRef.close({dialogChangedDate:!1});this.DataGetOneContent()}DataGetOneContent(){this.translate.get("MESSAGE.Receiving_Information_From_The_Server").subscribe(c=>{this.formInfo.formAlert=c}),this.formInfo.formError="";const t=this.constructor.name+"main";this.translate.get("MESSAGE.Receiving_information").subscribe(c=>{this.publicHelper.processService.processStart(t,c,this.constructor.name)});const n=new u.O2i;let o=new u.ycK;o.propertyName="LinkCmsSiteCategoryId",o.value=this.requestLinkCmsSiteCategoryId,n.filters.push(o),o=new u.ycK,o.propertyName="LinkCmsModuleId",o.value=this.requestLinkCmsModuleId,n.filters.push(o),n.accessLoad=!0,this.coreSiteCategoryCmsModuleService.setAccessLoad(),this.coreSiteCategoryCmsModuleService.setAccessDataType(u.FYP.Editor),this.coreSiteCategoryCmsModuleService.ServiceGetAll(n).subscribe({next:c=>{this.dataAccessModel=c.access,this.fieldsInfo=this.publicHelper.fieldInfoConvertor(c.access),this.dataModel=c.item,c.isSuccess?c.listItems&&c.listItems.length>0?(this.dataModel=c.listItems[0],this.formInfo.formTitle=this.formInfo.formTitle+" "+c.item.linkCmsModuleId+"<==>"+c.item.linkCmsSiteCategoryId,this.formInfo.formAlert=""):this.cmsToastrService.typeErrorMessage(this.translate.instant("MESSAGE.Module_not_found_for_editing")):(this.translate.get("ERRORMESSAGE.MESSAGE.typeError").subscribe(p=>{this.formInfo.formAlert=p}),this.formInfo.formError=c.errorMessage,this.cmsToastrService.typeErrorMessage(c.errorMessage)),this.publicHelper.processService.processStop(t)},error:c=>{this.cmsToastrService.typeError(c),this.publicHelper.processService.processStop(t,!1)}})}DataEditContent(){this.translate.get("MESSAGE.sending_information_to_the_server").subscribe(n=>{this.formInfo.formAlert=n}),this.formInfo.formError="";const t=this.constructor.name+"main";this.translate.get("MESSAGE.sending_information_to_the_server").subscribe(n=>{this.publicHelper.processService.processStart(t,n)}),this.coreSiteCategoryCmsModuleService.ServiceEdit(this.dataModel).subscribe({next:n=>{this.formInfo.formSubmitAllow=!0,this.dataModelResult=n,n.isSuccess?(this.translate.get("MESSAGE.registration_completed_successfully").subscribe(o=>{this.formInfo.formAlert=o}),this.cmsToastrService.typeSuccessEdit(),this.dialogRef.close({dialogChangedDate:!0})):(this.translate.get("ERRORMESSAGE.MESSAGE.typeError").subscribe(o=>{this.formInfo.formAlert=o}),this.formInfo.formError=n.errorMessage,this.cmsToastrService.typeErrorMessage(n.errorMessage)),this.publicHelper.processService.processStop(t)},error:n=>{this.formInfo.formSubmitAllow=!0,this.cmsToastrService.typeError(n),this.publicHelper.processService.processStop(t,!1)}})}onActionSiteCategorySelect(t){this.dataModel.linkCmsSiteCategoryId=null,t&&t.id>0&&(this.dataModel.linkCmsSiteCategoryId=t.id)}onActionSelectorModuleSelect(t){this.dataModel.linkCmsModuleId=null,t&&t.id>0&&(this.dataModel.linkCmsModuleId=t.id)}onFormSubmit(){this.formGroup.valid&&(this.formInfo.formSubmitAllow=!1,this.DataEditContent())}onFormCancel(){this.dialogRef.close({dialogChangedDate:!1})}onStepClick(t,n){t.previouslySelectedIndex<t.selectedIndex&&(this.formGroup.valid||(this.cmsToastrService.typeErrorFormInvalid(),setTimeout(()=>{n.selectedIndex=t.previouslySelectedIndex},10)))}static#e=this.\u0275fac=function(n){return new(n||s)(e.rXU(R.Vh),e.rXU(R.CP),e.rXU(u.i9D),e.rXU(u.V2o),e.rXU(M.k),e.rXU(y.c$),e.rXU(e.gRc),e.rXU(v.A))};static#t=this.\u0275cmp=e.VBU({type:s,selectors:[["app-core-sitecategorycmsmodule-edit"]],viewQuery:function(n,o){if(1&n&&e.GBs(l,5),2&n){let c;e.mGM(c=e.lsd())&&(o.formGroup=c.first)}},features:[e.Vt3],decls:17,vars:20,consts:[["vform","ngForm"],["ConfigValuesJson",""],[1,"card","card-style","progressOverlayContainer"],[3,"optionsInfoAreaId"],[1,"content","mb-0"],[1,"mb-0","color-highlight","font-600","font-12"],[3,"ngSubmit"],[3,"model","optionDisabled","optionLabel","optionRequired","optionSelectFirstItem","modelChange",4,"ngIf"],[3,"optionChange","optionLoadingChange","optionLoading","optionDisabled","optionSelectForce","optionPlaceholder"],["class","input-style has-borders no-icon input-style-always-active validate-field mb-4",4,"ngIf"],["class","form-actions",4,"ngIf"],[3,"modelChange","model","optionDisabled","optionLabel","optionRequired","optionSelectFirstItem"],[1,"input-style","has-borders","no-icon","input-style-always-active","validate-field","mb-4"],["for","dataModel.configValuesJson",1,"color-highlight"],["matInput","","name","dataModel.configValuesJson","type","text","placeholder","ConfigValuesJson","minlength","0","maxlength","10000","rows","6","id","dataModel.configValuesJson",1,"form-control","validate-name",3,"ngModelChange","ngModel","disabled"],[1,"form-actions"],["type","button",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-gray",3,"click"],[1,"ft-x"],["type","submit",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-green",3,"disabled"],[1,"fa","fa-check-square-o"]],template:function(n,o){if(1&n){const c=e.RV6();e.j41(0,"div",2),e.nrm(1,"app-progress-spinner",3),e.j41(2,"div",4)(3,"p",5),e.EFF(4),e.k0s(),e.j41(5,"p"),e.EFF(6),e.nI1(7,"translate"),e.k0s(),e.j41(8,"form",6,0),e.bIt("ngSubmit",function(){return e.eBV(c),e.Njj(o.onFormSubmit())}),e.DNE(10,a,1,5,"app-cms-enum-record-status-selector",7),e.j41(11,"app-core-sitecategory-selector",8),e.nI1(12,"translate"),e.bIt("optionChange",function(d){return e.eBV(c),e.Njj(o.onActionSiteCategorySelect(d))}),e.mxI("optionLoadingChange",function(d){return e.eBV(c),e.DH7(o.loading,d)||(o.loading=d),e.Njj(d)}),e.k0s(),e.j41(13,"app-core-module-selector",8),e.nI1(14,"translate"),e.bIt("optionChange",function(d){return e.eBV(c),e.Njj(o.onActionSelectorModuleSelect(d))}),e.mxI("optionLoadingChange",function(d){return e.eBV(c),e.DH7(o.loading,d)||(o.loading=d),e.Njj(d)}),e.k0s(),e.DNE(15,m,8,4,"div",9)(16,f,9,7,"div",10),e.k0s()()()}2&n&&(e.R7$(),e.Y8G("optionsInfoAreaId",o.constructor.name),e.R7$(3),e.SpI(" ",o.formInfo.formTitle," "),e.R7$(2),e.SpI(" ",e.bMT(7,14,"TITLE.Be_Careful_When_Entering_Information")," "),e.R7$(4),e.Y8G("ngIf",null==o.fieldsInfo.recordStatus?null:o.fieldsInfo.recordStatus.accessWatchField),e.R7$(),e.R50("optionLoading",o.loading),e.Y8G("optionDisabled",!(null!=o.fieldsInfo.linkCmsSiteCategoryId&&o.fieldsInfo.linkCmsSiteCategoryId.accessEditField))("optionSelectForce",o.dataModel.linkCmsSiteCategoryId)("optionPlaceholder",e.bMT(12,16,"TITLE.SITE_CATEGORY")),e.R7$(2),e.R50("optionLoading",o.loading),e.Y8G("optionDisabled",!(null!=o.fieldsInfo.linkCmsModuleId&&o.fieldsInfo.linkCmsModuleId.accessEditField))("optionSelectForce",o.dataModel.linkCmsModuleId)("optionPlaceholder",e.bMT(14,18,"TITLE.MODULE")),e.R7$(2),e.Y8G("ngIf",null==o.fieldsInfo.configValuesJson?null:o.fieldsInfo.configValuesJson.accessWatchField),e.R7$(),e.Y8G("ngIf",o.formInfo.formSubmitAllow&&!(null!=o.loading&&o.loading.display)))},dependencies:[b.bT,i.qT,i.me,i.BC,i.cb,i.xh,i.tU,i.vS,i.cV,k.fg,F.m,B._,P.S,V.n,y.D9],styles:[".form-body[_ngcontent-%COMP%]{width:500px}@media (max-width: 700px){.form-body[_ngcontent-%COMP%]{display:contents}}#file-manager[_ngcontent-%COMP%]{width:calc(100vw - 16px);height:calc(100vh - 16px)}.recordStatus-1.mat-select-panel[_ngcontent-%COMP%]{background:#ff0}.recordStatus-2.mat-select-panel[_ngcontent-%COMP%]{background:#000}.recordStatus-3.mat-select-panel[_ngcontent-%COMP%]{background:red}"]})}return s})();var g=r(8339),x=r(6006),te=r(2221),oe=r(6182),Z=r(1184),ie=r(8966),ne=r(4685),q=r(8058),E=r(8403),se=r(6145),le=r(1908),ae=r(3036),re=r(3438),ce=r(6381),de=r(1268);const me=()=>[5,10,20,100],ue=s=>({display:s}),pe=s=>({background:s});function fe(s,C){if(1&s){const t=e.RV6();e.j41(0,"a",14),e.bIt("click",function(){e.eBV(t);const o=e.XpG();return e.Njj(o.onActionBackToParentModule())}),e.nrm(1,"i",39),e.k0s()}}function Ce(s,C){if(1&s){const t=e.RV6();e.j41(0,"a",14),e.bIt("click",function(){e.eBV(t);const o=e.XpG();return e.Njj(o.onActionBackToParent())}),e.nrm(1,"i",39),e.k0s()}}function he(s,C){if(1&s){const t=e.RV6();e.j41(0,"div",40)(1,"a",41),e.bIt("click",function(){e.eBV(t);const o=e.XpG();return e.Njj(o.onActionButtonNewRow())}),e.nrm(2,"i",42)(3,"br"),e.k0s(),e.j41(4,"p",43),e.EFF(5),e.nI1(6,"translate"),e.k0s()()}2&s&&(e.R7$(5),e.JRh(e.bMT(6,1,"ACTION.ADD")))}function _e(s,C){if(1&s){const t=e.RV6();e.j41(0,"div",40)(1,"a",44),e.bIt("click",function(){e.eBV(t);const o=e.XpG();return e.Njj(o.onActionButtonEditRow(o.tableRowSelected))}),e.nrm(2,"i",45)(3,"br"),e.k0s(),e.j41(4,"p",43),e.EFF(5),e.nI1(6,"translate"),e.k0s()()}2&s&&(e.R7$(5),e.JRh(e.bMT(6,1,"ACTION.EDIT")))}function ge(s,C){if(1&s){const t=e.RV6();e.j41(0,"div",40)(1,"a",46),e.bIt("click",function(){e.eBV(t);const o=e.XpG();return e.Njj(o.onActionButtonDeleteRow(o.tableRowSelected))}),e.nrm(2,"i",47)(3,"br"),e.k0s(),e.j41(4,"p",43),e.EFF(5),e.nI1(6,"translate"),e.k0s()()}2&s&&(e.R7$(5),e.JRh(e.bMT(6,1,"ACTION.DELETE")))}function Se(s,C){if(1&s){const t=e.RV6();e.j41(0,"div",40)(1,"a",48),e.bIt("click",function(){e.eBV(t);const o=e.XpG();return e.Njj(o.onActionButtonConfigMainAdminRow(o.tableRowSelected))}),e.nrm(2,"i",49)(3,"br"),e.k0s(),e.j41(4,"p",43),e.EFF(5),e.nI1(6,"translate"),e.k0s()()}2&s&&(e.R7$(5),e.JRh(e.bMT(6,1,"ACTION.MODULE_MANAGEMENT_SETTING")))}function Me(s,C){if(1&s&&(e.j41(0,"mat-header-cell",50),e.EFF(1),e.k0s()),2&s){const t=e.XpG();e.R7$(),e.SpI(" ",null==t.fieldsInfo.linkCmsModuleId?null:t.fieldsInfo.linkCmsModuleId.fieldTitle," ")}}function Ie(s,C){if(1&s&&(e.j41(0,"mat-cell"),e.EFF(1),e.k0s()),2&s){const t=C.$implicit;e.R7$(),e.SpI(" ",t.linkCmsModuleId," ")}}function be(s,C){if(1&s&&(e.j41(0,"mat-header-cell",50),e.EFF(1),e.k0s()),2&s){const t=e.XpG();e.R7$(),e.SpI(" ",null==t.fieldsInfo.linkCmsSiteCategoryId?null:t.fieldsInfo.linkCmsSiteCategoryId.fieldTitle," ")}}function ye(s,C){if(1&s&&(e.j41(0,"mat-cell"),e.EFF(1),e.k0s()),2&s){const t=C.$implicit;e.R7$(),e.SpI(" ",t.linkCmsSiteCategoryId," ")}}function Ee(s,C){if(1&s&&(e.j41(0,"mat-header-cell",50),e.EFF(1),e.k0s()),2&s){const t=e.XpG();e.R7$(),e.SpI(" ",null==t.fieldsInfo.recordStatus?null:t.fieldsInfo.recordStatus.fieldTitle," ")}}function Re(s,C){if(1&s&&e.nrm(0,"select",53),2&s){const t=e.XpG().$implicit,n=e.XpG();e.Y8G("contentService",n.contentService)("row",t)("ngStyle",e.eq3(3,ue,t.id===(null==n.tableRowSelected?null:n.tableRowSelected.id)?"":"none"))}}function ve(s,C){if(1&s&&(e.j41(0,"mat-cell",51),e.nI1(1,"statusCellClass"),e.nrm(2,"i",51),e.nI1(3,"statusIconClass"),e.DNE(4,Re,1,5,"select",52),e.k0s()),2&s){const t=C.$implicit,n=e.XpG();e.Y8G("ngClass",e.bMT(1,3,t.recordStatus)),e.R7$(2),e.Y8G("ngClass",e.bMT(3,5,t.recordStatus)),e.R7$(2),e.Y8G("ngIf",null==n.dataModelResult||null==n.dataModelResult.access?null:n.dataModelResult.access.accessEditRow)}}function Ae(s,C){1&s&&(e.j41(0,"mat-header-cell",50),e.EFF(1),e.nI1(2,"translate"),e.k0s()),2&s&&(e.R7$(),e.SpI(" ",e.bMT(2,1,"TITLE.SITE_CATEGORY")," "))}function Te(s,C){if(1&s&&(e.j41(0,"mat-cell"),e.EFF(1),e.k0s()),2&s){const t=C.$implicit;e.R7$(),e.SpI(" ",t.virtual_CmsSiteCategory.title," ")}}function De(s,C){1&s&&(e.j41(0,"mat-header-cell",50),e.EFF(1),e.nI1(2,"translate"),e.k0s()),2&s&&(e.R7$(),e.SpI(" ",e.bMT(2,1,"TITLE.MODULE")," "))}function Le(s,C){if(1&s&&(e.j41(0,"mat-cell"),e.EFF(1),e.k0s()),2&s){const t=C.$implicit;e.R7$(),e.SpI(" ",t.virtual_CmsModule.title," ")}}function Oe(s,C){1&s&&(e.j41(0,"mat-header-cell"),e.EFF(1),e.nI1(2,"translate"),e.k0s()),2&s&&(e.R7$(),e.SpI(" ",e.bMT(2,1,"TITLE.OPTION")," "))}function ke(s,C){if(1&s&&(e.j41(0,"mat-cell",54)(1,"button",55)(2,"mat-icon"),e.EFF(3,"more_vert"),e.k0s()(),e.nrm(4,"mat-menu",null,2),e.k0s()),2&s){const t=e.sdS(5);e.R7$(),e.Y8G("matMenuTriggerFor",t)}}function Ge(s,C){1&s&&e.nrm(0,"mat-header-row")}function je(s,C){if(1&s){const t=e.RV6();e.j41(0,"mat-row",56),e.bIt("click",function(){const o=e.eBV(t).$implicit,c=e.XpG();return e.Njj(c.onActionTableRowSelect(o))}),e.k0s()}if(2&s){const t=C.$implicit,n=e.XpG();e.Y8G("ngStyle",e.eq3(1,pe,t.linkCmsModuleId===(null==n.tableRowSelected?null:n.tableRowSelected.linkCmsModuleId)&&t.linkCmsSiteCategoryId===(null==n.tableRowSelected?null:n.tableRowSelected.linkCmsSiteCategoryId)?"#d3d3da":""))}}let z=(()=>{class s extends X.j{constructor(t,n,o,c,p,d,T,O,J,ee,Ve){if(super(t,new u.pP,ee,p,O),this.contentService=t,this.cmsToastrService=n,this.router=o,this.activatedRoute=c,this.tokenHelper=p,this.cmsConfirmationDialogService=d,this.cdr=T,this.translate=O,this.pageInfo=J,this.publicHelper=ee,this.dialog=Ve,this.requestLinkCmsModuleId=0,this.requestLinkCmsSiteCategoryId=0,this.flag=!1,this.tableContentSelected=[],this.filteModelContent=new u.O2i,this.tabledisplayedColumns=[],this.tabledisplayedColumnsSource=["LinkCmsModuleId","LinkCmsSiteCategoryId","RecordStatus","virtual_CmsSiteCategory.title","virtual_CmsModule.title"],this.publicHelper.processService.cdr=this.cdr,this.translate.get("MESSAGE.Receiving_information").subscribe(I=>{this.loading.message=I}),this.optionsSearch.parentMethods={onSubmit:I=>this.onSubmitOptionsSearch(I)},this.filteModelContent.sortColumn="Id",this.filteModelContent.sortType=u.eKW.Descending,this.requestLinkCmsModuleId=+Number(this.activatedRoute.snapshot.paramMap.get("LinkCmsModuleId")),this.requestLinkCmsSiteCategoryId=+Number(this.activatedRoute.snapshot.paramMap.get("LinkCmsSiteCategoryId")),this.requestLinkCmsModuleId>0){const I=new u.ycK;I.propertyName="LinkCmsModuleId",I.value=this.requestLinkCmsModuleId,this.filteModelContent.filters.push(I)}if(this.requestLinkCmsSiteCategoryId>0){const I=new u.ycK;I.propertyName="LinkCmsSiteCategoryId",I.value=this.requestLinkCmsSiteCategoryId,this.filteModelContent.filters.push(I)}}ngOnInit(){this.filteModelContent.sortColumn="LinkCmsModuleId",this.tokenHelper.getCurrentToken().then(t=>{this.tokenInfo=t,this.DataGetAll()}),this.cmsApiStoreSubscribe=this.tokenHelper.getCurrentTokenOnChange().subscribe({next:t=>{this.tokenInfo=t,this.DataGetAll()}})}ngOnDestroy(){this.cmsApiStoreSubscribe.unsubscribe()}DataGetAll(){this.tabledisplayedColumns=this.publicHelper.TabledisplayedColumnsCheckByAllDataAccess(this.tabledisplayedColumnsSource,[],this.tokenInfo),this.tableRowsSelected=[],this.onActionTableRowSelect(new u.pP);const t=this.constructor.name+"main";this.translate.get("MESSAGE.get_information_list").subscribe(o=>{this.publicHelper.processService.processStart(t,o)}),this.filteModelContent.accessLoad=!0;const n=JSON.parse(JSON.stringify(this.filteModelContent));this.contentService.ServiceGetAllEditor(n).subscribe({next:o=>{o.isSuccess?(this.fieldsInfo=this.publicHelper.fieldInfoConvertor(o.access),this.dataModelResult=o,this.tableSource.data=o.listItems,this.optionsStatist?.data?.show&&this.onActionButtonStatist(!0),this.optionsSearch.childMethods&&this.optionsSearch.childMethods.setAccess(o.access)):this.cmsToastrService.typeErrorMessage(o.errorMessage),this.publicHelper.processService.processStop(t)},error:o=>{this.cmsToastrService.typeError(o),this.publicHelper.processService.processStop(t,!1)}})}onTableSortData(t){this.tableSource&&this.tableSource.sort&&this.tableSource.sort.active===t.active?"asc"===this.tableSource.sort.start?(t.start="desc",this.filteModelContent.sortColumn=t.active,this.filteModelContent.sortType=u.eKW.Descending):"desc"===this.tableSource.sort.start?(t.start="asc",this.filteModelContent.sortColumn="",this.filteModelContent.sortType=u.eKW.Ascending):t.start="desc":(this.filteModelContent.sortColumn=t.active,this.filteModelContent.sortType=u.eKW.Descending),this.tableSource.sort=t,this.filteModelContent.currentPageNumber=0,this.DataGetAll()}onTablePageingData(t){this.filteModelContent.currentPageNumber=t.pageIndex+1,this.filteModelContent.rowPerPage=t.pageSize,this.DataGetAll()}onActionButtonNewRow(){null!=this.dataModelResult&&null!=this.dataModelResult.access&&this.dataModelResult.access.accessAddRow?this.dialog.open(_,{height:"90%",panelClass:this.tokenHelper.isMobile?"dialog-fullscreen":"dialog-min",enterAnimationDuration:L.c.cmsViewConfig.enterAnimationDuration,exitAnimationDuration:L.c.cmsViewConfig.exitAnimationDuration,data:{linkCmsModuleId:this.requestLinkCmsModuleId,linkCmsSiteCategoryId:this.requestLinkCmsSiteCategoryId}}).afterClosed().subscribe(o=>{o&&o.dialogChangedDate&&this.DataGetAll()}):this.cmsToastrService.typeErrorAccessAdd()}onActionButtonEditRow(t=this.tableRowSelected){t&&t.linkCmsModuleId&&0!==t.linkCmsModuleId&&t.linkCmsSiteCategoryId&&0!==t.linkCmsSiteCategoryId?(this.onActionTableRowSelect(t),null!=this.dataModelResult&&null!=this.dataModelResult.access&&this.dataModelResult.access.accessEditRow?this.dialog.open(S,{height:"90%",panelClass:this.tokenHelper.isMobile?"dialog-fullscreen":"dialog-min",enterAnimationDuration:L.c.cmsViewConfig.enterAnimationDuration,exitAnimationDuration:L.c.cmsViewConfig.exitAnimationDuration,data:{linkCmsModuleId:this.tableRowSelected.linkCmsModuleId,linkCmsSiteCategoryId:this.tableRowSelected.linkCmsSiteCategoryId}}).afterClosed().subscribe(c=>{c&&c.dialogChangedDate&&this.DataGetAll()}):this.cmsToastrService.typeErrorAccessEdit()):this.cmsToastrService.typeErrorSelectedRow()}onActionButtonDeleteRow(t=this.tableRowSelected){if(t&&t.linkCmsModuleId&&0!==t.linkCmsModuleId&&t.linkCmsSiteCategoryId&&0!==t.linkCmsSiteCategoryId)if(this.onActionTableRowSelect(t),null!=this.dataModelResult&&null!=this.dataModelResult.access&&this.dataModelResult.access.accessDeleteRow){var n="",o="";this.translate.get(["MESSAGE.Please_Confirm","MESSAGE.Do_you_want_to_delete_this_content"]).subscribe(c=>{n=c["MESSAGE.Please_Confirm"],o=c["MESSAGE.Do_you_want_to_delete_this_content"]+"?<br> ( "+this.tableRowSelected.virtual_CmsModule.title+"<==>"+this.tableRowSelected.virtual_CmsSiteCategory.title+" ) "}),this.cmsConfirmationDialogService.confirm(n,o).then(c=>{if(c){const p=this.constructor.name+"main";this.translate.get("MESSAGE.Receiving_information").subscribe(d=>{this.publicHelper.processService.processStart(p,d,this.constructor.name)}),this.contentService.ServiceDeleteEntity(this.tableRowSelected).subscribe({next:d=>{d.isSuccess?(this.cmsToastrService.typeSuccessRemove(),this.DataGetAll()):this.cmsToastrService.typeErrorRemove(),this.publicHelper.processService.processStop(p)},error:d=>{this.cmsToastrService.typeError(d),this.publicHelper.processService.processStop(p,!1)}})}}).catch(()=>{})}else this.cmsToastrService.typeErrorAccessDelete();else this.translate.get("MESSAGE.no_row_selected_to_delete").subscribe(c=>{this.cmsToastrService.typeErrorSelected(c)})}onActionButtonGoToSiteCategoryCmsModuleList(t=this.tableRowSelected){t&&t.linkCmsModuleId&&0!==t.linkCmsModuleId&&t.linkCmsSiteCategoryId&&0!==t.linkCmsSiteCategoryId?(this.onActionTableRowSelect(t),this.router.navigate(["/core/siteSiteCategoryCmsModule/",this.tableRowSelected.id])):this.translate.get("MESSAGE.no_row_selected_to_display").subscribe(n=>{this.cmsToastrService.typeErrorSelected(n)})}onActionButtonStatist(t=!this.optionsStatist.data.show){if(this.optionsStatist.data.show=t,!this.optionsStatist.data.show)return;const n=new Map;this.translate.get("MESSAGE.Active").subscribe(d=>{n.set(d,0)}),this.translate.get("MESSAGE.All").subscribe(d=>{n.set(d,0)});const o=this.constructor.name+".ServiceStatist";this.translate.get("MESSAGE.Get_the_statist").subscribe(d=>{this.publicHelper.processService.processStart(o,d)}),this.contentService.ServiceGetCount(this.filteModelContent).subscribe({next:d=>{d.isSuccess?(this.translate.get("MESSAGE.All").subscribe(T=>{n.set(T,d.totalRowCount)}),this.optionsStatist.childMethods.setStatistValue(n)):this.cmsToastrService.typeErrorMessage(d.errorMessage),this.publicHelper.processService.processStop(o)},error:d=>{this.cmsToastrService.typeError(d),this.publicHelper.processService.processStop(o,!1)}});const c=JSON.parse(JSON.stringify(this.filteModelContent)),p=new u.ycK;p.propertyName="RecordStatus",p.value=u.Xw7.Available,c.filters.push(p),this.contentService.ServiceGetCount(c).subscribe({next:d=>{d.isSuccess?(this.translate.get("MESSAGE.Active").subscribe(T=>{n.set(T,d.totalRowCount)}),this.optionsStatist.childMethods.setStatistValue(n)):this.cmsToastrService.typeErrorMessage(d.errorMessage),this.publicHelper.processService.processStop(o)},error:d=>{this.cmsToastrService.typeError(d),this.publicHelper.processService.processStop(o,!1)}})}onActionButtonConfigMainAdminRow(t=this.tableRowSelected){t&&t.linkCmsModuleId&&0!==t.linkCmsModuleId&&t.linkCmsSiteCategoryId&&0!==t.linkCmsSiteCategoryId?(this.onActionTableRowSelect(t),this.router.navigate([t.virtual_CmsModule.className+"/config/mainadmin/"])):this.translate.get("ERRORMESSAGE.MESSAGE.typeErrorSelectedRow").subscribe(n=>{this.cmsToastrService.typeErrorSelected(n)})}onActionButtonReload(){this.DataGetAll()}onSubmitOptionsSearch(t){this.filteModelContent.filters=t,this.DataGetAll()}onActionBackToParent(){this.router.navigate(["/core/sitecategory/"])}onActionBackToParentModule(){this.router.navigate(["/core/module/"])}static#e=this.\u0275fac=function(n){return new(n||s)(e.rXU(u.V2o),e.rXU(M.k),e.rXU(D.Ix),e.rXU(D.nX),e.rXU(g._),e.rXU(j.o),e.rXU(e.gRc),e.rXU(y.c$),e.rXU(x.P),e.rXU(v.A),e.rXU(R.bZ))};static#t=this.\u0275cmp=e.VBU({type:s,selectors:[["app-core-sitecategorycmsmodule-list"]],features:[e.Vt3],decls:57,vars:30,consts:[["tableSort","matSort"],["paginator",""],["actionMenu","matMenu"],[3,"optionActionGuideNoticeDisplayChange","optionOnActionButtonMemoRow","optionOnActionButtonMemo","optionOnActionButtonExport","optionOnActionButtonPrintRow","optionGuideNoticeKey","optionActionGuideNoticeDisplay","optionLoading","optionTreeDisplay","optionActionRowId","optionActionRowDisplayMenu","optionSelectRowItemTitle"],["cms-tree",""],["cms-header",""],["cms-action-header",""],[1,"d-flex","justify-content-between","flex-wrap"],[1,"justify-content-end"],[1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-highlight"],[1,"custom-slide-toggle",3,"ngModelChange","ngModel"],[3,"click"],[1,"justify-content-start"],["type","button","class","btn font-13 font-600 btn-s m-1 rounded-s shadow-xl border-0 gradient-highlight","target","_blank",3,"click",4,"ngIf"],["type","button","target","_blank",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-highlight",3,"click"],[1,"fa-solid","fa-info","font-18",2,"color","#ffffff"],[1,"fa-solid","fa-rotate-right","font-18",2,"color","#ffffff"],["cms-action-main",""],["class","col-4",4,"ngIf"],["cms-action-row",""],["cms-action-area",""],[3,"optionsChange","options"],["cms-body",""],["matSort","",3,"matSortChange","dataSource"],["matColumnDef","LinkCmsModuleId"],["mat-sort-header","",4,"matHeaderCellDef"],[4,"matCellDef"],["matColumnDef","LinkCmsSiteCategoryId"],["matColumnDef","RecordStatus"],[3,"ngClass",4,"matCellDef"],["matColumnDef","virtual_CmsSiteCategory.title"],["matColumnDef","virtual_CmsModule.title"],["matColumnDef","Action"],[4,"matHeaderCellDef"],["class"," Action",4,"matCellDef"],[4,"matHeaderRowDef"],[3,"ngStyle","click",4,"matRowDef","matRowDefColumns"],["cms-footer",""],[3,"page","length","pageIndex","pageSize","pageSizeOptions"],[1,"fa-solid","fa-arrow-left","font-18",2,"color","#ffffff"],[1,"col-4"],["type","button","target","_blank",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-teal",3,"click"],[1,"fa-solid","fa-plus","font-18",2,"color","#FFFFFF"],[1,"font-11","text-center","opacity-70"],["target","_blank",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-magenta",3,"click"],[1,"fa-solid","fa-pen","font-18",2,"color","#FFFFFF"],["target","_blank",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-red",3,"click"],[1,"fa-solid","fa-trash","font-18",2,"color","#ffffff"],["target","_blank",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-highlight",3,"click"],[1,"fa-solid","fa-gear","font-18",2,"color","#ffffff"],["mat-sort-header",""],[3,"ngClass"],["matNativeControl","","cmsRecordStatusSelfSave","","style","background: none; border: none;",3,"contentService","row","ngStyle",4,"ngIf"],["matNativeControl","","cmsRecordStatusSelfSave","",2,"background","none","border","none",3,"contentService","row","ngStyle"],[1,"Action"],["type","button","mat-icon-button","","aria-label","Action Menu",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-highlight",3,"matMenuTriggerFor"],[3,"click","ngStyle"]],template:function(n,o){if(1&n){const c=e.RV6();e.j41(0,"app-cms-html-list",3),e.mxI("optionActionGuideNoticeDisplayChange",function(d){return e.eBV(c),e.DH7(o.viewGuideNotice,d)||(o.viewGuideNotice=d),e.Njj(d)}),e.bIt("optionOnActionButtonMemoRow",function(){return e.eBV(c),e.Njj(o.onActionButtonMemoRow())})("optionOnActionButtonMemo",function(){return e.eBV(c),e.Njj(o.onActionButtonMemo())})("optionOnActionButtonExport",function(){return e.eBV(c),e.Njj(o.onActionButtonExport())})("optionOnActionButtonPrintRow",function(){return e.eBV(c),e.Njj(o.onActionButtonPrintRow())}),e.qex(1,4),e.EFF(2," -------------------------------------- "),e.bVm(),e.eu8(3,5),e.qex(4,6),e.j41(5,"div",7)(6,"div",8)(7,"a",9)(8,"mat-slide-toggle",10),e.mxI("ngModelChange",function(d){return e.eBV(c),e.DH7(o.optionsSearch.data.show,d)||(o.optionsSearch.data.show=d),e.Njj(d)}),e.k0s(),e.EFF(9),e.nI1(10,"translate"),e.k0s(),e.j41(11,"a",9)(12,"mat-slide-toggle",11),e.bIt("click",function(){return e.eBV(c),e.Njj(o.onActionButtonStatist())}),e.k0s(),e.EFF(13),e.nI1(14,"translate"),e.k0s()(),e.j41(15,"div",12),e.DNE(16,fe,2,0,"a",13)(17,Ce,2,0,"a",13),e.j41(18,"a",14),e.bIt("click",function(){return e.eBV(c),e.Njj(o.viewGuideNotice=!o.viewGuideNotice)}),e.nrm(19,"i",15),e.k0s(),e.j41(20,"a",14),e.bIt("click",function(){return e.eBV(c),e.Njj(o.onActionButtonReload())}),e.nrm(21,"i",16),e.k0s()()(),e.bVm(),e.qex(22,17),e.DNE(23,he,7,3,"div",18),e.bVm(),e.qex(24,19),e.DNE(25,_e,7,3,"div",18)(26,ge,7,3,"div",18)(27,Se,7,3,"div",18),e.bVm(),e.qex(28,20),e.j41(29,"app-cms-search-list",21),e.mxI("optionsChange",function(d){return e.eBV(c),e.DH7(o.optionsSearch,d)||(o.optionsSearch=d),e.Njj(d)}),e.k0s(),e.j41(30,"app-cms-statist-list",21),e.mxI("optionsChange",function(d){return e.eBV(c),e.DH7(o.optionsStatist,d)||(o.optionsStatist=d),e.Njj(d)}),e.k0s(),e.bVm(),e.qex(31,22),e.j41(32,"mat-table",23,0),e.bIt("matSortChange",function(){e.eBV(c);const d=e.sdS(33);return e.Njj(o.onTableSortData(d))}),e.qex(34,24),e.DNE(35,Me,2,1,"mat-header-cell",25)(36,Ie,2,1,"mat-cell",26),e.bVm(),e.qex(37,27),e.DNE(38,be,2,1,"mat-header-cell",25)(39,ye,2,1,"mat-cell",26),e.bVm(),e.qex(40,28),e.DNE(41,Ee,2,1,"mat-header-cell",25)(42,ve,5,7,"mat-cell",29),e.bVm(),e.qex(43,30),e.DNE(44,Ae,3,3,"mat-header-cell",25)(45,Te,2,1,"mat-cell",26),e.bVm(),e.qex(46,31),e.DNE(47,De,3,3,"mat-header-cell",25)(48,Le,2,1,"mat-cell",26),e.bVm(),e.qex(49,32),e.DNE(50,Oe,3,3,"mat-header-cell",33)(51,ke,6,1,"mat-cell",34),e.bVm(),e.DNE(52,Ge,1,0,"mat-header-row",35)(53,je,1,3,"mat-row",36),e.k0s(),e.bVm(),e.qex(54,37),e.j41(55,"mat-paginator",38,1),e.bIt("page",function(d){return e.eBV(c),e.Njj(o.onTablePageingData(d))}),e.k0s(),e.bVm(),e.k0s()}2&n&&(e.Y8G("optionGuideNoticeKey",""),e.R50("optionActionGuideNoticeDisplay",o.viewGuideNotice),e.Y8G("optionLoading",o.loading)("optionTreeDisplay",!1)("optionActionRowId",null==o.tableRowSelected?null:o.tableRowSelected.id)("optionActionRowDisplayMenu",o.tableRowSelectDoubleClick)("optionSelectRowItemTitle",null==o.tableRowSelected?null:o.tableRowSelected.id),e.R7$(8),e.R50("ngModel",o.optionsSearch.data.show),e.R7$(),e.SpI("",e.bMT(10,25,"ACTION.SEARCH")," "),e.R7$(4),e.SpI("",e.bMT(14,27,"ACTION.STATIST")," "),e.R7$(3),e.Y8G("ngIf",o.requestLinkCmsModuleId>0),e.R7$(),e.Y8G("ngIf",o.requestLinkCmsSiteCategoryId>0),e.R7$(6),e.Y8G("ngIf",null==o.dataModelResult||null==o.dataModelResult.access?null:o.dataModelResult.access.accessAddRow),e.R7$(2),e.Y8G("ngIf",null==o.dataModelResult||null==o.dataModelResult.access?null:o.dataModelResult.access.accessEditRow),e.R7$(),e.Y8G("ngIf",null==o.dataModelResult||null==o.dataModelResult.access?null:o.dataModelResult.access.accessDeleteRow),e.R7$(),e.Y8G("ngIf",o.tokenInfo.userAccessAdminAllowToProfessionalData),e.R7$(2),e.R50("options",o.optionsSearch),e.R7$(),e.R50("options",o.optionsStatist),e.R7$(2),e.Y8G("dataSource",o.tableSource),e.R7$(20),e.Y8G("matHeaderRowDef",o.tabledisplayedColumns),e.R7$(),e.Y8G("matRowDefColumns",o.tabledisplayedColumns),e.R7$(2),e.Y8G("length",o.dataModelResult.totalRowCount)("pageIndex",o.dataModelResult.currentPageNumber-1)("pageSize",o.dataModelResult.rowPerPage)("pageSizeOptions",e.lJ4(29,me)))},dependencies:[b.YU,b.bT,b.B3,i.BC,i.vS,te.iY,oe.An,k.fg,Z.kk,Z.Cp,ie.iy,ne.sG,q.B4,q.aE,E.Zl,E.tL,E.ji,E.cC,E.YV,E.iL,E.KS,E.$R,E.YZ,E.NB,se.l,le.l,ae.A,re.x,y.D9,ce.T,de.M],encapsulation:2})}return s})();const Fe=[{path:"",children:[{path:"",component:z},{path:"LinkCmsModuleId/:LinkCmsModuleId",component:z},{path:"LinkCmsSiteCategoryId/:LinkCmsSiteCategoryId",component:z}]}];let Be=(()=>{class s{static#e=this.\u0275fac=function(n){return new(n||s)};static#t=this.\u0275mod=e.$C({type:s});static#o=this.\u0275inj=e.G2t({imports:[D.iI.forChild(Fe),D.iI]})}return s})(),Pe=(()=>{class s{static#e=this.\u0275fac=function(n){return new(n||s)};static#t=this.\u0275mod=e.$C({type:s});static#o=this.\u0275inj=e.G2t({providers:[u.V2o,j.o,u.XBe],imports:[b.MD,i.YN,Be,i.X1.withConfig({warnOnNgModelWithFormControl:"never"}),h.G,w.Qt,N.CoreModuleModule,U.CoreSiteCategoryCmsModule]})}return s})()},2243:(Q,G,r)=>{r.d(G,{n:()=>K});var b=r(3308),i=r(7788),u=r(7222),h=r(8189),w=r(5804),j=r(965),N=r(8887),U=r(3793),D=r(2831),X=r(3527),L=r(4434),R=r(9722),$=r(5154),e=r(2882),M=r(6610),v=r(2497),y=r(8278),k=r(9344),F=r(6182),B=r(4587),P=r(7912);const V=["*"];function W(_,A){if(1&_&&(i.j41(0,"label",8),i.EFF(1),i.k0s()),2&_){const l=i.XpG();i.Mz_("for","app-cms-site-selector-",l.id,""),i.R7$(),i.JRh(l.optionLabel)}}function Y(_,A){if(1&_&&(i.j41(0,"mat-option",9)(1,"span"),i.EFF(2),i.k0s()()),2&_){const l=A.$implicit,a=i.XpG();i.Y8G("value",l)("disabled",a.optionDisabled),i.R7$(2),i.JRh(a.displayOption(l))}}function H(_,A){if(1&_){const l=i.RV6();i.j41(0,"mat-icon",10),i.bIt("click",function(){i.eBV(l);const m=i.XpG();return i.Njj(m.onActionSelectClear())}),i.EFF(1,"close"),i.k0s()}}let K=(()=>{class _{static#e=this.nextId=0;constructor(l,a,m,f,S,g){this.coreEnumService=l,this.cmsToastrService=a,this.cdr=m,this.publicHelper=f,this.translate=S,this.categoryService=g,this.id=++_.nextId,this.dataModelResult=new h.N$V,this.dataModelSelect=new h.UAV,this.formControl=new u.MJ,this.optionDisabled=!1,this.optionSelectFirstItem=!1,this.optionPlaceholder="",this.optionLabel="",this.optionChange=new i.bkB,this.optionReload=()=>this.onActionButtonReload(),this.loading=new L.o,this.publicHelper.processService.cdr=this.cdr,this.translate.get("MESSAGE.Receiving_information").subscribe(x=>{this.loading.message=x})}set optionSelectForce(l){this.onActionSelectForce(l)}get optionLoading(){return this.loading}set optionLoading(l){this.loading=l}ngOnInit(){this.loadOptions(),(!this.optionLabel||0==this.optionLabel.length&&this.optionPlaceholder?.length>0)&&(this.optionLabel=this.optionPlaceholder)}loadOptions(){this.filteredOptions=this.formControl.valueChanges.pipe((0,j.Z)(""),(0,N.B)(1500),(0,U.F)(),(0,D.n)(l=>"string"==typeof l||"number"==typeof l?this.DataGetAll(l||""):[]))}displayFn(l){return l?l.title:void 0}displayOption(l){return l?l.title:void 0}DataGetAll(l){var a=this;return(0,b.A)(function*(){const m=new h.O2i;m.rowPerPage=20,m.accessLoad=!0;let f=new h.ycK;return f.propertyName="Title",f.value=l,f.searchType=h._GO.Contains,f.clauseType=h.jL_.Or,m.filters.push(f),l&&"number"==typeof+l&&+l>0&&(f=new h.ycK,f.propertyName="Id",f.value=l,f.searchType=h._GO.Equal,f.clauseType=h.jL_.Or,m.filters.push(f)),a.publicHelper.processService.processStart("DataGetAll"),yield(0,w._)(a.categoryService.ServiceGetAll(m)).then(S=>(a.dataModelResult=S,a.optionSelectFirstItem&&(!a.dataModelSelect||!a.dataModelSelect.id||a.dataModelSelect.id<=0)&&a.dataModelResult.listItems.length>0&&(a.optionSelectFirstItem=!1,setTimeout(()=>{a.formControl.setValue(a.dataModelResult.listItems[0])},1e3),a.onActionSelect(a.dataModelResult.listItems[0])),a.publicHelper.processService.processStop("DataGetAll"),S.listItems))})()}onActionSelect(l){this.optionDisabled||(this.dataModelSelect=l,this.optionChange.emit(this.dataModelSelect))}onActionSelectClear(){this.optionDisabled||(this.dataModelSelect=null,this.formControl.setValue(null),this.optionChange.emit(null))}push(l){return this.filteredOptions.pipe((0,X.T)(a=>(a.find(m=>m.id===l.id)||a.push(l),a)))}onActionSelectForce(l){if("number"==typeof l&&l>0){if(this.dataModelSelect&&this.dataModelSelect.id===l)return;if(this.dataModelResult&&this.dataModelResult.listItems&&this.dataModelResult.listItems.find(a=>a.id===l)){const a=this.dataModelResult.listItems.find(m=>m.id===l);return this.dataModelSelect=a,void this.formControl.setValue(a)}this.categoryService.ServiceGetOneById(l).subscribe({next:a=>{a.isSuccess?(this.filteredOptions=this.push(a.item),this.dataModelSelect=a.item,this.formControl.setValue(a.item),this.optionChange.emit(a.item)):this.cmsToastrService.typeErrorMessage(a.errorMessage)}})}else{if(typeof l==typeof h.UAV)return this.filteredOptions=this.push(l),this.dataModelSelect=l,void this.formControl.setValue(l);this.formControl.setValue(null)}}onActionButtonReload(){this.dataModelSelect=new h.UAV,this.loadOptions()}static#t=this.\u0275fac=function(a){return new(a||_)(i.rXU(h.i9D),i.rXU(R.k),i.rXU(i.gRc),i.rXU($.A),i.rXU(e.c$),i.rXU(h.WCW))};static#o=this.\u0275cmp=i.VBU({type:_,selectors:[["app-core-sitecategory-selector"]],inputs:{optionDisabled:"optionDisabled",optionSelectFirstItem:"optionSelectFirstItem",optionPlaceholder:"optionPlaceholder",optionLabel:"optionLabel",optionReload:"optionReload",optionSelectForce:"optionSelectForce",optionLoading:"optionLoading"},outputs:{optionChange:"optionChange"},ngContentSelectors:V,decls:10,vars:13,consts:[["matauto","matAutocomplete"],[1,"input-style","has-borders","no-icon","input-style-always-active","validate-field","mb-4","progressOverlayContainer"],[3,"optionsInfoAreaId"],["class","color-highlight",3,"for",4,"ngIf"],["type","text","matInput","",1,"form-control","validate-name",3,"placeholder","formControl","matAutocomplete","id"],[3,"optionSelected","displayWith"],[3,"value","disabled",4,"ngFor","ngForOf"],["matSuffix","","matSuffix","","mat-icon-button","","aria-label","Clear",3,"click",4,"ngIf"],[1,"color-highlight",3,"for"],[3,"value","disabled"],["matSuffix","","matSuffix","","mat-icon-button","","aria-label","Clear",3,"click"]],template:function(a,m){if(1&a){const f=i.RV6();i.NAR(),i.j41(0,"div",1),i.nrm(1,"app-progress-spinner",2),i.DNE(2,W,2,3,"label",3),i.nrm(3,"input",4),i.j41(4,"mat-autocomplete",5,0),i.bIt("optionSelected",function(g){return i.eBV(f),i.Njj(m.onActionSelect(g.option.value))}),i.DNE(6,Y,3,3,"mat-option",6),i.nI1(7,"async"),i.k0s(),i.DNE(8,H,2,0,"mat-icon",7),i.SdG(9),i.k0s()}if(2&a){const f=i.sdS(5);i.R7$(),i.Y8G("optionsInfoAreaId",m.constructor.name),i.R7$(),i.Y8G("ngIf",(null==m.optionLabel?null:m.optionLabel.length)>0),i.R7$(),i.FS9("placeholder",m.optionPlaceholder),i.Mz_("id","app-cms-site-selector-",m.id,""),i.Y8G("formControl",m.formControl)("matAutocomplete",f),i.BMQ("disabled",!!m.optionDisabled||null),i.R7$(),i.Y8G("displayWith",m.displayFn),i.R7$(2),i.Y8G("ngForOf",i.bMT(7,11,m.filteredOptions)),i.R7$(2),i.Y8G("ngIf",null==m.dataModelSelect?null:m.dataModelSelect.id)}},dependencies:[M.Sq,M.bT,u.me,u.BC,u.l_,v.$3,y.wT,v.pN,k.yw,F.An,B.fg,P._,M.Jj],encapsulation:2})}return _})()}}]);