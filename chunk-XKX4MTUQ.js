import{q as f}from"./chunk-KH2LX4SB.js";import{Je as l,ca as u,fa as i,g as a,hd as c}from"./chunk-XM6FHPUW.js";var d=(()=>{let t=class t{constructor(o,e){this.tokenHelper=o,this.router=e}canActivate(o,e){return a(this,null,function*(){let s=this.tokenHelper.coreAuthService.getUserToken();if(!s||s.length===0)return this.router.navigate(["auth"],{queryParams:{returnUrl:e.url}}),!1;let r=new l;return yield this.tokenHelper.getTokenInfoState().then(m=>{r=m}),r&&r.userId>0&&r.siteId>0?!0:(r&&r.userId>0&&this.router.navigate(["/core/site/selection"],{queryParams:{returnUrl:e.url}}),!1)})}delay(o){return new Promise(e=>setTimeout(e,o))}ngOnDestroy(){this.subscriptions.unsubscribe()}};t.\u0275fac=function(e){return new(e||t)(i(f),i(c))},t.\u0275prov=u({token:t,factory:t.\u0275fac,providedIn:"root"});let n=t;return n})();export{d as a};
