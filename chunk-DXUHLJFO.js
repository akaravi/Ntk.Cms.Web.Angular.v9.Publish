import{a as ye,b as vt}from"./chunk-GP5KCW5D.js";import{c as Rt}from"./chunk-TI7AG24X.js";import"./chunk-6MBKZSWR.js";import{a as wt}from"./chunk-FF6N2Z2N.js";import{a as It}from"./chunk-SJXQXWV4.js";import{a as yt}from"./chunk-NIGK3PFD.js";import{b as Et}from"./chunk-XNVXOOPN.js";import{a as Me}from"./chunk-FFRFE3ML.js";import{Bd as Ct,Dc as ut,Kd as Mt,L as de,La as me,M as pe,Ma as ue,Mc as he,Na as He,O as Oe,P as Pe,Pc as ft,Ta as je,Tc as gt,Uc as _t,Vb as Ye,Wa as q,Wb as Ze,Xb as $e,Yb as et,Zb as tt,_b as it,aa as ce,cd as Se,dd as Ce,fc as ot,gc as nt,hc as rt,ic as lt,id as ht,jc as at,kc as st,lb as ge,lc as dt,mb as Qe,mc as pt,nb as z,nc as ct,oc as mt,p as oe,s as ne,sa as Ne,sb as Xe,t as re,tb as K,ud as St,v as le,vb as _e,x as ae,y as se}from"./chunk-TGGEN4MT.js";import{b as H,c as j,q as Je}from"./chunk-6ICUODQV.js";import{Cd as ze,Db as ee,Dc as Ve,Dd as V,Eb as te,Fb as ie,Hd as we,Ia as $,Ib as L,Id as Re,Jd as fe,Kb as c,La as l,Lb as b,Lc as Be,Ma as M,Mb as C,Qb as E,Qd as U,Rb as w,Sb as R,Vb as xe,Vd as Ke,Wb as Le,Wd as B,Yb as h,Za as G,Zb as S,_b as ke,ab as y,cb as m,da as Y,dq as X,eb as Te,fd as Ge,gc as W,hd as We,ja as P,ka as Z,kd as Ee,lb as a,mb as s,nb as v,ob as T,pb as A,qb as Ae,ra as u,rb as F,sa as f,td as qe,tf as D,ub as I,vd as J,wb as _,xc as De,zb as x,zc as N,zd as Ue}from"./chunk-423NP4GT.js";var Qt=["vform"];function Jt(o,d){if(o&1){let n=F();a(0,"app-cms-enum-record-status-selector",28),R("modelChange",function(t){u(n);let e=_();return w(e.dataModel.recordStatus,t)||(e.dataModel.recordStatus=t),f(t)}),s()}if(o&2){let n=_();E("model",n.dataModel.recordStatus),m("optionDisabled",!1)("optionLabel",n.fieldsInfo.recordStatus==null?null:n.fieldsInfo.recordStatus.fieldTitle)("optionRequired",!0)("optionSelectFirstItem",!0)}}function Xt(o,d){if(o&1&&(a(0,"mat-error"),c(1),a(2,"strong"),c(3),h(4,"translate"),s()()),o&2){let n=_();l(),C(" ",n.fieldsInfo.title==null?null:n.fieldsInfo.title.fieldTitle," is "),l(2),b(S(4,2,"MESSAGE.required"))}}function Yt(o,d){o&1&&(a(0,"mat-error"),c(1," TitleResourceLanguage is "),a(2,"strong"),c(3),h(4,"translate"),s()()),o&2&&(l(3),b(S(4,1,"MESSAGE.required")))}function Zt(o,d){if(o&1){let n=F();a(0,"app-cms-enum-x-selector",29),R("modelChange",function(t){u(n);let e=_();return w(e.dataModel.reportFileType,t)||(e.dataModel.reportFileType=t),f(t)}),s()}if(o&2){let n=_();m("optionDataListResult",n.dataModelReportFileTypeEnumResult),E("model",n.dataModel.reportFileType),m("optionDisabled",!1)("optionLabel",n.fieldsInfo.reportFileType==null?null:n.fieldsInfo.reportFileType.fieldTitle)("optionRequired",!0)("optionSelectFirstItem",!0)}}function $t(o,d){o&1&&(a(0,"mat-error"),c(1," Description is "),a(2,"strong"),c(3),h(4,"translate"),s()()),o&2&&(l(3),b(S(4,1,"MESSAGE.required")))}function ei(o,d){if(o&1&&(v(0,"img",30),h(1,"cmsthumbnail")),o&2){let n=_();x("src",S(1,1,n.dataModel.linkImageIdSrc),$)}}function ti(o,d){if(o&1){let n=F();a(0,"div",12)(1,"label",31),I("click",function(){u(n);let t=_();return f(t.fileManagerOpenForm=!0)}),c(2),h(3,"translate"),s(),a(4,"input",32,5),h(6,"translate"),R("ngModelChange",function(t){u(n);let e=_();return w(e.dataModel.linkImageId,t)||(e.dataModel.linkImageId=t),f(t)}),I("click",function(){u(n);let t=_();return f(t.fileManagerOpenForm=!0)}),s(),a(7,"cms-file-manager",33),I("itemSelected",function(t){u(n);let e=_();return f(e.onActionFileSelected(t))}),R("openFormChange",function(t){u(n);let e=_();return w(e.fileManagerOpenForm,t)||(e.fileManagerOpenForm=t),f(t)}),s()()}if(o&2){let n=_();l(2),b(S(3,11,"TITLE.Original_File_ID")),l(2),x("placeholder",S(6,13,"TITLE.Icon_File_ID")),E("ngModel",n.dataModel.linkImageId),l(3),m("language",n.appLanguage)("isPopup",!0),E("openForm",n.fileManagerOpenForm),m("tree",n.fileManagerTree)("openFilemanagerButtonLabelKey","select")("openDirectUploadView",!0)("selectFileType",n.selectFileTypeMainImage)("openFilemanagerButtonView",!1)}}function ii(o,d){if(o&1){let n=F();a(0,"div",34)(1,"button",35),I("click",function(){u(n);let t=_();return f(t.onFormCancel())}),v(2,"i",36),c(3),h(4,"translate"),s(),a(5,"button",37),v(6,"i",38),c(7),h(8,"translate"),s()()}if(o&2){_();let n=L(9);l(3),C(" ",S(4,3,"ACTION.CANCEL")," "),l(2),m("disabled",!n.form.valid),l(2),C(" ",S(8,5,"ACTION.SAVE")," ")}}var Dt=(()=>{let d=class d extends yt{constructor(i,t,e,p,g,r,k,O){super(p,new D,r,O),this.data=i,this.dialogRef=t,this.coreEnumService=e,this.coreModuleEntityReportFileService=p,this.cmsToastrService=g,this.publicHelper=r,this.cdr=k,this.translate=O,this.constructorInfoAreaId=this.constructor.name,this.fieldsInfo=new Map,this.selectFileTypeMainImage=["jpg","jpeg","png"],this.selectFileTypeReport=["mrt"],this.appLanguage="fa",this.dataModelResult=new V,this.dataModel=new D,this.dataModelReportFileTypeEnumResult=new V,this.formInfo=new fe,this.fileManagerOpenForm=!1,this.fileManagerOpenFormReport=!1,this.publicHelper.processService.cdr=this.cdr,this.fileManagerTree=this.publicHelper.GetfileManagerTreeConfig(),i&&i.linkModuleEntityId&&(this.dataModel.linkModuleEntityId=i.linkModuleEntityId)}ngOnInit(){this.translate.get("TITLE.ADD").subscribe(i=>{this.formInfo.formTitle=i}),this.DataGetAccess(),this.getReportFileTypeEnum()}getReportFileTypeEnum(){this.coreEnumService.ServiceReportFileTypeEnum().subscribe({next:i=>{this.dataModelReportFileTypeEnumResult=i}})}DataAddContent(){this.translate.get("MESSAGE.sending_information_to_the_server").subscribe(t=>{this.formInfo.formAlert=t}),this.formInfo.formError="";let i=this.constructor.name+"main";this.translate.get("MESSAGE.Receiving_information").subscribe(t=>{this.publicHelper.processService.processStart(i,t,this.constructorInfoAreaId)}),this.coreModuleEntityReportFileService.ServiceAdd(this.dataModel).subscribe({next:t=>{this.formInfo.formSubmitAllow=!0,this.dataModelResult=t,t.isSuccess?(this.translate.get("MESSAGE.registration_completed_successfully").subscribe(e=>{this.formInfo.formAlert=e}),this.cmsToastrService.typeSuccessAdd(),this.dialogRef.close({dialogChangedDate:!0})):(this.translate.get("ERRORMESSAGE.MESSAGE.typeError").subscribe(e=>{this.formInfo.formAlert=e}),this.formInfo.formError=t.errorMessage,this.cmsToastrService.typeErrorMessage(t.errorMessage)),this.publicHelper.processService.processStop(i)},error:t=>{this.formInfo.formSubmitAllow=!0,this.cmsToastrService.typeError(t),this.publicHelper.processService.processStop(i,!1)}})}onActionSelectorModuleEntitySelect(i){this.dataModel.linkModuleEntityId=null,i&&i.id>0&&(this.dataModel.linkModuleEntityId=i.id)}onActionFileSelected(i){this.dataModel.linkImageId=i.id,this.dataModel.linkImageIdSrc=i.downloadLinksrc}onActionFileSelectedLinkFileId(i){this.dataModel.linkFileId=i.id,this.dataModel.linkFileIdSrc=i.downloadLinksrc}onFormSubmit(){this.formGroup.valid&&(this.formInfo.formSubmitAllow=!1,this.DataAddContent())}onFormCancel(){this.dialogRef.close({dialogChangedDate:!1})}};d.\u0275fac=function(t){return new(t||d)(M(ue),M(me),M(U),M(B),M(z),M(K),M(W),M(H))},d.\u0275cmp=P({type:d,selectors:[["app-core-module-entity-report-file-add"]],viewQuery:function(t,e){if(t&1&&ee(Qt,5),t&2){let p;te(p=ie())&&(e.formGroup=p.first)}},features:[G],decls:48,vars:42,consts:[["vform","ngForm"],["Title",""],["TitleResourceLanguage",""],["Description",""],["LinkFileId",""],["LinkImageId",""],[1,"card","card-style","loader-container"],[3,"optionsInfoAreaId"],[1,"content","mb-0"],[1,"mb-0","color-highlight","font-600","font-12"],[3,"ngSubmit"],[3,"model","optionDisabled","optionLabel","optionRequired","optionSelectFirstItem","modelChange",4,"ngIf"],[1,"input-style","has-borders","no-icon","input-style-always-active","validate-field","mb-4"],["for","dataModel.title",1,"color-highlight"],["matInput","","type","text","name","dataModel.title","minlength","3","maxlength","100","id","dataModel.title",1,"form-control","validate-name",3,"ngModelChange","ngModel","placeholder"],[4,"ngIf"],["for","dataModel.titleResourceLanguage",1,"color-highlight"],["matInput","","type","text","name","dataModel.titleResourceLanguage","minlength","3","maxlength","100","id","dataModel.titleResourceLanguage",1,"form-control","validate-name",3,"ngModelChange","ngModel","placeholder"],[3,"optionChange","optionDisabled","optionSelectForce","optionPlaceholder"],[3,"optionDataListResult","model","optionDisabled","optionLabel","optionRequired","optionSelectFirstItem","modelChange",4,"ngIf"],["for","dataModel.description",1,"color-highlight"],["matInput","","name","dataModel.description","type","text","minlength","1","maxlength","500","rows","5","id","dataModel.description",1,"form-control","validate-name",3,"ngModelChange","ngModel","placeholder"],[1,"mb-3"],["style","vertical-align:middle;","class","ntk-hover-zoom","aria-hidden","","height","50","width","50",3,"src",4,"ngIf"],["class","input-style has-borders no-icon input-style-always-active validate-field mb-4",4,"ngIf"],["matInput","","type","text","name","dataModel.linkFileId","autocomplete","off","id","dataModel.linkFileId",1,"form-control","validate-name",3,"ngModelChange","click","ngModel","placeholder"],[3,"itemSelected","openFormChange","language","isPopup","openForm","tree","openDirectUploadView","openFilemanagerButtonLabelKey","selectFileType","openFilemanagerButtonView"],["class","form-actions",4,"ngIf"],[3,"modelChange","model","optionDisabled","optionLabel","optionRequired","optionSelectFirstItem"],[3,"modelChange","optionDataListResult","model","optionDisabled","optionLabel","optionRequired","optionSelectFirstItem"],["aria-hidden","","height","50","width","50",1,"ntk-hover-zoom",2,"vertical-align","middle",3,"src"],["for","dataModel.linkImageId",1,"color-highlight",3,"click"],["matInput","","type","text","name","dataModel.linkImageId","autocomplete","off","id","dataModel.linkImageId",1,"form-control","validate-name",3,"ngModelChange","click","ngModel","placeholder"],[3,"itemSelected","openFormChange","language","isPopup","openForm","tree","openFilemanagerButtonLabelKey","openDirectUploadView","selectFileType","openFilemanagerButtonView"],[1,"form-actions"],["type","button",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-gray",3,"click"],[1,"ft-x"],["type","submit",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-green",3,"disabled"],[1,"fa","fa-check-square-o"]],template:function(t,e){if(t&1){let p=F();a(0,"div",6),v(1,"app-progress-spinner",7),a(2,"div",8)(3,"p",9),c(4),s(),a(5,"p"),c(6),h(7,"translate"),s(),a(8,"form",10,0),I("ngSubmit",function(){return u(p),f(e.onFormSubmit())}),y(10,Jt,1,5,"app-cms-enum-record-status-selector",11),a(11,"div",12)(12,"label",13),c(13),s(),a(14,"input",14,1),R("ngModelChange",function(r){return u(p),w(e.dataModel.title,r)||(e.dataModel.title=r),f(r)}),s(),a(16,"em"),c(17),s(),y(18,Xt,5,4,"mat-error",15),s(),a(19,"div",12)(20,"label",16),c(21),s(),a(22,"input",17,2),R("ngModelChange",function(r){return u(p),w(e.dataModel.titleResourceLanguage,r)||(e.dataModel.titleResourceLanguage=r),f(r)}),s(),a(24,"em"),c(25),s(),y(26,Yt,5,3,"mat-error",15),s(),a(27,"app-core-module-entity-selector",18),h(28,"translate"),I("optionChange",function(r){return u(p),f(e.onActionSelectorModuleEntitySelect(r))}),s(),y(29,Zt,1,6,"app-cms-enum-x-selector",19),a(30,"div",12)(31,"label",20),c(32),s(),a(33,"textarea",21,3),R("ngModelChange",function(r){return u(p),w(e.dataModel.description,r)||(e.dataModel.description=r),f(r)}),c(35,"          "),s(),a(36,"em"),c(37),s(),y(38,$t,5,3,"mat-error",15),s(),a(39,"div",22),y(40,ei,2,3,"img",23),s(),y(41,ti,8,15,"div",24),a(42,"div",12)(43,"input",25,4),h(45,"translate"),R("ngModelChange",function(r){return u(p),w(e.dataModel.linkFileId,r)||(e.dataModel.linkFileId=r),f(r)}),I("click",function(){return u(p),f(e.fileManagerOpenFormReport=!0)}),s(),a(46,"cms-file-manager",26),I("itemSelected",function(r){return u(p),f(e.onActionFileSelectedLinkFileId(r))}),R("openFormChange",function(r){return u(p),w(e.fileManagerOpenFormReport,r)||(e.fileManagerOpenFormReport=r),f(r)}),s()(),y(47,ii,9,7,"div",27),s()()()}if(t&2){let p=L(15),g=L(23),r=L(34);l(),m("optionsInfoAreaId",e.constructorInfoAreaId),l(3),C(" ",e.formInfo.formTitle," "),l(2),C(" ",S(7,36,"TITLE.Be_Careful_When_Entering_Information")," "),l(4),m("ngIf",e.fieldsInfo.recordStatus==null?null:e.fieldsInfo.recordStatus.accessWatchField),l(3),b(e.fieldsInfo.title==null?null:e.fieldsInfo.title.fieldTitle),l(),x("placeholder",e.fieldsInfo.title==null?null:e.fieldsInfo.title.fieldTitle),E("ngModel",e.dataModel.title),l(3),C("",p.value.length," / 100"),l(),m("ngIf",p.errors==null?null:p.errors.required),l(3),b(e.fieldsInfo.titleResourceLanguage==null?null:e.fieldsInfo.titleResourceLanguage.fieldTitle),l(),x("placeholder",e.fieldsInfo.titleResourceLanguage==null?null:e.fieldsInfo.titleResourceLanguage.fieldTitle),E("ngModel",e.dataModel.titleResourceLanguage),l(3),C("",g.value.length," / 100"),l(),m("ngIf",g.errors==null?null:g.errors.required),l(),m("optionDisabled",!(e.fieldsInfo.linkModuleEntityId!=null&&e.fieldsInfo.linkModuleEntityId.accessEditField))("optionSelectForce",e.dataModel.linkModuleEntityId)("optionPlaceholder",S(28,38,"TITLE.MODULE_ENTITY")),l(2),m("ngIf",e.fieldsInfo.reportFileType==null?null:e.fieldsInfo.reportFileType.accessWatchField),l(3),b(e.fieldsInfo.description==null?null:e.fieldsInfo.description.fieldTitle),l(),x("placeholder",e.fieldsInfo.description==null?null:e.fieldsInfo.description.fieldTitle),E("ngModel",e.dataModel.description),l(4),C("",r.value.length," / 500"),l(),m("ngIf",r.errors==null?null:r.errors.required),l(2),m("ngIf",(e.dataModel==null||e.dataModel.linkImageIdSrc==null?null:e.dataModel.linkImageIdSrc.length)>0),l(),m("ngIf",e.fieldsInfo.linkImageId==null?null:e.fieldsInfo.linkImageId.accessWatchField),l(2),x("placeholder",S(45,40,"TITLE.Report_File_ID")),E("ngModel",e.dataModel.linkFileId),l(3),m("language",e.appLanguage)("isPopup",!0),E("openForm",e.fileManagerOpenFormReport),m("tree",e.fileManagerTree)("openDirectUploadView",!0)("openFilemanagerButtonLabelKey","select")("selectFileType",e.selectFileTypeReport)("openFilemanagerButtonView",!1),l(),m("ngIf",e.formInfo.formSubmitAllow)}},dependencies:[N,se,oe,ne,re,de,pe,ae,le,ce,q,Se,Ce,_e,ye,ge,j,he],styles:[".form-body[_ngcontent-%COMP%]{width:500px}@media (max-width: 700px){.form-body[_ngcontent-%COMP%]{display:contents}}#file-manager[_ngcontent-%COMP%]{width:calc(100vw - 16px);height:calc(100vh - 16px)}.recordStatus-1.mat-select-panel[_ngcontent-%COMP%]{background:#ff0}.recordStatus-2.mat-select-panel[_ngcontent-%COMP%]{background:#000}.recordStatus-3.mat-select-panel[_ngcontent-%COMP%]{background:red}"]});let o=d;return o})();var oi=["vform"];function ni(o,d){if(o&1){let n=F();a(0,"app-cms-enum-record-status-selector",30),R("modelChange",function(t){u(n);let e=_();return w(e.dataModel.recordStatus,t)||(e.dataModel.recordStatus=t),f(t)}),s()}if(o&2){let n=_();E("model",n.dataModel.recordStatus),m("optionDisabled",!1)("optionLabel",n.fieldsInfo.recordStatus==null?null:n.fieldsInfo.recordStatus.fieldTitle)("optionRequired",!0)("optionSelectFirstItem",!0)}}function ri(o,d){if(o&1&&(a(0,"mat-error"),c(1),a(2,"strong"),c(3),h(4,"translate"),s()()),o&2){let n=_();l(),C(" ",n.fieldsInfo.title==null?null:n.fieldsInfo.title.fieldTitle," is "),l(2),b(S(4,2,"MESSAGE.required"))}}function li(o,d){o&1&&(a(0,"mat-error"),c(1," TitleResourceLanguage is "),a(2,"strong"),c(3),h(4,"translate"),s()()),o&2&&(l(3),b(S(4,1,"MESSAGE.required")))}function ai(o,d){if(o&1){let n=F();a(0,"app-cms-enum-x-selector",31),R("modelChange",function(t){u(n);let e=_();return w(e.dataModel.reportFileType,t)||(e.dataModel.reportFileType=t),f(t)}),s()}if(o&2){let n=_();m("optionDataListResult",n.dataModelReportFileTypeEnumResult),E("model",n.dataModel.reportFileType),m("optionDisabled",!1)("optionLabel",n.fieldsInfo.reportFileType==null?null:n.fieldsInfo.reportFileType.fieldTitle)("optionRequired",!0)("optionSelectFirstItem",!0)}}function si(o,d){o&1&&(a(0,"mat-error"),c(1," Description is "),a(2,"strong"),c(3),h(4,"translate"),s()()),o&2&&(l(3),b(S(4,1,"MESSAGE.required")))}function di(o,d){if(o&1&&(v(0,"img",32),h(1,"cmsthumbnail")),o&2){let n=_();x("src",S(1,1,n.dataModel.linkImageIdSrc),$)}}function pi(o,d){if(o&1){let n=F();a(0,"div",12)(1,"label",33),I("click",function(){u(n);let t=_();return f(t.fileManagerOpenForm=!0)}),c(2),h(3,"translate"),s(),a(4,"input",34,5),h(6,"translate"),R("ngModelChange",function(t){u(n);let e=_();return w(e.dataModel.linkImageId,t)||(e.dataModel.linkImageId=t),f(t)}),I("click",function(){u(n);let t=_();return f(t.fileManagerOpenForm=!0)}),s(),a(7,"cms-file-manager",35),I("itemSelected",function(t){u(n);let e=_();return f(e.onActionFileSelected(t))}),R("openFormChange",function(t){u(n);let e=_();return w(e.fileManagerOpenForm,t)||(e.fileManagerOpenForm=t),f(t)}),s()()}if(o&2){let n=_();l(2),b(S(3,11,"TITLE.Icon_File")),l(2),x("placeholder",S(6,13,"TITLE.Original_File_ID")),E("ngModel",n.dataModel.linkImageId),l(3),m("language",n.appLanguage)("isPopup",!0),E("openForm",n.fileManagerOpenForm),m("tree",n.fileManagerTree)("openFilemanagerButtonLabelKey","select")("openDirectUploadView",!0)("selectFileType",n.selectFileTypeMainImage)("openFilemanagerButtonView",!1)}}function ci(o,d){if(o&1){let n=F();a(0,"div",36)(1,"button",37),I("click",function(){u(n);let t=_();return f(t.onFormCancel())}),v(2,"i",38),c(3),h(4,"translate"),s(),a(5,"button",39),v(6,"i",40),c(7),h(8,"translate"),s()()}if(o&2){_();let n=L(9);l(3),C(" ",S(4,3,"ACTION.CANCEL")," "),l(2),m("disabled",!n.form.valid),l(2),C(" ",S(8,5,"ACTION.SAVE")," ")}}var Vt=(()=>{let d=class d extends It{constructor(i,t,e,p,g,r,k,O){super(p,new D,r,O),this.data=i,this.dialogRef=t,this.coreEnumService=e,this.coreModuleEntityReportFileService=p,this.cmsToastrService=g,this.publicHelper=r,this.cdr=k,this.translate=O,this.requestId="",this.constructorInfoAreaId=this.constructor.name,this.selectFileTypeMainImage=["jpg","jpeg","png"],this.selectFileTypeReport=["mrt"],this.appLanguage="fa",this.dataModelResult=new ze,this.dataModel=new D,this.dataModelReportFileTypeEnumResult=new V,this.formInfo=new fe,this.fileManagerOpenForm=!1,this.fileManagerOpenFormReport=!1,this.publicHelper.processService.cdr=this.cdr,i&&i.id&&(this.requestId=i.id),this.fileManagerTree=this.publicHelper.GetfileManagerTreeConfig()}ngOnInit(){if(this.requestId.length>0)this.translate.get("TITLE.Edit").subscribe(i=>{this.formInfo.formTitle=i}),this.DataGetOneContent();else{this.cmsToastrService.typeErrorComponentAction(),this.dialogRef.close({dialogChangedDate:!1});return}this.getReportFileTypeEnum()}getReportFileTypeEnum(){this.coreEnumService.ServiceReportFileTypeEnum().subscribe({next:i=>{this.dataModelReportFileTypeEnumResult=i}})}DataGetOneContent(){this.translate.get("MESSAGE.Receiving_Information_From_The_Server").subscribe(t=>{this.formInfo.formAlert=t}),this.formInfo.formError="";let i=this.constructor.name+"main";this.translate.get("MESSAGE.Receiving_information").subscribe(t=>{this.publicHelper.processService.processStart(i,t,this.constructorInfoAreaId)}),this.coreModuleEntityReportFileService.setAccessLoad(),this.coreModuleEntityReportFileService.setAccessDataType(Ue.Editor),this.coreModuleEntityReportFileService.ServiceGetOneById(this.requestId).subscribe({next:t=>{this.dataModel=t.item,this.fieldsInfo=this.publicHelper.fieldInfoConvertor(t.access),t.isSuccess?(this.formInfo.formTitle=this.formInfo.formTitle+" "+t.item.id,this.formInfo.formAlert=""):(this.translate.get("ERRORMESSAGE.MESSAGE.typeError").subscribe(e=>{this.formInfo.formAlert=e}),this.formInfo.formError=t.errorMessage,this.cmsToastrService.typeErrorMessage(t.errorMessage)),this.publicHelper.processService.processStop(i)},error:t=>{this.cmsToastrService.typeError(t),this.publicHelper.processService.processStop(i,!1)}})}DataEditContent(){this.translate.get("MESSAGE.sending_information_to_the_server").subscribe(t=>{this.formInfo.formAlert=t}),this.formInfo.formError="";let i=this.constructor.name+"main";this.translate.get("MESSAGE.sending_information_to_the_server").subscribe(t=>{this.publicHelper.processService.processStart(i,t,this.constructorInfoAreaId)}),this.coreModuleEntityReportFileService.ServiceEdit(this.dataModel).subscribe({next:t=>{this.formInfo.formSubmitAllow=!0,this.dataModelResult=t,t.isSuccess?(this.translate.get("MESSAGE.registration_completed_successfully").subscribe(e=>{this.formInfo.formAlert=e}),this.cmsToastrService.typeSuccessEdit(),this.dialogRef.close({dialogChangedDate:!0})):(this.translate.get("ERRORMESSAGE.MESSAGE.typeError").subscribe(e=>{this.formInfo.formAlert=e}),this.formInfo.formError=t.errorMessage,this.cmsToastrService.typeErrorMessage(t.errorMessage)),this.publicHelper.processService.processStop(i)},error:t=>{this.formInfo.formSubmitAllow=!0,this.cmsToastrService.typeError(t),this.publicHelper.processService.processStop(i,!1)}})}onActionSelectorModuleEntitySelect(i){this.dataModel.linkModuleEntityId=null,i&&i.id>0&&(this.dataModel.linkModuleEntityId=i.id)}onActionFileSelectedLinkFileId(i){this.dataModel.linkFileId=i.id,this.dataModel.linkFileIdSrc=i.downloadLinksrc}onActionFileSelected(i){this.dataModel.linkImageId=i.id,this.dataModel.linkImageIdSrc=i.downloadLinksrc}onFormSubmit(){this.formGroup.valid&&(this.formInfo.formSubmitAllow=!1,this.DataEditContent())}onFormCancel(){this.dialogRef.close({dialogChangedDate:!1})}};d.\u0275fac=function(t){return new(t||d)(M(ue),M(me),M(U),M(B),M(z),M(K),M(W),M(H))},d.\u0275cmp=P({type:d,selectors:[["app-core-module-entity-report-file-edit"]],viewQuery:function(t,e){if(t&1&&ee(oi,5),t&2){let p;te(p=ie())&&(e.formGroup=p.first)}},features:[G],decls:53,vars:48,consts:[["vform","ngForm"],["Title",""],["TitleResourceLanguage",""],["Description",""],["LinkFileId",""],["LinkImageId",""],[1,"card","card-style","loader-container"],[3,"optionsInfoAreaId"],[1,"content","mb-0"],[1,"mb-0","color-highlight","font-600","font-12"],[3,"ngSubmit"],[3,"model","optionDisabled","optionLabel","optionRequired","optionSelectFirstItem","modelChange",4,"ngIf"],[1,"input-style","has-borders","no-icon","input-style-always-active","validate-field","mb-4"],["for","dataModel.title",1,"color-highlight"],["matInput","","type","text","name","dataModel.title","minlength","3","maxlength","100","id","dataModel.title",1,"form-control","validate-name",3,"ngModelChange","ngModel","placeholder"],[4,"ngIf"],["for","dataModel.titleML",1,"color-highlight"],["matInput","","type","text","name","dataModel.titleML","id","dataModel.titleML",1,"form-control","validate-name",3,"ngModelChange","ngModel","disabled"],["for","dataModel.titleResourceLanguage",1,"color-highlight"],["matInput","","type","text","name","dataModel.titleResourceLanguage","minlength","3","maxlength","100","id","dataModel.titleResourceLanguage",1,"form-control","validate-name",3,"ngModelChange","ngModel","disabled","placeholder"],[3,"optionChange","optionDisabled","optionSelectForce","optionPlaceholder"],[3,"optionDataListResult","model","optionDisabled","optionLabel","optionRequired","optionSelectFirstItem","modelChange",4,"ngIf"],["for","dataModel.description",1,"color-highlight"],["matInput","","name","dataModel.description","type","text","minlength","1","maxlength","500","rows","5","id","dataModel.description",1,"form-control","validate-name",3,"ngModelChange","ngModel","placeholder"],[1,"mb-3"],["style","vertical-align:middle;","class","ntk-hover-zoom","aria-hidden","","height","50","width","50",3,"src",4,"ngIf"],["class","input-style has-borders no-icon input-style-always-active validate-field mb-4",4,"ngIf"],["matInput","","type","text","name","dataModel.linkFileId","autocomplete","off","id","dataModel.linkFileId",1,"form-control","validate-name",3,"ngModelChange","click","ngModel","placeholder"],[3,"itemSelected","openFormChange","language","isPopup","openForm","tree","openDirectUploadView","openFilemanagerButtonLabelKey","selectFileType","openFilemanagerButtonView"],["class","form-actions",4,"ngIf"],[3,"modelChange","model","optionDisabled","optionLabel","optionRequired","optionSelectFirstItem"],[3,"modelChange","optionDataListResult","model","optionDisabled","optionLabel","optionRequired","optionSelectFirstItem"],["aria-hidden","","height","50","width","50",1,"ntk-hover-zoom",2,"vertical-align","middle",3,"src"],["for","dataModel.linkImageId",1,"color-highlight",3,"click"],["matInput","","type","text","name","dataModel.linkImageId","autocomplete","off","id","dataModel.linkImageId",1,"form-control","validate-name",3,"ngModelChange","click","ngModel","placeholder"],[3,"itemSelected","openFormChange","language","isPopup","openForm","tree","openFilemanagerButtonLabelKey","openDirectUploadView","selectFileType","openFilemanagerButtonView"],[1,"form-actions"],["type","button",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-gray",3,"click"],[1,"ft-x"],["type","submit",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-green",3,"disabled"],[1,"fa","fa-check-square-o"]],template:function(t,e){if(t&1){let p=F();a(0,"div",6),v(1,"app-progress-spinner",7),a(2,"div",8)(3,"p",9),c(4),s(),a(5,"p"),c(6),h(7,"translate"),s(),a(8,"form",10,0),I("ngSubmit",function(){return u(p),f(e.onFormSubmit())}),y(10,ni,1,5,"app-cms-enum-record-status-selector",11),a(11,"div",12)(12,"label",13),c(13),s(),a(14,"input",14,1),R("ngModelChange",function(r){return u(p),w(e.dataModel.title,r)||(e.dataModel.title=r),f(r)}),s(),a(16,"em"),c(17),s(),y(18,ri,5,4,"mat-error",15),s(),a(19,"div",12)(20,"label",16),c(21),h(22,"translate"),s(),a(23,"input",17),R("ngModelChange",function(r){return u(p),w(e.dataModel.titleML,r)||(e.dataModel.titleML=r),f(r)}),s()(),a(24,"div",12)(25,"label",18),c(26),s(),a(27,"input",19,2),R("ngModelChange",function(r){return u(p),w(e.dataModel.titleResourceLanguage,r)||(e.dataModel.titleResourceLanguage=r),f(r)}),s(),a(29,"em"),c(30),s(),y(31,li,5,3,"mat-error",15),s(),a(32,"app-core-module-entity-selector",20),h(33,"translate"),I("optionChange",function(r){return u(p),f(e.onActionSelectorModuleEntitySelect(r))}),s(),y(34,ai,1,6,"app-cms-enum-x-selector",21),a(35,"div",12)(36,"label",22),c(37),s(),a(38,"textarea",23,3),R("ngModelChange",function(r){return u(p),w(e.dataModel.description,r)||(e.dataModel.description=r),f(r)}),c(40,"          "),s(),a(41,"em"),c(42),s(),y(43,si,5,3,"mat-error",15),s(),a(44,"div",24),y(45,di,2,3,"img",25),s(),y(46,pi,8,15,"div",26),a(47,"div",12)(48,"input",27,4),h(50,"translate"),R("ngModelChange",function(r){return u(p),w(e.dataModel.linkFileId,r)||(e.dataModel.linkFileId=r),f(r)}),I("click",function(){return u(p),f(e.fileManagerOpenFormReport=!0)}),s(),a(51,"cms-file-manager",28),I("itemSelected",function(r){return u(p),f(e.onActionFileSelectedLinkFileId(r))}),R("openFormChange",function(r){return u(p),w(e.fileManagerOpenFormReport,r)||(e.fileManagerOpenFormReport=r),f(r)}),s()(),y(52,ci,9,7,"div",29),s()()()}if(t&2){let p=L(15),g=L(28),r=L(39);l(),m("optionsInfoAreaId",e.constructorInfoAreaId),l(3),C(" ",e.formInfo.formTitle," "),l(2),C(" ",S(7,40,"TITLE.Be_Careful_When_Entering_Information")," "),l(4),m("ngIf",e.fieldsInfo.recordStatus==null?null:e.fieldsInfo.recordStatus.accessWatchField),l(3),b(e.fieldsInfo.title==null?null:e.fieldsInfo.title.fieldTitle),l(),x("placeholder",e.fieldsInfo.title==null?null:e.fieldsInfo.title.fieldTitle),E("ngModel",e.dataModel.title),l(3),C("",p.value.length," / 100"),l(),m("ngIf",p.errors==null?null:p.errors.required),l(3),b(S(22,42,"TITLE.TitleML")),l(2),E("ngModel",e.dataModel.titleML),m("disabled",!0),l(3),b(e.fieldsInfo.titleResourceLanguage==null?null:e.fieldsInfo.titleResourceLanguage.fieldTitle),l(),x("placeholder",e.fieldsInfo.titleResourceLanguage==null?null:e.fieldsInfo.titleResourceLanguage.fieldTitle),E("ngModel",e.dataModel.titleResourceLanguage),m("disabled",!(e.fieldsInfo.titleResourceLanguage!=null&&e.fieldsInfo.titleResourceLanguage.accessEditField)),l(3),C("",g.value.length," / 100"),l(),m("ngIf",g.errors==null?null:g.errors.required),l(),m("optionDisabled",!(e.fieldsInfo.linkModuleEntityId!=null&&e.fieldsInfo.linkModuleEntityId.accessEditField))("optionSelectForce",e.dataModel.linkModuleEntityId)("optionPlaceholder",S(33,44,"TITLE.MODULE_ENTITY")),l(2),m("ngIf",e.fieldsInfo.reportFileType==null?null:e.fieldsInfo.reportFileType.accessWatchField),l(3),b(e.fieldsInfo.description==null?null:e.fieldsInfo.description.fieldTitle),l(),x("placeholder",e.fieldsInfo.description==null?null:e.fieldsInfo.description.fieldTitle),E("ngModel",e.dataModel.description),l(4),C("",r.value.length," / 500"),l(),m("ngIf",r.errors==null?null:r.errors.required),l(2),m("ngIf",(e.dataModel==null||e.dataModel.linkImageIdSrc==null?null:e.dataModel.linkImageIdSrc.length)>0),l(),m("ngIf",e.fieldsInfo.linkImageId==null?null:e.fieldsInfo.linkImageId.accessWatchField),l(2),x("placeholder",S(50,46,"TITLE.Report_File_ID")),E("ngModel",e.dataModel.linkFileId),l(3),m("language",e.appLanguage)("isPopup",!0),E("openForm",e.fileManagerOpenFormReport),m("tree",e.fileManagerTree)("openDirectUploadView",!0)("openFilemanagerButtonLabelKey","select")("selectFileType",e.selectFileTypeReport)("openFilemanagerButtonView",!1),l(),m("ngIf",e.formInfo.formSubmitAllow)}},dependencies:[N,se,oe,ne,re,de,pe,ae,le,ce,q,Se,Ce,_e,ye,ge,j,he],styles:[".form-body[_ngcontent-%COMP%]{width:500px}@media (max-width: 700px){.form-body[_ngcontent-%COMP%]{display:contents}}#file-manager[_ngcontent-%COMP%]{width:calc(100vw - 16px);height:calc(100vh - 16px)}.recordStatus-1.mat-select-panel[_ngcontent-%COMP%]{background:#ff0}.recordStatus-2.mat-select-panel[_ngcontent-%COMP%]{background:#000}.recordStatus-3.mat-select-panel[_ngcontent-%COMP%]{background:red}"]});let o=d;return o})();var mi=()=>[5,10,20,100],ui=o=>({display:o});function fi(o,d){if(o&1){let n=F();a(0,"div",17)(1,"a",42),I("click",function(){u(n);let t=_();return f(t.onActionButtonNewRow())}),v(2,"i",43)(3,"br"),s(),a(4,"p",20),c(5),h(6,"translate"),s()()}o&2&&(l(5),C("",S(6,1,"ACTION.ADD")," Dependency"))}function gi(o,d){if(o&1){let n=F();a(0,"div",17)(1,"a",44),I("click",function(){u(n);let t=_();return f(t.onActionButtonEditRow(t.tableRowSelected))}),v(2,"i",45)(3,"br"),s(),a(4,"p",20),c(5),h(6,"translate"),s()()}o&2&&(l(5),b(S(6,1,"ACTION.EDIT")))}function _i(o,d){if(o&1){let n=F();a(0,"div",17)(1,"a",46),I("click",function(){u(n);let t=_();return f(t.onActionButtonDeleteRow(t.tableRowSelected))}),v(2,"i",47)(3,"br"),s(),a(4,"p",20),c(5),h(6,"translate"),s()()}o&2&&(l(5),b(S(6,1,"ACTION.DELETE")))}function hi(o,d){if(o&1&&(a(0,"mat-header-cell",48),c(1),s()),o&2){let n=_();l(),C(" ",n.fieldsInfo.id==null?null:n.fieldsInfo.id.fieldTitle," ")}}function Si(o,d){if(o&1&&(a(0,"mat-cell"),c(1),s()),o&2){let n=d.$implicit;l(),C(" ",n.id," ")}}function Ci(o,d){if(o&1&&(a(0,"mat-header-cell",48),c(1),s()),o&2){let n=_();l(),C(" ",n.fieldsInfo.recordStatus==null?null:n.fieldsInfo.recordStatus.fieldTitle," ")}}function Mi(o,d){if(o&1&&v(0,"select",51),o&2){let n=_().$implicit,i=_();m("contentService",i.contentService)("row",n)("ngStyle",Le(3,ui,n.id===(i.tableRowSelected==null?null:i.tableRowSelected.id)?"":"none"))}}function yi(o,d){if(o&1&&(a(0,"mat-cell",49),h(1,"statusCellClass"),v(2,"i",49),h(3,"statusIconClass"),y(4,Mi,1,5,"select",50),s()),o&2){let n=d.$implicit,i=_();m("ngClass",S(1,3,n.recordStatus)),l(2),m("ngClass",S(3,5,n.recordStatus)),l(2),m("ngIf",i.dataModelResult==null||i.dataModelResult.access==null?null:i.dataModelResult.access.accessEditRow)}}function Ii(o,d){if(o&1&&(a(0,"mat-header-cell",48),c(1),s()),o&2){let n=_();l(),C(" ",n.fieldsInfo.linkModuleEntityId==null?null:n.fieldsInfo.linkModuleEntityId.fieldTitle," ")}}function Ei(o,d){if(o&1&&(a(0,"mat-cell"),c(1),s()),o&2){let n=d.$implicit;l(),C(" ",n.linkModuleEntityId," ")}}function wi(o,d){if(o&1&&(a(0,"mat-header-cell",48),c(1),s()),o&2){let n=_();l(),C(" ",n.fieldsInfo.title==null?null:n.fieldsInfo.title.fieldTitle," ")}}function Ri(o,d){if(o&1&&(a(0,"mat-cell"),c(1),s()),o&2){let n=d.$implicit;l(),C(" ",n.title," ")}}function vi(o,d){if(o&1&&(a(0,"mat-header-cell",48),c(1),s()),o&2){let n=_();l(),C(" ",n.fieldsInfo.description==null?null:n.fieldsInfo.description.fieldTitle," ")}}function bi(o,d){if(o&1&&(a(0,"mat-cell"),c(1),s()),o&2){let n=d.$implicit;l(),C(" ",n.description," ")}}function Fi(o,d){if(o&1&&(a(0,"mat-header-cell",48),c(1),s()),o&2){let n=_();l(),C(" ",n.fieldsInfo.reportFileType==null?null:n.fieldsInfo.reportFileType.fieldTitle," ")}}function Ti(o,d){if(o&1&&(a(0,"mat-cell"),c(1),h(2,"enums"),s()),o&2){let n=d.$implicit,i=_();l(),C(" ",ke(2,1,n.reportFileType,i.dataModelEnumReportFileTypeResult.listItems)," ")}}function Ai(o,d){o&1&&(a(0,"mat-header-cell"),c(1),h(2,"translate"),s()),o&2&&(l(),C(" ",S(2,1,"TITLE.OPTION")," "))}function xi(o,d){if(o&1&&(a(0,"mat-cell",52)(1,"button",53)(2,"mat-icon"),c(3,"more_vert"),s()(),v(4,"mat-menu",null,2),s()),o&2){let n=L(5);l(),m("matMenuTriggerFor",n)}}function Li(o,d){o&1&&(a(0,"mat-header-cell",48),c(1),h(2,"translate"),s()),o&2&&(l(),C("",S(2,1,"ACTION.ORDERING")," "))}function ki(o,d){o&1&&(a(0,"mat-cell")(1,"mat-icon",54),c(2,"reorder"),s()())}function Di(o,d){o&1&&v(0,"mat-header-row")}function Vi(o,d){if(o&1){let n=F();a(0,"mat-row",55),I("click",function(){let t=u(n).$implicit,e=_();return f(e.onActionTableRowSelect(t))}),s()}if(o&2){let n=d.$implicit,i=d.dataIndex,t=_();Te("ntk-row-odd",i%2)("ntk-row-even",!(i%2))("ntk-row-selected",n.id===(t.tableRowSelected==null?null:t.tableRowSelected.id))}}var ve=(()=>{let d=class d extends wt{constructor(i,t,e,p,g,r,k,O,Ot,be,Pt,Fe,Gt){if(super(i,new D,Fe,g,be),this.contentService=i,this.coreEnumService=t,this.cmsToastrService=e,this.cmsConfirmationDialogService=p,this.tokenHelper=g,this.activatedRoute=r,this.coreModuleEntityService=k,this.router=O,this.cdr=Ot,this.translate=be,this.pageInfo=Pt,this.publicHelper=Fe,this.dialog=Gt,this.requestLinkModuleEntityId=0,this.constructorInfoAreaId=this.constructor.name,this.flag=!1,this.tableContentSelected=[],this.filteModelContent=new Re,this.dataModelCoreModuleEntityResult=new V,this.dataModelEnumReportFileTypeResult=new V,this.tabledisplayedColumns=[],this.tabledisplayedColumnsSource=["Id","RecordStatus","LinkModuleEntityId","Description","ReportFileType"],this.tabledisplayedColumnsMobileSource=["Id","RecordStatus","LinkModuleEntityId","Description","ReportFileType"],this.publicHelper.processService.cdr=this.cdr,this.optionsSearch.parentMethods={onSubmit:Q=>this.onSubmitOptionsSearch(Q)},this.requestLinkModuleEntityId=+Number(this.activatedRoute.snapshot.paramMap.get("LinkModuleEntityReportFileId")),this.filteModelContent.sortColumn="Id",this.filteModelContent.sortType=J.Ascending,this.requestLinkModuleEntityId>0){let Q=new we;Q.propertyName="linkModuleEntityId",Q.value=this.requestLinkModuleEntityId,this.filteModelContent.filters.push(Q)}}ngOnInit(){this.filteModelContent.sortColumn="ShowInMenuOrder",this.tokenHelper.getTokenInfoState().then(i=>{this.tokenInfo=i,setTimeout(()=>{this.firstLoadDataRunned||this.DataGetAll()},500)}),this.cmsApiStoreSubscribe=this.tokenHelper.getTokenInfoStateOnChange().subscribe({next:i=>{this.tokenInfo=i,this.firstLoadDataRunned=!0,this.DataGetAll()}}),this.getModuleList(),this.getEnumReportFileType()}ngOnDestroy(){this.cmsApiStoreSubscribe.unsubscribe()}getEnumReportFileType(){this.coreEnumService.ServiceReportFileTypeEnum().subscribe({next:i=>{this.dataModelEnumReportFileTypeResult=i}})}getModuleList(){let i=new Re;i.rowPerPage=100,this.coreModuleEntityService.ServiceGetAll(i).subscribe({next:t=>{this.dataModelCoreModuleEntityResult=t}})}DataGetAll(){this.tabledisplayedColumns=this.publicHelper.TableDisplayedColumns(this.tabledisplayedColumnsSource,this.tabledisplayedColumnsMobileSource,[],this.tokenInfo),this.tableRowsSelected=[],this.onActionTableRowSelect(new D);let i=this.constructor.name+"main";this.translate.get("MESSAGE.get_information_list").subscribe(e=>{this.publicHelper.processService.processStart(i,e,this.constructorInfoAreaId)}),this.filteModelContent.accessLoad=!0;let t=JSON.parse(JSON.stringify(this.filteModelContent));this.contentService.ServiceGetAllEditor(t).subscribe({next:e=>{e.isSuccess?(this.fieldsInfo=this.publicHelper.fieldInfoConvertor(e.access),this.dataModelResult=e,this.tableSource.data=e.listItems,this.optionsStatist?.data?.show&&this.onActionButtonStatist(!0),setTimeout(()=>{this.optionsSearch.childMethods&&this.optionsSearch.childMethods.setAccess(e.access)},1e3)):this.cmsToastrService.typeErrorMessage(e.errorMessage),this.publicHelper.processService.processStop(i)},error:e=>{this.cmsToastrService.typeError(e),this.publicHelper.processService.processStop(i,!1)}})}onTableSortData(i){this.tableSource&&this.tableSource.sort&&this.tableSource.sort.active===i.active?this.tableSource.sort.start==="asc"?(i.start="desc",this.filteModelContent.sortColumn=i.active,this.filteModelContent.sortType=J.Descending):this.tableSource.sort.start==="desc"?(i.start="asc",this.filteModelContent.sortColumn="",this.filteModelContent.sortType=J.Ascending):i.start="desc":(this.filteModelContent.sortColumn=i.active,this.filteModelContent.sortType=J.Descending),this.tableSource.sort=i,this.filteModelContent.currentPageNumber=0,this.DataGetAll()}onTablePageingData(i){this.filteModelContent.currentPageNumber=i.pageIndex+1,this.filteModelContent.rowPerPage=i.pageSize,this.DataGetAll()}onActionButtonNewRow(){var i="";this.tokenHelper.isMobile?i="dialog-fullscreen":i="dialog-min",this.dialog.open(Dt,{height:"90%",panelClass:i,enterAnimationDuration:X.cmsViewConfig.enterAnimationDuration,exitAnimationDuration:X.cmsViewConfig.exitAnimationDuration,data:{linkModuleEntityId:this.requestLinkModuleEntityId}}).afterClosed().subscribe(e=>{e&&e.dialogChangedDate&&this.DataGetAll()})}onActionButtonEditRow(i=this.tableRowSelected){if(!i||!i.id||i.id.length===0){this.cmsToastrService.typeErrorSelectedRow();return}if(this.onActionTableRowSelect(i),this.dataModelResult==null||this.dataModelResult.access==null||!this.dataModelResult.access.accessEditRow){this.cmsToastrService.typeErrorAccessEdit();return}var t="";this.tokenHelper.isMobile?t="dialog-fullscreen":t="dialog-min",this.dialog.open(Vt,{height:"90%",panelClass:t,enterAnimationDuration:X.cmsViewConfig.enterAnimationDuration,exitAnimationDuration:X.cmsViewConfig.exitAnimationDuration,data:{id:this.tableRowSelected.id}}).afterClosed().subscribe(p=>{p&&p.dialogChangedDate&&this.DataGetAll()})}onActionButtonDeleteRow(i=this.tableRowSelected){if(!i||!i.id||i.id.length===0){this.translate.get("MESSAGE.no_row_selected_to_delete").subscribe(p=>{this.cmsToastrService.typeErrorSelected(p)});return}if(this.onActionTableRowSelect(i),this.dataModelResult==null||this.dataModelResult.access==null||!this.dataModelResult.access.accessDeleteRow){this.cmsToastrService.typeErrorAccessDelete();return}var t="",e="";this.translate.get(["MESSAGE.Please_Confirm","MESSAGE.Do_you_want_to_delete_this_content"]).subscribe(p=>{t=p["MESSAGE.Please_Confirm"],e=p["MESSAGE.Do_you_want_to_delete_this_content"]+"?<br> ( "+this.tableRowSelected.id+" ) "}),this.cmsConfirmationDialogService.confirm(t,e).then(p=>{if(p){let g=this.constructor.name+"main";this.translate.get("MESSAGE.Receiving_information").subscribe(r=>{this.publicHelper.processService.processStart(g,r,this.constructorInfoAreaId)}),this.contentService.ServiceDelete(this.tableRowSelected.id).subscribe({next:r=>{r.isSuccess?(this.cmsToastrService.typeSuccessRemove(),this.DataGetAll()):this.cmsToastrService.typeErrorRemove(),this.publicHelper.processService.processStop(g)},error:r=>{this.cmsToastrService.typeError(r),this.publicHelper.processService.processStop(g,!1)}})}}).catch(()=>{})}onActionButtonStatist(i=!this.optionsStatist.data.show){if(this.optionsStatist.data.show=i,!this.optionsStatist.data.show)return;let t=new Map;this.translate.get("MESSAGE.Active").subscribe(r=>{t.set(r,0)}),this.translate.get("MESSAGE.All").subscribe(r=>{t.set(r,0)});let e=this.constructor.name+".ServiceStatist";this.translate.get("MESSAGE.Get_the_statist").subscribe(r=>{this.publicHelper.processService.processStart(e,r,this.constructorInfoAreaId)}),this.contentService.ServiceGetCount(this.filteModelContent).subscribe({next:r=>{r.isSuccess&&(this.translate.get("MESSAGE.All").subscribe(k=>{t.set(k,r.totalRowCount)}),this.optionsStatist.childMethods.setStatistValue(t)),this.publicHelper.processService.processStop(e)},error:r=>{this.cmsToastrService.typeError(r),this.publicHelper.processService.processStop(e,!1)}});let p=JSON.parse(JSON.stringify(this.filteModelContent)),g=new we;g.propertyName="RecordStatus",g.value=qe.Available,p.filters.push(g),this.contentService.ServiceGetCount(p).subscribe({next:r=>{r.isSuccess?(this.translate.get("MESSAGE.Active").subscribe(k=>{t.set(k,r.totalRowCount)}),this.optionsStatist.childMethods.setStatistValue(t)):this.cmsToastrService.typeErrorMessage(r.errorMessage),this.publicHelper.processService.processStop(e)},error:r=>{this.cmsToastrService.typeError(r),this.publicHelper.processService.processStop(e,!1)}})}onActionButtonModuleEntityDataReportRow(i=this.tableRowSelected){if(!i||!i.id||i.id.length===0){this.translate.get("ERRORMESSAGE.MESSAGE.typeErrorSelectedRow").subscribe(t=>{this.cmsToastrService.typeErrorSelected(t)});return}this.onActionTableRowSelect(i),this.router.navigate(["corelog/report-data/LinkModuleEntityReportFileId/",i.id])}onActionButtonReload(){this.DataGetAll()}onSubmitOptionsSearch(i){this.filteModelContent.filters=i,this.DataGetAll()}};d.\u0275fac=function(t){return new(t||d)(M(B),M(U),M(z),M(Me),M(Je),M(Ge),M(Ke),M(We),M(W),M(H),M(Xe),M(K),M(He))},d.\u0275cmp=P({type:d,selectors:[["app-core-module-entity-report-file-list"]],features:[G],decls:66,vars:31,consts:[["tableSort","matSort"],["paginator",""],["actionMenu","matMenu"],[3,"optionActionGuideNoticeDisplayChange","optionOnActionButtonMemoRow","optionOnActionButtonMemo","optionOnActionButtonExport","optionOnActionButtonPrintRow","optionsListInfoAreaId","optionGuideNoticeKey","optionActionGuideNoticeDisplay","optionTreeDisplay","optionActionRowId","optionActionRowDisplayMenu","optionSelectRowItemTitle"],["cms-tree",""],["cms-header",""],["cms-action-header",""],["cms-action-header-start",""],["type","button","target","_blank",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-highlight",3,"click"],[1,"fa-solid","fa-info","font-18",2,"color","#ffffff"],[1,"fa-solid","fa-rotate-right","font-18",2,"color","#ffffff"],["cms-action-header-end",""],[1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-highlight",3,"click"],[3,"checked"],["cms-action-main",""],["class","col-4",4,"ngIf"],["cms-action-row",""],[1,"col-4"],["target","_blank",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-highlight",3,"click"],[1,"fa-solid","fa-file-chart-column","font-18",2,"color","#ffffff"],[1,"font-11","text-center","opacity-70"],["cms-action-area",""],[3,"optionsChange","options"],["cms-body",""],["matSort","",3,"matSortChange","dataSource"],["matColumnDef","Id"],["mat-sort-header","",4,"matHeaderCellDef"],[4,"matCellDef"],["matColumnDef","RecordStatus"],[3,"ngClass",4,"matCellDef"],["matColumnDef","LinkModuleEntityId"],["matColumnDef","Title"],["matColumnDef","Description"],["matColumnDef","ReportFileType"],["matColumnDef","Action"],[4,"matHeaderCellDef"],["class"," Action",4,"matCellDef"],["matColumnDef","position"],[4,"matHeaderRowDef"],[3,"ntk-row-odd","ntk-row-even","ntk-row-selected","click",4,"matRowDef","matRowDefColumns"],["cms-footer",""],[3,"page","length","pageIndex","pageSize","pageSizeOptions"],["type","button","target","_blank",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-teal",3,"click"],[1,"fa-solid","fa-plus","font-18",2,"color","#FFFFFF"],["target","_blank",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-magenta",3,"click"],[1,"fa-solid","fa-pen","font-18",2,"color","#FFFFFF"],["target","_blank",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-red",3,"click"],[1,"fa-solid","fa-trash","font-18",2,"color","#ffffff"],["mat-sort-header",""],[3,"ngClass"],["matNativeControl","","cmsRecordStatusSelfSave","","style","background: none; border: none;",3,"contentService","row","ngStyle",4,"ngIf"],["matNativeControl","","cmsRecordStatusSelfSave","",2,"background","none","border","none",3,"contentService","row","ngStyle"],[1,"Action"],["type","button","mat-icon-button","","aria-label","Action Menu",3,"matMenuTriggerFor"],["cdkDragHandle","",2,"pointer-events","all"],[3,"click"]],template:function(t,e){if(t&1){let p=F();a(0,"app-cms-html-list",3),R("optionActionGuideNoticeDisplayChange",function(r){return u(p),w(e.viewGuideNotice,r)||(e.viewGuideNotice=r),f(r)}),I("optionOnActionButtonMemoRow",function(){return u(p),f(e.onActionButtonMemoRow())})("optionOnActionButtonMemo",function(){return u(p),f(e.onActionButtonMemo())})("optionOnActionButtonExport",function(){return u(p),f(e.onActionButtonExport())})("optionOnActionButtonPrintRow",function(){return u(p),f(e.onActionButtonPrintRow())}),T(1,4),c(2," -------------------------------------- "),A(),Ae(3,5)(4,6),T(5,7),a(6,"a",8),I("click",function(){return u(p),f(e.viewGuideNotice=!e.viewGuideNotice)}),v(7,"i",9),s(),a(8,"a",8),I("click",function(){return u(p),f(e.onActionButtonReload())}),v(9,"i",10),s(),A(),T(10,11),a(11,"a",12),I("click",function(){return u(p),f(e.optionsSearch.data.show=!e.optionsSearch.data.show)}),v(12,"mat-slide-toggle",13),c(13),h(14,"translate"),s(),a(15,"a",12),I("click",function(){return u(p),f(e.onActionButtonStatist())}),v(16,"mat-slide-toggle",13),c(17),h(18,"translate"),s(),A(),T(19,14),y(20,fi,7,3,"div",15),A(),T(21,16),y(22,gi,7,3,"div",15)(23,_i,7,3,"div",15),a(24,"div",17)(25,"a",18),I("click",function(){return u(p),f(e.onActionButtonModuleEntityDataReportRow(e.tableRowSelected))}),v(26,"i",19)(27,"br"),s(),a(28,"p",20),c(29),h(30,"translate"),s()(),A(),T(31,21),a(32,"app-cms-search-list",22),R("optionsChange",function(r){return u(p),w(e.optionsSearch,r)||(e.optionsSearch=r),f(r)}),s(),a(33,"app-cms-statist-list",22),R("optionsChange",function(r){return u(p),w(e.optionsStatist,r)||(e.optionsStatist=r),f(r)}),s(),A(),T(34,23),a(35,"mat-table",24,0),I("matSortChange",function(){u(p);let r=L(36);return f(e.onTableSortData(r))}),T(37,25),y(38,hi,2,1,"mat-header-cell",26)(39,Si,2,1,"mat-cell",27),A(),T(40,28),y(41,Ci,2,1,"mat-header-cell",26)(42,yi,5,7,"mat-cell",29),A(),T(43,30),y(44,Ii,2,1,"mat-header-cell",26)(45,Ei,2,1,"mat-cell",27),A(),T(46,31),y(47,wi,2,1,"mat-header-cell",26)(48,Ri,2,1,"mat-cell",27),A(),T(49,32),y(50,vi,2,1,"mat-header-cell",26)(51,bi,2,1,"mat-cell",27),A(),T(52,33),y(53,Fi,2,1,"mat-header-cell",26)(54,Ti,3,4,"mat-cell",27),A(),T(55,34),y(56,Ai,3,3,"mat-header-cell",35)(57,xi,6,1,"mat-cell",36),A(),T(58,37),y(59,Li,3,3,"mat-header-cell",26)(60,ki,3,0,"mat-cell",27),A(),y(61,Di,1,0,"mat-header-row",38)(62,Vi,1,6,"mat-row",39),s(),A(),T(63,40),a(64,"mat-paginator",41,1),I("page",function(r){return u(p),f(e.onTablePageingData(r))}),s(),A(),s()}t&2&&(m("optionsListInfoAreaId",e.constructorInfoAreaId)("optionGuideNoticeKey",""),E("optionActionGuideNoticeDisplay",e.viewGuideNotice),m("optionTreeDisplay",!1)("optionActionRowId",e.tableRowSelected==null?null:e.tableRowSelected.id)("optionActionRowDisplayMenu",e.tableRowSelectDoubleClick)("optionSelectRowItemTitle",(e.tableRowSelected==null||e.tableRowSelected.title==null?null:e.tableRowSelected.title.length)>0?e.tableRowSelected==null?null:e.tableRowSelected.title:e.tableRowSelected==null?null:e.tableRowSelected.id),l(12),m("checked",e.optionsSearch.data.show),l(),C("",S(14,24,"ACTION.SEARCH")," "),l(3),m("checked",e.optionsStatist.data.show),l(),C("",S(18,26,"ACTION.STATIST")," "),l(3),m("ngIf",e.dataModelResult==null||e.dataModelResult.access==null?null:e.dataModelResult.access.accessAddRow),l(2),m("ngIf",e.dataModelResult==null||e.dataModelResult.access==null?null:e.dataModelResult.access.accessEditRow),l(),m("ngIf",e.dataModelResult==null||e.dataModelResult.access==null?null:e.dataModelResult.access.accessDeleteRow),l(6),b(S(30,28,"ACTION.Reports")),l(3),E("options",e.optionsSearch),l(),E("options",e.optionsStatist),l(2),m("dataSource",e.tableSource),l(26),m("matHeaderRowDef",e.tabledisplayedColumns),l(),m("matRowDefColumns",e.tabledisplayedColumns),l(2),m("length",e.dataModelResult.totalRowCount)("pageIndex",e.dataModelResult.currentPageNumber-1)("pageSize",e.dataModelResult.rowPerPage)("pageSizeOptions",xe(30,mi)))},dependencies:[De,N,Ve,Ne,je,q,Ye,Ze,$e,et,tt,it,ot,rt,dt,lt,nt,pt,at,st,ct,mt,St,Ct,ht,ut,j,ft,_t,gt],encapsulation:2});let o=d;return o})();var Bi=[{path:"",children:[{path:"",component:ve},{path:"LinkModuleEntityReportFileId/:LinkModuleEntityReportFileId",component:ve}]}],Bt=(()=>{let d=class d{};d.\u0275fac=function(t){return new(t||d)},d.\u0275mod=Z({type:d}),d.\u0275inj=Y({imports:[Ee.forChild(Bi),Ee]});let o=d;return o})();var Po=(()=>{let d=class d{};d.\u0275fac=function(t){return new(t||d)},d.\u0275mod=Z({type:d}),d.\u0275inj=Y({providers:[B,Me],imports:[Be,Oe,Bt,Pe.withConfig({warnOnNgModelWithFormControl:"never"}),Mt,Et,Rt,vt,Qe]});let o=d;return o})();export{Po as CoreModuleEntityReportFileModule};
