"use strict";(self.webpackChunkntk_cms_web=self.webpackChunkntk_cms_web||[]).push([[2802,799,4121],{3673:(y,M,n)=>{n.d(M,{G:()=>p});var t=n(8239),e=n(8692),C=n(4511),i=n(4537),A=n(4032),_=n(2607);let p=(()=>{class S{elRef;renderer;publicHelper;cmsToastrService;cdr;document;row;contentService;constructor(a,u,g,b,I,s){this.elRef=a,this.renderer=u,this.publicHelper=g,this.cmsToastrService=b,this.cdr=I,this.document=s,this.DataEnumRecordStatus()}DataEnumRecordStatus(){var a=this;return(0,t.Z)(function*(){(yield a.publicHelper.getEnumRecordStatus()).listItems.forEach(g=>{const b=document.createElement("option");b.innerHTML=" "+g.title+' <i Class="'+a.iconStatus(g.value)+'"></i>',b.value=g.value.toString(),a.elRef.nativeElement.add(b)}),a.elRef.nativeElement.options.length>0&&a.row&&a.row.recordStatus&&a.renderer.setProperty(a.elRef.nativeElement,"value",a.row.recordStatus)})()}onChange(){const a=this.elRef.nativeElement,u=a.value;this.addLoader(a),this.contentService.setAccessDataType(C.dR.Editor),this.contentService.ServiceSetStatus(this.row.id,u).subscribe(g=>{g.isSuccess?(this.handleSuccessCase(a),this.cmsToastrService.typeSuccessSetStatus(g.errorMessage),this.row.recordStatus=0|u,this.cdr.markForCheck()):(this.renderer.setProperty(this.elRef.nativeElement,"value",this.row.recordStatus),this.cmsToastrService.typeErrorSetStatus(g.errorMessage),this.handleErrorCase(a))},g=>{this.renderer.setProperty(this.elRef.nativeElement,"value",this.row.recordStatus),this.cmsToastrService.typeError(g),this.handleErrorCase(a)})}handleSuccessCase(a){this.removeBackground(a),this.addSuccess(a),setTimeout(()=>{this.removeBackground(a)},1e3)}handleErrorCase(a){this.removeBackground(a);const u=this.document.createElement("img");u.style.width="20px",u.src="https://www.seekpng.com/png/detail/334-3345964_error-icon-download-attention-symbol.png";const g=this.renderer.parentNode(this.elRef.nativeElement);this.renderer.appendChild(g,u),setTimeout(()=>{this.renderer.removeChild(g,u)},1e3)}addLoader(a){this.addBackground(a,"https://replit.com/public/images/loading_dots.gif",20)}addSuccess(a){this.addBackground(a,"https://i.pinimg.com/originals/7b/dd/1b/7bdd1bc7db7fd48025d4e39a0e2f0fd8.jpg",20)}addBackground(a,u,g){a.style.background=`#fff url("${u}") no-repeat right 20px center`,a.style.backgroundSize=`${g}px`}removeBackground(a){a.style.background="none"}iconStatus(a){let u="";switch(a){case 1:default:u="fa fa-check";break;case 2:u="fa fa-eye-slash";break;case 3:u="fa fa-times";break;case 4:u="fa fa-hourglass-half";break;case 5:u="far fa-thumbs-down";break;case 6:u="fa fa-archive"}return u}static \u0275fac=function(u){return new(u||S)(i.Y36(i.SBq),i.Y36(i.Qsj),i.Y36(A.i),i.Y36(_.e),i.Y36(i.sBO),i.Y36(e.K0))};static \u0275dir=i.lG2({type:S,selectors:[["","cmsRecordStatusSelfSave",""]],hostBindings:function(u,g){1&u&&i.NdJ("change",function(){return g.onChange()})},inputs:{row:"row",contentService:"contentService"}})}return S})()},9084:(y,M,n)=>{n.d(M,{Y:()=>A});var t=n(7241),e=n(7969),C=n(4537),i=n(4511);let A=(()=>{class _{service;constructor(d){this.service=d}transform(d){return!d||d<=0?new t.y:this.service.ServiceGetOneById(d,1e6).pipe((0,e.U)(c=>{var p="";return c.isSuccess&&(c.item.title&&c.item.title.length>0&&(p=c.item.title),c.item.id&&c.item.id>0&&(p.length>0&&(p+=" | "),p+=c.item.id),c.item.domain&&c.item.domain.length>0&&c.item.subDomain&&c.item.subDomain.length>0?(p.length>0&&(p+=" | "),p=p+c.item.subDomain+"."+c.item.domain):c.item.domain&&c.item.domain.length>0&&(p.length>0&&(p+=" | "),p+=c.item.domain)),0===p.length&&(p=d.toString()),p},c=>d.toString()))}static \u0275fac=function(c){return new(c||_)(C.Y36(i._0e,16))};static \u0275pipe=C.Yjl({name:"cmssiteinfo",type:_,pure:!0})}return _})()},5897:(y,M,n)=>{n.d(M,{Y:()=>C});var t=n(4537),e=n(5998);let C=(()=>{class i{sanitizer;constructor(_){this.sanitizer=_}transform(_){return"cms-RecordStatusEnum-cell-"+_}static \u0275fac=function(T){return new(T||i)(t.Y36(e.H7,16))};static \u0275pipe=t.Yjl({name:"statusCellClass",type:i,pure:!0})}return i})()},6639:(y,M,n)=>{n.d(M,{G:()=>C});var t=n(4537),e=n(5998);let C=(()=>{class i{sanitizer;constructor(_){this.sanitizer=_}transform(_,T=!1){let d="";switch(_){case 1:default:d="fa fa-check";break;case 2:d="fa fa-times";break;case 3:d="fa fa-trash";break;case 4:d="fa fa-hourglass-half";break;case 5:d="far fa-thumbs-down";break;case 6:d="fa fa-archive"}return d}static \u0275fac=function(T){return new(T||i)(t.Y36(e.H7,16))};static \u0275pipe=t.Yjl({name:"statusIconClass",type:i,pure:!0})}return i})()},3914:(y,M,n)=>{n.d(M,{s:()=>A});var t=n(4536),e=n(4537);let C=(()=>{class _{dialogRef;data;static nextId=0;id=++_.nextId;title;message;btnOkText;btnCancelText;constructor(d,c){this.dialogRef=d,this.data=c}ngOnInit(){}onDismiss(){this.dialogRef.close(!1)}onConfirm(){this.dialogRef.close(!0)}static \u0275fac=function(c){return new(c||_)(e.Y36(t.so),e.Y36(t.WI))};static \u0275cmp=e.Xpm({type:_,selectors:[["app-confirmation-dialog"]],inputs:{title:"title",message:"message",btnOkText:"btnOkText",btnCancelText:"btnCancelText"},decls:9,vars:4,consts:[["mat-dialog-title",""],["mat-dialog-content",""],[3,"innerHTML"],["mat-dialog-actions",""],["mat-button","",3,"click"],["mat-raised-button","","color","primary",3,"click"]],template:function(c,p){1&c&&(e.TgZ(0,"h1",0),e._uU(1),e.qZA(),e.TgZ(2,"div",1),e._UZ(3,"p",2),e.qZA(),e.TgZ(4,"div",3)(5,"button",4),e.NdJ("click",function(){return p.onDismiss()}),e._uU(6),e.qZA(),e.TgZ(7,"button",5),e.NdJ("click",function(){return p.onConfirm()}),e._uU(8),e.qZA()()),2&c&&(e.xp6(1),e.hij(" ",p.title,"\n"),e.xp6(2),e.Q6J("innerHTML",p.message,e.oJD),e.xp6(3),e.Oqu(p.btnCancelText),e.xp6(2),e.Oqu(p.btnOkText))},encapsulation:2})}return _})();class i{title;message;constructor(T,d){this.title=T,this.message=d}btnOkText="OK";btnCancelText="Cancel";dialogSize="sm"}let A=(()=>{class _{dialog;constructor(d){this.dialog=d}confirm(d,c,p="OK",S="Cancel",L="sm"){const a=new i(d,c);return a.btnOkText=p,a.btnCancelText=S,a.dialogSize=L,this.dialog.open(C,{data:a}).afterClosed().toPromise().then(g=>Promise.resolve(g))}static \u0275fac=function(c){return new(c||_)(e.LFG(t.uw))};static \u0275prov=e.Yz7({token:_,factory:_.\u0275fac})}return _})()},9835:(y,M,n)=>{n.d(M,{v:()=>I});var t=n(4537),e=n(8692),C=n(6707);let i=(()=>{class s{transform(r,f){if(!r)return[];let O=Object.keys(r);return O=O.filter(D=>D&&D.length>0&&D.toLowerCase().indexOf("antiinjection")<0),f&&f.size>0&&(O=O.filter(D=>D&&D.length>0&&f.has(D))),O}static \u0275fac=function(f){return new(f||s)};static \u0275pipe=t.Yjl({name:"listkeys",type:s,pure:!0})}return s})();function A(s,v){1&s&&(t.TgZ(0,"div",6)(1,"div",7),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"div",7),t._uU(5),t.ALo(6,"translate"),t.qZA(),t._UZ(7,"div",8),t.qZA()),2&s&&(t.xp6(2),t.Oqu(t.lcZ(3,2,"TITLE.parameter")),t.xp6(3),t.Oqu(t.lcZ(6,4,"TITLE.Values")))}function _(s,v){if(1&s&&(t.TgZ(0,"div",9)(1,"div",7),t._uU(2),t.qZA(),t.TgZ(3,"div",7),t._uU(4),t.qZA(),t._UZ(5,"div",10),t.qZA()),2&s){const r=v.$implicit,f=t.oxw(2);t.xp6(2),t.Oqu(f.optionFields&&f.optionFields.size>0?f.optionFields.get(r):r),t.xp6(2),t.Oqu(f.dataModel[r])}}function T(s,v){if(1&s&&(t.TgZ(0,"div",3),t.YNc(1,A,8,6,"div",4),t.YNc(2,_,6,2,"div",5),t.ALo(3,"listkeys"),t.qZA()),2&s){const r=t.oxw();t.xp6(1),t.Q6J("ngIf",r.optionViewHead),t.xp6(1),t.Q6J("ngForOf",t.xi3(3,2,r.dataModel,r.optionFields))}}function d(s,v){if(1&s&&(t.TgZ(0,"div",7),t._uU(1),t.qZA()),2&s){const r=v.$implicit,f=t.oxw(3);t.xp6(1),t.Oqu(f.optionFields&&f.optionFields.size>0?f.optionFields.get(r):r)}}function c(s,v){if(1&s&&(t.TgZ(0,"div",6),t.YNc(1,d,2,1,"div",11),t.ALo(2,"listkeys"),t._UZ(3,"div",8),t.qZA()),2&s){const r=t.oxw(2);t.xp6(1),t.Q6J("ngForOf",t.xi3(2,1,r.dataModel[0],r.optionFields))}}function p(s,v){if(1&s&&(t.TgZ(0,"div",7),t._uU(1),t.qZA()),2&s){const r=v.$implicit,f=t.oxw().$implicit;t.xp6(1),t.Oqu(f[r])}}function S(s,v){if(1&s&&(t.TgZ(0,"div",9),t.YNc(1,p,2,1,"div",11),t.ALo(2,"listkeys"),t._UZ(3,"div",10),t.qZA()),2&s){const r=v.$implicit,f=t.oxw(2);t.xp6(1),t.Q6J("ngForOf",t.xi3(2,1,r,f.optionFields))}}function L(s,v){if(1&s&&(t.TgZ(0,"div",3),t.YNc(1,c,4,4,"div",4),t.YNc(2,S,4,4,"div",5),t.qZA()),2&s){const r=t.oxw();t.xp6(1),t.Q6J("ngIf",r.optionViewHead),t.xp6(1),t.Q6J("ngForOf",r.dataModel)}}function a(s,v){if(1&s&&(t.TgZ(0,"div",7),t._uU(1),t.qZA()),2&s){const r=v.$implicit,f=t.oxw(3);t.xp6(1),t.Oqu(f.optionFields&&f.optionFields.size>0?f.optionFields.get(r):r)}}function u(s,v){if(1&s&&(t.TgZ(0,"div",6),t.YNc(1,a,2,1,"div",11),t.ALo(2,"listkeys"),t._UZ(3,"div",8),t.qZA()),2&s){const r=t.oxw(2);t.xp6(1),t.Q6J("ngForOf",t.xi3(2,1,r.dataModel[0],r.optionFields))}}function g(s,v){if(1&s&&(t.TgZ(0,"div",7),t._uU(1),t.qZA()),2&s){const r=v.$implicit,f=t.oxw(2);t.xp6(1),t.Oqu(f.dataModel[r])}}function b(s,v){if(1&s&&(t.TgZ(0,"div",3),t.YNc(1,u,4,4,"div",4),t.TgZ(2,"div",9),t.YNc(3,g,2,1,"div",11),t.ALo(4,"listkeys"),t._UZ(5,"div",10),t.qZA()()),2&s){const r=t.oxw();t.xp6(1),t.Q6J("ngIf",r.optionViewHead),t.xp6(2),t.Q6J("ngForOf",t.xi3(4,2,r.dataModel,r.optionFields))}}let I=(()=>{class s{static nextId=0;id=++s.nextId;constructor(){}optionMethod=1;dataModel;optionFields;optionViewHead=!0;ngOnInit(){}static \u0275fac=function(f){return new(f||s)};static \u0275cmp=t.Xpm({type:s,selectors:[["app-cms-json-list"]],inputs:{optionMethod:"optionMethod",dataModel:"dataModel",optionFields:"optionFields",optionViewHead:"optionViewHead"},decls:5,vars:3,consts:[[1,"card","card-style"],[1,"content","mb-0"],["class","table",4,"ngIf"],[1,"table"],["class","th",4,"ngIf"],["class","tr",4,"ngFor","ngForOf"],[1,"th"],[1,"td"],[1,"clear"],[1,"tr"],[2,"clear","both"],["class","td",4,"ngFor","ngForOf"]],template:function(f,O){1&f&&(t.TgZ(0,"div",0)(1,"div",1),t.YNc(2,T,4,5,"div",2),t.YNc(3,L,3,2,"div",2),t.YNc(4,b,6,5,"div",2),t.qZA()()),2&f&&(t.xp6(2),t.Q6J("ngIf",1===O.optionMethod&&O.dataModel),t.xp6(1),t.Q6J("ngIf",2===O.optionMethod&&O.dataModel),t.xp6(1),t.Q6J("ngIf",3===O.optionMethod&&O.dataModel))},dependencies:[e.sg,e.O5,C.X$,i],styles:[".table[_ngcontent-%COMP%]{display:table;border:1px solid #40A1F5}.table[_ngcontent-%COMP%]   .th[_ngcontent-%COMP%]{display:table-row;background-color:#40a1f5;color:#fff;font-weight:700}.table[_ngcontent-%COMP%]   .tr[_ngcontent-%COMP%]:nth-child(odd){background-color:#f9f9f9}.table[_ngcontent-%COMP%]   .tr[_ngcontent-%COMP%]{display:table-row;border-bottom:1px solid #000}.table[_ngcontent-%COMP%]   .td[_ngcontent-%COMP%]{display:table-cell;padding:15px;border-bottom:1px solid #40A1F5}.table[_ngcontent-%COMP%]   .tr[_ngcontent-%COMP%]:last-child   .td[_ngcontent-%COMP%]{border:0}.clear[_ngcontent-%COMP%]{clear:both}"]})}return s})()},1797:(y,M,n)=>{n.d(M,{a:()=>x});var t=n(8239),e=n(4537),C=n(92),i=n(4511),A=n(7445),_=n(1927),T=n(3151),d=n(2147),c=n(1528),p=n(7969),S=n(656),L=n(6707),a=n(8692),u=n(1637),g=n(1379),b=n(8659),I=n(3331),s=n(9665),v=n(5738);function r(E,R){if(1&E&&(e.TgZ(0,"label",8),e._uU(1),e.qZA()),2&E){const o=e.oxw();e.MGl("for","app-cms-site-selector-",o.id,""),e.xp6(1),e.Oqu(o.optionLabel)}}function f(E,R){if(1&E&&(e.TgZ(0,"mat-option",9)(1,"span"),e._uU(2),e.qZA()()),2&E){const o=R.$implicit,m=e.oxw();e.Q6J("value",o)("disabled",m.optionDisabled),e.xp6(2),e.Oqu(m.displayOption(o))}}function O(E,R){if(1&E){const o=e.EpF();e.TgZ(0,"mat-icon",10),e.NdJ("click",function(){e.CHM(o);const h=e.oxw();return e.KtG(h.onActionSelectClear())}),e._uU(1,"close"),e.qZA()}}const D=["*"];let x=(()=>{class E{coreEnumService;translate;cdr;categoryService;static nextId=0;id=++E.nextId;constructor(o,m,h,P){this.coreEnumService=o,this.translate=m,this.cdr=h,this.categoryService=P,this.loading.cdr=this.cdr,this.translate.get("MESSAGE.Receiving_information").subscribe(l=>{this.loading.message=l})}dataModelResult=new i.y$4;dataModelSelect=new i.tQj;loading=new S.O;get optionLoading(){return this.loading}set optionLoading(o){this.loading=o}formControl=new C.NI;filteredOptions;optionDisabled=!1;optionSelectFirstItem=!1;optionPlaceholder="";optionLabel="";optionChange=new e.vpe;optionReload=()=>this.onActionReload();set optionSelectForce(o){this.onActionSelectForce(o)}ngOnInit(){this.loadOptions()}loadOptions(){this.filteredOptions=this.formControl.valueChanges.pipe((0,_.O)(""),(0,T.b)(1500),(0,d.x)(),(0,c.w)(o=>this.DataGetAll("string"==typeof o||"number"==typeof o?o:"")))}displayFn(o){return o?o.id:void 0}displayOption(o){return o?o.id:void 0}DataGetAll(o){var m=this;return(0,t.Z)(function*(){const h=new i.Hay;if(h.rowPerPage=20,h.accessLoad=!0,o&&o.length>0){let l=new i.AO3;l=new i.AO3,l.propertyName="username",l.value=o,l.searchType=i.J6G.Contains,l.clauseType=i.ppe.Or,h.filters.push(l),l=new i.AO3,l.propertyName="name",l.value=o,l.searchType=i.J6G.Contains,l.clauseType=i.ppe.Or,h.filters.push(l),l=new i.AO3,l.propertyName="email",l.value=o,l.searchType=i.J6G.Contains,l.clauseType=i.ppe.Or,h.filters.push(l),l=new i.AO3,l.propertyName="lastname",l.value=o,l.searchType=i.J6G.Contains,l.clauseType=i.ppe.Or,h.filters.push(l),o&&"number"==typeof+o&&+o>0&&(l=new i.AO3,l.propertyName="Id",l.value=o,l.searchType=i.J6G.Equal,l.clauseType=i.ppe.Or,h.filters.push(l))}const P=m.constructor.name+"categoryService.ServiceGetAll";return m.loading.Start(P),yield(0,A.z)(m.categoryService.ServiceGetAll(h)).then(l=>(m.dataModelResult=l,m.loading.Stop(P),l.listItems))})()}onActionSelect(o){this.optionDisabled||(this.dataModelSelect=o,this.optionChange.emit(this.dataModelSelect))}onActionSelectClear(){this.optionDisabled||(this.dataModelSelect=null,this.formControl.setValue(null),this.optionChange.emit(null))}push(o){return this.filteredOptions.pipe((0,p.U)(m=>(m.find(h=>h.id===o.id)||m.push(o),m)))}onActionSelectForce(o){if("string"==typeof o&&o.length>0){if(this.dataModelSelect&&this.dataModelSelect.id===o)return;if(this.dataModelResult&&this.dataModelResult.listItems&&this.dataModelResult.listItems.find(m=>m.id===o)){const m=this.dataModelResult.listItems.find(h=>h.id===o);return this.dataModelSelect=m,void this.formControl.setValue(m)}this.categoryService.ServiceGetOneById(o).subscribe(m=>{m.isSuccess&&(this.filteredOptions=this.push(m.item),this.dataModelSelect=m.item,this.formControl.setValue(m.item),this.optionChange.emit(m.item))})}else{if(typeof o==typeof i.tQj)return this.filteredOptions=this.push(o),this.dataModelSelect=o,void this.formControl.setValue(o);this.formControl.setValue(null)}}onActionReload(){this.dataModelSelect=new i.tQj,this.loadOptions()}static \u0275fac=function(m){return new(m||E)(e.Y36(i.FLW),e.Y36(L.sK),e.Y36(e.sBO),e.Y36(i.Z_L))};static \u0275cmp=e.Xpm({type:E,selectors:[["app-cms-member-selector"]],inputs:{optionLoading:"optionLoading",optionDisabled:"optionDisabled",optionSelectFirstItem:"optionSelectFirstItem",optionPlaceholder:"optionPlaceholder",optionLabel:"optionLabel",optionReload:"optionReload",optionSelectForce:"optionSelectForce"},outputs:{optionChange:"optionChange"},ngContentSelectors:D,decls:10,vars:12,consts:[[1,"input-style","has-borders","no-icon","input-style-always-active","validate-field","mb-4"],[3,"options"],["class","color-highlight",3,"for",4,"ngIf"],["type","text","matInput","",1,"form-control","validate-name",3,"placeholder","formControl","matAutocomplete","id"],[3,"displayWith","optionSelected"],["matauto","matAutocomplete"],["class","color-highlight",3,"value","disabled",4,"ngFor","ngForOf"],["matSuffix","","matSuffix","","mat-icon-button","","aria-label","Clear",3,"click",4,"ngIf"],[1,"color-highlight",3,"for"],[1,"color-highlight",3,"value","disabled"],["matSuffix","","matSuffix","","mat-icon-button","","aria-label","Clear",3,"click"]],template:function(m,h){if(1&m&&(e.F$t(),e.TgZ(0,"div",0),e._UZ(1,"app-progress-spinner",1),e.YNc(2,r,2,2,"label",2),e._UZ(3,"input",3),e.TgZ(4,"mat-autocomplete",4,5),e.NdJ("optionSelected",function(l){return h.onActionSelect(l.option.value)}),e.YNc(6,f,3,3,"mat-option",6),e.ALo(7,"async"),e.qZA(),e.YNc(8,O,2,0,"mat-icon",7),e.Hsn(9),e.qZA()),2&m){const P=e.MAs(5);e.xp6(1),e.Q6J("options",h.loading),e.xp6(1),e.Q6J("ngIf",(null==h.optionLabel?null:h.optionLabel.length)>0),e.xp6(1),e.s9C("placeholder",h.optionPlaceholder),e.MGl("id","app-cms-site-selector-",h.id,""),e.Q6J("formControl",h.formControl)("matAutocomplete",P),e.uIk("disabled",!!h.optionDisabled||null),e.xp6(1),e.Q6J("displayWith",h.displayFn),e.xp6(2),e.Q6J("ngForOf",e.lcZ(7,10,h.filteredOptions)),e.xp6(2),e.Q6J("ngIf",null==h.dataModelSelect?null:h.dataModelSelect.id)}},dependencies:[a.sg,a.O5,C.Fj,C.JJ,C.oH,u.XC,g.ey,u.ZL,b.R9,I.Hw,s.Nt,v.O,a.Ov],encapsulation:2})}return E})()}}]);