"use strict";(self.webpackChunkntk_cms_web=self.webpackChunkntk_cms_web||[]).push([[9264,4121],{3673:(y,O,a)=>{a.d(O,{G:()=>_});var d=a(8239),t=a(8692),i=a(4511),o=a(4537),A=a(4032),v=a(2607);let _=(()=>{class u{elRef;renderer;publicHelper;cmsToastrService;cdr;document;row;contentService;constructor(n,s,f,g,S,b){this.elRef=n,this.renderer=s,this.publicHelper=f,this.cmsToastrService=g,this.cdr=S,this.document=b,this.DataEnumRecordStatus()}DataEnumRecordStatus(){var n=this;return(0,d.Z)(function*(){(yield n.publicHelper.getEnumRecordStatus()).listItems.forEach(f=>{const g=document.createElement("option");g.innerHTML=" "+f.title+' <i Class="'+n.iconStatus(f.value)+'"></i>',g.value=f.value.toString(),n.elRef.nativeElement.add(g)}),n.elRef.nativeElement.options.length>0&&n.row&&n.row.recordStatus&&n.renderer.setProperty(n.elRef.nativeElement,"value",n.row.recordStatus)})()}onChange(){const n=this.elRef.nativeElement,s=n.value;this.addLoader(n),this.contentService.setAccessDataType(i.dR.Editor),this.contentService.ServiceSetStatus(this.row.id,s).subscribe(f=>{f.isSuccess?(this.handleSuccessCase(n),this.cmsToastrService.typeSuccessSetStatus(f.errorMessage),this.row.recordStatus=0|s,this.cdr.markForCheck()):(this.renderer.setProperty(this.elRef.nativeElement,"value",this.row.recordStatus),this.cmsToastrService.typeErrorSetStatus(f.errorMessage),this.handleErrorCase(n))},f=>{this.renderer.setProperty(this.elRef.nativeElement,"value",this.row.recordStatus),this.cmsToastrService.typeError(f),this.handleErrorCase(n)})}handleSuccessCase(n){this.removeBackground(n),this.addSuccess(n),setTimeout(()=>{this.removeBackground(n)},1e3)}handleErrorCase(n){this.removeBackground(n);const s=this.document.createElement("img");s.style.width="20px",s.src="https://www.seekpng.com/png/detail/334-3345964_error-icon-download-attention-symbol.png";const f=this.renderer.parentNode(this.elRef.nativeElement);this.renderer.appendChild(f,s),setTimeout(()=>{this.renderer.removeChild(f,s)},1e3)}addLoader(n){this.addBackground(n,"https://replit.com/public/images/loading_dots.gif",20)}addSuccess(n){this.addBackground(n,"https://i.pinimg.com/originals/7b/dd/1b/7bdd1bc7db7fd48025d4e39a0e2f0fd8.jpg",20)}addBackground(n,s,f){n.style.background=`#fff url("${s}") no-repeat right 20px center`,n.style.backgroundSize=`${f}px`}removeBackground(n){n.style.background="none"}iconStatus(n){let s="";switch(n){case 1:default:s="fa fa-check";break;case 2:s="fa fa-eye-slash";break;case 3:s="fa fa-times";break;case 4:s="fa fa-hourglass-half";break;case 5:s="far fa-thumbs-down";break;case 6:s="fa fa-archive"}return s}static \u0275fac=function(s){return new(s||u)(o.Y36(o.SBq),o.Y36(o.Qsj),o.Y36(A.i),o.Y36(v.e),o.Y36(o.sBO),o.Y36(t.K0))};static \u0275dir=o.lG2({type:u,selectors:[["","cmsRecordStatusSelfSave",""]],hostBindings:function(s,f){1&s&&o.NdJ("change",function(){return f.onChange()})},inputs:{row:"row",contentService:"contentService"}})}return u})()},7548:(y,O,a)=>{a.d(O,{o:()=>i});var d=a(4537),t=a(707);let i=(()=>{class o{stepper;constructor(v){this.stepper=v}selectionChanged(){const v=this.stepper._getStepLabelId(this.stepper.selectedIndex),P=document.getElementById(v);P&&P.scrollIntoView({block:"start",inline:"nearest",behavior:"smooth"})}static \u0275fac=function(P){return new(P||o)(d.Y36(t.Vq))};static \u0275dir=d.lG2({type:o,selectors:[["mat-vertical-stepper"]],hostBindings:function(P,C){1&P&&d.NdJ("animationDone",function(){return C.selectionChanged()})}})}return o})()},532:(y,O,a)=>{a.d(O,{t:()=>d});var d=(()=>{return(t=d||(d={}))[t.none=0]="none",t[t.add=1]="add",t[t.edit=2]="edit",t[t.delete=3]="delete",t[t.list=4]="list",t[t.select=5]="select",d;var t})()},1447:(y,O,a)=>{a.d(O,{t:()=>d});class d{lat;lon}},5897:(y,O,a)=>{a.d(O,{Y:()=>i});var d=a(4537),t=a(5998);let i=(()=>{class o{sanitizer;constructor(v){this.sanitizer=v}transform(v){return"cms-RecordStatusEnum-cell-"+v}static \u0275fac=function(P){return new(P||o)(d.Y36(t.H7,16))};static \u0275pipe=d.Yjl({name:"statusCellClass",type:o,pure:!0})}return o})()},6639:(y,O,a)=>{a.d(O,{G:()=>i});var d=a(4537),t=a(5998);let i=(()=>{class o{sanitizer;constructor(v){this.sanitizer=v}transform(v,P=!1){let C="";switch(v){case 1:default:C="fa fa-check";break;case 2:C="fa fa-times";break;case 3:C="fa fa-trash";break;case 4:C="fa fa-hourglass-half";break;case 5:C="far fa-thumbs-down";break;case 6:C="fa fa-archive"}return C}static \u0275fac=function(P){return new(P||o)(d.Y36(t.H7,16))};static \u0275pipe=d.Yjl({name:"statusIconClass",type:o,pure:!0})}return o})()},3914:(y,O,a)=>{a.d(O,{s:()=>C});var d=a(2340),t=a(4536),i=a(4537);let o=(()=>{class T{dialogRef;data;static nextId=0;id=++T.nextId;constructor(u,m){this.dialogRef=u,this.data=m,m||this.dialogRef.close(!1)}ngOnInit(){}onDismiss(){this.dialogRef.close(!1)}onConfirm(){this.dialogRef.close(!0)}static \u0275fac=function(m){return new(m||T)(i.Y36(t.so),i.Y36(t.WI))};static \u0275cmp=i.Xpm({type:T,selectors:[["app-confirmation-dialog"]],decls:18,vars:4,consts:[[1,"menu","menu-box-modal","rounded-m","menu-active",2,"display","block","width","350px","height","320px","padding","20px"],[1,"menu-title"],[1,"fa","fa-question-circle","scale-box","float-start","me-3","ms-3","fa-3x","mt-1","color-blue-dark"],[1,"color-highlight"],[1,"font-20"],[1,"close-menu",3,"click"],[1,"fa","fa-times-circle"],[1,"content","mt-0"],[1,"pe-3",3,"innerHTML"],[1,"row","mb-0"],[1,"col-6"],[1,"btn","close-menu","btn-full","btn-m","bg-red-dark","font-600","rounded-s",3,"click"],[1,"btn","close-menu","btn-full","btn-m","bg-green-dark","font-600","rounded-s",3,"click"]],template:function(m,n){1&m&&(i.TgZ(0,"div",0)(1,"div",1),i._UZ(2,"i",2),i.TgZ(3,"p",3),i._uU(4),i.qZA(),i.TgZ(5,"h1",4),i._uU(6,"\u0645\u0637\u0645\u0626\u0646\u06cc\u062f\u061f"),i.qZA(),i.TgZ(7,"a",5),i.NdJ("click",function(){return n.onDismiss()}),i._UZ(8,"i",6),i.qZA()(),i.TgZ(9,"div",7),i._UZ(10,"p",8),i.TgZ(11,"div",9)(12,"div",10)(13,"a",11),i.NdJ("click",function(){return n.onDismiss()}),i._uU(14),i.qZA()(),i.TgZ(15,"div",10)(16,"a",12),i.NdJ("click",function(){return n.onConfirm()}),i._uU(17),i.qZA()()()()()),2&m&&(i.xp6(4),i.hij(" ",n.data.title,""),i.xp6(6),i.Q6J("innerHTML",n.data.message,i.oJD),i.xp6(4),i.Oqu(n.data.btnCancelText),i.xp6(3),i.Oqu(n.data.btnConfirmText))},encapsulation:2})}return T})();var A=a(727),v=a(6707);class P{title;message;constructor(_,u){this.title=_,this.message=u}btnConfirmText="OK";btnCancelText="Cancel";dialogSize="sm"}let C=(()=>{class T{dialog;tokenHelper;translate;constructor(u,m,n){this.dialog=u,this.tokenHelper=m,this.translate=n}confirm(u,m,n="",s="",f="sm"){const g=new P(u,m);return g.btnConfirmText=n,g.btnCancelText=s,g.dialogSize=f,(!g.btnConfirmText||""==g.btnConfirmText||0==g.btnConfirmText.length)&&this.translate.get("ACTION.CONFIRM").subscribe(L=>{g.btnConfirmText=L}),(!g.btnCancelText||""==g.btnCancelText||0==g.btnCancelText.length)&&this.translate.get("ACTION.CANCEL").subscribe(L=>{g.btnCancelText=L}),this.dialog.open(o,{height:"90%",panelClass:this.tokenHelper.isMobile?"dialog-fullscreen":"dialog-min",enterAnimationDuration:d.N.cmsViewConfig.enterAnimationDuration,exitAnimationDuration:d.N.cmsViewConfig.exitAnimationDuration,data:g}).afterClosed().toPromise().then(L=>Promise.resolve(L))}static \u0275fac=function(m){return new(m||T)(i.LFG(t.uw),i.LFG(A.v),i.LFG(v.sK))};static \u0275prov=i.Yz7({token:T,factory:T.\u0275fac})}return T})()},7904:(y,O,a)=>{a.d(O,{L:()=>m});var d=a(656),t=a(4537),i=a(8692);function o(n,s){1&n&&(t.TgZ(0,"div",8)(1,"p",9),t.Hsn(2,1),t.qZA()())}function A(n,s){1&n&&t._UZ(0,"div",10)}function v(n,s){1&n&&(t.TgZ(0,"div",11),t.Hsn(1,2),t.qZA())}function P(n,s){1&n&&t._UZ(0,"div",12)}function C(n,s){1&n&&t._UZ(0,"div",10)}function T(n,s){1&n&&(t.TgZ(0,"div",6)(1,"p",13),t.Hsn(2,3),t.qZA()())}const _=[[["","cms-tree-body",""]],[["","cms-tree-header",""]],[["","cms-tree-action",""]],[["","cms-tree-footer",""]]],u=["[cms-tree-body]","[cms-tree-header]","[cms-tree-action]","[cms-tree-footer]"];let m=(()=>{class n{static nextId=0;id=++n.nextId;optionHeaderDisplay=!0;optionActionMainDisplay=!0;optionFooterDisplay=!0;set optionLoading(f){this.loading=f}loading=new d.O;constructor(){}ngOnInit(){}static \u0275fac=function(g){return new(g||n)};static \u0275cmp=t.Xpm({type:n,selectors:[["app-cms-html-tree"]],inputs:{optionHeaderDisplay:"optionHeaderDisplay",optionActionMainDisplay:"optionActionMainDisplay",optionFooterDisplay:"optionFooterDisplay",optionLoading:"optionLoading"},ngContentSelectors:u,decls:10,vars:6,consts:[[1,"card","card-style"],[1,"row","justify-content-center","tree-parent"],["class","font-14 opacity-50",4,"ngIf"],["class","divider mb-1",4,"ngIf"],["class","col-12 pe-0 tree-child-hidden",4,"ngIf"],["class","divider mb-1 tree-child-hidden",4,"ngIf"],[1,"col-12","pe-0"],["class","col-12 pe-0",4,"ngIf"],[1,"font-14","opacity-50"],[1,"text-center","mb-2","mt-2","color-highlight","font-600"],[1,"divider","mb-1"],[1,"col-12","pe-0","tree-child-hidden"],[1,"divider","mb-1","tree-child-hidden"],[1,"text-center"]],template:function(g,S){1&g&&(t.F$t(_),t.TgZ(0,"div",0)(1,"div",1),t.YNc(2,o,3,0,"div",2),t.YNc(3,A,1,0,"div",3),t.YNc(4,v,2,0,"div",4),t.YNc(5,P,1,0,"div",5),t.TgZ(6,"div",6),t.Hsn(7),t.qZA(),t.YNc(8,C,1,0,"div",3),t.YNc(9,T,3,0,"div",7),t.qZA()()),2&g&&(t.xp6(2),t.Q6J("ngIf",S.optionHeaderDisplay),t.xp6(1),t.Q6J("ngIf",S.optionHeaderDisplay),t.xp6(1),t.Q6J("ngIf",S.optionActionMainDisplay),t.xp6(1),t.Q6J("ngIf",S.optionActionMainDisplay),t.xp6(3),t.Q6J("ngIf",S.optionFooterDisplay),t.xp6(1),t.Q6J("ngIf",S.optionFooterDisplay))},dependencies:[i.O5],encapsulation:2})}return n})()},6609:(y,O,a)=>{a.d(O,{D:()=>D});var d=a(8239),t=a(4537),i=a(92),o=a(4511),A=a(7445),v=a(1927),P=a(3151),C=a(2147),T=a(1528),_=a(7969),u=a(656),m=a(6707),n=a(8692),s=a(1637),f=a(1379),g=a(8659),S=a(3331),b=a(9665),L=a(5738),Z=a(1418);function I(h,B){if(1&h&&(t.TgZ(0,"label",8),t._uU(1),t.qZA()),2&h){const e=t.oxw();t.MGl("for","app-cms-site-selector-",e.id,""),t.xp6(1),t.Oqu(e.optionLabel)}}function U(h,B){if(1&h&&(t._UZ(0,"img",11),t.ALo(1,"cmsthumbnail")),2&h){const e=t.oxw().$implicit;t.s9C("src",t.lcZ(1,1,e.linkImageIdSrc),t.LSH)}}function c(h,B){if(1&h&&(t.TgZ(0,"mat-option",9),t.YNc(1,U,2,3,"img",10),t.TgZ(2,"span"),t._uU(3),t.qZA()()),2&h){const e=B.$implicit,l=t.oxw();t.Q6J("value",e)("disabled",l.optionDisabled),t.xp6(1),t.Q6J("ngIf",e.linkImageIdSrc),t.xp6(2),t.Oqu(l.displayOption(e))}}function p(h,B){if(1&h){const e=t.EpF();t.TgZ(0,"mat-icon",12),t.NdJ("click",function(){t.CHM(e);const M=t.oxw();return t.KtG(M.onActionSelectClear())}),t._uU(1,"close"),t.qZA()}}const r=["*"];let D=(()=>{class h{coreEnumService;translate;cdr;categoryService;static nextId=0;id=++h.nextId;constructor(e,l,M,R){this.coreEnumService=e,this.translate=l,this.cdr=M,this.categoryService=R,this.loading.cdr=this.cdr,this.translate.get("MESSAGE.Receiving_information").subscribe(E=>{this.loading.message=E})}dataModelResult=new o.y$4;dataModelSelect=new o.Dp$;formControl=new i.NI;filteredOptions;optionDisabled=!1;optionSelectFirstItem=!1;optionPlaceholder="";optionLabel="";optionChange=new t.vpe;optionReload=()=>this.onActionButtonReload();set optionSelectForce(e){this.onActionSelectForce(e)}loading=new u.O;get optionLoading(){return this.loading}set optionLoading(e){this.loading=e}ngOnInit(){this.loadOptions(),(!this.optionLabel||0==this.optionLabel.length&&this.optionPlaceholder?.length>0)&&(this.optionLabel=this.optionPlaceholder)}loadOptions(){this.filteredOptions=this.formControl.valueChanges.pipe((0,v.O)(""),(0,P.b)(1500),(0,C.x)(),(0,T.w)(e=>this.DataGetAll("string"==typeof e||"number"==typeof e?e:"")))}displayFn(e){return e&&e.virtual_Parent&&e.virtual_Parent.title.length>0&&e.virtual_Parent.virtual_Parent&&e.virtual_Parent.virtual_Parent.title.length>0&&e.virtual_Parent.virtual_Parent.virtual_Parent&&e.virtual_Parent.virtual_Parent.virtual_Parent.title.length>0?e.virtual_Parent.virtual_Parent.virtual_Parent.titleML+" > "+e.virtual_Parent.virtual_Parent.titleML+" > "+e.virtual_Parent.titleML+" > "+e.titleML:e&&e.virtual_Parent&&e.virtual_Parent.title.length>0&&e.virtual_Parent.virtual_Parent&&e.virtual_Parent.virtual_Parent.title.length>0?e.virtual_Parent.virtual_Parent.titleML+" > "+e.virtual_Parent.titleML+" > "+e.titleML:e&&e.virtual_Parent&&e.virtual_Parent.title.length>0?e.virtual_Parent.titleML+" > "+e.titleML:e?e.titleML:void 0}displayOption(e){return e&&e.virtual_Parent&&e.virtual_Parent.title.length>0&&e.virtual_Parent.virtual_Parent&&e.virtual_Parent.virtual_Parent.title.length>0&&e.virtual_Parent.virtual_Parent.virtual_Parent&&e.virtual_Parent.virtual_Parent.virtual_Parent.title.length>0?e.virtual_Parent.virtual_Parent.virtual_Parent.titleML+" > "+e.virtual_Parent.virtual_Parent.titleML+" > "+e.virtual_Parent.titleML+" > "+e.titleML:e&&e.virtual_Parent&&e.virtual_Parent.title.length>0&&e.virtual_Parent.virtual_Parent&&e.virtual_Parent.virtual_Parent.title.length>0?e.virtual_Parent.virtual_Parent.titleML+" > "+e.virtual_Parent.titleML+" > "+e.titleML:e&&e.virtual_Parent&&e.virtual_Parent.title.length>0?e.virtual_Parent.titleML+" > "+e.titleML:e?e.titleML:void 0}DataGetAll(e){var l=this;return(0,d.Z)(function*(){const M=new o.Hay;if(M.rowPerPage=20,M.accessLoad=!0,e&&e.length>0){let E=new o.AO3;E=new o.AO3,E.propertyName="Symbol",E.value=e,E.searchType=o.J6G.Contains,E.clauseType=o.ppe.Or,M.filters.push(E),E=new o.AO3,E.propertyName="Title",E.value=e,E.searchType=o.J6G.Contains,E.clauseType=o.ppe.Or,M.filters.push(E),e&&"number"==typeof+e&&+e>0&&(E=new o.AO3,E.propertyName="Id",E.value=e,E.searchType=o.J6G.Equal,E.clauseType=o.ppe.Or,M.filters.push(E))}const R=l.constructor.name+"main";return l.loading.Start(R),yield(0,A.z)(l.categoryService.ServiceGetAll(M)).then(E=>(l.dataModelResult=E,l.optionSelectFirstItem&&(!l.dataModelSelect||!l.dataModelSelect.id||l.dataModelSelect.id<=0)&&l.dataModelResult.listItems.length>0&&(l.optionSelectFirstItem=!1,setTimeout(()=>{l.formControl.setValue(l.dataModelResult.listItems[0])},1e3),l.onActionSelect(l.dataModelResult.listItems[0])),l.loading.Stop(R),E.listItems))})()}onActionSelect(e){this.optionDisabled||(this.dataModelSelect=e,this.optionChange.emit(this.dataModelSelect))}onActionSelectClear(){this.optionDisabled||(this.dataModelSelect=null,this.formControl.setValue(null),this.optionChange.emit(null))}push(e){return this.filteredOptions.pipe((0,_.U)(l=>(l.find(M=>M.id===e.id)||l.push(e),l)))}onActionSelectForce(e){if("number"==typeof e&&e>0){if(this.dataModelSelect&&this.dataModelSelect.id===e)return;if(this.dataModelResult&&this.dataModelResult.listItems&&this.dataModelResult.listItems.find(l=>l.id===e)){const l=this.dataModelResult.listItems.find(M=>M.id===e);return this.dataModelSelect=l,void this.formControl.setValue(l)}this.categoryService.ServiceGetOneIncludeParent(e).subscribe(l=>{l.isSuccess&&(this.filteredOptions=this.push(l.item),this.dataModelSelect=l.item,this.formControl.setValue(l.item),this.optionChange.emit(l.item))})}else{if(typeof e==typeof o.Dp$)return this.filteredOptions=this.push(e),this.dataModelSelect=e,void this.formControl.setValue(e);this.formControl.setValue(null)}}onActionButtonReload(){this.dataModelSelect=new o.Dp$,this.loadOptions()}static \u0275fac=function(l){return new(l||h)(t.Y36(o.FLW),t.Y36(m.sK),t.Y36(t.sBO),t.Y36(o.XRW))};static \u0275cmp=t.Xpm({type:h,selectors:[["app-cms-location-selector"]],inputs:{optionDisabled:"optionDisabled",optionSelectFirstItem:"optionSelectFirstItem",optionPlaceholder:"optionPlaceholder",optionLabel:"optionLabel",optionReload:"optionReload",optionSelectForce:"optionSelectForce",optionLoading:"optionLoading"},outputs:{optionChange:"optionChange"},ngContentSelectors:r,decls:10,vars:12,consts:[[1,"input-style","has-borders","no-icon","input-style-always-active","validate-field","mb-4"],[3,"options"],["class","color-highlight",3,"for",4,"ngIf"],["type","text","matInput","",1,"form-control","validate-name",3,"placeholder","formControl","matAutocomplete","id"],[3,"displayWith","optionSelected"],["matauto","matAutocomplete"],[3,"value","disabled",4,"ngFor","ngForOf"],["matSuffix","","matSuffix","","mat-icon-button","","aria-label","Clear",3,"click",4,"ngIf"],[1,"color-highlight",3,"for"],[3,"value","disabled"],["style","vertical-align:middle;","class","ntk-hover-zoom","aria-hidden","","height","25","width","25",3,"src",4,"ngIf"],["aria-hidden","","height","25","width","25",1,"ntk-hover-zoom",2,"vertical-align","middle",3,"src"],["matSuffix","","matSuffix","","mat-icon-button","","aria-label","Clear",3,"click"]],template:function(l,M){if(1&l&&(t.F$t(),t.TgZ(0,"div",0),t._UZ(1,"app-progress-spinner",1),t.YNc(2,I,2,2,"label",2),t._UZ(3,"input",3),t.TgZ(4,"mat-autocomplete",4,5),t.NdJ("optionSelected",function(E){return M.onActionSelect(E.option.value)}),t.YNc(6,c,4,4,"mat-option",6),t.ALo(7,"async"),t.qZA(),t.YNc(8,p,2,0,"mat-icon",7),t.Hsn(9),t.qZA()),2&l){const R=t.MAs(5);t.xp6(1),t.Q6J("options",M.loading),t.xp6(1),t.Q6J("ngIf",(null==M.optionLabel?null:M.optionLabel.length)>0),t.xp6(1),t.s9C("placeholder",M.optionPlaceholder),t.MGl("id","app-cms-site-selector-",M.id,""),t.Q6J("formControl",M.formControl)("matAutocomplete",R),t.uIk("disabled",!!M.optionDisabled||null),t.xp6(1),t.Q6J("displayWith",M.displayFn),t.xp6(2),t.Q6J("ngForOf",t.lcZ(7,10,M.filteredOptions)),t.xp6(2),t.Q6J("ngIf",null==M.dataModelSelect?null:M.dataModelSelect.id)}},dependencies:[n.sg,n.O5,i.Fj,i.JJ,i.oH,s.XC,f.ey,s.ZL,g.R9,S.Hw,b.Nt,L.O,n.Ov,Z.v],encapsulation:2})}return h})()},7407:(y,O,a)=>{a.d(O,{r:()=>P});var d=a(4537),t=a(4216),o=a(2340),A=a(2607),v=a(7128);let P=(()=>{class C{cmsToastrService;static nextId=0;id=++C.nextId;map$=new d.vpe;zoom$=new d.vpe;options={layers:[(0,t.tileLayer)(o.N.leafletUrl,{opacity:.7,maxZoom:19,detectRetina:!0})],zoom:16,center:[32.684985,51.6359425]};set optonCenter(_){this.map&&_&&_.lat&&_.lon&&0!==_.lat&&0!==_.lon&&this.map.setView(new t.LatLng(_.lat,_.lon),this.zoom)}set optionCurrentPoint(_){this.onActionCurrentPoint(_)}map;zoom;destroy=!1;constructor(_){this.cmsToastrService=_}ngOnInit(){const n=t.icon({iconRetinaUrl:"assets/leaflet/marker-icon-2x.png",iconUrl:"assets/leaflet/marker-icon.png",shadowUrl:"assets/leaflet/marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]});t.Marker.prototype.options.icon=n}ngAfterViewInit(){}ngOnDestroy(){this.map&&(this.map.clearAllEventListeners(),this.destroy=!0)}onMapReady(_){setTimeout(()=>{this.map&&!this.destroy&&_.invalidateSize()},500),this.map=_,this.map$.emit(_),this.zoom=_.getZoom(),this.zoom$.emit(this.zoom)}onMapZoomEnd(_){this.zoom=_.target.getZoom(),this.zoom$.emit(this.zoom)}onActionCurrentPoint(_=!0){this.getPosition().then(u=>{this.map.setView(new t.LatLng(u.lat,u.lon),this.zoom)})}getPosition(){return new Promise((_,u)=>{navigator.geolocation.getCurrentPosition(m=>{_({lon:m.coords.longitude,lat:m.coords.latitude})},m=>{this.cmsToastrService.typeErrorGetPosition()})})}static \u0275fac=function(u){return new(u||C)(d.Y36(A.e))};static \u0275cmp=d.Xpm({type:C,selectors:[["app-cms-map"]],inputs:{options:"options",optonCenter:"optonCenter",optionCurrentPoint:"optionCurrentPoint"},outputs:{map$:"map$",zoom$:"zoom$"},decls:1,vars:1,consts:[["leaflet","",1,"map-container",3,"leafletOptions","leafletMapReady","leafletMapZoomEnd"]],template:function(u,m){1&u&&(d.TgZ(0,"div",0),d.NdJ("leafletMapReady",function(s){return m.onMapReady(s)})("leafletMapZoomEnd",function(s){return m.onMapZoomEnd(s)}),d.qZA()),2&u&&d.Q6J("leafletOptions",m.options)},dependencies:[v.je],styles:[".map-container[_ngcontent-%COMP%]{width:100%;height:300px}"]})}return C})()},9831:(y,O,a)=>{a.d(O,{u:()=>Z});var d=a(5436),t=a(4537),i=a(92),o=a(4511),A=a(1927),v=a(3151),P=a(1528),C=a(7969),T=a(2607),_=a(8692),u=a(1637),m=a(1379),n=a(7084),s=a(8659),f=a(3331);const g=["tagInput"];function S(I,U){if(1&I){const c=t.EpF();t.TgZ(0,"mat-chip",9),t.NdJ("removed",function(){const D=t.CHM(c).$implicit,h=t.oxw();return t.KtG(h.remove(D))}),t._uU(1),t.TgZ(2,"button",10)(3,"mat-icon"),t._uU(4,"cancel"),t.qZA()()()}if(2&I){const c=U.$implicit;t.xp6(1),t.hij(" ",c.display," ")}}function b(I,U){if(1&I&&(t.TgZ(0,"mat-option",11),t._uU(1),t.qZA()),2&I){const c=U.$implicit;t.Q6J("value",c),t.xp6(1),t.hij(" ",c.display," ")}}let Z=(()=>{class I{service;cmsToastrService;static nextId=0;id=++I.nextId;constructor(c,p){this.service=c,this.cmsToastrService=p,this.filteredOptions=this.tagCtrl.valueChanges.pipe((0,A.O)(null),(0,v.b)(400),(0,P.w)(r=>this.filter(r||"")))}optionDisabled=!1;tagInput;optionPlaceholder="+ Tag";optionLabel="";optionChange=new t.vpe;set optionSelectForce(c){this.onActionSelectForce(c)}tagDataModel=[];tagLastDataModel=[];selectForceStatus=!0;separatorKeysCodes=[d.K5];tagCtrl=new i.NI("");filteredOptions;addOnBlur=!0;ngOnInit(){(!this.optionLabel||0==this.optionLabel.length&&this.optionPlaceholder?.length>0)&&(this.optionLabel=this.optionPlaceholder)}filter(c){const p=new o.Hay;p.rowPerPage=20,p.accessLoad=!0;let r=new o.AO3;return r.propertyName="Title",r.value=c,r.searchType=o.J6G.Contains,r.clauseType=o.ppe.Or,p.filters.push(r),c&&"number"==typeof+c&&+c>0&&(r=new o.AO3,r.propertyName="Id",r.value=c,r.searchType=o.J6G.Equal,r.clauseType=o.ppe.Or,p.filters.push(r)),this.service.ServiceGetAll(p).pipe((0,C.U)(D=>(this.tagLastDataModel=D.listItems.map(h=>({display:h.title,value:h.id})),this.tagLastDataModel)))}checkIndex(c){let p=0,r=-1;return this.tagDataModel.forEach(D=>{D.value==c&&(r=p),p++}),r}add(c){let p;c.value&&this.tagLastDataModel.forEach(r=>{(r.display==c.value||r.value+""==c.value)&&(p=r)}),p&&this.checkIndex(p.value)<0&&(this.tagDataModel.push(p),this.onActionChange()),c.chipInput.clear(),this.tagCtrl.setValue(null)}remove(c){const p=this.checkIndex(c.value);p>=0&&(this.tagDataModel.splice(p,1),this.onActionChange())}selected(c){const p=c.option.value;this.checkIndex(p.value)<0&&this.tagDataModel.push(p),this.tagInput.nativeElement.value="",this.tagCtrl.setValue(null),this.onActionChange()}onActionChange(){const c=[];this.tagDataModel.forEach(p=>{c.findIndex(r=>r==p.value)<0&&c.push(p.value)}),this.selectForceStatus=!1,this.optionChange.emit(c)}onActionSelectForce(c){if(!this.selectForceStatus||!c||0===c.length)return;const p=new o.Hay;c.forEach(r=>{if(r>0){const D=new o.AO3;D.propertyName="Id",D.value=r,D.clauseType=o.ppe.Or,p.filters.push(D)}}),this.service.ServiceGetAll(p).pipe((0,C.U)(r=>{r.isSuccess?r.listItems.forEach(D=>{this.tagDataModel.findIndex(h=>h.value==D.id)<0&&this.tagDataModel.push({value:D.id,display:D.title})}):this.cmsToastrService.typeErrorGetAll(r.errorMessage)},r=>{this.cmsToastrService.typeErrorGetAll(r)})).toPromise()}static \u0275fac=function(p){return new(p||I)(t.Y36(o.dF2),t.Y36(T.e))};static \u0275cmp=t.Xpm({type:I,selectors:[["app-cms-tag-autocomplete"]],viewQuery:function(p,r){if(1&p&&t.Gf(g,5),2&p){let D;t.iGM(D=t.CRH())&&(r.tagInput=D.first)}},inputs:{optionDisabled:"optionDisabled",optionPlaceholder:"optionPlaceholder",optionLabel:"optionLabel",optionSelectForce:"optionSelectForce"},outputs:{optionChange:"optionChange"},decls:12,vars:12,consts:[["appearance","fill",2,"width","100%"],["aria-label","tag selection",3,"disabled"],["chipList",""],[3,"removed",4,"ngFor","ngForOf"],[3,"placeholder","matChipInputAddOnBlur","formControl","matAutocomplete","matChipInputFor","matChipInputSeparatorKeyCodes","matChipInputTokenEnd"],["tagInput",""],[3,"optionSelected"],["auto","matAutocomplete"],[3,"value",4,"ngFor","ngForOf"],[3,"removed"],["matChipRemove","",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-gray"],[3,"value"]],template:function(p,r){if(1&p&&(t.TgZ(0,"mat-form-field",0)(1,"mat-label"),t._uU(2),t.qZA(),t.TgZ(3,"mat-chip-grid",1,2),t.YNc(5,S,5,1,"mat-chip",3),t.TgZ(6,"input",4,5),t.NdJ("matChipInputTokenEnd",function(h){return r.add(h)}),t.qZA()(),t.TgZ(8,"mat-autocomplete",6,7),t.NdJ("optionSelected",function(h){return r.selected(h)}),t.YNc(10,b,2,2,"mat-option",8),t.ALo(11,"async"),t.qZA()()),2&p){const D=t.MAs(4),h=t.MAs(9);t.xp6(2),t.Oqu(r.optionLabel),t.xp6(1),t.Q6J("disabled",r.optionDisabled),t.xp6(2),t.Q6J("ngForOf",r.tagDataModel),t.xp6(1),t.Q6J("placeholder"," + "+r.optionPlaceholder)("matChipInputAddOnBlur",r.addOnBlur)("formControl",r.tagCtrl)("matAutocomplete",h)("matChipInputFor",D)("matChipInputSeparatorKeyCodes",r.separatorKeysCodes),t.xp6(4),t.Q6J("ngForOf",t.lcZ(11,10,r.filteredOptions))}},dependencies:[_.sg,i.Fj,i.JJ,i.oH,u.XC,m.ey,u.ZL,n.HS,n.RA,n.oH,n.qH,s.KE,s.hX,f.Hw,_.Ov],encapsulation:2})}return I})()}}]);