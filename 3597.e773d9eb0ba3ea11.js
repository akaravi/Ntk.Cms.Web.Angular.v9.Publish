"use strict";(self.webpackChunkntk_cms_web=self.webpackChunkntk_cms_web||[]).push([[3597],{3597:(y,f,l)=>{l.d(f,{s:()=>k});var M=l(5211),e=l(4537),s=l(8849),d=l(4511),C=l(656),m=l(2340),T=l(6632),E=l(3912),A=l(2607),b=l(4536),D=l(4032),S=l(727),a=l(6707),_=l(8692),h=l(9638),g=l(3331),p=l(7904),x=l(1418);function I(i,c){if(1&i){const t=e.EpF();e.TgZ(0,"button",12),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.onActionAdd())}),e._uU(1),e.ALo(2,"translate"),e.qZA()}2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"ACTION.ADD")))}function O(i,c){if(1&i){const t=e.EpF();e.TgZ(0,"button",13),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.onActionEdit())}),e._uU(1),e.ALo(2,"translate"),e.qZA()}2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"ACTION.EDIT")))}function R(i,c){if(1&i){const t=e.EpF();e.TgZ(0,"button",14),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.onActionDelete())}),e._uU(1),e.ALo(2,"translate"),e.qZA()}2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"ACTION.DELETE")))}function P(i,c){if(1&i){const t=e.EpF();e.TgZ(0,"button",15),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.onActionButtonReload())}),e.TgZ(1,"mat-icon",16),e.ALo(2,"translate"),e._uU(3,"refresh"),e.qZA()()}2&i&&(e.xp6(1),e.s9C("title",e.lcZ(2,1,"ACTION.RELOAD")))}function L(i,c){if(1&i&&(e._UZ(0,"img",20),e.ALo(1,"cmsthumbnail")),2&i){const t=e.oxw().$implicit;e.s9C("src",e.lcZ(1,1,t.linkMainImageIdSrc),e.LSH)}}const v=function(i){return{background:i}};function Z(i,c){if(1&i){const t=e.EpF();e.TgZ(0,"mat-tree-node",17),e.NdJ("click",function(){const r=e.CHM(t).$implicit,u=e.oxw();return e.KtG(u.onActionSelect(r))}),e._UZ(1,"button",18),e.YNc(2,L,2,3,"img",19),e._uU(3),e.qZA()}if(2&i){const t=c.$implicit,n=e.oxw();e.Q6J("ngStyle",e.VKq(3,v,n.dataModelSelect.id>0&&n.dataModelSelect.id===t.id?"#d3d3da":"")),e.xp6(2),e.Q6J("ngIf",t.linkMainImageIdSrc),e.xp6(1),e.hij(" ",t.title," ")}}function H(i,c){if(1&i&&(e._UZ(0,"img",20),e.ALo(1,"cmsthumbnail")),2&i){const t=e.oxw().$implicit;e.s9C("src",e.lcZ(1,1,t.linkMainImageIdSrc),e.LSH)}}function N(i,c){if(1&i){const t=e.EpF();e.TgZ(0,"mat-nested-tree-node")(1,"li")(2,"div",21),e.NdJ("click",function(){const r=e.CHM(t).$implicit,u=e.oxw();return e.KtG(u.onActionSelect(r))}),e.TgZ(3,"button",22),e.NdJ("click",function(){const r=e.CHM(t).$implicit,u=e.oxw();return e.KtG(u.onActionSelect(r))}),e.TgZ(4,"mat-icon",23),e._uU(5),e.qZA()(),e.YNc(6,H,2,3,"img",19),e._uU(7),e.qZA(),e.TgZ(8,"ul"),e.GkF(9,24),e.qZA()()()}if(2&i){const t=c.$implicit,n=e.oxw();e.xp6(2),e.Q6J("ngStyle",e.VKq(7,v,n.dataModelSelect.id>0&&n.dataModelSelect.id===t.id?"#d3d3da":"")),e.xp6(1),e.uIk("aria-label","Toggle "+t.title),e.xp6(2),e.hij(" ",n.treeControl.isExpanded(t)?"expand_more":"chevron_right"," "),e.xp6(1),e.Q6J("ngIf",t.linkMainImageIdSrc),e.xp6(1),e.hij(" ",t.title," "),e.xp6(1),e.ekj("category-tree-invisible",!n.treeControl.isExpanded(t))}}let k=(()=>{class i{cmsToastrService;coreEnumService;categoryService;dialog;cdr;publicHelper;tokenHelper;translate;constructor(t,n,o,r,u,U,K,w){this.cmsToastrService=t,this.coreEnumService=n,this.categoryService=o,this.dialog=r,this.cdr=u,this.publicHelper=U,this.tokenHelper=K,this.translate=w,this.publicHelper.processService.cdr=this.cdr,this.translate.get("MESSAGE.Receiving_information").subscribe(B=>{this.loading.message=B})}set optionSelectForce(t){this.onActionSelectForce(t)}dataModelSelect=new d.six;dataModelResult=new d.y$4;filterModel=new d.Hay;loading=new C.O;get optionLoading(){return this.loading}set optionLoading(t){this.loading=t}treeControl=new M.VY(t=>null);dataSource=new s.WX;optionChange=new e.vpe;cmsApiStoreSubscribe;optionReload=()=>this.onActionButtonReload();hasChild=(t,n)=>!1;ngOnInit(){this.DataGetAll(),this.cmsApiStoreSubscribe=this.tokenHelper.getCurrentTokenOnChange().subscribe(t=>{this.DataGetAll()})}ngOnDestroy(){this.cmsApiStoreSubscribe.unsubscribe()}DataGetAll(){this.filterModel.rowPerPage=200,this.filterModel.accessLoad=!0;const t=this.constructor.name+"main";this.publicHelper.processService.processStart(t),this.categoryService.ServiceGetAll(this.filterModel).subscribe({next:n=>{n.isSuccess?(this.dataModelResult=n,this.dataSource.data=this.dataModelResult.listItems):this.cmsToastrService.typeErrorMessage(n.errorMessage),this.publicHelper.processService.processStop(t)},error:n=>{this.cmsToastrService.typeError(n),this.publicHelper.processService.processStop(t,!1)}})}onActionSelect(t){this.dataModelSelect=t,this.optionChange.emit(this.dataModelSelect)}onActionButtonReload(){this.onActionSelect(null),this.dataModelSelect=new d.six,this.DataGetAll()}onActionSelectForce(t){}onActionAdd(){this.dialog.open(T.n,{height:"90%",panelClass:this.tokenHelper.isMobile?"dialog-fullscreen":"dialog-min",enterAnimationDuration:m.N.cmsViewConfig.enterAnimationDuration,exitAnimationDuration:m.N.cmsViewConfig.exitAnimationDuration,data:{}}).afterClosed().subscribe(o=>{o&&o.dialogChangedDate&&this.DataGetAll()})}onActionEdit(){let t=0;this.dataModelSelect&&this.dataModelSelect.id>0&&(t=this.dataModelSelect.id),0!==t?this.dialog.open(E.a,{height:"90%",panelClass:this.tokenHelper.isMobile?"dialog-fullscreen":"dialog-min",enterAnimationDuration:m.N.cmsViewConfig.enterAnimationDuration,exitAnimationDuration:m.N.cmsViewConfig.exitAnimationDuration,data:{id:t}}).afterClosed().subscribe(r=>{r&&r.dialogChangedDate&&this.DataGetAll()}):this.translate.get("ERRORMESSAGE.MESSAGE.typeErrorCategoryNotSelected").subscribe(r=>{this.cmsToastrService.typeErrorSelected(r)})}onActionDelete(){let t=0;this.dataModelSelect&&this.dataModelSelect.id>0&&(t=this.dataModelSelect.id),0!==t||this.translate.get("ERRORMESSAGE.MESSAGE.typeErrorCategoryNotSelected").subscribe(n=>{this.cmsToastrService.typeErrorSelected(n)})}static \u0275fac=function(n){return new(n||i)(e.Y36(A.e),e.Y36(d.FLW),e.Y36(d.EAm),e.Y36(b.uw),e.Y36(e.sBO),e.Y36(D.i),e.Y36(S.v),e.Y36(a.sK))};static \u0275cmp=e.Xpm({type:i,selectors:[["app-core-module-tree"]],inputs:{optionSelectForce:"optionSelectForce",optionLoading:"optionLoading",optionReload:"optionReload"},outputs:{optionChange:"optionChange"},decls:14,vars:14,consts:[[3,"optionLoading","optionHeaderDisplay","optionActionMainDisplay","optionFooterDisplay"],["cms-tree-header",""],["cms-tree-action",""],["type","button","class","btn font-13 font-600 btn-s m-1 rounded-s shadow-xl border-0 gradient-teal",3,"click",4,"ngIf"],["type","button","class","btn font-13 font-600 btn-s m-1 rounded-s shadow-xl border-0 gradient-magenta",3,"click",4,"ngIf"],["type","button","class","btn font-13 font-600 btn-s m-1 rounded-s shadow-xl border-0 gradient-red",3,"click",4,"ngIf"],["type","button","class","btn font-13 font-600 btn-s m-1 rounded-s shadow-xl border-0 gradient-highlight",3,"click",4,"ngIf"],["cms-tree-body",""],[1,"category-tree","cursor-pointer",3,"dataSource","treeControl"],["matTreeNodePadding","",3,"ngStyle","click",4,"matTreeNodeDef"],[4,"matTreeNodeDef","matTreeNodeDefWhen"],["cms-tree-footer",""],["type","button",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-teal",3,"click"],["type","button",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-magenta",3,"click"],["type","button",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-red",3,"click"],["type","button",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-highlight",3,"click"],[2,"font-size","20px","margin","-6px",3,"title"],["matTreeNodePadding","",3,"ngStyle","click"],["type","button","mat-icon-button","","disabled","",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-highlight"],["style","vertical-align:middle;","class","ntk-hover-zoom","aria-hidden","","height","25","width","25",3,"src",4,"ngIf"],["aria-hidden","","height","25","width","25",1,"ntk-hover-zoom",2,"vertical-align","middle",3,"src"],[1,"mat-tree-node",3,"ngStyle","click"],["type","button","mat-icon-button","","matTreeNodeToggle","",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-highlight",3,"click"],[1,"mat-icon-rtl-mirror"],["matTreeNodeOutlet",""]],template:function(n,o){1&n&&(e.TgZ(0,"app-cms-html-tree",0),e.ynx(1,1),e._uU(2),e.ALo(3,"translate"),e.BQk(),e.ynx(4,2),e.YNc(5,I,3,3,"button",3),e.YNc(6,O,3,3,"button",4),e.YNc(7,R,3,3,"button",5),e.YNc(8,P,4,3,"button",6),e.BQk(),e.ynx(9,7),e.TgZ(10,"mat-tree",8),e.YNc(11,Z,4,5,"mat-tree-node",9),e.YNc(12,N,10,9,"mat-nested-tree-node",10),e.qZA(),e.BQk(),e.GkF(13,11),e.qZA()),2&n&&(e.Q6J("optionLoading",o.loading)("optionHeaderDisplay",!0)("optionActionMainDisplay",!0)("optionFooterDisplay",!1),e.xp6(2),e.hij(" ",e.lcZ(3,12,"TABLE."+(null==o.dataModelResult||null==o.dataModelResult.access?null:o.dataModelResult.access.moduleEntityName))," "),e.xp6(3),e.Q6J("ngIf",null==o.dataModelResult||null==o.dataModelResult.access?null:o.dataModelResult.access.accessAddRow),e.xp6(1),e.Q6J("ngIf",(null==o.dataModelResult||null==o.dataModelResult.access?null:o.dataModelResult.access.accessEditRow)&&(null==o.dataModelSelect?null:o.dataModelSelect.id)>0),e.xp6(1),e.Q6J("ngIf",(null==o.dataModelResult||null==o.dataModelResult.access?null:o.dataModelResult.access.accessDeleteRow)&&(null==o.dataModelSelect?null:o.dataModelSelect.id)>0),e.xp6(1),e.Q6J("ngIf",null==o.dataModelResult||null==o.dataModelResult.access?null:o.dataModelResult.access.accessWatchRow),e.xp6(2),e.Q6J("dataSource",o.dataSource)("treeControl",o.treeControl),e.xp6(2),e.Q6J("matTreeNodeDefWhen",o.hasChild))},dependencies:[_.O5,_.PC,h.RK,g.Hw,s.GZ,s.fQ,s.ah,s.eu,s.gi,s.uo,s.Ar,p.L,a.X$,x.v],encapsulation:2})}return i})()},7904:(y,f,l)=>{l.d(f,{L:()=>S});var M=l(656),e=l(4537),s=l(8692);function d(a,_){1&a&&(e.TgZ(0,"div",8)(1,"p",9),e.Hsn(2,1),e.qZA()())}function C(a,_){1&a&&e._UZ(0,"div",10)}function m(a,_){1&a&&(e.TgZ(0,"div",11),e.Hsn(1,2),e.qZA())}function T(a,_){1&a&&e._UZ(0,"div",12)}function E(a,_){1&a&&e._UZ(0,"div",10)}function A(a,_){1&a&&(e.TgZ(0,"div",6)(1,"p",13),e.Hsn(2,3),e.qZA()())}const b=[[["","cms-tree-body",""]],[["","cms-tree-header",""]],[["","cms-tree-action",""]],[["","cms-tree-footer",""]]],D=["[cms-tree-body]","[cms-tree-header]","[cms-tree-action]","[cms-tree-footer]"];let S=(()=>{class a{static nextId=0;id=++a.nextId;optionHeaderDisplay=!0;optionActionMainDisplay=!0;optionFooterDisplay=!0;set optionLoading(h){this.loading=h}loading=new M.O;constructor(){}ngOnInit(){}static \u0275fac=function(g){return new(g||a)};static \u0275cmp=e.Xpm({type:a,selectors:[["app-cms-html-tree"]],inputs:{optionHeaderDisplay:"optionHeaderDisplay",optionActionMainDisplay:"optionActionMainDisplay",optionFooterDisplay:"optionFooterDisplay",optionLoading:"optionLoading"},ngContentSelectors:D,decls:10,vars:6,consts:[[1,"card","card-style"],[1,"row","justify-content-center","tree-parent"],["class","font-14 opacity-50",4,"ngIf"],["class","divider mb-1",4,"ngIf"],["class","col-12 pe-0 tree-child-hidden",4,"ngIf"],["class","divider mb-1 tree-child-hidden",4,"ngIf"],[1,"col-12","pe-0"],["class","col-12 pe-0",4,"ngIf"],[1,"font-14","opacity-50"],[1,"text-center","mb-2","mt-2","color-highlight","font-600"],[1,"divider","mb-1"],[1,"col-12","pe-0","tree-child-hidden"],[1,"divider","mb-1","tree-child-hidden"],[1,"text-center"]],template:function(g,p){1&g&&(e.F$t(b),e.TgZ(0,"div",0)(1,"div",1),e.YNc(2,d,3,0,"div",2),e.YNc(3,C,1,0,"div",3),e.YNc(4,m,2,0,"div",4),e.YNc(5,T,1,0,"div",5),e.TgZ(6,"div",6),e.Hsn(7),e.qZA(),e.YNc(8,E,1,0,"div",3),e.YNc(9,A,3,0,"div",7),e.qZA()()),2&g&&(e.xp6(2),e.Q6J("ngIf",p.optionHeaderDisplay),e.xp6(1),e.Q6J("ngIf",p.optionHeaderDisplay),e.xp6(1),e.Q6J("ngIf",p.optionActionMainDisplay),e.xp6(1),e.Q6J("ngIf",p.optionActionMainDisplay),e.xp6(3),e.Q6J("ngIf",p.optionFooterDisplay),e.xp6(1),e.Q6J("ngIf",p.optionFooterDisplay))},dependencies:[s.O5],encapsulation:2})}return a})()}}]);