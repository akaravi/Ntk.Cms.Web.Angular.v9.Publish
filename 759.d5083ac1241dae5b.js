"use strict";(self.webpackChunkntk_cms_web=self.webpackChunkntk_cms_web||[]).push([[759,7421],{3438:(D,C,a)=>{a.d(C,{x:()=>c});var d=a(3308),t=a(6610),o=a(8189),s=a(7788),O=a(5154),m=a(9722);let c=(()=>{class u{elRef;renderer;publicHelper;cmsToastrService;cdr;document;row;contentService;constructor(e,i,h,g,I,S){this.elRef=e,this.renderer=i,this.publicHelper=h,this.cmsToastrService=g,this.cdr=I,this.document=S,this.DataEnumRecordStatus()}DataEnumRecordStatus(){var e=this;return(0,d.A)(function*(){(yield e.publicHelper.getEnumRecordStatus()).listItems.forEach(h=>{const g=document.createElement("option");g.innerHTML=" "+h.title+' <i Class="'+e.iconStatus(h.value)+'"></i>',g.value=h.value.toString(),e.elRef.nativeElement.add(g)}),e.elRef.nativeElement.options.length>0&&e.row&&e.row.recordStatus&&e.renderer.setProperty(e.elRef.nativeElement,"value",e.row.recordStatus)})()}onChange(){const e=this.elRef.nativeElement,i=e.value;this.addLoader(e),this.contentService.setAccessDataType(o.FYP.Editor),this.contentService.ServiceSetStatus(this.row.id,i).subscribe({next:h=>{h.isSuccess?(this.handleSuccessCase(e),this.cmsToastrService.typeSuccessSetStatus(h.errorMessage),this.row.recordStatus=0|i,this.cdr.markForCheck()):(this.renderer.setProperty(this.elRef.nativeElement,"value",this.row.recordStatus),this.cmsToastrService.typeErrorSetStatus(h.errorMessage),this.handleErrorCase(e))},error:h=>{this.renderer.setProperty(this.elRef.nativeElement,"value",this.row.recordStatus),this.cmsToastrService.typeError(h),this.handleErrorCase(e)}})}handleSuccessCase(e){this.removeBackground(e),this.addSuccess(e),setTimeout(()=>{this.removeBackground(e)},1e3)}handleErrorCase(e){this.removeBackground(e);const i=this.document.createElement("img");i.style.width="20px",i.src="https://www.seekpng.com/png/detail/334-3345964_error-icon-download-attention-symbol.png";const h=this.renderer.parentNode(this.elRef.nativeElement);this.renderer.appendChild(h,i),setTimeout(()=>{this.renderer.removeChild(h,i)},1e3)}addLoader(e){this.addBackground(e,"https://replit.com/public/images/loading_dots.gif",20)}addSuccess(e){this.addBackground(e,"https://i.pinimg.com/originals/7b/dd/1b/7bdd1bc7db7fd48025d4e39a0e2f0fd8.jpg",20)}addBackground(e,i,h){e.style.background=`#fff url("${i}") no-repeat right 20px center`,e.style.backgroundSize=`${h}px`}removeBackground(e){e.style.background="none"}iconStatus(e){let i="";switch(e){case 1:default:i="fa fa-check";break;case 2:i="fa fa-eye-slash";break;case 3:i="fa fa-times";break;case 4:i="fa fa-hourglass-half";break;case 5:i="far fa-thumbs-down";break;case 6:i="fa fa-archive"}return i}static \u0275fac=function(i){return new(i||u)(s.rXU(s.aKT),s.rXU(s.sFG),s.rXU(O.A),s.rXU(m.k),s.rXU(s.gRc),s.rXU(t.qQ))};static \u0275dir=s.FsC({type:u,selectors:[["","cmsRecordStatusSelfSave",""]],hostBindings:function(i,h){1&i&&s.bIt("change",function(){return h.onChange()})},inputs:{row:"row",contentService:"contentService"}})}return u})()},4252:(D,C,a)=>{a.d(C,{r:()=>o});var d=a(7788),t=a(8351);let o=(()=>{class s{stepper;constructor(m){this.stepper=m}selectionChanged(){const m=this.stepper._getStepLabelId(this.stepper.selectedIndex),v=document.getElementById(m);v&&v.scrollIntoView({block:"start",inline:"nearest",behavior:"smooth"})}static \u0275fac=function(v){return new(v||s)(d.rXU(t.M6))};static \u0275dir=d.FsC({type:s,selectors:[["mat-vertical-stepper"]],hostBindings:function(v,_){1&v&&d.bIt("animationDone",function(){return _.selectionChanged()})}})}return s})()},4237:(D,C,a)=>{a.d(C,{v:()=>d});var d=function(t){return t[t.none=0]="none",t[t.add=1]="add",t[t.edit=2]="edit",t[t.delete=3]="delete",t[t.list=4]="list",t[t.select=5]="select",t}(d||{})},9256:(D,C,a)=>{a.d(C,{G:()=>d});class d{lat;lon}},1268:(D,C,a)=>{a.d(C,{M:()=>o});var d=a(7788),t=a(6098);let o=(()=>{class s{sanitizer;constructor(m){this.sanitizer=m}transform(m){return"cms-RecordStatusEnum-cell-"+m}static \u0275fac=function(v){return new(v||s)(d.rXU(t.up,16))};static \u0275pipe=d.EJ8({name:"statusCellClass",type:s,pure:!0})}return s})()},6381:(D,C,a)=>{a.d(C,{T:()=>o});var d=a(7788),t=a(6098);let o=(()=>{class s{sanitizer;constructor(m){this.sanitizer=m}transform(m,v=!1){let _="";switch(m){case 1:default:_="fa fa-check";break;case 2:_="fa fa-times";break;case 3:_="fa fa-trash";break;case 4:_="fa fa-hourglass-half";break;case 5:_="far fa-thumbs-down";break;case 6:_="fa fa-archive"}return _}static \u0275fac=function(v){return new(v||s)(d.rXU(t.up,16))};static \u0275pipe=d.EJ8({name:"statusIconClass",type:s,pure:!0})}return s})()},5459:(D,C,a)=>{a.d(C,{o:()=>_});var d=a(5312),t=a(6482),o=a(7788);let s=(()=>{class E{dialogRef;data;static nextId=0;id=++E.nextId;constructor(u,p){this.dialogRef=u,this.data=p,p||this.dialogRef.close(!1)}ngOnInit(){}onDismiss(){this.dialogRef.close(!1)}onConfirm(){this.dialogRef.close(!0)}static \u0275fac=function(p){return new(p||E)(o.rXU(t.CP),o.rXU(t.Vh))};static \u0275cmp=o.VBU({type:E,selectors:[["app-confirmation-dialog"]],decls:18,vars:4,consts:[[1,"menu","menu-box-modal","rounded-m","menu-active",2,"display","block","width","350px","height","320px","padding","20px"],[1,"menu-title"],[1,"fa","fa-question-circle","scale-box","float-start","me-3","ms-3","fa-3x","mt-1","color-blue-dark"],[1,"color-highlight"],[1,"font-20"],[1,"close-menu",3,"click"],[1,"fa","fa-times-circle"],[1,"content","mt-0"],[1,"pe-3",3,"innerHTML"],[1,"row","mb-0"],[1,"col-6"],[1,"btn","close-menu","btn-full","btn-m","bg-red-dark","font-600","rounded-s",3,"click"],[1,"btn","close-menu","btn-full","btn-m","bg-green-dark","font-600","rounded-s",3,"click"]],template:function(p,e){1&p&&(o.j41(0,"div",0)(1,"div",1),o.nrm(2,"i",2),o.j41(3,"p",3),o.EFF(4),o.k0s(),o.j41(5,"h1",4),o.EFF(6,"\u0645\u0637\u0645\u0626\u0646\u06cc\u062f\u061f"),o.k0s(),o.j41(7,"a",5),o.bIt("click",function(){return e.onDismiss()}),o.nrm(8,"i",6),o.k0s()(),o.j41(9,"div",7),o.nrm(10,"p",8),o.j41(11,"div",9)(12,"div",10)(13,"a",11),o.bIt("click",function(){return e.onDismiss()}),o.EFF(14),o.k0s()(),o.j41(15,"div",10)(16,"a",12),o.bIt("click",function(){return e.onConfirm()}),o.EFF(17),o.k0s()()()()()),2&p&&(o.R7$(4),o.SpI(" ",e.data.title,""),o.R7$(6),o.Y8G("innerHTML",e.data.message,o.npT),o.R7$(4),o.JRh(e.data.btnCancelText),o.R7$(3),o.JRh(e.data.btnConfirmText))},encapsulation:2})}return E})();var O=a(8339),m=a(2882);class v{title;message;constructor(c,u){this.title=c,this.message=u}btnConfirmText="OK";btnCancelText="Cancel";dialogSize="sm"}let _=(()=>{class E{dialog;tokenHelper;translate;constructor(u,p,e){this.dialog=u,this.tokenHelper=p,this.translate=e}confirm(u,p,e="",i="",h="sm"){const g=new v(u,p);return g.btnConfirmText=e,g.btnCancelText=i,g.dialogSize=h,(!g.btnConfirmText||""==g.btnConfirmText||0==g.btnConfirmText.length)&&this.translate.get("ACTION.CONFIRM").subscribe(P=>{g.btnConfirmText=P}),(!g.btnCancelText||""==g.btnCancelText||0==g.btnCancelText.length)&&this.translate.get("ACTION.CANCEL").subscribe(P=>{g.btnCancelText=P}),this.dialog.open(s,{height:"90%",panelClass:this.tokenHelper.isMobile?"dialog-fullscreen":"dialog-min",enterAnimationDuration:d.c.cmsViewConfig.enterAnimationDuration,exitAnimationDuration:d.c.cmsViewConfig.exitAnimationDuration,data:g}).afterClosed().toPromise().then(P=>Promise.resolve(P))}static \u0275fac=function(p){return new(p||E)(o.KVO(t.bZ),o.KVO(O._),o.KVO(m.c$))};static \u0275prov=o.jDH({token:E,factory:E.\u0275fac})}return E})()},4768:(D,C,a)=>{a.d(C,{p:()=>v});var d=a(7788),t=a(9197),s=a(5312),O=a(9722),m=a(8786);let v=(()=>{class _{cmsToastrService;static nextId=0;id=++_.nextId;map$=new d.bkB;zoom$=new d.bkB;options={layers:[(0,t.tileLayer)(s.c.leafletUrl,{opacity:.7,maxZoom:19,detectRetina:!0})],zoom:16,center:[32.684985,51.6359425]};set optonCenter(c){this.map&&c&&c.lat&&c.lon&&0!==c.lat&&0!==c.lon&&this.map.setView(new t.LatLng(c.lat,c.lon),this.zoom)}set optionCurrentPoint(c){this.onActionCurrentPoint(c)}map;zoom;destroy=!1;constructor(c){this.cmsToastrService=c}ngOnInit(){const e=t.icon({iconRetinaUrl:"assets/leaflet/marker-icon-2x.png",iconUrl:"assets/leaflet/marker-icon.png",shadowUrl:"assets/leaflet/marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]});t.Marker.prototype.options.icon=e}ngAfterViewInit(){}ngOnDestroy(){this.map&&(this.map.clearAllEventListeners(),this.destroy=!0)}onMapReady(c){setTimeout(()=>{this.map&&!this.destroy&&c.invalidateSize()},500),this.map=c,this.map$.emit(c),this.zoom=c.getZoom(),this.zoom$.emit(this.zoom)}onMapZoomEnd(c){this.zoom=c.target.getZoom(),this.zoom$.emit(this.zoom)}onActionCurrentPoint(c=!0){this.getPosition().then(u=>{this.map.setView(new t.LatLng(u.lat,u.lon),this.zoom)})}getPosition(){return new Promise((c,u)=>{navigator.geolocation.getCurrentPosition(p=>{c({lon:p.coords.longitude,lat:p.coords.latitude})},p=>{this.cmsToastrService.typeErrorGetPosition()})})}static \u0275fac=function(u){return new(u||_)(d.rXU(O.k))};static \u0275cmp=d.VBU({type:_,selectors:[["app-cms-map"]],inputs:{options:"options",optonCenter:"optonCenter",optionCurrentPoint:"optionCurrentPoint"},outputs:{map$:"map$",zoom$:"zoom$"},decls:1,vars:1,consts:[["leaflet","",1,"map-container",3,"leafletMapReady","leafletMapZoomEnd","leafletOptions"]],template:function(u,p){1&u&&(d.j41(0,"div",0),d.bIt("leafletMapReady",function(i){return p.onMapReady(i)})("leafletMapZoomEnd",function(i){return p.onMapZoomEnd(i)}),d.k0s()),2&u&&d.Y8G("leafletOptions",p.options)},dependencies:[m.V1],styles:[".map-container[_ngcontent-%COMP%]{width:100%;height:300px}"]})}return _})()},7392:(D,C,a)=>{a.d(C,{v:()=>y});var d=a(6809),t=a(7788),o=a(7222),s=a(8189),O=a(965),m=a(8887),v=a(2831),_=a(3527),E=a(9722),c=a(6610),u=a(2497),p=a(8278),e=a(3986),i=a(9344),h=a(6182);const g=["tagInput"];function I(M,R){if(1&M){const r=t.RV6();t.j41(0,"mat-chip",9),t.bIt("removed",function(){const n=t.eBV(r).$implicit,f=t.XpG();return t.Njj(f.remove(n))}),t.EFF(1),t.j41(2,"button",10)(3,"mat-icon"),t.EFF(4,"cancel"),t.k0s()()()}if(2&M){const r=R.$implicit;t.R7$(),t.SpI(" ",r.display," ")}}function S(M,R){if(1&M&&(t.j41(0,"mat-option",11),t.EFF(1),t.k0s()),2&M){const r=R.$implicit;t.Y8G("value",r),t.R7$(),t.SpI(" ",r.display," ")}}let y=(()=>{class M{service;cmsToastrService;static nextId=0;id=++M.nextId;constructor(r,l){this.service=r,this.cmsToastrService=l,this.filteredOptions=this.tagCtrl.valueChanges.pipe((0,O.Z)(null),(0,m.B)(400),(0,v.n)(n=>this.filter(n||"")))}optionDisabled=!1;tagInput;optionPlaceholder="+ Tag";optionLabel="";optionChange=new t.bkB;set optionSelectForce(r){this.onActionSelectForce(r)}tagDataModel=[];tagLastDataModel=[];selectForceStatus=!0;separatorKeysCodes=[d.Fm];tagCtrl=new o.MJ("");filteredOptions;addOnBlur=!0;ngOnInit(){(!this.optionLabel||0==this.optionLabel.length&&this.optionPlaceholder?.length>0)&&(this.optionLabel=this.optionPlaceholder)}filter(r){const l=new s.O2i;l.rowPerPage=20,l.accessLoad=!0;let n=new s.ycK;return n.propertyName="Title",n.value=r,n.searchType=s._GO.Contains,n.clauseType=s.jL_.Or,l.filters.push(n),r&&"number"==typeof+r&&+r>0&&(n=new s.ycK,n.propertyName="Id",n.value=r,n.searchType=s._GO.Equal,n.clauseType=s.jL_.Or,l.filters.push(n)),this.service.ServiceGetAll(l).pipe((0,_.T)(f=>(this.tagLastDataModel=f.listItems.map(T=>({display:T.title,value:T.id})),this.tagLastDataModel)))}checkIndex(r){let l=0,n=-1;return this.tagDataModel.forEach(f=>{f.value==r&&(n=l),l++}),n}add(r){let l;r.value&&this.tagLastDataModel.forEach(n=>{(n.display==r.value||n.value+""==r.value)&&(l=n)}),l&&this.checkIndex(l.value)<0&&(this.tagDataModel.push(l),this.onActionChange()),r.chipInput.clear(),this.tagCtrl.setValue(null)}remove(r){const l=this.checkIndex(r.value);l>=0&&(this.tagDataModel.splice(l,1),this.onActionChange())}selected(r){const l=r.option.value;this.checkIndex(l.value)<0&&this.tagDataModel.push(l),this.tagInput.nativeElement.value="",this.tagCtrl.setValue(null),this.onActionChange()}onActionChange(){const r=[];this.tagDataModel.forEach(l=>{r.findIndex(n=>n==l.value)<0&&r.push(l.value)}),this.selectForceStatus=!1,this.optionChange.emit(r)}onActionSelectForce(r){if(!this.selectForceStatus||!r||0===r.length)return;const l=new s.O2i;r.forEach(n=>{if(n>0){const f=new s.ycK;f.propertyName="Id",f.value=n,f.clauseType=s.jL_.Or,l.filters.push(f)}}),this.service.ServiceGetAll(l).subscribe({next:n=>{n.isSuccess?n.listItems.forEach(f=>{this.tagDataModel.findIndex(T=>T.value==f.id)<0&&this.tagDataModel.push({value:f.id,display:f.title})}):this.cmsToastrService.typeErrorGetAll(n.errorMessage)},error:n=>{this.cmsToastrService.typeErrorGetAll(n)}})}static \u0275fac=function(l){return new(l||M)(t.rXU(s.XFG),t.rXU(E.k))};static \u0275cmp=t.VBU({type:M,selectors:[["app-cms-tag-autocomplete"]],viewQuery:function(l,n){if(1&l&&t.GBs(g,5),2&l){let f;t.mGM(f=t.lsd())&&(n.tagInput=f.first)}},inputs:{optionDisabled:"optionDisabled",optionPlaceholder:"optionPlaceholder",optionLabel:"optionLabel",optionSelectForce:"optionSelectForce"},outputs:{optionChange:"optionChange"},decls:12,vars:12,consts:[["chipList",""],["tagInput",""],["auto","matAutocomplete"],["appearance","fill",2,"width","100%"],["aria-label","tag selection",3,"disabled"],[3,"removed",4,"ngFor","ngForOf"],[3,"matChipInputTokenEnd","placeholder","matChipInputAddOnBlur","formControl","matAutocomplete","matChipInputFor","matChipInputSeparatorKeyCodes"],[3,"optionSelected"],[3,"value",4,"ngFor","ngForOf"],[3,"removed"],["type","button","matChipRemove","",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-gray"],[3,"value"]],template:function(l,n){if(1&l){const f=t.RV6();t.j41(0,"mat-form-field",3)(1,"mat-label"),t.EFF(2),t.k0s(),t.j41(3,"mat-chip-grid",4,0),t.DNE(5,I,5,1,"mat-chip",5),t.j41(6,"input",6,1),t.bIt("matChipInputTokenEnd",function(b){return t.eBV(f),t.Njj(n.add(b))}),t.k0s()(),t.j41(8,"mat-autocomplete",7,2),t.bIt("optionSelected",function(b){return t.eBV(f),t.Njj(n.selected(b))}),t.DNE(10,S,2,2,"mat-option",8),t.nI1(11,"async"),t.k0s()()}if(2&l){const f=t.sdS(4),T=t.sdS(9);t.R7$(2),t.JRh(n.optionLabel),t.R7$(),t.Y8G("disabled",n.optionDisabled),t.R7$(2),t.Y8G("ngForOf",n.tagDataModel),t.R7$(),t.Y8G("placeholder"," + "+n.optionPlaceholder)("matChipInputAddOnBlur",n.addOnBlur)("formControl",n.tagCtrl)("matAutocomplete",T)("matChipInputFor",f)("matChipInputSeparatorKeyCodes",n.separatorKeysCodes),t.R7$(4),t.Y8G("ngForOf",t.bMT(11,10,n.filteredOptions))}},dependencies:[c.Sq,o.me,o.BC,o.l_,u.$3,p.wT,u.pN,e.Jl,e.HW,e.D7,e.Zv,i.rl,i.nJ,h.An,c.Jj],encapsulation:2})}return M})()}}]);