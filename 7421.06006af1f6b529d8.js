"use strict";(self.webpackChunkntk_cms_web=self.webpackChunkntk_cms_web||[]).push([[7421],{3438:(p,_,n)=>{n.d(_,{x:()=>b});var h=n(3308),m=n(6610),t=n(8189),a=n(7788),v=n(5154),l=n(9722);let b=(()=>{class o{constructor(e,s,r,i,g,E){this.elRef=e,this.renderer=s,this.publicHelper=r,this.cmsToastrService=i,this.cdr=g,this.document=E,this.DataEnumRecordStatus()}DataEnumRecordStatus(){var e=this;return(0,h.A)(function*(){(yield e.publicHelper.getEnumRecordStatus()).listItems.forEach(r=>{const i=document.createElement("option");i.innerHTML=" "+r.title+' <i Class="'+e.iconStatus(r.value)+'"></i>',i.value=r.value.toString(),e.elRef.nativeElement.add(i)}),e.elRef.nativeElement.options.length>0&&e.row&&e.row.recordStatus&&e.renderer.setProperty(e.elRef.nativeElement,"value",e.row.recordStatus)})()}onChange(){const e=this.elRef.nativeElement,s=e.value;this.addLoader(e),this.contentService.setAccessDataType(t.FYP.Editor),this.contentService.ServiceSetStatus(this.row.id,s).subscribe({next:r=>{r.isSuccess?(this.handleSuccessCase(e),this.cmsToastrService.typeSuccessSetStatus(r.errorMessage),this.row.recordStatus=0|s,this.cdr.markForCheck()):(this.renderer.setProperty(this.elRef.nativeElement,"value",this.row.recordStatus),this.cmsToastrService.typeErrorSetStatus(r.errorMessage),this.handleErrorCase(e))},error:r=>{this.renderer.setProperty(this.elRef.nativeElement,"value",this.row.recordStatus),this.cmsToastrService.typeError(r),this.handleErrorCase(e)}})}handleSuccessCase(e){this.removeBackground(e),this.addSuccess(e),setTimeout(()=>{this.removeBackground(e)},1e3)}handleErrorCase(e){this.removeBackground(e);const s=this.document.createElement("img");s.style.width="20px",s.src="https://www.seekpng.com/png/detail/334-3345964_error-icon-download-attention-symbol.png";const r=this.renderer.parentNode(this.elRef.nativeElement);this.renderer.appendChild(r,s),setTimeout(()=>{this.renderer.removeChild(r,s)},1e3)}addLoader(e){this.addBackground(e,"https://replit.com/public/images/loading_dots.gif",20)}addSuccess(e){this.addBackground(e,"https://i.pinimg.com/originals/7b/dd/1b/7bdd1bc7db7fd48025d4e39a0e2f0fd8.jpg",20)}addBackground(e,s,r){e.style.background=`#fff url("${s}") no-repeat right 20px center`,e.style.backgroundSize=`${r}px`}removeBackground(e){e.style.background="none"}iconStatus(e){let s="";switch(e){case 1:default:s="fa fa-check";break;case 2:s="fa fa-eye-slash";break;case 3:s="fa fa-times";break;case 4:s="fa fa-hourglass-half";break;case 5:s="far fa-thumbs-down";break;case 6:s="fa fa-archive"}return s}static#e=this.\u0275fac=function(s){return new(s||o)(a.rXU(a.aKT),a.rXU(a.sFG),a.rXU(v.A),a.rXU(l.k),a.rXU(a.gRc),a.rXU(m.qQ))};static#t=this.\u0275dir=a.FsC({type:o,selectors:[["","cmsRecordStatusSelfSave",""]],hostBindings:function(s,r){1&s&&a.bIt("change",function(){return r.onChange()})},inputs:{row:"row",contentService:"contentService"}})}return o})()},1268:(p,_,n)=>{n.d(_,{M:()=>t});var h=n(7788),m=n(6098);let t=(()=>{class a{constructor(l){this.sanitizer=l}transform(l){return"cms-RecordStatusEnum-cell-"+l}static#e=this.\u0275fac=function(f){return new(f||a)(h.rXU(m.up,16))};static#t=this.\u0275pipe=h.EJ8({name:"statusCellClass",type:a,pure:!0})}return a})()},6381:(p,_,n)=>{n.d(_,{T:()=>t});var h=n(7788),m=n(6098);let t=(()=>{class a{constructor(l){this.sanitizer=l}transform(l,f=!1){let u="";switch(l){case 1:default:u="fa fa-check";break;case 2:u="fa fa-times";break;case 3:u="fa fa-trash";break;case 4:u="fa fa-hourglass-half";break;case 5:u="far fa-thumbs-down";break;case 6:u="fa fa-archive"}return u}static#e=this.\u0275fac=function(f){return new(f||a)(h.rXU(m.up,16))};static#t=this.\u0275pipe=h.EJ8({name:"statusIconClass",type:a,pure:!0})}return a})()},5459:(p,_,n)=>{n.d(_,{o:()=>u});var h=n(5312),m=n(6482),t=n(7788);let a=(()=>{class c{static#e=this.nextId=0;constructor(o,d){this.dialogRef=o,this.data=d,this.id=++c.nextId,d||this.dialogRef.close(!1)}ngOnInit(){}onDismiss(){this.dialogRef.close(!1)}onConfirm(){this.dialogRef.close(!0)}static#t=this.\u0275fac=function(d){return new(d||c)(t.rXU(m.CP),t.rXU(m.Vh))};static#s=this.\u0275cmp=t.VBU({type:c,selectors:[["app-confirmation-dialog"]],decls:18,vars:4,consts:[[1,"menu","menu-box-modal","rounded-m","menu-active",2,"display","block","width","350px","height","320px","padding","20px"],[1,"menu-title"],[1,"fa","fa-question-circle","scale-box","float-start","me-3","ms-3","fa-3x","mt-1","color-blue-dark"],[1,"color-highlight"],[1,"font-20"],[1,"close-menu",3,"click"],[1,"fa","fa-times-circle"],[1,"content","mt-0"],[1,"pe-3",3,"innerHTML"],[1,"row","mb-0"],[1,"col-6"],[1,"btn","close-menu","btn-full","btn-m","bg-red-dark","font-600","rounded-s",3,"click"],[1,"btn","close-menu","btn-full","btn-m","bg-green-dark","font-600","rounded-s",3,"click"]],template:function(d,e){1&d&&(t.j41(0,"div",0)(1,"div",1),t.nrm(2,"i",2),t.j41(3,"p",3),t.EFF(4),t.k0s(),t.j41(5,"h1",4),t.EFF(6,"\u0645\u0637\u0645\u0626\u0646\u06cc\u062f\u061f"),t.k0s(),t.j41(7,"a",5),t.bIt("click",function(){return e.onDismiss()}),t.nrm(8,"i",6),t.k0s()(),t.j41(9,"div",7),t.nrm(10,"p",8),t.j41(11,"div",9)(12,"div",10)(13,"a",11),t.bIt("click",function(){return e.onDismiss()}),t.EFF(14),t.k0s()(),t.j41(15,"div",10)(16,"a",12),t.bIt("click",function(){return e.onConfirm()}),t.EFF(17),t.k0s()()()()()),2&d&&(t.R7$(4),t.SpI(" ",e.data.title,""),t.R7$(6),t.Y8G("innerHTML",e.data.message,t.npT),t.R7$(4),t.JRh(e.data.btnCancelText),t.R7$(3),t.JRh(e.data.btnConfirmText))},encapsulation:2})}return c})();var v=n(8339),l=n(2882);class f{constructor(b,o){this.title=b,this.message=o,this.btnConfirmText="OK",this.btnCancelText="Cancel",this.dialogSize="sm"}}let u=(()=>{class c{constructor(o,d,e){this.dialog=o,this.tokenHelper=d,this.translate=e}confirm(o,d,e="",s="",r="sm"){const i=new f(o,d);return i.btnConfirmText=e,i.btnCancelText=s,i.dialogSize=r,(!i.btnConfirmText||""==i.btnConfirmText||0==i.btnConfirmText.length)&&this.translate.get("ACTION.CONFIRM").subscribe(C=>{i.btnConfirmText=C}),(!i.btnCancelText||""==i.btnCancelText||0==i.btnCancelText.length)&&this.translate.get("ACTION.CANCEL").subscribe(C=>{i.btnCancelText=C}),this.dialog.open(a,{height:"90%",panelClass:this.tokenHelper.isMobile?"dialog-fullscreen":"dialog-min",enterAnimationDuration:h.c.cmsViewConfig.enterAnimationDuration,exitAnimationDuration:h.c.cmsViewConfig.exitAnimationDuration,data:i}).afterClosed().toPromise().then(C=>Promise.resolve(C))}static#e=this.\u0275fac=function(d){return new(d||c)(t.KVO(m.bZ),t.KVO(v._),t.KVO(l.c$))};static#t=this.\u0275prov=t.jDH({token:c,factory:c.\u0275fac})}return c})()}}]);