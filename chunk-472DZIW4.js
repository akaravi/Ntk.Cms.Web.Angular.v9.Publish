import{a as ye,b as vt}from"./chunk-A3GFHP2Z.js";import{c as Rt}from"./chunk-JQ6FMMQ2.js";import"./chunk-OPVT5PCC.js";import{a as wt}from"./chunk-CCM6MSBV.js";import{a as Et}from"./chunk-Z73HI3RK.js";import{a as yt}from"./chunk-KCWJU2FN.js";import{b as It}from"./chunk-JIA442GJ.js";import{a as Me}from"./chunk-GOFXWPFA.js";import{Ad as St,Cc as ut,Gd as Mt,L as de,La as me,Lc as he,M as pe,Ma as ue,Na as He,O as Oe,Oc as ft,P as Pe,Sc as gt,Ta as je,Tc as _t,Ub as Ye,Vb as Ze,Wa as z,Wb as $e,Xb as et,Yb as tt,Zb as it,aa as ce,bd as Ce,cd as Se,ec as ot,fc as nt,gc as rt,hc as lt,hd as ht,ic as at,jc as st,kc as dt,lb as ge,lc as pt,mb as Qe,mc as ct,nb as Q,nc as mt,p as re,s as H,sa as Ne,sb as Xe,t as le,tb as J,td as Ct,v as ae,vb as _e,x as j,y as se}from"./chunk-URAKMKIW.js";import{b as q,c as U,p as Je}from"./chunk-7SV2XIXB.js";import{Cd as ze,Db as ie,Dc as Ve,Dd as V,Eb as oe,Fb as ne,Hd as we,Ia as te,Ib as L,Id as Re,Jd as fe,Kb as c,La as l,Lb as b,Lc as Be,Ma as M,Mb as S,Qb as I,Qd as K,Rb as w,Sb as R,Vb as xe,Vd as Ke,Wb as Le,Wd as B,Yb as h,Za as W,Zb as C,_b as ke,ab as E,aq as Z,cb as g,da as $,eb as Te,fd as We,gc as G,hd as Ge,ja as P,ka as ee,kd as Ie,lb as a,mb as s,nb as v,ob as T,pb as A,qb as Ae,ra as m,rb as F,sa as u,sf as D,td as qe,ub as y,vd as Y,wb as _,xc as De,zb as x,zc as N,zd as Ue}from"./chunk-NMN6ZWD3.js";var Qt=["vform"];function Jt(o,d){if(o&1){let r=F();a(0,"app-cms-enum-record-status-selector",28),R("modelChange",function(t){m(r);let e=_();return w(e.dataModel.recordStatus,t)||(e.dataModel.recordStatus=t),u(t)}),s()}if(o&2){let r=_();I("model",r.dataModel.recordStatus),g("optionDisabled",!1)("optionLabel",r.fieldsInfo.recordStatus==null?null:r.fieldsInfo.recordStatus.fieldTitle)("optionRequired",!0)("optionSelectFirstItem",!0)}}function Xt(o,d){if(o&1&&(a(0,"mat-error"),c(1),a(2,"strong"),c(3),h(4,"translate"),s()()),o&2){let r=_();l(),S(" ",r.fieldsInfo.title==null?null:r.fieldsInfo.title.fieldTitle," is "),l(2),b(C(4,2,"MESSAGE.required"))}}function Yt(o,d){o&1&&(a(0,"mat-error"),c(1," TitleResourceLanguage is "),a(2,"strong"),c(3),h(4,"translate"),s()()),o&2&&(l(3),b(C(4,1,"MESSAGE.required")))}function Zt(o,d){if(o&1){let r=F();a(0,"app-cms-enum-x-selector",29),R("modelChange",function(t){m(r);let e=_();return w(e.dataModel.reportFileType,t)||(e.dataModel.reportFileType=t),u(t)}),s()}if(o&2){let r=_();g("optionDataListResult",r.dataModelReportFileTypeEnumResult),I("model",r.dataModel.reportFileType),g("optionDisabled",!1)("optionLabel",r.fieldsInfo.reportFileType==null?null:r.fieldsInfo.reportFileType.fieldTitle)("optionRequired",!0)("optionSelectFirstItem",!0)}}function $t(o,d){o&1&&(a(0,"mat-error"),c(1," Description is "),a(2,"strong"),c(3),h(4,"translate"),s()()),o&2&&(l(3),b(C(4,1,"MESSAGE.required")))}function ei(o,d){if(o&1&&(v(0,"img",30),h(1,"cmsthumbnail")),o&2){let r=_();x("src",C(1,1,r.dataModel.linkImageIdSrc),te)}}function ti(o,d){if(o&1){let r=F();a(0,"div",12)(1,"label",31),y("click",function(){m(r);let t=_();return u(t.fileManagerOpenForm=!0)}),c(2),h(3,"translate"),s(),a(4,"input",32,5),h(6,"translate"),R("ngModelChange",function(t){m(r);let e=_();return w(e.dataModel.linkImageId,t)||(e.dataModel.linkImageId=t),u(t)}),y("click",function(){m(r);let t=_();return u(t.fileManagerOpenForm=!0)}),s(),a(7,"cms-file-manager",33),y("itemSelected",function(t){m(r);let e=_();return u(e.onActionFileSelected(t))}),R("openFormChange",function(t){m(r);let e=_();return w(e.fileManagerOpenForm,t)||(e.fileManagerOpenForm=t),u(t)}),s()()}if(o&2){let r=_();l(2),b(C(3,11,"TITLE.Original_File_ID")),l(2),x("placeholder",C(6,13,"TITLE.Icon_File_ID")),I("ngModel",r.dataModel.linkImageId),l(3),g("language",r.appLanguage)("isPopup",!0),I("openForm",r.fileManagerOpenForm),g("tree",r.fileManagerTree)("openFilemanagerButtonLabelKey","select")("openDirectUploadView",!0)("selectFileType",r.selectFileTypeMainImage)("openFilemanagerButtonView",!1)}}function ii(o,d){if(o&1){let r=F();a(0,"div",34)(1,"button",35),y("click",function(){m(r);let t=_();return u(t.onFormCancel())}),v(2,"i",36),c(3),h(4,"translate"),s(),a(5,"button",37),v(6,"i",38),c(7),h(8,"translate"),s()()}if(o&2){_();let r=L(9);l(3),S(" ",C(4,3,"ACTION.CANCEL")," "),l(2),g("disabled",!r.form.valid),l(2),S(" ",C(8,5,"ACTION.SAVE")," ")}}var Vt=(()=>{let d=class d extends yt{constructor(i,t,e,p,f,n,k,O){super(p,new D,n,O),this.data=i,this.dialogRef=t,this.coreEnumService=e,this.coreModuleEntityReportFileService=p,this.cmsToastrService=f,this.publicHelper=n,this.cdr=k,this.translate=O,this.constructorInfoAreaId=this.constructor.name,this.fieldsInfo=new Map,this.selectFileTypeMainImage=["jpg","jpeg","png"],this.selectFileTypeReport=["mrt"],this.appLanguage="fa",this.dataModelResult=new V,this.dataModel=new D,this.dataModelReportFileTypeEnumResult=new V,this.formInfo=new fe,this.fileManagerOpenForm=!1,this.fileManagerOpenFormReport=!1,this.publicHelper.processService.cdr=this.cdr,this.fileManagerTree=this.publicHelper.GetfileManagerTreeConfig(),i&&i.linkModuleEntityId&&(this.dataModel.linkModuleEntityId=i.linkModuleEntityId)}ngOnInit(){this.translate.get("TITLE.ADD").subscribe(i=>{this.formInfo.formTitle=i}),this.DataGetAccess(),this.getReportFileTypeEnum()}getReportFileTypeEnum(){this.coreEnumService.ServiceReportFileTypeEnum().subscribe({next:i=>{this.dataModelReportFileTypeEnumResult=i}})}DataAddContent(){this.translate.get("MESSAGE.sending_information_to_the_server").subscribe(t=>{this.formInfo.formAlert=t}),this.formInfo.formError="";let i=this.constructor.name+"main";this.translate.get("MESSAGE.Receiving_information").subscribe(t=>{this.publicHelper.processService.processStart(i,t,this.constructorInfoAreaId)}),this.coreModuleEntityReportFileService.ServiceAdd(this.dataModel).subscribe({next:t=>{this.formInfo.formSubmitAllow=!0,this.dataModelResult=t,t.isSuccess?(this.translate.get("MESSAGE.registration_completed_successfully").subscribe(e=>{this.formInfo.formAlert=e}),this.cmsToastrService.typeSuccessAdd(),this.dialogRef.close({dialogChangedDate:!0})):(this.translate.get("ERRORMESSAGE.MESSAGE.typeError").subscribe(e=>{this.formInfo.formAlert=e}),this.formInfo.formError=t.errorMessage,this.cmsToastrService.typeErrorMessage(t.errorMessage)),this.publicHelper.processService.processStop(i)},error:t=>{this.formInfo.formSubmitAllow=!0,this.cmsToastrService.typeError(t),this.publicHelper.processService.processStop(i,!1)}})}onActionSelectorModuleEntitySelect(i){this.dataModel.linkModuleEntityId=null,i&&i.id>0&&(this.dataModel.linkModuleEntityId=i.id)}onActionFileSelected(i){this.dataModel.linkImageId=i.id,this.dataModel.linkImageIdSrc=i.downloadLinksrc}onActionFileSelectedLinkFileId(i){this.dataModel.linkFileId=i.id,this.dataModel.linkFileIdSrc=i.downloadLinksrc}onFormSubmit(){this.formGroup.valid&&(this.formInfo.formSubmitAllow=!1,this.DataAddContent())}onFormCancel(){this.dialogRef.close({dialogChangedDate:!1})}};d.\u0275fac=function(t){return new(t||d)(M(ue),M(me),M(K),M(B),M(Q),M(J),M(G),M(q))},d.\u0275cmp=P({type:d,selectors:[["app-core-module-entity-report-file-add"]],viewQuery:function(t,e){if(t&1&&ie(Qt,5),t&2){let p;oe(p=ne())&&(e.formGroup=p.first)}},features:[W],decls:48,vars:42,consts:[["vform","ngForm"],["Title",""],["TitleResourceLanguage",""],["Description",""],["LinkFileId",""],["LinkImageId",""],[1,"card","card-style","loader-container"],[3,"optionsInfoAreaId"],[1,"content","mb-0"],[1,"mb-0","color-highlight","font-600","font-12"],[3,"ngSubmit"],[3,"model","optionDisabled","optionLabel","optionRequired","optionSelectFirstItem","modelChange",4,"ngIf"],[1,"input-style","has-borders","no-icon","input-style-always-active","validate-field","mb-4"],["for","dataModel.title",1,"color-highlight"],["matInput","","type","text","name","dataModel.title","minlength","3","maxlength","100","id","dataModel.title",1,"form-control","validate-name",3,"ngModelChange","ngModel","placeholder"],[4,"ngIf"],["for","dataModel.titleResourceLanguage",1,"color-highlight"],["matInput","","type","text","name","dataModel.titleResourceLanguage","minlength","3","maxlength","100","id","dataModel.titleResourceLanguage",1,"form-control","validate-name",3,"ngModelChange","ngModel","placeholder"],[3,"optionChange","optionDisabled","optionSelectForce","optionPlaceholder"],[3,"optionDataListResult","model","optionDisabled","optionLabel","optionRequired","optionSelectFirstItem","modelChange",4,"ngIf"],["for","dataModel.description",1,"color-highlight"],["matInput","","name","dataModel.description","type","text","minlength","1","maxlength","500","rows","5","id","dataModel.description",1,"form-control","validate-name",3,"ngModelChange","ngModel","placeholder"],[1,"mb-3"],["style","vertical-align:middle;","class","ntk-hover-zoom","aria-hidden","","height","50","width","50",3,"src",4,"ngIf"],["class","input-style has-borders no-icon input-style-always-active validate-field mb-4",4,"ngIf"],["matInput","","type","text","name","dataModel.linkFileId","autocomplete","off","id","dataModel.linkFileId",1,"form-control","validate-name",3,"ngModelChange","click","ngModel","placeholder"],[3,"itemSelected","openFormChange","language","isPopup","openForm","tree","openDirectUploadView","openFilemanagerButtonLabelKey","selectFileType","openFilemanagerButtonView"],["class","form-actions",4,"ngIf"],[3,"modelChange","model","optionDisabled","optionLabel","optionRequired","optionSelectFirstItem"],[3,"modelChange","optionDataListResult","model","optionDisabled","optionLabel","optionRequired","optionSelectFirstItem"],["aria-hidden","","height","50","width","50",1,"ntk-hover-zoom",2,"vertical-align","middle",3,"src"],["for","dataModel.linkImageId",1,"color-highlight",3,"click"],["matInput","","type","text","name","dataModel.linkImageId","autocomplete","off","id","dataModel.linkImageId",1,"form-control","validate-name",3,"ngModelChange","click","ngModel","placeholder"],[3,"itemSelected","openFormChange","language","isPopup","openForm","tree","openFilemanagerButtonLabelKey","openDirectUploadView","selectFileType","openFilemanagerButtonView"],[1,"form-actions"],["type","button",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-gray",3,"click"],[1,"ft-x"],["type","submit",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-green",3,"disabled"],[1,"fa","fa-check-square-o"]],template:function(t,e){if(t&1){let p=F();a(0,"div",6),v(1,"app-progress-spinner",7),a(2,"div",8)(3,"p",9),c(4),s(),a(5,"p"),c(6),h(7,"translate"),s(),a(8,"form",10,0),y("ngSubmit",function(){return m(p),u(e.onFormSubmit())}),E(10,Jt,1,5,"app-cms-enum-record-status-selector",11),a(11,"div",12)(12,"label",13),c(13),s(),a(14,"input",14,1),R("ngModelChange",function(n){return m(p),w(e.dataModel.title,n)||(e.dataModel.title=n),u(n)}),s(),a(16,"em"),c(17),s(),E(18,Xt,5,4,"mat-error",15),s(),a(19,"div",12)(20,"label",16),c(21),s(),a(22,"input",17,2),R("ngModelChange",function(n){return m(p),w(e.dataModel.titleResourceLanguage,n)||(e.dataModel.titleResourceLanguage=n),u(n)}),s(),a(24,"em"),c(25),s(),E(26,Yt,5,3,"mat-error",15),s(),a(27,"app-core-module-entity-selector",18),h(28,"translate"),y("optionChange",function(n){return m(p),u(e.onActionSelectorModuleEntitySelect(n))}),s(),E(29,Zt,1,6,"app-cms-enum-x-selector",19),a(30,"div",12)(31,"label",20),c(32),s(),a(33,"textarea",21,3),R("ngModelChange",function(n){return m(p),w(e.dataModel.description,n)||(e.dataModel.description=n),u(n)}),c(35,"          "),s(),a(36,"em"),c(37),s(),E(38,$t,5,3,"mat-error",15),s(),a(39,"div",22),E(40,ei,2,3,"img",23),s(),E(41,ti,8,15,"div",24),a(42,"div",12)(43,"input",25,4),h(45,"translate"),R("ngModelChange",function(n){return m(p),w(e.dataModel.linkFileId,n)||(e.dataModel.linkFileId=n),u(n)}),y("click",function(){return m(p),u(e.fileManagerOpenFormReport=!0)}),s(),a(46,"cms-file-manager",26),y("itemSelected",function(n){return m(p),u(e.onActionFileSelectedLinkFileId(n))}),R("openFormChange",function(n){return m(p),w(e.fileManagerOpenFormReport,n)||(e.fileManagerOpenFormReport=n),u(n)}),s()(),E(47,ii,9,7,"div",27),s()()()}if(t&2){let p=L(15),f=L(23),n=L(34);l(),g("optionsInfoAreaId",e.constructorInfoAreaId),l(3),S(" ",e.formInfo.formTitle," "),l(2),S(" ",C(7,36,"TITLE.Be_Careful_When_Entering_Information")," "),l(4),g("ngIf",e.fieldsInfo.recordStatus==null?null:e.fieldsInfo.recordStatus.accessWatchField),l(3),b(e.fieldsInfo.title==null?null:e.fieldsInfo.title.fieldTitle),l(),x("placeholder",e.fieldsInfo.title==null?null:e.fieldsInfo.title.fieldTitle),I("ngModel",e.dataModel.title),l(3),S("",p.value.length," / 100"),l(),g("ngIf",p.errors==null?null:p.errors.required),l(3),b(e.fieldsInfo.titleResourceLanguage==null?null:e.fieldsInfo.titleResourceLanguage.fieldTitle),l(),x("placeholder",e.fieldsInfo.titleResourceLanguage==null?null:e.fieldsInfo.titleResourceLanguage.fieldTitle),I("ngModel",e.dataModel.titleResourceLanguage),l(3),S("",f.value.length," / 100"),l(),g("ngIf",f.errors==null?null:f.errors.required),l(),g("optionDisabled",!(e.fieldsInfo.linkModuleEntityId!=null&&e.fieldsInfo.linkModuleEntityId.accessEditField))("optionSelectForce",e.dataModel.linkModuleEntityId)("optionPlaceholder",C(28,38,"TITLE.MODULE_ENTITY")),l(2),g("ngIf",e.fieldsInfo.reportFileType==null?null:e.fieldsInfo.reportFileType.accessWatchField),l(3),b(e.fieldsInfo.description==null?null:e.fieldsInfo.description.fieldTitle),l(),x("placeholder",e.fieldsInfo.description==null?null:e.fieldsInfo.description.fieldTitle),I("ngModel",e.dataModel.description),l(4),S("",n.value.length," / 500"),l(),g("ngIf",n.errors==null?null:n.errors.required),l(2),g("ngIf",(e.dataModel==null||e.dataModel.linkImageIdSrc==null?null:e.dataModel.linkImageIdSrc.length)>0),l(),g("ngIf",e.fieldsInfo.linkImageId==null?null:e.fieldsInfo.linkImageId.accessWatchField),l(2),x("placeholder",C(45,40,"TITLE.Report_File_ID")),I("ngModel",e.dataModel.linkFileId),l(3),g("language",e.appLanguage)("isPopup",!0),I("openForm",e.fileManagerOpenFormReport),g("tree",e.fileManagerTree)("openDirectUploadView",!0)("openFilemanagerButtonLabelKey","select")("selectFileType",e.selectFileTypeReport)("openFilemanagerButtonView",!1),l(),g("ngIf",e.formInfo.formSubmitAllow)}},dependencies:[N,se,re,H,le,de,pe,j,ae,ce,z,Ce,Se,_e,ye,ge,U,he],styles:[".form-body[_ngcontent-%COMP%]{width:500px}@media (max-width: 700px){.form-body[_ngcontent-%COMP%]{display:contents}}#file-manager[_ngcontent-%COMP%]{width:calc(100vw - 16px);height:calc(100vh - 16px)}.recordStatus-1.mat-select-panel[_ngcontent-%COMP%]{background:#ff0}.recordStatus-2.mat-select-panel[_ngcontent-%COMP%]{background:#000}.recordStatus-3.mat-select-panel[_ngcontent-%COMP%]{background:red}"]});let o=d;return o})();var oi=["vform"];function ni(o,d){if(o&1){let r=F();a(0,"app-cms-enum-record-status-selector",30),R("modelChange",function(t){m(r);let e=_();return w(e.dataModel.recordStatus,t)||(e.dataModel.recordStatus=t),u(t)}),s()}if(o&2){let r=_();I("model",r.dataModel.recordStatus),g("optionDisabled",!1)("optionLabel",r.fieldsInfo.recordStatus==null?null:r.fieldsInfo.recordStatus.fieldTitle)("optionRequired",!0)("optionSelectFirstItem",!0)}}function ri(o,d){if(o&1&&(a(0,"mat-error"),c(1),a(2,"strong"),c(3),h(4,"translate"),s()()),o&2){let r=_();l(),S(" ",r.fieldsInfo.title==null?null:r.fieldsInfo.title.fieldTitle," is "),l(2),b(C(4,2,"MESSAGE.required"))}}function li(o,d){o&1&&(a(0,"mat-error"),c(1," TitleResourceLanguage is "),a(2,"strong"),c(3),h(4,"translate"),s()()),o&2&&(l(3),b(C(4,1,"MESSAGE.required")))}function ai(o,d){if(o&1){let r=F();a(0,"app-cms-enum-x-selector",31),R("modelChange",function(t){m(r);let e=_();return w(e.dataModel.reportFileType,t)||(e.dataModel.reportFileType=t),u(t)}),s()}if(o&2){let r=_();g("optionDataListResult",r.dataModelReportFileTypeEnumResult),I("model",r.dataModel.reportFileType),g("optionDisabled",!1)("optionLabel",r.fieldsInfo.reportFileType==null?null:r.fieldsInfo.reportFileType.fieldTitle)("optionRequired",!0)("optionSelectFirstItem",!0)}}function si(o,d){o&1&&(a(0,"mat-error"),c(1," Description is "),a(2,"strong"),c(3),h(4,"translate"),s()()),o&2&&(l(3),b(C(4,1,"MESSAGE.required")))}function di(o,d){if(o&1&&(v(0,"img",32),h(1,"cmsthumbnail")),o&2){let r=_();x("src",C(1,1,r.dataModel.linkImageIdSrc),te)}}function pi(o,d){if(o&1){let r=F();a(0,"div",12)(1,"label",33),y("click",function(){m(r);let t=_();return u(t.fileManagerOpenForm=!0)}),c(2),h(3,"translate"),s(),a(4,"input",34,5),h(6,"translate"),R("ngModelChange",function(t){m(r);let e=_();return w(e.dataModel.linkImageId,t)||(e.dataModel.linkImageId=t),u(t)}),y("click",function(){m(r);let t=_();return u(t.fileManagerOpenForm=!0)}),s(),a(7,"cms-file-manager",35),y("itemSelected",function(t){m(r);let e=_();return u(e.onActionFileSelected(t))}),R("openFormChange",function(t){m(r);let e=_();return w(e.fileManagerOpenForm,t)||(e.fileManagerOpenForm=t),u(t)}),s()()}if(o&2){let r=_();l(2),b(C(3,11,"TITLE.Icon_File")),l(2),x("placeholder",C(6,13,"TITLE.Original_File_ID")),I("ngModel",r.dataModel.linkImageId),l(3),g("language",r.appLanguage)("isPopup",!0),I("openForm",r.fileManagerOpenForm),g("tree",r.fileManagerTree)("openFilemanagerButtonLabelKey","select")("openDirectUploadView",!0)("selectFileType",r.selectFileTypeMainImage)("openFilemanagerButtonView",!1)}}function ci(o,d){if(o&1){let r=F();a(0,"div",36)(1,"button",37),y("click",function(){m(r);let t=_();return u(t.onFormCancel())}),v(2,"i",38),c(3),h(4,"translate"),s(),a(5,"button",39),v(6,"i",40),c(7),h(8,"translate"),s()()}if(o&2){_();let r=L(9);l(3),S(" ",C(4,3,"ACTION.CANCEL")," "),l(2),g("disabled",!r.form.valid),l(2),S(" ",C(8,5,"ACTION.SAVE")," ")}}var Bt=(()=>{let d=class d extends Et{constructor(i,t,e,p,f,n,k,O){super(p,new D,n,O),this.data=i,this.dialogRef=t,this.coreEnumService=e,this.coreModuleEntityReportFileService=p,this.cmsToastrService=f,this.publicHelper=n,this.cdr=k,this.translate=O,this.requestId="",this.constructorInfoAreaId=this.constructor.name,this.selectFileTypeMainImage=["jpg","jpeg","png"],this.selectFileTypeReport=["mrt"],this.appLanguage="fa",this.dataModelResult=new ze,this.dataModel=new D,this.dataModelReportFileTypeEnumResult=new V,this.formInfo=new fe,this.fileManagerOpenForm=!1,this.fileManagerOpenFormReport=!1,this.publicHelper.processService.cdr=this.cdr,i&&i.id&&(this.requestId=i.id),this.fileManagerTree=this.publicHelper.GetfileManagerTreeConfig()}ngOnInit(){if(this.requestId.length>0)this.translate.get("TITLE.Edit").subscribe(i=>{this.formInfo.formTitle=i}),this.DataGetOneContent();else{this.cmsToastrService.typeErrorComponentAction(),this.dialogRef.close({dialogChangedDate:!1});return}this.getReportFileTypeEnum()}getReportFileTypeEnum(){this.coreEnumService.ServiceReportFileTypeEnum().subscribe({next:i=>{this.dataModelReportFileTypeEnumResult=i}})}DataGetOneContent(){this.translate.get("MESSAGE.Receiving_Information_From_The_Server").subscribe(t=>{this.formInfo.formAlert=t}),this.formInfo.formError="";let i=this.constructor.name+"main";this.translate.get("MESSAGE.Receiving_information").subscribe(t=>{this.publicHelper.processService.processStart(i,t,this.constructorInfoAreaId)}),this.coreModuleEntityReportFileService.setAccessLoad(),this.coreModuleEntityReportFileService.setAccessDataType(Ue.Editor),this.coreModuleEntityReportFileService.ServiceGetOneById(this.requestId).subscribe({next:t=>{this.dataModel=t.item,this.fieldsInfo=this.publicHelper.fieldInfoConvertor(t.access),t.isSuccess?(this.formInfo.formTitle=this.formInfo.formTitle+" "+t.item.id,this.formInfo.formAlert=""):(this.translate.get("ERRORMESSAGE.MESSAGE.typeError").subscribe(e=>{this.formInfo.formAlert=e}),this.formInfo.formError=t.errorMessage,this.cmsToastrService.typeErrorMessage(t.errorMessage)),this.publicHelper.processService.processStop(i)},error:t=>{this.cmsToastrService.typeError(t),this.publicHelper.processService.processStop(i,!1)}})}DataEditContent(){this.translate.get("MESSAGE.sending_information_to_the_server").subscribe(t=>{this.formInfo.formAlert=t}),this.formInfo.formError="";let i=this.constructor.name+"main";this.translate.get("MESSAGE.sending_information_to_the_server").subscribe(t=>{this.publicHelper.processService.processStart(i,t,this.constructorInfoAreaId)}),this.coreModuleEntityReportFileService.ServiceEdit(this.dataModel).subscribe({next:t=>{this.formInfo.formSubmitAllow=!0,this.dataModelResult=t,t.isSuccess?(this.translate.get("MESSAGE.registration_completed_successfully").subscribe(e=>{this.formInfo.formAlert=e}),this.cmsToastrService.typeSuccessEdit(),this.dialogRef.close({dialogChangedDate:!0})):(this.translate.get("ERRORMESSAGE.MESSAGE.typeError").subscribe(e=>{this.formInfo.formAlert=e}),this.formInfo.formError=t.errorMessage,this.cmsToastrService.typeErrorMessage(t.errorMessage)),this.publicHelper.processService.processStop(i)},error:t=>{this.formInfo.formSubmitAllow=!0,this.cmsToastrService.typeError(t),this.publicHelper.processService.processStop(i,!1)}})}onActionSelectorModuleEntitySelect(i){this.dataModel.linkModuleEntityId=null,i&&i.id>0&&(this.dataModel.linkModuleEntityId=i.id)}onActionFileSelectedLinkFileId(i){this.dataModel.linkFileId=i.id,this.dataModel.linkFileIdSrc=i.downloadLinksrc}onActionFileSelected(i){this.dataModel.linkImageId=i.id,this.dataModel.linkImageIdSrc=i.downloadLinksrc}onFormSubmit(){this.formGroup.valid&&(this.formInfo.formSubmitAllow=!1,this.DataEditContent())}onFormCancel(){this.dialogRef.close({dialogChangedDate:!1})}};d.\u0275fac=function(t){return new(t||d)(M(ue),M(me),M(K),M(B),M(Q),M(J),M(G),M(q))},d.\u0275cmp=P({type:d,selectors:[["app-core-module-entity-report-file-edit"]],viewQuery:function(t,e){if(t&1&&ie(oi,5),t&2){let p;oe(p=ne())&&(e.formGroup=p.first)}},features:[W],decls:53,vars:48,consts:[["vform","ngForm"],["Title",""],["TitleResourceLanguage",""],["Description",""],["LinkFileId",""],["LinkImageId",""],[1,"card","card-style","loader-container"],[3,"optionsInfoAreaId"],[1,"content","mb-0"],[1,"mb-0","color-highlight","font-600","font-12"],[3,"ngSubmit"],[3,"model","optionDisabled","optionLabel","optionRequired","optionSelectFirstItem","modelChange",4,"ngIf"],[1,"input-style","has-borders","no-icon","input-style-always-active","validate-field","mb-4"],["for","dataModel.title",1,"color-highlight"],["matInput","","type","text","name","dataModel.title","minlength","3","maxlength","100","id","dataModel.title",1,"form-control","validate-name",3,"ngModelChange","ngModel","placeholder"],[4,"ngIf"],["for","dataModel.titleML",1,"color-highlight"],["matInput","","type","text","name","dataModel.titleML","id","dataModel.titleML",1,"form-control","validate-name",3,"ngModelChange","ngModel","disabled"],["for","dataModel.titleResourceLanguage",1,"color-highlight"],["matInput","","type","text","name","dataModel.titleResourceLanguage","minlength","3","maxlength","100","id","dataModel.titleResourceLanguage",1,"form-control","validate-name",3,"ngModelChange","ngModel","disabled","placeholder"],[3,"optionChange","optionDisabled","optionSelectForce","optionPlaceholder"],[3,"optionDataListResult","model","optionDisabled","optionLabel","optionRequired","optionSelectFirstItem","modelChange",4,"ngIf"],["for","dataModel.description",1,"color-highlight"],["matInput","","name","dataModel.description","type","text","minlength","1","maxlength","500","rows","5","id","dataModel.description",1,"form-control","validate-name",3,"ngModelChange","ngModel","placeholder"],[1,"mb-3"],["style","vertical-align:middle;","class","ntk-hover-zoom","aria-hidden","","height","50","width","50",3,"src",4,"ngIf"],["class","input-style has-borders no-icon input-style-always-active validate-field mb-4",4,"ngIf"],["matInput","","type","text","name","dataModel.linkFileId","autocomplete","off","id","dataModel.linkFileId",1,"form-control","validate-name",3,"ngModelChange","click","ngModel","placeholder"],[3,"itemSelected","openFormChange","language","isPopup","openForm","tree","openDirectUploadView","openFilemanagerButtonLabelKey","selectFileType","openFilemanagerButtonView"],["class","form-actions",4,"ngIf"],[3,"modelChange","model","optionDisabled","optionLabel","optionRequired","optionSelectFirstItem"],[3,"modelChange","optionDataListResult","model","optionDisabled","optionLabel","optionRequired","optionSelectFirstItem"],["aria-hidden","","height","50","width","50",1,"ntk-hover-zoom",2,"vertical-align","middle",3,"src"],["for","dataModel.linkImageId",1,"color-highlight",3,"click"],["matInput","","type","text","name","dataModel.linkImageId","autocomplete","off","id","dataModel.linkImageId",1,"form-control","validate-name",3,"ngModelChange","click","ngModel","placeholder"],[3,"itemSelected","openFormChange","language","isPopup","openForm","tree","openFilemanagerButtonLabelKey","openDirectUploadView","selectFileType","openFilemanagerButtonView"],[1,"form-actions"],["type","button",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-gray",3,"click"],[1,"ft-x"],["type","submit",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-green",3,"disabled"],[1,"fa","fa-check-square-o"]],template:function(t,e){if(t&1){let p=F();a(0,"div",6),v(1,"app-progress-spinner",7),a(2,"div",8)(3,"p",9),c(4),s(),a(5,"p"),c(6),h(7,"translate"),s(),a(8,"form",10,0),y("ngSubmit",function(){return m(p),u(e.onFormSubmit())}),E(10,ni,1,5,"app-cms-enum-record-status-selector",11),a(11,"div",12)(12,"label",13),c(13),s(),a(14,"input",14,1),R("ngModelChange",function(n){return m(p),w(e.dataModel.title,n)||(e.dataModel.title=n),u(n)}),s(),a(16,"em"),c(17),s(),E(18,ri,5,4,"mat-error",15),s(),a(19,"div",12)(20,"label",16),c(21),h(22,"translate"),s(),a(23,"input",17),R("ngModelChange",function(n){return m(p),w(e.dataModel.titleML,n)||(e.dataModel.titleML=n),u(n)}),s()(),a(24,"div",12)(25,"label",18),c(26),s(),a(27,"input",19,2),R("ngModelChange",function(n){return m(p),w(e.dataModel.titleResourceLanguage,n)||(e.dataModel.titleResourceLanguage=n),u(n)}),s(),a(29,"em"),c(30),s(),E(31,li,5,3,"mat-error",15),s(),a(32,"app-core-module-entity-selector",20),h(33,"translate"),y("optionChange",function(n){return m(p),u(e.onActionSelectorModuleEntitySelect(n))}),s(),E(34,ai,1,6,"app-cms-enum-x-selector",21),a(35,"div",12)(36,"label",22),c(37),s(),a(38,"textarea",23,3),R("ngModelChange",function(n){return m(p),w(e.dataModel.description,n)||(e.dataModel.description=n),u(n)}),c(40,"          "),s(),a(41,"em"),c(42),s(),E(43,si,5,3,"mat-error",15),s(),a(44,"div",24),E(45,di,2,3,"img",25),s(),E(46,pi,8,15,"div",26),a(47,"div",12)(48,"input",27,4),h(50,"translate"),R("ngModelChange",function(n){return m(p),w(e.dataModel.linkFileId,n)||(e.dataModel.linkFileId=n),u(n)}),y("click",function(){return m(p),u(e.fileManagerOpenFormReport=!0)}),s(),a(51,"cms-file-manager",28),y("itemSelected",function(n){return m(p),u(e.onActionFileSelectedLinkFileId(n))}),R("openFormChange",function(n){return m(p),w(e.fileManagerOpenFormReport,n)||(e.fileManagerOpenFormReport=n),u(n)}),s()(),E(52,ci,9,7,"div",29),s()()()}if(t&2){let p=L(15),f=L(28),n=L(39);l(),g("optionsInfoAreaId",e.constructorInfoAreaId),l(3),S(" ",e.formInfo.formTitle," "),l(2),S(" ",C(7,40,"TITLE.Be_Careful_When_Entering_Information")," "),l(4),g("ngIf",e.fieldsInfo.recordStatus==null?null:e.fieldsInfo.recordStatus.accessWatchField),l(3),b(e.fieldsInfo.title==null?null:e.fieldsInfo.title.fieldTitle),l(),x("placeholder",e.fieldsInfo.title==null?null:e.fieldsInfo.title.fieldTitle),I("ngModel",e.dataModel.title),l(3),S("",p.value.length," / 100"),l(),g("ngIf",p.errors==null?null:p.errors.required),l(3),b(C(22,42,"TITLE.TitleML")),l(2),I("ngModel",e.dataModel.titleML),g("disabled",!0),l(3),b(e.fieldsInfo.titleResourceLanguage==null?null:e.fieldsInfo.titleResourceLanguage.fieldTitle),l(),x("placeholder",e.fieldsInfo.titleResourceLanguage==null?null:e.fieldsInfo.titleResourceLanguage.fieldTitle),I("ngModel",e.dataModel.titleResourceLanguage),g("disabled",!(e.fieldsInfo.titleResourceLanguage!=null&&e.fieldsInfo.titleResourceLanguage.accessEditField)),l(3),S("",f.value.length," / 100"),l(),g("ngIf",f.errors==null?null:f.errors.required),l(),g("optionDisabled",!(e.fieldsInfo.linkModuleEntityId!=null&&e.fieldsInfo.linkModuleEntityId.accessEditField))("optionSelectForce",e.dataModel.linkModuleEntityId)("optionPlaceholder",C(33,44,"TITLE.MODULE_ENTITY")),l(2),g("ngIf",e.fieldsInfo.reportFileType==null?null:e.fieldsInfo.reportFileType.accessWatchField),l(3),b(e.fieldsInfo.description==null?null:e.fieldsInfo.description.fieldTitle),l(),x("placeholder",e.fieldsInfo.description==null?null:e.fieldsInfo.description.fieldTitle),I("ngModel",e.dataModel.description),l(4),S("",n.value.length," / 500"),l(),g("ngIf",n.errors==null?null:n.errors.required),l(2),g("ngIf",(e.dataModel==null||e.dataModel.linkImageIdSrc==null?null:e.dataModel.linkImageIdSrc.length)>0),l(),g("ngIf",e.fieldsInfo.linkImageId==null?null:e.fieldsInfo.linkImageId.accessWatchField),l(2),x("placeholder",C(50,46,"TITLE.Report_File_ID")),I("ngModel",e.dataModel.linkFileId),l(3),g("language",e.appLanguage)("isPopup",!0),I("openForm",e.fileManagerOpenFormReport),g("tree",e.fileManagerTree)("openDirectUploadView",!0)("openFilemanagerButtonLabelKey","select")("selectFileType",e.selectFileTypeReport)("openFilemanagerButtonView",!1),l(),g("ngIf",e.formInfo.formSubmitAllow)}},dependencies:[N,se,re,H,le,de,pe,j,ae,ce,z,Ce,Se,_e,ye,ge,U,he],styles:[".form-body[_ngcontent-%COMP%]{width:500px}@media (max-width: 700px){.form-body[_ngcontent-%COMP%]{display:contents}}#file-manager[_ngcontent-%COMP%]{width:calc(100vw - 16px);height:calc(100vh - 16px)}.recordStatus-1.mat-select-panel[_ngcontent-%COMP%]{background:#ff0}.recordStatus-2.mat-select-panel[_ngcontent-%COMP%]{background:#000}.recordStatus-3.mat-select-panel[_ngcontent-%COMP%]{background:red}"]});let o=d;return o})();var mi=()=>[5,10,20,100],ui=o=>({display:o});function fi(o,d){if(o&1){let r=F();a(0,"div",19)(1,"a",44),y("click",function(){m(r);let t=_();return u(t.onActionButtonNewRow())}),v(2,"i",45)(3,"br"),s(),a(4,"p",22),c(5),h(6,"translate"),s()()}o&2&&(l(5),S("",C(6,1,"ACTION.ADD")," Dependency"))}function gi(o,d){if(o&1){let r=F();a(0,"div",19)(1,"a",46),y("click",function(){m(r);let t=_();return u(t.onActionButtonEditRow(t.tableRowSelected))}),v(2,"i",47)(3,"br"),s(),a(4,"p",22),c(5),h(6,"translate"),s()()}o&2&&(l(5),b(C(6,1,"ACTION.EDIT")))}function _i(o,d){if(o&1){let r=F();a(0,"div",19)(1,"a",48),y("click",function(){m(r);let t=_();return u(t.onActionButtonDeleteRow(t.tableRowSelected))}),v(2,"i",49)(3,"br"),s(),a(4,"p",22),c(5),h(6,"translate"),s()()}o&2&&(l(5),b(C(6,1,"ACTION.DELETE")))}function hi(o,d){if(o&1&&(a(0,"mat-header-cell",50),c(1),s()),o&2){let r=_();l(),S(" ",r.fieldsInfo.id==null?null:r.fieldsInfo.id.fieldTitle," ")}}function Ci(o,d){if(o&1&&(a(0,"mat-cell"),c(1),s()),o&2){let r=d.$implicit;l(),S(" ",r.id," ")}}function Si(o,d){if(o&1&&(a(0,"mat-header-cell",50),c(1),s()),o&2){let r=_();l(),S(" ",r.fieldsInfo.recordStatus==null?null:r.fieldsInfo.recordStatus.fieldTitle," ")}}function Mi(o,d){if(o&1&&v(0,"select",53),o&2){let r=_().$implicit,i=_();g("contentService",i.contentService)("row",r)("ngStyle",Le(3,ui,r.id===(i.tableRowSelected==null?null:i.tableRowSelected.id)?"":"none"))}}function yi(o,d){if(o&1&&(a(0,"mat-cell",51),h(1,"statusCellClass"),v(2,"i",51),h(3,"statusIconClass"),E(4,Mi,1,5,"select",52),s()),o&2){let r=d.$implicit,i=_();g("ngClass",C(1,3,r.recordStatus)),l(2),g("ngClass",C(3,5,r.recordStatus)),l(2),g("ngIf",i.dataModelResult==null||i.dataModelResult.access==null?null:i.dataModelResult.access.accessEditRow)}}function Ei(o,d){if(o&1&&(a(0,"mat-header-cell",50),c(1),s()),o&2){let r=_();l(),S(" ",r.fieldsInfo.linkModuleEntityId==null?null:r.fieldsInfo.linkModuleEntityId.fieldTitle," ")}}function Ii(o,d){if(o&1&&(a(0,"mat-cell"),c(1),s()),o&2){let r=d.$implicit;l(),S(" ",r.linkModuleEntityId," ")}}function wi(o,d){if(o&1&&(a(0,"mat-header-cell",50),c(1),s()),o&2){let r=_();l(),S(" ",r.fieldsInfo.title==null?null:r.fieldsInfo.title.fieldTitle," ")}}function Ri(o,d){if(o&1&&(a(0,"mat-cell"),c(1),s()),o&2){let r=d.$implicit;l(),S(" ",r.title," ")}}function vi(o,d){if(o&1&&(a(0,"mat-header-cell",50),c(1),s()),o&2){let r=_();l(),S(" ",r.fieldsInfo.description==null?null:r.fieldsInfo.description.fieldTitle," ")}}function bi(o,d){if(o&1&&(a(0,"mat-cell"),c(1),s()),o&2){let r=d.$implicit;l(),S(" ",r.description," ")}}function Fi(o,d){if(o&1&&(a(0,"mat-header-cell",50),c(1),s()),o&2){let r=_();l(),S(" ",r.fieldsInfo.reportFileType==null?null:r.fieldsInfo.reportFileType.fieldTitle," ")}}function Ti(o,d){if(o&1&&(a(0,"mat-cell"),c(1),h(2,"enums"),s()),o&2){let r=d.$implicit,i=_();l(),S(" ",ke(2,1,r.reportFileType,i.dataModelEnumReportFileTypeResult.listItems)," ")}}function Ai(o,d){o&1&&(a(0,"mat-header-cell"),c(1),h(2,"translate"),s()),o&2&&(l(),S(" ",C(2,1,"TITLE.OPTION")," "))}function xi(o,d){if(o&1&&(a(0,"mat-cell",54)(1,"button",55)(2,"mat-icon"),c(3,"more_vert"),s()(),v(4,"mat-menu",null,2),s()),o&2){let r=L(5);l(),g("matMenuTriggerFor",r)}}function Li(o,d){o&1&&(a(0,"mat-header-cell",50),c(1),h(2,"translate"),s()),o&2&&(l(),S("",C(2,1,"ACTION.ORDERING")," "))}function ki(o,d){o&1&&(a(0,"mat-cell")(1,"mat-icon",56),c(2,"reorder"),s()())}function Di(o,d){o&1&&v(0,"mat-header-row")}function Vi(o,d){if(o&1){let r=F();a(0,"mat-row",57),y("click",function(){let t=m(r).$implicit,e=_();return u(e.onActionTableRowSelect(t))}),s()}if(o&2){let r=d.$implicit,i=d.dataIndex,t=_();Te("ntk-row-odd",i%2)("ntk-row-even",!(i%2))("ntk-row-selected",r.id===(t.tableRowSelected==null?null:t.tableRowSelected.id))}}var ve=(()=>{let d=class d extends wt{constructor(i,t,e,p,f,n,k,O,Pt,be,Wt,Fe,Gt){if(super(i,new D,Fe,f,be),this.contentService=i,this.coreEnumService=t,this.cmsToastrService=e,this.cmsConfirmationDialogService=p,this.tokenHelper=f,this.activatedRoute=n,this.coreModuleEntityService=k,this.router=O,this.cdr=Pt,this.translate=be,this.pageInfo=Wt,this.publicHelper=Fe,this.dialog=Gt,this.requestLinkModuleEntityId=0,this.constructorInfoAreaId=this.constructor.name,this.flag=!1,this.tableContentSelected=[],this.filteModelContent=new Re,this.dataModelCoreModuleEntityResult=new V,this.dataModelEnumReportFileTypeResult=new V,this.tabledisplayedColumns=[],this.tabledisplayedColumnsSource=["Id","RecordStatus","LinkModuleEntityId","Description","ReportFileType"],this.tabledisplayedColumnsMobileSource=["Id","RecordStatus","LinkModuleEntityId","Description","ReportFileType"],this.publicHelper.processService.cdr=this.cdr,this.optionsSearch.parentMethods={onSubmit:X=>this.onSubmitOptionsSearch(X)},this.requestLinkModuleEntityId=+Number(this.activatedRoute.snapshot.paramMap.get("LinkModuleEntityReportFileId")),this.filteModelContent.sortColumn="Id",this.filteModelContent.sortType=Y.Ascending,this.requestLinkModuleEntityId>0){let X=new we;X.propertyName="linkModuleEntityId",X.value=this.requestLinkModuleEntityId,this.filteModelContent.filters.push(X)}}ngOnInit(){this.filteModelContent.sortColumn="ShowInMenuOrder",this.tokenHelper.getTokenInfoState().then(i=>{this.tokenInfo=i,this.DataGetAll()}),this.cmsApiStoreSubscribe=this.tokenHelper.getTokenInfoStateOnChange().subscribe({next:i=>{this.tokenInfo=i,this.DataGetAll()}}),this.getModuleList(),this.getEnumReportFileType()}ngOnDestroy(){this.cmsApiStoreSubscribe.unsubscribe()}getEnumReportFileType(){this.coreEnumService.ServiceReportFileTypeEnum().subscribe({next:i=>{this.dataModelEnumReportFileTypeResult=i}})}getModuleList(){let i=new Re;i.rowPerPage=100,this.coreModuleEntityService.ServiceGetAll(i).subscribe({next:t=>{this.dataModelCoreModuleEntityResult=t}})}DataGetAll(){this.tabledisplayedColumns=this.publicHelper.TableDisplayedColumns(this.tabledisplayedColumnsSource,this.tabledisplayedColumnsMobileSource,[],this.tokenInfo),this.tableRowsSelected=[],this.onActionTableRowSelect(new D);let i=this.constructor.name+"main";this.translate.get("MESSAGE.get_information_list").subscribe(e=>{this.publicHelper.processService.processStart(i,e,this.constructorInfoAreaId)}),this.filteModelContent.accessLoad=!0;let t=JSON.parse(JSON.stringify(this.filteModelContent));this.contentService.ServiceGetAllEditor(t).subscribe({next:e=>{e.isSuccess?(this.fieldsInfo=this.publicHelper.fieldInfoConvertor(e.access),this.dataModelResult=e,this.tableSource.data=e.listItems,this.optionsStatist?.data?.show&&this.onActionButtonStatist(!0),setTimeout(()=>{this.optionsSearch.childMethods&&this.optionsSearch.childMethods.setAccess(e.access)},1e3)):this.cmsToastrService.typeErrorMessage(e.errorMessage),this.publicHelper.processService.processStop(i)},error:e=>{this.cmsToastrService.typeError(e),this.publicHelper.processService.processStop(i,!1)}})}onTableSortData(i){this.tableSource&&this.tableSource.sort&&this.tableSource.sort.active===i.active?this.tableSource.sort.start==="asc"?(i.start="desc",this.filteModelContent.sortColumn=i.active,this.filteModelContent.sortType=Y.Descending):this.tableSource.sort.start==="desc"?(i.start="asc",this.filteModelContent.sortColumn="",this.filteModelContent.sortType=Y.Ascending):i.start="desc":(this.filteModelContent.sortColumn=i.active,this.filteModelContent.sortType=Y.Descending),this.tableSource.sort=i,this.filteModelContent.currentPageNumber=0,this.DataGetAll()}onTablePageingData(i){this.filteModelContent.currentPageNumber=i.pageIndex+1,this.filteModelContent.rowPerPage=i.pageSize,this.DataGetAll()}onActionButtonNewRow(){var i="";this.tokenHelper.isMobile?i="dialog-fullscreen":i="dialog-min",this.dialog.open(Vt,{height:"90%",panelClass:i,enterAnimationDuration:Z.cmsViewConfig.enterAnimationDuration,exitAnimationDuration:Z.cmsViewConfig.exitAnimationDuration,data:{linkModuleEntityId:this.requestLinkModuleEntityId}}).afterClosed().subscribe(e=>{e&&e.dialogChangedDate&&this.DataGetAll()})}onActionButtonEditRow(i=this.tableRowSelected){if(!i||!i.id||i.id.length===0){this.cmsToastrService.typeErrorSelectedRow();return}if(this.onActionTableRowSelect(i),this.dataModelResult==null||this.dataModelResult.access==null||!this.dataModelResult.access.accessEditRow){this.cmsToastrService.typeErrorAccessEdit();return}var t="";this.tokenHelper.isMobile?t="dialog-fullscreen":t="dialog-min",this.dialog.open(Bt,{height:"90%",panelClass:t,enterAnimationDuration:Z.cmsViewConfig.enterAnimationDuration,exitAnimationDuration:Z.cmsViewConfig.exitAnimationDuration,data:{id:this.tableRowSelected.id}}).afterClosed().subscribe(p=>{p&&p.dialogChangedDate&&this.DataGetAll()})}onActionButtonDeleteRow(i=this.tableRowSelected){if(!i||!i.id||i.id.length===0){this.translate.get("MESSAGE.no_row_selected_to_delete").subscribe(p=>{this.cmsToastrService.typeErrorSelected(p)});return}if(this.onActionTableRowSelect(i),this.dataModelResult==null||this.dataModelResult.access==null||!this.dataModelResult.access.accessDeleteRow){this.cmsToastrService.typeErrorAccessDelete();return}var t="",e="";this.translate.get(["MESSAGE.Please_Confirm","MESSAGE.Do_you_want_to_delete_this_content"]).subscribe(p=>{t=p["MESSAGE.Please_Confirm"],e=p["MESSAGE.Do_you_want_to_delete_this_content"]+"?<br> ( "+this.tableRowSelected.id+" ) "}),this.cmsConfirmationDialogService.confirm(t,e).then(p=>{if(p){let f=this.constructor.name+"main";this.translate.get("MESSAGE.Receiving_information").subscribe(n=>{this.publicHelper.processService.processStart(f,n,this.constructorInfoAreaId)}),this.contentService.ServiceDelete(this.tableRowSelected.id).subscribe({next:n=>{n.isSuccess?(this.cmsToastrService.typeSuccessRemove(),this.DataGetAll()):this.cmsToastrService.typeErrorRemove(),this.publicHelper.processService.processStop(f)},error:n=>{this.cmsToastrService.typeError(n),this.publicHelper.processService.processStop(f,!1)}})}}).catch(()=>{})}onActionButtonStatist(i=!this.optionsStatist.data.show){if(this.optionsStatist.data.show=i,!this.optionsStatist.data.show)return;let t=new Map;this.translate.get("MESSAGE.Active").subscribe(n=>{t.set(n,0)}),this.translate.get("MESSAGE.All").subscribe(n=>{t.set(n,0)});let e=this.constructor.name+".ServiceStatist";this.translate.get("MESSAGE.Get_the_statist").subscribe(n=>{this.publicHelper.processService.processStart(e,n,this.constructorInfoAreaId)}),this.contentService.ServiceGetCount(this.filteModelContent).subscribe({next:n=>{n.isSuccess&&(this.translate.get("MESSAGE.All").subscribe(k=>{t.set(k,n.totalRowCount)}),this.optionsStatist.childMethods.setStatistValue(t)),this.publicHelper.processService.processStop(e)},error:n=>{this.cmsToastrService.typeError(n),this.publicHelper.processService.processStop(e,!1)}});let p=JSON.parse(JSON.stringify(this.filteModelContent)),f=new we;f.propertyName="RecordStatus",f.value=qe.Available,p.filters.push(f),this.contentService.ServiceGetCount(p).subscribe({next:n=>{n.isSuccess?(this.translate.get("MESSAGE.Active").subscribe(k=>{t.set(k,n.totalRowCount)}),this.optionsStatist.childMethods.setStatistValue(t)):this.cmsToastrService.typeErrorMessage(n.errorMessage),this.publicHelper.processService.processStop(e)},error:n=>{this.cmsToastrService.typeError(n),this.publicHelper.processService.processStop(e,!1)}})}onActionButtonModuleEntityDataReportRow(i=this.tableRowSelected){if(!i||!i.id||i.id.length===0){this.translate.get("ERRORMESSAGE.MESSAGE.typeErrorSelectedRow").subscribe(t=>{this.cmsToastrService.typeErrorSelected(t)});return}this.onActionTableRowSelect(i),this.router.navigate(["corelog/report-data/LinkModuleEntityReportFileId/",i.id])}onActionButtonReload(){this.DataGetAll()}onSubmitOptionsSearch(i){this.filteModelContent.filters=i,this.DataGetAll()}};d.\u0275fac=function(t){return new(t||d)(M(B),M(K),M(Q),M(Me),M(Je),M(We),M(Ke),M(Ge),M(G),M(q),M(Xe),M(J),M(He))},d.\u0275cmp=P({type:d,selectors:[["app-core-module-entity-report-file-list"]],features:[W],decls:66,vars:31,consts:[["tableSort","matSort"],["paginator",""],["actionMenu","matMenu"],[3,"optionActionGuideNoticeDisplayChange","optionOnActionButtonMemoRow","optionOnActionButtonMemo","optionOnActionButtonExport","optionOnActionButtonPrintRow","optionsListInfoAreaId","optionGuideNoticeKey","optionActionGuideNoticeDisplay","optionTreeDisplay","optionActionRowId","optionActionRowDisplayMenu","optionSelectRowItemTitle"],["cms-tree",""],["cms-header",""],["cms-action-header",""],["cms-action-header-start",""],["type","button","target","_blank",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-highlight",3,"click"],[1,"fa-solid","fa-info","font-18",2,"color","#ffffff"],[1,"fa-solid","fa-rotate-right","font-18",2,"color","#ffffff"],["cms-action-header-end",""],[1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-highlight",3,"click"],[3,"ngModelChange","click","ngModel"],[1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-highlight"],[3,"click","ngModelChange","ngModel"],["cms-action-main",""],["class","col-4",4,"ngIf"],["cms-action-row",""],[1,"col-4"],["target","_blank",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-highlight",3,"click"],[1,"fa-solid","fa-file-chart-column","font-18",2,"color","#ffffff"],[1,"font-11","text-center","opacity-70"],["cms-action-area",""],[3,"optionsChange","options"],["cms-body",""],["matSort","",3,"matSortChange","dataSource"],["matColumnDef","Id"],["mat-sort-header","",4,"matHeaderCellDef"],[4,"matCellDef"],["matColumnDef","RecordStatus"],[3,"ngClass",4,"matCellDef"],["matColumnDef","LinkModuleEntityId"],["matColumnDef","Title"],["matColumnDef","Description"],["matColumnDef","ReportFileType"],["matColumnDef","Action"],[4,"matHeaderCellDef"],["class"," Action",4,"matCellDef"],["matColumnDef","position"],[4,"matHeaderRowDef"],[3,"ntk-row-odd","ntk-row-even","ntk-row-selected","click",4,"matRowDef","matRowDefColumns"],["cms-footer",""],[3,"page","length","pageIndex","pageSize","pageSizeOptions"],["type","button","target","_blank",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-teal",3,"click"],[1,"fa-solid","fa-plus","font-18",2,"color","#FFFFFF"],["target","_blank",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-magenta",3,"click"],[1,"fa-solid","fa-pen","font-18",2,"color","#FFFFFF"],["target","_blank",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-red",3,"click"],[1,"fa-solid","fa-trash","font-18",2,"color","#ffffff"],["mat-sort-header",""],[3,"ngClass"],["matNativeControl","","cmsRecordStatusSelfSave","","style","background: none; border: none;",3,"contentService","row","ngStyle",4,"ngIf"],["matNativeControl","","cmsRecordStatusSelfSave","",2,"background","none","border","none",3,"contentService","row","ngStyle"],[1,"Action"],["type","button","mat-icon-button","","aria-label","Action Menu",3,"matMenuTriggerFor"],["cdkDragHandle","",2,"pointer-events","all"],[3,"click"]],template:function(t,e){if(t&1){let p=F();a(0,"app-cms-html-list",3),R("optionActionGuideNoticeDisplayChange",function(n){return m(p),w(e.viewGuideNotice,n)||(e.viewGuideNotice=n),u(n)}),y("optionOnActionButtonMemoRow",function(){return m(p),u(e.onActionButtonMemoRow())})("optionOnActionButtonMemo",function(){return m(p),u(e.onActionButtonMemo())})("optionOnActionButtonExport",function(){return m(p),u(e.onActionButtonExport())})("optionOnActionButtonPrintRow",function(){return m(p),u(e.onActionButtonPrintRow())}),T(1,4),c(2," -------------------------------------- "),A(),Ae(3,5)(4,6),T(5,7),a(6,"a",8),y("click",function(){return m(p),u(e.viewGuideNotice=!e.viewGuideNotice)}),v(7,"i",9),s(),a(8,"a",8),y("click",function(){return m(p),u(e.onActionButtonReload())}),v(9,"i",10),s(),A(),T(10,11),a(11,"a",12),y("click",function(){return m(p),u(e.optionsSearch.data.show=!e.optionsSearch.data.show)}),a(12,"mat-slide-toggle",13),R("ngModelChange",function(n){return m(p),w(e.optionsSearch.data.show,n)||(e.optionsSearch.data.show=n),u(n)}),y("click",function(){return m(p),u(e.optionsSearch.data.show=!e.optionsSearch.data.show)}),s(),c(13),h(14,"translate"),s(),a(15,"a",14)(16,"mat-slide-toggle",15),y("click",function(){return m(p),u(e.onActionButtonStatist())}),R("ngModelChange",function(n){return m(p),w(e.optionsStatist.data.show,n)||(e.optionsStatist.data.show=n),u(n)}),s(),c(17),h(18,"translate"),s(),A(),T(19,16),E(20,fi,7,3,"div",17),A(),T(21,18),E(22,gi,7,3,"div",17)(23,_i,7,3,"div",17),a(24,"div",19)(25,"a",20),y("click",function(){return m(p),u(e.onActionButtonModuleEntityDataReportRow(e.tableRowSelected))}),v(26,"i",21)(27,"br"),s(),a(28,"p",22),c(29),h(30,"translate"),s()(),A(),T(31,23),a(32,"app-cms-search-list",24),R("optionsChange",function(n){return m(p),w(e.optionsSearch,n)||(e.optionsSearch=n),u(n)}),s(),a(33,"app-cms-statist-list",24),R("optionsChange",function(n){return m(p),w(e.optionsStatist,n)||(e.optionsStatist=n),u(n)}),s(),A(),T(34,25),a(35,"mat-table",26,0),y("matSortChange",function(){m(p);let n=L(36);return u(e.onTableSortData(n))}),T(37,27),E(38,hi,2,1,"mat-header-cell",28)(39,Ci,2,1,"mat-cell",29),A(),T(40,30),E(41,Si,2,1,"mat-header-cell",28)(42,yi,5,7,"mat-cell",31),A(),T(43,32),E(44,Ei,2,1,"mat-header-cell",28)(45,Ii,2,1,"mat-cell",29),A(),T(46,33),E(47,wi,2,1,"mat-header-cell",28)(48,Ri,2,1,"mat-cell",29),A(),T(49,34),E(50,vi,2,1,"mat-header-cell",28)(51,bi,2,1,"mat-cell",29),A(),T(52,35),E(53,Fi,2,1,"mat-header-cell",28)(54,Ti,3,4,"mat-cell",29),A(),T(55,36),E(56,Ai,3,3,"mat-header-cell",37)(57,xi,6,1,"mat-cell",38),A(),T(58,39),E(59,Li,3,3,"mat-header-cell",28)(60,ki,3,0,"mat-cell",29),A(),E(61,Di,1,0,"mat-header-row",40)(62,Vi,1,6,"mat-row",41),s(),A(),T(63,42),a(64,"mat-paginator",43,1),y("page",function(n){return m(p),u(e.onTablePageingData(n))}),s(),A(),s()}t&2&&(g("optionsListInfoAreaId",e.constructorInfoAreaId)("optionGuideNoticeKey",""),I("optionActionGuideNoticeDisplay",e.viewGuideNotice),g("optionTreeDisplay",!1)("optionActionRowId",e.tableRowSelected==null?null:e.tableRowSelected.id)("optionActionRowDisplayMenu",e.tableRowSelectDoubleClick)("optionSelectRowItemTitle",(e.tableRowSelected==null||e.tableRowSelected.title==null?null:e.tableRowSelected.title.length)>0?e.tableRowSelected==null?null:e.tableRowSelected.title:e.tableRowSelected==null?null:e.tableRowSelected.id),l(12),I("ngModel",e.optionsSearch.data.show),l(),S("",C(14,24,"ACTION.SEARCH")," "),l(3),I("ngModel",e.optionsStatist.data.show),l(),S("",C(18,26,"ACTION.STATIST")," "),l(3),g("ngIf",e.dataModelResult==null||e.dataModelResult.access==null?null:e.dataModelResult.access.accessAddRow),l(2),g("ngIf",e.dataModelResult==null||e.dataModelResult.access==null?null:e.dataModelResult.access.accessEditRow),l(),g("ngIf",e.dataModelResult==null||e.dataModelResult.access==null?null:e.dataModelResult.access.accessDeleteRow),l(6),b(C(30,28,"ACTION.Reports")),l(3),I("options",e.optionsSearch),l(),I("options",e.optionsStatist),l(2),g("dataSource",e.tableSource),l(26),g("matHeaderRowDef",e.tabledisplayedColumns),l(),g("matRowDefColumns",e.tabledisplayedColumns),l(2),g("length",e.dataModelResult.totalRowCount)("pageIndex",e.dataModelResult.currentPageNumber-1)("pageSize",e.dataModelResult.rowPerPage)("pageSizeOptions",xe(30,mi)))},dependencies:[De,N,Ve,H,j,Ne,je,z,Ye,Ze,$e,et,tt,it,ot,rt,dt,lt,nt,pt,at,st,ct,mt,Ct,St,ht,ut,U,ft,_t,gt],encapsulation:2});let o=d;return o})();var Bi=[{path:"",children:[{path:"",component:ve},{path:"LinkModuleEntityReportFileId/:LinkModuleEntityReportFileId",component:ve}]}],Ot=(()=>{let d=class d{};d.\u0275fac=function(t){return new(t||d)},d.\u0275mod=ee({type:d}),d.\u0275inj=$({imports:[Ie.forChild(Bi),Ie]});let o=d;return o})();var Po=(()=>{let d=class d{};d.\u0275fac=function(t){return new(t||d)},d.\u0275mod=ee({type:d}),d.\u0275inj=$({providers:[B,Me],imports:[Be,Oe,Ot,Pe.withConfig({warnOnNgModelWithFormControl:"never"}),Mt,It,Rt,vt,Qe]});let o=d;return o})();export{Po as CoreModuleEntityReportFileModule};
