import{a as _i}from"./chunk-YBLT54RZ.js";import{a as gi}from"./chunk-YCNECQ7C.js";import{a as qe}from"./chunk-GJ44BTV4.js";import{b as hi}from"./chunk-NF7S3YS7.js";import{a as ze}from"./chunk-YUE3EIIU.js";import{$c as di,Bd as ui,C as It,Dc as li,F as ue,G as fe,H as ge,Hb as Vt,Ib as Ft,K as vt,Ka as Tt,Kd as fi,L as he,La as Ce,M as _e,Ma as Me,Mc as ie,Na as He,O as bt,P as yt,Pc as si,Ta as Ie,Uc as ci,Vb as Bt,Wa as U,Wb as Pt,Xb as Ot,Yb as Gt,Zb as Nt,_b as Wt,aa as Se,cd as ye,da as wt,fc as Ht,gc as jt,hc as qt,ic as zt,id as pi,jc as Ut,kc as Qt,lb as be,lc as Kt,m as Ct,mb as kt,mc as Jt,nb as j,nc as Xt,oc as Yt,p as Z,qc as Zt,rc as $t,s as $,sa as We,sb as Dt,sc as ei,t as se,tb as q,tc as ti,uc as ii,ud as mi,v as ce,vb as K,vc as oi,w as Mt,wc as ni,x as de,xc as ri,y as pe,yc as ai,z as me}from"./chunk-JQHEVCXW.js";import{b as W,c as z,q as je}from"./chunk-3XFIQZZO.js";import{Aa as Oe,Ab as Ee,Cd as Rt,Db as re,Dc as ht,Dd as V,Eb as ae,Fb as le,Fc as _t,Hd as ee,Ia as J,Ib as k,Id as te,Jd as ve,Kb as p,L as lt,La as n,Lb as y,Lc as St,Ma as _,Mb as v,O as st,Qb as w,Qd as H,Rb as L,Sb as T,Td as F,Ud as xt,Vb as ut,W as ct,Wb as ft,X as dt,Yb as S,Za as X,Zb as C,Ze as D,_b as gt,ab as I,bb as Ge,cb as u,cq as Q,da as Be,eb as ne,g as nt,gc as G,hd as Lt,ja as O,ka as Pe,kd as Ye,lb as a,ld as Ze,mb as s,nb as b,ob as A,pb as R,qb as Te,qd as $e,ra as f,rb as E,sa as g,td as Et,u as rt,ub as M,v as at,vd as Ae,wb as h,xb as pt,xc as Ne,yb as mt,yc as Y,zb as x,zc as N,zd as At}from"./chunk-T43A2R4F.js";var Ti=["*"];function Ei(o,c){if(o&1&&(a(0,"label",8),p(1),s()),o&2){let r=h();Ee("for","app-cms-site-selector-",r.id,""),n(),y(r.optionLabel)}}function Ai(o,c){if(o&1&&(a(0,"mat-option",9)(1,"span"),p(2),s()()),o&2){let r=c.$implicit,i=h();u("value",r)("disabled",i.optionDisabled),n(2),y(i.displayOption(r))}}function Ri(o,c){if(o&1){let r=E();a(0,"mat-icon",10),M("click",function(){f(r);let t=h();return g(t.onActionSelectClear())}),p(1,"close"),s()}}var we=(()=>{let c=class c{constructor(i,t,e,d,m,l){this.coreEnumService=i,this.cmsToastrService=t,this.cdr=e,this.publicHelper=d,this.translate=m,this.categoryService=l,this.id=++c.nextId,this.constructorInfoAreaId=this.constructor.name,this.dataModelResult=new V,this.dataModelSelect=new D,this.formControl=new Mt,this.optionDisabled=!1,this.optionSelectFirstItem=!1,this.optionPlaceholder="",this.optionLabel="",this.optionChange=new Oe,this.optionReload=()=>this.onActionButtonReload(),this.publicHelper.processService.cdr=this.cdr}set optionSelectForce(i){this.onActionSelectForce(i)}ngOnInit(){this.loadOptions(),(!this.optionLabel||this.optionLabel.length==0&&this.optionPlaceholder?.length>0)&&(this.optionLabel=this.optionPlaceholder)}loadOptions(){this.filteredOptions=this.formControl.valueChanges.pipe(ct(""),lt(1500),st(),dt(i=>typeof i=="string"||typeof i=="number"?this.DataGetAll(i||""):[]))}displayFn(i){return i?i.titleML:void 0}displayOption(i){return i?i.titleML:void 0}DataGetAll(i){return nt(this,null,function*(){let t=new te;t.rowPerPage=20,t.accessLoad=!0;let e=new ee;e.propertyName="Title",e.value=i,e.searchType=$e.Contains,e.clauseType=Ze.Or,t.filters.push(e),i&&typeof+i=="number"&&+i>0&&(e=new ee,e.propertyName="Id",e.value=i,e.searchType=$e.Equal,e.clauseType=Ze.Or,t.filters.push(e));let d=this.constructor.name+"main";return this.translate.get("MESSAGE.Receiving_information").subscribe(m=>{this.publicHelper.processService.processStart(d,m,this.constructorInfoAreaId)}),yield rt(this.categoryService.ServiceGetAll(t)).then(m=>(this.dataModelResult=m,this.optionSelectFirstItem&&(!this.dataModelSelect||!this.dataModelSelect.id||this.dataModelSelect.id<=0)&&this.dataModelResult.listItems.length>0&&(this.optionSelectFirstItem=!1,setTimeout(()=>{this.formControl.setValue(this.dataModelResult.listItems[0])},1e3),this.onActionSelect(this.dataModelResult.listItems[0])),this.publicHelper.processService.processStop(d),m.listItems))})}onActionSelect(i){this.dataModelSelect=i,this.optionChange.emit(this.dataModelSelect)}onActionSelectClear(){this.dataModelSelect=null,this.formControl.setValue(null),this.optionChange.emit(null)}push(i){return this.filteredOptions.pipe(at(t=>(t.find(e=>e.id===i.id)||t.push(i),t)))}onActionSelectForce(i){if(typeof i=="number"&&i>0){if(this.dataModelSelect&&this.dataModelSelect.id===i)return;if(this.dataModelResult&&this.dataModelResult.listItems&&this.dataModelResult.listItems.find(t=>t.id===i)){let t=this.dataModelResult.listItems.find(e=>e.id===i);this.dataModelSelect=t,this.formControl.setValue(t);return}this.categoryService.ServiceGetOneById(i).subscribe({next:t=>{t.isSuccess?(this.filteredOptions=this.push(t.item),this.dataModelSelect=t.item,this.formControl.setValue(t.item),this.optionChange.emit(t.item)):this.cmsToastrService.typeErrorMessage(t.errorMessage)}});return}if(typeof i==typeof D){this.filteredOptions=this.push(i),this.dataModelSelect=i,this.formControl.setValue(i);return}this.formControl.setValue(null)}onActionButtonReload(){this.dataModelSelect=new D,this.loadOptions()}};c.nextId=0,c.\u0275fac=function(t){return new(t||c)(_(H),_(j),_(G),_(q),_(W),_(F))},c.\u0275cmp=O({type:c,selectors:[["app-core-location-selector"]],inputs:{optionDisabled:"optionDisabled",optionSelectFirstItem:"optionSelectFirstItem",optionPlaceholder:"optionPlaceholder",optionLabel:"optionLabel",optionReload:"optionReload",optionSelectForce:"optionSelectForce"},outputs:{optionChange:"optionChange"},ngContentSelectors:Ti,decls:10,vars:13,consts:[["matauto","matAutocomplete"],[1,"input-style","has-borders","no-icon","input-style-always-active","validate-field","mb-4","loader-container"],[3,"optionsInfoAreaId"],["class","color-highlight",3,"for",4,"ngIf"],["type","text","matInput","",1,"form-control","validate-name",3,"placeholder","formControl","matAutocomplete","id"],[3,"optionSelected","displayWith"],[3,"value","disabled",4,"ngFor","ngForOf"],["matSuffix","","matSuffix","","mat-icon-button","","aria-label","Clear",3,"click",4,"ngIf"],[1,"color-highlight",3,"for"],[3,"value","disabled"],["matSuffix","","matSuffix","","mat-icon-button","","aria-label","Clear",3,"click"]],template:function(t,e){if(t&1){let d=E();pt(),a(0,"div",1),b(1,"app-progress-spinner",2),I(2,Ei,2,3,"label",3),b(3,"input",4),a(4,"mat-autocomplete",5,0),M("optionSelected",function(l){return f(d),g(e.onActionSelect(l.option.value))}),I(6,Ai,3,3,"mat-option",6),S(7,"async"),s(),I(8,Ri,2,0,"mat-icon",7),mt(9),s()}if(t&2){let d=k(5);n(),u("optionsInfoAreaId",e.constructorInfoAreaId),n(),u("ngIf",(e.optionLabel==null?null:e.optionLabel.length)>0),n(),x("placeholder",e.optionPlaceholder),Ee("id","app-cms-site-selector-",e.id,""),u("formControl",e.formControl)("matAutocomplete",d),Ge("disabled",e.optionDisabled?!0:null),n(),u("displayWith",e.displayFn),n(2),u("ngForOf",C(7,11,e.filteredOptions)),n(2),u("ngIf",e.dataModelSelect==null?null:e.dataModelSelect.id)}},dependencies:[Y,N,Z,$,It,Vt,Ct,Ft,wt,Ie,U,K,_t],encapsulation:2});let o=c;return o})();var xi=["vform"];function ki(o,c){if(o&1){let r=E();a(0,"app-cms-enum-record-status-selector",31),T("modelChange",function(t){f(r);let e=h();return L(e.dataModel.recordStatus,t)||(e.dataModel.recordStatus=t),g(t)}),s()}if(o&2){let r=h();w("model",r.dataModel.recordStatus),u("optionDisabled",!1)("optionLabel",r.fieldsInfo.recordStatus==null?null:r.fieldsInfo.recordStatus.fieldTitle)("optionRequired",!0)("optionSelectFirstItem",!0)}}function Di(o,c){if(o&1&&(a(0,"option",32),p(1),s()),o&2){let r=c.$implicit;u("value",r.value),n(),v(" ",r.description," ")}}function Vi(o,c){o&1&&(a(0,"mat-error"),p(1," LocationType is "),a(2,"strong"),p(3),S(4,"translate"),s()()),o&2&&(n(3),y(C(4,1,"MESSAGE.required")))}function Fi(o,c){if(o&1&&(a(0,"mat-error"),p(1),a(2,"strong"),p(3),S(4,"translate"),s()()),o&2){let r=h();n(),v(" ",r.fieldsInfo.title==null?null:r.fieldsInfo.title.fieldTitle," is "),n(2),y(C(4,2,"MESSAGE.required"))}}function Bi(o,c){o&1&&(a(0,"mat-error"),p(1," TitleResourceLanguage is "),a(2,"strong"),p(3),S(4,"translate"),s()()),o&2&&(n(3),y(C(4,1,"MESSAGE.required")))}function Pi(o,c){if(o&1&&(b(0,"img",33),S(1,"cmsthumbnail")),o&2){let r=h();x("src",C(1,1,r.dataModel.linkImageIdSrc),J)}}function Oi(o,c){if(o&1){let r=E();a(0,"div",14)(1,"label",34),M("click",function(){f(r);let t=h();return g(t.fileManagerOpenForm=!0)}),p(2),S(3,"translate"),s(),a(4,"input",35,6),S(6,"translate"),T("ngModelChange",function(t){f(r);let e=h();return L(e.dataModel.linkImageId,t)||(e.dataModel.linkImageId=t),g(t)}),M("click",function(){f(r);let t=h();return g(t.fileManagerOpenForm=!0)}),s(),a(7,"cms-file-manager",36),M("itemSelected",function(t){f(r);let e=h();return g(e.onActionFileSelected(t))}),T("openFormChange",function(t){f(r);let e=h();return L(e.fileManagerOpenForm,t)||(e.fileManagerOpenForm=t),g(t)}),s()()}if(o&2){let r=h();n(2),y(C(3,11,"TITLE.PHOTO_FILE")),n(2),x("placeholder",C(6,13,"TITLE.Icon_File_ID")),w("ngModel",r.dataModel.linkImageId),n(3),u("language",r.appLanguage)("selectFileType",r.selectFileTypeMainImage)("isPopup",!0),w("openForm",r.fileManagerOpenForm),u("openDirectUploadView",!0)("tree",r.fileManagerTree)("openFilemanagerButtonLabelKey","select")("openFilemanagerButtonView",!1)}}function Gi(o,c){if(o&1){let r=E();a(0,"div",37)(1,"button",38),M("click",function(){f(r);let t=h();return g(t.onFormCancel())}),b(2,"i",39),p(3),S(4,"translate"),s(),a(5,"button",40),b(6,"i",41),p(7),S(8,"translate"),s()()}if(o&2){h();let r=k(10);n(3),v(" ",C(4,3,"ACTION.CANCEL")," "),n(2),u("disabled",!r.form.valid),n(2),v(" ",C(8,5,"ACTION.SAVE")," ")}}var Je=(()=>{let c=class c extends qe{constructor(i,t,e,d,m,l,B,P){super(d,new D,l,P),this.data=i,this.dialogRef=t,this.coreEnumService=e,this.coreLocationService=d,this.cmsToastrService=m,this.publicHelper=l,this.cdr=B,this.translate=P,this.requestId=0,this.constructorInfoAreaId=this.constructor.name,this.fieldsInfo=new Map,this.selectFileTypeMainImage=["jpg","jpeg","png"],this.appLanguage="fa",this.dataModelResult=new V,this.dataModel=new D,this.formInfo=new ve,this.dataModelEnumLocationTypeResult=new V,this.fileManagerOpenForm=!1,this.publicHelper.processService.cdr=this.cdr,i&&(this.requestId=+i.id||0),this.requestId>0&&(this.dataModel.linkParentId=this.requestId),this.fileManagerTree=this.publicHelper.GetfileManagerTreeConfig()}ngOnInit(){this.translate.get("TITLE.ADD").subscribe(i=>{this.formInfo.formTitle=i}),this.getEnumLocationType(),this.DataGetAccess()}getEnumLocationType(){this.coreEnumService.ServiceLocationTypeEnum().subscribe({next:i=>{this.dataModelEnumLocationTypeResult=i}})}DataAddContent(){this.translate.get("MESSAGE.sending_information_to_the_server").subscribe(t=>{this.formInfo.formAlert=t}),this.formInfo.formError="";let i=this.constructor.name+"main";this.translate.get("MESSAGE.Receiving_information").subscribe(t=>{this.publicHelper.processService.processStart(i,t,this.constructorInfoAreaId)}),this.coreLocationService.ServiceAdd(this.dataModel).subscribe({next:t=>{this.formInfo.formSubmitAllow=!0,this.dataModelResult=t,t.isSuccess?(this.translate.get("MESSAGE.registration_completed_successfully").subscribe(e=>{this.formInfo.formAlert=e}),this.cmsToastrService.typeSuccessAdd(),this.dialogRef.close({dialogChangedDate:!0})):(this.translate.get("ERRORMESSAGE.MESSAGE.typeError").subscribe(e=>{this.formInfo.formAlert=e}),this.formInfo.formError=t.errorMessage,this.cmsToastrService.typeErrorMessage(t.errorMessage)),this.publicHelper.processService.processStop(i)},error:t=>{this.formInfo.formSubmitAllow=!0,this.cmsToastrService.typeError(t),this.publicHelper.processService.processStop(i,!1)}})}onFormSubmit(){this.formGroup.valid&&(this.formInfo.formSubmitAllow=!1,this.DataAddContent())}onFormCancel(){this.dialogRef.close({dialogChangedDate:!1})}onActionParentSelect(i){this.dataModel.linkParentId=null,i&&i.id>0&&(this.dataModel.linkParentId=i.id)}onActionFileSelected(i){this.dataModel.linkImageId=i.id,this.dataModel.linkImageIdSrc=i.downloadLinksrc}};c.\u0275fac=function(t){return new(t||c)(_(Me),_(Ce),_(H),_(F),_(j),_(q),_(G),_(W))},c.\u0275cmp=O({type:c,selectors:[["app-core-sitecategory-add"]],viewQuery:function(t,e){if(t&1&&re(xi,5),t&2){let d;ae(d=le())&&(e.formGroup=d.first)}},features:[X],decls:52,vars:32,consts:[["vform","ngForm"],["LocationType","ngModel"],["Title",""],["TitleResourceLanguage",""],["GeoLocationLatitude",""],["GeoLocationLongitude",""],["LinkImageId",""],[1,"card","card-style","loader-container"],[3,"optionsInfoAreaId"],[1,"card","card-style"],[1,"content","mb-0"],[1,"mb-0","color-highlight","font-600","font-12"],[3,"ngSubmit"],[3,"model","optionDisabled","optionLabel","optionRequired","optionSelectFirstItem","modelChange",4,"ngIf"],[1,"input-style","has-borders","no-icon","input-style-always-active","validate-field","mb-4"],["id","dataModel.locationType","name","dataModel.locationType",1,"form-control","validate-name",3,"ngModelChange","ngModel"],[3,"value",4,"ngFor","ngForOf"],[4,"ngIf"],[3,"optionChange","optionDisabled","optionSelectForce","optionPlaceholder"],["for","dataModel.title",1,"color-highlight"],["matInput","","type","text","name","dataModel.title","minlength","3","maxlength","100","id","dataModel.title",1,"form-control","validate-name",3,"ngModelChange","ngModel","placeholder"],["for","dataModel.titleResourceLanguage",1,"color-highlight"],["matInput","","type","text","name","dataModel.titleResourceLanguage","minlength","3","maxlength","100","id","dataModel.titleResourceLanguage",1,"form-control","validate-name",3,"ngModelChange","ngModel","placeholder"],["for","dataModel.geoLocationLatitude",1,"color-highlight"],["matInput","","type","number","name","dataModel.geoLocationLatitude","placeholder","Geo Location Latitude","id","dataModel.geoLocationLatitude",1,"form-control","validate-name",3,"ngModelChange","ngModel"],["for","dataModel.geoLocationLongitude",1,"color-highlight"],["matInput","","type","number","name","dataModel.geoLocationLongitude","placeholder","Geo Location Latitude","id","dataModel.geoLocationLongitude",1,"form-control","validate-name",3,"ngModelChange","ngModel"],[1,"mb-3"],["style","vertical-align:middle;","class","ntk-hover-zoom","aria-hidden","","height","50","width","50",3,"src",4,"ngIf"],["class","input-style has-borders no-icon input-style-always-active validate-field mb-4",4,"ngIf"],["class","form-actions",4,"ngIf"],[3,"modelChange","model","optionDisabled","optionLabel","optionRequired","optionSelectFirstItem"],[3,"value"],["aria-hidden","","height","50","width","50",1,"ntk-hover-zoom",2,"vertical-align","middle",3,"src"],["for","dataModel.linkImageId",1,"color-highlight",3,"click"],["matInput","","type","text","name","dataModel.linkImageId","autocomplete","off","id","dataModel.linkImageId",1,"form-control","validate-name",3,"ngModelChange","click","ngModel","placeholder"],[3,"itemSelected","openFormChange","language","selectFileType","isPopup","openForm","openDirectUploadView","tree","openFilemanagerButtonLabelKey","openFilemanagerButtonView"],[1,"form-actions"],["type","button",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-gray",3,"click"],[1,"ft-x"],["type","submit",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-green",3,"disabled"],[1,"fa","fa-check-square-o"]],template:function(t,e){if(t&1){let d=E();a(0,"div",7),b(1,"app-progress-spinner",8),a(2,"div",9)(3,"div",10)(4,"p",11),p(5),s(),a(6,"p"),p(7),S(8,"translate"),s(),a(9,"form",12,0),M("ngSubmit",function(){return f(d),g(e.onFormSubmit())}),I(11,ki,1,5,"app-cms-enum-record-status-selector",13),a(12,"div",14)(13,"select",15,1),T("ngModelChange",function(l){return f(d),L(e.dataModel.locationType,l)||(e.dataModel.locationType=l),g(l)}),I(15,Di,2,2,"option",16),s(),a(16,"em"),p(17),S(18,"translate"),s(),I(19,Vi,5,3,"mat-error",17),s(),a(20,"app-core-location-selector",18),S(21,"translate"),M("optionChange",function(l){return f(d),g(e.onActionParentSelect(l))}),s(),a(22,"div",14)(23,"label",19),p(24),s(),a(25,"input",20,2),T("ngModelChange",function(l){return f(d),L(e.dataModel.title,l)||(e.dataModel.title=l),g(l)}),s(),a(27,"em"),p(28),s(),I(29,Fi,5,4,"mat-error",17),s(),a(30,"div",14)(31,"label",21),p(32),s(),a(33,"input",22,3),T("ngModelChange",function(l){return f(d),L(e.dataModel.titleResourceLanguage,l)||(e.dataModel.titleResourceLanguage=l),g(l)}),s(),a(35,"em"),p(36),s(),I(37,Bi,5,3,"mat-error",17),s(),a(38,"div",14)(39,"label",23),p(40,"Geo Location Latitude"),s(),a(41,"input",24,4),T("ngModelChange",function(l){return f(d),L(e.dataModel.geoLocationLatitude,l)||(e.dataModel.geoLocationLatitude=l),g(l)}),s()(),a(43,"div",14)(44,"label",25),p(45,"Geo Location Longitude"),s(),a(46,"input",26,5),T("ngModelChange",function(l){return f(d),L(e.dataModel.geoLocationLongitude,l)||(e.dataModel.geoLocationLongitude=l),g(l)}),s()(),a(48,"div",27),I(49,Pi,2,3,"img",28),s(),I(50,Oi,8,15,"div",29)(51,Gi,9,7,"div",30),s()()()()}if(t&2){let d=k(14),m=k(26),l=k(34);n(),u("optionsInfoAreaId",e.constructorInfoAreaId),n(4),v(" ",e.formInfo.formTitle," "),n(2),v(" ",C(8,26,"TITLE.Be_Careful_When_Entering_Information")," "),n(4),u("ngIf",e.fieldsInfo.recordStatus==null?null:e.fieldsInfo.recordStatus.accessWatchField),n(2),w("ngModel",e.dataModel.locationType),n(2),u("ngForOf",e.dataModelEnumLocationTypeResult.listItems),n(2),y(C(18,28,"TITLE.Select_type_of_content")),n(2),u("ngIf",d.errors==null?null:d.errors.required),n(),u("optionDisabled",!1)("optionSelectForce",e.dataModel.linkParentId)("optionPlaceholder",C(21,30,"TITLE.Parent_Area")),n(4),y(e.fieldsInfo.title==null?null:e.fieldsInfo.title.fieldTitle),n(),x("placeholder",e.fieldsInfo.title==null?null:e.fieldsInfo.title.fieldTitle),w("ngModel",e.dataModel.title),n(3),v("",m.value.length," / 100"),n(),u("ngIf",m.errors==null?null:m.errors.required),n(3),y(e.fieldsInfo.titleResourceLanguage==null?null:e.fieldsInfo.titleResourceLanguage.fieldTitle),n(),x("placeholder",e.fieldsInfo.titleResourceLanguage==null?null:e.fieldsInfo.titleResourceLanguage.fieldTitle),w("ngModel",e.dataModel.titleResourceLanguage),n(3),v("",l.value.length," / 100"),n(),u("ngIf",l.errors==null?null:l.errors.required),n(4),w("ngModel",e.dataModel.geoLocationLatitude),n(5),w("ngModel",e.dataModel.geoLocationLongitude),n(3),u("ngIf",(e.dataModel==null||e.dataModel.linkImageIdSrc==null?null:e.dataModel.linkImageIdSrc.length)>0),n(),u("ngIf",e.fieldsInfo.linkImageId==null?null:e.fieldsInfo.linkImageId.accessWatchField),n(),u("ngIf",e.formInfo.formSubmitAllow)}},dependencies:[Y,N,pe,fe,ge,Z,me,ue,$,se,he,_e,de,ce,Se,U,ye,K,be,we,z,ie],styles:[".form-body[_ngcontent-%COMP%]{width:500px}@media (max-width: 700px){.form-body[_ngcontent-%COMP%]{display:contents}}#file-manager[_ngcontent-%COMP%]{width:calc(100vw - 16px);height:calc(100vh - 16px)}.recordStatus-1.mat-select-panel[_ngcontent-%COMP%]{background:#ff0}.recordStatus-2.mat-select-panel[_ngcontent-%COMP%]{background:#000}.recordStatus-3.mat-select-panel[_ngcontent-%COMP%]{background:red}"]});let o=c;return o})();var Ni=["vform"];function Wi(o,c){if(o&1){let r=E();a(0,"app-cms-enum-record-status-selector",28),T("modelChange",function(t){f(r);let e=h();return L(e.dataModel.recordStatus,t)||(e.dataModel.recordStatus=t),g(t)}),s()}if(o&2){let r=h();w("model",r.dataModel.recordStatus),u("optionDisabled",!1)("optionLabel",r.fieldsInfo.recordStatus==null?null:r.fieldsInfo.recordStatus.fieldTitle)("optionRequired",!0)("optionSelectFirstItem",!0)}}function Hi(o,c){if(o&1&&(a(0,"option",29),p(1),s()),o&2){let r=c.$implicit;u("value",r.value),n(),y(r.description)}}function ji(o,c){o&1&&(a(0,"mat-error"),p(1," LocationType is "),a(2,"strong"),p(3),S(4,"translate"),s()()),o&2&&(n(3),y(C(4,1,"MESSAGE.required")))}function qi(o,c){o&1&&(a(0,"mat-error"),p(1," Title is "),a(2,"strong"),p(3),S(4,"translate"),s()()),o&2&&(n(3),y(C(4,1,"MESSAGE.required")))}function zi(o,c){if(o&1&&(b(0,"img",30),S(1,"cmsthumbnail")),o&2){let r=h();x("src",C(1,1,r.dataModel.linkImageIdSrc),J)}}function Ui(o,c){if(o&1){let r=E();a(0,"div",31)(1,"button",32),M("click",function(){f(r);let t=h();return g(t.onFormCancel())}),b(2,"i",33),p(3),S(4,"translate"),s(),a(5,"button",34),b(6,"i",35),p(7),S(8,"translate"),s()()}if(o&2){h();let r=k(9);n(3),v(" ",C(4,3,"ACTION.CANCEL")," "),n(2),u("disabled",!r.form.valid),n(2),v(" ",C(8,5,"ACTION.SAVE")," ")}}var Ii=(()=>{let c=class c extends qe{constructor(i,t,e,d,m,l,B,P){super(d,new D,l,P),this.data=i,this.dialogRef=t,this.coreEnumService=e,this.coreLocationService=d,this.cmsToastrService=m,this.publicHelper=l,this.cdr=B,this.translate=P,this.requestId=0,this.constructorInfoAreaId=this.constructor.name,this.fieldsInfo=new Map,this.selectFileTypeMainImage=["jpg","jpeg","png"],this.appLanguage="fa",this.dataModelResult=new V,this.dataModel=new D,this.formInfo=new ve,this.dataModelEnumLocationTypeResult=new V,this.fileManagerOpenForm=!1,this.publicHelper.processService.cdr=this.cdr,i&&(this.requestId=+i.id||0),this.requestId>0&&(this.dataModel.linkParentId=this.requestId),this.fileManagerTree=this.publicHelper.GetfileManagerTreeConfig()}ngOnInit(){this.translate.get("TITLE.ADD").subscribe(i=>{this.formInfo.formTitle=i}),this.getEnumLocationType(),this.DataGetAccess()}getEnumLocationType(){this.coreEnumService.ServiceLocationTypeEnum().subscribe({next:i=>{this.dataModelEnumLocationTypeResult=i}})}DataAddContent(){this.translate.get("MESSAGE.sending_information_to_the_server").subscribe(t=>{this.formInfo.formAlert=t}),this.formInfo.formError="";let i=this.constructor.name+"main";this.translate.get("MESSAGE.Receiving_information").subscribe(t=>{this.publicHelper.processService.processStart(i,t,this.constructorInfoAreaId)}),this.coreLocationService.ServiceAdd(this.dataModel).subscribe({next:t=>{this.formInfo.formSubmitAllow=!0,this.dataModelResult=t,t.isSuccess?(this.translate.get("MESSAGE.registration_completed_successfully").subscribe(e=>{this.formInfo.formAlert=e}),this.cmsToastrService.typeSuccessAdd(),this.dialogRef.close({dialogChangedDate:!0})):(this.translate.get("ERRORMESSAGE.MESSAGE.typeError").subscribe(e=>{this.formInfo.formAlert=e}),this.formInfo.formError=t.errorMessage,this.cmsToastrService.typeErrorMessage(t.errorMessage)),this.publicHelper.processService.processStop(i)},error:t=>{this.formInfo.formSubmitAllow=!0,this.cmsToastrService.typeError(t),this.publicHelper.processService.processStop(i,!1)}})}onFormSubmit(){if(this.formGroup.valid){this.formInfo.formSubmitAllow=!1;var i=this.dataModel.title.split(`
`);i.forEach(t=>{this.dataModel.title=t,this.DataAddContent()})}}onFormCancel(){this.dialogRef.close({dialogChangedDate:!1})}onActionParentSelect(i){this.dataModel.linkParentId=null,i&&i.id>0&&(this.dataModel.linkParentId=i.id)}onActionFileSelected(i){this.dataModel.linkImageId=i.id,this.dataModel.linkImageIdSrc=i.downloadLinksrc}};c.\u0275fac=function(t){return new(t||c)(_(Me),_(Ce),_(H),_(F),_(j),_(q),_(G),_(W))},c.\u0275cmp=O({type:c,selectors:[["app-core-location-add-bulk"]],viewQuery:function(t,e){if(t&1&&re(Ni,5),t&2){let d;ae(d=le())&&(e.formGroup=d.first)}},features:[X],decls:50,vars:43,consts:[["vform","ngForm"],["LocationType","ngModel"],["Title",""],["GeoLocationLatitude",""],["GeoLocationLongitude",""],["LinkImageId",""],[1,"card","card-style","loader-container"],[3,"optionsInfoAreaId"],[1,"content","mb-0"],[1,"mb-0","color-highlight","font-600","font-12"],[3,"ngSubmit"],[3,"model","optionDisabled","optionLabel","optionRequired","optionSelectFirstItem","modelChange",4,"ngIf"],[1,"input-style","has-borders","no-icon","input-style-always-active","validate-field","mb-4"],["name","dataModel.locationType",1,"form-control","validate-name",3,"ngModelChange","ngModel","ngClass"],[3,"value",4,"ngFor","ngForOf"],[4,"ngIf"],[3,"optionChange","optionDisabled","optionSelectForce","optionPlaceholder"],["for","dataModel.title",1,"color-highlight"],["matInput","","name","dataModel.title","type","text","minlength","3","maxlength","5000","id","dataModel.title","required","","cols","50",1,"form-control","validate-name",3,"ngModelChange","ngModel","placeholder"],["for","dataModel.geoLocationLatitude",1,"color-highlight"],["matInput","","name","dataModel.geoLocationLatitude","type","number","placeholder","Geo Location Latitude","id","dataModel.geoLocationLatitude",1,"form-control","validate-name",3,"ngModelChange","ngModel"],["for","dataModel.geoLocationLongitude",1,"color-highlight"],["matInput","","name","dataModel.geoLocationLongitude","type","number","id","dataModel.geoLocationLongitude","placeholder","Geo Location Latitude",1,"form-control","validate-name",3,"ngModelChange","ngModel"],["style","vertical-align:middle;","class","ntk-hover-zoom","aria-hidden","","height","50","width","50",3,"src",4,"ngIf"],["for","dataModel.linkImageId",1,"color-highlight",3,"click"],["matInput","","name","dataModel.linkImageId","type","text","id","dataModel.linkImageId",1,"form-control","validate-name",3,"ngModelChange","click","ngModel","placeholder"],[3,"itemSelected","openFormChange","language","selectFileType","isPopup","openForm","openDirectUploadView","tree","openFilemanagerButtonLabelKey","openFilemanagerButtonView"],["class","form-actions",4,"ngIf"],[3,"modelChange","model","optionDisabled","optionLabel","optionRequired","optionSelectFirstItem"],[3,"value"],["aria-hidden","","height","50","width","50",1,"ntk-hover-zoom",2,"vertical-align","middle",3,"src"],[1,"form-actions"],["type","button",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-gray",3,"click"],[1,"ft-x"],["type","submit",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-green",3,"disabled"],[1,"fa","fa-check-square-o"]],template:function(t,e){if(t&1){let d=E();a(0,"div",6),b(1,"app-progress-spinner",7),a(2,"div",8)(3,"p",9),p(4),s(),a(5,"p"),p(6),S(7,"translate"),s(),a(8,"form",10,0),M("ngSubmit",function(){return f(d),g(e.onFormSubmit())}),I(10,Wi,1,5,"app-cms-enum-record-status-selector",11),a(11,"div",12)(12,"select",13,1),T("ngModelChange",function(l){return f(d),L(e.dataModel.locationType,l)||(e.dataModel.locationType=l),g(l)}),I(14,Hi,2,2,"option",14),s(),a(15,"em"),p(16),S(17,"translate"),s(),I(18,ji,5,3,"mat-error",15),s(),a(19,"app-core-location-selector",16),S(20,"translate"),M("optionChange",function(l){return f(d),g(e.onActionParentSelect(l))}),s(),a(21,"div",12)(22,"label",17),p(23),s(),a(24,"textarea",18,2),T("ngModelChange",function(l){return f(d),L(e.dataModel.title,l)||(e.dataModel.title=l),g(l)}),p(26,"                "),s(),a(27,"em"),p(28),s(),I(29,qi,5,3,"mat-error",15),s(),a(30,"div",12)(31,"label",19),p(32,"Geo Location Latitude"),s(),a(33,"input",20,3),T("ngModelChange",function(l){return f(d),L(e.dataModel.geoLocationLatitude,l)||(e.dataModel.geoLocationLatitude=l),g(l)}),s()(),a(35,"div",12)(36,"label",21),p(37,"Geo Location Longitude"),s(),a(38,"input",22,4),T("ngModelChange",function(l){return f(d),L(e.dataModel.geoLocationLongitude,l)||(e.dataModel.geoLocationLongitude=l),g(l)}),s()(),a(40,"div",12),I(41,zi,2,3,"img",23),a(42,"label",24),M("click",function(){return f(d),g(e.fileManagerOpenForm=!0)}),p(43),S(44,"translate"),s(),a(45,"input",25,5),S(47,"translate"),T("ngModelChange",function(l){return f(d),L(e.dataModel.linkImageId,l)||(e.dataModel.linkImageId=l),g(l)}),M("click",function(){return f(d),g(e.fileManagerOpenForm=!0)}),s()(),a(48,"cms-file-manager",26),M("itemSelected",function(l){return f(d),g(e.onActionFileSelected(l))}),T("openFormChange",function(l){return f(d),L(e.fileManagerOpenForm,l)||(e.fileManagerOpenForm=l),g(l)}),s(),I(49,Ui,9,7,"div",27),s()()()}if(t&2){let d=k(13),m=k(25);n(),u("optionsInfoAreaId",e.constructorInfoAreaId),n(3),v(" ",e.formInfo.formTitle," "),n(2),v(" ",C(7,33,"TITLE.Be_Careful_When_Entering_Information")," "),n(4),u("ngIf",e.fieldsInfo.recordStatus==null?null:e.fieldsInfo.recordStatus.accessWatchField),n(2),Ee("ngClass","LocationType-",e.dataModel.locationType,""),w("ngModel",e.dataModel.locationType),n(2),u("ngForOf",e.dataModelEnumLocationTypeResult.listItems),n(2),y(C(17,35,"TITLE.Select_type_of_content")),n(2),u("ngIf",d.errors==null?null:d.errors.required),n(),u("optionDisabled",!1)("optionSelectForce",e.dataModel.linkParentId)("optionPlaceholder",C(20,37,"TITLE.Parent_Area")),n(4),y(e.fieldsInfo.title==null?null:e.fieldsInfo.title.fieldTitle),n(),x("placeholder",e.fieldsInfo.title==null?null:e.fieldsInfo.title.fieldTitle),w("ngModel",e.dataModel.title),n(4),v("",m.value.length," / 5000"),n(),u("ngIf",m.errors==null?null:m.errors.required),n(4),w("ngModel",e.dataModel.geoLocationLatitude),n(5),w("ngModel",e.dataModel.geoLocationLongitude),n(3),u("ngIf",(e.dataModel==null||e.dataModel.linkImageIdSrc==null?null:e.dataModel.linkImageIdSrc.length)>0),n(2),y(C(44,39,"TITLE.PHOTO_FILE")),n(2),x("placeholder",C(47,41,"TITLE.Icon_File_ID")),w("ngModel",e.dataModel.linkImageId),n(3),u("language",e.appLanguage)("selectFileType",e.selectFileTypeMainImage)("isPopup",!0),w("openForm",e.fileManagerOpenForm),u("openDirectUploadView",!0)("tree",e.fileManagerTree)("openFilemanagerButtonLabelKey","select")("openFilemanagerButtonView",!1),n(),u("ngIf",e.formInfo.formSubmitAllow)}},dependencies:[Ne,Y,N,pe,fe,ge,Z,me,ue,$,se,vt,he,_e,de,ce,Se,U,ye,K,be,we,z,ie],styles:[".form-body[_ngcontent-%COMP%]{width:500px}@media (max-width: 700px){.form-body[_ngcontent-%COMP%]{display:contents}}#file-manager[_ngcontent-%COMP%]{width:calc(100vw - 16px);height:calc(100vh - 16px)}.recordStatus-1.mat-select-panel[_ngcontent-%COMP%]{background:#ff0}.recordStatus-2.mat-select-panel[_ngcontent-%COMP%]{background:#000}.recordStatus-3.mat-select-panel[_ngcontent-%COMP%]{background:red}"]});let o=c;return o})();var Qi=["vform"];function Ki(o,c){if(o&1){let r=E();a(0,"app-cms-enum-record-status-selector",32),T("modelChange",function(t){f(r);let e=h();return L(e.dataModel.recordStatus,t)||(e.dataModel.recordStatus=t),g(t)}),s()}if(o&2){let r=h();w("model",r.dataModel.recordStatus),u("optionDisabled",!1)("optionLabel",r.fieldsInfo.recordStatus==null?null:r.fieldsInfo.recordStatus.fieldTitle)("optionRequired",!0)("optionSelectFirstItem",!0)}}function Ji(o,c){if(o&1&&(a(0,"option",33),p(1),s()),o&2){let r=c.$implicit;u("value",r.value),n(),v(" ",r.description," ")}}function Xi(o,c){o&1&&(a(0,"mat-error"),p(1," LocationType is "),a(2,"strong"),p(3),S(4,"translate"),s()()),o&2&&(n(3),y(C(4,1,"MESSAGE.required")))}function Yi(o,c){if(o&1&&(a(0,"mat-error"),p(1),a(2,"strong"),p(3),S(4,"translate"),s()()),o&2){let r=h();n(),v(" ",r.fieldsInfo.title==null?null:r.fieldsInfo.title.fieldTitle," is "),n(2),y(C(4,2,"MESSAGE.required"))}}function Zi(o,c){o&1&&(a(0,"mat-error"),p(1," TitleResourceLanguage is "),a(2,"strong"),p(3),S(4,"translate"),s()()),o&2&&(n(3),y(C(4,1,"MESSAGE.required")))}function $i(o,c){if(o&1&&(b(0,"img",34),S(1,"cmsthumbnail")),o&2){let r=h();x("src",C(1,1,r.dataModel.linkImageIdSrc),J)}}function eo(o,c){if(o&1){let r=E();a(0,"div",13)(1,"label",35),M("click",function(){f(r);let t=h();return g(t.fileManagerOpenForm=!0)}),p(2),S(3,"translate"),s(),a(4,"input",36,6),S(6,"translate"),T("ngModelChange",function(t){f(r);let e=h();return L(e.dataModel.linkImageId,t)||(e.dataModel.linkImageId=t),g(t)}),M("click",function(){f(r);let t=h();return g(t.fileManagerOpenForm=!0)}),s(),a(7,"cms-file-manager",37),M("itemSelected",function(t){f(r);let e=h();return g(e.onActionFileSelected(t))}),T("openFormChange",function(t){f(r);let e=h();return L(e.fileManagerOpenForm,t)||(e.fileManagerOpenForm=t),g(t)}),s()()}if(o&2){let r=h();n(2),y(C(3,11,"TITLE.PHOTO_FILE")),n(2),x("placeholder",C(6,13,"TITLE.Icon_File_ID")),w("ngModel",r.dataModel.linkImageId),n(3),u("language",r.appLanguage)("selectFileType",r.selectFileTypeMainImage)("isPopup",!0),w("openForm",r.fileManagerOpenForm),u("openDirectUploadView",!0)("tree",r.fileManagerTree)("openFilemanagerButtonLabelKey","select")("openFilemanagerButtonView",!1)}}function to(o,c){if(o&1){let r=E();a(0,"div",38)(1,"button",39),M("click",function(){f(r);let t=h();return g(t.onFormCancel())}),b(2,"i",40),p(3),S(4,"translate"),s(),a(5,"button",41),b(6,"i",42),p(7),S(8,"translate"),s()()}if(o&2){h();let r=k(9);n(3),v(" ",C(4,3,"ACTION.CANCEL")," "),n(2),u("disabled",!r.form.valid),n(2),v(" ",C(8,5,"ACTION.SAVE")," ")}}var Xe=(()=>{let c=class c extends gi{constructor(i,t,e,d,m,l,B,P){super(d,new D,l,P),this.data=i,this.dialogRef=t,this.coreEnumService=e,this.coreLocationService=d,this.cmsToastrService=m,this.publicHelper=l,this.cdr=B,this.translate=P,this.requestId=0,this.constructorInfoAreaId=this.constructor.name,this.selectFileTypeMainImage=["jpg","jpeg","png"],this.appLanguage="fa",this.dataModelResult=new Rt,this.dataModel=new D,this.formInfo=new ve,this.dataModelEnumLocationTypeResult=new V,this.fileManagerOpenForm=!1,this.publicHelper.processService.cdr=this.cdr,i&&(this.requestId=+i.id||0),this.fileManagerTree=this.publicHelper.GetfileManagerTreeConfig()}ngOnInit(){if(this.requestId>0)this.translate.get("TITLE.Edit").subscribe(i=>{this.formInfo.formTitle=i}),this.DataGetOneContent();else{this.cmsToastrService.typeErrorComponentAction(),this.dialogRef.close({dialogChangedDate:!1});return}this.getEnumLocationType()}getEnumLocationType(){this.coreEnumService.ServiceLocationTypeEnum().subscribe({next:i=>{this.dataModelEnumLocationTypeResult=i}})}DataGetOneContent(){if(this.requestId<=0){this.cmsToastrService.typeErrorEditRowIsNull();return}this.translate.get("MESSAGE.Receiving_Information_From_The_Server").subscribe(t=>{this.formInfo.formAlert=t}),this.formInfo.formError="";let i=this.constructor.name+"main";this.translate.get("MESSAGE.Receiving_information").subscribe(t=>{this.publicHelper.processService.processStart(i,t,this.constructorInfoAreaId)}),this.coreLocationService.setAccessLoad(),this.coreLocationService.setAccessDataType(At.Editor),this.coreLocationService.ServiceGetOneById(this.requestId).subscribe({next:t=>{this.fieldsInfo=this.publicHelper.fieldInfoConvertor(t.access),this.dataModel=t.item,t.isSuccess?(this.formInfo.formTitle=this.formInfo.formTitle+" "+t.item.title,this.formInfo.formAlert=""):(this.translate.get("ERRORMESSAGE.MESSAGE.typeError").subscribe(e=>{this.formInfo.formAlert=e}),this.formInfo.formError=t.errorMessage,this.cmsToastrService.typeErrorMessage(t.errorMessage)),this.publicHelper.processService.processStop(i)},error:t=>{this.cmsToastrService.typeError(t),this.publicHelper.processService.processStop(i,!1)}})}DataEditContent(){this.translate.get("MESSAGE.sending_information_to_the_server").subscribe(t=>{this.formInfo.formAlert=t}),this.formInfo.formError="";let i=this.constructor.name+"main";this.translate.get("MESSAGE.sending_information_to_the_server").subscribe(t=>{this.publicHelper.processService.processStart(i,t,this.constructorInfoAreaId)}),this.coreLocationService.ServiceEdit(this.dataModel).subscribe({next:t=>{this.formInfo.formSubmitAllow=!0,this.dataModelResult=t,t.isSuccess?(this.translate.get("MESSAGE.registration_completed_successfully").subscribe(e=>{this.formInfo.formAlert=e}),this.cmsToastrService.typeSuccessEdit(),this.dialogRef.close({dialogChangedDate:!0})):(this.translate.get("ERRORMESSAGE.MESSAGE.typeError").subscribe(e=>{this.formInfo.formAlert=e}),this.formInfo.formError=t.errorMessage,this.cmsToastrService.typeErrorMessage(t.errorMessage)),this.publicHelper.processService.processStop(i)},error:t=>{this.formInfo.formSubmitAllow=!0,this.cmsToastrService.typeError(t),this.publicHelper.processService.processStop(i,!1)}})}onActionParentSelect(i){this.dataModel.linkParentId=null,i&&i.id>0&&(this.dataModel.linkParentId=i.id)}onFormSubmit(){this.formGroup.valid&&(this.formInfo.formSubmitAllow=!1,this.DataEditContent())}onFormCancel(){this.dialogRef.close({dialogChangedDate:!1})}onActionFileSelected(i){this.dataModel.linkImageId=i.id,this.dataModel.linkImageIdSrc=i.downloadLinksrc}};c.\u0275fac=function(t){return new(t||c)(_(Me),_(Ce),_(H),_(F),_(j),_(q),_(G),_(W))},c.\u0275cmp=O({type:c,selectors:[["app-core-sitecategory-edit"]],viewQuery:function(t,e){if(t&1&&re(Qi,5),t&2){let d;ae(d=le())&&(e.formGroup=d.first)}},features:[X],decls:57,vars:38,consts:[["vform","ngForm"],["LocationType","ngModel"],["Title",""],["TitleResourceLanguage",""],["GeoLocationLatitude",""],["GeoLocationLongitude",""],["LinkImageId",""],[1,"card","card-style","loader-container"],[3,"optionsInfoAreaId"],[1,"content","mb-0"],[1,"mb-0","color-highlight","font-600","font-12"],[3,"ngSubmit"],[3,"model","optionDisabled","optionLabel","optionRequired","optionSelectFirstItem","modelChange",4,"ngIf"],[1,"input-style","has-borders","no-icon","input-style-always-active","validate-field","mb-4"],["id","dataModel.locationType","name","dataModel.locationType",1,"form-control","validate-name",3,"ngModelChange","ngModel"],[3,"value",4,"ngFor","ngForOf"],[4,"ngIf"],[3,"optionChange","optionDisabled","optionSelectForce","optionPlaceholder"],["for","dataModel.title",1,"color-highlight"],["matInput","","type","text","name","dataModel.title","minlength","3","maxlength","100","id","dataModel.title",1,"form-control","validate-name",3,"ngModelChange","ngModel","placeholder"],["for","dataModel.titleML",1,"color-highlight"],["matInput","","type","text","name","dataModel.titleML","id","dataModel.titleML",1,"form-control","validate-name",3,"ngModelChange","ngModel","disabled"],["for","dataModel.titleResourceLanguage",1,"color-highlight"],["matInput","","type","text","name","dataModel.titleResourceLanguage","minlength","3","maxlength","100","id","dataModel.titleResourceLanguage",1,"form-control","validate-name",3,"ngModelChange","ngModel","placeholder","disabled"],["for","dataModel.geoLocationLatitude",1,"color-highlight"],["matInput","","type","number","name","dataModel.geoLocationLatitude","placeholder","Geo Location Latitude","id","dataModel.geoLocationLatitude",1,"form-control","validate-name",3,"ngModelChange","ngModel"],["for","dataModel.geoLocationLongitude",1,"color-highlight"],["matInput","","type","number","name","dataModel.geoLocationLongitude","placeholder","Geo Location Latitude","id","dataModel.geoLocationLongitude",1,"form-control","validate-name",3,"ngModelChange","ngModel"],[1,"mb-3"],["style","vertical-align:middle;","class","ntk-hover-zoom","aria-hidden","","height","50","width","50",3,"src",4,"ngIf"],["class","input-style has-borders no-icon input-style-always-active validate-field mb-4",4,"ngIf"],["class","form-actions",4,"ngIf"],[3,"modelChange","model","optionDisabled","optionLabel","optionRequired","optionSelectFirstItem"],[3,"value"],["aria-hidden","","height","50","width","50",1,"ntk-hover-zoom",2,"vertical-align","middle",3,"src"],["for","dataModel.linkImageId",1,"color-highlight",3,"click"],["matInput","","type","text","name","dataModel.linkImageId","autocomplete","off","id","dataModel.linkImageId",1,"form-control","validate-name",3,"ngModelChange","click","ngModel","placeholder"],[3,"itemSelected","openFormChange","language","selectFileType","isPopup","openForm","openDirectUploadView","tree","openFilemanagerButtonLabelKey","openFilemanagerButtonView"],[1,"form-actions"],["type","button",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-gray",3,"click"],[1,"ft-x"],["type","submit",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-green",3,"disabled"],[1,"fa","fa-check-square-o"]],template:function(t,e){if(t&1){let d=E();a(0,"div",7),b(1,"app-progress-spinner",8),a(2,"div",9)(3,"p",10),p(4),s(),a(5,"p"),p(6),S(7,"translate"),s(),a(8,"form",11,0),M("ngSubmit",function(){return f(d),g(e.onFormSubmit())}),I(10,Ki,1,5,"app-cms-enum-record-status-selector",12),a(11,"div",13)(12,"select",14,1),T("ngModelChange",function(l){return f(d),L(e.dataModel.locationType,l)||(e.dataModel.locationType=l),g(l)}),I(14,Ji,2,2,"option",15),s(),a(15,"em"),p(16),S(17,"translate"),s(),I(18,Xi,5,3,"mat-error",16),s(),a(19,"app-core-location-selector",17),S(20,"translate"),M("optionChange",function(l){return f(d),g(e.onActionParentSelect(l))}),s(),a(21,"div",13)(22,"label",18),p(23),s(),a(24,"input",19,2),T("ngModelChange",function(l){return f(d),L(e.dataModel.title,l)||(e.dataModel.title=l),g(l)}),s(),a(26,"em"),p(27),s(),I(28,Yi,5,4,"mat-error",16),s(),a(29,"div",13)(30,"label",20),p(31),S(32,"translate"),s(),a(33,"input",21,2),T("ngModelChange",function(l){return f(d),L(e.dataModel.titleML,l)||(e.dataModel.titleML=l),g(l)}),s()(),a(35,"div",13)(36,"label",22),p(37),s(),a(38,"input",23,3),T("ngModelChange",function(l){return f(d),L(e.dataModel.titleResourceLanguage,l)||(e.dataModel.titleResourceLanguage=l),g(l)}),s(),a(40,"em"),p(41),s(),I(42,Zi,5,3,"mat-error",16),s(),a(43,"div",13)(44,"label",24),p(45,"Geo Location Latitude"),s(),a(46,"input",25,4),T("ngModelChange",function(l){return f(d),L(e.dataModel.geoLocationLatitude,l)||(e.dataModel.geoLocationLatitude=l),g(l)}),s()(),a(48,"div",13)(49,"label",26),p(50,"Geo Location Longitude"),s(),a(51,"input",27,5),T("ngModelChange",function(l){return f(d),L(e.dataModel.geoLocationLongitude,l)||(e.dataModel.geoLocationLongitude=l),g(l)}),s()(),a(53,"div",28),I(54,$i,2,3,"img",29),s(),I(55,eo,8,15,"div",30)(56,to,9,7,"div",31),s()()()}if(t&2){let d=k(13),m=k(25),l=k(39);n(),u("optionsInfoAreaId",e.constructorInfoAreaId),n(3),v(" ",e.formInfo.formTitle," "),n(2),v(" ",C(7,30,"TITLE.Be_Careful_When_Entering_Information")," "),n(4),u("ngIf",e.fieldsInfo.recordStatus==null?null:e.fieldsInfo.recordStatus.accessWatchField),n(2),w("ngModel",e.dataModel.locationType),n(2),u("ngForOf",e.dataModelEnumLocationTypeResult.listItems),n(2),y(C(17,32,"TITLE.Select_type_of_content")),n(2),u("ngIf",d.errors==null?null:d.errors.required),n(),u("optionDisabled",!1)("optionSelectForce",e.dataModel.linkParentId)("optionPlaceholder",C(20,34,"TITLE.Parent_Area")),n(4),y(e.fieldsInfo.title==null?null:e.fieldsInfo.title.fieldTitle),n(),x("placeholder",e.fieldsInfo.title==null?null:e.fieldsInfo.title.fieldTitle),w("ngModel",e.dataModel.title),n(3),v("",m.value.length," / 100"),n(),u("ngIf",m.errors==null?null:m.errors.required),n(3),y(C(32,36,"TITLE.TitleML")),n(2),w("ngModel",e.dataModel.titleML),u("disabled",!0),n(4),y(e.fieldsInfo.titleResourceLanguage==null?null:e.fieldsInfo.titleResourceLanguage.fieldTitle),n(),x("placeholder",e.fieldsInfo.titleResourceLanguage==null?null:e.fieldsInfo.titleResourceLanguage.fieldTitle),w("ngModel",e.dataModel.titleResourceLanguage),u("disabled",!(e.fieldsInfo.titleResourceLanguage!=null&&e.fieldsInfo.titleResourceLanguage.accessEditField)),n(3),v("",l.value.length," / 100"),n(),u("ngIf",l.errors==null?null:l.errors.required),n(4),w("ngModel",e.dataModel.geoLocationLatitude),n(5),w("ngModel",e.dataModel.geoLocationLongitude),n(3),u("ngIf",(e.dataModel==null||e.dataModel.linkImageIdSrc==null?null:e.dataModel.linkImageIdSrc.length)>0),n(),u("ngIf",e.fieldsInfo.linkImageId==null?null:e.fieldsInfo.linkImageId.accessWatchField),n(),u("ngIf",e.formInfo.formSubmitAllow)}},dependencies:[Y,N,pe,fe,ge,Z,me,ue,$,se,he,_e,de,ce,Se,U,ye,K,be,we,z,ie],styles:[".form-body[_ngcontent-%COMP%]{width:500px}@media (max-width: 700px){.form-body[_ngcontent-%COMP%]{display:contents}}#file-manager[_ngcontent-%COMP%]{width:calc(100vw - 16px);height:calc(100vh - 16px)}.recordStatus-1.mat-select-panel[_ngcontent-%COMP%]{background:#ff0}.recordStatus-2.mat-select-panel[_ngcontent-%COMP%]{background:#000}.recordStatus-3.mat-select-panel[_ngcontent-%COMP%]{background:red}"]});let o=c;return o})();function no(o,c){if(o&1){let r=E();a(0,"button",12),M("click",function(){f(r);let t=h();return g(t.onActionAdd())}),p(1),S(2,"translate"),s()}o&2&&(n(),y(C(2,1,"ACTION.ADD")))}function ro(o,c){if(o&1){let r=E();a(0,"button",13),M("click",function(){f(r);let t=h();return g(t.onActionEdit())}),p(1),S(2,"translate"),s()}o&2&&(n(),y(C(2,1,"ACTION.EDIT")))}function ao(o,c){if(o&1){let r=E();a(0,"button",14),M("click",function(){f(r);let t=h();return g(t.onActionButtonReload())}),a(1,"mat-icon",15),S(2,"translate"),p(3,"refresh"),s()()}o&2&&(n(),x("title",C(2,1,"ACTION.RELOAD")))}function lo(o,c){if(o&1){let r=E();a(0,"mat-tree-node",16),M("click",function(){let t=f(r).$implicit,e=h();return g(e.onActionSelect(t))}),b(1,"button",17),p(2),s()}if(o&2){let r=c.$implicit,i=c.dataIndex,t=h();ne("ntk-tree-odd",i%2)("ntk-tree-even",!(i%2))("ntk-tree-selected",t.dataModelSelect.id>0&&t.dataModelSelect.id===r.id),n(2),v(" ",r.titleML," ")}}function so(o,c){if(o&1){let r=E();a(0,"mat-nested-tree-node")(1,"li")(2,"div",18),M("click",function(){let t=f(r).$implicit,e=h();return g(e.onActionSelect(t))}),a(3,"button",19),M("click",function(){let t=f(r).$implicit,e=h();return g(e.onActionSelect(t))}),a(4,"mat-icon",20),p(5),s()(),p(6),s(),a(7,"ul"),Te(8,21),s()()()}if(o&2){let r=c.$implicit,i=h();n(2),ne("ntk-tree-selected",i.dataModelSelect.id>0&&i.dataModelSelect.id===r.id),n(),Ge("aria-label","Toggle "+r.titleML),n(2),v(" ",i.treeControl.isExpanded(r)?"expand_more":"chevron_right"," "),n(),v(" ",r.titleML," "),n(),ne("category-tree-invisible",!i.treeControl.isExpanded(r))}}var vi=(()=>{let c=class c{constructor(i,t,e,d,m,l,B,P){this.cmsToastrService=i,this.coreEnumService=t,this.categoryService=e,this.dialog=d,this.cdr=m,this.publicHelper=l,this.tokenHelper=B,this.translate=P,this.constructorInfoAreaId=this.constructor.name,this.dataModelSelect=new D,this.dataModelResult=new V,this.filterModel=new te,this.treeControl=new Zt(Fe=>Fe.children),this.dataSource=new ai,this.optionChange=new Oe,this.optionReload=()=>this.onActionButtonReload(),this.hasChild=(Fe,Le)=>!!Le.children&&Le.children.length>0,this.firstLoadDataRunned=!1,this.publicHelper.processService.cdr=this.cdr}set optionSelectForce(i){this.onActionSelectForce(i)}ngOnInit(){setTimeout(()=>{this.firstLoadDataRunned||this.DataGetAll()},500),this.cmsApiStoreSubscribe=this.tokenHelper.getTokenInfoStateOnChange().subscribe(i=>{this.DataGetAll()})}ngOnDestroy(){this.cmsApiStoreSubscribe.unsubscribe()}DataGetAll(){this.filterModel.rowPerPage=200,this.filterModel.accessLoad=!0;let i=this.constructor.name+"main";this.translate.get("MESSAGE.Receiving_information").subscribe(t=>{this.publicHelper.processService.processStart(i,t,this.constructorInfoAreaId)}),this.categoryService.ServiceGetAllTree(this.filterModel).subscribe({next:t=>{t.isSuccess?(this.dataModelResult=t,this.dataSource.data=this.dataModelResult.listItems,this.cdr.detectChanges()):this.cmsToastrService.typeErrorMessage(t.errorMessage),this.publicHelper.processService.processStop(i)},error:t=>{this.cmsToastrService.typeError(t),this.publicHelper.processService.processStop(i,!1)}})}DataGetAllChild(i){let t=new te;t.rowPerPage=200,t.accessLoad=!0;let e=new ee;e.propertyName="LinkParentId",e.value=i.id,t.filters.push(e);let d=this.constructor.name+"main";this.translate.get("MESSAGE.Receiving_information").subscribe(m=>{this.publicHelper.processService.processStart(d,m,this.constructorInfoAreaId)}),this.categoryService.ServiceGetAllTree(t).subscribe({next:m=>{if(m.isSuccess){i.children=m.listItems,this.dataSource.data=null,this.dataSource.data=this.dataModelResult.listItems,this.cdr.detectChanges(),this.publicHelper.processService.processStop(d);return}else this.cmsToastrService.typeErrorMessage(m.errorMessage)},error:m=>{this.cmsToastrService.typeError(m),this.publicHelper.processService.processStop(d,!1)}})}onActionSelect(i){this.dataModelSelect=i,this.optionChange.emit(this.dataModelSelect),this.dataModelSelect&&this.dataModelSelect.id>0&&(this.dataModelSelect.children==null||this.dataModelSelect.children?.length==0)&&this.DataGetAllChild(this.dataModelSelect)}onActionButtonReload(){this.onActionSelect(null),this.dataModelSelect=new D,this.DataGetAll()}onActionSelectForce(i){}onActionAdd(){let i=0;this.dataModelSelect&&this.dataModelSelect.id>0&&(i=this.dataModelSelect.id);let t=new Tt;t.disableClose=!0,t.autoFocus=!0,t.data={id:i},this.dialog.open(Je,t).afterClosed().subscribe(d=>{d&&d.dialogChangedDate&&this.DataGetAll()})}onActionEdit(){let i=0;if(this.dataModelSelect&&this.dataModelSelect.id>0&&(i=this.dataModelSelect.id),i===0){this.translate.get("ERRORMESSAGE.MESSAGE.typeErrorCategoryNotSelected").subscribe(d=>{this.cmsToastrService.typeErrorSelected(d)});return}var t="";this.tokenHelper.isMobile?t="dialog-fullscreen":t="dialog-min",this.dialog.open(Xe,{height:"90%",panelClass:t,enterAnimationDuration:Q.cmsViewConfig.enterAnimationDuration,exitAnimationDuration:Q.cmsViewConfig.exitAnimationDuration,data:{id:i}}).afterClosed().subscribe(d=>{d&&d.dialogChangedDate&&this.DataGetAll()})}onActionDelete(){let i=0;if(this.dataModelSelect&&this.dataModelSelect.id>0&&(i=this.dataModelSelect.id),i===0){this.translate.get("ERRORMESSAGE.MESSAGE.typeErrorCategoryNotSelected").subscribe(t=>{this.cmsToastrService.typeErrorSelected(t)});return}}};c.\u0275fac=function(t){return new(t||c)(_(j),_(H),_(F),_(He),_(G),_(q),_(je),_(W))},c.\u0275cmp=O({type:c,selectors:[["app-core-location-tree"]],inputs:{optionSelectForce:"optionSelectForce",optionReload:"optionReload"},outputs:{optionChange:"optionChange"},decls:14,vars:13,consts:[[3,"optionHeaderDisplay","optionActionMainDisplay","optionFooterDisplay"],["cms-tree-header",""],["cms-tree-action",""],["type","button","class","btn font-13 font-600 btn-s m-1 rounded-s shadow-xl border-0 gradient-teal",3,"click",4,"ngIf"],["type","button","class","btn font-13 font-600 btn-s m-1 rounded-s shadow-xl border-0 gradient-magenta",3,"click",4,"ngIf"],["type","button","class","btn font-13 font-600 btn-s m-1 rounded-s shadow-xl border-0 gradient-highlight",3,"click",4,"ngIf"],["cms-tree-body","",1,"loader-container"],[3,"optionsInfoAreaId"],[1,"category-tree","cursor-pointer",3,"dataSource","treeControl"],["matTreeNodePadding","",3,"ntk-tree-odd","ntk-tree-even","ntk-tree-selected","click",4,"matTreeNodeDef"],[4,"matTreeNodeDef","matTreeNodeDefWhen"],["cms-tree-footer",""],["type","button",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-teal",3,"click"],["type","button",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-magenta",3,"click"],["type","button",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-highlight",3,"click"],[2,"font-size","20px","margin","-6px",3,"title"],["matTreeNodePadding","",3,"click"],["type","button","mat-icon-button","","disabled","",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-highlight"],[1,"mat-tree-node",3,"click"],["type","button","mat-icon-button","","matTreeNodeToggle","",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-highlight",3,"click"],[1,"mat-icon-rtl-mirror"],["matTreeNodeOutlet",""]],template:function(t,e){t&1&&(a(0,"app-cms-html-tree",0),A(1,1),p(2),S(3,"translate"),R(),A(4,2),I(5,no,3,3,"button",3)(6,ro,3,3,"button",4)(7,ao,4,3,"button",5),R(),A(8,6),b(9,"app-progress-spinner",7),a(10,"mat-tree",8),I(11,lo,3,7,"mat-tree-node",9)(12,so,9,7,"mat-nested-tree-node",10),s(),R(),Te(13,11),s()),t&2&&(u("optionHeaderDisplay",!0)("optionActionMainDisplay",!0)("optionFooterDisplay",!1),n(2),v(" ",C(3,11,"TABLE."+(e.dataModelResult==null||e.dataModelResult.access==null?null:e.dataModelResult.access.moduleEntityName))," "),n(3),u("ngIf",e.dataModelResult==null||e.dataModelResult.access==null?null:e.dataModelResult.access.accessAddRow),n(),u("ngIf",(e.dataModelResult==null||e.dataModelResult.access==null?null:e.dataModelResult.access.accessEditRow)&&(e.dataModelSelect==null?null:e.dataModelSelect.id)>0),n(),u("ngIf",e.dataModelResult==null||e.dataModelResult.access==null?null:e.dataModelResult.access.accessWatchRow),n(2),u("optionsInfoAreaId",e.constructorInfoAreaId),n(),u("dataSource",e.dataSource)("treeControl",e.treeControl),n(2),u("matTreeNodeDefWhen",e.hasChild))},dependencies:[N,We,Ie,ti,ei,ii,ri,ni,$t,oi,K,di,z],encapsulation:2});let o=c;return o})();var po=()=>[5,10,20,100],mo=o=>({display:o});function uo(o,c){if(o&1){let r=E();a(0,"div",37)(1,"a",38),M("click",function(){f(r);let t=h();return g(t.onActionButtonNewRow())}),b(2,"i",39)(3,"br"),s(),a(4,"p",40),p(5),S(6,"translate"),s()()}o&2&&(n(5),y(C(6,1,"ACTION.ADD")))}function fo(o,c){if(o&1){let r=E();a(0,"div",37)(1,"a",41),M("click",function(){f(r);let t=h();return g(t.onActionButtonNewRowBulk())}),b(2,"i",39)(3,"br"),s(),a(4,"p",40),p(5),S(6,"translate"),s()()}o&2&&(n(5),y(C(6,1,"ACTION.ADDBULK")))}function go(o,c){if(o&1){let r=E();a(0,"div",37)(1,"a",42),M("click",function(){f(r);let t=h();return g(t.onActionButtonEditRow(t.tableRowSelected))}),b(2,"i",43)(3,"br"),s(),a(4,"p",40),p(5),S(6,"translate"),s()()}o&2&&(n(5),y(C(6,1,"ACTION.EDIT")))}function ho(o,c){if(o&1){let r=E();a(0,"div",37)(1,"a",44),M("click",function(){f(r);let t=h();return g(t.onActionButtonDeleteRow(t.tableRowSelected))}),b(2,"i",45)(3,"br"),s(),a(4,"p",40),p(5),S(6,"translate"),s()()}o&2&&(n(5),y(C(6,1,"ACTION.DELETE")))}function _o(o,c){o&1&&(a(0,"mat-header-cell",46),p(1),S(2,"translate"),s()),o&2&&(n(),v(" ",C(2,1,"TITLE.PICTURE")," "))}function So(o,c){if(o&1&&(b(0,"img",48),S(1,"cmsthumbnail")),o&2){let r=h().$implicit;x("src",C(1,1,r.linkImageIdSrc),J)}}function Co(o,c){if(o&1&&(a(0,"mat-cell"),I(1,So,2,3,"img",47),s()),o&2){let r=c.$implicit;n(),u("ngIf",(r==null||r.linkImageIdSrc==null?null:r.linkImageIdSrc.length)>0)}}function Mo(o,c){if(o&1&&(a(0,"mat-header-cell",46),p(1),s()),o&2){let r=h();n(),v(" ",r.fieldsInfo.id==null?null:r.fieldsInfo.id.fieldTitle," ")}}function Io(o,c){if(o&1&&(a(0,"mat-cell"),p(1),s()),o&2){let r=c.$implicit;n(),v(" ",r.id," ")}}function vo(o,c){if(o&1&&(a(0,"mat-header-cell",46),p(1),s()),o&2){let r=h();n(),v(" ",r.fieldsInfo.recordStatus==null?null:r.fieldsInfo.recordStatus.fieldTitle," ")}}function bo(o,c){if(o&1&&b(0,"select",51),o&2){let r=h().$implicit,i=h();u("contentService",i.contentService)("row",r)("ngStyle",ft(3,mo,r.id===(i.tableRowSelected==null?null:i.tableRowSelected.id)?"":"none"))}}function yo(o,c){if(o&1&&(a(0,"mat-cell"),b(1,"i",49),S(2,"statusIconClass"),I(3,bo,1,5,"select",50),s()),o&2){let r=c.$implicit,i=h();n(),u("ngClass",C(2,2,r.recordStatus)),n(2),u("ngIf",i.dataModelResult==null||i.dataModelResult.access==null?null:i.dataModelResult.access.accessEditRow)}}function wo(o,c){if(o&1&&(a(0,"mat-header-cell",46),p(1),s()),o&2){let r=h();n(),v(" ",r.fieldsInfo.title==null?null:r.fieldsInfo.title.fieldTitle,"")}}function Lo(o,c){if(o&1&&(a(0,"mat-cell"),p(1),s()),o&2){let r=c.$implicit;n(),v(" ",r.title," ")}}function To(o,c){if(o&1&&(a(0,"mat-header-cell",46),p(1),s()),o&2){let r=h();n(),v(" ",r.fieldsInfo.title==null?null:r.fieldsInfo.title.fieldTitle," (ML)")}}function Eo(o,c){if(o&1&&(a(0,"mat-cell"),p(1),s()),o&2){let r=c.$implicit;n(),v(" ",r.titleML," ")}}function Ao(o,c){if(o&1&&(a(0,"mat-header-cell",46),p(1),s()),o&2){let r=h();n(),v(" ",r.fieldsInfo.locationType==null?null:r.fieldsInfo.locationType.fieldTitle," ")}}function Ro(o,c){if(o&1&&(a(0,"mat-cell"),p(1),S(2,"enums"),s()),o&2){let r=c.$implicit,i=h();n(),v(" ",gt(2,1,r.locationType,i.dataModelEnumLocationTypeResult.listItems)," ")}}function xo(o,c){o&1&&(a(0,"mat-header-cell"),p(1),S(2,"translate"),s()),o&2&&(n(),v(" ",C(2,1,"TITLE.OPTION")," "))}function ko(o,c){if(o&1&&(a(0,"mat-cell",52)(1,"button",53)(2,"mat-icon"),p(3,"more_vert"),s()(),b(4,"mat-menu",null,2),s()),o&2){let r=k(5);n(),u("matMenuTriggerFor",r)}}function Do(o,c){o&1&&b(0,"mat-header-row")}function Vo(o,c){if(o&1){let r=E();a(0,"mat-row",54),M("click",function(){let t=f(r).$implicit,e=h();return g(e.onActionTableRowSelect(t))}),s()}if(o&2){let r=c.$implicit,i=c.dataIndex,t=h();ne("ntk-row-odd",i%2)("ntk-row-even",!(i%2))("ntk-row-selected",r.id===(t.tableRowSelected==null?null:t.tableRowSelected.id))}}var bi=(()=>{let c=class c extends _i{constructor(i,t,e,d,m,l,B,P,Fe,Le,wi){super(i,new D,Le,l,P),this.contentService=i,this.coreEnumService=t,this.cmsToastrService=e,this.cmsConfirmationDialogService=d,this.router=m,this.tokenHelper=l,this.cdr=B,this.translate=P,this.pageInfo=Fe,this.publicHelper=Le,this.dialog=wi,this.constructorInfoAreaId=this.constructor.name,this.flag=!1,this.tableContentSelected=[],this.filteModelContent=new te,this.dataModelEnumLocationTypeResult=new V,this.tabledisplayedColumns=[],this.tabledisplayedColumnsSource=["LinkImageIdSrc","Id","RecordStatus","title","titleML","LocationType"],this.tabledisplayedColumnsMobileSource=["LinkImageIdSrc","Id","RecordStatus","title","titleML","LocationType"],this.publicHelper.processService.cdr=this.cdr,this.optionsSearch.parentMethods={onSubmit:Li=>this.onSubmitOptionsSearch(Li)},this.filteModelContent.sortColumn="Id",this.filteModelContent.sortType=Ae.Ascending}ngOnInit(){this.filteModelContent.sortColumn="Title",this.tokenHelper.getTokenInfoState().then(i=>{this.tokenInfo=i,setTimeout(()=>{this.firstLoadDataRunned||this.DataGetAll()},500)}),this.cmsApiStoreSubscribe=this.tokenHelper.getTokenInfoStateOnChange().subscribe({next:i=>{this.tokenInfo=i,this.firstLoadDataRunned=!0,this.DataGetAll()}}),this.getEnumLocationType()}getEnumLocationType(){this.coreEnumService.ServiceLocationTypeEnum().subscribe({next:i=>{this.dataModelEnumLocationTypeResult=i}})}ngOnDestroy(){this.cmsApiStoreSubscribe.unsubscribe()}DataGetAll(){this.tabledisplayedColumns=this.publicHelper.TableDisplayedColumns(this.tabledisplayedColumnsSource,this.tabledisplayedColumnsMobileSource,[],this.tokenInfo),this.tableRowsSelected=[],this.onActionTableRowSelect(new D);let i=this.constructor.name+"main";this.translate.get("MESSAGE.get_information_list").subscribe(e=>{this.publicHelper.processService.processStart(i,e,this.constructorInfoAreaId)}),this.filteModelContent.accessLoad=!0;let t=JSON.parse(JSON.stringify(this.filteModelContent));if(this.categoryModelSelected&&this.categoryModelSelected.id>0){let e=new ee;e.propertyName="LinkParentId",e.value=this.categoryModelSelected.id,t.filters.push(e)}this.contentService.ServiceGetAllEditor(t).subscribe({next:e=>{e.isSuccess?(this.fieldsInfo=this.publicHelper.fieldInfoConvertor(e.access),this.dataModelResult=e,this.tableSource.data=e.listItems,this.optionsStatist?.data?.show&&this.onActionButtonStatist(!0),setTimeout(()=>{this.optionsSearch.childMethods&&this.optionsSearch.childMethods.setAccess(e.access)},1e3)):this.cmsToastrService.typeErrorMessage(e.errorMessage),this.publicHelper.processService.processStop(i)},error:e=>{this.cmsToastrService.typeError(e),this.publicHelper.processService.processStop(i,!1)}})}onTableSortData(i){this.tableSource&&this.tableSource.sort&&this.tableSource.sort.active===i.active?this.tableSource.sort.start==="asc"?(i.start="desc",this.filteModelContent.sortColumn=i.active,this.filteModelContent.sortType=Ae.Descending):this.tableSource.sort.start==="desc"?(i.start="asc",this.filteModelContent.sortColumn="",this.filteModelContent.sortType=Ae.Ascending):i.start="desc":(this.filteModelContent.sortColumn=i.active,this.filteModelContent.sortType=Ae.Descending),this.tableSource.sort=i,this.filteModelContent.currentPageNumber=0,this.DataGetAll()}onTablePageingData(i){this.filteModelContent.currentPageNumber=i.pageIndex+1,this.filteModelContent.rowPerPage=i.pageSize,this.DataGetAll()}onActionSelectorSelect(i){var t=this.filteModelContent.sortColumn,e=this.filteModelContent.sortType;this.filteModelContent=new te,this.filteModelContent.sortColumn=t,this.filteModelContent.sortType=e,this.categoryModelSelected=i,this.DataGetAll()}onActionButtonNewRow(){if(this.dataModelResult==null||this.dataModelResult.access==null||!this.dataModelResult.access.accessAddRow){this.cmsToastrService.typeErrorAccessAdd();return}var i="";this.tokenHelper.isMobile?i="dialog-fullscreen":i="dialog-min",this.dialog.open(Je,{height:"90%",panelClass:i,enterAnimationDuration:Q.cmsViewConfig.enterAnimationDuration,exitAnimationDuration:Q.cmsViewConfig.exitAnimationDuration,data:{id:this.categoryModelSelected?.id}}).afterClosed().subscribe(e=>{e&&e.dialogChangedDate&&this.DataGetAll()})}onActionButtonNewRowBulk(){if(this.dataModelResult==null||this.dataModelResult.access==null||!this.dataModelResult.access.accessAddRow){this.cmsToastrService.typeErrorAccessAdd();return}var i="";this.tokenHelper.isMobile?i="dialog-fullscreen":i="dialog-min",this.dialog.open(Ii,{height:"90%",panelClass:i,enterAnimationDuration:Q.cmsViewConfig.enterAnimationDuration,exitAnimationDuration:Q.cmsViewConfig.exitAnimationDuration,data:{id:this.categoryModelSelected?.id}}).afterClosed().subscribe(e=>{e&&e.dialogChangedDate&&this.DataGetAll()})}onActionButtonEditRow(i=this.tableRowSelected){if(!i||!i.id||i.id===0){this.cmsToastrService.typeErrorSelectedRow();return}if(this.onActionTableRowSelect(i),this.dataModelResult==null||this.dataModelResult.access==null||!this.dataModelResult.access.accessEditRow){this.cmsToastrService.typeErrorAccessEdit();return}var t="";this.tokenHelper.isMobile?t="dialog-fullscreen":t="dialog-min",this.dialog.open(Xe,{height:"90%",panelClass:t,enterAnimationDuration:Q.cmsViewConfig.enterAnimationDuration,exitAnimationDuration:Q.cmsViewConfig.exitAnimationDuration,data:{id:this.tableRowSelected.id}}).afterClosed().subscribe(d=>{d&&d.dialogChangedDate&&this.DataGetAll()})}onActionButtonDeleteRow(i=this.tableRowSelected){if(!i||!i.id||i.id===0){this.translate.get("MESSAGE.no_row_selected_to_delete").subscribe(d=>{this.cmsToastrService.typeErrorSelected(d)});return}if(this.onActionTableRowSelect(i),this.dataModelResult==null||this.dataModelResult.access==null||!this.dataModelResult.access.accessDeleteRow){this.cmsToastrService.typeErrorAccessDelete();return}var t="",e="";this.translate.get(["MESSAGE.Please_Confirm","MESSAGE.Do_you_want_to_delete_this_content"]).subscribe(d=>{t=d["MESSAGE.Please_Confirm"],e=d["MESSAGE.Do_you_want_to_delete_this_content"]+"?<br> ( "+this.tableRowSelected.title+" ) "}),this.cmsConfirmationDialogService.confirm(t,e).then(d=>{if(d){let m=this.constructor.name+"main";this.translate.get("MESSAGE.Receiving_information").subscribe(l=>{this.publicHelper.processService.processStart(m,l,this.constructorInfoAreaId)}),this.contentService.ServiceDelete(this.tableRowSelected.id).subscribe({next:l=>{l.isSuccess?(this.cmsToastrService.typeSuccessRemove(),this.DataGetAll()):this.cmsToastrService.typeErrorRemove(),this.publicHelper.processService.processStop(m)},error:l=>{this.cmsToastrService.typeError(l),this.publicHelper.processService.processStop(m,!1)}})}}).catch(()=>{})}onActionButtonGoToSiteCategoryList(i=this.tableRowSelected){if(!i||!i.id||i.id===0){this.translate.get("MESSAGE.no_row_selected_to_display").subscribe(t=>{this.cmsToastrService.typeErrorSelected(t)});return}this.onActionTableRowSelect(i),this.router.navigate(["/core/siteSiteCategory/",this.tableRowSelected.id])}onActionButtonStatist(i=!this.optionsStatist.data.show){if(this.optionsStatist.data.show=i,!this.optionsStatist.data.show)return;let t=new Map;this.translate.get("MESSAGE.Active").subscribe(l=>{t.set(l,0)}),this.translate.get("MESSAGE.All").subscribe(l=>{t.set(l,0)});let e=this.constructor.name+".ServiceStatist";this.translate.get("MESSAGE.Get_the_statist").subscribe(l=>{this.publicHelper.processService.processStart(e,l,this.constructorInfoAreaId)}),this.contentService.ServiceGetCount(this.filteModelContent).subscribe({next:l=>{l.isSuccess?(this.translate.get("MESSAGE.All").subscribe(B=>{t.set(B,l.totalRowCount)}),this.optionsStatist.childMethods.setStatistValue(t)):this.cmsToastrService.typeErrorMessage(l.errorMessage),this.publicHelper.processService.processStop(e)},error:l=>{this.cmsToastrService.typeError(l),this.publicHelper.processService.processStop(e,!1)}});let d=JSON.parse(JSON.stringify(this.filteModelContent)),m=new ee;m.propertyName="RecordStatus",m.value=Et.Available,d.filters.push(m),this.contentService.ServiceGetCount(d).subscribe({next:l=>{l.isSuccess?(this.translate.get("MESSAGE.Active").subscribe(B=>{t.set(B,l.totalRowCount)}),this.optionsStatist.childMethods.setStatistValue(t)):this.cmsToastrService.typeErrorMessage(l.errorMessage),this.publicHelper.processService.processStop(e)},error:l=>{this.cmsToastrService.typeError(l),this.publicHelper.processService.processStop(e,!1)}})}onActionButtonReload(){this.DataGetAll()}onSubmitOptionsSearch(i){this.filteModelContent.filters=i,this.DataGetAll()}};c.\u0275fac=function(t){return new(t||c)(_(F),_(H),_(j),_(ze),_(Lt),_(je),_(G),_(W),_(Dt),_(q),_(He))},c.\u0275cmp=O({type:c,selectors:[["app-core-location-list"]],features:[X],decls:57,vars:29,consts:[["tableSort","matSort"],["paginator",""],["actionMenu","matMenu"],[3,"optionActionGuideNoticeDisplayChange","optionOnActionButtonMemoRow","optionOnActionButtonMemo","optionOnActionButtonExport","optionOnActionButtonPrintRow","optionsListInfoAreaId","optionGuideNoticeKey","optionActionGuideNoticeDisplay","optionTreeDisplay","optionActionRowId","optionActionRowDisplayMenu","optionSelectRowItemTitle"],["cms-tree",""],[3,"optionChange"],["cms-header",""],["cms-action-header",""],["cms-action-header-start",""],["type","button","target","_blank",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-highlight",3,"click"],[1,"fa-solid","fa-info","font-18",2,"color","#ffffff"],[1,"fa-solid","fa-rotate-right","font-18",2,"color","#ffffff"],["cms-action-header-end",""],[1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-highlight",3,"click"],[3,"checked"],["cms-action-main",""],["class","col-4",4,"ngIf"],["cms-action-row",""],["cms-action-area",""],[3,"optionsChange","options"],["cms-body",""],["matSort","",3,"matSortChange","dataSource"],["matColumnDef","LinkImageIdSrc"],["mat-sort-header","",4,"matHeaderCellDef"],[4,"matCellDef"],["matColumnDef","Id"],["matColumnDef","RecordStatus"],["matColumnDef","title"],["matColumnDef","titleML"],["matColumnDef","LocationType"],["matColumnDef","Action"],[4,"matHeaderCellDef"],["class"," Action",4,"matCellDef"],[4,"matHeaderRowDef"],[3,"ntk-row-odd","ntk-row-even","ntk-row-selected","click",4,"matRowDef","matRowDefColumns"],["cms-footer",""],[3,"page","length","pageIndex","pageSize","pageSizeOptions"],[1,"col-4"],["type","button","target","_blank",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-teal",3,"click"],[1,"fa-solid","fa-plus","font-18",2,"color","#FFFFFF"],[1,"font-11","text-center","opacity-70"],["type","button","id","openModalButton","data-toggle","modal","data-target","#categoryModal","target","_blank",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-teal",3,"click"],["target","_blank",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-magenta",3,"click"],[1,"fa-solid","fa-pen","font-18",2,"color","#FFFFFF"],["target","_blank",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-red",3,"click"],[1,"fa-solid","fa-trash","font-18",2,"color","#ffffff"],["mat-sort-header",""],["style","vertical-align:middle;","class","ntk-hover-zoom","aria-hidden","","height","40","width","40",3,"src",4,"ngIf"],["aria-hidden","","height","40","width","40",1,"ntk-hover-zoom",2,"vertical-align","middle",3,"src"],[3,"ngClass"],["matNativeControl","","cmsRecordStatusSelfSave","","style","background: none; border: none;",3,"contentService","row","ngStyle",4,"ngIf"],["matNativeControl","","cmsRecordStatusSelfSave","",2,"background","none","border","none",3,"contentService","row","ngStyle"],[1,"Action"],["type","button","mat-icon-button","","aria-label","Action Menu",3,"matMenuTriggerFor"],[3,"click"]],template:function(t,e){if(t&1){let d=E();a(0,"app-cms-html-list",3),T("optionActionGuideNoticeDisplayChange",function(l){return f(d),L(e.viewGuideNotice,l)||(e.viewGuideNotice=l),g(l)}),M("optionOnActionButtonMemoRow",function(){return f(d),g(e.onActionButtonMemoRow())})("optionOnActionButtonMemo",function(){return f(d),g(e.onActionButtonMemo())})("optionOnActionButtonExport",function(){return f(d),g(e.onActionButtonExport())})("optionOnActionButtonPrintRow",function(){return f(d),g(e.onActionButtonPrintRow())}),A(1,4),a(2,"app-core-location-tree",5),M("optionChange",function(l){return f(d),g(e.onActionSelectorSelect(l))}),s(),R(),Te(3,6)(4,7),A(5,8),a(6,"a",9),M("click",function(){return f(d),g(e.viewGuideNotice=!e.viewGuideNotice)}),b(7,"i",10),s(),a(8,"a",9),M("click",function(){return f(d),g(e.onActionButtonReload())}),b(9,"i",11),s(),R(),A(10,12),a(11,"a",13),M("click",function(){return f(d),g(e.optionsSearch.data.show=!e.optionsSearch.data.show)}),b(12,"mat-slide-toggle",14),p(13),S(14,"translate"),s(),a(15,"a",13),M("click",function(){return f(d),g(e.onActionButtonStatist())}),b(16,"mat-slide-toggle",14),p(17),S(18,"translate"),s(),R(),A(19,15),I(20,uo,7,3,"div",16)(21,fo,7,3,"div",16),R(),A(22,17),I(23,go,7,3,"div",16)(24,ho,7,3,"div",16),R(),A(25,18),a(26,"app-cms-search-list",19),T("optionsChange",function(l){return f(d),L(e.optionsSearch,l)||(e.optionsSearch=l),g(l)}),s(),a(27,"app-cms-statist-list",19),T("optionsChange",function(l){return f(d),L(e.optionsStatist,l)||(e.optionsStatist=l),g(l)}),s(),R(),A(28,20),a(29,"mat-table",21,0),M("matSortChange",function(){f(d);let l=k(30);return g(e.onTableSortData(l))}),A(31,22),I(32,_o,3,3,"mat-header-cell",23)(33,Co,2,1,"mat-cell",24),R(),A(34,25),I(35,Mo,2,1,"mat-header-cell",23)(36,Io,2,1,"mat-cell",24),R(),A(37,26),I(38,vo,2,1,"mat-header-cell",23)(39,yo,4,4,"mat-cell",24),R(),A(40,27),I(41,wo,2,1,"mat-header-cell",23)(42,Lo,2,1,"mat-cell",24),R(),A(43,28),I(44,To,2,1,"mat-header-cell",23)(45,Eo,2,1,"mat-cell",24),R(),A(46,29),I(47,Ao,2,1,"mat-header-cell",23)(48,Ro,3,4,"mat-cell",24),R(),A(49,30),I(50,xo,3,3,"mat-header-cell",31)(51,ko,6,1,"mat-cell",32),R(),I(52,Do,1,0,"mat-header-row",33)(53,Vo,1,6,"mat-row",34),s(),R(),A(54,35),a(55,"mat-paginator",36,1),M("page",function(l){return f(d),g(e.onTablePageingData(l))}),s(),R(),s()}t&2&&(u("optionsListInfoAreaId",e.constructorInfoAreaId)("optionGuideNoticeKey",""),w("optionActionGuideNoticeDisplay",e.viewGuideNotice),u("optionTreeDisplay",!0)("optionActionRowId",e.tableRowSelected==null?null:e.tableRowSelected.id)("optionActionRowDisplayMenu",e.tableRowSelectDoubleClick)("optionSelectRowItemTitle",(e.tableRowSelected==null||e.tableRowSelected.title==null?null:e.tableRowSelected.title.length)>0?e.tableRowSelected==null?null:e.tableRowSelected.title:e.tableRowSelected==null?null:e.tableRowSelected.id),n(12),u("checked",e.optionsSearch.data.show),n(),v("",C(14,24,"ACTION.SEARCH")," "),n(3),u("checked",e.optionsStatist.data.show),n(),v("",C(18,26,"ACTION.STATIST")," "),n(3),u("ngIf",e.dataModelResult==null||e.dataModelResult.access==null?null:e.dataModelResult.access.accessAddRow),n(),u("ngIf",e.dataModelResult==null||e.dataModelResult.access==null?null:e.dataModelResult.access.accessAddRow),n(2),u("ngIf",e.dataModelResult==null||e.dataModelResult.access==null?null:e.dataModelResult.access.accessEditRow),n(),u("ngIf",e.dataModelResult==null||e.dataModelResult.access==null?null:e.dataModelResult.access.accessDeleteRow),n(2),w("options",e.optionsSearch),n(),w("options",e.optionsStatist),n(2),u("dataSource",e.tableSource),n(23),u("matHeaderRowDef",e.tabledisplayedColumns),n(),u("matRowDefColumns",e.tabledisplayedColumns),n(2),u("length",e.dataModelResult.totalRowCount)("pageIndex",e.dataModelResult.currentPageNumber-1)("pageSize",e.dataModelResult.rowPerPage)("pageSizeOptions",ut(28,po)))},dependencies:[Ne,N,ht,We,Ie,U,Bt,Pt,Ot,Gt,Nt,Wt,Ht,qt,Kt,zt,jt,Jt,Ut,Qt,Xt,Yt,mi,ui,pi,li,vi,z,si,ie,ci],encapsulation:2});let o=c;return o})();var Fo=[{path:"",children:[{path:"",component:bi}]}],yi=(()=>{let c=class c{};c.\u0275fac=function(t){return new(t||c)},c.\u0275mod=Pe({type:c}),c.\u0275inj=Be({imports:[Ye.forChild(Fo),Ye]});let o=c;return o})();var mr=(()=>{let c=class c{};c.\u0275fac=function(t){return new(t||c)},c.\u0275mod=Pe({type:c}),c.\u0275inj=Be({providers:[F,xt,ze],imports:[St,bt,yi,yt.withConfig({warnOnNgModelWithFormControl:"never"}),fi,hi,kt]});let o=c;return o})();export{mr as CoreLocationCmsModule};
