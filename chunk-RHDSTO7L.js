import{a as Ht}from"./chunk-NGVXDNWZ.js";import{a as It}from"./chunk-CARLNGNE.js";import{a as We}from"./chunk-GDJFDKO7.js";import{a as Tt}from"./chunk-SPMZUMVE.js";import{a as ft}from"./chunk-FJSD2HMW.js";import{a as Wi,b as Vn}from"./chunk-QBE56AL6.js";import{a as Rt}from"./chunk-MJ2SB6W2.js";import{$a as xi,$b as Ni,Ad as je,C as yi,Cc as Mt,Gb as Bi,Hb as Fi,Id as Ln,K as Me,L as Ie,La as de,Lc as Nt,M as Te,Ma as he,Na as Ae,Nc as ut,O as sn,Oc as ii,P as cn,Sc as kt,Ta as xe,Tb as Tn,Tc as Et,Ub as Xe,Vb as Ye,Wa as Q,Wb as Ze,Xb as $e,Yb as et,Zb as tt,_a as Ai,_c as Zi,aa as ye,ab as Di,ac as Oi,bc as Gi,bd as _e,ca as dn,cc as Pi,da as ei,ec as it,fc as nt,fd as Hi,gc as ot,hc as rt,hd as He,ic as at,jc as lt,kc as st,kd as Rn,lb as Vi,lc as ct,m as ki,mb as Cn,mc as dt,nb as N,nc as pt,ob as In,oc as vn,p as oe,pc as bn,qc as wn,rc as Mn,s as re,sa as Ve,sb as Pe,sc as kn,sd as qi,t as ge,tb as L,tc as En,td as qe,uc as yn,v as Se,vb as j,vc as An,w as Ei,wc as xn,x as fe,xc as Dn,y as Ce,zd as ji}from"./chunk-DQXKDP7X.js";import{b as P,c as H,p as ee}from"./chunk-BAFHZWLS.js";import{Aa as Ut,Ab as Bt,Al as Ne,Bd as mn,Bl as Dt,Cd as St,Cl as Pt,Db as te,Dc as Ke,Dd as z,Eb as ie,Fb as ne,Fc as Le,Ge as Gt,Ha as bi,Hd as X,He as fn,Hl as wt,Ia as bt,Ib as D,Id as Y,Il as Yi,Jd as ae,Jl as Oe,Kb as d,Kl as Ct,L as gi,La as r,Lb as w,Lc as ln,Ll as mt,Ma as _,Mb as S,Nb as an,O as Si,Qb as y,Qd as K,Rb as A,Sb as x,Ud as un,Vb as Qe,W as Ci,Wb as ze,X as Ii,Yb as g,Za as U,Zb as I,_b as Zt,ab as v,bb as Vt,bg as hn,cb as m,cq as q,da as Ti,eb as ke,fd as ve,g as ci,gc as O,gd as pn,hd as ce,ja as F,ka as vi,kd as Xi,lb as a,ld as Ft,mb as l,nb as T,ob as k,pb as E,qb as Ee,qd as ti,ra as f,rb as M,sa as h,sl as _n,td as Je,tl as At,u as hi,ub as b,ul as Be,v as _i,vd as W,vl as Li,wb as u,wl as gn,xb as wi,xc as yt,xl as xt,yb as Mi,yc as $t,yd as Ri,yl as Fe,zb as R,zc as G,zd as gt,zl as Sn}from"./chunk-3SLY6QXF.js";var Bn=(()=>{let s=class s{constructor(){this.constructorInfoAreaId=this.constructor.name}ngOnInit(){}};s.\u0275fac=function(i){return new(i||s)},s.\u0275cmp=F({type:s,selectors:[["app-ticketing"]],decls:1,vars:0,template:function(i,e){i&1&&T(0,"router-outlet")},dependencies:[pn],encapsulation:2});let n=s;return n})();var eo=["*"];function to(n,s){if(n&1&&(a(0,"label",13),d(1),l()),n&2){let o=u();Bt("for","app-cms-site-selector-",o.id,""),r(),w(o.optionLabel)}}function io(n,s){if(n&1&&(T(0,"img",14),g(1,"cmsthumbnail")),n&2){let o=u();R("src",I(1,1,o.dataModelSelect==null?null:o.dataModelSelect.linkMainImageIdSrc),bt)}}function no(n,s){if(n&1&&(T(0,"img",14),g(1,"cmsthumbnail")),n&2){let o=u().$implicit;R("src",I(1,1,o.linkMainImageIdSrc),bt)}}function oo(n,s){if(n&1&&(a(0,"mat-option",15),v(1,no,2,3,"img",5),a(2,"span"),d(3),l()()),n&2){let o=s.$implicit,t=u();m("value",o)("disabled",t.optionDisabled),r(),m("ngIf",o.linkMainImageIdSrc),r(2),w(t.displayOption(o))}}function ro(n,s){n&1&&T(0,"i",16)}function ao(n,s){n&1&&T(0,"i",17)}function lo(n,s){if(n&1){let o=M();a(0,"i",18),b("click",function(){f(o);let i=u();return h(i.onActionSelectClear())}),l()}}function so(n,s){n&1&&(a(0,"em"),d(1),g(2,"translate"),l()),n&2&&(r(),S("(",I(2,1,"TITLE.Necessary"),")"))}var Ge=(()=>{let s=class s{constructor(t,i,e,c,C){this.coreEnumService=t,this.cdr=i,this.publicHelper=e,this.translate=c,this.categoryService=C,this.id=++s.nextId,this.constructorInfoAreaId=this.constructor.name,this.dataModelResult=new z,this.dataModelSelect=new Oe,this.formControl=new Ei,this.optionDisabled=!1,this.optionSelectFirstItem=!1,this.optionPlaceholder="",this.optionRequired=!1,this.optionLabel="",this.optionChange=new Ut,this.optionReload=()=>this.onActionButtonReload(),this.publicHelper.processService.cdr=this.cdr}set optionSelectForce(t){this.onActionSelectForce(t)}ngOnInit(){this.loadOptions()}loadOptions(){this.filteredOptions=this.formControl.valueChanges.pipe(Ci(""),gi(1500),Si(),Ii(t=>typeof t=="string"||typeof t=="number"?this.DataGetAll(t||""):[]))}displayFn(t){return t?t.title:void 0}displayOption(t){return t?t.title:void 0}DataGetAll(t){return ci(this,null,function*(){let i=new Y;i.rowPerPage=20,i.accessLoad=!0;let e=new X;e.propertyName="Title",e.value=t,e.searchType=ti.Contains,e.clauseType=Ft.Or,i.filters.push(e),t&&typeof+t=="number"&&+t>0&&(e=new X,e.propertyName="Id",e.value=t,e.searchType=ti.Equal,e.clauseType=Ft.Or,i.filters.push(e));let c=this.constructor.name+"main";return this.translate.get("MESSAGE.Receiving_information").subscribe(C=>{this.publicHelper.processService.processStart(c,C,this.constructorInfoAreaId)}),yield hi(this.categoryService.ServiceGetAll(i)).then(C=>(this.dataModelResult=C,this.optionSelectFirstItem&&(!this.dataModelSelect||!this.dataModelSelect.id||this.dataModelSelect.id<=0)&&this.dataModelResult.listItems.length>0&&(this.optionSelectFirstItem=!1,setTimeout(()=>{this.formControl.setValue(this.dataModelResult.listItems[0])},1e3),this.onActionSelect(this.dataModelResult.listItems[0])),this.publicHelper.processService.processStop(c),C.listItems))})}onActionSelect(t){this.dataModelSelect=t,this.optionChange.emit(this.dataModelSelect)}onActionSelectClear(){this.dataModelSelect=null,this.formControl.setValue(null),this.optionChange.emit(null)}push(t){return this.filteredOptions.pipe(_i(i=>(i.find(e=>e.id===t.id)||i.push(t),i)))}onActionSelectForce(t){if(typeof t=="number"&&t>0){if(this.dataModelSelect&&this.dataModelSelect.id===t)return;if(this.dataModelResult&&this.dataModelResult.listItems&&this.dataModelResult.listItems.find(i=>i.id===t)){let i=this.dataModelResult.listItems.find(e=>e.id===t);this.dataModelSelect=i,this.formControl.setValue(i);return}this.categoryService.ServiceGetOneById(t).subscribe({next:i=>{i.isSuccess&&(this.filteredOptions=this.push(i.item),this.dataModelSelect=i.item,this.formControl.setValue(i.item),this.optionChange.emit(i.item))}});return}if(typeof t==typeof Oe){this.filteredOptions=this.push(t),this.dataModelSelect=t,this.formControl.setValue(t);return}this.formControl.setValue(null)}onActionButtonReload(){this.dataModelSelect=new Oe,this.loadOptions()}};s.nextId=0,s.\u0275fac=function(i){return new(i||s)(_(K),_(O),_(L),_(P),_(Be))},s.\u0275cmp=F({type:s,selectors:[["app-ticketing-departemen-selector"]],inputs:{optionDisabled:"optionDisabled",optionSelectFirstItem:"optionSelectFirstItem",optionPlaceholder:"optionPlaceholder",optionRequired:"optionRequired",optionLabel:"optionLabel",optionReload:"optionReload",optionSelectForce:"optionSelectForce"},outputs:{optionChange:"optionChange"},ngContentSelectors:eo,decls:16,vars:18,consts:[["matauto","matAutocomplete"],[1,"input-style","has-borders","has-icon","input-style-always-active","validate-field","mb-4","loader-container"],[3,"optionsInfoAreaId"],["class","color-highlight",3,"for",4,"ngIf"],["matPrefix",""],["style","vertical-align:middle;","class","ntk-hover-zoom","aria-hidden","","height","25","width","25",3,"src",4,"ngIf"],["type","text","aria-label","Assignee","matInput","","id","forminput",3,"placeholder","formControl","matAutocomplete","required","id"],[3,"optionSelected","displayWith"],[3,"value","disabled",4,"ngFor","ngForOf"],["class","fa fa-info  invalid color-red-dark",4,"ngIf"],["class","fa fa-check  valid color-green-dark",4,"ngIf"],["class","fa fa-times  action color-red-dark",3,"click",4,"ngIf"],[4,"ngIf"],[1,"color-highlight",3,"for"],["aria-hidden","","height","25","width","25",1,"ntk-hover-zoom",2,"vertical-align","middle",3,"src"],[3,"value","disabled"],[1,"fa","fa-info","invalid","color-red-dark"],[1,"fa","fa-check","valid","color-green-dark"],[1,"fa","fa-times","action","color-red-dark",3,"click"]],template:function(i,e){if(i&1){let c=M();wi(),a(0,"div",1),T(1,"app-progress-spinner",2),v(2,to,2,3,"label",3),a(3,"span",4),v(4,io,2,3,"img",5),d(5," \xA0"),l(),T(6,"input",6),a(7,"mat-autocomplete",7,0),b("optionSelected",function(p){return f(c),h(e.onActionSelect(p.option.value))}),v(9,oo,4,4,"mat-option",8),g(10,"async"),l(),v(11,ro,1,0,"i",9)(12,ao,1,0,"i",10)(13,lo,1,0,"i",11)(14,so,3,3,"em",12),Mi(15),l()}if(i&2){let c=D(8);r(),m("optionsInfoAreaId",e.constructorInfoAreaId),r(),m("ngIf",(e.optionLabel==null?null:e.optionLabel.length)>0),r(2),m("ngIf",e.dataModelSelect&&(e.dataModelSelect==null?null:e.dataModelSelect.linkMainImageIdSrc)),r(2),R("placeholder",e.optionPlaceholder),Bt("id","app-cms-site-selector-",e.id,""),m("formControl",e.formControl)("matAutocomplete",c)("required",e.optionRequired),Vt("disabled",e.optionDisabled?!0:null),r(),m("displayWith",e.displayFn),r(2),m("ngForOf",I(10,16,e.filteredOptions)),r(2),m("ngIf",!e.formControl.valid),r(),m("ngIf",e.optionRequired&&e.formControl.valid),r(),m("ngIf",(e.dataModelSelect==null?null:e.dataModelSelect.id)>0),r(),m("ngIf",e.optionRequired&&(!e.dataModelSelect||!e.dataModelSelect.id||e.dataModelSelect.id<=0))}},dependencies:[$t,G,oe,re,Me,yi,Bi,ki,Fi,dn,Q,j,Le,H,Nt],encapsulation:2});let n=s;return n})();var co=["vform"];function po(n,s){if(n&1){let o=M();a(0,"app-cms-enum-record-status-selector",11),x("modelChange",function(i){f(o);let e=u();return A(e.dataModel.recordStatus,i)||(e.dataModel.recordStatus=i),h(i)}),l()}if(n&2){let o=u();y("model",o.dataModel.recordStatus),m("optionDisabled",!1)("optionLabel",o.fieldsInfo.recordStatus==null?null:o.fieldsInfo.recordStatus.fieldTitle)("optionRequired",!0)("optionSelectFirstItem",!0)}}function mo(n,s){if(n&1){let o=M();a(0,"div",12)(1,"label",13),d(2),g(3,"translate"),l(),a(4,"textarea",14,1),g(6,"translate"),x("ngModelChange",function(i){f(o);let e=u();return A(e.dataModel.htmlBody,i)||(e.dataModel.htmlBody=i),h(i)}),d(7,"                "),l(),a(8,"em"),d(9),l()()}if(n&2){let o=D(5),t=u();r(2),w(I(3,5,"TITLE.Answer_Text")),r(2),R("placeholder",I(6,7,"TITLE.Answer_Text")),y("ngModel",t.dataModel.htmlBody),m("disabled",!(t.fieldsInfo.htmlBody!=null&&t.fieldsInfo.htmlBody.accessAddField)),r(5),S("",o.value.length," / 1000")}}function uo(n,s){if(n&1){let o=M();a(0,"div",15)(1,"button",16),b("click",function(){f(o);let i=u();return h(i.onActionBackToParent())}),d(2),g(3,"translate"),l(),a(4,"button",17),d(5),g(6,"translate"),l()()}if(n&2){u();let o=D(9);r(2),S(" ",I(3,3,"ACTION.BACK")," "),r(2),m("disabled",!o.form.valid),r(),S(" ",I(6,5,"ACTION.SAVE")," ")}}var Fn=(()=>{let s=class s extends ft{constructor(t,i,e,c,C,p,V,B,J,$){super(p,new wt,c,$),this.data=t,this.dialogRef=i,this.activatedRoute=e,this.publicHelper=c,this.coreEnumService=C,this.ticketingAnswerService=p,this.cmsToastrService=V,this.router=B,this.cdr=J,this.translate=$,this.requestLinkTaskId=0,this.constructorInfoAreaId=this.constructor.name,this.formInfo=new ae,this.fieldsInfo=new Map,this.dataModel=new wt,this.dataModelResult=new z,this.selectFileTypeMainImage=["jpg","jpeg","png"],this.fileManagerOpenForm=!1,this.appLanguage="fa",this.mapOptonCenter=new It,this.publicHelper.processService.cdr=this.cdr,this.fileManagerTree=this.publicHelper.GetfileManagerTreeConfig(),t&&(this.requestLinkTaskId=+t.linkTaskId||0)}ngOnInit(){if(this.requestLinkTaskId===0){this.cmsToastrService.typeErrorAddRowParentIsNull();return}this.dataModel.linkTaskId=this.requestLinkTaskId,this.DataGetAccess()}onFormSubmit(){if(!this.formGroup.valid){this.cmsToastrService.typeErrorFormInvalid();return}this.DataAddContent()}DataAddContent(){this.formInfo.formSubmitAllow=!1,this.translate.get("MESSAGE.sending_information_to_the_server").subscribe(i=>{this.formInfo.formAlert=i}),this.formInfo.formError="";let t=this.constructor.name+"main";this.translate.get("MESSAGE.Receiving_information").subscribe(i=>{this.publicHelper.processService.processStart(t,i,this.constructorInfoAreaId)}),this.ticketingAnswerService.ServiceAdd(this.dataModel).subscribe({next:i=>{this.formInfo.formSubmitAllow=!i.isSuccess,this.dataModelResult=i,i.isSuccess?(this.translate.get("MESSAGE.registration_completed_successfully").subscribe(e=>{this.formInfo.formAlert=e}),this.cmsToastrService.typeSuccessAdd(),setTimeout(()=>{this.dialogRef.close({dialogChangedDate:!0})},1e3)):this.cmsToastrService.typeErrorAdd(i.errorMessage),this.publicHelper.processService.processStop(t)},error:i=>{this.publicHelper.processService.processStop(t),this.formInfo.formSubmitAllow=!0,this.cmsToastrService.typeErrorAdd(i)}})}onStepClick(t,i){t.previouslySelectedIndex<t.selectedIndex}onActionBackToParent(){this.dialogRef.close({dialogChangedDate:!1})}onActionFileSelectedLinkMainImageId(){}onActionSelectSource(t){if(!t||t.id<=0){this.cmsToastrService.typeErrorMessage(this.translate.instant("MESSAGE.Specify_the_source"),this.translate.instant("MESSAGE.The_source_of_the_information_application_is_not_known"));return}this.dataModel.linkTicketingDepartemenId=t.id}};s.\u0275fac=function(i){return new(i||s)(_(he),_(de),_(ve),_(L),_(K),_(At),_(N),_(ce),_(O),_(P))},s.\u0275cmp=F({type:s,selectors:[["app-ticketing-answer-add"]],viewQuery:function(i,e){if(i&1&&te(co,5),i&2){let c;ie(c=ne())&&(e.formGroup=c.first)}},features:[U],decls:15,vars:13,consts:[["vform","ngForm"],["HtmlBody",""],[1,"card","card-style","loader-container"],[3,"optionsInfoAreaId"],[1,"content","mb-0"],[1,"mb-0","color-highlight","font-600","font-12"],[3,"ngSubmit"],[3,"model","optionDisabled","optionLabel","optionRequired","optionSelectFirstItem","modelChange",4,"ngIf"],[3,"optionChange","optionSelectForce","optionPlaceholder","optionDisabled"],["class","input-style has-borders no-icon input-style-always-active validate-field mb-4",4,"ngIf"],["class","form-actions",4,"ngIf"],[3,"modelChange","model","optionDisabled","optionLabel","optionRequired","optionSelectFirstItem"],[1,"input-style","has-borders","no-icon","input-style-always-active","validate-field","mb-4"],["for","dataModel.htmlBody",1,"color-highlight"],["matInput","","name","dataModel.htmlBody","type","text","minlength","0","maxlength","1000","rows","5","id","dataModel.htmlBody",1,"form-control","validate-name",3,"ngModelChange","ngModel","placeholder","disabled"],[1,"form-actions"],["type","button",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-gray",3,"click"],["type","submit",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-green",3,"disabled"]],template:function(i,e){if(i&1){let c=M();a(0,"div",2),T(1,"app-progress-spinner",3),a(2,"div",4)(3,"p",5),d(4),l(),a(5,"p"),d(6),g(7,"translate"),l(),a(8,"form",6,0),b("ngSubmit",function(){return f(c),h(e.onFormSubmit())}),v(10,po,1,5,"app-cms-enum-record-status-selector",7),a(11,"app-ticketing-departemen-selector",8),g(12,"translate"),b("optionChange",function(p){return f(c),h(e.onActionSelectSource(p))}),l(),v(13,mo,10,9,"div",9)(14,uo,7,7,"div",10),l()()()}i&2&&(r(),m("optionsInfoAreaId",e.constructorInfoAreaId),r(3),S(" ",e.formInfo.formTitle," "),r(2),S(" ",I(7,9,"TITLE.Be_Careful_When_Entering_Information")," "),r(4),m("ngIf",e.fieldsInfo.recordStatus==null?null:e.fieldsInfo.recordStatus.accessWatchField),r(),m("optionSelectForce",e.dataModel.linkTicketingDepartemenId)("optionPlaceholder",I(12,11,"TITLE.Department"))("optionDisabled",!(e.fieldsInfo.linkTicketingDepartemenId!=null&&e.fieldsInfo.linkTicketingDepartemenId.accessAddField)),r(2),m("ngIf",e.fieldsInfo.htmlBody==null?null:e.fieldsInfo.htmlBody.accessWatchField),r(),m("ngIf",e.formInfo.formSubmitAllow))},dependencies:[G,Ce,oe,re,ge,Ie,Te,fe,Se,Q,_e,j,Ge,H]});let n=s;return n})();var fo=["vform"];function ho(n,s){if(n&1){let o=M();a(0,"app-cms-enum-record-status-selector",11),x("modelChange",function(i){f(o);let e=u();return A(e.dataModel.recordStatus,i)||(e.dataModel.recordStatus=i),h(i)}),l()}if(n&2){let o=u();y("model",o.dataModel.recordStatus),m("optionDisabled",!1)("optionLabel",o.fieldsInfo.recordStatus==null?null:o.fieldsInfo.recordStatus.fieldTitle)("optionRequired",!0)("optionSelectFirstItem",!0)}}function _o(n,s){if(n&1){let o=M();a(0,"div",12)(1,"label",13),d(2),g(3,"translate"),l(),a(4,"textarea",14,1),g(6,"translate"),x("ngModelChange",function(i){f(o);let e=u();return A(e.dataModel.htmlBody,i)||(e.dataModel.htmlBody=i),h(i)}),d(7,"                "),l(),a(8,"em"),d(9),l()()}if(n&2){let o=D(5),t=u();r(2),w(I(3,5,"TITLE.Answer_Text")),r(2),R("placeholder",I(6,7,"TITLE.Answer_Text")),y("ngModel",t.dataModel.htmlBody),m("disabled",!(t.fieldsInfo.htmlBody!=null&&t.fieldsInfo.htmlBody.accessEditField)),r(5),S("",o.value.length," / 1000")}}function go(n,s){if(n&1){let o=M();a(0,"div",15)(1,"button",16),b("click",function(){f(o);let i=u();return h(i.onActionBackToParent())}),d(2),g(3,"translate"),l(),a(4,"button",17),d(5),g(6,"translate"),l()()}if(n&2){u();let o=D(9);r(2),S(" ",I(3,3,"ACTION.BACK")," "),r(2),m("disabled",!o.form.valid),r(),S(" ",I(6,5,"ACTION.SAVE")," ")}}var Nn=(()=>{let s=class s extends Tt{constructor(t,i,e,c,C,p,V,B,J,$){super(p,new wt,c,$),this.data=t,this.dialogRef=i,this.activatedRoute=e,this.publicHelper=c,this.coreEnumService=C,this.ticketingAnswerService=p,this.cmsToastrService=V,this.router=B,this.cdr=J,this.translate=$,this.requestId=0,this.constructorInfoAreaId=this.constructor.name,this.formInfo=new ae,this.dataModel=new wt,this.dataModelResult=new St,this.selectFileTypeMainImage=["jpg","jpeg","png"],this.fileManagerOpenForm=!1,this.appLanguage="fa",this.mapOptonCenter=new It,this.publicHelper.processService.cdr=this.cdr,this.fileManagerTree=this.publicHelper.GetfileManagerTreeConfig(),t&&(this.requestId=+t.id||0)}ngOnInit(){if(this.requestId===0){this.cmsToastrService.typeErrorAddRowParentIsNull();return}this.DataGetOne(this.requestId)}onFormSubmit(){if(!this.formGroup.valid){this.cmsToastrService.typeErrorFormInvalid();return}this.DataEditContent()}DataGetOne(t){this.formInfo.formSubmitAllow=!1,this.translate.get("MESSAGE.get_information_from_the_server").subscribe(e=>{this.formInfo.formAlert=e}),this.formInfo.formError="";let i=this.constructor.name+"main";this.translate.get("MESSAGE.Receiving_information").subscribe(e=>{this.publicHelper.processService.processStart(i,e,this.constructorInfoAreaId)}),this.ticketingAnswerService.setAccessLoad(),this.ticketingAnswerService.setAccessDataType(gt.Editor),this.ticketingAnswerService.ServiceGetOneById(t).subscribe({next:e=>{this.dataAccessModel=e.access,this.fieldsInfo=this.publicHelper.fieldInfoConvertor(e.access),this.publicHelper.processService.processStop(i),this.dataModelResult=e,this.formInfo.formSubmitAllow=!0,e.isSuccess?this.dataModel=e.item:this.cmsToastrService.typeErrorGetOne(e.errorMessage)},error:e=>{this.publicHelper.processService.processStop(i),this.formInfo.formSubmitAllow=!0,this.cmsToastrService.typeErrorGetOne(e)}})}DataEditContent(){this.formInfo.formSubmitAllow=!1,this.translate.get("MESSAGE.sending_information_to_the_server").subscribe(i=>{this.formInfo.formAlert=i}),this.formInfo.formError="";let t=this.constructor.name+"main";this.translate.get("MESSAGE.sending_information_to_the_server").subscribe(i=>{this.publicHelper.processService.processStart(t,i,this.constructorInfoAreaId)}),this.ticketingAnswerService.ServiceEdit(this.dataModel).subscribe({next:i=>{this.formInfo.formSubmitAllow=!i.isSuccess,this.dataModelResult=i,i.isSuccess?(this.translate.get("MESSAGE.registration_completed_successfully").subscribe(e=>{this.formInfo.formAlert=e}),this.cmsToastrService.typeSuccessEdit(),setTimeout(()=>{this.dialogRef.close({dialogChangedDate:!1})},1e3)):this.cmsToastrService.typeErrorEdit(i.errorMessage),this.publicHelper.processService.processStop(t)},error:i=>{this.publicHelper.processService.processStop(t),this.formInfo.formSubmitAllow=!0,this.cmsToastrService.typeErrorEdit(i)}})}onStepClick(t,i){t.previouslySelectedIndex<t.selectedIndex}onActionBackToParent(){this.dialogRef.close({dialogChangedDate:!1})}onActionFileSelectedLinkMainImageId(){}onActionSelectSource(t){if(!t||t.id<=0){this.cmsToastrService.typeErrorMessage(this.translate.instant("MESSAGE.Specify_the_source"),this.translate.instant("MESSAGE.The_source_of_the_information_application_is_not_known"));return}}};s.\u0275fac=function(i){return new(i||s)(_(he),_(de),_(ve),_(L),_(K),_(At),_(N),_(ce),_(O),_(P))},s.\u0275cmp=F({type:s,selectors:[["app-ticketing-answer-edit"]],viewQuery:function(i,e){if(i&1&&te(fo,5),i&2){let c;ie(c=ne())&&(e.formGroup=c.first)}},features:[U],decls:15,vars:13,consts:[["vform","ngForm"],["HtmlBody",""],[1,"card","card-style","loader-container"],[3,"optionsInfoAreaId"],[1,"content","mb-0"],[1,"mb-0","color-highlight","font-600","font-12"],[3,"ngSubmit"],[3,"model","optionDisabled","optionLabel","optionRequired","optionSelectFirstItem","modelChange",4,"ngIf"],[3,"optionChange","optionSelectForce","optionPlaceholder","optionDisabled"],["class","input-style has-borders no-icon input-style-always-active validate-field mb-4",4,"ngIf"],["class","form-actions",4,"ngIf"],[3,"modelChange","model","optionDisabled","optionLabel","optionRequired","optionSelectFirstItem"],[1,"input-style","has-borders","no-icon","input-style-always-active","validate-field","mb-4"],["for","dataModel.htmlBody",1,"color-highlight"],["matInput","","name","dataModel.htmlBody","type","text","minlength","0","maxlength","1000","rows","5","id","dataModel.htmlBody",1,"form-control","validate-name",3,"ngModelChange","ngModel","placeholder","disabled"],[1,"form-actions"],["type","button",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-gray",3,"click"],["type","submit",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-green",3,"disabled"]],template:function(i,e){if(i&1){let c=M();a(0,"div",2),T(1,"app-progress-spinner",3),a(2,"div",4)(3,"p",5),d(4),l(),a(5,"p"),d(6),g(7,"translate"),l(),a(8,"form",6,0),b("ngSubmit",function(){return f(c),h(e.onFormSubmit())}),v(10,ho,1,5,"app-cms-enum-record-status-selector",7),a(11,"app-ticketing-departemen-selector",8),g(12,"translate"),b("optionChange",function(p){return f(c),h(e.onActionSelectSource(p))}),l(),v(13,_o,10,9,"div",9)(14,go,7,7,"div",10),l()()()}i&2&&(r(),m("optionsInfoAreaId",e.constructorInfoAreaId),r(3),S(" ",e.formInfo.formTitle," "),r(2),S(" ",I(7,9,"TITLE.Be_Careful_When_Entering_Information")," "),r(4),m("ngIf",e.fieldsInfo.recordStatus==null?null:e.fieldsInfo.recordStatus.accessWatchField),r(),m("optionSelectForce",e.dataModel.linkTicketingDepartemenId)("optionPlaceholder",I(12,11,"TITLE.Department"))("optionDisabled",!(e.fieldsInfo.linkTicketingDepartemenId!=null&&e.fieldsInfo.linkTicketingDepartemenId.accessEditField)),r(2),m("ngIf",e.fieldsInfo.htmlBody==null?null:e.fieldsInfo.htmlBody.accessWatchField),r(),m("ngIf",e.formInfo.formSubmitAllow))},dependencies:[G,Ce,oe,re,ge,Ie,Te,fe,Se,Q,_e,j,Ge,H]});let n=s;return n})();var So=["vform"];function Co(n,s){if(n&1){let o=M();a(0,"div",5)(1,"button",10),b("click",function(){f(o);let i=u();return h(i.onFormCancel())}),T(2,"i",11),d(3),g(4,"translate"),l()()}n&2&&(r(3),S(" ",I(4,1,"ACTION.CANCEL")," "))}var On=(()=>{let s=class s{constructor(t,i,e,c,C,p,V,B,J){this.data=t,this.dialogRef=i,this.coreEnumService=e,this.ticketingAnswerService=c,this.cmsToastrService=C,this.tokenHelper=p,this.cdr=V,this.publicHelper=B,this.translate=J,this.requestId=0,this.constructorInfoAreaId=this.constructor.name,this.tokenInfo=new Gt,this.dataModelResult=new z,this.dataModel=new wt,this.formInfo=new ae,this.dataModelEnumSendSmsStatusTypeResult=new z,this.fieldsInfo=new Map,this.fileManagerOpenForm=!1,this.publicHelper.processService.cdr=this.cdr,t&&(this.requestId=+t.id||0)}ngOnInit(){if(this.formInfo.formTitle=this.translate.instant("TITLE.VIEW"),this.requestId===0){this.cmsToastrService.typeErrorComponentAction(),this.dialogRef.close({dialogChangedDate:!1});return}this.DataGetOneContent(),this.tokenHelper.getTokenInfoState().then(t=>{this.tokenInfo=t}),this.cmsApiStoreSubscribe=this.tokenHelper.getTokenInfoStateOnChange().subscribe({next:t=>{this.tokenInfo=t}}),this.getEnumSendSmsStatusType()}getEnumSendSmsStatusType(){this.coreEnumService.ServiceSendSmsStatusTypeEnum().subscribe({next:t=>{this.dataModelEnumSendSmsStatusTypeResult=t}})}ngOnDestroy(){this.cmsApiStoreSubscribe.unsubscribe()}DataGetOneContent(){this.translate.get("MESSAGE.Receiving_Information_From_The_Server").subscribe(i=>{this.formInfo.formAlert=i}),this.formInfo.formError="";let t=this.constructor.name+"main";this.translate.get("MESSAGE.Receiving_information").subscribe(i=>{this.publicHelper.processService.processStart(t,i,this.constructorInfoAreaId)}),this.ticketingAnswerService.setAccessLoad(),this.ticketingAnswerService.ServiceGetOneById(this.requestId).subscribe({next:i=>{this.fieldsInfo=this.publicHelper.fieldInfoConvertor(i.access),this.dataModel=i.item,console.log(this.dataModel),i.isSuccess?(this.formInfo.formTitle=this.formInfo.formTitle+" "+i.item.id,this.formInfo.formAlert=""):(this.translate.get("ERRORMESSAGE.MESSAGE.typeError").subscribe(e=>{this.formInfo.formAlert=e}),this.formInfo.formError=i.errorMessage,this.cmsToastrService.typeErrorMessage(i.errorMessage)),this.publicHelper.processService.processStop(t)},error:i=>{this.cmsToastrService.typeError(i),this.publicHelper.processService.processStop(t,!1)}})}onFormCancel(){this.dialogRef.close({dialogChangedDate:!1})}};s.\u0275fac=function(i){return new(i||s)(_(he),_(de),_(K),_(At),_(N),_(ee),_(O),_(L),_(P))},s.\u0275cmp=F({type:s,selectors:[["app-ticketing-answer-view"]],viewQuery:function(i,e){if(i&1&&te(So,5),i&2){let c;ie(c=ne())&&(e.formGroup=c.first)}},decls:13,vars:7,consts:[[1,"ntk-cms-html-card-header"],[1,"ntk-cms-html-card-body","loader-container"],[3,"optionsInfoAreaId"],[3,"dataModel","optionMethod"],[1,"ntk-cms-html-card-message"],[1,"form-actions"],[1,"form-text","text-muted"],[1,"form-text","text-muted","danger"],[1,"ntk-cms-html-card-footer"],["class","form-actions",4,"ngIf"],["type","button",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-gray",3,"click"],[1,"ft-x"]],template:function(i,e){i&1&&(a(0,"div",0),d(1),l(),a(2,"div",1),T(3,"app-progress-spinner",2)(4,"app-cms-json-list",3),l(),a(5,"div",4)(6,"div",5)(7,"small",6),d(8),l(),a(9,"small",7),d(10),l()()(),a(11,"div",8),v(12,Co,5,3,"div",9),l()),i&2&&(r(),S(" ",e.formInfo.formTitle," "),r(2),m("optionsInfoAreaId",e.constructorInfoAreaId),r(),m("dataModel",e.dataModel)("optionMethod",1),r(4),S("",e.formInfo.formAlert," "),r(2),S("",e.formInfo.formError," "),r(2),m("ngIf",e.formInfo.formSubmitAllow))},dependencies:[G,j,Rn,H],encapsulation:2});let n=s;return n})();function Io(n,s){n&1&&T(0,"div",10)}function To(n,s){if(n&1&&(a(0,"div",4)(1,"div",5)(2,"b"),d(3),g(4,"translate"),l(),d(5,": "),l(),T(6,"div",15)(7,"div",12)(8,"div",11),l()),n&2){let o=u();r(3),S("",I(4,2,"TITLE.Description")," "),r(3),m("innerText",o.dataModelResult.item.htmlBody)}}var Gn=(()=>{let s=class s{constructor(t,i,e,c,C,p,V){this.headerService=t,this.publicHelper=i,this.cdr=e,this.cmsToastrService=c,this.dialog=C,this.translate=p,this.tokenHelper=V,this.constructorInfoAreaId=this.constructor.name,this.optionId=0,this.dataModelResult=new z,this.fieldsInfo=new Map,this.publicHelper.processService.cdr=this.cdr}ngOnInit(){this.optionId>0&&this.DataGetOneContent(),this.cmsApiStoreSubscribe=this.tokenHelper.getTokenInfoStateOnChange().subscribe({next:t=>{this.DataGetOneContent()}})}ngOnDestroy(){this.cmsApiStoreSubscribe.unsubscribe()}DataGetOneContent(){let t=this.constructor.name+"main";this.translate.get("MESSAGE.Receiving_information").subscribe(i=>{this.publicHelper.processService.processStart(t,i,this.constructorInfoAreaId)}),this.headerService.setAccessLoad(),this.headerService.ServiceGetOneById(this.optionId).subscribe({next:i=>{this.fieldsInfo=this.publicHelper.fieldInfoConvertor(i.access),i.isSuccess?this.dataModelResult=i:this.cmsToastrService.typeErrorMessage(i.errorMessage),this.publicHelper.processService.processStop(t)},error:i=>{this.cmsToastrService.typeError(i),this.publicHelper.processService.processStop(t)}})}};s.\u0275fac=function(i){return new(i||s)(_(Ne),_(L),_(O),_(N),_(Ae),_(P),_(ee))},s.\u0275cmp=F({type:s,selectors:[["app-ticketing-task-header"]],inputs:{optionId:"optionId"},decls:33,vars:11,consts:[[1,"card","card-style","loader-container"],[3,"optionsInfoAreaId"],[1,"content"],[1,"table"],[1,"tr"],[1,"td","small-width"],[1,"svg-icon","svg-icon-3x","svg-icon-primary",3,"inlineSVG"],[1,"td","large-width",2,"color","darkblue"],["class","td",4,"ngIf"],[1,"td","large-width"],[1,"td"],[2,"clear","both"],[1,"td",2,"text-align","left"],["class","tr",4,"ngIf"],[1,"divider","divider-margins"],[1,"td","large-width",3,"innerText"]],template:function(i,e){i&1&&(a(0,"div",0),T(1,"app-progress-spinner",1),a(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5),T(6,"span",6),l(),a(7,"div",7)(8,"h5")(9,"b"),d(10),g(11,"translate"),l()()(),v(12,Io,1,0,"div",8),l(),a(13,"div",4)(14,"div",5)(15,"b"),d(16),l(),d(17,": "),l(),a(18,"div",9),d(19),l(),T(20,"div",10)(21,"div",11),l(),a(22,"div",4)(23,"div",5)(24,"b"),d(25),l(),d(26,": "),l(),a(27,"div",9),d(28),l(),T(29,"div",12)(30,"div",11),l(),v(31,To,9,4,"div",13),l()()(),T(32,"div",14)),i&2&&(r(),m("optionsInfoAreaId",e.constructorInfoAreaId),r(5),m("inlineSVG","./assets/media/svg/icons/Communication/Flag.svg"),r(4),S(" ",I(11,9,"TITLE.Selected_Ticket")," "),r(2),m("ngIf",e.dataModelResult==null||e.dataModelResult.item==null?null:e.dataModelResult.item.id),r(4),S("",e.fieldsInfo.id==null?null:e.fieldsInfo.id.fieldTitle," "),r(3),w(e.dataModelResult==null||e.dataModelResult.item==null?null:e.dataModelResult.item.id),r(6),S("",e.fieldsInfo.title==null?null:e.fieldsInfo.title.fieldTitle," "),r(3),w(e.dataModelResult==null||e.dataModelResult.item==null?null:e.dataModelResult.item.title),r(3),m("ngIf",(e.dataModelResult==null||e.dataModelResult.item==null||e.dataModelResult.item.htmlBody==null?null:e.dataModelResult.item.htmlBody.length)>0))},dependencies:[G,j,In,H],styles:[".table[_ngcontent-%COMP%]{display:table;border:1px solid #40A1F5;padding:2px;background:#fff;border-radius:5px}.table[_ngcontent-%COMP%]   .th[_ngcontent-%COMP%]{display:table-row;background-color:#40a1f577;color:#fff;font-weight:700}.table[_ngcontent-%COMP%]   .tr[_ngcontent-%COMP%]:nth-child(odd){background-color:#f9f9f9}.table[_ngcontent-%COMP%]   .tr[_ngcontent-%COMP%]{display:table-row;border-bottom:1px solid #000}.table[_ngcontent-%COMP%]   .td[_ngcontent-%COMP%]{display:table-cell;padding:15px;border-bottom:1px solid #40A1F5;color:#3d7c7a}.table[_ngcontent-%COMP%]   .tr[_ngcontent-%COMP%]:last-child   .td[_ngcontent-%COMP%]{border:0}.small-width[_ngcontent-%COMP%]{width:90px}.large-width[_ngcontent-%COMP%]{width:400px}.clear[_ngcontent-%COMP%]{clear:both}"]});let n=s;return n})();var bo=()=>[5,10,20,100],wo=n=>({background:n});function Mo(n,s){if(n&1&&T(0,"app-ticketing-task-header",39),n&2){let o=u();m("optionId",o.requestLinkTaskId)}}function ko(n,s){if(n&1){let o=M();a(0,"a",40),b("click",function(){f(o);let i=u();return h(i.onActionBackToParent())}),T(1,"i",41),l()}}function Eo(n,s){if(n&1){let o=M();a(0,"div",42)(1,"a",43),b("click",function(){f(o);let i=u();return h(i.onActionButtonNewRow())}),T(2,"i",44)(3,"br"),l(),a(4,"p",45),d(5),g(6,"translate"),l()()}n&2&&(r(5),w(I(6,1,"ACTION.ADD")))}function yo(n,s){if(n&1){let o=M();a(0,"div",42)(1,"a",46),b("click",function(){f(o);let i=u();return h(i.onActionButtonEditRow(i.tableRowSelected))}),T(2,"i",47)(3,"br"),l(),a(4,"p",45),d(5),g(6,"translate"),l()()}n&2&&(r(5),w(I(6,1,"ACTION.EDIT")))}function Ao(n,s){if(n&1){let o=M();a(0,"div",42)(1,"a",48),b("click",function(){f(o);let i=u();return h(i.onActionButtonDeleteRow(i.tableRowSelected))}),T(2,"i",49)(3,"br"),l(),a(4,"p",45),d(5),g(6,"translate"),l()()}n&2&&(r(5),w(I(6,1,"ACTION.DELETE")))}function xo(n,s){if(n&1){let o=M();a(0,"div",42)(1,"a",50),b("click",function(){f(o);let i=u();return h(i.onActionButtonViewRow(i.tableRowSelected))}),T(2,"i",51)(3,"br"),l(),a(4,"p",45),d(5),g(6,"translate"),l()()}n&2&&(r(5),w(I(6,1,"ACTION.VIEW")))}function Do(n,s){if(n&1&&(a(0,"mat-header-cell",52),d(1),l()),n&2){let o=u();r(),S(" ",o.fieldsInfo.id==null?null:o.fieldsInfo.id.fieldTitle," ")}}function Ro(n,s){if(n&1&&(a(0,"mat-cell"),d(1),l()),n&2){let o=s.$implicit;r(),S(" ",o.id," ")}}function Lo(n,s){if(n&1&&(a(0,"mat-header-cell",52),d(1),l()),n&2){let o=u();r(),S(" ",o.fieldsInfo.linkTaskId==null?null:o.fieldsInfo.linkTaskId.fieldTitle," ")}}function Vo(n,s){if(n&1&&(a(0,"mat-cell"),d(1),l()),n&2){let o=s.$implicit;r(),S(" ",o.linkTaskId," ")}}function Bo(n,s){if(n&1&&(a(0,"mat-header-cell",52),d(1),l()),n&2){let o=u();r(),S(" ",o.fieldsInfo.linkMemberId==null?null:o.fieldsInfo.linkMemberId.fieldTitle," ")}}function Fo(n,s){if(n&1&&(a(0,"mat-cell"),d(1),l()),n&2){let o=s.$implicit;r(),S(" ",o.linkMemberId," ")}}function No(n,s){if(n&1&&(a(0,"mat-header-cell",52),d(1),l()),n&2){let o=u();r(),S(" ",o.fieldsInfo.createdDate==null?null:o.fieldsInfo.createdDate.fieldTitle," ")}}function Oo(n,s){if(n&1&&(a(0,"mat-cell"),d(1),l()),n&2){let o=s.$implicit,t=u();r(),S(" ",t.publicHelper.LocaleDate(o.createdDate)," ")}}function Go(n,s){if(n&1&&(a(0,"mat-header-cell",52),d(1),l()),n&2){let o=u();r(),S(" ",o.fieldsInfo.updatedDate==null?null:o.fieldsInfo.updatedDate.fieldTitle," ")}}function Po(n,s){if(n&1&&(a(0,"mat-cell"),d(1),l()),n&2){let o=s.$implicit,t=u();r(),S(" ",t.publicHelper.LocaleDate(o.updatedDate)," ")}}function Ho(n,s){if(n&1&&(a(0,"mat-header-cell",52),d(1),l()),n&2){let o=u();r(),S(" ",o.fieldsInfo.answerStatus==null?null:o.fieldsInfo.answerStatus.fieldTitle," ")}}function qo(n,s){if(n&1&&(a(0,"mat-cell",53),d(1),g(2,"enums"),l()),n&2){let o=s.$implicit,t=u();m("ngStyle",ze(5,wo,t.publicHelper.RowStyleAnswerStatus(o.ticketStatus))),r(),S(" ",Zt(2,2,o.answerStatus,t.dataModelEnumAnswerStatusResult.listItems)," ")}}function jo(n,s){n&1&&(a(0,"mat-header-cell"),d(1),g(2,"translate"),l()),n&2&&(r(),S(" ",I(2,1,"TITLE.OPTION")," "))}function Wo(n,s){if(n&1&&(a(0,"mat-cell",54)(1,"button",55)(2,"mat-icon"),d(3,"more_vert"),l()(),T(4,"mat-menu",null,2),l()),n&2){let o=D(5),t=u();r(),m("matMenuTriggerFor",o)("disabled",!t.dataModelResult.access.accessEditRow&&!t.dataModelResult.access.accessDeleteRow)}}function Uo(n,s){n&1&&T(0,"mat-header-row")}function Qo(n,s){if(n&1){let o=M();a(0,"mat-row",56),b("click",function(){let i=f(o).$implicit,e=u();return h(e.onActionTableRowSelect(i))}),l()}if(n&2){let o=s.$implicit,t=s.dataIndex,i=u();ke("ntk-row-odd",t%2)("ntk-row-even",!(t%2))("ntk-row-selected",o.id===(i.tableRowSelected==null?null:i.tableRowSelected.id))}}var en=(()=>{let s=class s extends We{constructor(t,i,e,c,C,p,V,B,J,$,De,Wt){super(t,new wt,De,p,B),this.contentService=t,this.activatedRoute=i,this.cmsToastrService=e,this.cmsConfirmationDialogService=c,this.router=C,this.tokenHelper=p,this.cdr=V,this.translate=B,this.ticketingEnumService=J,this.pageInfo=$,this.publicHelper=De,this.dialog=Wt,this.requestLinkTaskId=0,this.constructorInfoAreaId=this.constructor.name,this.flag=!1,this.tableContentSelected=[],this.filteModelContent=new Y,this.dataModelEnumAnswerStatusResult=new z,this.tabledisplayedColumns=[],this.tabledisplayedColumnsSource=["Id","LinkTaskId","LinkMemberId","CreatedDate","UpdatedDate","AnswerStatus"],this.tabledisplayedColumnsMobileSource=["Id","LinkTaskId","LinkMemberId","CreatedDate","UpdatedDate","AnswerStatus"],this.publicHelper.processService.cdr=this.cdr,this.optionsSearch.parentMethods={onSubmit:Ji=>this.onSubmitOptionsSearch(Ji)},this.filteModelContent.sortColumn="Id",this.filteModelContent.sortType=W.Ascending}ngOnInit(){this.requestLinkTaskId=+Number(this.activatedRoute.snapshot.paramMap.get("LinkTaskId")),this.tokenHelper.getTokenInfoState().then(t=>{this.tokenInfo=t,setTimeout(()=>{this.firstLoadDataRunned||this.DataGetAll()},500)}),this.cmsApiStoreSubscribe=this.tokenHelper.getTokenInfoStateOnChange().subscribe({next:t=>{this.getEnumAnswerStatus(),this.tokenInfo=t,this.DataGetAll()}}),this.getEnumAnswerStatus()}ngOnDestroy(){this.cmsApiStoreSubscribe.unsubscribe()}getEnumAnswerStatus(){this.ticketingEnumService.ServiceTicketStatusEnum().subscribe({next:t=>{this.dataModelEnumAnswerStatusResult=t}})}DataGetAll(){this.tabledisplayedColumns=this.publicHelper.TableDisplayedColumns(this.tabledisplayedColumnsSource,this.tabledisplayedColumnsMobileSource,[],this.tokenInfo),this.tableRowsSelected=[],this.onActionTableRowSelect(new wt);let t=this.constructor.name+"main";this.translate.get("MESSAGE.get_information_list").subscribe(c=>{this.publicHelper.processService.processStart(t,c,this.constructorInfoAreaId)}),this.filteModelContent.accessLoad=!0;let i=JSON.parse(JSON.stringify(this.filteModelContent)),e=new X;this.requestLinkTaskId>0&&(e.propertyName="LinkTaskId",e.value=this.requestLinkTaskId,i.filters.push(e)),this.categoryModelSelected&&this.categoryModelSelected.id>0&&(e.propertyName="LinkTaskId",e.value=this.categoryModelSelected.id,i.filters.push(e)),this.contentService.setAccessLoad(),this.contentService.ServiceGetAllEditor(i).subscribe({next:c=>{this.fieldsInfo=this.publicHelper.fieldInfoConvertor(c.access),c.isSuccess?(this.dataModelResult=c,this.tableSource.data=c.listItems,this.optionsStatist?.data?.show&&this.onActionButtonStatist(!0),setTimeout(()=>{this.optionsSearch.childMethods&&this.optionsSearch.childMethods.setAccess(c.access)},1e3)):this.cmsToastrService.typeErrorGetAll(c.errorMessage),this.publicHelper.processService.processStop(t)},error:c=>{this.cmsToastrService.typeError(c),this.publicHelper.processService.processStop(t)}})}onTableSortData(t){this.tableSource&&this.tableSource.sort&&this.tableSource.sort.active===t.active?this.tableSource.sort.start==="asc"?(t.start="desc",this.filteModelContent.sortColumn=t.active,this.filteModelContent.sortType=W.Descending):this.tableSource.sort.start==="desc"?(t.start="asc",this.filteModelContent.sortColumn="",this.filteModelContent.sortType=W.Ascending):t.start="desc":(this.filteModelContent.sortColumn=t.active,this.filteModelContent.sortType=W.Descending),this.tableSource.sort=t,this.filteModelContent.currentPageNumber=0,this.DataGetAll()}onTablePageingData(t){this.filteModelContent.currentPageNumber=t.pageIndex+1,this.filteModelContent.rowPerPage=t.pageSize,this.DataGetAll()}onActionButtonNewRow(){if(this.categoryModelSelected==null&&this.categoryModelSelected&&this.categoryModelSelected.id===0&&(this.requestLinkTaskId==null||this.requestLinkTaskId===0)){this.translate.get("MESSAGE.Content_not_selected").subscribe(e=>{this.cmsToastrService.typeErrorSelected(e)});return}var t="";this.tokenHelper.isMobile?t="dialog-fullscreen":t="dialog-min",this.dialog.open(Fn,{height:"90%",panelClass:t,enterAnimationDuration:q.cmsViewConfig.enterAnimationDuration,exitAnimationDuration:q.cmsViewConfig.exitAnimationDuration,data:{linkTaskId:this.requestLinkTaskId>0?this.requestLinkTaskId:this.categoryModelSelected.id}}).afterClosed().subscribe(e=>{e&&e.dialogChangedDate&&this.DataGetAll()})}onActionButtonViewRow(t=this.tableRowSelected){if(!t||!t.id||t.id===0){this.cmsToastrService.typeErrorSelectedRow();return}this.tableRowSelected=t;var i="";this.tokenHelper.isMobile?i="dialog-fullscreen":i="dialog-min",this.dialog.open(On,{height:"90%",panelClass:i,enterAnimationDuration:q.cmsViewConfig.enterAnimationDuration,exitAnimationDuration:q.cmsViewConfig.exitAnimationDuration,data:{id:this.tableRowSelected.id}}).afterClosed().subscribe(c=>{c&&c.dialogChangedDate})}onActionSelectorSelect(t){var i=this.filteModelContent.sortColumn,e=this.filteModelContent.sortType;this.filteModelContent=new Y,this.filteModelContent.sortColumn=i,this.filteModelContent.sortType=e,this.categoryModelSelected=t,this.DataGetAll()}onActionButtonEditRow(t=this.tableRowSelected){if(!t||!t.id||t.id===0){this.cmsToastrService.typeErrorSelectedRow();return}if(this.tableRowSelected=t,this.dataModelResult==null||this.dataModelResult.access==null||!this.dataModelResult.access.accessEditRow){this.cmsToastrService.typeErrorAccessEdit();return}var i="";this.tokenHelper.isMobile?i="dialog-fullscreen":i="dialog-min",this.dialog.open(Nn,{height:"90%",panelClass:i,enterAnimationDuration:q.cmsViewConfig.enterAnimationDuration,exitAnimationDuration:q.cmsViewConfig.exitAnimationDuration,data:{id:this.tableRowSelected.id}}).afterClosed().subscribe(c=>{c&&c.dialogChangedDate&&this.DataGetAll()})}onActionButtonDeleteRow(t=this.tableRowSelected){if(t==null||!t.id||t.id===0){this.translate.get("MESSAGE.no_row_selected_to_delete").subscribe(c=>{this.cmsToastrService.typeErrorSelected(c)});return}if(this.tableRowSelected=t,this.dataModelResult==null||this.dataModelResult.access==null||!this.dataModelResult.access.accessDeleteRow){this.cmsToastrService.typeErrorAccessDelete();return}var i="",e="";this.translate.get(["MESSAGE.Please_Confirm","MESSAGE.Do_you_want_to_delete_this_content"]).subscribe(c=>{i=c["MESSAGE.Please_Confirm"],e=c["MESSAGE.Do_you_want_to_delete_this_content"]+"?<br> ( "+this.tableRowSelected.id+" ) "}),this.cmsConfirmationDialogService.confirm(i,e).then(c=>{if(c){let C=this.constructor.name+"main";this.translate.get("MESSAGE.Receiving_information").subscribe(p=>{this.publicHelper.processService.processStart(C,p,this.constructorInfoAreaId)}),this.contentService.ServiceDelete(this.tableRowSelected.id).subscribe({next:p=>{p.isSuccess?this.cmsToastrService.typeSuccessRemove():this.cmsToastrService.typeErrorRemove(),this.publicHelper.processService.processStop(C)},error:p=>{this.cmsToastrService.typeError(p),this.publicHelper.processService.processStop(C)}})}}).catch(()=>{})}onActionButtonStatist(t=!this.optionsStatist.data.show){if(this.optionsStatist.data.show=t,!this.optionsStatist.data.show)return;let i=new Map;this.translate.get("MESSAGE.Active").subscribe(p=>{i.set(p,0)}),this.translate.get("MESSAGE.All").subscribe(p=>{i.set(p,0)});let e=this.constructor.name+".ServiceStatist";this.translate.get("MESSAGE.Get_the_statist").subscribe(p=>{this.publicHelper.processService.processStart(e,p,this.constructorInfoAreaId)}),this.contentService.ServiceGetCount(this.filteModelContent).subscribe({next:p=>{p.isSuccess&&(i.set("All",p.totalRowCount),this.optionsStatist.childMethods.setStatistValue(i)),this.publicHelper.processService.processStop(e)},error:p=>{this.cmsToastrService.typeError(p),this.publicHelper.processService.processStop(e)}});let c=JSON.parse(JSON.stringify(this.filteModelContent)),C=new X;C.propertyName="RecordStatus",C.value=Je.Available,c.filters.push(C),this.contentService.ServiceGetCount(c).subscribe({next:p=>{p.isSuccess&&(i.set("Active",p.totalRowCount),this.optionsStatist.childMethods.setStatistValue(i)),this.publicHelper.processService.processStop(e)},error:p=>{this.cmsToastrService.typeError(p),this.publicHelper.processService.processStop(e)}})}onActionButtonReload(){this.DataGetAll()}onSubmitOptionsSearch(t){this.filteModelContent.filters=t,this.DataGetAll()}onActionBackToParent(){this.router.navigate(["/ticketing/task/"])}};s.\u0275fac=function(i){return new(i||s)(_(At),_(ve),_(N),_(Rt),_(ce),_(ee),_(O),_(P),_(Pt),_(Pe),_(L),_(Ae))},s.\u0275cmp=F({type:s,selectors:[["app-ticketing-answer-list"]],features:[U],decls:59,vars:31,consts:[["tableSort","matSort"],["paginator",""],["actionMenu","matMenu"],[3,"optionId",4,"ngIf"],[3,"optionActionGuideNoticeDisplayChange","optionOnActionButtonMemoRow","optionOnActionButtonMemo","optionOnActionButtonExport","optionOnActionButtonPrintRow","optionsListInfoAreaId","optionGuideNoticeKey","optionActionGuideNoticeDisplay","optionTreeDisplay","optionActionRowId","optionActionRowDisplayMenu","optionSelectRowItemTitle"],["cms-tree",""],["cms-header",""],["cms-action-header",""],["cms-action-header-start",""],["type","button","class","btn font-13 font-600 btn-s m-1 rounded-s shadow-xl border-0 gradient-gray","target","_blank",3,"click",4,"ngIf"],["type","button","target","_blank",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-highlight",3,"click"],[1,"fa-solid","fa-info","font-18",2,"color","#ffffff"],[1,"fa-solid","fa-rotate-right","font-18",2,"color","#ffffff"],["cms-action-header-end",""],[1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-highlight",3,"click"],[3,"checked"],["cms-action-main",""],["class","col-4",4,"ngIf"],["cms-action-row",""],["cms-action-area",""],[3,"optionsChange","options"],["cms-body",""],["matSort","",3,"matSortChange","dataSource"],["matColumnDef","Id"],["mat-sort-header","",4,"matHeaderCellDef"],[4,"matCellDef"],["matColumnDef","LinkTaskId"],["matColumnDef","LinkMemberId"],["matColumnDef","CreatedDate"],["matColumnDef","UpdatedDate"],["matColumnDef","AnswerStatus"],[3,"ngStyle",4,"matCellDef"],["matColumnDef","Action"],[4,"matHeaderCellDef"],["class"," Action",4,"matCellDef"],[4,"matHeaderRowDef"],[3,"ntk-row-odd","ntk-row-even","ntk-row-selected","click",4,"matRowDef","matRowDefColumns"],["cms-footer",""],[3,"page","length","pageIndex","pageSize","pageSizeOptions"],[3,"optionId"],["type","button","target","_blank",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-gray",3,"click"],[1,"fa-solid","fa-arrow-left","font-18",2,"color","#ffffff"],[1,"col-4"],["type","button","target","_blank",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-teal",3,"click"],[1,"fa-solid","fa-plus","font-18",2,"color","#FFFFFF"],[1,"font-11","text-center","opacity-70"],["target","_blank",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-magenta",3,"click"],[1,"fa-solid","fa-pen","font-18",2,"color","#FFFFFF"],["target","_blank",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-red",3,"click"],[1,"fa-solid","fa-trash","font-18",2,"color","#ffffff"],["type","button","target","_blank","data-toggle","modal","data-target","#categoryModal",1,"btn","box-shadow-button","btn-outline-secondary",3,"click"],[1,"fa-solid","fa-eye","font-18",2,"color","#ffffff"],["mat-sort-header",""],[3,"ngStyle"],[1,"Action"],["type","button","mat-icon-button","","aria-label","Action Menu",3,"matMenuTriggerFor","disabled"],[3,"click"]],template:function(i,e){if(i&1){let c=M();v(0,Mo,1,1,"app-ticketing-task-header",3),a(1,"app-cms-html-list",4),x("optionActionGuideNoticeDisplayChange",function(p){return f(c),A(e.viewGuideNotice,p)||(e.viewGuideNotice=p),h(p)}),b("optionOnActionButtonMemoRow",function(){return f(c),h(e.onActionButtonMemoRow())})("optionOnActionButtonMemo",function(){return f(c),h(e.onActionButtonMemo())})("optionOnActionButtonExport",function(){return f(c),h(e.onActionButtonExport())})("optionOnActionButtonPrintRow",function(){return f(c),h(e.onActionButtonPrintRow())}),k(2,5),d(3," -------------------------------------- "),E(),Ee(4,6)(5,7),k(6,8),v(7,ko,2,0,"a",9),a(8,"a",10),b("click",function(){return f(c),h(e.viewGuideNotice=!e.viewGuideNotice)}),T(9,"i",11),l(),a(10,"a",10),b("click",function(){return f(c),h(e.onActionButtonReload())}),T(11,"i",12),l(),E(),k(12,13),a(13,"a",14),b("click",function(){return f(c),h(e.optionsSearch.data.show=!e.optionsSearch.data.show)}),T(14,"mat-slide-toggle",15),d(15),g(16,"translate"),l(),a(17,"a",14),b("click",function(){return f(c),h(e.onActionButtonStatist())}),T(18,"mat-slide-toggle",15),d(19),g(20,"translate"),l(),E(),k(21,16),v(22,Eo,7,3,"div",17),E(),k(23,18),v(24,yo,7,3,"div",17)(25,Ao,7,3,"div",17)(26,xo,7,3,"div",17),E(),k(27,19),a(28,"app-cms-search-list",20),x("optionsChange",function(p){return f(c),A(e.optionsSearch,p)||(e.optionsSearch=p),h(p)}),l(),a(29,"app-cms-statist-list",20),x("optionsChange",function(p){return f(c),A(e.optionsStatist,p)||(e.optionsStatist=p),h(p)}),l(),E(),k(30,21),a(31,"mat-table",22,0),b("matSortChange",function(){f(c);let p=D(32);return h(e.onTableSortData(p))}),k(33,23),v(34,Do,2,1,"mat-header-cell",24)(35,Ro,2,1,"mat-cell",25),E(),k(36,26),v(37,Lo,2,1,"mat-header-cell",24)(38,Vo,2,1,"mat-cell",25),E(),k(39,27),v(40,Bo,2,1,"mat-header-cell",24)(41,Fo,2,1,"mat-cell",25),E(),k(42,28),v(43,No,2,1,"mat-header-cell",24)(44,Oo,2,1,"mat-cell",25),E(),k(45,29),v(46,Go,2,1,"mat-header-cell",24)(47,Po,2,1,"mat-cell",25),E(),k(48,30),v(49,Ho,2,1,"mat-header-cell",24)(50,qo,3,7,"mat-cell",31),E(),k(51,32),v(52,jo,3,3,"mat-header-cell",33)(53,Wo,6,2,"mat-cell",34),E(),v(54,Uo,1,0,"mat-header-row",35)(55,Qo,1,6,"mat-row",36),l(),E(),k(56,37),a(57,"mat-paginator",38,1),b("page",function(p){return f(c),h(e.onTablePageingData(p))}),l(),E(),l()}i&2&&(m("ngIf",e.requestLinkTaskId>0),r(),m("optionsListInfoAreaId",e.constructorInfoAreaId)("optionGuideNoticeKey",""),y("optionActionGuideNoticeDisplay",e.viewGuideNotice),m("optionTreeDisplay",!1)("optionActionRowId",e.tableRowSelected==null?null:e.tableRowSelected.id)("optionActionRowDisplayMenu",e.tableRowSelectDoubleClick)("optionSelectRowItemTitle",e.tableRowSelected==null?null:e.tableRowSelected.id),r(6),m("ngIf",e.requestLinkTaskId>0),r(7),m("checked",e.optionsSearch.data.show),r(),S("",I(16,26,"ACTION.SEARCH")," "),r(3),m("checked",e.optionsStatist.data.show),r(),S("",I(20,28,"ACTION.STATIST")," "),r(3),m("ngIf",e.dataModelResult==null||e.dataModelResult.access==null?null:e.dataModelResult.access.accessAddRow),r(2),m("ngIf",e.dataModelResult==null||e.dataModelResult.access==null?null:e.dataModelResult.access.accessEditRow),r(),m("ngIf",e.dataModelResult==null||e.dataModelResult.access==null?null:e.dataModelResult.access.accessDeleteRow),r(),m("ngIf",(e.dataModelResult==null||e.dataModelResult.access==null?null:e.dataModelResult.access.accessWatchRow)&&(e.tableRowSelected==null?null:e.tableRowSelected.id)>0),r(2),y("options",e.optionsSearch),r(),y("options",e.optionsStatist),r(2),m("dataSource",e.tableSource),r(23),m("matHeaderRowDef",e.tabledisplayedColumns),r(),m("matRowDefColumns",e.tabledisplayedColumns),r(2),m("length",e.dataModelResult.totalRowCount)("pageIndex",e.dataModelResult.currentPageNumber-1)("pageSize",e.dataModelResult.rowPerPage)("pageSizeOptions",Qe(30,bo)))},dependencies:[G,Ke,Ve,xe,Xe,Ye,Ze,$e,et,tt,it,ot,st,rt,nt,ct,at,lt,dt,pt,qe,je,He,Gn,H,ii],encapsulation:2});let n=s;return n})();var Ko=["vform"];function Jo(n,s){if(n&1){let o=M();a(0,"app-cms-enum-record-status-selector",14),x("modelChange",function(i){f(o);let e=u();return A(e.dataModel.recordStatus,i)||(e.dataModel.recordStatus=i),h(i)}),l()}if(n&2){let o=u();y("model",o.dataModel.recordStatus),m("optionDisabled",!1)("optionLabel",o.fieldsInfo.recordStatus==null?null:o.fieldsInfo.recordStatus.fieldTitle)("optionRequired",!0)("optionSelectFirstItem",!0)}}function Xo(n,s){n&1&&T(0,"i",21)}function Yo(n,s){n&1&&T(0,"i",22)}function Zo(n,s){if(n&1&&(a(0,"mat-error"),d(1),a(2,"strong"),d(3),g(4,"translate"),l()()),n&2){let o=u(2);r(),S(" ",o.fieldsInfo.title==null?null:o.fieldsInfo.title.fieldTitle," is "),r(2),w(I(4,2,"MESSAGE.required"))}}function $o(n,s){if(n&1){let o=M();a(0,"div",15)(1,"label",16),d(2),l(),a(3,"input",17,1),x("ngModelChange",function(i){f(o);let e=u();return A(e.dataModel.title,i)||(e.dataModel.title=i),h(i)}),l(),v(5,Xo,1,0,"i",18)(6,Yo,1,0,"i",19),a(7,"em"),d(8),l(),v(9,Zo,5,4,"mat-error",20),l()}if(n&2){let o=D(4),t=u();r(2),w(t.fieldsInfo.title==null?null:t.fieldsInfo.title.fieldTitle),r(),R("placeholder",t.fieldsInfo.title==null?null:t.fieldsInfo.title.fieldTitle),y("ngModel",t.dataModel.title),m("disabled",!(t.fieldsInfo.title!=null&&t.fieldsInfo.title.accessAddField)),r(2),m("ngIf",!o.value),r(),m("ngIf",o.value),r(2),S("",o.value.length," / 100"),r(),m("ngIf",o.errors==null?null:o.errors.required)}}function er(n,s){if(n&1&&(T(0,"img",23),g(1,"cmsthumbnail")),n&2){let o=u();R("src",I(1,1,o.dataModel.linkMainImageIdSrc),bt)}}function tr(n,s){if(n&1){let o=M();a(0,"div",15)(1,"label",24),b("click",function(){f(o);let i=u();return h(i.fileManagerOpenForm=!0)}),d(2),g(3,"translate"),l(),a(4,"input",25,2),g(6,"translate"),x("ngModelChange",function(i){f(o);let e=u();return A(e.dataModel.linkMainImageId,i)||(e.dataModel.linkMainImageId=i),h(i)}),b("click",function(){f(o);let i=u();return h(i.fileManagerOpenForm=!0)}),l(),a(7,"cms-file-manager",26),b("itemSelected",function(i){f(o);let e=u();return h(e.onActionFileSelected(i))}),x("openFormChange",function(i){f(o);let e=u();return A(e.fileManagerOpenForm,i)||(e.fileManagerOpenForm=i),h(i)}),l()()}if(n&2){let o=u();r(2),w(I(3,11,"TITLE.Icon_File")),r(2),R("placeholder",I(6,13,"TITLE.Original_File_ID")),y("ngModel",o.dataModel.linkMainImageId),r(3),m("language",o.appLanguage)("isPopup",!0),y("openForm",o.fileManagerOpenForm),m("tree",o.fileManagerTree)("openFilemanagerButtonLabelKey","select")("openDirectUploadView",!0)("selectFileType",o.selectFileTypeMainImage)("openFilemanagerButtonView",!1)}}function ir(n,s){if(n&1){let o=M();a(0,"div",27)(1,"button",28),b("click",function(){f(o);let i=u();return h(i.onFormCancel())}),T(2,"i",29),d(3),g(4,"translate"),l(),a(5,"button",30),T(6,"i",31),d(7),g(8,"translate"),l()()}if(n&2){u();let o=D(9);r(3),S(" ",I(4,3,"ACTION.CANCEL")," "),r(2),m("disabled",!o.form.valid),r(2),S(" ",I(8,5,"ACTION.SAVE")," ")}}var Yt=(()=>{let s=class s extends Tt{constructor(t,i,e,c,C,p,V,B){super(c,new Oe,p,B),this.data=t,this.dialogRef=i,this.coreEnumService=e,this.ticketingDepartemenService=c,this.cmsToastrService=C,this.publicHelper=p,this.cdr=V,this.translate=B,this.requestId=0,this.constructorInfoAreaId=this.constructor.name,this.selectFileTypeMainImage=["jpg","jpeg","png"],this.appLanguage="fa",this.dataModelResult=new St,this.dataModel=new Oe,this.formInfo=new ae,this.fileManagerOpenForm=!1,this.publicHelper.processService.cdr=this.cdr,t&&(this.requestId=+t.id||0),this.fileManagerTree=this.publicHelper.GetfileManagerTreeConfig()}ngOnInit(){if(this.translate.get("TITLE.Edit").subscribe(t=>{this.formInfo.formTitle=t}),this.requestId<=0){this.cmsToastrService.typeErrorComponentAction(),this.dialogRef.close({dialogChangedDate:!1});return}this.DataGetOneContent()}onActionFileSelected(t){this.dataModel.linkMainImageId=t.id,this.dataModel.linkMainImageIdSrc=t.downloadLinksrc}DataGetOneContent(){if(this.requestId<=0){this.cmsToastrService.typeErrorEditRowIsNull();return}this.translate.get("MESSAGE.Receiving_Information_From_The_Server").subscribe(i=>{this.formInfo.formAlert=i}),this.formInfo.formError="";let t=this.constructor.name+"main";this.translate.get("MESSAGE.Receiving_information").subscribe(i=>{this.publicHelper.processService.processStart(t,i,this.constructorInfoAreaId)}),this.ticketingDepartemenService.setAccessLoad(),this.ticketingDepartemenService.setAccessDataType(gt.Editor),this.ticketingDepartemenService.ServiceGetOneById(this.requestId).subscribe({next:i=>{this.fieldsInfo=this.publicHelper.fieldInfoConvertor(i.access),this.dataModel=i.item,i.isSuccess?(this.formInfo.formTitle=this.formInfo.formTitle+" "+i.item.title,this.formInfo.formAlert=""):(this.translate.get("ERRORMESSAGE.MESSAGE.typeError").subscribe(e=>{this.formInfo.formAlert=e}),this.formInfo.formError=i.errorMessage,this.cmsToastrService.typeErrorMessage(i.errorMessage)),this.publicHelper.processService.processStop(t)},error:i=>{this.cmsToastrService.typeError(i),this.publicHelper.processService.processStop(t)}})}DataEditContent(){this.translate.get("MESSAGE.sending_information_to_the_server").subscribe(i=>{this.formInfo.formAlert=i}),this.formInfo.formError="";let t=this.constructor.name+"main";this.translate.get("MESSAGE.sending_information_to_the_server").subscribe(i=>{this.publicHelper.processService.processStart(t,i,this.constructorInfoAreaId)}),this.ticketingDepartemenService.ServiceEdit(this.dataModel).subscribe({next:i=>{this.dataModelResult=i,i.isSuccess?(this.translate.get("MESSAGE.registration_completed_successfully").subscribe(e=>{this.formInfo.formAlert=e}),this.cmsToastrService.typeSuccessEdit(),this.dialogRef.close({dialogChangedDate:!0})):(this.translate.get("ERRORMESSAGE.MESSAGE.typeError").subscribe(e=>{this.formInfo.formAlert=e}),this.formInfo.formError=i.errorMessage,this.cmsToastrService.typeErrorMessage(i.errorMessage)),this.publicHelper.processService.processStop(t),this.formInfo.formSubmitAllow=!0},error:i=>{this.formInfo.formSubmitAllow=!0,this.cmsToastrService.typeError(i),this.publicHelper.processService.processStop(t)}})}onFormSubmit(){this.formGroup.valid&&(this.formInfo.formSubmitAllow=!1,this.DataEditContent())}onFormCancel(){this.dialogRef.close({dialogChangedDate:!1})}};s.\u0275fac=function(i){return new(i||s)(_(he),_(de),_(K),_(Be),_(N),_(L),_(O),_(P))},s.\u0275cmp=F({type:s,selectors:[["app-ticketing-departemen-edit"]],viewQuery:function(i,e){if(i&1&&te(Ko,5),i&2){let c;ie(c=ne())&&(e.formGroup=c.first)}},features:[U],decls:18,vars:13,consts:[["vform","ngForm"],["Title",""],["LinkMainImageId",""],[1,"card","card-style","loader-container"],[3,"optionsInfoAreaId"],[1,"content","mb-0"],[1,"mb-0","color-highlight","font-600","font-12"],[3,"ngSubmit"],[3,"model","optionDisabled","optionLabel","optionRequired","optionSelectFirstItem","modelChange",4,"ngIf"],["class","input-style has-borders no-icon input-style-always-active validate-field mb-4",4,"ngIf"],[1,"mb-3"],["target","_blank",3,"href"],["style","vertical-align:middle;","class","ntk-hover-zoom","aria-hidden","","height","50","width","50",3,"src",4,"ngIf"],["class","form-actions",4,"ngIf"],[3,"modelChange","model","optionDisabled","optionLabel","optionRequired","optionSelectFirstItem"],[1,"input-style","has-borders","no-icon","input-style-always-active","validate-field","mb-4"],["for","dataModel.title",1,"color-highlight"],["matInput","","type","text","name","dataModel.title","type","text","minlength","3","maxlength","100","required","","id","dataModel.title",1,"form-control","validate-name",3,"ngModelChange","ngModel","placeholder","disabled"],["class","fa fa-times  invalid color-red-dark",4,"ngIf"],["class","fa fa-check  valid color-green-dark",4,"ngIf"],[4,"ngIf"],[1,"fa","fa-times","invalid","color-red-dark"],[1,"fa","fa-check","valid","color-green-dark"],["aria-hidden","","height","50","width","50",1,"ntk-hover-zoom",2,"vertical-align","middle",3,"src"],["for","dataModel.linkMainImageId",1,"color-highlight",3,"click"],["matInput","","type","text","name","dataModel.linkMainImageId","autocomplete","off","id","dataModel.linkMainImageId",1,"form-control","validate-name",3,"ngModelChange","click","ngModel","placeholder"],[3,"itemSelected","openFormChange","language","isPopup","openForm","tree","openFilemanagerButtonLabelKey","openDirectUploadView","selectFileType","openFilemanagerButtonView"],[1,"form-actions"],["type","button",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-gray",3,"click"],[1,"ft-x"],["type","submit",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-green",3,"disabled"],[1,"fa","fa-check-square-o"]],template:function(i,e){if(i&1){let c=M();a(0,"div",3),T(1,"app-progress-spinner",4),a(2,"div",5)(3,"p",6),d(4),l(),a(5,"p"),d(6),g(7,"translate"),l(),a(8,"form",7,0),b("ngSubmit",function(){return f(c),h(e.onFormSubmit())}),v(10,Jo,1,5,"app-cms-enum-record-status-selector",8)(11,$o,10,8,"div",9),a(12,"div",10)(13,"a",11),g(14,"cmsthumbnail"),v(15,er,2,3,"img",12),l()(),v(16,tr,8,15,"div",9)(17,ir,9,7,"div",13),l()()()}i&2&&(r(),m("optionsInfoAreaId",e.constructorInfoAreaId),r(3),S(" ",e.formInfo.formTitle," "),r(2),S(" ",I(7,9,"TITLE.Be_Careful_When_Entering_Information")," "),r(4),m("ngIf",e.fieldsInfo.recordStatus==null?null:e.fieldsInfo.recordStatus.accessWatchField),r(),m("ngIf",e.fieldsInfo.title==null?null:e.fieldsInfo.title.accessWatchField),r(2),R("href",I(14,11,e.dataModel.linkMainImageIdSrc),bt),r(2),m("ngIf",(e.dataModel==null||e.dataModel.linkMainImageIdSrc==null?null:e.dataModel.linkMainImageIdSrc.length)>0),r(),m("ngIf",e.fieldsInfo.linkMainImageId==null?null:e.fieldsInfo.linkMainImageId.accessWatchField),r(),m("ngIf",e.formInfo.formSubmitAllow))},dependencies:[G,Ce,oe,re,ge,Me,Ie,Te,fe,Se,ye,Q,_e,j,Vi,H,Nt],styles:[".form-body[_ngcontent-%COMP%]{width:500px}@media (max-width: 700px){.form-body[_ngcontent-%COMP%]{display:contents}}#file-manager[_ngcontent-%COMP%]{width:calc(100vw - 16px);height:calc(100vh - 16px)}.recordStatus-1.mat-select-panel[_ngcontent-%COMP%]{background:#ff0}.recordStatus-2.mat-select-panel[_ngcontent-%COMP%]{background:#000}.recordStatus-3.mat-select-panel[_ngcontent-%COMP%]{background:red}"]});let n=s;return n})();var nr=["vform"];function or(n,s){if(n&1){let o=M();a(0,"app-cms-enum-record-status-selector",14),x("modelChange",function(i){f(o);let e=u();return A(e.dataModel.recordStatus,i)||(e.dataModel.recordStatus=i),h(i)}),l()}if(n&2){let o=u();y("model",o.dataModel.recordStatus),m("optionDisabled",!1)("optionLabel",o.fieldsInfo.recordStatus==null?null:o.fieldsInfo.recordStatus.fieldTitle)("optionRequired",!0)("optionSelectFirstItem",!0)}}function rr(n,s){n&1&&T(0,"i",21)}function ar(n,s){n&1&&T(0,"i",22)}function lr(n,s){if(n&1&&(a(0,"mat-error"),d(1),a(2,"strong"),d(3),g(4,"translate"),l()()),n&2){let o=u(2);r(),S(" ",o.fieldsInfo.title==null?null:o.fieldsInfo.title.fieldTitle," is "),r(2),w(I(4,2,"MESSAGE.required"))}}function sr(n,s){if(n&1){let o=M();a(0,"div",15)(1,"label",16),d(2),l(),a(3,"input",17,1),x("ngModelChange",function(i){f(o);let e=u();return A(e.dataModel.title,i)||(e.dataModel.title=i),h(i)}),l(),v(5,rr,1,0,"i",18)(6,ar,1,0,"i",19),a(7,"em"),d(8),l(),v(9,lr,5,4,"mat-error",20),l()}if(n&2){let o=D(4),t=u();r(2),w(t.fieldsInfo.title==null?null:t.fieldsInfo.title.fieldTitle),r(),R("placeholder",t.fieldsInfo.title==null?null:t.fieldsInfo.title.fieldTitle),y("ngModel",t.dataModel.title),m("disabled",!(t.fieldsInfo.title!=null&&t.fieldsInfo.title.accessAddField)),r(2),m("ngIf",!o.value),r(),m("ngIf",o.value),r(2),S("",o.value.length," / 100"),r(),m("ngIf",o.errors==null?null:o.errors.required)}}function cr(n,s){if(n&1&&(T(0,"img",23),g(1,"cmsthumbnail")),n&2){let o=u();R("src",I(1,1,o.dataModel.linkMainImageIdSrc),bt)}}function dr(n,s){if(n&1){let o=M();a(0,"div",15)(1,"label",24),b("click",function(){f(o);let i=u();return h(i.fileManagerOpenForm=!0)}),d(2),g(3,"translate"),l(),a(4,"input",25,2),g(6,"translate"),x("ngModelChange",function(i){f(o);let e=u();return A(e.dataModel.linkMainImageId,i)||(e.dataModel.linkMainImageId=i),h(i)}),b("click",function(){f(o);let i=u();return h(i.fileManagerOpenForm=!0)}),l(),a(7,"cms-file-manager",26),b("itemSelected",function(i){f(o);let e=u();return h(e.onActionFileSelected(i))}),x("openFormChange",function(i){f(o);let e=u();return A(e.fileManagerOpenForm,i)||(e.fileManagerOpenForm=i),h(i)}),l()()}if(n&2){let o=u();r(2),w(I(3,11,"TITLE.Icon_File")),r(2),R("placeholder",I(6,13,"TITLE.Original_File_ID")),y("ngModel",o.dataModel.linkMainImageId),r(3),m("language",o.appLanguage)("isPopup",!0),y("openForm",o.fileManagerOpenForm),m("tree",o.fileManagerTree)("openFilemanagerButtonLabelKey","select")("openDirectUploadView",!0)("selectFileType",o.selectFileTypeMainImage)("openFilemanagerButtonView",!1)}}function pr(n,s){if(n&1){let o=M();a(0,"div",27)(1,"button",28),b("click",function(){f(o);let i=u();return h(i.onFormCancel())}),T(2,"i",29),d(3),g(4,"translate"),l(),a(5,"button",30),T(6,"i",31),d(7),g(8,"translate"),l()()}if(n&2){u();let o=D(9);r(3),S(" ",I(4,3,"ACTION.CANCEL")," "),r(2),m("disabled",!o.form.valid),r(2),S(" ",I(8,5,"ACTION.SAVE")," ")}}var Qi=(()=>{let s=class s extends ft{constructor(t,i,e,c,C,p,V,B){super(c,new Oe,p,B),this.data=t,this.dialogRef=i,this.coreEnumService=e,this.ticketingDepartemenService=c,this.cmsToastrService=C,this.publicHelper=p,this.cdr=V,this.translate=B,this.constructorInfoAreaId=this.constructor.name,this.fieldsInfo=new Map,this.selectFileTypeMainImage=["jpg","jpeg","png"],this.appLanguage="fa",this.dataModelResult=new z,this.dataModel=new Oe,this.formInfo=new ae,this.fileManagerOpenForm=!1,this.publicHelper.processService.cdr=this.cdr,this.fileManagerTree=this.publicHelper.GetfileManagerTreeConfig()}ngOnInit(){this.translate.get("TITLE.ADD").subscribe(t=>{this.formInfo.formTitle=t}),this.DataGetAccess()}onActionFileSelected(t){this.dataModel.linkMainImageId=t.id,this.dataModel.linkMainImageIdSrc=t.downloadLinksrc}DataAddContent(){this.translate.get("MESSAGE.sending_information_to_the_server").subscribe(i=>{this.formInfo.formAlert=i}),this.formInfo.formError="";let t=this.constructor.name+"main";this.translate.get("MESSAGE.Receiving_information").subscribe(i=>{this.publicHelper.processService.processStart(t,i,this.constructorInfoAreaId)}),this.ticketingDepartemenService.ServiceAdd(this.dataModel).subscribe({next:i=>{this.dataModelResult=i,i.isSuccess?(this.translate.get("MESSAGE.registration_completed_successfully").subscribe(e=>{this.formInfo.formAlert=e}),this.cmsToastrService.typeSuccessAdd(),this.dialogRef.close({dialogChangedDate:!0})):(this.translate.get("ERRORMESSAGE.MESSAGE.typeError").subscribe(e=>{this.formInfo.formAlert=e}),this.formInfo.formError=i.errorMessage,this.cmsToastrService.typeErrorMessage(i.errorMessage)),this.publicHelper.processService.processStop(t),this.formInfo.formSubmitAllow=!0},error:i=>{this.formInfo.formSubmitAllow=!0,this.cmsToastrService.typeError(i),this.publicHelper.processService.processStop(t)}})}onFormSubmit(){this.formGroup.valid&&(this.formInfo.formSubmitAllow=!1,this.DataAddContent())}onFormCancel(){this.dialogRef.close({dialogChangedDate:!1})}};s.\u0275fac=function(i){return new(i||s)(_(he),_(de),_(K),_(Be),_(N),_(L),_(O),_(P))},s.\u0275cmp=F({type:s,selectors:[["app-ticketing-departemen-add"]],viewQuery:function(i,e){if(i&1&&te(nr,5),i&2){let c;ie(c=ne())&&(e.formGroup=c.first)}},features:[U],decls:18,vars:13,consts:[["vform","ngForm"],["Title",""],["LinkMainImageId",""],[1,"card","card-style","loader-container"],[3,"optionsInfoAreaId"],[1,"content","mb-0"],[1,"mb-0","color-highlight","font-600","font-12"],[3,"ngSubmit"],[3,"model","optionDisabled","optionLabel","optionRequired","optionSelectFirstItem","modelChange",4,"ngIf"],["class","input-style has-borders no-icon input-style-always-active validate-field mb-4",4,"ngIf"],[1,"mb-3"],["target","_blank",3,"href"],["style","vertical-align:middle;","class","ntk-hover-zoom","aria-hidden","","height","50","width","50",3,"src",4,"ngIf"],["class","form-actions",4,"ngIf"],[3,"modelChange","model","optionDisabled","optionLabel","optionRequired","optionSelectFirstItem"],[1,"input-style","has-borders","no-icon","input-style-always-active","validate-field","mb-4"],["for","dataModel.title",1,"color-highlight"],["matInput","","type","text","name","dataModel.title","type","text","minlength","3","maxlength","100","required","","id","dataModel.title",1,"form-control","validate-name",3,"ngModelChange","ngModel","placeholder","disabled"],["class","fa fa-times  invalid color-red-dark",4,"ngIf"],["class","fa fa-check  valid color-green-dark",4,"ngIf"],[4,"ngIf"],[1,"fa","fa-times","invalid","color-red-dark"],[1,"fa","fa-check","valid","color-green-dark"],["aria-hidden","","height","50","width","50",1,"ntk-hover-zoom",2,"vertical-align","middle",3,"src"],["for","dataModel.linkMainImageId",1,"color-highlight",3,"click"],["matInput","","type","text","name","dataModel.linkMainImageId","autocomplete","off","id","dataModel.linkMainImageId",1,"form-control","validate-name",3,"ngModelChange","click","ngModel","placeholder"],[3,"itemSelected","openFormChange","language","isPopup","openForm","tree","openFilemanagerButtonLabelKey","openDirectUploadView","selectFileType","openFilemanagerButtonView"],[1,"form-actions"],["type","button",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-gray",3,"click"],[1,"ft-x"],["type","submit",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-green",3,"disabled"],[1,"fa","fa-check-square-o"]],template:function(i,e){if(i&1){let c=M();a(0,"div",3),T(1,"app-progress-spinner",4),a(2,"div",5)(3,"p",6),d(4),l(),a(5,"p"),d(6),g(7,"translate"),l(),a(8,"form",7,0),b("ngSubmit",function(){return f(c),h(e.onFormSubmit())}),v(10,or,1,5,"app-cms-enum-record-status-selector",8)(11,sr,10,8,"div",9),a(12,"div",10)(13,"a",11),g(14,"cmsthumbnail"),v(15,cr,2,3,"img",12),l()(),v(16,dr,8,15,"div",9)(17,pr,9,7,"div",13),l()()()}i&2&&(r(),m("optionsInfoAreaId",e.constructorInfoAreaId),r(3),S(" ",e.formInfo.formTitle," "),r(2),S(" ",I(7,9,"TITLE.Be_Careful_When_Entering_Information")," "),r(4),m("ngIf",e.fieldsInfo.recordStatus==null?null:e.fieldsInfo.recordStatus.accessWatchField),r(),m("ngIf",e.fieldsInfo.title==null?null:e.fieldsInfo.title.accessWatchField),r(2),R("href",I(14,11,e.dataModel.linkMainImageIdSrc),bt),r(2),m("ngIf",(e.dataModel==null||e.dataModel.linkMainImageIdSrc==null?null:e.dataModel.linkMainImageIdSrc.length)>0),r(),m("ngIf",e.fieldsInfo.linkMainImageId==null?null:e.fieldsInfo.linkMainImageId.accessWatchField),r(),m("ngIf",e.formInfo.formSubmitAllow))},dependencies:[G,Ce,oe,re,ge,Me,Ie,Te,fe,Se,ye,Q,_e,j,Vi,H,Nt],styles:[".form-body[_ngcontent-%COMP%]{width:500px}@media (max-width: 700px){.form-body[_ngcontent-%COMP%]{display:contents}}#file-manager[_ngcontent-%COMP%]{width:calc(100vw - 16px);height:calc(100vh - 16px)}.recordStatus-1.mat-select-panel[_ngcontent-%COMP%]{background:#ff0}.recordStatus-2.mat-select-panel[_ngcontent-%COMP%]{background:#000}.recordStatus-3.mat-select-panel[_ngcontent-%COMP%]{background:red}"]});let n=s;return n})();var mr=["vform"];function ur(n,s){if(n&1){let o=M();k(0),a(1,"div",7)(2,"label",8),d(3),l(),a(4,"input",9,0),x("ngModelChange",function(i){f(o);let e=u();return A(e.dataModelResultCategory.item.title,i)||(e.dataModelResultCategory.item.title=i),h(i)}),l()(),E()}if(n&2){let o=u();r(3),w(o.fieldsInfo.title==null?null:o.fieldsInfo.title.fieldTitle),r(),R("placeholder",o.fieldsInfo.title==null?null:o.fieldsInfo.title.fieldTitle),y("ngModel",o.dataModelResultCategory.item.title)}}function fr(n,s){if(n&1){let o=M();a(0,"div",10)(1,"button",11),b("click",function(){f(o);let i=u();return h(i.onFormCancel())}),T(2,"i",12),d(3),g(4,"translate"),l(),a(5,"button",13),b("click",function(){f(o);let i=u();return h(i.onFormDelete())}),T(6,"i",14),d(7),g(8,"translate"),l()()}if(n&2){let o=u();r(3),S(" ",I(4,3,"ACTION.CANCEL")," "),r(2),m("disabled",!o.formInfo.buttonSubmittedEnabled),r(2),S(" ",I(8,5,"ACTION.DELETE")," ")}}function hr(n,s){if(n&1){let o=M();a(0,"div",10)(1,"button",11),b("click",function(){f(o);let i=u();return h(i.onFormCancel())}),T(2,"i",12),d(3),g(4,"translate"),l(),a(5,"button",13),b("click",function(){f(o);let i=u();return h(i.onFormDelete())}),T(6,"i",14),d(7),g(8,"translate"),l()()}if(n&2){let o=u();r(3),S(" ",I(4,3,"ACTION.CANCEL")," "),r(2),m("disabled",!o.formInfo.buttonSubmittedEnabled),r(2),S(" ",I(8,5,"ACTION.DELETE")," ")}}var zi=(()=>{let s=class s{constructor(t,i,e,c,C,p,V){this.data=t,this.dialogRef=i,this.publicHelper=e,this.ticketingDepartemenService=c,this.cdr=C,this.translate=p,this.cmsToastrService=V,this.requestId=0,this.constructorInfoAreaId=this.constructor.name,this.fieldsInfo=new Map,this.dataModelResultCategory=new z,this.dataModelResultCategoryAllData=new z,this.dataModel={},this.formInfo=new ae,this.publicHelper.processService.cdr=this.cdr,t&&(this.requestId=+t.id||0)}ngOnInit(){if(this.requestId<=0){this.cmsToastrService.typeErrorDeleteRowIsNull(),this.dialogRef.close({dialogChangedDate:!1});return}this.DataGetOne(),this.DataGetAll()}DataGetOne(){if(this.requestId===0){this.cmsToastrService.typeErrorDeleteRowIsNull();return}this.translate.get("TITLE.Loading_Information").subscribe(i=>{this.formInfo.formAlert=i});let t=this.constructor.name+"main";this.translate.get("MESSAGE.Receiving_information").subscribe(i=>{this.publicHelper.processService.processStart(t,i,this.constructorInfoAreaId)}),this.ticketingDepartemenService.setAccessLoad(),this.ticketingDepartemenService.setAccessDataType(gt.Editor),this.ticketingDepartemenService.ServiceGetOneById(this.requestId).subscribe({next:i=>{this.fieldsInfo=this.publicHelper.fieldInfoConvertor(i.access),this.dataModelResultCategory=i,i.isSuccess?this.formInfo.formAlert="":(this.translate.get("ERRORMESSAGE.MESSAGE.typeError").subscribe(e=>{this.formInfo.formAlert=e}),this.formInfo.formError=i.errorMessage,this.cmsToastrService.typeErrorGetOne()),this.formInfo.formErrorStatus=!0,this.publicHelper.processService.processStop(t)},error:i=>{this.translate.get("ERRORMESSAGE.MESSAGE.typeError").subscribe(e=>{this.formInfo.formAlert=e}),this.formInfo.formErrorStatus=!0,this.cmsToastrService.typeError(i),this.publicHelper.processService.processStop(t)}})}DataGetAll(){this.translate.get("TITLE.Loading_Information").subscribe(e=>{this.formInfo.formAlert=e});let t=new Y;t.rowPerPage=100;let i=this.constructor.name+"main";this.translate.get("MESSAGE.Receiving_information").subscribe(e=>{this.publicHelper.processService.processStart(i,e,this.constructorInfoAreaId)}),this.ticketingDepartemenService.ServiceGetAll(t).subscribe({next:e=>{this.dataModelResultCategoryAllData=e,e.isSuccess?this.formInfo.formAlert="":(this.translate.get("ERRORMESSAGE.MESSAGE.typeError").subscribe(c=>{this.formInfo.formAlert=c}),this.formInfo.formError=e.errorMessage,this.formInfo.formErrorStatus=!0,this.cmsToastrService.typeErrorGetAll()),this.publicHelper.processService.processStop(i)},error:e=>{this.translate.get("ERRORMESSAGE.MESSAGE.typeError").subscribe(c=>{this.formInfo.formAlert=c}),this.formInfo.formErrorStatus=!0,this.cmsToastrService.typeError(e),this.publicHelper.processService.processStop(i)}})}onFormDelete(){if(this.requestId===0){this.cmsToastrService.typeErrorDeleteRowIsNull();return}this.formInfo.formSubmitAllow=!1,this.formInfo.buttonSubmittedEnabled=!1;let t=this.constructor.name+"main";this.translate.get("MESSAGE.Receiving_information").subscribe(i=>{this.publicHelper.processService.processStart(t,i,this.constructorInfoAreaId)}),this.ticketingDepartemenService.ServiceDelete(this.requestId).subscribe({next:i=>{this.formInfo.formSubmitAllow=!i.isSuccess,i.isSuccess?(this.translate.get("MESSAGE.Deletion_Was_Successful").subscribe(e=>{this.formInfo.formAlert=e}),this.cmsToastrService.typeSuccessRemove(),this.dialogRef.close({dialogChangedDate:!0})):(this.translate.get("ERRORMESSAGE.MESSAGE.typeError").subscribe(e=>{this.formInfo.formAlert=e}),this.formInfo.formError=i.errorMessage,this.cmsToastrService.typeErrorRemove()),this.formInfo.buttonSubmittedEnabled=!0,this.publicHelper.processService.processStop(t)},error:i=>{this.translate.get("ERRORMESSAGE.MESSAGE.typeError").subscribe(e=>{this.formInfo.formAlert=e}),this.formInfo.formSubmitAllow=!0,this.cmsToastrService.typeError(i),this.formInfo.buttonSubmittedEnabled=!0,this.publicHelper.processService.processStop(t)}})}onFormChangeNewCatId(t){if(this.formInfo.formAlert="",this.requestId===0||!t||t.id<=0){this.cmsToastrService.typeErrorDeleteRowIsNull();return}this.dataModel.newCatId=t.id,this.dataModel.newCatId===this.requestId?(this.translate.get("ERRORMESSAGE.MESSAGE.typeError").subscribe(i=>{this.formInfo.formAlert=i}),this.formInfo.formError=this.translate.instant("ERRORMESSAGE.MESSAGE.The_delete_category_ID_is_the_same_as_the_alternate_category"),this.formInfo.buttonSubmittedEnabled=!1):(this.formInfo.buttonSubmittedEnabled=!0,this.formInfo.formError="")}onFormCancel(){this.dialogRef.close({dialogChangedDate:!1})}};s.\u0275fac=function(i){return new(i||s)(_(he),_(de),_(L),_(Be),_(O),_(P),_(N))},s.\u0275cmp=F({type:s,selectors:[["app-ticketing-departemen-delete"]],viewQuery:function(i,e){if(i&1&&te(mr,5),i&2){let c;ie(c=ne())&&(e.formGroup=c.first)}},decls:11,vars:8,consts:[["Title",""],[1,"card","card-style","loader-container"],[3,"optionsInfoAreaId"],[1,"content","mb-0"],[1,"mb-0","color-highlight","font-600","font-12"],[4,"ngIf"],["class","form-actions",4,"ngIf"],[1,"input-style","has-borders","no-icon","input-style-always-active","validate-field","mb-4"],["for","dataModelResultCategory.item.title",1,"color-highlight"],["matInput","","type","text","name","dataModelResultCategory.item.title","id","dataModelResultCategory.item.title","minlength","3","maxlength","50","readonly","",1,"form-control","validate-name",3,"ngModelChange","ngModel","placeholder"],[1,"form-actions"],["type","button",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-gray",3,"click"],[1,"ft-x"],["type","button",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-red",3,"click","disabled"],[1,"fa","fa-check-square-o"]],template:function(i,e){i&1&&(a(0,"div",1),T(1,"app-progress-spinner",2),a(2,"div",3)(3,"p",4),d(4),l(),a(5,"p"),d(6),g(7,"translate"),l(),v(8,ur,6,3,"ng-container",5)(9,fr,9,7,"div",6)(10,hr,9,7,"div",6),l()()),i&2&&(r(),m("optionsInfoAreaId",e.constructorInfoAreaId),r(3),S(" ",e.formInfo.formTitle," "),r(2),S(" ",I(7,6,"TITLE.Be_Careful_When_Entering_Information")," "),r(2),m("ngIf",e.dataModelResultCategory==null?null:e.dataModelResultCategory.item),r(),m("ngIf",e.formInfo.formSubmitAllow),r(),m("ngIf",e.formInfo.formSubmitAllow))},dependencies:[G,oe,re,Ie,Te,fe,Q,j,H]});let n=s;return n})();var _r=()=>[5,10,20,100],gr=n=>({display:n});function Sr(n,s){if(n&1){let o=M();a(0,"div",17)(1,"a",44),b("click",function(){f(o);let i=u();return h(i.onActionButtonNewRow())}),T(2,"i",45)(3,"br"),l(),a(4,"p",20),d(5),g(6,"translate"),l()()}n&2&&(r(5),w(I(6,1,"ACTION.ADD")))}function Cr(n,s){if(n&1){let o=M();a(0,"div",17)(1,"a",46),b("click",function(){f(o);let i=u();return h(i.onActionButtonEditRow(i.tableRowSelected))}),T(2,"i",47)(3,"br"),l(),a(4,"p",20),d(5),g(6,"translate"),l()()}n&2&&(r(5),w(I(6,1,"ACTION.EDIT")))}function Ir(n,s){if(n&1){let o=M();a(0,"div",17)(1,"a",48),b("click",function(){f(o);let i=u();return h(i.onActionButtonDeleteRow(i.tableRowSelected))}),T(2,"i",49)(3,"br"),l(),a(4,"p",20),d(5),g(6,"translate"),l()()}n&2&&(r(5),w(I(6,1,"ACTION.DELETE")))}function Tr(n,s){n&1&&(a(0,"mat-header-cell",50),d(1),g(2,"translate"),l()),n&2&&(r(),S(" ",I(2,1,"TITLE.PICTURE")," "))}function vr(n,s){if(n&1&&(T(0,"img",52),g(1,"cmsthumbnail")),n&2){let o=u().$implicit;R("src",I(1,1,o.linkMainImageIdSrc),bt)}}function br(n,s){if(n&1&&(a(0,"mat-cell"),v(1,vr,2,3,"img",51),l()),n&2){let o=s.$implicit;r(),m("ngIf",(o==null||o.linkMainImageIdSrc==null?null:o.linkMainImageIdSrc.length)>0)}}function wr(n,s){if(n&1&&(a(0,"mat-header-cell",50),d(1),l()),n&2){let o=u();r(),S(" ",o.fieldsInfo.id==null?null:o.fieldsInfo.id.fieldTitle," ")}}function Mr(n,s){if(n&1&&(a(0,"mat-cell"),d(1),l()),n&2){let o=s.$implicit;r(),S(" ",o.id," ")}}function kr(n,s){if(n&1&&(a(0,"mat-header-cell",50),d(1),l()),n&2){let o=u();r(),S(" ",o.fieldsInfo.linkSiteId==null?null:o.fieldsInfo.linkSiteId.fieldTitle," ")}}function Er(n,s){if(n&1&&(a(0,"mat-cell"),d(1),g(2,"cmssiteinfo"),g(3,"async"),l()),n&2){let o=s.$implicit;r(),S(" ",I(3,3,I(2,1,o.linkSiteId))," ")}}function yr(n,s){if(n&1&&(a(0,"mat-header-cell",50),d(1),l()),n&2){let o=u();r(),S(" ",o.fieldsInfo.recordStatus==null?null:o.fieldsInfo.recordStatus.fieldTitle," ")}}function Ar(n,s){if(n&1&&T(0,"select",55),n&2){let o=u().$implicit,t=u();m("contentService",t.contentService)("row",o)("ngStyle",ze(3,gr,o.id===(t.tableRowSelected==null?null:t.tableRowSelected.id)?"":"none"))}}function xr(n,s){if(n&1&&(a(0,"mat-cell",53),g(1,"statusCellClass"),T(2,"i",53),g(3,"statusIconClass"),v(4,Ar,1,5,"select",54),l()),n&2){let o=s.$implicit,t=u();m("ngClass",I(1,3,o.recordStatus)),r(2),m("ngClass",I(3,5,o.recordStatus)),r(2),m("ngIf",t.dataModelResult==null||t.dataModelResult.access==null?null:t.dataModelResult.access.accessEditRow)}}function Dr(n,s){if(n&1&&(a(0,"mat-header-cell",50),d(1),l()),n&2){let o=u();r(),S(" ",o.fieldsInfo.title==null?null:o.fieldsInfo.title.fieldTitle," ")}}function Rr(n,s){if(n&1&&(a(0,"mat-cell"),d(1),l()),n&2){let o=s.$implicit;r(),S(" ",o.title," ")}}function Lr(n,s){if(n&1&&(a(0,"mat-header-cell",50),d(1),l()),n&2){let o=u();r(),S(" ",o.fieldsInfo.createdDate==null?null:o.fieldsInfo.createdDate.fieldTitle," ")}}function Vr(n,s){if(n&1&&(a(0,"mat-cell"),d(1),l()),n&2){let o=s.$implicit,t=u();r(),S(" ",t.publicHelper.LocaleDate(o.createdDate)," ")}}function Br(n,s){if(n&1&&(a(0,"mat-header-cell",50),d(1),l()),n&2){let o=u();r(),S(" ",o.fieldsInfo.updatedDate==null?null:o.fieldsInfo.updatedDate.fieldTitle," ")}}function Fr(n,s){if(n&1&&(a(0,"mat-cell"),d(1),l()),n&2){let o=s.$implicit,t=u();r(),S(" ",t.publicHelper.LocaleDate(o.updatedDate)," ")}}function Nr(n,s){n&1&&(a(0,"mat-header-cell"),d(1),g(2,"translate"),l()),n&2&&(r(),S(" ",I(2,1,"TITLE.OPTION")," "))}function Or(n,s){if(n&1&&(a(0,"mat-cell",56)(1,"button",57)(2,"mat-icon"),d(3,"more_vert"),l()(),T(4,"mat-menu",null,2),l()),n&2){let o=D(5);r(),m("matMenuTriggerFor",o)}}function Gr(n,s){n&1&&T(0,"mat-header-row")}function Pr(n,s){if(n&1){let o=M();a(0,"mat-row",58),b("click",function(){let i=f(o).$implicit,e=u();return h(e.onActionTableRowSelect(i))}),l()}if(n&2){let o=s.$implicit,t=s.dataIndex,i=u();ke("ntk-row-odd",t%2)("ntk-row-even",!(t%2))("ntk-row-selected",o.id===(i.tableRowSelected==null?null:i.tableRowSelected.id))}}var Hn=(()=>{let s=class s extends We{constructor(t,i,e,c,C,p,V,B,J){super(t,new Oe,B,c,p),this.contentService=t,this.cmsToastrService=i,this.router=e,this.tokenHelper=c,this.cdr=C,this.translate=p,this.pageInfo=V,this.publicHelper=B,this.dialog=J,this.constructorInfoAreaId=this.constructor.name,this.flag=!1,this.tableContentSelected=[],this.filteModelContent=new Y,this.tabledisplayedColumns=[],this.tabledisplayedColumnsSource=["LinkMainImageIdSrc","Id","RecordStatus"],this.tabledisplayedColumnsMobileSource=["LinkMainImageIdSrc","Id","RecordStatus"],this.publicHelper.processService.cdr=this.cdr,this.optionsSearch.parentMethods={onSubmit:$=>this.onSubmitOptionsSearch($)},this.filteModelContent.sortColumn="Id",this.filteModelContent.sortType=W.Descending}ngOnInit(){this.filteModelContent.sortColumn="Title",this.tokenHelper.getTokenInfoState().then(t=>{this.tokenInfo=t,setTimeout(()=>{this.firstLoadDataRunned||this.DataGetAll()},500)}),this.cmsApiStoreSubscribe=this.tokenHelper.getTokenInfoStateOnChange().subscribe({next:t=>{this.tokenInfo=t,this.firstLoadDataRunned=!0,this.DataGetAll()}})}ngOnDestroy(){this.cmsApiStoreSubscribe.unsubscribe()}DataGetAll(){this.tabledisplayedColumns=this.publicHelper.TableDisplayedColumns(this.tabledisplayedColumnsSource,this.tabledisplayedColumnsMobileSource,[],this.tokenInfo),this.tableRowsSelected=[],this.onActionTableRowSelect(new Oe);let t=this.constructor.name+"main";this.translate.get("MESSAGE.get_information_list").subscribe(e=>{this.publicHelper.processService.processStart(t,e,this.constructorInfoAreaId)}),this.filteModelContent.accessLoad=!0;let i=JSON.parse(JSON.stringify(this.filteModelContent));this.contentService.setAccessLoad(),this.contentService.ServiceGetAllEditor(i).subscribe({next:e=>{this.fieldsInfo=this.publicHelper.fieldInfoConvertor(e.access),e.isSuccess&&(this.dataModelResult=e,this.tableSource.data=e.listItems,this.optionsStatist?.data?.show&&this.onActionButtonStatist(!0),setTimeout(()=>{this.optionsSearch.childMethods&&this.optionsSearch.childMethods.setAccess(e.access)},1e3)),this.publicHelper.processService.processStop(t)},error:e=>{this.cmsToastrService.typeError(e),this.publicHelper.processService.processStop(t)}})}onTableSortData(t){this.tableSource&&this.tableSource.sort&&this.tableSource.sort.active===t.active?this.tableSource.sort.start==="asc"?(t.start="desc",this.filteModelContent.sortColumn=t.active,this.filteModelContent.sortType=W.Descending):this.tableSource.sort.start==="desc"?(t.start="asc",this.filteModelContent.sortColumn="",this.filteModelContent.sortType=W.Ascending):t.start="desc":(this.filteModelContent.sortColumn=t.active,this.filteModelContent.sortType=W.Descending),this.tableSource.sort=t,this.filteModelContent.currentPageNumber=0,this.DataGetAll()}onTablePageingData(t){this.filteModelContent.currentPageNumber=t.pageIndex+1,this.filteModelContent.rowPerPage=t.pageSize,this.DataGetAll()}onActionButtonNewRow(){if(this.dataModelResult==null||this.dataModelResult.access==null||!this.dataModelResult.access.accessAddRow){this.cmsToastrService.typeErrorAccessAdd();return}var t="";this.tokenHelper.isMobile?t="dialog-fullscreen":t="dialog-min",this.dialog.open(Qi,{height:"90%",panelClass:t,enterAnimationDuration:q.cmsViewConfig.enterAnimationDuration,exitAnimationDuration:q.cmsViewConfig.exitAnimationDuration,data:{}}).afterClosed().subscribe(e=>{e&&e.dialogChangedDate&&this.DataGetAll()})}onActionButtonEditRow(t=this.tableRowSelected){if(!t||!t.id||t.id===0){this.cmsToastrService.typeErrorSelectedRow();return}if(this.onActionTableRowSelect(t),this.dataModelResult==null||this.dataModelResult.access==null||!this.dataModelResult.access.accessEditRow){this.cmsToastrService.typeErrorAccessEdit();return}var i="";this.tokenHelper.isMobile?i="dialog-fullscreen":i="dialog-min",this.dialog.open(Yt,{height:"90%",panelClass:i,enterAnimationDuration:q.cmsViewConfig.enterAnimationDuration,exitAnimationDuration:q.cmsViewConfig.exitAnimationDuration,data:{id:this.tableRowSelected.id}}).afterClosed().subscribe(c=>{c&&c.dialogChangedDate&&this.DataGetAll()})}onActionButtonDeleteRow(t=this.tableRowSelected){if(!t||!t.id||t.id===0){this.translate.get("MESSAGE.no_row_selected_to_delete").subscribe(c=>{this.cmsToastrService.typeErrorSelected(c)});return}if(this.onActionTableRowSelect(t),this.dataModelResult==null||this.dataModelResult.access==null||!this.dataModelResult.access.accessDeleteRow){this.cmsToastrService.typeErrorAccessDelete();return}var i="";this.tokenHelper.isMobile?i="dialog-fullscreen":i="dialog-min",this.dialog.open(zi,{height:"90%",panelClass:i,enterAnimationDuration:q.cmsViewConfig.enterAnimationDuration,exitAnimationDuration:q.cmsViewConfig.exitAnimationDuration,data:{id:this.tableRowSelected.id}}).afterClosed().subscribe(c=>{c&&c.dialogChangedDate&&this.DataGetAll()})}onActionButtonFaqList(t=this.tableRowSelected){if(!t||!t.id||t.id===0){this.translate.get("MESSAGE.no_row_selected_to_display").subscribe(i=>{this.cmsToastrService.typeErrorSelected(i)});return}this.onActionTableRowSelect(t),this.router.navigate(["/ticketing/faq/",this.tableRowSelected.id])}onActionButtonTemplateList(t=this.tableRowSelected){if(!t||!t.id||t.id===0){this.translate.get("MESSAGE.no_row_selected_to_display").subscribe(i=>{this.cmsToastrService.typeErrorSelected(i)});return}this.onActionTableRowSelect(t),this.router.navigate(["/ticketing/template/",this.tableRowSelected.id])}onActionButtonLogList(t=this.tableRowSelected){if(!t||!t.id||t.id===0){this.translate.get("MESSAGE.no_row_selected_to_display").subscribe(i=>{this.cmsToastrService.typeErrorSelected(i)});return}this.onActionTableRowSelect(t),this.router.navigate(["/ticketing/departemenlog/DepartemenId/",this.tableRowSelected.id])}onActionButtonTaskList(t=this.tableRowSelected){if(!t||!t.id||t.id===0){this.translate.get("MESSAGE.no_row_selected_to_display").subscribe(i=>{this.cmsToastrService.typeErrorSelected(i)});return}this.onActionTableRowSelect(t),this.router.navigate(["/ticketing/task/",this.tableRowSelected.id])}onActionButtonStatist(t=!this.optionsStatist.data.show){if(this.optionsStatist.data.show=t,!this.optionsStatist.data.show)return;let i=new Map;this.translate.get("MESSAGE.Active").subscribe(p=>{i.set(p,0)}),this.translate.get("MESSAGE.All").subscribe(p=>{i.set(p,0)});let e=this.constructor.name+".ServiceStatist";this.translate.get("MESSAGE.Get_the_statist").subscribe(p=>{this.publicHelper.processService.processStart(e,p,this.constructorInfoAreaId)}),this.contentService.ServiceGetCount(this.filteModelContent).subscribe({next:p=>{p.isSuccess&&(i.set("All",p.totalRowCount),this.optionsStatist.childMethods.setStatistValue(i)),this.publicHelper.processService.processStop(e)},error:p=>{this.cmsToastrService.typeError(p),this.publicHelper.processService.processStop(e)}});let c=JSON.parse(JSON.stringify(this.filteModelContent)),C=new X;C.propertyName="RecordStatus",C.value=Je.Available,c.filters.push(C),this.contentService.ServiceGetCount(c).subscribe({next:p=>{p.isSuccess&&(i.set("Active",p.totalRowCount),this.optionsStatist.childMethods.setStatistValue(i)),this.publicHelper.processService.processStop(e)},error:p=>{this.cmsToastrService.typeError(p),this.publicHelper.processService.processStop(e)}})}onActionButtonReload(){this.DataGetAll()}onSubmitOptionsSearch(t){this.filteModelContent.filters=t,this.DataGetAll()}};s.\u0275fac=function(i){return new(i||s)(_(Be),_(N),_(ce),_(ee),_(O),_(P),_(Pe),_(L),_(Ae))},s.\u0275cmp=F({type:s,selectors:[["app-ticketing-departemen-list"]],features:[U],decls:87,vars:40,consts:[["tableSort","matSort"],["paginator",""],["actionMenu","matMenu"],[3,"optionActionGuideNoticeDisplayChange","optionOnActionButtonMemoRow","optionOnActionButtonMemo","optionOnActionButtonExport","optionOnActionButtonPrintRow","optionsListInfoAreaId","optionGuideNoticeKey","optionActionGuideNoticeDisplay","optionTreeDisplay","optionActionRowId","optionActionRowDisplayMenu","optionSelectRowItemTitle"],["cms-tree",""],["cms-header",""],["cms-action-header",""],["cms-action-header-start",""],["type","button","target","_blank",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-highlight",3,"click"],[1,"fa-solid","fa-info","font-18",2,"color","#ffffff"],[1,"fa-solid","fa-rotate-right","font-18",2,"color","#ffffff"],["cms-action-header-end",""],[1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-highlight",3,"click"],[3,"checked"],["cms-action-main",""],["class","col-4",4,"ngIf"],["cms-action-row",""],[1,"col-4"],["target","_blank",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-highlight",3,"click"],[1,"fa-solid","fa-ticket","font-18",2,"color","#ffffff"],[1,"font-11","text-center","opacity-70"],[1,"fa-solid","fa-question","font-18",2,"color","#ffffff"],[1,"fa-solid","fa-memo","font-18",2,"color","#ffffff"],["cms-action-area",""],[3,"optionsChange","options"],["cms-body",""],["matSort","",3,"matSortChange","dataSource"],["matColumnDef","LinkMainImageIdSrc"],["mat-sort-header","",4,"matHeaderCellDef"],[4,"matCellDef"],["matColumnDef","Id"],["matColumnDef","LinkSiteId"],["matColumnDef","RecordStatus"],[3,"ngClass",4,"matCellDef"],["matColumnDef","Title"],["matColumnDef","CreatedDate"],["matColumnDef","UpdatedDate"],["matColumnDef","Action"],[4,"matHeaderCellDef"],["class"," Action",4,"matCellDef"],[4,"matHeaderRowDef"],[3,"ntk-row-odd","ntk-row-even","ntk-row-selected","click",4,"matRowDef","matRowDefColumns"],["cms-footer",""],[3,"page","length","pageIndex","pageSize","pageSizeOptions"],["type","button","target","_blank",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-teal",3,"click"],[1,"fa-solid","fa-plus","font-18",2,"color","#FFFFFF"],["target","_blank",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-magenta",3,"click"],[1,"fa-solid","fa-pen","font-18",2,"color","#FFFFFF"],["target","_blank",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-red",3,"click"],[1,"fa-solid","fa-trash","font-18",2,"color","#ffffff"],["mat-sort-header",""],["style","vertical-align:middle;","class","ntk-hover-zoom","aria-hidden","","height","40","width","40",3,"src",4,"ngIf"],["aria-hidden","","height","40","width","40",1,"ntk-hover-zoom",2,"vertical-align","middle",3,"src"],[3,"ngClass"],["matNativeControl","","cmsRecordStatusSelfSave","","style","background: none; border: none;",3,"contentService","row","ngStyle",4,"ngIf"],["matNativeControl","","cmsRecordStatusSelfSave","",2,"background","none","border","none",3,"contentService","row","ngStyle"],[1,"Action"],["type","button","mat-icon-button","","aria-label","Action Menu",3,"matMenuTriggerFor"],[3,"click"]],template:function(i,e){if(i&1){let c=M();a(0,"app-cms-html-list",3),x("optionActionGuideNoticeDisplayChange",function(p){return f(c),A(e.viewGuideNotice,p)||(e.viewGuideNotice=p),h(p)}),b("optionOnActionButtonMemoRow",function(){return f(c),h(e.onActionButtonMemoRow())})("optionOnActionButtonMemo",function(){return f(c),h(e.onActionButtonMemo())})("optionOnActionButtonExport",function(){return f(c),h(e.onActionButtonExport())})("optionOnActionButtonPrintRow",function(){return f(c),h(e.onActionButtonPrintRow())}),k(1,4),d(2," -------------------------------------- "),E(),Ee(3,5)(4,6),k(5,7),a(6,"a",8),b("click",function(){return f(c),h(e.viewGuideNotice=!e.viewGuideNotice)}),T(7,"i",9),l(),a(8,"a",8),b("click",function(){return f(c),h(e.onActionButtonReload())}),T(9,"i",10),l(),E(),k(10,11),a(11,"a",12),b("click",function(){return f(c),h(e.optionsSearch.data.show=!e.optionsSearch.data.show)}),T(12,"mat-slide-toggle",13),d(13),g(14,"translate"),l(),a(15,"a",12),b("click",function(){return f(c),h(e.onActionButtonStatist())}),T(16,"mat-slide-toggle",13),d(17),g(18,"translate"),l(),E(),k(19,14),v(20,Sr,7,3,"div",15),E(),k(21,16),v(22,Cr,7,3,"div",15)(23,Ir,7,3,"div",15),a(24,"div",17)(25,"a",18),b("click",function(){return f(c),h(e.onActionButtonTaskList(e.tableRowSelected))}),T(26,"i",19)(27,"br"),l(),a(28,"p",20),d(29),g(30,"translate"),l()(),a(31,"div",17)(32,"a",18),b("click",function(){return f(c),h(e.onActionButtonFaqList(e.tableRowSelected))}),T(33,"i",21)(34,"br"),l(),a(35,"p",20),d(36),g(37,"translate"),l()(),a(38,"div",17)(39,"a",18),b("click",function(){return f(c),h(e.onActionButtonTemplateList(e.tableRowSelected))}),T(40,"i",22)(41,"br"),l(),a(42,"p",20),d(43),g(44,"translate"),l()(),a(45,"div",17)(46,"a",18),b("click",function(){return f(c),h(e.onActionButtonLogList(e.tableRowSelected))}),T(47,"i",22)(48,"br"),l(),a(49,"p",20),d(50),g(51,"translate"),l()(),E(),k(52,23),a(53,"app-cms-search-list",24),x("optionsChange",function(p){return f(c),A(e.optionsSearch,p)||(e.optionsSearch=p),h(p)}),l(),a(54,"app-cms-statist-list",24),x("optionsChange",function(p){return f(c),A(e.optionsStatist,p)||(e.optionsStatist=p),h(p)}),l(),E(),k(55,25),a(56,"mat-table",26,0),b("matSortChange",function(){f(c);let p=D(57);return h(e.onTableSortData(p))}),k(58,27),v(59,Tr,3,3,"mat-header-cell",28)(60,br,2,1,"mat-cell",29),E(),k(61,30),v(62,wr,2,1,"mat-header-cell",28)(63,Mr,2,1,"mat-cell",29),E(),k(64,31),v(65,kr,2,1,"mat-header-cell",28)(66,Er,4,5,"mat-cell",29),E(),k(67,32),v(68,yr,2,1,"mat-header-cell",28)(69,xr,5,7,"mat-cell",33),E(),k(70,34),v(71,Dr,2,1,"mat-header-cell",28)(72,Rr,2,1,"mat-cell",29),E(),k(73,35),v(74,Lr,2,1,"mat-header-cell",28)(75,Vr,2,1,"mat-cell",29),E(),k(76,36),v(77,Br,2,1,"mat-header-cell",28)(78,Fr,2,1,"mat-cell",29),E(),k(79,37),v(80,Nr,3,3,"mat-header-cell",38)(81,Or,6,1,"mat-cell",39),E(),v(82,Gr,1,0,"mat-header-row",40)(83,Pr,1,6,"mat-row",41),l(),E(),k(84,42),a(85,"mat-paginator",43,1),b("page",function(p){return f(c),h(e.onTablePageingData(p))}),l(),E(),l()}i&2&&(m("optionsListInfoAreaId",e.constructorInfoAreaId)("optionGuideNoticeKey","ticketing.departemen.list"),y("optionActionGuideNoticeDisplay",e.viewGuideNotice),m("optionTreeDisplay",!1)("optionActionRowId",e.tableRowSelected==null?null:e.tableRowSelected.id)("optionActionRowDisplayMenu",e.tableRowSelectDoubleClick)("optionSelectRowItemTitle",(e.tableRowSelected==null||e.tableRowSelected.title==null?null:e.tableRowSelected.title.length)>0?e.tableRowSelected==null?null:e.tableRowSelected.title:e.tableRowSelected==null?null:e.tableRowSelected.id),r(12),m("checked",e.optionsSearch.data.show),r(),S("",I(14,27,"ACTION.SEARCH")," "),r(3),m("checked",e.optionsStatist.data.show),r(),S("",I(18,29,"ACTION.STATIST")," "),r(3),m("ngIf",e.dataModelResult==null||e.dataModelResult.access==null?null:e.dataModelResult.access.accessAddRow),r(2),m("ngIf",e.dataModelResult==null||e.dataModelResult.access==null?null:e.dataModelResult.access.accessEditRow),r(),m("ngIf",e.dataModelResult==null||e.dataModelResult.access==null?null:e.dataModelResult.access.accessDeleteRow),r(6),w(I(30,31,"ACTION.TICKETS")),r(7),w(I(37,33,"ACTION.QUESTIONS")),r(7),w(I(44,35,"ACTION.TEMPLATES")),r(7),S(" ",I(51,37,"ACTION.LOGS"),""),r(3),y("options",e.optionsSearch),r(),y("options",e.optionsStatist),r(2),m("dataSource",e.tableSource),r(26),m("matHeaderRowDef",e.tabledisplayedColumns),r(),m("matRowDefColumns",e.tabledisplayedColumns),r(2),m("length",e.dataModelResult.totalRowCount)("pageIndex",e.dataModelResult.currentPageNumber-1)("pageSize",e.dataModelResult.rowPerPage)("pageSizeOptions",Qe(39,_r)))},dependencies:[yt,G,Ke,Ve,xe,Q,Xe,Ye,Ze,$e,et,tt,it,ot,st,rt,nt,ct,at,lt,dt,pt,qe,je,He,Mt,Le,H,ut,Nt,Et,kt],encapsulation:2});let n=s;return n})();function qr(n,s){if(n&1){let o=M();a(0,"button",13),b("click",function(){f(o);let i=u();return h(i.onActionAdd())}),d(1),g(2,"translate"),l()}n&2&&(r(),w(I(2,1,"ACTION.ADD")))}function jr(n,s){if(n&1){let o=M();a(0,"button",14),b("click",function(){f(o);let i=u();return h(i.onActionEdit())}),d(1),g(2,"translate"),l()}n&2&&(r(),w(I(2,1,"ACTION.EDIT")))}function Wr(n,s){if(n&1){let o=M();a(0,"button",15),b("click",function(){f(o);let i=u();return h(i.onActionDelete())}),d(1),g(2,"translate"),l()}n&2&&(r(),w(I(2,1,"ACTION.DELETE")))}function Ur(n,s){if(n&1){let o=M();a(0,"button",16),b("click",function(){f(o);let i=u();return h(i.onActionButtonReload())}),a(1,"mat-icon",17),g(2,"translate"),d(3,"refresh"),l()()}n&2&&(r(),R("title",I(2,1,"ACTION.RELOAD")))}function Qr(n,s){if(n&1){let o=M();a(0,"mat-tree-node",18),b("click",function(){let i=f(o).$implicit,e=u();return h(e.onActionSelect(i))}),T(1,"button",19),d(2),l()}if(n&2){let o=s.$implicit,t=s.dataIndex,i=u();ke("ntk-tree-odd",t%2)("ntk-tree-even",!(t%2))("ntk-tree-selected",i.dataModelSelect.id>0&&i.dataModelSelect.id===o.id),r(2),S(" ",o.title," ")}}function zr(n,s){if(n&1){let o=M();a(0,"mat-nested-tree-node")(1,"li")(2,"div",20),b("click",function(){let i=f(o).$implicit,e=u();return h(e.onActionSelect(i))}),a(3,"button",21),b("click",function(){let i=f(o).$implicit,e=u();return h(e.onActionSelect(i))}),a(4,"mat-icon",22),d(5),l()(),d(6),l(),a(7,"ul"),Ee(8,23),l()()()}if(n&2){let o=s.$implicit,t=u();r(2),ke("ntk-tree-selected",t.dataModelSelect.id>0&&t.dataModelSelect.id===o.id),r(),Vt("aria-label","Toggle "+o.title),r(2),S(" ",t.treeControl.isExpanded(o)?"expand_more":"chevron_right"," "),r(),S(" ",o.title," "),r(),ke("category-tree-invisible",!t.treeControl.isExpanded(o))}}var Ot=(()=>{let s=class s{constructor(t,i,e,c,C,p,V,B){this.cmsToastrService=t,this.coreEnumService=i,this.categoryService=e,this.dialog=c,this.cdr=C,this.publicHelper=p,this.tokenHelper=V,this.translate=B,this.constructorInfoAreaId=this.constructor.name,this.dataModelSelect=new Oe,this.dataModelResult=new z,this.filterModel=new Y,this.treeControl=new bn(J=>null),this.dataSource=new Dn,this.optionChange=new Ut,this.optionReload=()=>this.onActionButtonReload(),this.hasChild=(J,$)=>!1,this.firstLoadDataRunned=!1,this.publicHelper.processService.cdr=this.cdr}set optionSelectForce(t){this.onActionSelectForce(t)}ngOnInit(){setTimeout(()=>{this.firstLoadDataRunned||this.DataGetAll()},500),this.cmsApiStoreSubscribe=this.tokenHelper.getTokenInfoStateOnChange().subscribe(t=>{this.DataGetAll()})}ngOnDestroy(){this.cmsApiStoreSubscribe.unsubscribe()}DataGetAll(){this.filterModel.rowPerPage=200,this.filterModel.accessLoad=!0;let t=this.constructor.name+"main";this.translate.get("MESSAGE.Receiving_information").subscribe(i=>{this.publicHelper.processService.processStart(t,i,this.constructorInfoAreaId)}),this.categoryService.ServiceGetAll(this.filterModel).subscribe({next:i=>{i.isSuccess&&(this.dataModelResult=i,this.dataSource.data=this.dataModelResult.listItems),this.publicHelper.processService.processStop(t)},error:i=>{this.cmsToastrService.typeError(i),this.publicHelper.processService.processStop(t,!1)}})}onActionSelect(t){this.dataModelSelect=t,this.optionChange.emit(this.dataModelSelect)}onActionButtonReload(){this.onActionSelect(null),this.dataModelSelect=new Oe,this.DataGetAll()}onActionSelectForce(t){}onActionAdd(){var t="";this.tokenHelper.isMobile?t="dialog-fullscreen":t="dialog-min",this.dialog.open(Qi,{height:"90%",panelClass:t,enterAnimationDuration:q.cmsViewConfig.enterAnimationDuration,exitAnimationDuration:q.cmsViewConfig.exitAnimationDuration,data:{}}).afterClosed().subscribe(e=>{e&&e.dialogChangedDate&&this.DataGetAll()})}onActionEdit(){let t=0;if(this.dataModelSelect&&this.dataModelSelect.id>0&&(t=this.dataModelSelect.id),t===0){this.translate.get("ERRORMESSAGE.MESSAGE.typeErrorCategoryNotSelected").subscribe(c=>{this.cmsToastrService.typeErrorSelected(c)});return}var i="";this.tokenHelper.isMobile?i="dialog-fullscreen":i="dialog-min",this.dialog.open(Yt,{height:"90%",panelClass:i,enterAnimationDuration:q.cmsViewConfig.enterAnimationDuration,exitAnimationDuration:q.cmsViewConfig.exitAnimationDuration,data:{id:t}}).afterClosed().subscribe(c=>{c&&c.dialogChangedDate&&this.DataGetAll()})}onActionDelete(){let t=0;if(this.dataModelSelect&&this.dataModelSelect.id>0&&(t=this.dataModelSelect.id),t===0){this.translate.get("ERRORMESSAGE.MESSAGE.typeErrorCategoryNotSelected").subscribe(c=>{this.cmsToastrService.typeErrorSelected(c)});return}var i="";this.tokenHelper.isMobile?i="dialog-fullscreen":i="dialog-min",this.dialog.open(zi,{height:"90%",panelClass:i,enterAnimationDuration:q.cmsViewConfig.enterAnimationDuration,exitAnimationDuration:q.cmsViewConfig.exitAnimationDuration,data:{id:t}}).afterClosed().subscribe(c=>{c&&c.dialogChangedDate&&this.DataGetAll()})}};s.\u0275fac=function(i){return new(i||s)(_(N),_(K),_(Be),_(Ae),_(O),_(L),_(ee),_(P))},s.\u0275cmp=F({type:s,selectors:[["app-ticketing-departemen-tree"]],inputs:{optionSelectForce:"optionSelectForce",optionReload:"optionReload"},outputs:{optionChange:"optionChange"},decls:15,vars:14,consts:[[3,"optionHeaderDisplay","optionActionMainDisplay","optionFooterDisplay"],["cms-tree-header",""],["cms-tree-action",""],["type","button","class","btn font-13 font-600 btn-s m-1 rounded-s shadow-xl border-0 gradient-teal",3,"click",4,"ngIf"],["type","button","class","btn font-13 font-600 btn-s m-1 rounded-s shadow-xl border-0 gradient-magenta",3,"click",4,"ngIf"],["type","button","class","btn font-13 font-600 btn-s m-1 rounded-s shadow-xl border-0 gradient-red",3,"click",4,"ngIf"],["type","button","class","btn font-13 font-600 btn-s m-1 rounded-s shadow-xl border-0 gradient-highlight",3,"click",4,"ngIf"],["cms-tree-body","",1,"loader-container"],[3,"optionsInfoAreaId"],[1,"category-tree","cursor-pointer",3,"dataSource","treeControl"],["matTreeNodePadding","",3,"ntk-tree-odd","ntk-tree-even","ntk-tree-selected","click",4,"matTreeNodeDef"],[4,"matTreeNodeDef","matTreeNodeDefWhen"],["cms-tree-footer",""],["type","button",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-teal",3,"click"],["type","button",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-magenta",3,"click"],["type","button",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-red",3,"click"],["type","button",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-highlight",3,"click"],[2,"font-size","20px","margin","-6px",3,"title"],["matTreeNodePadding","",3,"click"],["type","button","mat-icon-button","","disabled",""],[1,"mat-tree-node",3,"click"],["type","button","mat-icon-button","","matTreeNodeToggle","",3,"click"],[1,"mat-icon-rtl-mirror"],["matTreeNodeOutlet",""]],template:function(i,e){i&1&&(a(0,"app-cms-html-tree",0),k(1,1),d(2),g(3,"translate"),E(),k(4,2),v(5,qr,3,3,"button",3)(6,jr,3,3,"button",4)(7,Wr,3,3,"button",5)(8,Ur,4,3,"button",6),E(),k(9,7),T(10,"app-progress-spinner",8),a(11,"mat-tree",9),v(12,Qr,3,7,"mat-tree-node",10)(13,zr,9,7,"mat-nested-tree-node",11),l(),E(),Ee(14,12),l()),i&2&&(m("optionHeaderDisplay",!0)("optionActionMainDisplay",!0)("optionFooterDisplay",!1),r(2),S(" ",I(3,12,"TABLE."+(e.dataModelResult==null||e.dataModelResult.access==null?null:e.dataModelResult.access.moduleEntityName))," "),r(3),m("ngIf",e.dataModelResult==null||e.dataModelResult.access==null?null:e.dataModelResult.access.accessAddRow),r(),m("ngIf",(e.dataModelResult==null||e.dataModelResult.access==null?null:e.dataModelResult.access.accessEditRow)&&(e.dataModelSelect==null?null:e.dataModelSelect.id)>0),r(),m("ngIf",(e.dataModelResult==null||e.dataModelResult.access==null?null:e.dataModelResult.access.accessDeleteRow)&&(e.dataModelSelect==null?null:e.dataModelSelect.id)>0),r(),m("ngIf",e.dataModelResult==null||e.dataModelResult.access==null?null:e.dataModelResult.access.accessWatchRow),r(2),m("optionsInfoAreaId",e.constructorInfoAreaId),r(),m("dataSource",e.dataSource)("treeControl",e.treeControl),r(2),m("matTreeNodeDefWhen",e.hasChild))},dependencies:[G,Ve,xe,kn,Mn,En,xn,An,wn,yn,j,Zi,H]});let n=s;return n})();var Kr=()=>[5,10,20,100],Jr=n=>({display:n});function Xr(n,s){if(n&1){let o=M();a(0,"a",40),b("click",function(){f(o);let i=u();return h(i.onActionBackToParent())}),T(1,"i",41),l()}}function Yr(n,s){if(n&1){let o=M();a(0,"div",42)(1,"a",43),b("click",function(){f(o);let i=u();return h(i.onActionButtonEditRow(i.tableRowSelected))}),T(2,"i",44)(3,"br"),l(),a(4,"p",45),d(5),g(6,"translate"),l()()}n&2&&(r(5),w(I(6,1,"ACTION.EDIT")))}function Zr(n,s){if(n&1&&(a(0,"mat-header-cell",46),d(1),l()),n&2){let o=u();r(),S(" ",o.fieldsInfo.id==null?null:o.fieldsInfo.id.fieldTitle," ")}}function $r(n,s){if(n&1&&(a(0,"mat-cell"),d(1),l()),n&2){let o=s.$implicit;r(),S(" ",o.id," ")}}function ea(n,s){if(n&1&&(a(0,"mat-header-cell",46),d(1),l()),n&2){let o=u();r(),S(" ",o.fieldsInfo.linkSiteId==null?null:o.fieldsInfo.linkSiteId.fieldTitle," ")}}function ta(n,s){if(n&1&&(a(0,"mat-cell"),d(1),g(2,"cmssiteinfo"),g(3,"async"),l()),n&2){let o=s.$implicit;r(),S(" ",I(3,3,I(2,1,o.linkSiteId))," ")}}function ia(n,s){if(n&1&&(a(0,"mat-header-cell",46),d(1),l()),n&2){let o=u();r(),S(" ",o.fieldsInfo.linkSourceId==null?null:o.fieldsInfo.linkSourceId.fieldTitle," ")}}function na(n,s){if(n&1&&(a(0,"mat-cell"),d(1),l()),n&2){let o=s.$implicit;r(),S(" ",o.linkSourceId," ")}}function oa(n,s){if(n&1&&(a(0,"mat-header-cell",46),d(1),l()),n&2){let o=u();r(),S(" ",o.fieldsInfo.recordStatus==null?null:o.fieldsInfo.recordStatus.fieldTitle," ")}}function ra(n,s){if(n&1&&T(0,"select",49),n&2){let o=u().$implicit,t=u();m("contentService",t.contentService)("row",o)("ngStyle",ze(3,Jr,o.id===(t.tableRowSelected==null?null:t.tableRowSelected.id)?"":"none"))}}function aa(n,s){if(n&1&&(a(0,"mat-cell",47),g(1,"statusCellClass"),T(2,"i",47),g(3,"statusIconClass"),v(4,ra,1,5,"select",48),l()),n&2){let o=s.$implicit,t=u();m("ngClass",I(1,3,o.recordStatus)),r(2),m("ngClass",I(3,5,o.recordStatus)),r(2),m("ngIf",t.dataModelResult==null||t.dataModelResult.access==null?null:t.dataModelResult.access.accessEditRow)}}function la(n,s){if(n&1&&(a(0,"mat-header-cell",46),d(1),l()),n&2){let o=u();r(),S(" ",o.fieldsInfo.title==null?null:o.fieldsInfo.title.fieldTitle," ")}}function sa(n,s){if(n&1&&(a(0,"mat-cell"),d(1),l()),n&2){let o=s.$implicit;r(),S(" ",o.title," ")}}function ca(n,s){if(n&1&&(a(0,"mat-header-cell",46),d(1),l()),n&2){let o=u();r(),S(" ",o.fieldsInfo.createdDate==null?null:o.fieldsInfo.createdDate.fieldTitle," ")}}function da(n,s){if(n&1&&(a(0,"mat-cell"),d(1),l()),n&2){let o=s.$implicit,t=u();r(),S(" ",t.publicHelper.LocaleDate(o.createdDate)," ")}}function pa(n,s){if(n&1&&(a(0,"mat-header-cell",46),d(1),l()),n&2){let o=u();r(),S(" ",o.fieldsInfo.updatedDate==null?null:o.fieldsInfo.updatedDate.fieldTitle," ")}}function ma(n,s){if(n&1&&(a(0,"mat-cell"),d(1),l()),n&2){let o=s.$implicit,t=u();r(),S(" ",t.publicHelper.LocaleDate(o.updatedDate)," ")}}function ua(n,s){n&1&&(a(0,"mat-header-cell"),d(1),g(2,"translate"),l()),n&2&&(r(),S(" ",I(2,1,"TITLE.OPTION")," "))}function fa(n,s){if(n&1&&(a(0,"mat-cell",50)(1,"button",51)(2,"mat-icon"),d(3,"more_vert"),l()(),T(4,"mat-menu",null,2),l()),n&2){let o=D(5);r(),m("matMenuTriggerFor",o)}}function ha(n,s){n&1&&T(0,"mat-header-row")}function _a(n,s){if(n&1){let o=M();a(0,"mat-row",52),b("click",function(){let i=f(o).$implicit,e=u();return h(e.onActionTableRowSelect(i))}),l()}if(n&2){let o=s.$implicit,t=s.dataIndex,i=u();ke("ntk-row-odd",t%2)("ntk-row-even",!(t%2))("ntk-row-selected",o.id===(i.tableRowSelected==null?null:i.tableRowSelected.id))}}var tn=(()=>{let s=class s extends We{constructor(t,i,e,c,C,p,V,B,J,$){super(t,new Yi,J,C,V),this.contentService=t,this.activatedRoute=i,this.cmsToastrService=e,this.router=c,this.tokenHelper=C,this.cdr=p,this.translate=V,this.pageInfo=B,this.publicHelper=J,this.dialog=$,this.requestDepartemenId=0,this.requestOperatorId=0,this.constructorInfoAreaId=this.constructor.name,this.flag=!1,this.tableContentSelected=[],this.filteModelContent=new Y,this.tabledisplayedColumns=[],this.tabledisplayedColumnsSource=["Id","RecordStatus","LinkSourceId","CreatedDate","UpdatedDate"],this.tabledisplayedColumnsMobileSource=["Id","RecordStatus","LinkSourceId","CreatedDate","UpdatedDate"],this.publicHelper.processService.cdr=this.cdr,this.requestDepartemenId=+Number(this.activatedRoute.snapshot.paramMap.get("DepartemenId")),this.requestOperatorId=+Number(this.activatedRoute.snapshot.paramMap.get("OperatorId")),this.optionsSearch.parentMethods={onSubmit:De=>this.onSubmitOptionsSearch(De)},this.filteModelContent.sortColumn="CreatedDate",this.filteModelContent.sortType=W.Descending}ngOnInit(){this.tokenHelper.getTokenInfoState().then(i=>{this.tokenInfo=i,setTimeout(()=>{this.firstLoadDataRunned||this.DataGetAll()},500)}),this.cmsApiStoreSubscribe=this.tokenHelper.getTokenInfoStateOnChange().subscribe({next:i=>{this.tokenInfo=i,this.firstLoadDataRunned=!0,this.DataGetAll()}});let t=new X;this.requestOperatorId>0&&(t.propertyName="LinkFromOperatorId",t.value=this.requestOperatorId,this.filteModelContent.filters.push(t)),this.requestDepartemenId>0&&(t=new X,t.propertyName="LinkFromTicketingDepartemenId",t.value=this.requestDepartemenId,t.clauseType=Ft.Or,this.filteModelContent.filters.push(t),t=new X,t.propertyName="LinkToTicketingDepartemenId",t.value=this.requestDepartemenId,t.clauseType=Ft.Or,this.filteModelContent.filters.push(t))}ngOnDestroy(){this.cmsApiStoreSubscribe.unsubscribe()}DataGetAll(){this.tabledisplayedColumns=this.publicHelper.TableDisplayedColumns(this.tabledisplayedColumnsSource,this.tabledisplayedColumnsMobileSource,[],this.tokenInfo),this.tableRowsSelected=[],this.onActionTableRowSelect(new Yi);let t=this.constructor.name+"main";this.translate.get("MESSAGE.get_information_list").subscribe(e=>{this.publicHelper.processService.processStart(t,e,this.constructorInfoAreaId)}),this.filteModelContent.accessLoad=!0;let i=JSON.parse(JSON.stringify(this.filteModelContent));if(this.categoryModelSelected&&this.categoryModelSelected.id>0){let e=new X;e.propertyName="LinkFromTicketingDepartemenId",e.value=this.categoryModelSelected.id,i.filters.push(e)}this.contentService.setAccessLoad(),this.contentService.ServiceGetAllEditor(i).subscribe({next:e=>{this.fieldsInfo=this.publicHelper.fieldInfoConvertor(e.access),e.isSuccess?(this.dataModelResult=e,this.tableSource.data=e.listItems,this.optionsStatist?.data?.show&&this.onActionButtonStatist(!0),setTimeout(()=>{this.optionsSearch.childMethods&&this.optionsSearch.childMethods.setAccess(e.access)},1e3)):this.cmsToastrService.typeErrorGetAll(e.errorMessage),this.publicHelper.processService.processStop(t)},error:e=>{this.cmsToastrService.typeError(e),this.publicHelper.processService.processStop(t)}})}onTableSortData(t){this.tableSource&&this.tableSource.sort&&this.tableSource.sort.active===t.active?this.tableSource.sort.start==="asc"?(t.start="desc",this.filteModelContent.sortColumn=t.active,this.filteModelContent.sortType=W.Descending):this.tableSource.sort.start==="desc"?(t.start="asc",this.filteModelContent.sortColumn="",this.filteModelContent.sortType=W.Ascending):t.start="desc":(this.filteModelContent.sortColumn=t.active,this.filteModelContent.sortType=W.Descending),this.tableSource.sort=t,this.filteModelContent.currentPageNumber=0,this.DataGetAll()}onTablePageingData(t){this.filteModelContent.currentPageNumber=t.pageIndex+1,this.filteModelContent.rowPerPage=t.pageSize,this.DataGetAll()}onActionSelectorSelect(t){var i=this.filteModelContent.sortColumn,e=this.filteModelContent.sortType;this.filteModelContent=new Y,this.filteModelContent.sortColumn=i,this.filteModelContent.sortType=e,this.categoryModelSelected=t,this.DataGetAll()}onActionButtonEditRow(t=this.tableRowSelected){if(!t||!t.id||t.id===0){this.cmsToastrService.typeErrorSelectedRow();return}if(this.tableRowSelected=t,this.dataModelResult==null||this.dataModelResult.access==null||!this.dataModelResult.access.accessEditRow){this.cmsToastrService.typeErrorAccessEdit();return}this.router.navigate(["/application/app/edit/",this.tableRowSelected.id])}onActionButtonDeleteRow(t=this.tableRowSelected){if(t==null||!t.id||t.id===0){this.cmsToastrService.typeErrorSelectedRow();return}if(this.tableRowSelected=t,this.dataModelResult==null||this.dataModelResult.access==null||!this.dataModelResult.access.accessDeleteRow){this.cmsToastrService.typeErrorAccessDelete();return}this.router.navigate(["/application/app/delete/",this.tableRowSelected.id])}onActionButtonStatist(t=!this.optionsStatist.data.show){if(this.optionsStatist.data.show=t,!this.optionsStatist.data.show)return;let i=new Map;this.translate.get("MESSAGE.Active").subscribe(p=>{i.set(p,0)}),this.translate.get("MESSAGE.All").subscribe(p=>{i.set(p,0)});let e=this.constructor.name+".ServiceStatist";this.translate.get("MESSAGE.Get_the_statist").subscribe(p=>{this.publicHelper.processService.processStart(e,p,this.constructorInfoAreaId)}),this.contentService.ServiceGetCount(this.filteModelContent).subscribe({next:p=>{p.isSuccess&&(i.set("All",p.totalRowCount),this.optionsStatist.childMethods.setStatistValue(i)),this.publicHelper.processService.processStop(e)},error:p=>{this.cmsToastrService.typeError(p),this.publicHelper.processService.processStop(e)}});let c=JSON.parse(JSON.stringify(this.filteModelContent)),C=new X;C.propertyName="RecordStatus",C.value=Je.Available,c.filters.push(C),this.contentService.ServiceGetCount(c).subscribe({next:p=>{p.isSuccess&&(i.set("Active",p.totalRowCount),this.optionsStatist.childMethods.setStatistValue(i)),this.publicHelper.processService.processStop(e)},error:p=>{this.cmsToastrService.typeError(p),this.publicHelper.processService.processStop(e)}})}onActionButtonReload(){this.DataGetAll()}onSubmitOptionsSearch(t){this.filteModelContent.filters=t,this.DataGetAll()}onActionBackToParent(){this.requestOperatorId>0&&this.router.navigate(["/application/app/"]),this.requestDepartemenId>0&&this.router.navigate(["/ticketing/departemen/"])}};s.\u0275fac=function(i){return new(i||s)(_(Li),_(ve),_(N),_(ce),_(ee),_(O),_(P),_(Pe),_(L),_(Ae))},s.\u0275cmp=F({type:s,selectors:[["app-application-app-list"]],features:[U],decls:58,vars:27,consts:[["tableSort","matSort"],["paginator",""],["actionMenu","matMenu"],[3,"optionActionGuideNoticeDisplayChange","optionOnActionButtonMemoRow","optionOnActionButtonMemo","optionOnActionButtonExport","optionOnActionButtonPrintRow","optionsListInfoAreaId","optionGuideNoticeKey","optionActionGuideNoticeDisplay","optionTreeDisplay","optionActionRowId","optionActionRowDisplayMenu","optionSelectRowItemTitle"],["cms-tree",""],[3,"optionChange"],["cms-header",""],["cms-action-header",""],["cms-action-header-start",""],["type","button","class","btn font-13 font-600 btn-s m-1 rounded-s shadow-xl border-0 gradient-gray","target","_blank",3,"click",4,"ngIf"],["type","button","target","_blank",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-highlight",3,"click"],[1,"fa-solid","fa-info","font-18",2,"color","#ffffff"],[1,"fa-solid","fa-rotate-right","font-18",2,"color","#ffffff"],["cms-action-header-end",""],[1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-highlight",3,"click"],[3,"checked"],["cms-action-main",""],["cms-action-row",""],["class","col-4",4,"ngIf"],["cms-action-area",""],[3,"optionsChange","options"],["cms-body",""],["matSort","",3,"matSortChange","dataSource"],["matColumnDef","Id"],["mat-sort-header","",4,"matHeaderCellDef"],[4,"matCellDef"],["matColumnDef","LinkSiteId"],["matColumnDef","LinkSourceId"],["matColumnDef","RecordStatus"],[3,"ngClass",4,"matCellDef"],["matColumnDef","Title"],["matColumnDef","CreatedDate"],["matColumnDef","UpdatedDate"],["matColumnDef","Action"],[4,"matHeaderCellDef"],["class"," Action",4,"matCellDef"],[4,"matHeaderRowDef"],[3,"ntk-row-odd","ntk-row-even","ntk-row-selected","click",4,"matRowDef","matRowDefColumns"],["cms-footer",""],[3,"page","length","pageIndex","pageSize","pageSizeOptions"],["type","button","target","_blank",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-gray",3,"click"],[1,"fa-solid","fa-arrow-left","font-18",2,"color","#ffffff"],[1,"col-4"],["target","_blank",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-magenta",3,"click"],[1,"fa-solid","fa-pen","font-18",2,"color","#FFFFFF"],[1,"font-11","text-center","opacity-70"],["mat-sort-header",""],[3,"ngClass"],["matNativeControl","","cmsRecordStatusSelfSave","","style","background: none; border: none;",3,"contentService","row","ngStyle",4,"ngIf"],["matNativeControl","","cmsRecordStatusSelfSave","",2,"background","none","border","none",3,"contentService","row","ngStyle"],[1,"Action"],["type","button","mat-icon-button","","aria-label","Action Menu",3,"matMenuTriggerFor"],[3,"click"]],template:function(i,e){if(i&1){let c=M();a(0,"app-cms-html-list",3),x("optionActionGuideNoticeDisplayChange",function(p){return f(c),A(e.viewGuideNotice,p)||(e.viewGuideNotice=p),h(p)}),b("optionOnActionButtonMemoRow",function(){return f(c),h(e.onActionButtonMemoRow())})("optionOnActionButtonMemo",function(){return f(c),h(e.onActionButtonMemo())})("optionOnActionButtonExport",function(){return f(c),h(e.onActionButtonExport())})("optionOnActionButtonPrintRow",function(){return f(c),h(e.onActionButtonPrintRow())}),k(1,4),a(2,"app-ticketing-departemen-tree",5),b("optionChange",function(p){return f(c),h(e.onActionSelectorSelect(p))}),l(),E(),Ee(3,6)(4,7),k(5,8),v(6,Xr,2,0,"a",9),a(7,"a",10),b("click",function(){return f(c),h(e.viewGuideNotice=!e.viewGuideNotice)}),T(8,"i",11),l(),a(9,"a",10),b("click",function(){return f(c),h(e.onActionButtonReload())}),T(10,"i",12),l(),E(),k(11,13),a(12,"a",14),b("click",function(){return f(c),h(e.optionsSearch.data.show=!e.optionsSearch.data.show)}),T(13,"mat-slide-toggle",15),d(14),g(15,"translate"),l(),a(16,"a",14),b("click",function(){return f(c),h(e.onActionButtonStatist())}),T(17,"mat-slide-toggle",15),d(18),g(19,"translate"),l(),E(),Ee(20,16),k(21,17),v(22,Yr,7,3,"div",18),E(),k(23,19),a(24,"app-cms-search-list",20),x("optionsChange",function(p){return f(c),A(e.optionsSearch,p)||(e.optionsSearch=p),h(p)}),l(),a(25,"app-cms-statist-list",20),x("optionsChange",function(p){return f(c),A(e.optionsStatist,p)||(e.optionsStatist=p),h(p)}),l(),E(),k(26,21),a(27,"mat-table",22,0),b("matSortChange",function(){f(c);let p=D(28);return h(e.onTableSortData(p))}),k(29,23),v(30,Zr,2,1,"mat-header-cell",24)(31,$r,2,1,"mat-cell",25),E(),k(32,26),v(33,ea,2,1,"mat-header-cell",24)(34,ta,4,5,"mat-cell",25),E(),k(35,27),v(36,ia,2,1,"mat-header-cell",24)(37,na,2,1,"mat-cell",25),E(),k(38,28),v(39,oa,2,1,"mat-header-cell",24)(40,aa,5,7,"mat-cell",29),E(),k(41,30),v(42,la,2,1,"mat-header-cell",24)(43,sa,2,1,"mat-cell",25),E(),k(44,31),v(45,ca,2,1,"mat-header-cell",24)(46,da,2,1,"mat-cell",25),E(),k(47,32),v(48,pa,2,1,"mat-header-cell",24)(49,ma,2,1,"mat-cell",25),E(),k(50,33),v(51,ua,3,3,"mat-header-cell",34)(52,fa,6,1,"mat-cell",35),E(),v(53,ha,1,0,"mat-header-row",36)(54,_a,1,6,"mat-row",37),l(),E(),k(55,38),a(56,"mat-paginator",39,1),b("page",function(p){return f(c),h(e.onTablePageingData(p))}),l(),E(),l()}i&2&&(m("optionsListInfoAreaId",e.constructorInfoAreaId)("optionGuideNoticeKey",""),y("optionActionGuideNoticeDisplay",e.viewGuideNotice),m("optionTreeDisplay",e.requestDepartemenId===0)("optionActionRowId",e.tableRowSelected==null?null:e.tableRowSelected.id)("optionActionRowDisplayMenu",e.tableRowSelectDoubleClick)("optionSelectRowItemTitle",e.tableRowSelected==null?null:e.tableRowSelected.id),r(6),m("ngIf",e.requestDepartemenId>0),r(7),m("checked",e.optionsSearch.data.show),r(),S("",I(15,22,"ACTION.SEARCH")," "),r(3),m("checked",e.optionsStatist.data.show),r(),S("",I(19,24,"ACTION.STATIST")," "),r(4),m("ngIf",e.dataModelResult==null||e.dataModelResult.access==null?null:e.dataModelResult.access.accessEditRow),r(2),y("options",e.optionsSearch),r(),y("options",e.optionsStatist),r(2),m("dataSource",e.tableSource),r(26),m("matHeaderRowDef",e.tabledisplayedColumns),r(),m("matRowDefColumns",e.tabledisplayedColumns),r(2),m("length",e.dataModelResult.totalRowCount)("pageIndex",e.dataModelResult.currentPageNumber-1)("pageSize",e.dataModelResult.rowPerPage)("pageSizeOptions",Qe(26,Kr)))},dependencies:[yt,G,Ke,Ve,xe,Q,Xe,Ye,Ze,$e,et,tt,it,ot,st,rt,nt,ct,at,lt,dt,pt,qe,je,He,Mt,Ot,Le,H,ut,Et,kt],encapsulation:2});let n=s;return n})();var Ca=["vform"];function Ia(n,s){if(n&1){let o=M();a(0,"app-cms-enum-record-status-selector",18),x("modelChange",function(i){f(o);let e=u();return A(e.dataModel.recordStatus,i)||(e.dataModel.recordStatus=i),h(i)}),l()}if(n&2){let o=u();y("model",o.dataModel.recordStatus),m("optionDisabled",!1)("optionLabel",o.fieldsInfo.recordStatus==null?null:o.fieldsInfo.recordStatus.fieldTitle)("optionRequired",!0)("optionSelectFirstItem",!0)}}function Ta(n,s){n&1&&T(0,"i",19)}function va(n,s){n&1&&T(0,"i",20)}function ba(n,s){n&1&&(a(0,"mat-error"),d(1," Question is "),a(2,"strong"),d(3),g(4,"translate"),l()()),n&2&&(r(3),w(I(4,1,"MESSAGE.required")))}function wa(n,s){if(n&1){let o=M();a(0,"div",21)(1,"button",22),b("click",function(){f(o);let i=u();return h(i.onFormCancel())}),T(2,"i",23),d(3),g(4,"translate"),l(),a(5,"button",24),T(6,"i",25),d(7),g(8,"translate"),l()()}if(n&2){u();let o=D(9);r(3),S(" ",I(4,3,"ACTION.CANCEL")," "),r(2),m("disabled",!o.form.valid),r(2),S(" ",I(8,5,"ACTION.SAVE")," ")}}var qn=(()=>{let s=class s extends ft{constructor(t,i,e,c,C,p,V,B){super(c,new Ct,p,B),this.data=t,this.dialogRef=i,this.coreEnumService=e,this.ticketingFaqService=c,this.cmsToastrService=C,this.publicHelper=p,this.cdr=V,this.translate=B,this.requestParentId=0,this.constructorInfoAreaId=this.constructor.name,this.fieldsInfo=new Map,this.selectFileTypeMainImage=["jpg","jpeg","png"],this.appLanguage="fa",this.formMatcher=new Ht,this.dataModelResult=new z,this.dataModel=new Ct,this.dataFileModel=new Map,this.formInfo=new ae,this.fileManagerOpenForm=!1,this.publicHelper.processService.cdr=this.cdr,t&&(this.requestParentId=+t.parentId||0),this.requestParentId>0&&(this.dataModel.linkTicketingDepartemenId=this.requestParentId),this.fileManagerTree=this.publicHelper.GetfileManagerTreeConfig()}ngOnInit(){this.formInfo.formTitle=this.translate.instant("TITLE.Submit_New_Content"),this.DataGetAccess()}DataAddContent(){this.translate.get("MESSAGE.sending_information_to_the_server").subscribe(i=>{this.formInfo.formAlert=i}),this.formInfo.formError="";let t=this.constructor.name+"main";if(this.translate.get("MESSAGE.Receiving_information").subscribe(i=>{this.publicHelper.processService.processStart(t,i,this.constructorInfoAreaId)}),this.dataModel.linkFileIds="",this.dataFileModel){let i=Array.from(this.dataFileModel.keys());i&&i.length>0&&(this.dataModel.linkFileIds=i.join(","))}this.ticketingFaqService.ServiceAdd(this.dataModel).subscribe({next:i=>{this.formInfo.formSubmitAllow=!0,this.dataModelResult=i,i.isSuccess?(this.translate.get("MESSAGE.registration_completed_successfully").subscribe(e=>{this.formInfo.formAlert=e}),this.cmsToastrService.typeSuccessAdd(),this.dialogRef.close({dialogChangedDate:!0})):(this.translate.get("ERRORMESSAGE.MESSAGE.typeError").subscribe(e=>{this.formInfo.formAlert=e}),this.formInfo.formError=i.errorMessage,this.cmsToastrService.typeErrorMessage(i.errorMessage)),this.publicHelper.processService.processStop(t)},error:i=>{this.formInfo.formSubmitAllow=!0,this.cmsToastrService.typeError(i),this.publicHelper.processService.processStop(t)}})}onActionSelectorSelect(t){if(!t||t.id<=0){let i=this.translate.instant("MESSAGE.Information_department_is_not_clear");this.cmsToastrService.typeErrorSelected(i);return}this.dataModel.linkTicketingDepartemenId=t.id}onFormSubmit(){this.formGroup.valid&&(this.formInfo.formSubmitAllow=!1,this.DataAddContent())}onFormCancel(){this.dialogRef.close({dialogChangedDate:!1})}};s.\u0275fac=function(i){return new(i||s)(_(he),_(de),_(K),_(xt),_(N),_(L),_(O),_(P))},s.\u0275cmp=F({type:s,selectors:[["app-ticketing-faq-add"]],viewQuery:function(i,e){if(i&1&&te(Ca,5),i&2){let c;ie(c=ne())&&(e.formGroup=c.first)}},features:[U],decls:33,vars:32,consts:[["vform","ngForm"],["Question",""],[1,"card","card-style","loader-container"],[3,"optionsInfoAreaId"],[1,"content","mb-0"],[1,"mb-0","color-highlight","font-600","font-12"],[3,"ngSubmit"],[3,"model","optionDisabled","optionLabel","optionRequired","optionSelectFirstItem","modelChange",4,"ngIf"],[3,"optionChange","optionSelectForce","optionPlaceholder"],[1,"input-style","has-borders","no-icon","input-style-always-active","validate-field","mb-4"],["for","dataModel.question",1,"color-highlight"],["matInput","","type","text","name","dataModel.question","minlength","3","maxlength","1000","required","","id","dataModel.question",1,"form-control","validate-name",3,"ngModelChange","ngModel","placeholder"],["class","fa fa-times  invalid color-red-dark",4,"ngIf"],["class","fa fa-check  valid color-green-dark",4,"ngIf"],[4,"ngIf"],["id","Answer","name","dataModel.answer",3,"ngModelChange","placeholder","config","ngModel"],[3,"dataFileModelChange","dataFileModel","openDirectUploadView"],["class","form-actions",4,"ngIf"],[3,"modelChange","model","optionDisabled","optionLabel","optionRequired","optionSelectFirstItem"],[1,"fa","fa-times","invalid","color-red-dark"],[1,"fa","fa-check","valid","color-green-dark"],[1,"form-actions"],["type","button",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-gray",3,"click"],[1,"ft-x"],["type","submit",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-green",3,"disabled"],[1,"fa","fa-check-square-o"]],template:function(i,e){if(i&1){let c=M();a(0,"div",2),T(1,"app-progress-spinner",3),a(2,"div",4)(3,"p",5),d(4),l(),a(5,"p"),d(6),g(7,"translate"),l(),a(8,"form",6,0),b("ngSubmit",function(){return f(c),h(e.onFormSubmit())}),v(10,Ia,1,5,"app-cms-enum-record-status-selector",7),a(11,"app-ticketing-departemen-selector",8),g(12,"translate"),b("optionChange",function(p){return f(c),h(e.onActionSelectorSelect(p))}),l(),a(13,"div",9)(14,"label",10),d(15),g(16,"translate"),l(),a(17,"input",11,1),g(19,"translate"),x("ngModelChange",function(p){return f(c),A(e.dataModel.question,p)||(e.dataModel.question=p),h(p)}),l(),v(20,Ta,1,0,"i",12)(21,va,1,0,"i",13),a(22,"em"),d(23),l(),v(24,ba,5,3,"mat-error",14),l(),a(25,"p"),d(26),g(27,"translate"),l(),a(28,"angular-editor",15),g(29,"translate"),x("ngModelChange",function(p){return f(c),A(e.dataModel.answer,p)||(e.dataModel.answer=p),h(p)}),l(),T(30,"br"),a(31,"app-cms-files-selector",16),x("dataFileModelChange",function(p){return f(c),A(e.dataFileModel,p)||(e.dataFileModel=p),h(p)}),l(),v(32,wa,9,7,"div",17),l()()()}if(i&2){let c=D(18);r(),m("optionsInfoAreaId",e.constructorInfoAreaId),r(3),S(" ",e.formInfo.formTitle," "),r(2),S(" ",I(7,20,"TITLE.Be_Careful_When_Entering_Information")," "),r(4),m("ngIf",e.fieldsInfo.recordStatus==null?null:e.fieldsInfo.recordStatus.accessWatchField),r(),m("optionSelectForce",e.dataModel.linkTicketingDepartemenId)("optionPlaceholder",I(12,22,"TITLE.Department")),r(4),w(I(16,24,"TITLE.Question")),r(2),R("placeholder",I(19,26,"TITLE.Question")),y("ngModel",e.dataModel.question),r(3),m("ngIf",!c.value),r(),m("ngIf",c.value),r(2),S("",c.value.length," / 100"),r(),m("ngIf",c.errors==null?null:c.errors.required),r(2),S(" ",I(27,28,"TITLE.Answer")," "),r(2),m("placeholder",I(29,30,"TITLE.Enter_Text"))("config",e.publicHelper.editorConfig),y("ngModel",e.dataModel.answer),r(3),y("dataFileModel",e.dataFileModel),m("openDirectUploadView",!0),r(),m("ngIf",e.formInfo.formSubmitAllow)}},dependencies:[G,Ce,oe,re,ge,Me,Ie,Te,fe,Se,ye,Q,_e,j,Hi,Wi,Ge,H]});let n=s;return n})();var Ma=["vform"];function ka(n,s){if(n&1){let o=M();a(0,"app-cms-enum-record-status-selector",18),x("modelChange",function(i){f(o);let e=u();return A(e.dataModel.recordStatus,i)||(e.dataModel.recordStatus=i),h(i)}),l()}if(n&2){let o=u();y("model",o.dataModel.recordStatus),m("optionDisabled",!1)("optionLabel",o.fieldsInfo.recordStatus==null?null:o.fieldsInfo.recordStatus.fieldTitle)("optionRequired",!0)("optionSelectFirstItem",!0)}}function Ea(n,s){n&1&&T(0,"i",19)}function ya(n,s){n&1&&T(0,"i",20)}function Aa(n,s){n&1&&(a(0,"mat-error"),d(1," Question is "),a(2,"strong"),d(3),g(4,"translate"),l()()),n&2&&(r(3),w(I(4,1,"MESSAGE.required")))}function xa(n,s){if(n&1){let o=M();a(0,"div",21)(1,"button",22),b("click",function(){f(o);let i=u();return h(i.onFormCancel())}),T(2,"i",23),d(3),g(4,"translate"),l(),a(5,"button",24),T(6,"i",25),d(7),g(8,"translate"),l()()}if(n&2){u();let o=D(9);r(3),S(" ",I(4,3,"ACTION.CANCEL")," "),r(2),m("disabled",!o.form.valid),r(2),S(" ",I(8,5,"ACTION.SAVE")," ")}}var jn=(()=>{let s=class s extends Tt{constructor(t,i,e,c,C,p,V,B){super(c,new Ct,p,B),this.data=t,this.dialogRef=i,this.coreEnumService=e,this.ticketingFaqService=c,this.cmsToastrService=C,this.publicHelper=p,this.cdr=V,this.translate=B,this.requestId=0,this.constructorInfoAreaId=this.constructor.name,this.selectFileTypeMainImage=["jpg","jpeg","png"],this.appLanguage="fa",this.formMatcher=new Ht,this.dataModelResult=new St,this.dataModel=new Ct,this.dataFileModel=new Map,this.formInfo=new ae,this.fileManagerOpenForm=!1,this.publicHelper.processService.cdr=this.cdr,t&&(this.requestId=+t.id||0),this.fileManagerTree=this.publicHelper.GetfileManagerTreeConfig()}ngOnInit(){if(this.translate.get("TITLE.Edit").subscribe(t=>{this.formInfo.formTitle=t}),this.requestId<=0){this.cmsToastrService.typeErrorComponentAction(),this.dialogRef.close({dialogChangedDate:!1});return}this.DataGetOneContent()}DataGetOneContent(){if(this.requestId<=0){this.cmsToastrService.typeErrorEditRowIsNull();return}this.translate.get("MESSAGE.Receiving_Information_From_The_Server").subscribe(i=>{this.formInfo.formAlert=i}),this.formInfo.formError="";let t=this.constructor.name+"main";this.translate.get("MESSAGE.Receiving_information").subscribe(i=>{this.publicHelper.processService.processStart(t,i,this.constructorInfoAreaId)}),this.ticketingFaqService.setAccessLoad(),this.ticketingFaqService.setAccessDataType(gt.Editor),this.ticketingFaqService.ServiceGetOneById(this.requestId).subscribe({next:i=>{this.fieldsInfo=this.publicHelper.fieldInfoConvertor(i.access),this.dataModel=i.item,i.isSuccess?(this.formInfo.formTitle=this.formInfo.formTitle+" "+i.item.question,this.formInfo.formAlert="",this.dataModel.linkFileIds&&this.dataModel.linkFileIds.length>0&&this.dataModel.linkFileIds.split(",").forEach((e,c)=>{let C="";this.dataModel.linkFileIdsSrc.length>=this.dataModel.linkFileIdsSrc.length&&(C=this.dataModel.linkFileIdsSrc[c]),this.dataFileModel.set(+e,C)})):(this.translate.get("ERRORMESSAGE.MESSAGE.typeError").subscribe(e=>{this.formInfo.formAlert=e}),this.formInfo.formError=i.errorMessage,this.cmsToastrService.typeErrorMessage(i.errorMessage)),this.publicHelper.processService.processStop(t)},error:i=>{this.cmsToastrService.typeError(i),this.publicHelper.processService.processStop(t)}})}DataEditContent(){this.translate.get("MESSAGE.sending_information_to_the_server").subscribe(i=>{this.formInfo.formAlert=i}),this.formInfo.formError="";let t=this.constructor.name+"main";if(this.translate.get("MESSAGE.sending_information_to_the_server").subscribe(i=>{this.publicHelper.processService.processStart(t,i,this.constructorInfoAreaId)}),this.dataModel.linkFileIds="",this.dataFileModel){let i=Array.from(this.dataFileModel.keys());i&&i.length>0&&(this.dataModel.linkFileIds=i.join(","))}this.ticketingFaqService.ServiceEdit(this.dataModel).subscribe({next:i=>{this.formInfo.formSubmitAllow=!0,this.dataModelResult=i,i.isSuccess?(this.translate.get("MESSAGE.registration_completed_successfully").subscribe(e=>{this.formInfo.formAlert=e}),this.cmsToastrService.typeSuccessEdit(),this.dialogRef.close({dialogChangedDate:!0})):(this.translate.get("ERRORMESSAGE.MESSAGE.typeError").subscribe(e=>{this.formInfo.formAlert=e}),this.formInfo.formError=i.errorMessage,this.cmsToastrService.typeErrorMessage(i.errorMessage)),this.publicHelper.processService.processStop(t)},error:i=>{this.formInfo.formSubmitAllow=!0,this.cmsToastrService.typeError(i),this.publicHelper.processService.processStop(t)}})}onActionSelectorSelect(t){if(!t||t.id<=0){let i=this.translate.instant("MESSAGE.Information_department_is_not_clear");this.cmsToastrService.typeErrorSelected(i);return}this.dataModel.linkTicketingDepartemenId=t.id}onFormSubmit(){this.formGroup.valid&&(this.formInfo.formSubmitAllow=!1,this.DataEditContent())}onFormCancel(){this.dialogRef.close({dialogChangedDate:!1})}};s.\u0275fac=function(i){return new(i||s)(_(he),_(de),_(K),_(xt),_(N),_(L),_(O),_(P))},s.\u0275cmp=F({type:s,selectors:[["app-ticketing-faq-add"]],viewQuery:function(i,e){if(i&1&&te(Ma,5),i&2){let c;ie(c=ne())&&(e.formGroup=c.first)}},features:[U],decls:33,vars:32,consts:[["vform","ngForm"],["Question",""],[1,"card","card-style","loader-container"],[3,"optionsInfoAreaId"],[1,"content","mb-0"],[1,"mb-0","color-highlight","font-600","font-12"],[3,"ngSubmit"],[3,"model","optionDisabled","optionLabel","optionRequired","optionSelectFirstItem","modelChange",4,"ngIf"],[3,"optionChange","optionSelectForce","optionPlaceholder"],[1,"input-style","has-borders","no-icon","input-style-always-active","validate-field","mb-4"],["for","dataModel.question",1,"color-highlight"],["matInput","","type","text","name","dataModel.question","minlength","3","maxlength","1000","required","","id","dataModel.question",1,"form-control","validate-name",3,"ngModelChange","ngModel","placeholder"],["class","fa fa-times  invalid color-red-dark",4,"ngIf"],["class","fa fa-check  valid color-green-dark",4,"ngIf"],[4,"ngIf"],["id","Answer","name","dataModel.answer",3,"ngModelChange","placeholder","config","ngModel"],[3,"dataFileModelChange","dataFileModel","openDirectUploadView"],["class","form-actions",4,"ngIf"],[3,"modelChange","model","optionDisabled","optionLabel","optionRequired","optionSelectFirstItem"],[1,"fa","fa-times","invalid","color-red-dark"],[1,"fa","fa-check","valid","color-green-dark"],[1,"form-actions"],["type","button",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-gray",3,"click"],[1,"ft-x"],["type","submit",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-green",3,"disabled"],[1,"fa","fa-check-square-o"]],template:function(i,e){if(i&1){let c=M();a(0,"div",2),T(1,"app-progress-spinner",3),a(2,"div",4)(3,"p",5),d(4),l(),a(5,"p"),d(6),g(7,"translate"),l(),a(8,"form",6,0),b("ngSubmit",function(){return f(c),h(e.onFormSubmit())}),v(10,ka,1,5,"app-cms-enum-record-status-selector",7),a(11,"app-ticketing-departemen-selector",8),g(12,"translate"),b("optionChange",function(p){return f(c),h(e.onActionSelectorSelect(p))}),l(),a(13,"div",9)(14,"label",10),d(15),g(16,"translate"),l(),a(17,"input",11,1),g(19,"translate"),x("ngModelChange",function(p){return f(c),A(e.dataModel.question,p)||(e.dataModel.question=p),h(p)}),l(),v(20,Ea,1,0,"i",12)(21,ya,1,0,"i",13),a(22,"em"),d(23),l(),v(24,Aa,5,3,"mat-error",14),l(),a(25,"p"),d(26),g(27,"translate"),l(),a(28,"angular-editor",15),g(29,"translate"),x("ngModelChange",function(p){return f(c),A(e.dataModel.answer,p)||(e.dataModel.answer=p),h(p)}),l(),T(30,"br"),a(31,"app-cms-files-selector",16),x("dataFileModelChange",function(p){return f(c),A(e.dataFileModel,p)||(e.dataFileModel=p),h(p)}),l(),v(32,xa,9,7,"div",17),l()()()}if(i&2){let c=D(18);r(),m("optionsInfoAreaId",e.constructorInfoAreaId),r(3),S(" ",e.formInfo.formTitle," "),r(2),S(" ",I(7,20,"TITLE.Be_Careful_When_Entering_Information")," "),r(4),m("ngIf",e.fieldsInfo.recordStatus==null?null:e.fieldsInfo.recordStatus.accessWatchField),r(),m("optionSelectForce",e.dataModel.linkTicketingDepartemenId)("optionPlaceholder",I(12,22,"TITLE.Department")),r(4),w(I(16,24,"TITLE.Question")),r(2),R("placeholder",I(19,26,"TITLE.Question")),y("ngModel",e.dataModel.question),r(3),m("ngIf",!c.value),r(),m("ngIf",c.value),r(2),S("",c.value.length," / 100"),r(),m("ngIf",c.errors==null?null:c.errors.required),r(2),S(" ",I(27,28,"TITLE.Answer")," "),r(2),m("placeholder",I(29,30,"TITLE.Enter_Text"))("config",e.publicHelper.editorConfig),y("ngModel",e.dataModel.answer),r(3),y("dataFileModel",e.dataFileModel),m("openDirectUploadView",!0),r(),m("ngIf",e.formInfo.formSubmitAllow)}},dependencies:[G,Ce,oe,re,ge,Me,Ie,Te,fe,Se,ye,Q,_e,j,Hi,Wi,Ge,H]});let n=s;return n})();var Da=()=>[5,10,20,100],Ra=n=>({display:n});function La(n,s){if(n&1){let o=M();a(0,"a",37),b("click",function(){f(o);let i=u();return h(i.onActionBackToParent())}),T(1,"i",38),l()}}function Va(n,s){if(n&1){let o=M();a(0,"div",39)(1,"a",40),b("click",function(){f(o);let i=u();return h(i.onActionButtonNewRow())}),T(2,"i",41)(3,"br"),l(),a(4,"p",42),d(5),g(6,"translate"),l()()}n&2&&(r(5),w(I(6,1,"ACTION.ADD")))}function Ba(n,s){if(n&1){let o=M();a(0,"div",39)(1,"a",43),b("click",function(){f(o);let i=u();return h(i.onActionButtonEditRow(i.tableRowSelected))}),T(2,"i",44)(3,"br"),l(),a(4,"p",42),d(5),g(6,"translate"),l()()}n&2&&(r(5),w(I(6,1,"ACTION.EDIT")))}function Fa(n,s){if(n&1){let o=M();a(0,"div",39)(1,"a",45),b("click",function(){f(o);let i=u();return h(i.onActionButtonDeleteRow(i.tableRowSelected))}),T(2,"i",46)(3,"br"),l(),a(4,"p",42),d(5),g(6,"translate"),l()()}n&2&&(r(5),w(I(6,1,"ACTION.DELETE")))}function Na(n,s){if(n&1&&(a(0,"mat-header-cell",47),d(1),l()),n&2){let o=u();r(),S(" ",o.fieldsInfo.id==null?null:o.fieldsInfo.id.fieldTitle," ")}}function Oa(n,s){if(n&1&&(a(0,"mat-cell"),d(1),l()),n&2){let o=s.$implicit;r(),S(" ",o.id," ")}}function Ga(n,s){if(n&1&&(a(0,"mat-header-cell",47),d(1),l()),n&2){let o=u();r(),S(" ",o.fieldsInfo.linkSiteId==null?null:o.fieldsInfo.linkSiteId.fieldTitle," ")}}function Pa(n,s){if(n&1&&(a(0,"mat-cell"),d(1),g(2,"cmssiteinfo"),g(3,"async"),l()),n&2){let o=s.$implicit;r(),S(" ",I(3,3,I(2,1,o.linkSiteId))," ")}}function Ha(n,s){if(n&1&&(a(0,"mat-header-cell",47),d(1),l()),n&2){let o=u();r(),S(" ",o.fieldsInfo.recordStatus==null?null:o.fieldsInfo.recordStatus.fieldTitle," ")}}function qa(n,s){if(n&1&&T(0,"select",50),n&2){let o=u().$implicit,t=u();m("contentService",t.contentService)("row",o)("ngStyle",ze(3,Ra,o.id===(t.tableRowSelected==null?null:t.tableRowSelected.id)?"":"none"))}}function ja(n,s){if(n&1&&(a(0,"mat-cell",48),g(1,"statusCellClass"),T(2,"i",48),g(3,"statusIconClass"),v(4,qa,1,5,"select",49),l()),n&2){let o=s.$implicit,t=u();m("ngClass",I(1,3,o.recordStatus)),r(2),m("ngClass",I(3,5,o.recordStatus)),r(2),m("ngIf",t.dataModelResult==null||t.dataModelResult.access==null?null:t.dataModelResult.access.accessEditRow)}}function Wa(n,s){if(n&1&&(a(0,"mat-header-cell",47),d(1),l()),n&2){let o=u();r(),S(" ",o.fieldsInfo.question==null?null:o.fieldsInfo.question.fieldTitle," ")}}function Ua(n,s){if(n&1&&(a(0,"mat-cell"),d(1),l()),n&2){let o=s.$implicit;r(),S(" ",o.question," ")}}function Qa(n,s){n&1&&(a(0,"mat-header-cell"),d(1),g(2,"translate"),l()),n&2&&(r(),S(" ",I(2,1,"TITLE.OPTION")," "))}function za(n,s){if(n&1&&(a(0,"mat-cell",51)(1,"button",52)(2,"mat-icon"),d(3,"more_vert"),l()(),T(4,"mat-menu",null,2),l()),n&2){let o=D(5);r(),m("matMenuTriggerFor",o)}}function Ka(n,s){n&1&&T(0,"mat-header-row")}function Ja(n,s){if(n&1){let o=M();a(0,"mat-row",53),b("click",function(){let i=f(o).$implicit,e=u();return h(e.onActionTableRowSelect(i))}),l()}if(n&2){let o=s.$implicit,t=s.dataIndex,i=u();ke("ntk-row-odd",t%2)("ntk-row-even",!(t%2))("ntk-row-selected",o.id===(i.tableRowSelected==null?null:i.tableRowSelected.id))}}var nn=(()=>{let s=class s extends We{constructor(t,i,e,c,C,p,V,B,J,$,De){super(t,new Ct,$,p,B),this.contentService=t,this.activatedRoute=i,this.cmsToastrService=e,this.cmsConfirmationDialogService=c,this.router=C,this.tokenHelper=p,this.cdr=V,this.translate=B,this.pageInfo=J,this.publicHelper=$,this.dialog=De,this.requestDepartemenId=0,this.constructorInfoAreaId=this.constructor.name,this.flag=!1,this.tableContentSelected=[],this.filteModelContent=new Y,this.tabledisplayedColumns=[],this.tabledisplayedColumnsSource=["Id","RecordStatus","Question"],this.tabledisplayedColumnsMobileSource=["Id","RecordStatus","Question"],this.publicHelper.processService.cdr=this.cdr,this.optionsSearch.parentMethods={onSubmit:Wt=>this.onSubmitOptionsSearch(Wt)},this.filteModelContent.sortColumn="Id",this.filteModelContent.sortType=W.Ascending}ngOnInit(){if(this.requestDepartemenId=+Number(this.activatedRoute.snapshot.paramMap.get("DepartemenId")),this.requestDepartemenId>0){let t=new X;t.propertyName="LinkTicketingDepartemenId",t.value=this.requestDepartemenId,this.filteModelContent.filters.push(t)}this.tokenHelper.getTokenInfoState().then(t=>{this.tokenInfo=t,setTimeout(()=>{this.firstLoadDataRunned||this.DataGetAll()},500)}),this.cmsApiStoreSubscribe=this.tokenHelper.getTokenInfoStateOnChange().subscribe({next:t=>{this.tokenInfo=t,this.firstLoadDataRunned=!0,this.DataGetAll()}})}ngOnDestroy(){this.cmsApiStoreSubscribe.unsubscribe()}DataGetAll(){this.tabledisplayedColumns=this.publicHelper.TableDisplayedColumns(this.tabledisplayedColumnsSource,this.tabledisplayedColumnsMobileSource,[],this.tokenInfo),this.tableRowsSelected=[],this.onActionTableRowSelect(new Ct);let t=this.constructor.name+"main";this.translate.get("MESSAGE.get_information_list").subscribe(e=>{this.publicHelper.processService.processStart(t,e,this.constructorInfoAreaId)}),this.filteModelContent.accessLoad=!0;let i=JSON.parse(JSON.stringify(this.filteModelContent));if(this.categoryModelSelected&&this.categoryModelSelected.id>0){let e=new X;e.propertyName="LinkTicketingDepartemenId",e.value=this.categoryModelSelected.id,i.filters.push(e)}this.contentService.ServiceGetAllEditor(i).subscribe({next:e=>{this.fieldsInfo=this.publicHelper.fieldInfoConvertor(e.access),e.isSuccess?(this.dataModelResult=e,this.tableSource.data=e.listItems,this.optionsStatist?.data?.show&&this.onActionButtonStatist(!0),setTimeout(()=>{this.optionsSearch.childMethods&&this.optionsSearch.childMethods.setAccess(e.access)},1e3)):this.cmsToastrService.typeErrorGetAll(e.errorMessage),this.publicHelper.processService.processStop(t)},error:e=>{this.cmsToastrService.typeError(e),this.publicHelper.processService.processStop(t)}})}onTableSortData(t){this.tableSource&&this.tableSource.sort&&this.tableSource.sort.active===t.active?this.tableSource.sort.start==="asc"?(t.start="desc",this.filteModelContent.sortColumn=t.active,this.filteModelContent.sortType=W.Descending):this.tableSource.sort.start==="desc"?(t.start="asc",this.filteModelContent.sortColumn="",this.filteModelContent.sortType=W.Ascending):t.start="desc":(this.filteModelContent.sortColumn=t.active,this.filteModelContent.sortType=W.Descending),this.tableSource.sort=t,this.filteModelContent.currentPageNumber=0,this.DataGetAll()}onTablePageingData(t){this.filteModelContent.currentPageNumber=t.pageIndex+1,this.filteModelContent.rowPerPage=t.pageSize,this.DataGetAll()}onActionButtonNewRow(){if(this.categoryModelSelected==null&&this.categoryModelSelected&&this.categoryModelSelected.id===0&&(this.requestDepartemenId==null||this.requestDepartemenId===0)){this.translate.get("MESSAGE.Content_not_selected").subscribe(c=>{this.cmsToastrService.typeErrorSelected(c)});return}if(this.dataModelResult==null||this.dataModelResult.access==null||!this.dataModelResult.access.accessAddRow){this.cmsToastrService.typeErrorAccessAdd();return}let t=this.requestDepartemenId;this.categoryModelSelected&&this.categoryModelSelected.id>0&&(t=this.categoryModelSelected.id);var i="";this.tokenHelper.isMobile?i="dialog-fullscreen":i="dialog-min",this.dialog.open(qn,{height:"90%",panelClass:i,enterAnimationDuration:q.cmsViewConfig.enterAnimationDuration,exitAnimationDuration:q.cmsViewConfig.exitAnimationDuration,data:{parentId:t}}).afterClosed().subscribe(c=>{c&&c.dialogChangedDate&&this.DataGetAll()})}onActionSelectorSelect(t){var i=this.filteModelContent.sortColumn,e=this.filteModelContent.sortType;this.filteModelContent=new Y,this.filteModelContent.sortColumn=i,this.filteModelContent.sortType=e,this.categoryModelSelected=t,this.DataGetAll()}onActionButtonEditRow(t=this.tableRowSelected){if(!t||!t.id||t.id===0){this.cmsToastrService.typeErrorSelectedRow();return}if(this.tableRowSelected=t,this.dataModelResult==null||this.dataModelResult.access==null||!this.dataModelResult.access.accessEditRow){this.cmsToastrService.typeErrorAccessEdit();return}var i="";this.tokenHelper.isMobile?i="dialog-fullscreen":i="dialog-min",this.dialog.open(jn,{height:"90%",panelClass:i,enterAnimationDuration:q.cmsViewConfig.enterAnimationDuration,exitAnimationDuration:q.cmsViewConfig.exitAnimationDuration,data:{id:this.tableRowSelected.id}}).afterClosed().subscribe(c=>{c&&c.dialogChangedDate&&this.DataGetAll()})}onActionButtonDeleteRow(t=this.tableRowSelected){if(t==null||!t.id||t.id===0){this.cmsToastrService.typeErrorDeleteRowIsNull();return}if(this.tableRowSelected=t,this.dataModelResult==null||this.dataModelResult.access==null||!this.dataModelResult.access.accessDeleteRow){this.cmsToastrService.typeErrorAccessDelete();return}var i="",e="";this.translate.get(["MESSAGE.Please_Confirm","MESSAGE.Do_you_want_to_delete_this_content"]).subscribe(c=>{i=c["MESSAGE.Please_Confirm"],e=c["MESSAGE.Do_you_want_to_delete_this_content"]+"?<br> ( "+this.tableRowSelected.question+" ) "}),this.cmsConfirmationDialogService.confirm(i,e).then(c=>{if(c){let C=this.constructor.name+"main";this.translate.get("MESSAGE.Receiving_information").subscribe(p=>{this.publicHelper.processService.processStart(C,p,this.constructorInfoAreaId)}),this.contentService.ServiceDelete(this.tableRowSelected.id).subscribe({next:p=>{p.isSuccess?(this.cmsToastrService.typeSuccessRemove(),this.DataGetAll()):this.cmsToastrService.typeErrorRemove(),this.publicHelper.processService.processStop(C)},error:p=>{this.cmsToastrService.typeError(p),this.publicHelper.processService.processStop(C)}})}}).catch(()=>{})}onActionButtonStatist(t=!this.optionsStatist.data.show){if(this.optionsStatist.data.show=t,!this.optionsStatist.data.show)return;let i=new Map;this.translate.get("MESSAGE.Active").subscribe(p=>{i.set(p,0)}),this.translate.get("MESSAGE.All").subscribe(p=>{i.set(p,0)});let e=this.constructor.name+".ServiceStatist";this.translate.get("MESSAGE.Get_the_statist").subscribe(p=>{this.publicHelper.processService.processStart(e,p,this.constructorInfoAreaId)}),this.contentService.ServiceGetCount(this.filteModelContent).subscribe({next:p=>{p.isSuccess&&(i.set("All",p.totalRowCount),this.optionsStatist.childMethods.setStatistValue(i)),this.publicHelper.processService.processStop(e)},error:p=>{this.cmsToastrService.typeError(p),this.publicHelper.processService.processStop(e)}});let c=JSON.parse(JSON.stringify(this.filteModelContent)),C=new X;C.propertyName="RecordStatus",C.value=Je.Available,c.filters.push(C),this.contentService.ServiceGetCount(c).subscribe({next:p=>{p.isSuccess&&(i.set("Active",p.totalRowCount),this.optionsStatist.childMethods.setStatistValue(i)),this.publicHelper.processService.processStop(e)},error:p=>{this.cmsToastrService.typeError(p),this.publicHelper.processService.processStop(e)}})}onActionButtonReload(){this.DataGetAll()}onSubmitOptionsSearch(t){this.filteModelContent.filters=t,this.DataGetAll()}onActionBackToParent(){this.router.navigate(["/ticketing/departemen/"])}};s.\u0275fac=function(i){return new(i||s)(_(xt),_(ve),_(N),_(Rt),_(ce),_(ee),_(O),_(P),_(Pe),_(L),_(Ae))},s.\u0275cmp=F({type:s,selectors:[["app-application-app-list"]],features:[U],decls:51,vars:29,consts:[["tableSort","matSort"],["paginator",""],["actionMenu","matMenu"],[3,"optionActionGuideNoticeDisplayChange","optionOnActionButtonMemoRow","optionOnActionButtonMemo","optionOnActionButtonExport","optionOnActionButtonPrintRow","optionsListInfoAreaId","optionGuideNoticeKey","optionActionGuideNoticeDisplay","optionTreeDisplay","optionActionRowId","optionActionRowDisplayMenu","optionSelectRowItemTitle"],["cms-tree",""],[3,"optionChange"],["cms-header",""],["cms-action-header",""],["cms-action-header-start",""],["type","button","class","btn font-13 font-600 btn-s m-1 rounded-s shadow-xl border-0 gradient-gray","target","_blank",3,"click",4,"ngIf"],["type","button","target","_blank",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-highlight",3,"click"],[1,"fa-solid","fa-info","font-18",2,"color","#ffffff"],[1,"fa-solid","fa-rotate-right","font-18",2,"color","#ffffff"],["cms-action-header-end",""],[1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-highlight",3,"click"],[3,"checked"],["cms-action-main",""],["class","col-4",4,"ngIf"],["cms-action-row",""],["cms-action-area",""],[3,"optionsChange","options"],["cms-body",""],["matSort","",3,"matSortChange","dataSource"],["matColumnDef","Id"],["mat-sort-header","",4,"matHeaderCellDef"],[4,"matCellDef"],["matColumnDef","LinkSiteId"],["matColumnDef","RecordStatus"],[3,"ngClass",4,"matCellDef"],["matColumnDef","Question"],["matColumnDef","Action"],[4,"matHeaderCellDef"],["class"," Action",4,"matCellDef"],[4,"matHeaderRowDef"],[3,"ntk-row-odd","ntk-row-even","ntk-row-selected","click",4,"matRowDef","matRowDefColumns"],["cms-footer",""],[3,"page","length","pageIndex","pageSize","pageSizeOptions"],["type","button","target","_blank",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-gray",3,"click"],[1,"fa-solid","fa-arrow-left","font-18",2,"color","#ffffff"],[1,"col-4"],["type","button","target","_blank",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-teal",3,"click"],[1,"fa-solid","fa-plus","font-18",2,"color","#FFFFFF"],[1,"font-11","text-center","opacity-70"],["target","_blank",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-magenta",3,"click"],[1,"fa-solid","fa-pen","font-18",2,"color","#FFFFFF"],["target","_blank",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-red",3,"click"],[1,"fa-solid","fa-trash","font-18",2,"color","#FFFFFF"],["mat-sort-header",""],[3,"ngClass"],["matNativeControl","","cmsRecordStatusSelfSave","","style","background: none; border: none;",3,"contentService","row","ngStyle",4,"ngIf"],["matNativeControl","","cmsRecordStatusSelfSave","",2,"background","none","border","none",3,"contentService","row","ngStyle"],[1,"Action"],["type","button","mat-icon-button","","aria-label","Action Menu",3,"matMenuTriggerFor"],[3,"click"]],template:function(i,e){if(i&1){let c=M();a(0,"app-cms-html-list",3),x("optionActionGuideNoticeDisplayChange",function(p){return f(c),A(e.viewGuideNotice,p)||(e.viewGuideNotice=p),h(p)}),b("optionOnActionButtonMemoRow",function(){return f(c),h(e.onActionButtonMemoRow())})("optionOnActionButtonMemo",function(){return f(c),h(e.onActionButtonMemo())})("optionOnActionButtonExport",function(){return f(c),h(e.onActionButtonExport())})("optionOnActionButtonPrintRow",function(){return f(c),h(e.onActionButtonPrintRow())}),k(1,4),a(2,"app-ticketing-departemen-tree",5),b("optionChange",function(p){return f(c),h(e.onActionSelectorSelect(p))}),l(),E(),Ee(3,6)(4,7),k(5,8),v(6,La,2,0,"a",9),a(7,"a",10),b("click",function(){return f(c),h(e.viewGuideNotice=!e.viewGuideNotice)}),T(8,"i",11),l(),a(9,"a",10),b("click",function(){return f(c),h(e.onActionButtonReload())}),T(10,"i",12),l(),E(),k(11,13),a(12,"a",14),b("click",function(){return f(c),h(e.optionsSearch.data.show=!e.optionsSearch.data.show)}),T(13,"mat-slide-toggle",15),d(14),g(15,"translate"),l(),a(16,"a",14),b("click",function(){return f(c),h(e.onActionButtonStatist())}),T(17,"mat-slide-toggle",15),d(18),g(19,"translate"),l(),E(),k(20,16),v(21,Va,7,3,"div",17),E(),k(22,18),v(23,Ba,7,3,"div",17)(24,Fa,7,3,"div",17),E(),k(25,19),a(26,"app-cms-search-list",20),x("optionsChange",function(p){return f(c),A(e.optionsSearch,p)||(e.optionsSearch=p),h(p)}),l(),a(27,"app-cms-statist-list",20),x("optionsChange",function(p){return f(c),A(e.optionsStatist,p)||(e.optionsStatist=p),h(p)}),l(),E(),k(28,21),a(29,"mat-table",22,0),b("matSortChange",function(){f(c);let p=D(30);return h(e.onTableSortData(p))}),k(31,23),v(32,Na,2,1,"mat-header-cell",24)(33,Oa,2,1,"mat-cell",25),E(),k(34,26),v(35,Ga,2,1,"mat-header-cell",24)(36,Pa,4,5,"mat-cell",25),E(),k(37,27),v(38,Ha,2,1,"mat-header-cell",24)(39,ja,5,7,"mat-cell",28),E(),k(40,29),v(41,Wa,2,1,"mat-header-cell",24)(42,Ua,2,1,"mat-cell",25),E(),k(43,30),v(44,Qa,3,3,"mat-header-cell",31)(45,za,6,1,"mat-cell",32),E(),v(46,Ka,1,0,"mat-header-row",33)(47,Ja,1,6,"mat-row",34),l(),E(),k(48,35),a(49,"mat-paginator",36,1),b("page",function(p){return f(c),h(e.onTablePageingData(p))}),l(),E(),l()}i&2&&(m("optionsListInfoAreaId",e.constructorInfoAreaId)("optionGuideNoticeKey","ticketing.faq.list"),y("optionActionGuideNoticeDisplay",e.viewGuideNotice),m("optionTreeDisplay",e.requestDepartemenId===0)("optionActionRowId",e.tableRowSelected==null?null:e.tableRowSelected.id)("optionActionRowDisplayMenu",e.tableRowSelectDoubleClick)("optionSelectRowItemTitle",e.tableRowSelected==null?null:e.tableRowSelected.id),r(6),m("ngIf",e.requestDepartemenId>0),r(7),m("checked",e.optionsSearch.data.show),r(),S("",I(15,24,"ACTION.SEARCH")," "),r(3),m("checked",e.optionsStatist.data.show),r(),S("",I(19,26,"ACTION.STATIST")," "),r(3),m("ngIf",e.dataModelResult==null||e.dataModelResult.access==null?null:e.dataModelResult.access.accessAddRow),r(2),m("ngIf",e.dataModelResult==null||e.dataModelResult.access==null?null:e.dataModelResult.access.accessEditRow),r(),m("ngIf",e.dataModelResult==null||e.dataModelResult.access==null?null:e.dataModelResult.access.accessDeleteRow),r(2),y("options",e.optionsSearch),r(),y("options",e.optionsStatist),r(2),m("dataSource",e.tableSource),r(17),m("matHeaderRowDef",e.tabledisplayedColumns),r(),m("matRowDefColumns",e.tabledisplayedColumns),r(2),m("length",e.dataModelResult.totalRowCount)("pageIndex",e.dataModelResult.currentPageNumber-1)("pageSize",e.dataModelResult.rowPerPage)("pageSizeOptions",Qe(28,Da)))},dependencies:[yt,G,Ke,Ve,xe,Q,Xe,Ye,Ze,$e,et,tt,it,ot,st,rt,nt,ct,at,lt,dt,pt,qe,je,He,Mt,Ot,Le,H,ut,Et,kt],encapsulation:2});let n=s;return n})();function Xa(n,s){if(n&1&&(a(0,"div",6)(1,"button",7),T(2,"i",8),d(3),T(4,"i",9),l(),a(5,"div",10)(6,"div",11),T(7,"p",12),l()()()),n&2){let o=u().$implicit,t=u().$implicit;r(),Vt("data-bs-target","#collapse"+o.id),r(2),S(" ",o.question," "),r(2),Bt("id","collapse",o.id,""),Vt("data-bs-parent","#accordion-"+t.id),r(2),m("innerHTML",o.answer,bi)}}function Ya(n,s){if(n&1&&(k(0),v(1,Xa,8,6,"div",5),E()),n&2){let o=s.$implicit,t=u().$implicit;r(),m("ngIf",o.linkTicketingDepartemenId===t.id)}}function Za(n,s){if(n&1&&(k(0),a(1,"div",2)(2,"div",3)(3,"h4"),d(4),l()(),a(5,"div",4),v(6,Ya,2,1,"ng-container",1),l()(),E()),n&2){let o=s.$implicit,t=u();r(4),w(o.title),r(),Bt("id","accordion-",o.id,""),r(),m("ngForOf",t.dataModelResult.listItems)}}var Wn=(()=>{let s=class s{constructor(t,i,e,c,C,p,V,B){this.ticketingFaqService=t,this.ticketingDepartemenService=i,this.publicHelper=e,this.cmsToastrService=c,this.router=C,this.cdr=p,this.translate=V,this.tokenHelper=B,this.constructorInfoAreaId=this.constructor.name,this.fieldsInfo=new Map,this.flag=!1,this.tableContentSelected=[],this.filteModelContent=new Y,this.dataModelResult=new z,this.dataDepartemenModelResult=new z,this.optionsSearch=new qi,this.optionsStatist=new ji,this.tokenInfo=new Gt,this.tableRowsSelected=[],this.tableRowSelected=new Ct,this.tableSource=new vn,this.DataDepartemanLinkSelect=0,this.DataFaqLinkSelect=0,this.firstLoadDataRunned=!1,this.publicHelper.processService.cdr=this.cdr,this.filteModelContent.sortColumn="Id",this.filteModelContent.sortType=W.Ascending}ngOnInit(){this.DataDepartemenGetAll(),this.tokenHelper.getTokenInfoState().then(t=>{this.tokenInfo=t,setTimeout(()=>{this.firstLoadDataRunned||this.DataGetAll()},500)}),this.cmsApiStoreSubscribe=this.tokenHelper.getTokenInfoStateOnChange().subscribe({next:t=>{this.firstLoadDataRunned=!0,this.DataDepartemenGetAll(),this.tokenInfo=t,this.DataGetAll()}})}ngOnDestroy(){this.cmsApiStoreSubscribe.unsubscribe()}DataGetAll(){this.tableRowsSelected=[],this.onActionTableRowSelect(new Ct);let t=this.constructor.name+"main";this.translate.get("MESSAGE.Receiving_information").subscribe(e=>{this.publicHelper.processService.processStart(t,e,this.constructorInfoAreaId)}),this.filteModelContent.accessLoad=!0;let i=JSON.parse(JSON.stringify(this.filteModelContent));if(this.categoryModelSelected&&this.categoryModelSelected.id>0){let e=new X;e.propertyName="LinkTicketingDepartemenId",e.value=this.categoryModelSelected.id,i.filters.push(e)}this.ticketingFaqService.ServiceGetAllOrigin(i).subscribe({next:e=>{this.fieldsInfo=this.publicHelper.fieldInfoConvertor(e.access),e.isSuccess?(this.dataModelResult=e,this.tableSource.data=e.listItems):this.cmsToastrService.typeErrorGetAll(e.errorMessage),this.publicHelper.processService.processStop(t)},error:e=>{this.cmsToastrService.typeError(e),this.publicHelper.processService.processStop(t)}})}DataDepartemenGetAll(){this.ticketingDepartemenService.ServiceGetAllOrigin(null).subscribe({next:t=>{this.fieldsInfo=this.publicHelper.fieldInfoConvertor(t.access),t.isSuccess?this.dataDepartemenModelResult=t:this.cmsToastrService.typeErrorGetAll(t.errorMessage),this.cdr.detectChanges()},error:t=>{this.cmsToastrService.typeError(t)}})}onTableSortData(t){this.tableSource&&this.tableSource.sort&&this.tableSource.sort.active===t.active?this.tableSource.sort.start==="asc"?(t.start="desc",this.filteModelContent.sortColumn=t.active,this.filteModelContent.sortType=W.Descending):this.tableSource.sort.start==="desc"?(t.start="asc",this.filteModelContent.sortColumn="",this.filteModelContent.sortType=W.Ascending):t.start="desc":(this.filteModelContent.sortColumn=t.active,this.filteModelContent.sortType=W.Descending),this.tableSource.sort=t,this.filteModelContent.currentPageNumber=0,this.DataGetAll()}onTablePageingData(t){this.filteModelContent.currentPageNumber=t.pageIndex+1,this.filteModelContent.rowPerPage=t.pageSize,this.DataGetAll()}onActionSelectorSelect(t){var i=this.filteModelContent.sortColumn,e=this.filteModelContent.sortType;this.filteModelContent=new Y,this.filteModelContent.sortColumn=i,this.filteModelContent.sortType=e,this.categoryModelSelected=t,this.DataGetAll()}onActionButtonReload(){this.DataGetAll()}onSubmitOptionsSearch(t){this.filteModelContent.filters=t,this.DataGetAll()}onActionTableRowSelect(t){this.tableRowSelected=t,t.expanded||(t.expanded=!1),t.expanded=!t.expanded}onActionBackToParent(){this.router.navigate(["/ticketing/departemen/"])}onActionButtonDeparteman(t){this.DataDepartemanLinkSelect=t,this.DataFaqLinkSelect=0}onActionButtonFaqTitle(t){this.DataFaqLinkSelect=t}};s.\u0275fac=function(i){return new(i||s)(_(xt),_(Be),_(L),_(N),_(ce),_(O),_(P),_(ee))},s.\u0275cmp=F({type:s,selectors:[["app-ticketing-faq-originlist"]],decls:2,vars:2,consts:[[3,"optionsInfoAreaId"],[4,"ngFor","ngForOf"],[1,"card","card-style"],[1,"content"],[1,"accordion",3,"id"],["class","mb-0",4,"ngIf"],[1,"mb-0"],["type","button","data-bs-toggle","collapse",1,"btn","accordion-btn","no-effect","color-theme"],[1,"fa","fa-cloud","color-yellow-dark","me-2"],[1,"fa","fa-chevron-down","font-10","accordion-icon"],[1,"collapse",3,"id"],[1,"pt-1","pb-2","ps-3","pe-3"],[3,"innerHTML"]],template:function(i,e){i&1&&(T(0,"app-progress-spinner",0),v(1,Za,7,4,"ng-container",1)),i&2&&(m("optionsInfoAreaId",e.constructorInfoAreaId),r(),m("ngForOf",e.dataDepartemenModelResult.listItems))},dependencies:[$t,G,j],encapsulation:2});let n=s;return n})();var $a=["*"];function el(n,s){if(n&1&&(a(0,"label",8),d(1),l()),n&2){let o=u();Bt("for","app-cms-site-selector-",o.id,""),r(),w(o.optionLabel)}}function tl(n,s){if(n&1&&(a(0,"mat-option",9)(1,"span"),d(2),l()()),n&2){let o=s.$implicit,t=u();m("value",o)("disabled",t.optionDisabled),r(2),w(t.displayOption(o))}}function il(n,s){if(n&1){let o=M();a(0,"mat-icon",10),b("click",function(){f(o);let i=u();return h(i.onActionSelectClear())}),d(1,"close"),l()}}var Un=(()=>{let s=class s{constructor(t,i,e,c,C){this.coreEnumService=t,this.cdr=i,this.publicHelper=e,this.translate=c,this.categoryService=C,this.id=++s.nextId,this.constructorInfoAreaId=this.constructor.name,this.dataModelResult=new z,this.dataModelSelect=new mt,this.formControl=new Ei,this.optionDisabled=!1,this.optionSelectFirstItem=!1,this.optionPlaceholder="",this.optionLabel="",this.optionChange=new Ut,this.optionReload=()=>this.onActionButtonReload(),this.optionItemCount=new Ut,this.publicHelper.processService.cdr=this.cdr}set optionSelectForce(t){this.onActionSelectForce(t)}ngOnInit(){this.loadOptions(),(!this.optionLabel||this.optionLabel.length==0&&this.optionPlaceholder?.length>0)&&(this.optionLabel=this.optionPlaceholder)}loadOptions(){this.filteredOptions=this.formControl.valueChanges.pipe(Ci(""),gi(1500),Si(),Ii(t=>typeof t=="string"||typeof t=="number"?this.DataGetAll(t||""):[]))}displayFn(t){return t?t.title:void 0}displayOption(t){return t?t.title:void 0}DataGetAll(t){return ci(this,null,function*(){let i=new Y;i.rowPerPage=20,i.accessLoad=!0;let e=new X;e.propertyName="Title",e.value=t,e.searchType=ti.Contains,e.clauseType=Ft.Or,i.filters.push(e),t&&typeof+t=="number"&&+t>0&&(e=new X,e.propertyName="Id",e.value=t,e.searchType=ti.Equal,e.clauseType=Ft.Or,i.filters.push(e));let c=this.constructor.name+"main";return this.translate.get("MESSAGE.Receiving_information").subscribe(C=>{this.publicHelper.processService.processStart(c,C,this.constructorInfoAreaId)}),yield hi(this.categoryService.ServiceGetAll(i)).then(C=>(this.dataModelResult=C,this.optionSelectFirstItem&&(!this.dataModelSelect||!this.dataModelSelect.id||this.dataModelSelect.id<=0)&&this.dataModelResult.listItems.length>0&&(this.optionSelectFirstItem=!1,setTimeout(()=>{this.formControl.setValue(this.dataModelResult.listItems[0])},1e3),this.onActionSelect(this.dataModelResult.listItems[0])),this.publicHelper.processService.processStop(c),C.listItems?.length>0?this.optionItemCount.emit(C.listItems?.length):this.optionItemCount.emit(0),C.listItems))})}onActionSelect(t){this.dataModelSelect=t,this.optionChange.emit(this.dataModelSelect)}onActionSelectClear(){this.dataModelSelect=null,this.formControl.setValue(null),this.optionChange.emit(null)}push(t){return this.filteredOptions.pipe(_i(i=>(i.find(e=>e.id===t.id)||i.push(t),i)))}onActionSelectForce(t){if(typeof t=="number"&&t>0){if(this.dataModelSelect&&this.dataModelSelect.id===t)return;if(this.dataModelResult&&this.dataModelResult.listItems&&this.dataModelResult.listItems.find(i=>i.id===t)){let i=this.dataModelResult.listItems.find(e=>e.id===t);this.dataModelSelect=i,this.formControl.setValue(i);return}this.categoryService.ServiceGetOneById(t).subscribe({next:i=>{i.isSuccess&&(this.filteredOptions=this.push(i.item),this.dataModelSelect=i.item,this.formControl.setValue(i.item),this.optionChange.emit(i.item))}});return}if(typeof t==typeof mt){this.filteredOptions=this.push(t),this.dataModelSelect=t,this.formControl.setValue(t);return}this.formControl.setValue(null)}onActionButtonReload(){this.dataModelSelect=new mt,this.loadOptions()}};s.nextId=0,s.\u0275fac=function(i){return new(i||s)(_(K),_(O),_(L),_(P),_(Dt))},s.\u0275cmp=F({type:s,selectors:[["app-ticketing-template-selector"]],inputs:{optionDisabled:"optionDisabled",optionSelectFirstItem:"optionSelectFirstItem",optionPlaceholder:"optionPlaceholder",optionLabel:"optionLabel",optionReload:"optionReload",optionSelectForce:"optionSelectForce"},outputs:{optionChange:"optionChange",optionItemCount:"optionItemCount"},ngContentSelectors:$a,decls:10,vars:13,consts:[["matauto","matAutocomplete"],[1,"input-style","has-borders","no-icon","input-style-always-active","validate-field","mb-4","loader-container"],[3,"optionsInfoAreaId"],["class","color-highlight",3,"for",4,"ngIf"],["type","text","matInput","",1,"form-control","validate-name",3,"placeholder","formControl","matAutocomplete","id"],[3,"optionSelected","displayWith"],[3,"value","disabled",4,"ngFor","ngForOf"],["matSuffix","","matSuffix","","mat-icon-button","","aria-label","Clear",3,"click",4,"ngIf"],[1,"color-highlight",3,"for"],[3,"value","disabled"],["matSuffix","","matSuffix","","mat-icon-button","","aria-label","Clear",3,"click"]],template:function(i,e){if(i&1){let c=M();wi(),a(0,"div",1),T(1,"app-progress-spinner",2),v(2,el,2,3,"label",3),T(3,"input",4),a(4,"mat-autocomplete",5,0),b("optionSelected",function(p){return f(c),h(e.onActionSelect(p.option.value))}),v(6,tl,3,3,"mat-option",6),g(7,"async"),l(),v(8,il,2,0,"mat-icon",7),Mi(9),l()}if(i&2){let c=D(5);r(),m("optionsInfoAreaId",e.constructorInfoAreaId),r(),m("ngIf",(e.optionLabel==null?null:e.optionLabel.length)>0),r(),R("placeholder",e.optionPlaceholder),Bt("id","app-cms-site-selector-",e.id,""),m("formControl",e.formControl)("matAutocomplete",c),Vt("disabled",e.optionDisabled?!0:null),r(),m("displayWith",e.displayFn),r(2),m("ngForOf",I(7,11,e.filteredOptions)),r(2),m("ngIf",e.dataModelSelect==null?null:e.dataModelSelect.id)}},dependencies:[$t,G,oe,re,yi,Bi,ki,Fi,ei,xe,Q,j,Le],encapsulation:2});let n=s;return n})();var ol=["vform"];function rl(n,s){n&1&&(a(0,"mat-error"),d(1),g(2,"translate"),a(3,"strong"),d(4),g(5,"translate"),l()()),n&2&&(r(),S(" ",I(2,2,"AUTH.INPUT.FULLNAME")," "),r(3),w(I(5,4,"MESSAGE.required")))}function al(n,s){n&1&&(a(0,"mat-error"),d(1),g(2,"translate"),a(3,"strong"),d(4),g(5,"translate"),l()()),n&2&&(r(),S(" ",I(2,2,"AUTH.INPUT.MOBILE")," "),r(3),w(I(5,4,"MESSAGE.required")))}function ll(n,s){n&1&&(a(0,"mat-error"),d(1),g(2,"translate"),a(3,"strong"),d(4),g(5,"translate"),l()()),n&2&&(r(),S(" ",I(2,2,"AUTH.INPUT.EMAIL")," "),r(3),w(I(5,4,"MESSAGE.required")))}function sl(n,s){if(n&1){let o=M();a(0,"div",36)(1,"label"),d(2),g(3,"translate"),l(),a(4,"app-ticketing-template-selector",45),b("optionItemCount",function(){f(o);let i=u(2);return h(i.templateItemCount)})("optionChange",function(i){f(o);let e=u(2);return h(e.onActionSelectorSelect(i))}),l()()}n&2&&(r(2),w(I(3,1,"TITLE.Categories")))}function cl(n,s){n&1&&(a(0,"mat-error"),d(1),g(2,"translate"),a(3,"strong"),d(4),g(5,"translate"),l()()),n&2&&(r(),S(" ",I(2,2,"AUTH.INPUT.YOURMEESAGE")," "),r(3),w(I(5,4,"MESSAGE.required")))}function dl(n,s){if(n&1){let o=M();a(0,"div",8)(1,"form",29,0),b("ngSubmit",function(){f(o);let i=u();return h(i.onFormSubmit())}),a(3,"fieldset")(4,"div",30)(5,"label",31),d(6),g(7,"translate"),a(8,"span"),d(9),g(10,"translate"),l()(),a(11,"input",32,1),g(13,"translate"),x("ngModelChange",function(i){f(o);let e=u();return A(e.dataModel.fullName,i)||(e.dataModel.fullName=i),h(i)}),l(),v(14,rl,6,6,"mat-error",33),l(),a(15,"div",30)(16,"label",34),d(17),g(18,"translate"),a(19,"span"),d(20),g(21,"translate"),l()(),a(22,"input",35,2),g(24,"translate"),x("ngModelChange",function(i){f(o);let e=u();return A(e.dataModel.phoneNo,i)||(e.dataModel.phoneNo=i),h(i)}),l(),v(25,al,6,6,"mat-error",33),l(),a(26,"div",36)(27,"label",37),d(28),g(29,"translate"),a(30,"span"),d(31),g(32,"translate"),l()(),a(33,"input",38,3),g(35,"translate"),x("ngModelChange",function(i){f(o);let e=u();return A(e.dataModel.email,i)||(e.dataModel.email=i),h(i)}),l(),v(36,ll,6,6,"mat-error",33),l(),v(37,sl,5,3,"div",39),a(38,"div",40)(39,"label",41),d(40),g(41,"translate"),a(42,"span"),d(43),g(44,"translate"),l()(),a(45,"textarea",42,4),x("ngModelChange",function(i){f(o);let e=u();return A(e.dataModel.htmlBody,i)||(e.dataModel.htmlBody=i),h(i)}),l(),v(47,cl,6,6,"mat-error",33),l(),a(48,"div",43),T(49,"input",44),g(50,"translate"),l()()()()}if(n&2){let o=D(12),t=D(23),i=D(34),e=D(46),c=u();r(6),S("",I(7,21,"AUTH.INPUT.FULLNAME"),":"),r(3),S("( ",I(10,23,"TITLE.Necessary")," )"),r(2),R("placeholder",I(13,25,"TITLE.Enter_your_first_and_last_name")),y("ngModel",c.dataModel.fullName),r(3),m("ngIf",o.errors==null?null:o.errors.required),r(3),S("",I(18,27,"AUTH.INPUT.MOBILE"),":"),r(3),S("( ",I(21,29,"TITLE.Necessary")," )"),r(2),R("placeholder",I(24,31,"TITLE.Enter_your_first_and_last_name")),y("ngModel",c.dataModel.phoneNo),r(3),m("ngIf",t.errors==null?null:t.errors.required),r(3),S("",I(29,33,"AUTH.INPUT.EMAIL"),":"),r(3),S("( ",I(32,35,"TITLE.Necessary")," )"),r(2),R("placeholder",I(35,37,"TITLE.Enter_email")),y("ngModel",c.dataModel.email),r(3),m("ngIf",i.errors==null?null:i.errors.required),r(),m("ngIf",c.templateItemCount>0),r(3),S("",I(41,39,"AUTH.INPUT.YOURMEESAGE"),":"),r(3),S("( ",I(44,41,"TITLE.Necessary")," )"),r(2),y("ngModel",c.dataModel.htmlBody),r(2),m("ngIf",e.errors==null?null:e.errors.required),r(2),R("value",I(50,43,"ACTION.SEND"))}}function pl(n,s){if(n&1&&(a(0,"div",46)(1,"div",11)(2,"div",12)(3,"h1",13),T(4,"i",14),l(),a(5,"h2",15),d(6),g(7,"translate"),l(),a(8,"p",16),d(9),g(10,"translate"),l(),a(11,"p",15),d(12),g(13,"translate"),l(),T(14,"div",47),l()()()),n&2){let o=u();r(6),w(I(7,5,"TITLE.Your_message_has_been_registered_in_the_system")),r(3),w(I(10,7,"TITLE.Note_the_tracking_code_for_further_tracking")),r(3),an(" ",I(13,9,"TITLE.Tracking_Code")," : ",o.dataModelResult.item.id," "),r(2),m("innerHTML",o.dataModelResult.item==null||o.dataModelResult.item.virtual_Departemen==null?null:o.dataModelResult.item.virtual_Departemen.DefaultAnswerBody,bi)}}var Qn=(()=>{let s=class s extends ft{constructor(t,i,e,c,C,p,V,B,J,$){super(p,new Fe,c,J),this.tokenHelper=t,this.activatedRoute=i,this.coreAuthService=e,this.publicHelper=c,this.coreEnumService=C,this.ticketingTaskService=p,this.cmsToastrService=V,this.router=B,this.translate=J,this.cdr=$,this.requestLinkDepartemenId=0,this.constructorInfoAreaId=this.constructor.name,this.fieldsInfo=new Map,this.formInfo=new ae,this.dataModel=new Sn,this.dataModelResult=new z,this.selectFileTypeMainImage=["jpg","jpeg","png"],this.fileManagerOpenForm=!1,this.appLanguage="fa",this.templateItemCount=0,this.mapOptonCenter=new It,this.captchaModel=new mn,this.countAutoCaptchaOrder=1,this.enumFormSubmitedStatus=Ri,this.onCaptchaOrderInProcess=!1,this.publicHelper.processService.cdr=this.cdr,this.fileManagerTree=this.publicHelper.GetfileManagerTreeConfig(),this.tokenHelper.getTokenInfoState().then(De=>{this.tokenInfo=De,this.dataModel.fullName=this.tokenInfo.fullName,this.dataModel.email=this.tokenInfo.email,this.dataModel.phoneNo=this.tokenInfo.mobile}),this.cmsApiStoreSubscribe=this.tokenHelper.getTokenInfoStateOnChange().subscribe({next:De=>{this.tokenInfo=De,this.dataModel.fullName=this.tokenInfo.fullName,this.dataModel.email=this.tokenInfo.email,this.dataModel.phoneNo=this.tokenInfo.mobile}})}ngOnInit(){this.requestLinkDepartemenId=+Number(this.activatedRoute.snapshot.paramMap.get("LinkDepartemenId")),this.onCaptchaOrder(),this.dataModel.linkTicketingDepartemenId=this.requestLinkDepartemenId,this.DataGetAccess()}onFormSubmit(){if(!this.formGroup.valid){this.cmsToastrService.typeErrorFormInvalid();return}this.DataAddContent()}ngOnDestroy(){this.cmsApiStoreSubscribe.unsubscribe()}DataAddContent(){this.formInfo.formSubmitAllow=!1,this.translate.get("MESSAGE.sending_information_to_the_server").subscribe(i=>{this.formInfo.formAlert=i}),this.formInfo.formError="";let t=this.constructor.name+"main";this.translate.get("MESSAGE.Receiving_information").subscribe(i=>{this.publicHelper.processService.processStart(t,i,this.constructorInfoAreaId)}),this.dataModel.captchaKey=this.captchaModel.key,this.ticketingTaskService.ServiceContactUS(this.dataModel).subscribe({next:i=>{this.formInfo.formSubmitAllow=!i.isSuccess,this.dataModelResult=i,i.isSuccess?(this.formInfo.formSubmitedStatus=Ri.Success,this.translate.get("MESSAGE.registration_completed_successfully").subscribe(e=>{this.formInfo.formAlert=e}),this.cmsToastrService.typeSuccessAdd()):(this.formInfo.formSubmitedStatus=Ri.Error,this.cmsToastrService.typeErrorAdd(i.errorMessage)),this.publicHelper.processService.processStop(t),this.cdr.markForCheck()},error:i=>{this.publicHelper.processService.processStop(t),this.formInfo.formSubmitAllow=!0,this.cmsToastrService.typeErrorAdd(i),this.cdr.markForCheck()}})}onActionSelectorSelect(t){if(!t||t.id<=0){let i=this.translate.instant("MESSAGE.Information_template_is_not_clear");this.cmsToastrService.typeWarningSelected(i);return}this.dataModel.htmlBody=t.htmlBody}onActionBackToParent(){this.router.navigate(["/application/app/"])}onActionSelectSource(t){if(!t||t.id<=0){this.cmsToastrService.typeErrorMessage(this.translate.instant("MESSAGE.Specify_the_source"),this.translate.instant("MESSAGE.The_source_of_the_information_application_is_not_known"));return}this.dataModel.linkTicketingDepartemenId=t.id}onCaptchaOrder(){this.onCaptchaOrderInProcess||(this.countAutoCaptchaOrder=this.countAutoCaptchaOrder+1,this.dataModel.captchaText="",this.coreAuthService.ServiceCaptcha().subscribe({next:t=>{if(t.isSuccess){this.captchaModel=t.item,this.expireDate=t.item.expire;let i=new Date,c=new Date(t.item.expire).getTime()-i.getTime();this.countAutoCaptchaOrder<10&&(this.countAutoCaptchaOrder=this.countAutoCaptchaOrder+1,setTimeout(()=>{this.onCaptchaOrder()},c))}else this.cmsToastrService.typeErrorGetCpatcha(t.errorMessage);this.onCaptchaOrderInProcess=!1},error:t=>{this.onCaptchaOrderInProcess=!1}}))}};s.\u0275fac=function(i){return new(i||s)(_(ee),_(ve),_(fn),_(L),_(K),_(Ne),_(N),_(ce),_(P),_(O))},s.\u0275cmp=F({type:s,selectors:[["app-ticketing-task-contactus"]],viewQuery:function(i,e){if(i&1&&te(ol,5),i&2){let c;ie(c=ne())&&(e.formGroup=c.first)}},features:[U],decls:35,vars:9,consts:[["vform","ngForm"],["FullName",""],["phoneNo",""],["Email",""],["HtmlBody",""],[1,"page-content","pb-3"],[1,"card","card-full","rounded-m","pb-4"],[1,"drag-line"],[1,"content"],[1,"font-600","mb-0","color-highlight"],[1,"form-sent","disabled"],[1,"card","card-style"],[1,"shadow-l","rounded-m","gradient-green","ms-n1","mb-0"],[1,"color-white","text-center","pt-4"],[1,"fa","fa-check-circle","fa-3x","shadow-s","scale-box","rounded-circle"],[1,"color-white","bold","text-center","pt-3"],[1,"color-white","pb-4","text-center","mt-n2","mb-0"],[1,"content","text-center"],[1,"boxed-text-xl"],["href","#",1,"icon","icon-xl","shadow-xl","rounded-xl","bg-facebook"],[1,"fab","fa-facebook-f"],["href","#",1,"icon","icon-xl","shadow-xl","rounded-xl","bg-instagram","ms-3","me-3"],[1,"fab","fa-instagram"],["href","#",1,"icon","icon-xl","shadow-xl","rounded-xl","bg-twitter"],[1,"fab","fa-twitter"],[3,"optionsInfoAreaId"],[1,"card","contact-form"],["class","content",4,"ngIf"],["class","form-sent",4,"ngIf"],[3,"ngSubmit"],[1,"form-field","form-name"],["for","contactNameField",1,"contactNameField","color-theme"],["type","text","name","dataModel.fullName","id","contactNameField","required","",1,"round-small",2,"text-align","center !important",3,"ngModelChange","ngModel","placeholder"],[4,"ngIf"],["for","contactPhoneField",1,"contactNameField","color-theme"],["type","text","name","dataModel.phoneNo","id","contactPhoneField","required","",1,"round-small","input-ltr-center",3,"ngModelChange","ngModel","placeholder"],[1,"form-field","form-email"],["for","contactEmailField",1,"contactEmailField","color-theme"],["type","email","name","dataModel.email","id","contactEmailField",1,"round-small","input-ltr-center",3,"ngModelChange","ngModel","placeholder"],["class","form-field form-email",4,"ngIf"],[1,"form-field","form-text"],["for","contactMessageTextarea",1,"contactMessageTextarea","color-theme"],["name","dataModel.htmlBody","id","contactMessageTextarea","rows","3","required","",1,"round-small",3,"ngModelChange","ngModel"],[1,"form-button"],["type","submit","data-formId","contactForm",1,"btn","bg-highlight","font-700","btn-m","btn-full","rounded-sm","shadow-xl","contactSubmitButton",3,"value"],[3,"optionItemCount","optionChange"],[1,"form-sent"],[3,"innerHTML"]],template:function(i,e){i&1&&(a(0,"div",5)(1,"div",6),T(2,"div",7),a(3,"div",8)(4,"p",9),d(5),g(6,"translate"),l(),a(7,"p"),d(8),g(9,"translate"),l()(),a(10,"div",10)(11,"div",11)(12,"div",12)(13,"h1",13),T(14,"i",14),l(),a(15,"h2",15),d(16,"\u067E\u06CC\u0627\u0645 \u0627\u0631\u0633\u0627\u0644 \u0634\u062F"),l(),a(17,"p",16),d(18,"\u0645\u0627 \u0628\u0647 \u0632\u0648\u062F\u06CC \u0628\u0627 \u0634\u0645\u0627 \u062A\u0645\u0627\u0633 \u062E\u0648\u0627\u0647\u06CC\u0645 \u06AF\u0631\u0641\u062A."),l()()(),a(19,"div",11)(20,"div",17)(21,"h2"),d(22,"\u062F\u0631 \u0636\u0645\u0646\u060C \u0628\u06CC\u0627\u06CC\u06CC\u062F \u0627\u062C\u062A\u0645\u0627\u0639\u06CC \u0634\u0648\u06CC\u0645!"),l(),a(23,"p",18),d(24," \u062F\u0631 \u0627\u06CC\u0646\u062C\u0627 \u067E\u0644\u062A\u0641\u0631\u0645 \u0647\u0627\u06CC \u0631\u0633\u0627\u0646\u0647 \u0647\u0627\u06CC \u0627\u062C\u062A\u0645\u0627\u0639\u06CC \u0645\u0627 \u0647\u0633\u062A\u0646\u062F! \u0645\u0627 \u0631\u0627 \u0628\u0631\u0627\u06CC \u0622\u062E\u0631\u06CC\u0646 \u0628\u0647 \u0631\u0648\u0632 \u0631\u0633\u0627\u0646\u06CC \u0647\u0627 \u062F\u0646\u0628\u0627\u0644 \u06A9\u0646\u06CC\u062F \u06CC\u0627 \u0641\u0642\u0637 \u0633\u0644\u0627\u0645 \u06A9\u0646\u06CC\u062F! "),l(),a(25,"a",19),T(26,"i",20),l(),a(27,"a",21),T(28,"i",22),l(),a(29,"a",23),T(30,"i",24),l()()()(),T(31,"app-progress-spinner",25),a(32,"div",26),v(33,dl,51,45,"div",27),l(),v(34,pl,15,11,"div",28),l()()),i&2&&(r(5),w(I(6,5,"TITLE.Send_us_your_questions")),r(3),S(" ",I(9,7,"TITLE.GetInTouchWithUs")," "),r(23),m("optionsInfoAreaId",e.constructorInfoAreaId),r(2),m("ngIf",(e.formInfo==null?null:e.formInfo.formSubmitedStatus)!==e.enumFormSubmitedStatus.Success),r(),m("ngIf",(e.formInfo==null?null:e.formInfo.formSubmitedStatus)===e.enumFormSubmitedStatus.Success))},dependencies:[G,Ce,oe,re,ge,Me,fe,Se,ye,j,Un,H],encapsulation:2});let n=s;return n})();var ml=["vform"];function ul(n,s){if(n&1){let o=M();a(0,"div",4)(1,"button",5),b("click",function(){f(o);let i=u();return h(i.onFormCancel())}),T(2,"i",6),d(3),g(4,"translate"),l()()}n&2&&(r(3),S(" ",I(4,1,"ACTION.CANCEL")," "))}var Ki=(()=>{let s=class s{constructor(t,i,e,c,C,p,V,B,J,$){this.data=t,this.dialogRef=i,this.coreEnumService=e,this.ticketingTaskService=c,this.cmsToastrService=C,this.tokenHelper=p,this.cdr=V,this.ticketingEnumService=B,this.publicHelper=J,this.translate=$,this.requestId=0,this.constructorInfoAreaId=this.constructor.name,this.tokenInfo=new Gt,this.dataModelResult=new z,this.dataModel=new Fe,this.formInfo=new ae,this.dataModelEnumTicketStatusResult=new z,this.fieldsInfo=new Map,this.dataTaskReadedResult=new St,this.fileManagerOpenForm=!1,this.publicHelper.processService.cdr=this.cdr,t&&(this.requestId=+t.id||0)}ngOnInit(){if(this.formInfo.formTitle=this.translate.instant("TITLE.VIEW"),this.requestId===0){this.cmsToastrService.typeErrorComponentAction(),this.dialogRef.close({dialogChangedDate:!1});return}this.DataGetOneContent(),this.tokenHelper.getTokenInfoState().then(t=>{this.tokenInfo=t}),this.cmsApiStoreSubscribe=this.tokenHelper.getTokenInfoStateOnChange().subscribe({next:t=>{this.tokenInfo=t}}),this.getEnumTicketStatus()}getEnumTicketStatus(){this.ticketingEnumService.ServiceTicketStatusEnum().subscribe({next:t=>{this.dataModelEnumTicketStatusResult=t}})}ngOnDestroy(){this.cmsApiStoreSubscribe.unsubscribe()}DataGetOneContent(){this.translate.get("MESSAGE.Receiving_Information_From_The_Server").subscribe(i=>{this.formInfo.formAlert=i}),this.formInfo.formError="";let t=this.constructor.name+"main";this.translate.get("MESSAGE.Receiving_information").subscribe(i=>{this.publicHelper.processService.processStart(t,i,this.constructorInfoAreaId)}),this.ticketingTaskService.setAccessLoad(),this.ticketingTaskService.ServiceGetOneById(this.requestId).subscribe({next:i=>{this.fieldsInfo=this.publicHelper.fieldInfoConvertor(i.access),this.dataModel=i.item,i.isSuccess?(this.formInfo.formTitle=this.formInfo.formTitle+" "+i.item.id,this.formInfo.formAlert="",this.dataTaskReaded(this.requestId)):(this.translate.get("ERRORMESSAGE.MESSAGE.typeError").subscribe(e=>{this.formInfo.formAlert=e}),this.formInfo.formError=i.errorMessage,this.cmsToastrService.typeErrorMessage(i.errorMessage)),this.publicHelper.processService.processStop(t)},error:i=>{this.cmsToastrService.typeError(i),this.publicHelper.processService.processStop(t,!1)}})}dataTaskReaded(t){this.ticketingTaskService.ServiceTaskReaded(t).subscribe({next:i=>{i.isSuccess&&(this.dataTaskReadedResult=i)}})}onFormCancel(){this.dialogRef.close({dialogChangedDate:!1})}};s.\u0275fac=function(i){return new(i||s)(_(he),_(de),_(K),_(Ne),_(N),_(ee),_(O),_(Pt),_(L),_(P))},s.\u0275cmp=F({type:s,selectors:[["app-ticketing-task-view"]],viewQuery:function(i,e){if(i&1&&te(ml,5),i&2){let c;ie(c=ne())&&(e.formGroup=c.first)}},decls:87,vars:43,consts:[[1,"table","table-striped","center"],[2,"background-color","#81D4FA"],[1,"ntk-cms-html-card-footer"],["class","form-actions",4,"ngIf"],[1,"form-actions"],["type","button",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-gray",3,"click"],[1,"ft-x"]],template:function(i,e){i&1&&(a(0,"p"),d(1),g(2,"translate"),l(),a(3,"table",0)(4,"thead",1)(5,"tr")(6,"th"),d(7),g(8,"translate"),l(),a(9,"th"),d(10),g(11,"translate"),l()()(),a(12,"tbody")(13,"tr")(14,"td"),d(15),l(),a(16,"td"),d(17),l()(),a(18,"tr")(19,"td"),d(20),l(),a(21,"td"),d(22),l()(),a(23,"tr")(24,"td"),d(25),l(),a(26,"td"),d(27),g(28,"enums"),l()(),a(29,"tr")(30,"td"),d(31),l(),a(32,"td"),d(33),l()(),a(34,"tr")(35,"td"),d(36),g(37,"translate"),l(),a(38,"td"),d(39),l()(),a(40,"tr")(41,"td"),d(42),l(),a(43,"td"),d(44),l()(),a(45,"tr")(46,"td"),d(47),l(),a(48,"td"),d(49),l()(),a(50,"tr")(51,"td"),d(52),l(),a(53,"td"),d(54),l()(),a(55,"tr")(56,"td"),d(57),l(),a(58,"td"),d(59),l()(),a(60,"tr")(61,"td"),d(62),l(),a(63,"td"),d(64),l()(),a(65,"tr")(66,"td"),d(67),l(),a(68,"td"),d(69),l()(),a(70,"tr")(71,"td"),d(72),l(),a(73,"td"),d(74),l()(),a(75,"tr")(76,"td"),d(77),l(),a(78,"td"),d(79),l()(),a(80,"tr")(81,"td"),d(82),l(),a(83,"td"),d(84),l()()(),a(85,"div",2),v(86,ul,5,3,"div",3),l()()),i&2&&(r(),w(I(2,32,"TITLE.VIEW")),r(6),w(I(8,34,"TITLE.parameter")),r(3),w(I(11,36,"TITLE.Amounts")),r(5),w(e.fieldsInfo.id==null?null:e.fieldsInfo.id.fieldTitle),r(2),w(e.dataModel.id),r(3),w(e.fieldsInfo.linkSiteId==null?null:e.fieldsInfo.linkSiteId.fieldTitle),r(2),w(e.dataModel.linkSiteId),r(3),w(e.fieldsInfo.ticketStatus==null?null:e.fieldsInfo.ticketStatus.fieldTitle),r(2),w(Zt(28,38,e.dataModel.ticketStatus,e.dataModelEnumTicketStatusResult.listItems)),r(4),w(e.fieldsInfo.title==null?null:e.fieldsInfo.title.fieldTitle),r(2),w(e.dataModel.title),r(3),w(I(37,41,"TITLE.Message_Text")),r(3),w(e.dataModel.htmlBody),r(3),w(e.fieldsInfo.fullName==null?null:e.fieldsInfo.fullName.fieldTitle),r(2),w(e.dataModel.fullName),r(3),w(e.fieldsInfo.phoneNo==null?null:e.fieldsInfo.phoneNo.fieldTitle),r(2),w(e.dataModel.phoneNo),r(3),w(e.fieldsInfo.createdDate==null?null:e.fieldsInfo.createdDate.fieldTitle),r(2),w(e.publicHelper.LocaleDate(e.dataModel.createdDate)),r(3),w(e.fieldsInfo.updatedDate==null?null:e.fieldsInfo.updatedDate.fieldTitle),r(2),w(e.publicHelper.LocaleDate(e.dataModel.updatedDate)),r(3),w(e.fieldsInfo.email==null?null:e.fieldsInfo.email.fieldTitle),r(2),w(e.dataModel.email),r(3),w(e.fieldsInfo.linkCmsUserId==null?null:e.fieldsInfo.linkCmsUserId.fieldTitle),r(2),w(e.dataModel.linkCmsUserId),r(3),w(e.fieldsInfo.linkMemberId==null?null:e.fieldsInfo.linkMemberId.fieldTitle),r(2),w(e.dataModel.linkMemberId),r(3),w(e.fieldsInfo.linkTicketingDepartemenId==null?null:e.fieldsInfo.linkTicketingDepartemenId.fieldTitle),r(2),w(e.dataModel.linkTicketingDepartemenId),r(3),w(e.fieldsInfo.ticketingDepartemenDefaultAnswerBody==null?null:e.fieldsInfo.ticketingDepartemenDefaultAnswerBody.fieldTitle),r(2),w(e.dataModel.ticketingDepartemenDefaultAnswerBody),r(2),m("ngIf",e.formInfo.formSubmitAllow))},dependencies:[G,H,ii],styles:[".table.table-bordered[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{text-align:center}.hm-gradient[_ngcontent-%COMP%]{background-image:linear-gradient(to top,#f3e7e9,#e3eeff 99% 100%)}.darken-grey-text[_ngcontent-%COMP%]{color:#2e2e2e}.input-group.md-form.form-sm.form-2[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{border:1px solid #bdbdbd;border-top-left-radius:.25rem;border-bottom-left-radius:.25rem}.input-group.md-form.form-sm.form-2[_ngcontent-%COMP%]   input.purple-border[_ngcontent-%COMP%]{border:1px solid #9e9e9e}.input-group.md-form.form-sm.form-2[_ngcontent-%COMP%]   input[type=text][_ngcontent-%COMP%]:focus:not([readonly]).purple-border{border:1px solid #ba68c8;box-shadow:none}.form-2[_ngcontent-%COMP%]   .input-group-addon[_ngcontent-%COMP%]{border:1px solid #ba68c8}.danger-text[_ngcontent-%COMP%]{color:#ff3547}.success-text[_ngcontent-%COMP%]{color:#00c851}.table-bordered.red-border[_ngcontent-%COMP%], .table-bordered.red-border[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .table-bordered.red-border[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border:1px solid #ff3547!important}.table.table-bordered[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .center[_ngcontent-%COMP%]{text-align:center}"]});let n=s;return n})();var fl=()=>[5,10,20,100],hl=n=>({display:n});function _l(n,s){if(n&1){let o=M();a(0,"a",38),b("click",function(){f(o);let i=u();return h(i.onActionBackToParent())}),T(1,"i",39),l()}}function gl(n,s){if(n&1){let o=M();a(0,"div",40)(1,"a",41),b("click",function(){f(o);let i=u();return h(i.onActionButtonNewRow())}),T(2,"i",42)(3,"br"),l(),a(4,"p",43),d(5),g(6,"translate"),l()()}n&2&&(r(5),w(I(6,1,"ACTION.ADD")))}function Sl(n,s){if(n&1){let o=M();a(0,"div",40)(1,"a",9),b("click",function(){f(o);let i=u();return h(i.onActionButtonAnswerList())}),T(2,"i",44)(3,"br"),l(),a(4,"p",43),d(5),g(6,"translate"),l()()}n&2&&(r(5),w(I(6,1,"ACTION.ANSWERS")))}function Cl(n,s){if(n&1){let o=M();a(0,"div",40)(1,"a",45),b("click",function(){f(o);let i=u();return h(i.onActionButtonAnswerList(i.tableRowSelected))}),T(2,"i",44),l(),a(3,"p",43),d(4),g(5,"translate"),l()()}n&2&&(r(4),w(I(5,1,"ACTION.ANSWERS")))}function Il(n,s){if(n&1){let o=M();a(0,"div",40)(1,"a",46),b("click",function(){f(o);let i=u();return h(i.onActionButtonViewRow(i.tableRowSelected))}),T(2,"i",47),l(),a(3,"p",43),d(4),g(5,"translate"),l()()}n&2&&(r(4),w(I(5,1,"ACTION.VIEW")))}function Tl(n,s){if(n&1&&(a(0,"mat-header-cell",48),d(1),l()),n&2){let o=u();r(),S(" ",o.fieldsInfo.id==null?null:o.fieldsInfo.id.fieldTitle," ")}}function vl(n,s){if(n&1&&(a(0,"mat-cell"),d(1),l()),n&2){let o=s.$implicit;r(),S(" ",o.id," ")}}function bl(n,s){if(n&1&&(a(0,"mat-header-cell",48),d(1),l()),n&2){let o=u();r(),S(" ",o.fieldsInfo.linkSiteId==null?null:o.fieldsInfo.linkSiteId.fieldTitle," ")}}function wl(n,s){if(n&1&&(a(0,"mat-cell"),d(1),g(2,"cmssiteinfo"),g(3,"async"),l()),n&2){let o=s.$implicit;r(),S(" ",I(3,3,I(2,1,o.linkSiteId))," ")}}function Ml(n,s){if(n&1&&(a(0,"mat-header-cell",48),d(1),l()),n&2){let o=u();r(),S(" ",o.fieldsInfo.recordStatus==null?null:o.fieldsInfo.recordStatus.fieldTitle," ")}}function kl(n,s){if(n&1&&T(0,"select",51),n&2){let o=u().$implicit,t=u();m("contentService",t.contentService)("row",o)("ngStyle",ze(3,hl,o.id===(t.tableRowSelected==null?null:t.tableRowSelected.id)?"":"none"))}}function El(n,s){if(n&1&&(a(0,"mat-cell",49),g(1,"statusCellClass"),T(2,"i",49),g(3,"statusIconClass"),v(4,kl,1,5,"select",50),l()),n&2){let o=s.$implicit,t=u();m("ngClass",I(1,3,o.recordStatus)),r(2),m("ngClass",I(3,5,o.recordStatus)),r(2),m("ngIf",t.dataModelResult==null||t.dataModelResult.access==null?null:t.dataModelResult.access.accessEditRow)}}function yl(n,s){if(n&1&&(a(0,"mat-header-cell",48),d(1),l()),n&2){let o=u();r(),S(" ",o.fieldsInfo.title==null?null:o.fieldsInfo.title.fieldTitle," ")}}function Al(n,s){if(n&1&&(a(0,"mat-cell"),d(1),l()),n&2){let o=s.$implicit;r(),S(" ",o.title," ")}}function xl(n,s){if(n&1&&(a(0,"mat-header-cell",48),d(1),l()),n&2){let o=u();r(),S(" ",o.fieldsInfo.createdDate==null?null:o.fieldsInfo.createdDate.fieldTitle," ")}}function Dl(n,s){if(n&1&&(a(0,"mat-cell"),d(1),l()),n&2){let o=s.$implicit,t=u();r(),S(" ",t.publicHelper.LocaleDate(o.createdDate)," ")}}function Rl(n,s){if(n&1&&(a(0,"mat-header-cell",48),d(1),l()),n&2){let o=u();r(),S(" ",o.fieldsInfo.updatedDate==null?null:o.fieldsInfo.updatedDate.fieldTitle," ")}}function Ll(n,s){if(n&1&&(a(0,"mat-cell"),d(1),l()),n&2){let o=s.$implicit,t=u();r(),S(" ",t.publicHelper.LocaleDate(o.updatedDate)," ")}}function Vl(n,s){n&1&&(a(0,"mat-header-cell"),d(1),g(2,"translate"),l()),n&2&&(r(),S(" ",I(2,1,"TITLE.OPTION")," "))}function Bl(n,s){if(n&1&&(a(0,"mat-cell",52)(1,"button",53)(2,"mat-icon"),d(3,"more_vert"),l()(),T(4,"mat-menu",null,2),l()),n&2){let o=D(5);r(),m("matMenuTriggerFor",o)}}function Fl(n,s){n&1&&T(0,"mat-header-row")}function Nl(n,s){if(n&1){let o=M();a(0,"mat-row",54),b("click",function(){let i=f(o).$implicit,e=u();return h(e.onActionTableRowSelect(i))}),l()}if(n&2){let o=s.$implicit,t=s.dataIndex,i=u();ke("ntk-row-odd",t%2)("ntk-row-even",!(t%2))("ntk-row-selected",o.id===(i.tableRowSelected==null?null:i.tableRowSelected.id))}}var on=(()=>{let s=class s extends We{constructor(t,i,e,c,C,p,V,B,J,$){super(t,new Fe,J,C,V),this.contentService=t,this.activatedRoute=i,this.cmsToastrService=e,this.router=c,this.tokenHelper=C,this.cdr=p,this.translate=V,this.pageInfo=B,this.publicHelper=J,this.dialog=$,this.requestDepartemenId=0,this.requestLinkCmsUserId=0,this.constructorInfoAreaId=this.constructor.name,this.fieldsInfo=new Map,this.flag=!1,this.tableContentSelected=[],this.filteModelContent=new Y,this.optionsSearch=new qi,this.optionsStatist=new ji,this.tokenInfo=new Gt,this.tabledisplayedColumns=[],this.tabledisplayedColumnsSource=["Id","RecordStatus","CreatedDate","UpdatedDate"],this.tabledisplayedColumnsMobileSource=["Id","RecordStatus","CreatedDate","UpdatedDate"],this.publicHelper.processService.cdr=this.cdr,this.optionsSearch.parentMethods={onSubmit:De=>this.onSubmitOptionsSearch(De)},this.filteModelContent.sortColumn="Id",this.filteModelContent.sortType=W.Descending}ngOnInit(){this.requestDepartemenId=+Number(this.activatedRoute.snapshot.paramMap.get("DepartemenId")),this.requestLinkCmsUserId=+Number(this.activatedRoute.snapshot.paramMap.get("LinkCmsUserId")),this.tokenHelper.getTokenInfoState().then(t=>{this.tokenInfo=t,setTimeout(()=>{this.firstLoadDataRunned||this.DataGetAll()},500)}),this.cmsApiStoreSubscribe=this.tokenHelper.getTokenInfoStateOnChange().subscribe({next:t=>{this.tokenInfo=t,this.firstLoadDataRunned=!0,this.DataGetAll()}})}ngOnDestroy(){this.cmsApiStoreSubscribe.unsubscribe()}DataGetAll(){this.tabledisplayedColumns=this.publicHelper.TableDisplayedColumns(this.tabledisplayedColumnsSource,this.tabledisplayedColumnsMobileSource,[],this.tokenInfo),this.tableRowsSelected=[],this.onActionTableRowSelect(new Fe);let t=this.constructor.name+"main";this.translate.get("MESSAGE.Receiving_information").subscribe(c=>{this.publicHelper.processService.processStart(t,c,this.constructorInfoAreaId)}),this.filteModelContent.accessLoad=!0;let i=JSON.parse(JSON.stringify(this.filteModelContent)),e=new X;this.requestDepartemenId>0&&(e.propertyName="LinkTicketingDepartemenId",e.value=this.requestDepartemenId,i.filters.push(e)),this.categoryModelSelected&&this.categoryModelSelected.id>0&&(e.propertyName="LinkTicketingDepartemenId",e.value=this.categoryModelSelected.id,i.filters.push(e)),this.requestLinkCmsUserId>0&&(e.propertyName="LinkCmsUserId",e.value=this.requestLinkCmsUserId,i.filters.push(e)),this.contentService.ServiceGetAllEditor(i).subscribe({next:c=>{this.fieldsInfo=this.publicHelper.fieldInfoConvertor(c.access),c.isSuccess?(this.dataModelResult=c,this.tableSource.data=c.listItems,this.optionsStatist?.data?.show&&this.onActionButtonStatist(!0),setTimeout(()=>{this.optionsSearch.childMethods&&this.optionsSearch.childMethods.setAccess(c.access)},1e3)):this.cmsToastrService.typeErrorGetAll(c.errorMessage),this.publicHelper.processService.processStop(t)},error:c=>{this.cmsToastrService.typeError(c),this.publicHelper.processService.processStop(t)}})}onTableSortData(t){this.tableSource&&this.tableSource.sort&&this.tableSource.sort.active===t.active?this.tableSource.sort.start==="asc"?(t.start="desc",this.filteModelContent.sortColumn=t.active,this.filteModelContent.sortType=W.Descending):this.tableSource.sort.start==="desc"?(t.start="asc",this.filteModelContent.sortColumn="",this.filteModelContent.sortType=W.Ascending):t.start="desc":(this.filteModelContent.sortColumn=t.active,this.filteModelContent.sortType=W.Descending),this.tableSource.sort=t,this.filteModelContent.currentPageNumber=0,this.DataGetAll()}onTablePageingData(t){this.filteModelContent.currentPageNumber=t.pageIndex+1,this.filteModelContent.rowPerPage=t.pageSize,this.DataGetAll()}onActionButtonNewRow(){this.router.navigate(["/ticketing/contactus/"])}onActionSelectorSelect(t){var i=this.filteModelContent.sortColumn,e=this.filteModelContent.sortType;this.filteModelContent=new Y,this.filteModelContent.sortColumn=i,this.filteModelContent.sortType=e,this.categoryModelSelected=t,this.DataGetAll()}onActionButtonViewRow(t=this.tableRowSelected){if(!t||!t.id||t.id===0){this.cmsToastrService.typeErrorSelectedRow();return}this.tableRowSelected=t;var i="";this.tokenHelper.isMobile?i="dialog-fullscreen":i="dialog-min",this.dialog.open(Ki,{height:"90%",panelClass:i,enterAnimationDuration:q.cmsViewConfig.enterAnimationDuration,exitAnimationDuration:q.cmsViewConfig.exitAnimationDuration,data:{id:this.tableRowSelected.id}}).afterClosed().subscribe(c=>{c&&c.dialogChangedDate})}onActionButtonAnswerList(t=this.tableRowSelected){if(!t||!t.id||t.id===0){this.cmsToastrService.typeErrorSelectedRow();return}if(this.tableRowSelected=t,this.dataModelResult==null||this.dataModelResult.access==null||!this.dataModelResult.access.accessWatchRow){this.cmsToastrService.typeErrorAccessWatch();return}this.router.navigate(["/ticketing/answer/LinkTaskId/",this.tableRowSelected.id])}onActionButtonStatist(t=!this.optionsStatist.data.show){if(this.optionsStatist.data.show=t,!this.optionsStatist.data.show)return;let i=new Map;this.translate.get("MESSAGE.Active").subscribe(p=>{i.set(p,0)}),this.translate.get("MESSAGE.All").subscribe(p=>{i.set(p,0)});let e=this.constructor.name+".ServiceStatist";this.translate.get("MESSAGE.Get_the_statist").subscribe(p=>{this.publicHelper.processService.processStart(e,p,this.constructorInfoAreaId)}),this.contentService.ServiceGetCount(this.filteModelContent).subscribe({next:p=>{p.isSuccess&&(i.set("All",p.totalRowCount),this.optionsStatist.childMethods.setStatistValue(i)),this.publicHelper.processService.processStop(e)},error:p=>{this.cmsToastrService.typeError(p),this.publicHelper.processService.processStop(e)}});let c=JSON.parse(JSON.stringify(this.filteModelContent)),C=new X;C.propertyName="RecordStatus",C.value=Je.Available,c.filters.push(C),this.contentService.ServiceGetCount(c).subscribe({next:p=>{p.isSuccess&&(i.set("Active",p.totalRowCount),this.optionsStatist.childMethods.setStatistValue(i)),this.publicHelper.processService.processStop(e)},error:p=>{this.cmsToastrService.typeError(p),this.publicHelper.processService.processStop(e)}})}onActionButtonReload(){this.DataGetAll()}onSubmitOptionsSearch(t){this.filteModelContent.filters=t,this.DataGetAll()}onActionBackToParent(){this.router.navigate(["/ticketing/departemen/"])}};s.\u0275fac=function(i){return new(i||s)(_(Ne),_(ve),_(N),_(ce),_(ee),_(O),_(P),_(Pe),_(L),_(Ae))},s.\u0275cmp=F({type:s,selectors:[["app-ticketing-task-contact-us-list"]],features:[U],decls:57,vars:30,consts:[["tableSort","matSort"],["paginator",""],["actionMenu","matMenu"],[3,"optionActionGuideNoticeDisplayChange","optionOnActionButtonMemoRow","optionOnActionButtonMemo","optionOnActionButtonExport","optionOnActionButtonPrintRow","optionsListInfoAreaId","optionGuideNoticeKey","optionActionGuideNoticeDisplay","optionTreeDisplay","optionActionRowId","optionActionRowDisplayMenu","optionSelectRowItemTitle"],["cms-tree",""],["cms-header",""],["cms-action-header",""],["cms-action-header-start",""],["type","button","class","btn font-13 font-600 btn-s m-1 rounded-s shadow-xl border-0 gradient-gray","target","_blank",3,"click",4,"ngIf"],["type","button","target","_blank",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-highlight",3,"click"],[1,"fa-solid","fa-info","font-18",2,"color","#ffffff"],[1,"fa-solid","fa-rotate-right","font-18",2,"color","#ffffff"],["cms-action-header-end",""],[1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-highlight",3,"click"],[3,"checked"],["cms-action-main",""],["class","col-4",4,"ngIf"],["cms-action-row",""],["cms-action-area",""],[3,"optionsChange","options"],["cms-body",""],["matSort","",3,"matSortChange","dataSource"],["matColumnDef","Id"],["mat-sort-header","",4,"matHeaderCellDef"],[4,"matCellDef"],["matColumnDef","LinkSiteId"],["matColumnDef","RecordStatus"],[3,"ngClass",4,"matCellDef"],["matColumnDef","Title"],["matColumnDef","CreatedDate"],["matColumnDef","UpdatedDate"],["matColumnDef","Action"],[4,"matHeaderCellDef"],["class"," Action",4,"matCellDef"],[4,"matHeaderRowDef"],[3,"ntk-row-odd","ntk-row-even","ntk-row-selected","click",4,"matRowDef","matRowDefColumns"],["cms-footer",""],[3,"page","length","pageIndex","pageSize","pageSizeOptions"],["type","button","target","_blank",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-gray",3,"click"],[1,"fa-solid","fa-arrow-left","font-18",2,"color","#ffffff"],[1,"col-4"],["type","button","target","_blank",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-teal",3,"click"],[1,"fa-solid","fa-plus","font-18",2,"color","#FFFFFF"],[1,"font-11","text-center","opacity-70"],[1,"fa-solid","fa-phone-arrow-right","font-18",2,"color","#ffffff"],["mat-menu-item","","target","_blank",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-highlight",3,"click"],["type","button","target","_blank","data-toggle","modal","data-target","#categoryModal",1,"btn","font-13","font-600","btn-m","m-1","rounded-s","shadow-xl","border-0","gradient-highlight",3,"click"],[1,"fa-solid","fa-eye","font-18",2,"color","#ffffff"],["mat-sort-header",""],[3,"ngClass"],["matNativeControl","","cmsRecordStatusSelfSave","","style","background: none; border: none;",3,"contentService","row","ngStyle",4,"ngIf"],["matNativeControl","","cmsRecordStatusSelfSave","",2,"background","none","border","none",3,"contentService","row","ngStyle"],[1,"Action"],["type","button","mat-icon-button","","aria-label","Action Menu",3,"matMenuTriggerFor"],[3,"click"]],template:function(i,e){if(i&1){let c=M();a(0,"app-cms-html-list",3),x("optionActionGuideNoticeDisplayChange",function(p){return f(c),A(e.viewGuideNotice,p)||(e.viewGuideNotice=p),h(p)}),b("optionOnActionButtonMemoRow",function(){return f(c),h(e.onActionButtonMemoRow())})("optionOnActionButtonMemo",function(){return f(c),h(e.onActionButtonMemo())})("optionOnActionButtonExport",function(){return f(c),h(e.onActionButtonExport())})("optionOnActionButtonPrintRow",function(){return f(c),h(e.onActionButtonPrintRow())}),Ee(1,4)(2,5)(3,6),k(4,7),v(5,_l,2,0,"a",8),a(6,"a",9),b("click",function(){return f(c),h(e.viewGuideNotice=!e.viewGuideNotice)}),T(7,"i",10),l(),a(8,"a",9),b("click",function(){return f(c),h(e.onActionButtonReload())}),T(9,"i",11),l(),E(),k(10,12),a(11,"a",13),b("click",function(){return f(c),h(e.optionsSearch.data.show=!e.optionsSearch.data.show)}),T(12,"mat-slide-toggle",14),d(13),g(14,"translate"),l(),a(15,"a",13),b("click",function(){return f(c),h(e.onActionButtonStatist())}),T(16,"mat-slide-toggle",14),d(17),g(18,"translate"),l(),E(),k(19,15),v(20,gl,7,3,"div",16)(21,Sl,7,3,"div",16),E(),k(22,17),v(23,Cl,6,3,"div",16)(24,Il,6,3,"div",16),E(),k(25,18),a(26,"app-cms-search-list",19),x("optionsChange",function(p){return f(c),A(e.optionsSearch,p)||(e.optionsSearch=p),h(p)}),l(),a(27,"app-cms-statist-list",19),x("optionsChange",function(p){return f(c),A(e.optionsStatist,p)||(e.optionsStatist=p),h(p)}),l(),E(),k(28,20),a(29,"mat-table",21,0),b("matSortChange",function(){f(c);let p=D(30);return h(e.onTableSortData(p))}),k(31,22),v(32,Tl,2,1,"mat-header-cell",23)(33,vl,2,1,"mat-cell",24),E(),k(34,25),v(35,bl,2,1,"mat-header-cell",23)(36,wl,4,5,"mat-cell",24),E(),k(37,26),v(38,Ml,2,1,"mat-header-cell",23)(39,El,5,7,"mat-cell",27),E(),k(40,28),v(41,yl,2,1,"mat-header-cell",23)(42,Al,2,1,"mat-cell",24),E(),k(43,29),v(44,xl,2,1,"mat-header-cell",23)(45,Dl,2,1,"mat-cell",24),E(),k(46,30),v(47,Rl,2,1,"mat-header-cell",23)(48,Ll,2,1,"mat-cell",24),E(),k(49,31),v(50,Vl,3,3,"mat-header-cell",32)(51,Bl,6,1,"mat-cell",33),E(),v(52,Fl,1,0,"mat-header-row",34)(53,Nl,1,6,"mat-row",35),l(),E(),k(54,36),a(55,"mat-paginator",37,1),b("page",function(p){return f(c),h(e.onTablePageingData(p))}),l(),E(),l()}i&2&&(m("optionsListInfoAreaId",e.constructorInfoAreaId)("optionGuideNoticeKey","ticketing.task.contactus-list"),y("optionActionGuideNoticeDisplay",e.viewGuideNotice),m("optionTreeDisplay",!1)("optionActionRowId",e.tableRowSelected==null?null:e.tableRowSelected.id)("optionActionRowDisplayMenu",e.tableRowSelectDoubleClick)("optionSelectRowItemTitle",(e.tableRowSelected==null||e.tableRowSelected.title==null?null:e.tableRowSelected.title.length)>0?e.tableRowSelected==null?null:e.tableRowSelected.title:e.tableRowSelected==null?null:e.tableRowSelected.id),r(5),m("ngIf",e.requestDepartemenId>0),r(7),m("checked",e.optionsSearch.data.show),r(),S("",I(14,25,"ACTION.SEARCH")," "),r(3),m("checked",e.optionsStatist.data.show),r(),S("",I(18,27,"ACTION.STATIST")," "),r(3),m("ngIf",e.dataModelResult==null||e.dataModelResult.access==null?null:e.dataModelResult.access.accessAddRow),r(),m("ngIf",(e.dataModelResult==null||e.dataModelResult.access==null?null:e.dataModelResult.access.accessWatchRow)&&(e.tableRowSelected==null?null:e.tableRowSelected.id)>0),r(2),m("ngIf",e.dataModelResult==null||e.dataModelResult.access==null?null:e.dataModelResult.access.accessWatchRow),r(),m("ngIf",(e.dataModelResult==null||e.dataModelResult.access==null?null:e.dataModelResult.access.accessWatchRow)&&(e.tableRowSelected==null?null:e.tableRowSelected.id)>0),r(2),y("options",e.optionsSearch),r(),y("options",e.optionsStatist),r(2),m("dataSource",e.tableSource),r(23),m("matHeaderRowDef",e.tabledisplayedColumns),r(),m("matRowDefColumns",e.tabledisplayedColumns),r(2),m("length",e.dataModelResult.totalRowCount)("pageIndex",e.dataModelResult.currentPageNumber-1)("pageSize",e.dataModelResult.rowPerPage)("pageSizeOptions",Qe(29,fl)))},dependencies:[yt,G,Ke,Ve,xe,Q,Xe,Tn,Ye,Ze,$e,et,tt,it,ot,st,rt,nt,ct,at,lt,dt,pt,qe,je,He,Mt,Le,H,ut,Et,kt],encapsulation:2});let n=s;return n})();var Pl=["vform"];function Hl(n,s){if(n&1){let o=M();a(0,"app-cms-enum-record-status-selector",22),x("modelChange",function(i){f(o);let e=u();return A(e.dataModel.recordStatus,i)||(e.dataModel.recordStatus=i),h(i)}),l()}if(n&2){let o=u();y("model",o.dataModel.recordStatus),m("optionDisabled",!1)("optionLabel",o.fieldsInfo.recordStatus==null?null:o.fieldsInfo.recordStatus.fieldTitle)("optionRequired",!0)("optionSelectFirstItem",!0)}}function ql(n,s){n&1&&T(0,"i",29)}function jl(n,s){n&1&&T(0,"i",30)}function Wl(n,s){if(n&1&&(a(0,"mat-error"),d(1),a(2,"strong"),d(3),g(4,"translate"),l()()),n&2){let o=u(2);r(),S(" ",o.fieldsInfo.fullName==null?null:o.fieldsInfo.fullName.fieldTitle," is "),r(2),w(I(4,2,"MESSAGE.required"))}}function Ul(n,s){if(n&1){let o=M();a(0,"div",23)(1,"label",24),d(2),l(),a(3,"input",25,2),x("ngModelChange",function(i){f(o);let e=u();return A(e.dataModel.fullName,i)||(e.dataModel.fullName=i),h(i)}),l(),v(5,ql,1,0,"i",26)(6,jl,1,0,"i",27),a(7,"em"),d(8),l(),v(9,Wl,5,4,"mat-error",28),l()}if(n&2){let o=D(4),t=u();r(2),w(t.fieldsInfo.fullName==null?null:t.fieldsInfo.fullName.fieldTitle),r(),R("placeholder",t.fieldsInfo.fullName==null?null:t.fieldsInfo.fullName.fieldTitle),y("ngModel",t.dataModel.fullName),m("disabled",!(t.fieldsInfo.fullName!=null&&t.fieldsInfo.fullName.accessAddField)),r(2),m("ngIf",!o.value),r(),m("ngIf",o.value),r(2),S("",o.value.length," / 100"),r(),m("ngIf",o.errors==null?null:o.errors.required)}}function Ql(n,s){n&1&&T(0,"i",29)}function zl(n,s){n&1&&T(0,"i",30)}function Kl(n,s){if(n&1&&(a(0,"mat-error"),d(1),a(2,"strong"),d(3),g(4,"translate"),l()()),n&2){let o=u(2);r(),S(" ",o.fieldsInfo.title==null?null:o.fieldsInfo.title.fieldTitle," is "),r(2),w(I(4,2,"MESSAGE.required"))}}function Jl(n,s){if(n&1){let o=M();a(0,"div",23)(1,"label",31),d(2),l(),a(3,"input",32,3),x("ngModelChange",function(i){f(o);let e=u();return A(e.dataModel.title,i)||(e.dataModel.title=i),h(i)}),l(),v(5,Ql,1,0,"i",26)(6,zl,1,0,"i",27),a(7,"em"),d(8),l(),v(9,Kl,5,4,"mat-error",28),l()}if(n&2){let o=D(4),t=u();r(2),w(t.fieldsInfo.title==null?null:t.fieldsInfo.title.fieldTitle),r(),R("placeholder",t.fieldsInfo.title==null?null:t.fieldsInfo.title.fieldTitle),y("ngModel",t.dataModel.title),m("disabled",!(t.fieldsInfo.title!=null&&t.fieldsInfo.title.accessAddField)),r(2),m("ngIf",!o.value),r(),m("ngIf",o.value),r(2),S("",o.value.length," / 100"),r(),m("ngIf",o.errors==null?null:o.errors.required)}}function Xl(n,s){n&1&&T(0,"i",29)}function Yl(n,s){n&1&&T(0,"i",30)}function Zl(n,s){if(n&1&&(a(0,"mat-error"),d(1),a(2,"strong"),d(3),g(4,"translate"),l()()),n&2){let o=u(2);r(),S(" ",o.fieldsInfo.phoneNo==null?null:o.fieldsInfo.phoneNo.fieldTitle," is "),r(2),w(I(4,2,"MESSAGE.required"))}}function $l(n,s){if(n&1){let o=M();a(0,"div",23)(1,"label",33),d(2),l(),a(3,"input",34,4),x("ngModelChange",function(i){f(o);let e=u();return A(e.dataModel.phoneNo,i)||(e.dataModel.phoneNo=i),h(i)}),l(),v(5,Xl,1,0,"i",26)(6,Yl,1,0,"i",27),a(7,"em"),d(8),l(),v(9,Zl,5,4,"mat-error",28),l()}if(n&2){let o=D(4),t=u();r(2),w(t.fieldsInfo.phoneNo==null?null:t.fieldsInfo.phoneNo.fieldTitle),r(),R("placeholder",t.fieldsInfo.phoneNo==null?null:t.fieldsInfo.phoneNo.fieldTitle),y("ngModel",t.dataModel.phoneNo),m("disabled",!(t.fieldsInfo.phoneNo!=null&&t.fieldsInfo.phoneNo.accessAddField)),r(2),m("ngIf",!o.value),r(),m("ngIf",o.value),r(2),S("",o.value.length," / 100"),r(),m("ngIf",o.errors==null?null:o.errors.required)}}function es(n,s){n&1&&T(0,"i",29)}function ts(n,s){n&1&&T(0,"i",30)}function is(n,s){if(n&1&&(a(0,"mat-error"),d(1),a(2,"strong"),d(3),g(4,"translate"),l()()),n&2){let o=u(2);r(),S(" ",o.fieldsInfo.email==null?null:o.fieldsInfo.email.fieldTitle," is "),r(2),w(I(4,2,"MESSAGE.required"))}}function ns(n,s){if(n&1){let o=M();a(0,"div",23)(1,"label",35),d(2),l(),a(3,"input",36,5),x("ngModelChange",function(i){f(o);let e=u();return A(e.dataModel.email,i)||(e.dataModel.email=i),h(i)}),l(),v(5,es,1,0,"i",26)(6,ts,1,0,"i",27),a(7,"em"),d(8),l(),v(9,is,5,4,"mat-error",28),l()}if(n&2){let o=D(4),t=u();r(2),w(t.fieldsInfo.email==null?null:t.fieldsInfo.email.fieldTitle),r(),R("placeholder",t.fieldsInfo.email==null?null:t.fieldsInfo.email.fieldTitle),y("ngModel",t.dataModel.email),m("disabled",!(t.fieldsInfo.email!=null&&t.fieldsInfo.email.accessAddField)),r(2),m("ngIf",!o.value),r(),m("ngIf",o.value),r(2),S("",o.value.length," / 100"),r(),m("ngIf",o.errors==null?null:o.errors.required)}}function os(n,s){if(n&1){let o=M();a(0,"div",23)(1,"label",37),d(2),g(3,"translate"),l(),a(4,"textarea",38,6),g(6,"translate"),x("ngModelChange",function(i){f(o);let e=u();return A(e.dataModel.htmlBody,i)||(e.dataModel.htmlBody=i),h(i)}),d(7,"                        "),l(),a(8,"em"),d(9),l()()}if(n&2){let o=D(5),t=u();r(2),w(I(3,5,"TITLE.Description")),r(2),R("placeholder",I(6,7,"TITLE.Answer_Text")),y("ngModel",t.dataModel.htmlBody),m("disabled",!(t.fieldsInfo.htmlBody!=null&&t.fieldsInfo.htmlBody.accessAddField)),r(5),S("",o.value.length," / 1000")}}function rs(n,s){if(n&1){let o=M();a(0,"div",23)(1,"label",39),d(2),l(),a(3,"input",40),x("ngModelChange",function(i){f(o);let e=u();return A(e.dataModel.expireDate,i)||(e.dataModel.expireDate=i),h(i)}),l(),T(4,"mat-datepicker-toggle",41)(5,"mat-datepicker",42,7),l()}if(n&2){let o=D(6),t=u();r(2),w(t.fieldsInfo.expireDate==null?null:t.fieldsInfo.expireDate.fieldTitle),r(),m("matDatepicker",o),y("ngModel",t.dataModel.expireDate),r(),m("for",o)}}function as(n,s){if(n&1){let o=M();a(0,"div",43)(1,"button",44),b("click",function(){f(o);let i=u();return h(i.onActionBackToParent())}),d(2),g(3,"translate"),l(),a(4,"button",45),d(5),g(6,"translate"),l()()}if(n&2){u();let o=D(9);r(2),S(" ",I(3,3,"ACTION.BACK")," "),r(2),m("disabled",!o.form.valid),r(),S(" ",I(6,5,"ACTION.NEXT")," ")}}function ls(n,s){if(n&1){let o=M();a(0,"div",23)(1,"label",46),d(2),l(),a(3,"input",47,8),x("ngModelChange",function(i){f(o);let e=u();return A(e.dataModel.userIpAddress,i)||(e.dataModel.userIpAddress=i),h(i)}),l(),a(5,"em"),d(6),l()()}if(n&2){let o=D(4),t=u();r(2),w(t.fieldsInfo.userIpAddress==null?null:t.fieldsInfo.userIpAddress.fieldTitle),r(),R("placeholder",t.fieldsInfo.userIpAddress==null?null:t.fieldsInfo.userIpAddress.fieldTitle),y("ngModel",t.dataModel.userIpAddress),m("disabled",!(t.fieldsInfo.userIpAddress!=null&&t.fieldsInfo.userIpAddress.accessAddField)),r(3),S("",o.value.length," / 100")}}function ss(n,s){if(n&1){let o=M();a(0,"div",23)(1,"label",48),d(2),l(),a(3,"input",49,9),x("ngModelChange",function(i){f(o);let e=u();return A(e.dataModel.deviceInformation,i)||(e.dataModel.deviceInformation=i),h(i)}),l(),a(5,"em"),d(6),l()()}if(n&2){let o=D(4),t=u();r(2),w(t.fieldsInfo.userIpAddress==null?null:t.fieldsInfo.userIpAddress.fieldTitle),r(),R("placeholder",t.fieldsInfo.deviceInformation==null?null:t.fieldsInfo.deviceInformation.fieldTitle),y("ngModel",t.dataModel.deviceInformation),m("disabled",!(t.fieldsInfo.deviceInformation!=null&&t.fieldsInfo.deviceInformation.accessAddField)),r(3),S("",o.value.length," / 100")}}function cs(n,s){if(n&1&&(a(0,"div",43)(1,"button",50),d(2),g(3,"translate"),l(),a(4,"button",51),d(5),g(6,"translate"),l()()),n&2){u();let o=D(9);r(2),S(" ",I(3,3,"ACTION.BEFOR")," "),r(2),m("disabled",!o.form.valid),r(),S(" ",I(6,5,"ACTION.SAVE")," ")}}var zn=(()=>{let s=class s extends ft{constructor(t,i,e,c,C,p,V,B,J){super(c,new Fe,i,J),this.activatedRoute=t,this.publicHelper=i,this.coreEnumService=e,this.ticketingTaskService=c,this.cmsToastrService=C,this.dialogRef=p,this.router=V,this.cdr=B,this.translate=J,this.requestLinkDepartemenId=0,this.constructorInfoAreaId=this.constructor.name,this.fieldsInfo=new Map,this.formInfo=new ae,this.dataModel=new Fe,this.dataModelResult=new z,this.selectFileTypeMainImage=["jpg","jpeg","png"],this.fileManagerOpenForm=!1,this.appLanguage="fa",this.mapOptonCenter=new It,this.publicHelper.processService.cdr=this.cdr,this.fileManagerTree=this.publicHelper.GetfileManagerTreeConfig()}ngOnInit(){this.requestLinkDepartemenId=+Number(this.activatedRoute.snapshot.paramMap.get("LinkDepartemenId")),this.dataModel.linkTicketingDepartemenId=this.requestLinkDepartemenId,this.DataGetAccess()}onFormSubmit(){if(!this.formGroup.valid){this.cmsToastrService.typeErrorFormInvalid();return}this.DataAddContent()}DataAddContent(){this.formInfo.formSubmitAllow=!1,this.translate.get("MESSAGE.sending_information_to_the_server").subscribe(i=>{this.formInfo.formAlert=i}),this.formInfo.formError="";let t=this.constructor.name+"main";this.translate.get("MESSAGE.Receiving_information").subscribe(i=>{this.publicHelper.processService.processStart(t,i,this.constructorInfoAreaId)}),this.ticketingTaskService.ServiceAdd(this.dataModel).subscribe({next:i=>{this.formInfo.formSubmitAllow=!i.isSuccess,this.dataModelResult=i,i.isSuccess?(this.translate.get("MESSAGE.registration_completed_successfully").subscribe(e=>{this.formInfo.formAlert=e}),this.cmsToastrService.typeSuccessEdit(),setTimeout(()=>this.router.navigate(["/ticketing/task/"]),1e3)):this.cmsToastrService.typeErrorEdit(i.errorMessage),this.publicHelper.processService.processStop(t)},error:i=>{this.publicHelper.processService.processStop(t),this.formInfo.formSubmitAllow=!0,this.cmsToastrService.typeErrorEdit(i)}})}onStepClick(t,i){t.previouslySelectedIndex<t.selectedIndex}onActionBackToParent(){this.dialogRef.close({dialogChangedDate:!1})}onActionFileSelectedLinkMainImageId(){}onActionSelectSource(t){if(!t||t.id<=0){this.cmsToastrService.typeErrorMessage(this.translate.instant("MESSAGE.Specify_the_source"),this.translate.instant("MESSAGE.The_source_of_the_information_application_is_not_known"));return}this.dataModel.linkTicketingDepartemenId=t.id}};s.\u0275fac=function(i){return new(i||s)(_(ve),_(L),_(K),_(Ne),_(N),_(de),_(ce),_(O),_(P))},s.\u0275cmp=F({type:s,selectors:[["app-ticketing-task-add"]],viewQuery:function(i,e){if(i&1&&te(Pl,5),i&2){let c;ie(c=ne())&&(e.formGroup=c.first)}},features:[U],decls:32,vars:30,consts:[["vform","ngForm"],["stepper",""],["FullName",""],["Title",""],["PhoneNo",""],["Email",""],["HtmlBody",""],["ExpireDate",""],["UserIpAddress",""],["DeviceInformation",""],[1,"card","card-style","loader-container"],[3,"optionsInfoAreaId"],[1,"content","mb-0"],[1,"mb-0","color-highlight","font-600","font-12"],[3,"ngSubmit"],[3,"selectionChange"],["state","main",3,"label"],[3,"model","optionDisabled","optionLabel","optionRequired","optionSelectFirstItem","modelChange",4,"ngIf"],[3,"optionChange","optionSelectForce","optionPlaceholder","optionDisabled"],["class","input-style has-borders no-icon input-style-always-active validate-field mb-4",4,"ngIf"],["class","form-actions",4,"ngIf"],["state","seo",3,"label"],[3,"modelChange","model","optionDisabled","optionLabel","optionRequired","optionSelectFirstItem"],[1,"input-style","has-borders","no-icon","input-style-always-active","validate-field","mb-4"],["for","dataModel.fullName",1,"color-highlight"],["matInput","","type","text","name","dataModel.fullName","minlength","3","maxlength","1000","required","","id","dataModel.fullName",1,"form-control","validate-name",3,"ngModelChange","ngModel","placeholder","disabled"],["class","fa fa-times  invalid color-red-dark",4,"ngIf"],["class","fa fa-check  valid color-green-dark",4,"ngIf"],[4,"ngIf"],[1,"fa","fa-times","invalid","color-red-dark"],[1,"fa","fa-check","valid","color-green-dark"],["for","dataModel.title",1,"color-highlight"],["matInput","","type","text","name","dataModel.title","type","text","minlength","3","maxlength","100","required","","id","dataModel.title",1,"form-control","validate-name",3,"ngModelChange","ngModel","placeholder","disabled"],["for","dataModel.phoneNo",1,"color-highlight"],["matInput","","type","text","name","dataModel.phoneNo","type","text","minlength","3","maxlength","100","required","","id","dataModel.phoneNo",1,"form-control","validate-name",3,"ngModelChange","ngModel","placeholder","disabled"],["for","dataModel.email",1,"color-highlight"],["matInput","","type","text","name","dataModel.email","type","text","minlength","3","maxlength","100","required","","id","dataModel.email",1,"form-control","validate-name",3,"ngModelChange","ngModel","placeholder","disabled"],["for","dataModel.htmlBody",1,"color-highlight"],["matInput","","name","dataModel.htmlBody","type","text","minlength","0","maxlength","1000","rows","5","id","dataModel.htmlBody",1,"form-control","validate-name",3,"ngModelChange","ngModel","placeholder","disabled"],["for","dataModel.expireDate",1,"color-highlight"],["matInput","","type","text","name","dataModel.expireDate","type","text","id","dataModel.expireDate",1,"form-control","validate-name",3,"ngModelChange","matDatepicker","ngModel"],["matSuffix","",3,"for"],["touchUi",""],[1,"form-actions"],["type","button",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-gray",3,"click"],["type","button","matStepperNext","",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-blue",3,"disabled"],["for","dataModel.userIpAddress",1,"color-highlight"],["matInput","","type","text","name","dataModel.userIpAddress","type","text","minlength","0","maxlength","100","id","dataModel.userIpAddress",1,"form-control","validate-name",3,"ngModelChange","ngModel","placeholder","disabled"],["for","dataModel.deviceInformation",1,"color-highlight"],["matInput","","type","text","name","dataModel.deviceInformation","type","text","minlength","0","maxlength","100","id","dataModel.deviceInformation",1,"form-control","validate-name",3,"ngModelChange","ngModel","placeholder","disabled"],["type","button","matStepperPrevious","",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-blue"],["type","submit",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-green",3,"disabled"]],template:function(i,e){if(i&1){let c=M();a(0,"div",10),T(1,"app-progress-spinner",11),a(2,"div",12)(3,"p",13),d(4),l(),a(5,"p"),d(6),g(7,"translate"),l(),a(8,"form",14,0),b("ngSubmit",function(){return f(c),h(e.onFormSubmit())}),a(10,"mat-horizontal-stepper",15,1),b("selectionChange",function(p){f(c);let V=D(11);return h(e.onStepClick(p,V))}),a(12,"mat-step",16),g(13,"translate"),v(14,Hl,1,5,"app-cms-enum-record-status-selector",17),a(15,"app-ticketing-departemen-selector",18),g(16,"translate"),b("optionChange",function(p){return f(c),h(e.onActionSelectSource(p))}),l(),v(17,Ul,10,8,"div",19)(18,Jl,10,8,"div",19)(19,$l,10,8,"div",19)(20,ns,10,8,"div",19)(21,os,10,9,"div",19)(22,rs,7,4,"div",19)(23,as,7,7,"div",20),l(),a(24,"mat-step",21),g(25,"translate"),a(26,"p"),d(27),g(28,"translate"),l(),v(29,ls,7,5,"div",19)(30,ss,7,5,"div",19)(31,cs,7,7,"div",20),l()()()()()}i&2&&(r(),m("optionsInfoAreaId",e.constructorInfoAreaId),r(3),S(" ",e.formInfo.formTitle," "),r(2),S(" ",I(7,20,"TITLE.Be_Careful_When_Entering_Information")," "),r(6),R("label",I(13,22,"TITLE.REQUIRED_INFORMATION")),r(2),m("ngIf",e.fieldsInfo.recordStatus==null?null:e.fieldsInfo.recordStatus.accessWatchField),r(),m("optionSelectForce",e.dataModel.linkTicketingDepartemenId)("optionPlaceholder",I(16,24,"TITLE.Department"))("optionDisabled",!(e.fieldsInfo.linkTicketingDepartemenId!=null&&e.fieldsInfo.linkTicketingDepartemenId.accessAddField)),r(2),m("ngIf",e.fieldsInfo.fullName==null?null:e.fieldsInfo.fullName.accessWatchField),r(),m("ngIf",e.fieldsInfo.title==null?null:e.fieldsInfo.title.accessWatchField),r(),m("ngIf",e.fieldsInfo.phoneNo==null?null:e.fieldsInfo.phoneNo.accessWatchField),r(),m("ngIf",e.fieldsInfo.email==null?null:e.fieldsInfo.email.accessWatchField),r(),m("ngIf",e.fieldsInfo.htmlBody==null?null:e.fieldsInfo.htmlBody.accessWatchField),r(),m("ngIf",e.fieldsInfo.expireDate==null?null:e.fieldsInfo.expireDate.accessWatchField),r(),m("ngIf",e.formInfo.formSubmitAllow),r(),R("label",I(25,26,"TITLE.REST_OF_THE_INFORMATION")),r(3),w(I(28,28,"TITLE.Rest_of_Information")),r(2),m("ngIf",e.fieldsInfo.userIpAddress==null?null:e.fieldsInfo.userIpAddress.accessWatchField),r(),m("ngIf",e.fieldsInfo.deviceInformation==null?null:e.fieldsInfo.deviceInformation.accessWatchField),r(),m("ngIf",e.formInfo.formSubmitAllow))},dependencies:[G,Ce,oe,re,ge,Me,Ie,Te,fe,Se,Ai,xi,Di,ye,ei,Q,Ni,Oi,Gi,Pi,_e,j,Ge,H],encapsulation:2});let n=s;return n})();var ds=["vform"];function ps(n,s){if(n&1){let o=M();a(0,"app-cms-enum-record-status-selector",22),x("modelChange",function(i){f(o);let e=u();return A(e.dataModel.recordStatus,i)||(e.dataModel.recordStatus=i),h(i)}),l()}if(n&2){let o=u();y("model",o.dataModel.recordStatus),m("optionDisabled",!1)("optionLabel",o.fieldsInfo.recordStatus==null?null:o.fieldsInfo.recordStatus.fieldTitle)("optionRequired",!0)("optionSelectFirstItem",!0)}}function ms(n,s){n&1&&T(0,"i",29)}function us(n,s){n&1&&T(0,"i",30)}function fs(n,s){if(n&1&&(a(0,"mat-error"),d(1),a(2,"strong"),d(3),g(4,"translate"),l()()),n&2){let o=u(2);r(),S(" ",o.fieldsInfo.fullName==null?null:o.fieldsInfo.fullName.fieldTitle," is "),r(2),w(I(4,2,"MESSAGE.required"))}}function hs(n,s){if(n&1){let o=M();a(0,"div",23)(1,"label",24),d(2),l(),a(3,"input",25,2),x("ngModelChange",function(i){f(o);let e=u();return A(e.dataModel.fullName,i)||(e.dataModel.fullName=i),h(i)}),l(),v(5,ms,1,0,"i",26)(6,us,1,0,"i",27),a(7,"em"),d(8),l(),v(9,fs,5,4,"mat-error",28),l()}if(n&2){let o=D(4),t=u();r(2),w(t.fieldsInfo.fullName==null?null:t.fieldsInfo.fullName.fieldTitle),r(),R("placeholder",t.fieldsInfo.fullName==null?null:t.fieldsInfo.fullName.fieldTitle),y("ngModel",t.dataModel.fullName),m("disabled",!(t.fieldsInfo.fullName!=null&&t.fieldsInfo.fullName.accessEditField)),r(2),m("ngIf",!o.value),r(),m("ngIf",o.value),r(2),S("",o.value.length," / 100"),r(),m("ngIf",o.errors==null?null:o.errors.required)}}function _s(n,s){n&1&&T(0,"i",29)}function gs(n,s){n&1&&T(0,"i",30)}function Ss(n,s){if(n&1&&(a(0,"mat-error"),d(1),a(2,"strong"),d(3),g(4,"translate"),l()()),n&2){let o=u(2);r(),S(" ",o.fieldsInfo.title==null?null:o.fieldsInfo.title.fieldTitle," is "),r(2),w(I(4,2,"MESSAGE.required"))}}function Cs(n,s){if(n&1){let o=M();a(0,"div",23)(1,"label",31),d(2),l(),a(3,"input",32,3),x("ngModelChange",function(i){f(o);let e=u();return A(e.dataModel.title,i)||(e.dataModel.title=i),h(i)}),l(),v(5,_s,1,0,"i",26)(6,gs,1,0,"i",27),a(7,"em"),d(8),l(),v(9,Ss,5,4,"mat-error",28),l()}if(n&2){let o=D(4),t=u();r(2),w(t.fieldsInfo.title==null?null:t.fieldsInfo.title.fieldTitle),r(),R("placeholder",t.fieldsInfo.title==null?null:t.fieldsInfo.title.fieldTitle),y("ngModel",t.dataModel.title),m("disabled",!(t.fieldsInfo.title!=null&&t.fieldsInfo.title.accessEditField)),r(2),m("ngIf",!o.value),r(),m("ngIf",o.value),r(2),S("",o.value.length," / 100"),r(),m("ngIf",o.errors==null?null:o.errors.required)}}function Is(n,s){n&1&&T(0,"i",29)}function Ts(n,s){n&1&&T(0,"i",30)}function vs(n,s){if(n&1&&(a(0,"mat-error"),d(1),a(2,"strong"),d(3),g(4,"translate"),l()()),n&2){let o=u(2);r(),S(" ",o.fieldsInfo.phoneNo==null?null:o.fieldsInfo.phoneNo.fieldTitle," is "),r(2),w(I(4,2,"MESSAGE.required"))}}function bs(n,s){if(n&1){let o=M();a(0,"div",23)(1,"label",33),d(2),l(),a(3,"input",34,4),x("ngModelChange",function(i){f(o);let e=u();return A(e.dataModel.phoneNo,i)||(e.dataModel.phoneNo=i),h(i)}),l(),v(5,Is,1,0,"i",26)(6,Ts,1,0,"i",27),a(7,"em"),d(8),l(),v(9,vs,5,4,"mat-error",28),l()}if(n&2){let o=D(4),t=u();r(2),w(t.fieldsInfo.phoneNo==null?null:t.fieldsInfo.phoneNo.fieldTitle),r(),R("placeholder",t.fieldsInfo.phoneNo==null?null:t.fieldsInfo.phoneNo.fieldTitle),y("ngModel",t.dataModel.phoneNo),m("disabled",!(t.fieldsInfo.phoneNo!=null&&t.fieldsInfo.phoneNo.accessEditField)),r(2),m("ngIf",!o.value),r(),m("ngIf",o.value),r(2),S("",o.value.length," / 100"),r(),m("ngIf",o.errors==null?null:o.errors.required)}}function ws(n,s){n&1&&T(0,"i",29)}function Ms(n,s){n&1&&T(0,"i",30)}function ks(n,s){if(n&1&&(a(0,"mat-error"),d(1),a(2,"strong"),d(3),g(4,"translate"),l()()),n&2){let o=u(2);r(),S(" ",o.fieldsInfo.email==null?null:o.fieldsInfo.email.fieldTitle," is "),r(2),w(I(4,2,"MESSAGE.required"))}}function Es(n,s){if(n&1){let o=M();a(0,"div",23)(1,"label",35),d(2),l(),a(3,"input",36,5),x("ngModelChange",function(i){f(o);let e=u();return A(e.dataModel.email,i)||(e.dataModel.email=i),h(i)}),l(),v(5,ws,1,0,"i",26)(6,Ms,1,0,"i",27),a(7,"em"),d(8),l(),v(9,ks,5,4,"mat-error",28),l()}if(n&2){let o=D(4),t=u();r(2),w(t.fieldsInfo.email==null?null:t.fieldsInfo.email.fieldTitle),r(),R("placeholder",t.fieldsInfo.email==null?null:t.fieldsInfo.email.fieldTitle),y("ngModel",t.dataModel.email),m("disabled",!(t.fieldsInfo.email!=null&&t.fieldsInfo.email.accessEditField)),r(2),m("ngIf",!o.value),r(),m("ngIf",o.value),r(2),S("",o.value.length," / 100"),r(),m("ngIf",o.errors==null?null:o.errors.required)}}function ys(n,s){if(n&1){let o=M();a(0,"div",23)(1,"label",37),d(2),g(3,"translate"),l(),a(4,"textarea",38,6),g(6,"translate"),x("ngModelChange",function(i){f(o);let e=u();return A(e.dataModel.htmlBody,i)||(e.dataModel.htmlBody=i),h(i)}),d(7,"                        "),l(),a(8,"em"),d(9),l()()}if(n&2){let o=D(5),t=u();r(2),w(I(3,5,"TITLE.Description")),r(2),R("placeholder",I(6,7,"TITLE.Description")),y("ngModel",t.dataModel.htmlBody),m("disabled",!(t.fieldsInfo.htmlBody!=null&&t.fieldsInfo.htmlBody.accessEditField)),r(5),S("",o.value.length," / 1000")}}function As(n,s){if(n&1){let o=M();a(0,"div",23)(1,"label",39),d(2),l(),a(3,"input",40),x("ngModelChange",function(i){f(o);let e=u();return A(e.dataModel.expireDate,i)||(e.dataModel.expireDate=i),h(i)}),l(),T(4,"mat-datepicker-toggle",41)(5,"mat-datepicker",42,7),l()}if(n&2){let o=D(6),t=u();r(2),w(t.fieldsInfo.expireDate==null?null:t.fieldsInfo.expireDate.fieldTitle),r(),m("matDatepicker",o),y("ngModel",t.dataModel.expireDate),r(),m("for",o)}}function xs(n,s){if(n&1){let o=M();a(0,"div",43)(1,"button",44),b("click",function(){f(o);let i=u();return h(i.onActionBackToParent())}),d(2),g(3,"translate"),l(),a(4,"button",45),d(5),g(6,"translate"),l()()}if(n&2){u();let o=D(9);r(2),S(" ",I(3,3,"ACTION.BACK")," "),r(2),m("disabled",!o.form.valid),r(),S(" ",I(6,5,"ACTION.NEXT")," ")}}function Ds(n,s){if(n&1){let o=M();a(0,"div",23)(1,"label",46),d(2),l(),a(3,"input",47,8),x("ngModelChange",function(i){f(o);let e=u();return A(e.dataModel.userIpAddress,i)||(e.dataModel.userIpAddress=i),h(i)}),l(),a(5,"em"),d(6),l()()}if(n&2){let o=D(4),t=u();r(2),w(t.fieldsInfo.userIpAddress==null?null:t.fieldsInfo.userIpAddress.fieldTitle),r(),R("placeholder",t.fieldsInfo.userIpAddress==null?null:t.fieldsInfo.userIpAddress.fieldTitle),y("ngModel",t.dataModel.userIpAddress),m("disabled",!(t.fieldsInfo.userIpAddress!=null&&t.fieldsInfo.userIpAddress.accessEditField)),r(3),S("",o.value.length," / 100")}}function Rs(n,s){if(n&1){let o=M();a(0,"div",23)(1,"label",48),d(2),l(),a(3,"input",49,9),x("ngModelChange",function(i){f(o);let e=u();return A(e.dataModel.deviceInformation,i)||(e.dataModel.deviceInformation=i),h(i)}),l(),a(5,"em"),d(6),l()()}if(n&2){let o=D(4),t=u();r(2),w(t.fieldsInfo.userIpAddress==null?null:t.fieldsInfo.userIpAddress.fieldTitle),r(),R("placeholder",t.fieldsInfo.deviceInformation==null?null:t.fieldsInfo.deviceInformation.fieldTitle),y("ngModel",t.dataModel.deviceInformation),m("disabled",!(t.fieldsInfo.deviceInformation!=null&&t.fieldsInfo.deviceInformation.accessEditField)),r(3),S("",o.value.length," / 100")}}function Ls(n,s){if(n&1&&(a(0,"div",43)(1,"button",50),d(2),g(3,"translate"),l(),a(4,"button",51),d(5),g(6,"translate"),l()()),n&2){u();let o=D(9);r(2),S(" ",I(3,3,"ACTION.BEFOR")," "),r(2),m("disabled",!o.form.valid),r(),S(" ",I(6,5,"ACTION.SAVE")," ")}}var Kn=(()=>{let s=class s extends Tt{constructor(t,i,e,c,C,p,V,B,J,$){super(p,new Fe,c,$),this.data=t,this.activatedRoute=i,this.dialogRef=e,this.publicHelper=c,this.coreEnumService=C,this.ticketingTaskService=p,this.cmsToastrService=V,this.router=B,this.cdr=J,this.translate=$,this.requestId=0,this.constructorInfoAreaId=this.constructor.name,this.formInfo=new ae,this.dataModel=new Fe,this.dataModelResult=new St,this.selectFileTypeMainImage=["jpg","jpeg","png"],this.fileManagerOpenForm=!1,this.appLanguage="fa",this.mapOptonCenter=new It,this.publicHelper.processService.cdr=this.cdr,this.fileManagerTree=this.publicHelper.GetfileManagerTreeConfig(),t&&(this.requestId=+t.id||0)}ngOnInit(){if(this.requestId===0){this.cmsToastrService.typeErrorAddRowParentIsNull(),this.dialogRef.close({dialogChangedDate:!1});return}this.DataGetOne(this.requestId)}onFormSubmit(){if(!this.formGroup.valid){this.cmsToastrService.typeErrorFormInvalid();return}this.DataEditContent()}DataGetOne(t){this.formInfo.formSubmitAllow=!1,this.translate.get("MESSAGE.get_information_from_the_server").subscribe(e=>{this.formInfo.formAlert=e}),this.formInfo.formError="";let i=this.constructor.name+"main";this.translate.get("MESSAGE.Receiving_information").subscribe(e=>{this.publicHelper.processService.processStart(i,e,this.constructorInfoAreaId)}),this.ticketingTaskService.setAccessLoad(),this.ticketingTaskService.setAccessDataType(gt.Editor),this.ticketingTaskService.ServiceGetOneById(t).subscribe({next:e=>{this.dataAccessModel=e.access,this.fieldsInfo=this.publicHelper.fieldInfoConvertor(e.access),this.publicHelper.processService.processStop(i),this.dataModelResult=e,this.formInfo.formSubmitAllow=!0,e.isSuccess?(this.dataModel=e.item,this.ticketingTaskService.ServiceTaskReaded(t).subscribe({next:c=>{},error:c=>{this.cmsToastrService.typeErrorGetOne(c)}})):this.cmsToastrService.typeErrorGetOne(e.errorMessage)},error:e=>{this.publicHelper.processService.processStop(i),this.formInfo.formSubmitAllow=!0,this.cmsToastrService.typeErrorGetOne(e)}})}DataEditContent(){this.formInfo.formSubmitAllow=!1,this.translate.get("MESSAGE.sending_information_to_the_server").subscribe(i=>{this.formInfo.formAlert=i}),this.formInfo.formError="";let t=this.constructor.name+"main";this.translate.get("MESSAGE.sending_information_to_the_server").subscribe(i=>{this.publicHelper.processService.processStart(t,i,this.constructorInfoAreaId)}),this.ticketingTaskService.ServiceEdit(this.dataModel).subscribe({next:i=>{this.formInfo.formSubmitAllow=!i.isSuccess,this.dataModelResult=i,i.isSuccess?(this.translate.get("MESSAGE.registration_completed_successfully").subscribe(e=>{this.formInfo.formAlert=e}),this.cmsToastrService.typeSuccessEdit(),setTimeout(()=>{this.dialogRef.close({dialogChangedDate:!0})},1e3)):this.cmsToastrService.typeErrorEdit(i.errorMessage),this.publicHelper.processService.processStop(t)},error:i=>{this.publicHelper.processService.processStop(t),this.formInfo.formSubmitAllow=!0,this.cmsToastrService.typeErrorEdit(i)}})}onStepClick(t,i){t.previouslySelectedIndex<t.selectedIndex}onActionBackToParent(){this.dialogRef.close({dialogChangedDate:!1})}onActionFileSelectedLinkMainImageId(){}onActionSelectSource(t){if(!t||t.id<=0){this.cmsToastrService.typeErrorMessage(this.translate.instant("MESSAGE.Specify_the_source"),this.translate.instant("MESSAGE.The_source_of_the_information_application_is_not_known"));return}}};s.\u0275fac=function(i){return new(i||s)(_(he),_(ve),_(de),_(L),_(K),_(Ne),_(N),_(ce),_(O),_(P))},s.\u0275cmp=F({type:s,selectors:[["app-ticketing-task-edit"]],viewQuery:function(i,e){if(i&1&&te(ds,5),i&2){let c;ie(c=ne())&&(e.formGroup=c.first)}},features:[U],decls:32,vars:30,consts:[["vform","ngForm"],["stepper",""],["FullName",""],["Title",""],["PhoneNo",""],["Email",""],["HtmlBody",""],["ExpireDate",""],["UserIpAddress",""],["DeviceInformation",""],[1,"card","card-style","loader-container"],[3,"optionsInfoAreaId"],[1,"content","mb-0"],[1,"mb-0","color-highlight","font-600","font-12"],[3,"ngSubmit"],[3,"selectionChange"],["state","main",3,"label"],[3,"model","optionDisabled","optionLabel","optionRequired","optionSelectFirstItem","modelChange",4,"ngIf"],[3,"optionChange","optionSelectForce","optionPlaceholder","optionDisabled"],["class","input-style has-borders no-icon input-style-always-active validate-field mb-4",4,"ngIf"],["class","form-actions",4,"ngIf"],["state","seo",3,"label"],[3,"modelChange","model","optionDisabled","optionLabel","optionRequired","optionSelectFirstItem"],[1,"input-style","has-borders","no-icon","input-style-always-active","validate-field","mb-4"],["for","dataModel.fullName",1,"color-highlight"],["matInput","","type","text","name","dataModel.fullName","minlength","3","maxlength","1000","required","","id","dataModel.fullName",1,"form-control","validate-name",3,"ngModelChange","ngModel","placeholder","disabled"],["class","fa fa-times  invalid color-red-dark",4,"ngIf"],["class","fa fa-check  valid color-green-dark",4,"ngIf"],[4,"ngIf"],[1,"fa","fa-times","invalid","color-red-dark"],[1,"fa","fa-check","valid","color-green-dark"],["for","dataModel.title",1,"color-highlight"],["matInput","","type","text","name","dataModel.title","type","text","minlength","3","maxlength","100","required","","id","dataModel.title",1,"form-control","validate-name",3,"ngModelChange","ngModel","placeholder","disabled"],["for","dataModel.phoneNo",1,"color-highlight"],["matInput","","type","text","name","dataModel.phoneNo","type","text","minlength","3","maxlength","100","required","","id","dataModel.phoneNo",1,"form-control","validate-name",3,"ngModelChange","ngModel","placeholder","disabled"],["for","dataModel.email",1,"color-highlight"],["matInput","","type","text","name","dataModel.email","type","text","minlength","3","maxlength","100","required","","id","dataModel.email",1,"form-control","validate-name",3,"ngModelChange","ngModel","placeholder","disabled"],["for","dataModel.htmlBody",1,"color-highlight"],["matInput","","name","dataModel.htmlBody","type","text","minlength","0","maxlength","1000","rows","5","id","dataModel.htmlBody",1,"form-control","validate-name",3,"ngModelChange","ngModel","placeholder","disabled"],["for","dataModel.expireDate",1,"color-highlight"],["matInput","","type","text","name","dataModel.expireDate","type","text","id","dataModel.expireDate",1,"form-control","validate-name",3,"ngModelChange","matDatepicker","ngModel"],["matSuffix","",3,"for"],["touchUi",""],[1,"form-actions"],["type","button",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-gray",3,"click"],["type","button","matStepperNext","",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-blue",3,"disabled"],["for","dataModel.userIpAddress",1,"color-highlight"],["matInput","","type","text","name","dataModel.userIpAddress","type","text","minlength","0","maxlength","100","id","dataModel.userIpAddress",1,"form-control","validate-name",3,"ngModelChange","ngModel","placeholder","disabled"],["for","dataModel.deviceInformation",1,"color-highlight"],["matInput","","type","text","name","dataModel.deviceInformation","type","text","minlength","0","maxlength","100","id","dataModel.deviceInformation",1,"form-control","validate-name",3,"ngModelChange","ngModel","placeholder","disabled"],["type","button","matStepperPrevious","",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-blue"],["type","submit",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-green",3,"disabled"]],template:function(i,e){if(i&1){let c=M();a(0,"div",10),T(1,"app-progress-spinner",11),a(2,"div",12)(3,"p",13),d(4),l(),a(5,"p"),d(6),g(7,"translate"),l(),a(8,"form",14,0),b("ngSubmit",function(){return f(c),h(e.onFormSubmit())}),a(10,"mat-horizontal-stepper",15,1),b("selectionChange",function(p){f(c);let V=D(11);return h(e.onStepClick(p,V))}),a(12,"mat-step",16),g(13,"translate"),v(14,ps,1,5,"app-cms-enum-record-status-selector",17),a(15,"app-ticketing-departemen-selector",18),g(16,"translate"),b("optionChange",function(p){return f(c),h(e.onActionSelectSource(p))}),l(),v(17,hs,10,8,"div",19)(18,Cs,10,8,"div",19)(19,bs,10,8,"div",19)(20,Es,10,8,"div",19)(21,ys,10,9,"div",19)(22,As,7,4,"div",19)(23,xs,7,7,"div",20),l(),a(24,"mat-step",21),g(25,"translate"),a(26,"p"),d(27),g(28,"translate"),l(),v(29,Ds,7,5,"div",19)(30,Rs,7,5,"div",19)(31,Ls,7,7,"div",20),l()()()()()}i&2&&(r(),m("optionsInfoAreaId",e.constructorInfoAreaId),r(3),S(" ",e.formInfo.formTitle," "),r(2),S(" ",I(7,20,"TITLE.Be_Careful_When_Entering_Information")," "),r(6),R("label",I(13,22,"TITLE.REQUIRED_INFORMATION")),r(2),m("ngIf",e.fieldsInfo.recordStatus==null?null:e.fieldsInfo.recordStatus.accessWatchField),r(),m("optionSelectForce",e.dataModel.linkTicketingDepartemenId)("optionPlaceholder",I(16,24,"TITLE.Department"))("optionDisabled",!(e.fieldsInfo.linkTicketingDepartemenId!=null&&e.fieldsInfo.linkTicketingDepartemenId.accessEditField)),r(2),m("ngIf",e.fieldsInfo.fullName==null?null:e.fieldsInfo.fullName.accessWatchField),r(),m("ngIf",e.fieldsInfo.title==null?null:e.fieldsInfo.title.accessWatchField),r(),m("ngIf",e.fieldsInfo.phoneNo==null?null:e.fieldsInfo.phoneNo.accessWatchField),r(),m("ngIf",e.fieldsInfo.email==null?null:e.fieldsInfo.email.accessWatchField),r(),m("ngIf",e.fieldsInfo.htmlBody==null?null:e.fieldsInfo.htmlBody.accessWatchField),r(),m("ngIf",e.fieldsInfo.expireDate==null?null:e.fieldsInfo.expireDate.accessWatchField),r(),m("ngIf",e.formInfo.formSubmitAllow),r(),R("label",I(25,26,"TITLE.REST_OF_THE_INFORMATION")),r(3),w(I(28,28,"TITLE.Rest_of_Information")),r(2),m("ngIf",e.fieldsInfo.userIpAddress==null?null:e.fieldsInfo.userIpAddress.accessWatchField),r(),m("ngIf",e.fieldsInfo.deviceInformation==null?null:e.fieldsInfo.deviceInformation.accessWatchField),r(),m("ngIf",e.formInfo.formSubmitAllow))},dependencies:[G,Ce,oe,re,ge,Me,Ie,Te,fe,Se,Ai,xi,Di,ye,ei,Q,Ni,Oi,Gi,Pi,_e,j,Ge,H]});let n=s;return n})();var Vs=()=>[5,10,20,100],Bs=n=>({background:n});function Fs(n,s){if(n&1){let o=M();a(0,"a",40),b("click",function(){f(o);let i=u();return h(i.onActionBackToParent())}),T(1,"i",41),l()}}function Ns(n,s){if(n&1){let o=M();a(0,"div",42)(1,"a",43),b("click",function(){f(o);let i=u();return h(i.onActionButtonNewRow())}),T(2,"i",44)(3,"br"),l(),a(4,"p",45),d(5),g(6,"translate"),l()()}n&2&&(r(5),w(I(6,1,"ACTION.ADD")))}function Os(n,s){if(n&1){let o=M();a(0,"div",42)(1,"a",10),b("click",function(){f(o);let i=u();return h(i.onActionButtonAnswerList())}),T(2,"i",46)(3,"br"),l(),a(4,"p",45),d(5),g(6,"translate"),l()()}n&2&&(r(5),w(I(6,1,"ACTION.ANSWERS")))}function Gs(n,s){if(n&1){let o=M();a(0,"div",42)(1,"a",47),b("click",function(){f(o);let i=u();return h(i.onActionButtonEditRow(i.tableRowSelected))}),T(2,"i",48)(3,"br"),l(),a(4,"p",45),d(5),g(6,"translate"),l()()}n&2&&(r(5),w(I(6,1,"ACTION.EDIT")))}function Ps(n,s){if(n&1){let o=M();a(0,"div",42)(1,"a",49),b("click",function(){f(o);let i=u();return h(i.onActionButtonDeleteRow(i.tableRowSelected))}),T(2,"i",50)(3,"br"),l(),a(4,"p",45),d(5),g(6,"translate"),l()()}n&2&&(r(5),w(I(6,1,"ACTION.DELETE")))}function Hs(n,s){if(n&1){let o=M();a(0,"div",42)(1,"a",51),b("click",function(){f(o);let i=u();return h(i.onActionButtonAnswerList(i.tableRowSelected))}),T(2,"i",46)(3,"br"),l(),a(4,"p",45),d(5),g(6,"translate"),l()()}n&2&&(r(5),w(I(6,1,"ACTION.ANSWERS")))}function qs(n,s){if(n&1){let o=M();a(0,"div",42)(1,"a",52),b("click",function(){f(o);let i=u();return h(i.onActionButtonViewRow(i.tableRowSelected))}),T(2,"i",53)(3,"br"),l(),a(4,"p",45),d(5),g(6,"translate"),l()()}n&2&&(r(5),w(I(6,1,"ACTION.VIEW")))}function js(n,s){if(n&1&&(a(0,"mat-header-cell",54),d(1),l()),n&2){let o=u();r(),S(" ",o.fieldsInfo.id==null?null:o.fieldsInfo.id.fieldTitle," ")}}function Ws(n,s){if(n&1&&(a(0,"mat-cell"),d(1),l()),n&2){let o=s.$implicit;r(),S(" ",o.id," ")}}function Us(n,s){if(n&1&&(a(0,"mat-header-cell",54),d(1),l()),n&2){let o=u();r(),S(" ",o.fieldsInfo.linkSiteId==null?null:o.fieldsInfo.linkSiteId.fieldTitle," ")}}function Qs(n,s){if(n&1&&(a(0,"mat-cell"),d(1),g(2,"cmssiteinfo"),g(3,"async"),l()),n&2){let o=s.$implicit;r(),S(" ",I(3,3,I(2,1,o.linkSiteId))," ")}}function zs(n,s){if(n&1&&(a(0,"mat-header-cell",54),d(1),l()),n&2){let o=u();r(),S(" ",o.fieldsInfo.linkMemberId==null?null:o.fieldsInfo.linkMemberId.fieldTitle," ")}}function Ks(n,s){if(n&1&&(a(0,"mat-cell"),d(1),l()),n&2){let o=s.$implicit;r(),S(" ",o.linkMemberId," ")}}function Js(n,s){if(n&1&&(a(0,"mat-header-cell",54),d(1),l()),n&2){let o=u();r(),S(" ",o.fieldsInfo.title==null?null:o.fieldsInfo.title.fieldTitle," ")}}function Xs(n,s){if(n&1&&(a(0,"mat-cell"),d(1),l()),n&2){let o=s.$implicit;r(),S(" ",o.title," ")}}function Ys(n,s){if(n&1&&(a(0,"mat-header-cell",54),d(1),l()),n&2){let o=u();r(),S(" ",o.fieldsInfo.createdDate==null?null:o.fieldsInfo.createdDate.fieldTitle," ")}}function Zs(n,s){if(n&1&&(a(0,"mat-cell"),d(1),l()),n&2){let o=s.$implicit,t=u();r(),S(" ",t.publicHelper.LocaleDate(o.createdDate)," ")}}function $s(n,s){if(n&1&&(a(0,"mat-header-cell",54),d(1),l()),n&2){let o=u();r(),S(" ",o.fieldsInfo.updatedDate==null?null:o.fieldsInfo.updatedDate.fieldTitle," ")}}function ec(n,s){if(n&1&&(a(0,"mat-cell"),d(1),l()),n&2){let o=s.$implicit,t=u();r(),S(" ",t.publicHelper.LocaleDate(o.updatedDate)," ")}}function tc(n,s){if(n&1&&(a(0,"mat-header-cell",54),d(1),l()),n&2){let o=u();r(),S(" ",o.fieldsInfo.ticketStatus==null?null:o.fieldsInfo.ticketStatus.fieldTitle," ")}}function ic(n,s){if(n&1&&(a(0,"mat-cell",55),d(1),g(2,"enums"),l()),n&2){let o=s.$implicit,t=u();m("ngStyle",ze(5,Bs,t.publicHelper.RowStyleTicketStatus(o.ticketStatus))),r(),S(" ",Zt(2,2,o.ticketStatus,t.dataModelEnumTicketStatusResult.listItems)," ")}}function nc(n,s){n&1&&(a(0,"mat-header-cell"),d(1),g(2,"translate"),l()),n&2&&(r(),S(" ",I(2,1,"TITLE.OPTION")," "))}function oc(n,s){if(n&1&&(a(0,"mat-cell",56)(1,"button",57)(2,"mat-icon"),d(3,"more_vert"),l()(),T(4,"mat-menu",null,2),l()),n&2){let o=D(5);r(),m("matMenuTriggerFor",o)}}function rc(n,s){n&1&&T(0,"mat-header-row")}function ac(n,s){if(n&1){let o=M();a(0,"mat-row",58),b("click",function(){let i=f(o).$implicit,e=u();return h(e.onActionTableRowSelect(i))}),l()}if(n&2){let o=s.$implicit,t=s.dataIndex,i=u();ke("ntk-row-odd",t%2)("ntk-row-even",!(t%2))("ntk-row-selected",o.id===(i.tableRowSelected==null?null:i.tableRowSelected.id))}}var fi=(()=>{let s=class s extends We{constructor(t,i,e,c,C,p,V,B,J,$,De,Wt){super(t,new Fe,De,p,B),this.contentService=t,this.activatedRoute=i,this.cmsToastrService=e,this.cmsConfirmationDialogService=c,this.router=C,this.tokenHelper=p,this.cdr=V,this.translate=B,this.ticketingEnumService=J,this.pageInfo=$,this.publicHelper=De,this.dialog=Wt,this.requestDepartemenId=0,this.requestLinkCmsUserId=0,this.requestTicketStatus=-1,this.constructorInfoAreaId=this.constructor.name,this.flag=!1,this.tableContentSelected=[],this.filteModelContent=new Y,this.dataModelEnumTicketStatusResult=new z,this.tabledisplayedColumns=[],this.tabledisplayedColumnsSource=["LinkMemberId","CreatedDate","UpdatedDate","TicketStatus"],this.tabledisplayedColumnsMobileSource=["LinkMemberId","CreatedDate","UpdatedDate","TicketStatus"],this.publicHelper.processService.cdr=this.cdr,this.optionsSearch.parentMethods={onSubmit:Ji=>this.onSubmitOptionsSearch(Ji)},this.filteModelContent.sortColumn="Id",this.filteModelContent.sortType=W.Descending}ngOnInit(){this.requestDepartemenId=+Number(this.activatedRoute.snapshot.paramMap.get("DepartemenId")),this.requestLinkCmsUserId=+Number(this.activatedRoute.snapshot.paramMap.get("LinkCmsUserId")),this.activatedRoute.snapshot.paramMap.get("TicketStatus")&&(this.requestTicketStatus=+Number(this.activatedRoute.snapshot.paramMap.get("TicketStatus"))),this.tokenHelper.getTokenInfoState().then(t=>{this.tokenInfo=t,setTimeout(()=>{this.firstLoadDataRunned||this.DataGetAll()},500)}),this.cmsApiStoreSubscribe=this.tokenHelper.getTokenInfoStateOnChange().subscribe({next:t=>{this.getEnumTicketStatus(),this.tokenInfo=t,this.DataGetAll()}}),this.getEnumTicketStatus()}ngOnDestroy(){this.cmsApiStoreSubscribe.unsubscribe()}getEnumTicketStatus(){this.ticketingEnumService.ServiceTicketStatusEnum().subscribe({next:t=>{this.dataModelEnumTicketStatusResult=t}})}DataGetAll(){this.tabledisplayedColumns=this.publicHelper.TableDisplayedColumns(this.tabledisplayedColumnsSource,this.tabledisplayedColumnsMobileSource,[],this.tokenInfo),this.tableRowsSelected=[],this.onActionTableRowSelect(new Fe);let t=this.constructor.name+"main";this.translate.get("MESSAGE.get_information_list").subscribe(c=>{this.publicHelper.processService.processStart(t,c,this.constructorInfoAreaId)}),this.filteModelContent.accessLoad=!0;let i=JSON.parse(JSON.stringify(this.filteModelContent)),e=new X;this.requestDepartemenId>0&&(e.propertyName="LinkTicketingDepartemenId",e.value=this.requestDepartemenId,i.filters.push(e)),this.categoryModelSelected&&this.categoryModelSelected.id>0&&(e.propertyName="LinkTicketingDepartemenId",e.value=this.categoryModelSelected.id,i.filters.push(e)),this.requestLinkCmsUserId>0&&(e.propertyName="LinkCmsUserId",e.value=this.requestLinkCmsUserId,i.filters.push(e)),this.requestTicketStatus>=0&&(e.propertyName="TicketStatus",e.value=this.requestTicketStatus,i.filters.push(e)),this.contentService.ServiceGetAll(i).subscribe({next:c=>{this.fieldsInfo=this.publicHelper.fieldInfoConvertor(c.access),c.isSuccess?(this.dataModelResult=c,this.tableSource.data=c.listItems,this.optionsStatist?.data?.show&&this.onActionButtonStatist(!0),setTimeout(()=>{this.optionsSearch.childMethods&&this.optionsSearch.childMethods.setAccess(c.access)},1e3)):this.cmsToastrService.typeErrorGetAll(c.errorMessage),this.publicHelper.processService.processStop(t)},error:c=>{this.cmsToastrService.typeError(c),this.publicHelper.processService.processStop(t,!1)}})}onTableSortData(t){this.tableSource&&this.tableSource.sort&&this.tableSource.sort.active===t.active?this.tableSource.sort.start==="asc"?(t.start="desc",this.filteModelContent.sortColumn=t.active,this.filteModelContent.sortType=W.Descending):this.tableSource.sort.start==="desc"?(t.start="asc",this.filteModelContent.sortColumn="",this.filteModelContent.sortType=W.Ascending):t.start="desc":(this.filteModelContent.sortColumn=t.active,this.filteModelContent.sortType=W.Descending),this.tableSource.sort=t,this.filteModelContent.currentPageNumber=0,this.DataGetAll()}onTablePageingData(t){this.filteModelContent.currentPageNumber=t.pageIndex+1,this.filteModelContent.rowPerPage=t.pageSize,this.DataGetAll()}onActionButtonNewRow(){if(this.categoryModelSelected==null&&this.categoryModelSelected&&this.categoryModelSelected.id===0&&(this.requestDepartemenId==null||this.requestDepartemenId===0)){this.translate.get("MESSAGE.Content_not_selected").subscribe(c=>{this.cmsToastrService.typeErrorSelected(c)});return}let t=this.requestDepartemenId;this.categoryModelSelected&&this.categoryModelSelected.id>0&&(t=this.categoryModelSelected.id);var i="";this.tokenHelper.isMobile?i="dialog-fullscreen":i="dialog-min",this.dialog.open(zn,{height:"90%",panelClass:i,enterAnimationDuration:q.cmsViewConfig.enterAnimationDuration,exitAnimationDuration:q.cmsViewConfig.exitAnimationDuration,data:{linkDepartemenId:t}}).afterClosed().subscribe(c=>{c&&c.dialogChangedDate&&this.DataGetAll()})}onActionButtonViewRow(t=this.tableRowSelected){if(!t||!t.id||t.id===0){this.cmsToastrService.typeErrorSelectedRow();return}this.tableRowSelected=t;var i="";this.tokenHelper.isMobile?i="dialog-fullscreen":i="dialog-min",this.dialog.open(Ki,{height:"90%",panelClass:i,enterAnimationDuration:q.cmsViewConfig.enterAnimationDuration,exitAnimationDuration:q.cmsViewConfig.exitAnimationDuration,data:{id:this.tableRowSelected.id}}).afterClosed().subscribe(c=>{c&&c.dialogChangedDate})}onActionSelectorSelect(t){var i=this.filteModelContent.sortColumn,e=this.filteModelContent.sortType;this.filteModelContent=new Y,this.filteModelContent.sortColumn=i,this.filteModelContent.sortType=e,this.categoryModelSelected=t,this.DataGetAll()}onActionButtonEditRow(t=this.tableRowSelected){if(!t||!t.id||t.id===0){this.cmsToastrService.typeErrorSelectedRow();return}if(this.tableRowSelected=t,this.dataModelResult==null||this.dataModelResult.access==null||!this.dataModelResult.access.accessEditRow){this.cmsToastrService.typeErrorAccessEdit();return}var i="";this.tokenHelper.isMobile?i="dialog-fullscreen":i="dialog-min",this.dialog.open(Kn,{height:"90%",panelClass:i,enterAnimationDuration:q.cmsViewConfig.enterAnimationDuration,exitAnimationDuration:q.cmsViewConfig.exitAnimationDuration,data:{id:this.tableRowSelected.id}}).afterClosed().subscribe(c=>{c&&c.dialogChangedDate&&this.DataGetAll()})}onActionButtonAnswerList(t=this.tableRowSelected){if(!t||!t.id||t.id===0){this.cmsToastrService.typeErrorSelectedRow();return}if(this.tableRowSelected=t,this.dataModelResult==null||this.dataModelResult.access==null||!this.dataModelResult.access.accessWatchRow){this.cmsToastrService.typeErrorAccessWatch();return}this.router.navigate(["/ticketing/answer/LinkTaskId/",this.tableRowSelected.id])}onActionButtonDeleteRow(t=this.tableRowSelected){if(t==null||!t.id||t.id===0){this.translate.get("MESSAGE.no_row_selected_to_delete").subscribe(c=>{this.cmsToastrService.typeErrorSelected(c)});return}if(this.tableRowSelected=t,this.dataModelResult==null||this.dataModelResult.access==null||!this.dataModelResult.access.accessDeleteRow){this.cmsToastrService.typeErrorAccessDelete();return}var i="",e="";this.translate.get(["MESSAGE.Please_Confirm","MESSAGE.Do_you_want_to_delete_this_content"]).subscribe(c=>{i=c["MESSAGE.Please_Confirm"],e=c["MESSAGE.Do_you_want_to_delete_this_content"]+"?<br> ( "+this.tableRowSelected.title+" ) "}),this.cmsConfirmationDialogService.confirm(i,e).then(c=>{if(c){let C=this.constructor.name+"main";this.translate.get("MESSAGE.Receiving_information").subscribe(p=>{this.publicHelper.processService.processStart(C,p,this.constructorInfoAreaId)}),this.contentService.ServiceDelete(this.tableRowSelected.id).subscribe({next:p=>{p.isSuccess?this.cmsToastrService.typeSuccessRemove():this.cmsToastrService.typeErrorRemove(),this.publicHelper.processService.processStop(C)},error:p=>{this.cmsToastrService.typeError(p),this.publicHelper.processService.processStop(C,!1)}})}}).catch(()=>{})}onActionButtonStatist(t=!this.optionsStatist.data.show){if(this.optionsStatist.data.show=t,!this.optionsStatist.data.show)return;let i=new Map;this.translate.get("MESSAGE.Active").subscribe(p=>{i.set(p,0)}),this.translate.get("MESSAGE.All").subscribe(p=>{i.set(p,0)});let e=this.constructor.name+".ServiceStatist";this.translate.get("MESSAGE.Get_the_statist").subscribe(p=>{this.publicHelper.processService.processStart(e,p,this.constructorInfoAreaId)}),this.contentService.ServiceGetCount(this.filteModelContent).subscribe({next:p=>{p.isSuccess&&(this.translate.get("MESSAGE.All").subscribe(V=>{i.set(V,p.totalRowCount)}),this.optionsStatist.childMethods.setStatistValue(i)),this.publicHelper.processService.processStop(e)},error:p=>{this.cmsToastrService.typeError(p),this.publicHelper.processService.processStop(e,!1)}});let c=JSON.parse(JSON.stringify(this.filteModelContent)),C=new X;C.propertyName="RecordStatus",C.value=Je.Available,c.filters.push(C),this.contentService.ServiceGetCount(c).subscribe({next:p=>{p.isSuccess&&(this.translate.get("MESSAGE.Active").subscribe(V=>{i.set(V,p.totalRowCount)}),this.optionsStatist.childMethods.setStatistValue(i)),this.publicHelper.processService.processStop(e)},error:p=>{this.cmsToastrService.typeError(p),this.publicHelper.processService.processStop(e,!1)}})}onActionButtonReload(){this.requestTicketStatus=-1,this.DataGetAll()}onSubmitOptionsSearch(t){this.filteModelContent.filters=t,this.DataGetAll()}onActionBackToParent(){this.router.navigate(["/ticketing/departemen/"])}};s.\u0275fac=function(i){return new(i||s)(_(Ne),_(ve),_(N),_(Rt),_(ce),_(ee),_(O),_(P),_(Pt),_(Pe),_(L),_(Ae))},s.\u0275cmp=F({type:s,selectors:[["app-ticketing-task-list"]],features:[U],decls:63,vars:32,consts:[["tableSort","matSort"],["paginator",""],["actionMenu","matMenu"],[3,"optionActionGuideNoticeDisplayChange","optionOnActionButtonMemoRow","optionOnActionButtonMemo","optionOnActionButtonExport","optionOnActionButtonPrintRow","optionsListInfoAreaId","optionGuideNoticeKey","optionActionGuideNoticeDisplay","optionTreeDisplay","optionActionRowId","optionActionRowDisplayMenu","optionSelectRowItemTitle"],["cms-tree",""],[3,"optionChange"],["cms-header",""],["cms-action-header",""],["cms-action-header-start",""],["type","button","class","btn font-13 font-600 btn-s m-1 rounded-s shadow-xl border-0 gradient-gray","target","_blank",3,"click",4,"ngIf"],["type","button","target","_blank",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-highlight",3,"click"],[1,"fa-solid","fa-info","font-18",2,"color","#ffffff"],[1,"fa-solid","fa-rotate-right","font-18",2,"color","#ffffff"],["cms-action-header-end",""],[1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-highlight",3,"click"],[3,"checked"],["cms-action-main",""],["class","col-4",4,"ngIf"],["cms-action-row",""],["cms-action-area",""],[3,"optionsChange","options"],["cms-body",""],["matSort","",3,"matSortChange","dataSource"],["matColumnDef","Id"],["mat-sort-header","",4,"matHeaderCellDef"],[4,"matCellDef"],["matColumnDef","LinkSiteId"],["matColumnDef","LinkMemberId"],["matColumnDef","Title"],["matColumnDef","CreatedDate"],["matColumnDef","UpdatedDate"],["matColumnDef","TicketStatus"],[3,"ngStyle",4,"matCellDef"],["matColumnDef","Action"],[4,"matHeaderCellDef"],["class"," Action",4,"matCellDef"],[4,"matHeaderRowDef"],[3,"ntk-row-odd","ntk-row-even","ntk-row-selected","click",4,"matRowDef","matRowDefColumns"],["cms-footer",""],[3,"page","length","pageIndex","pageSize","pageSizeOptions"],["type","button","target","_blank",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-gray",3,"click"],[1,"fa-solid","fa-arrow-left","font-18",2,"color","#ffffff"],[1,"col-4"],["type","button","target","_blank",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-teal",3,"click"],[1,"fa-solid","fa-plus","font-18",2,"color","#FFFFFF"],[1,"font-11","text-center","opacity-70"],[1,"fa-solid","fa-phone-arrow-right","font-18",2,"color","#ffffff"],["target","_blank",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-magenta",3,"click"],[1,"fa-solid","fa-pen","font-18",2,"color","#FFFFFF"],["target","_blank",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-red",3,"click"],[1,"fa-solid","fa-trash","font-18",2,"color","#ffffff"],["target","_blank",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-highlight",3,"click"],["type","button","target","_blank","data-toggle","modal","data-target","#categoryModal",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-highlight",3,"click"],[1,"fa-solid","fa-eye","font-18",2,"color","#ffffff"],["mat-sort-header",""],[3,"ngStyle"],[1,"Action"],["type","button","mat-icon-button","","aria-label","Action Menu",3,"matMenuTriggerFor"],[3,"click"]],template:function(i,e){if(i&1){let c=M();a(0,"app-cms-html-list",3),x("optionActionGuideNoticeDisplayChange",function(p){return f(c),A(e.viewGuideNotice,p)||(e.viewGuideNotice=p),h(p)}),b("optionOnActionButtonMemoRow",function(){return f(c),h(e.onActionButtonMemoRow())})("optionOnActionButtonMemo",function(){return f(c),h(e.onActionButtonMemo())})("optionOnActionButtonExport",function(){return f(c),h(e.onActionButtonExport())})("optionOnActionButtonPrintRow",function(){return f(c),h(e.onActionButtonPrintRow())}),k(1,4),a(2,"app-ticketing-departemen-tree",5),b("optionChange",function(p){return f(c),h(e.onActionSelectorSelect(p))}),l(),E(),Ee(3,6)(4,7),k(5,8),v(6,Fs,2,0,"a",9),a(7,"a",10),b("click",function(){return f(c),h(e.viewGuideNotice=!e.viewGuideNotice)}),T(8,"i",11),l(),a(9,"a",10),b("click",function(){return f(c),h(e.onActionButtonReload())}),T(10,"i",12),l(),E(),k(11,13),a(12,"a",14),b("click",function(){return f(c),h(e.optionsSearch.data.show=!e.optionsSearch.data.show)}),T(13,"mat-slide-toggle",15),d(14),g(15,"translate"),l(),a(16,"a",14),b("click",function(){return f(c),h(e.onActionButtonStatist())}),T(17,"mat-slide-toggle",15),d(18),g(19,"translate"),l(),E(),k(20,16),v(21,Ns,7,3,"div",17)(22,Os,7,3,"div",17),E(),k(23,18),v(24,Gs,7,3,"div",17)(25,Ps,7,3,"div",17)(26,Hs,7,3,"div",17)(27,qs,7,3,"div",17),E(),k(28,19),a(29,"app-cms-search-list",20),x("optionsChange",function(p){return f(c),A(e.optionsSearch,p)||(e.optionsSearch=p),h(p)}),l(),a(30,"app-cms-statist-list",20),x("optionsChange",function(p){return f(c),A(e.optionsStatist,p)||(e.optionsStatist=p),h(p)}),l(),E(),k(31,21),a(32,"mat-table",22,0),b("matSortChange",function(){f(c);let p=D(33);return h(e.onTableSortData(p))}),k(34,23),v(35,js,2,1,"mat-header-cell",24)(36,Ws,2,1,"mat-cell",25),E(),k(37,26),v(38,Us,2,1,"mat-header-cell",24)(39,Qs,4,5,"mat-cell",25),E(),k(40,27),v(41,zs,2,1,"mat-header-cell",24)(42,Ks,2,1,"mat-cell",25),E(),k(43,28),v(44,Js,2,1,"mat-header-cell",24)(45,Xs,2,1,"mat-cell",25),E(),k(46,29),v(47,Ys,2,1,"mat-header-cell",24)(48,Zs,2,1,"mat-cell",25),E(),k(49,30),v(50,$s,2,1,"mat-header-cell",24)(51,ec,2,1,"mat-cell",25),E(),k(52,31),v(53,tc,2,1,"mat-header-cell",24)(54,ic,3,7,"mat-cell",32),E(),k(55,33),v(56,nc,3,3,"mat-header-cell",34)(57,oc,6,1,"mat-cell",35),E(),v(58,rc,1,0,"mat-header-row",36)(59,ac,1,6,"mat-row",37),l(),E(),k(60,38),a(61,"mat-paginator",39,1),b("page",function(p){return f(c),h(e.onTablePageingData(p))}),l(),E(),l()}i&2&&(m("optionsListInfoAreaId",e.constructorInfoAreaId)("optionGuideNoticeKey","ticketing.task.list"),y("optionActionGuideNoticeDisplay",e.viewGuideNotice),m("optionTreeDisplay",e.requestDepartemenId===0)("optionActionRowId",e.tableRowSelected==null?null:e.tableRowSelected.id)("optionActionRowDisplayMenu",e.tableRowSelectDoubleClick)("optionSelectRowItemTitle",(e.tableRowSelected==null||e.tableRowSelected.title==null?null:e.tableRowSelected.title.length)>0?e.tableRowSelected==null?null:e.tableRowSelected.title:e.tableRowSelected==null?null:e.tableRowSelected.id),r(6),m("ngIf",e.requestDepartemenId>0),r(7),m("checked",e.optionsSearch.data.show),r(),S("",I(15,27,"ACTION.SEARCH")," "),r(3),m("checked",e.optionsStatist.data.show),r(),S("",I(19,29,"ACTION.STATIST")," "),r(3),m("ngIf",e.dataModelResult==null||e.dataModelResult.access==null?null:e.dataModelResult.access.accessAddRow),r(),m("ngIf",(e.dataModelResult==null||e.dataModelResult.access==null?null:e.dataModelResult.access.accessWatchRow)&&(e.tableRowSelected==null?null:e.tableRowSelected.id)>0),r(2),m("ngIf",e.dataModelResult==null||e.dataModelResult.access==null?null:e.dataModelResult.access.accessEditRow),r(),m("ngIf",e.dataModelResult==null||e.dataModelResult.access==null?null:e.dataModelResult.access.accessDeleteRow),r(),m("ngIf",e.dataModelResult==null||e.dataModelResult.access==null?null:e.dataModelResult.access.accessWatchRow),r(),m("ngIf",(e.dataModelResult==null||e.dataModelResult.access==null?null:e.dataModelResult.access.accessWatchRow)&&(e.tableRowSelected==null?null:e.tableRowSelected.id)>0),r(2),y("options",e.optionsSearch),r(),y("options",e.optionsStatist),r(2),m("dataSource",e.tableSource),r(26),m("matHeaderRowDef",e.tabledisplayedColumns),r(),m("matRowDefColumns",e.tabledisplayedColumns),r(2),m("length",e.dataModelResult.totalRowCount)("pageIndex",e.dataModelResult.currentPageNumber-1)("pageSize",e.dataModelResult.rowPerPage)("pageSizeOptions",Qe(31,Vs)))},dependencies:[G,Ke,Ve,xe,Xe,Ye,Ze,$e,et,tt,it,ot,st,rt,nt,ct,at,lt,dt,pt,qe,je,He,Ot,Le,H,ii,ut],encapsulation:2});let n=s;return n})();var lc=["vform"];function sc(n,s){if(n&1){let o=M();a(0,"app-cms-enum-record-status-selector",12),x("modelChange",function(i){f(o);let e=u();return A(e.dataModel.recordStatus,i)||(e.dataModel.recordStatus=i),h(i)}),l()}if(n&2){let o=u();y("model",o.dataModel.recordStatus),m("optionDisabled",!1)("optionLabel",o.fieldsInfo.recordStatus==null?null:o.fieldsInfo.recordStatus.fieldTitle)("optionRequired",!0)("optionSelectFirstItem",!0)}}function cc(n,s){n&1&&T(0,"i",19)}function dc(n,s){n&1&&T(0,"i",20)}function pc(n,s){if(n&1&&(a(0,"mat-error"),d(1),a(2,"strong"),d(3),g(4,"translate"),l()()),n&2){let o=u(2);r(),S(" ",o.fieldsInfo.title==null?null:o.fieldsInfo.title.fieldTitle," is "),r(2),w(I(4,2,"MESSAGE.required"))}}function mc(n,s){if(n&1){let o=M();a(0,"div",13)(1,"label",14),d(2),l(),a(3,"input",15,1),x("ngModelChange",function(i){f(o);let e=u();return A(e.dataModel.title,i)||(e.dataModel.title=i),h(i)}),l(),v(5,cc,1,0,"i",16)(6,dc,1,0,"i",17),a(7,"em"),d(8),l(),v(9,pc,5,4,"mat-error",18),l()}if(n&2){let o=D(4),t=u();r(2),w(t.fieldsInfo.title==null?null:t.fieldsInfo.title.fieldTitle),r(),R("placeholder",t.fieldsInfo.title==null?null:t.fieldsInfo.title.fieldTitle),y("ngModel",t.dataModel.title),r(2),m("ngIf",!o.value),r(),m("ngIf",o.value),r(2),S("",o.value.length," / 100"),r(),m("ngIf",o.errors==null?null:o.errors.required)}}function uc(n,s){if(n&1&&(a(0,"mat-error"),d(1),a(2,"strong"),d(3),g(4,"translate"),l()()),n&2){let o=u(2);r(),S(" ",o.fieldsInfo.htmlBody==null?null:o.fieldsInfo.htmlBody.fieldTitle," "),r(2),w(I(4,2,"MESSAGE.required"))}}function fc(n,s){if(n&1){let o=M();a(0,"div",13)(1,"label",21),d(2),g(3,"translate"),l(),a(4,"textarea",22,2),g(6,"translate"),x("ngModelChange",function(i){f(o);let e=u();return A(e.dataModel.htmlBody,i)||(e.dataModel.htmlBody=i),h(i)}),d(7,"                "),l(),a(8,"em"),d(9),l(),v(10,uc,5,4,"mat-error",18),l()}if(n&2){let o=D(5),t=u();r(2),w(I(3,6,"TITLE.Description")),r(2),R("disabled",!(t.fieldsInfo.htmlBody!=null&&t.fieldsInfo.htmlBody.accessAddField)),R("placeholder",I(6,8,"TITLE.Answer_Text")),y("ngModel",t.dataModel.htmlBody),r(5),S("",o.value.length," / 2000"),r(),m("ngIf",o.errors==null?null:o.errors.required)}}function hc(n,s){if(n&1){let o=M();a(0,"div",23)(1,"button",24),b("click",function(){f(o);let i=u();return h(i.onFormCancel())}),T(2,"i",25),d(3),g(4,"translate"),l(),a(5,"button",26),T(6,"i",27),d(7),g(8,"translate"),l()()}if(n&2){u();let o=D(9);r(3),S(" ",I(4,3,"ACTION.CANCEL")," "),r(2),m("disabled",!o.form.valid),r(2),S(" ",I(8,5,"ACTION.SAVE")," ")}}var Jn=(()=>{let s=class s extends ft{constructor(t,i,e,c,C,p,V,B){super(c,new mt,p,B),this.data=t,this.dialogRef=i,this.coreEnumService=e,this.ticketingTemplateService=c,this.cmsToastrService=C,this.publicHelper=p,this.cdr=V,this.translate=B,this.requestParentId=0,this.constructorInfoAreaId=this.constructor.name,this.fieldsInfo=new Map,this.formMatcher=new Ht,this.dataModelResult=new z,this.dataModel=new mt,this.formInfo=new ae,this.publicHelper.processService.cdr=this.cdr,t&&(this.requestParentId=+t.parentId||0),this.requestParentId>0&&(this.dataModel.linkTicketingDepartemenId=this.requestParentId)}ngOnInit(){this.formInfo.formTitle=this.translate.instant("TITLE.Submit_New_Content"),this.DataGetAccess()}DataAddContent(){this.translate.get("MESSAGE.sending_information_to_the_server").subscribe(i=>{this.formInfo.formAlert=i}),this.formInfo.formError="";let t=this.constructor.name+"main";this.translate.get("MESSAGE.Receiving_information").subscribe(i=>{this.publicHelper.processService.processStart(t,i,this.constructorInfoAreaId)}),this.ticketingTemplateService.ServiceAdd(this.dataModel).subscribe({next:i=>{this.formInfo.formSubmitAllow=!0,this.dataModelResult=i,i.isSuccess?(this.translate.get("MESSAGE.registration_completed_successfully").subscribe(e=>{this.formInfo.formAlert=e}),this.cmsToastrService.typeSuccessAdd(),this.dialogRef.close({dialogChangedDate:!0})):(this.translate.get("ERRORMESSAGE.MESSAGE.typeError").subscribe(e=>{this.formInfo.formAlert=e}),this.formInfo.formError=i.errorMessage,this.cmsToastrService.typeErrorMessage(i.errorMessage)),this.publicHelper.processService.processStop(t)},error:i=>{this.formInfo.formSubmitAllow=!0,this.cmsToastrService.typeError(i),this.publicHelper.processService.processStop(t)}})}onActionSelectorSelect(t){if(!t||t.id<=0){let i=this.translate.instant("MESSAGE.Information_department_is_not_clear");this.cmsToastrService.typeErrorSelected(i);return}this.dataModel.linkTicketingDepartemenId=t.id}onFormSubmit(){this.formGroup.valid&&(this.formInfo.formSubmitAllow=!1,this.DataAddContent())}onFormCancel(){this.dialogRef.close({dialogChangedDate:!1})}};s.\u0275fac=function(i){return new(i||s)(_(he),_(de),_(K),_(Dt),_(N),_(L),_(O),_(P))},s.\u0275cmp=F({type:s,selectors:[["app-ticketing-template-add"]],viewQuery:function(i,e){if(i&1&&te(lc,5),i&2){let c;ie(c=ne())&&(e.formGroup=c.first)}},features:[U],decls:16,vars:13,consts:[["vform","ngForm"],["Title",""],["HtmlBody",""],[1,"card","card-style","loader-container"],[3,"optionsInfoAreaId"],[1,"content","mb-0"],[1,"mb-0","color-highlight","font-600","font-12"],[3,"ngSubmit"],[3,"model","optionDisabled","optionLabel","optionRequired","optionSelectFirstItem","modelChange",4,"ngIf"],[3,"optionChange","optionSelectForce","optionPlaceholder"],["class","input-style has-borders no-icon input-style-always-active validate-field mb-4",4,"ngIf"],["class","form-actions",4,"ngIf"],[3,"modelChange","model","optionDisabled","optionLabel","optionRequired","optionSelectFirstItem"],[1,"input-style","has-borders","no-icon","input-style-always-active","validate-field","mb-4"],["for","dataModel.title",1,"color-highlight"],["matInput","","type","text","name","dataModel.title","type","text","minlength","3","maxlength","100","required","","id","dataModel.title",1,"form-control","validate-name",3,"ngModelChange","ngModel","placeholder"],["class","fa fa-times  invalid color-red-dark",4,"ngIf"],["class","fa fa-check  valid color-green-dark",4,"ngIf"],[4,"ngIf"],[1,"fa","fa-times","invalid","color-red-dark"],[1,"fa","fa-check","valid","color-green-dark"],["for","dataModel.htmlBody",1,"color-highlight"],["matInput","","name","dataModel.htmlBody","type","text","minlength","1","maxlength","2000","rows","7","id","dataModel.htmlBody",1,"form-control","validate-name",3,"ngModelChange","ngModel","disabled","placeholder"],[1,"form-actions"],["type","button",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-gray",3,"click"],[1,"ft-x"],["type","submit",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-green",3,"disabled"],[1,"fa","fa-check-square-o"]],template:function(i,e){if(i&1){let c=M();a(0,"div",3),T(1,"app-progress-spinner",4),a(2,"div",5)(3,"p",6),d(4),l(),a(5,"p"),d(6),g(7,"translate"),l(),a(8,"form",7,0),b("ngSubmit",function(){return f(c),h(e.onFormSubmit())}),v(10,sc,1,5,"app-cms-enum-record-status-selector",8),a(11,"app-ticketing-departemen-selector",9),g(12,"translate"),b("optionChange",function(p){return f(c),h(e.onActionSelectorSelect(p))}),l(),v(13,mc,10,7,"div",10)(14,fc,11,10,"div",10)(15,hc,9,7,"div",11),l()()()}i&2&&(r(),m("optionsInfoAreaId",e.constructorInfoAreaId),r(3),S(" ",e.formInfo.formTitle," "),r(2),S(" ",I(7,9,"TITLE.Be_Careful_When_Entering_Information")," "),r(4),m("ngIf",e.fieldsInfo.recordStatus==null?null:e.fieldsInfo.recordStatus.accessWatchField),r(),m("optionSelectForce",e.dataModel.linkTicketingDepartemenId)("optionPlaceholder",I(12,11,"TITLE.Department")),r(2),m("ngIf",e.fieldsInfo.title==null?null:e.fieldsInfo.title.accessWatchField),r(),m("ngIf",e.fieldsInfo.htmlBody==null?null:e.fieldsInfo.htmlBody.accessWatchField),r(),m("ngIf",e.formInfo.formSubmitAllow))},dependencies:[G,Ce,oe,re,ge,Me,Ie,Te,fe,Se,ye,Q,_e,j,Ge,H]});let n=s;return n})();var _c=["vform"];function gc(n,s){if(n&1){let o=M();a(0,"app-cms-enum-record-status-selector",12),x("modelChange",function(i){f(o);let e=u();return A(e.dataModel.recordStatus,i)||(e.dataModel.recordStatus=i),h(i)}),l()}if(n&2){let o=u();y("model",o.dataModel.recordStatus),m("optionDisabled",!1)("optionLabel",o.fieldsInfo.recordStatus==null?null:o.fieldsInfo.recordStatus.fieldTitle)("optionRequired",!0)("optionSelectFirstItem",!0)}}function Sc(n,s){n&1&&T(0,"i",19)}function Cc(n,s){n&1&&T(0,"i",20)}function Ic(n,s){if(n&1&&(a(0,"mat-error"),d(1),a(2,"strong"),d(3),g(4,"translate"),l()()),n&2){let o=u(2);r(),S(" ",o.fieldsInfo.title==null?null:o.fieldsInfo.title.fieldTitle," is "),r(2),w(I(4,2,"MESSAGE.required"))}}function Tc(n,s){if(n&1){let o=M();a(0,"div",13)(1,"label",14),d(2),l(),a(3,"input",15,1),x("ngModelChange",function(i){f(o);let e=u();return A(e.dataModel.title,i)||(e.dataModel.title=i),h(i)}),l(),v(5,Sc,1,0,"i",16)(6,Cc,1,0,"i",17),a(7,"em"),d(8),l(),v(9,Ic,5,4,"mat-error",18),l()}if(n&2){let o=D(4),t=u();r(2),w(t.fieldsInfo.title==null?null:t.fieldsInfo.title.fieldTitle),r(),R("placeholder",t.fieldsInfo.title==null?null:t.fieldsInfo.title.fieldTitle),y("ngModel",t.dataModel.title),r(2),m("ngIf",!o.value),r(),m("ngIf",o.value),r(2),S("",o.value.length," / 100"),r(),m("ngIf",o.errors==null?null:o.errors.required)}}function vc(n,s){if(n&1&&(a(0,"mat-error"),d(1),a(2,"strong"),d(3),g(4,"translate"),l()()),n&2){let o=u(2);r(),S(" ",o.fieldsInfo.htmlBody==null?null:o.fieldsInfo.htmlBody.fieldTitle," "),r(2),w(I(4,2,"MESSAGE.required"))}}function bc(n,s){if(n&1){let o=M();a(0,"div",13)(1,"label",21),d(2),g(3,"translate"),l(),a(4,"textarea",22,2),g(6,"translate"),x("ngModelChange",function(i){f(o);let e=u();return A(e.dataModel.htmlBody,i)||(e.dataModel.htmlBody=i),h(i)}),d(7,"                "),l(),a(8,"em"),d(9),l(),v(10,vc,5,4,"mat-error",18),l()}if(n&2){let o=D(5),t=u();r(2),w(I(3,6,"TITLE.Description")),r(2),R("disabled",!(t.fieldsInfo.htmlBody!=null&&t.fieldsInfo.htmlBody.accessAddField)),R("placeholder",I(6,8,"TITLE.Answer_Text")),y("ngModel",t.dataModel.htmlBody),r(5),S("",o.value.length," / 2000"),r(),m("ngIf",o.errors==null?null:o.errors.required)}}function wc(n,s){if(n&1){let o=M();a(0,"div",23)(1,"button",24),b("click",function(){f(o);let i=u();return h(i.onFormCancel())}),T(2,"i",25),d(3),g(4,"translate"),l(),a(5,"button",26),T(6,"i",27),d(7),g(8,"translate"),l()()}if(n&2){u();let o=D(9);r(3),S(" ",I(4,3,"ACTION.CANCEL")," "),r(2),m("disabled",!o.form.valid),r(2),S(" ",I(8,5,"ACTION.SAVE")," ")}}var Xn=(()=>{let s=class s extends Tt{constructor(t,i,e,c,C,p,V,B){super(c,new mt,p,B),this.data=t,this.dialogRef=i,this.coreEnumService=e,this.ticketingTemplateService=c,this.cmsToastrService=C,this.publicHelper=p,this.cdr=V,this.translate=B,this.requestId=0,this.constructorInfoAreaId=this.constructor.name,this.selectFileTypeMainImage=["jpg","jpeg","png"],this.appLanguage="fa",this.formMatcher=new Ht,this.dataModelResult=new St,this.dataModel=new mt,this.dataFileModel=new Map,this.formInfo=new ae,this.publicHelper.processService.cdr=this.cdr,t&&(this.requestId=+t.id||0),this.fileManagerTree=this.publicHelper.GetfileManagerTreeConfig()}ngOnInit(){if(this.requestId>0)this.formInfo.formTitle=this.translate.instant("TITLE.Edit_Categories"),this.DataGetOneContent();else{this.cmsToastrService.typeErrorComponentAction(),this.dialogRef.close({dialogChangedDate:!1});return}}DataGetOneContent(){if(this.requestId<=0){this.cmsToastrService.typeErrorEditRowIsNull();return}this.translate.get("MESSAGE.Receiving_Information_From_The_Server").subscribe(i=>{this.formInfo.formAlert=i}),this.formInfo.formError="";let t=this.constructor.name+"main";this.translate.get("MESSAGE.Receiving_information").subscribe(i=>{this.publicHelper.processService.processStart(t,i,this.constructorInfoAreaId)}),this.ticketingTemplateService.setAccessLoad(),this.ticketingTemplateService.setAccessDataType(gt.Editor),this.ticketingTemplateService.ServiceGetOneById(this.requestId).subscribe({next:i=>{this.fieldsInfo=this.publicHelper.fieldInfoConvertor(i.access),this.dataModel=i.item,i.isSuccess?(this.formInfo.formTitle=this.formInfo.formTitle+" "+i.item.title,this.formInfo.formAlert=""):(this.translate.get("ERRORMESSAGE.MESSAGE.typeError").subscribe(e=>{this.formInfo.formAlert=e}),this.formInfo.formError=i.errorMessage,this.cmsToastrService.typeErrorMessage(i.errorMessage)),this.publicHelper.processService.processStop(t)},error:i=>{this.cmsToastrService.typeError(i),this.publicHelper.processService.processStop(t)}})}DataEditContent(){this.translate.get("MESSAGE.sending_information_to_the_server").subscribe(i=>{this.formInfo.formAlert=i}),this.formInfo.formError="";let t=this.constructor.name+"main";this.translate.get("MESSAGE.sending_information_to_the_server").subscribe(i=>{this.publicHelper.processService.processStart(t,i,this.constructorInfoAreaId)}),this.ticketingTemplateService.ServiceEdit(this.dataModel).subscribe({next:i=>{this.formInfo.formSubmitAllow=!0,this.dataModelResult=i,i.isSuccess?(this.translate.get("MESSAGE.registration_completed_successfully").subscribe(e=>{this.formInfo.formAlert=e}),this.cmsToastrService.typeSuccessEdit(),this.dialogRef.close({dialogChangedDate:!0})):(this.translate.get("ERRORMESSAGE.MESSAGE.typeError").subscribe(e=>{this.formInfo.formAlert=e}),this.formInfo.formError=i.errorMessage,this.cmsToastrService.typeErrorMessage(i.errorMessage)),this.publicHelper.processService.processStop(t)},error:i=>{this.formInfo.formSubmitAllow=!0,this.cmsToastrService.typeError(i),this.publicHelper.processService.processStop(t)}})}onActionSelectorSelect(t){if(!t||t.id<=0){let i=this.translate.instant("MESSAGE.Information_department_is_not_clear");this.cmsToastrService.typeErrorSelected(i);return}this.dataModel.linkTicketingDepartemenId=t.id}onFormSubmit(){this.formGroup.valid&&(this.formInfo.formSubmitAllow=!1,this.DataEditContent())}onFormCancel(){this.dialogRef.close({dialogChangedDate:!1})}};s.\u0275fac=function(i){return new(i||s)(_(he),_(de),_(K),_(Dt),_(N),_(L),_(O),_(P))},s.\u0275cmp=F({type:s,selectors:[["app-ticketing-template-add"]],viewQuery:function(i,e){if(i&1&&te(_c,5),i&2){let c;ie(c=ne())&&(e.formGroup=c.first)}},features:[U],decls:16,vars:13,consts:[["vform","ngForm"],["Title",""],["HtmlBody",""],[1,"card","card-style","loader-container"],[3,"optionsInfoAreaId"],[1,"content","mb-0"],[1,"mb-0","color-highlight","font-600","font-12"],[3,"ngSubmit"],[3,"model","optionDisabled","optionLabel","optionRequired","optionSelectFirstItem","modelChange",4,"ngIf"],[3,"optionChange","optionSelectForce","optionPlaceholder"],["class","input-style has-borders no-icon input-style-always-active validate-field mb-4",4,"ngIf"],["class","form-actions",4,"ngIf"],[3,"modelChange","model","optionDisabled","optionLabel","optionRequired","optionSelectFirstItem"],[1,"input-style","has-borders","no-icon","input-style-always-active","validate-field","mb-4"],["for","dataModel.title",1,"color-highlight"],["matInput","","type","text","name","dataModel.title","type","text","minlength","3","maxlength","100","required","","id","dataModel.title",1,"form-control","validate-name",3,"ngModelChange","ngModel","placeholder"],["class","fa fa-times  invalid color-red-dark",4,"ngIf"],["class","fa fa-check  valid color-green-dark",4,"ngIf"],[4,"ngIf"],[1,"fa","fa-times","invalid","color-red-dark"],[1,"fa","fa-check","valid","color-green-dark"],["for","dataModel.htmlBody",1,"color-highlight"],["matInput","","name","dataModel.htmlBody","type","text","minlength","1","maxlength","2000","rows","7","id","dataModel.htmlBody",1,"form-control","validate-name",3,"ngModelChange","ngModel","disabled","placeholder"],[1,"form-actions"],["type","button",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-gray",3,"click"],[1,"ft-x"],["type","submit",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-green",3,"disabled"],[1,"fa","fa-check-square-o"]],template:function(i,e){if(i&1){let c=M();a(0,"div",3),T(1,"app-progress-spinner",4),a(2,"div",5)(3,"p",6),d(4),l(),a(5,"p"),d(6),g(7,"translate"),l(),a(8,"form",7,0),b("ngSubmit",function(){return f(c),h(e.onFormSubmit())}),v(10,gc,1,5,"app-cms-enum-record-status-selector",8),a(11,"app-ticketing-departemen-selector",9),g(12,"translate"),b("optionChange",function(p){return f(c),h(e.onActionSelectorSelect(p))}),l(),v(13,Tc,10,7,"div",10)(14,bc,11,10,"div",10)(15,wc,9,7,"div",11),l()()()}i&2&&(r(),m("optionsInfoAreaId",e.constructorInfoAreaId),r(3),S(" ",e.formInfo.formTitle," "),r(2),S(" ",I(7,9,"TITLE.Be_Careful_When_Entering_Information")," "),r(4),m("ngIf",e.fieldsInfo.recordStatus==null?null:e.fieldsInfo.recordStatus.accessWatchField),r(),m("optionSelectForce",e.dataModel.linkTicketingDepartemenId)("optionPlaceholder",I(12,11,"TITLE.Department")),r(2),m("ngIf",e.fieldsInfo.title==null?null:e.fieldsInfo.title.accessWatchField),r(),m("ngIf",e.fieldsInfo.htmlBody==null?null:e.fieldsInfo.htmlBody.accessWatchField),r(),m("ngIf",e.formInfo.formSubmitAllow))},dependencies:[G,Ce,oe,re,ge,Me,Ie,Te,fe,Se,ye,Q,_e,j,Ge,H]});let n=s;return n})();var Mc=()=>[5,10,20,100],kc=n=>({display:n});function Ec(n,s){if(n&1){let o=M();a(0,"a",37),b("click",function(){f(o);let i=u();return h(i.onActionBackToParent())}),T(1,"i",38),l()}}function yc(n,s){if(n&1){let o=M();a(0,"div",39)(1,"a",40),b("click",function(){f(o);let i=u();return h(i.onActionButtonNewRow())}),T(2,"i",41)(3,"br"),l(),a(4,"p",42),d(5),g(6,"translate"),l()()}n&2&&(r(5),w(I(6,1,"ACTION.ADD")))}function Ac(n,s){if(n&1){let o=M();a(0,"div",39)(1,"a",43),b("click",function(){f(o);let i=u();return h(i.onActionButtonEditRow(i.tableRowSelected))}),T(2,"i",44)(3,"br"),l(),a(4,"p",42),d(5),g(6,"translate"),l()()}n&2&&(r(5),w(I(6,1,"ACTION.EDIT")))}function xc(n,s){if(n&1){let o=M();a(0,"div",39)(1,"a",45),b("click",function(){f(o);let i=u();return h(i.onActionButtonDeleteRow(i.tableRowSelected))}),T(2,"i",46)(3,"br"),l(),a(4,"p",42),d(5),g(6,"translate"),l()()}n&2&&(r(5),w(I(6,1,"ACTION.DELETE")))}function Dc(n,s){if(n&1&&(a(0,"mat-header-cell",47),d(1),l()),n&2){let o=u();r(),S(" ",o.fieldsInfo.id==null?null:o.fieldsInfo.id.fieldTitle," ")}}function Rc(n,s){if(n&1&&(a(0,"mat-cell"),d(1),l()),n&2){let o=s.$implicit;r(),S(" ",o.id," ")}}function Lc(n,s){if(n&1&&(a(0,"mat-header-cell",47),d(1),l()),n&2){let o=u();r(),S(" ",o.fieldsInfo.linkSiteId==null?null:o.fieldsInfo.linkSiteId.fieldTitle," ")}}function Vc(n,s){if(n&1&&(a(0,"mat-cell"),d(1),g(2,"cmssiteinfo"),g(3,"async"),l()),n&2){let o=s.$implicit;r(),S(" ",I(3,3,I(2,1,o.linkSiteId))," ")}}function Bc(n,s){if(n&1&&(a(0,"mat-header-cell",47),d(1),l()),n&2){let o=u();r(),S(" ",o.fieldsInfo.recordStatus==null?null:o.fieldsInfo.recordStatus.fieldTitle," ")}}function Fc(n,s){if(n&1&&T(0,"select",50),n&2){let o=u().$implicit,t=u();m("contentService",t.contentService)("row",o)("ngStyle",ze(3,kc,o.id===(t.tableRowSelected==null?null:t.tableRowSelected.id)?"":"none"))}}function Nc(n,s){if(n&1&&(a(0,"mat-cell",48),g(1,"statusCellClass"),T(2,"i",48),g(3,"statusIconClass"),v(4,Fc,1,5,"select",49),l()),n&2){let o=s.$implicit,t=u();m("ngClass",I(1,3,o.recordStatus)),r(2),m("ngClass",I(3,5,o.recordStatus)),r(2),m("ngIf",t.dataModelResult==null||t.dataModelResult.access==null?null:t.dataModelResult.access.accessEditRow)}}function Oc(n,s){if(n&1&&(a(0,"mat-header-cell",47),d(1),l()),n&2){let o=u();r(),S(" ",o.fieldsInfo.title==null?null:o.fieldsInfo.title.fieldTitle," ")}}function Gc(n,s){if(n&1&&(a(0,"mat-cell"),d(1),l()),n&2){let o=s.$implicit;r(),S(" ",o.title," ")}}function Pc(n,s){n&1&&(a(0,"mat-header-cell"),d(1),g(2,"translate"),l()),n&2&&(r(),S(" ",I(2,1,"TITLE.OPTION")," "))}function Hc(n,s){if(n&1&&(a(0,"mat-cell",51)(1,"button",52)(2,"mat-icon"),d(3,"more_vert"),l()(),T(4,"mat-menu",null,2),l()),n&2){let o=D(5);r(),m("matMenuTriggerFor",o)}}function qc(n,s){n&1&&T(0,"mat-header-row")}function jc(n,s){if(n&1){let o=M();a(0,"mat-row",53),b("click",function(){let i=f(o).$implicit,e=u();return h(e.onActionTableRowSelect(i))}),l()}if(n&2){let o=s.$implicit,t=s.dataIndex,i=u();ke("ntk-row-odd",t%2)("ntk-row-even",!(t%2))("ntk-row-selected",o.id===(i.tableRowSelected==null?null:i.tableRowSelected.id))}}var rn=(()=>{let s=class s extends We{constructor(t,i,e,c,C,p,V,B,J,$,De){super(t,new mt,$,p,B),this.contentService=t,this.activatedRoute=i,this.cmsToastrService=e,this.cmsConfirmationDialogService=c,this.router=C,this.tokenHelper=p,this.cdr=V,this.translate=B,this.pageInfo=J,this.publicHelper=$,this.dialog=De,this.requestDepartemenId=0,this.constructorInfoAreaId=this.constructor.name,this.flag=!1,this.tableContentSelected=[],this.filteModelContent=new Y,this.tabledisplayedColumns=[],this.tabledisplayedColumnsSource=["Id","RecordStatus"],this.tabledisplayedColumnsMobileSource=["Id","RecordStatus"],this.publicHelper.processService.cdr=this.cdr,this.optionsSearch.parentMethods={onSubmit:Wt=>this.onSubmitOptionsSearch(Wt)},this.filteModelContent.sortColumn="Id",this.filteModelContent.sortType=W.Descending}ngOnInit(){this.requestDepartemenId=+Number(this.activatedRoute.snapshot.paramMap.get("DepartemenId")),this.tokenHelper.getTokenInfoState().then(t=>{this.tokenInfo=t,setTimeout(()=>{this.firstLoadDataRunned||this.DataGetAll()},500)}),this.cmsApiStoreSubscribe=this.tokenHelper.getTokenInfoStateOnChange().subscribe({next:t=>{this.tokenInfo=t,this.firstLoadDataRunned=!0,this.DataGetAll()}})}ngOnDestroy(){this.cmsApiStoreSubscribe.unsubscribe()}DataGetAll(){this.tabledisplayedColumns=this.publicHelper.TableDisplayedColumns(this.tabledisplayedColumnsSource,this.tabledisplayedColumnsMobileSource,[],this.tokenInfo),this.tableRowsSelected=[],this.onActionTableRowSelect(new mt);let t=this.constructor.name+"main";this.translate.get("MESSAGE.get_information_list").subscribe(c=>{this.publicHelper.processService.processStart(t,c,this.constructorInfoAreaId)}),this.filteModelContent.accessLoad=!0;let i=JSON.parse(JSON.stringify(this.filteModelContent)),e=new X;this.requestDepartemenId>0&&(e.propertyName="LinkTicketingDepartemenId",e.value=this.requestDepartemenId,i.filters.push(e)),this.categoryModelSelected&&this.categoryModelSelected.id>0&&(e.propertyName="LinkTicketingDepartemenId",e.value=this.categoryModelSelected.id,i.filters.push(e)),this.contentService.ServiceGetAllEditor(i).subscribe({next:c=>{this.fieldsInfo=this.publicHelper.fieldInfoConvertor(c.access),c.isSuccess?(this.dataModelResult=c,this.tableSource.data=c.listItems,this.optionsStatist?.data?.show&&this.onActionButtonStatist(!0),setTimeout(()=>{this.optionsSearch.childMethods&&this.optionsSearch.childMethods.setAccess(c.access)},1e3)):this.cmsToastrService.typeErrorGetAll(c.errorMessage),this.publicHelper.processService.processStop(t)},error:c=>{this.cmsToastrService.typeError(c),this.publicHelper.processService.processStop(t)}})}onTableSortData(t){this.tableSource&&this.tableSource.sort&&this.tableSource.sort.active===t.active?this.tableSource.sort.start==="asc"?(t.start="desc",this.filteModelContent.sortColumn=t.active,this.filteModelContent.sortType=W.Descending):this.tableSource.sort.start==="desc"?(t.start="asc",this.filteModelContent.sortColumn="",this.filteModelContent.sortType=W.Ascending):t.start="desc":(this.filteModelContent.sortColumn=t.active,this.filteModelContent.sortType=W.Descending),this.tableSource.sort=t,this.filteModelContent.currentPageNumber=0,this.DataGetAll()}onTablePageingData(t){this.filteModelContent.currentPageNumber=t.pageIndex+1,this.filteModelContent.rowPerPage=t.pageSize,this.DataGetAll()}onActionButtonNewRow(){if(this.categoryModelSelected==null&&this.categoryModelSelected&&this.categoryModelSelected.id===0&&(this.requestDepartemenId==null||this.requestDepartemenId===0)){this.translate.get("MESSAGE.Content_not_selected").subscribe(c=>{this.cmsToastrService.typeErrorSelected(c)});return}if(this.dataModelResult==null||this.dataModelResult.access==null||!this.dataModelResult.access.accessAddRow){this.cmsToastrService.typeErrorAccessAdd();return}let t=this.requestDepartemenId;this.categoryModelSelected&&this.categoryModelSelected.id>0&&(t=this.categoryModelSelected.id);var i="";this.tokenHelper.isMobile?i="dialog-fullscreen":i="dialog-min",this.dialog.open(Jn,{height:"90%",panelClass:i,enterAnimationDuration:q.cmsViewConfig.enterAnimationDuration,exitAnimationDuration:q.cmsViewConfig.exitAnimationDuration,data:{parentId:t}}).afterClosed().subscribe(c=>{c&&c.dialogChangedDate&&this.DataGetAll()})}onActionSelectorSelect(t){var i=this.filteModelContent.sortColumn,e=this.filteModelContent.sortType;this.filteModelContent=new Y,this.filteModelContent.sortColumn=i,this.filteModelContent.sortType=e,this.categoryModelSelected=t,this.DataGetAll()}onActionButtonEditRow(t=this.tableRowSelected){if(!t||!t.id||t.id===0){this.cmsToastrService.typeErrorSelectedRow();return}if(this.tableRowSelected=t,this.dataModelResult==null||this.dataModelResult.access==null||!this.dataModelResult.access.accessEditRow){this.cmsToastrService.typeErrorAccessEdit();return}var i="";this.tokenHelper.isMobile?i="dialog-fullscreen":i="dialog-min",this.dialog.open(Xn,{height:"90%",panelClass:i,enterAnimationDuration:q.cmsViewConfig.enterAnimationDuration,exitAnimationDuration:q.cmsViewConfig.exitAnimationDuration,data:{id:this.tableRowSelected.id}}).afterClosed().subscribe(c=>{c&&c.dialogChangedDate&&this.DataGetAll()})}onActionButtonDeleteRow(t=this.tableRowSelected){if(t==null||!t.id||t.id===0){let c=this.translate.instant("MESSAGE.No_row_selected_for_editing");this.cmsToastrService.typeErrorSelected(c);return}if(this.tableRowSelected=t,this.dataModelResult==null||this.dataModelResult.access==null||!this.dataModelResult.access.accessDeleteRow){this.cmsToastrService.typeErrorAccessDelete();return}var i="",e="";this.translate.get(["MESSAGE.Please_Confirm","MESSAGE.Do_you_want_to_delete_this_content"]).subscribe(c=>{i=c["MESSAGE.Please_Confirm"],e=c["MESSAGE.Do_you_want_to_delete_this_content"]+"?<br> ( "+this.tableRowSelected.title+" ) "}),this.cmsConfirmationDialogService.confirm(i,e).then(c=>{if(c){let C=this.constructor.name+"main";this.translate.get("MESSAGE.Receiving_information").subscribe(p=>{this.publicHelper.processService.processStart(C,p,this.constructorInfoAreaId)}),this.contentService.ServiceDelete(this.tableRowSelected.id).subscribe({next:p=>{p.isSuccess?this.cmsToastrService.typeSuccessRemove():this.cmsToastrService.typeErrorRemove(),this.publicHelper.processService.processStop(C)},error:p=>{this.cmsToastrService.typeError(p),this.publicHelper.processService.processStop(C)}})}}).catch(()=>{})}onActionButtonStatist(t=!this.optionsStatist.data.show){if(this.optionsStatist.data.show=t,!this.optionsStatist.data.show)return;let i=new Map;this.translate.get("MESSAGE.Active").subscribe(p=>{i.set(p,0)}),this.translate.get("MESSAGE.All").subscribe(p=>{i.set(p,0)});let e=this.constructor.name+".ServiceStatist";this.translate.get("MESSAGE.Get_the_statist").subscribe(p=>{this.publicHelper.processService.processStart(e,p,this.constructorInfoAreaId)}),this.contentService.ServiceGetCount(this.filteModelContent).subscribe({next:p=>{p.isSuccess&&(i.set("All",p.totalRowCount),this.optionsStatist.childMethods.setStatistValue(i)),this.publicHelper.processService.processStop(e)},error:p=>{this.cmsToastrService.typeError(p),this.publicHelper.processService.processStop(e)}});let c=JSON.parse(JSON.stringify(this.filteModelContent)),C=new X;C.propertyName="RecordStatus",C.value=Je.Available,c.filters.push(C),this.contentService.ServiceGetCount(c).subscribe({next:p=>{p.isSuccess&&(i.set("Active",p.totalRowCount),this.optionsStatist.childMethods.setStatistValue(i)),this.publicHelper.processService.processStop(e)},error:p=>{this.cmsToastrService.typeError(p),this.publicHelper.processService.processStop(e)}})}onActionButtonReload(){this.DataGetAll()}onSubmitOptionsSearch(t){this.filteModelContent.filters=t,this.DataGetAll()}onActionBackToParent(){this.router.navigate(["/ticketing/departemen/"])}};s.\u0275fac=function(i){return new(i||s)(_(Dt),_(ve),_(N),_(Rt),_(ce),_(ee),_(O),_(P),_(Pe),_(L),_(Ae))},s.\u0275cmp=F({type:s,selectors:[["app-application-app-list"]],features:[U],decls:51,vars:29,consts:[["tableSort","matSort"],["paginator",""],["actionMenu","matMenu"],[3,"optionActionGuideNoticeDisplayChange","optionOnActionButtonMemoRow","optionOnActionButtonMemo","optionOnActionButtonExport","optionOnActionButtonPrintRow","optionsListInfoAreaId","optionGuideNoticeKey","optionActionGuideNoticeDisplay","optionTreeDisplay","optionActionRowId","optionActionRowDisplayMenu","optionSelectRowItemTitle"],["cms-tree",""],[3,"optionChange"],["cms-header",""],["cms-action-header",""],["cms-action-header-start",""],["type","button","class","btn font-13 font-600 btn-s m-1 rounded-s shadow-xl border-0 gradient-gray","target","_blank",3,"click",4,"ngIf"],["type","button","target","_blank",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-highlight",3,"click"],[1,"fa-solid","fa-info","font-18",2,"color","#ffffff"],[1,"fa-solid","fa-rotate-right","font-18",2,"color","#ffffff"],["cms-action-header-end",""],[1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-highlight",3,"click"],[3,"checked"],["cms-action-main",""],["class","col-4",4,"ngIf"],["cms-action-row",""],["cms-action-area",""],[3,"optionsChange","options"],["cms-body",""],["matSort","",3,"matSortChange","dataSource"],["matColumnDef","Id"],["mat-sort-header","",4,"matHeaderCellDef"],[4,"matCellDef"],["matColumnDef","LinkSiteId"],["matColumnDef","RecordStatus"],[3,"ngClass",4,"matCellDef"],["matColumnDef","Title"],["matColumnDef","Action"],[4,"matHeaderCellDef"],["class"," Action",4,"matCellDef"],[4,"matHeaderRowDef"],[3,"ntk-row-odd","ntk-row-even","ntk-row-selected","click",4,"matRowDef","matRowDefColumns"],["cms-footer",""],[3,"page","length","pageIndex","pageSize","pageSizeOptions"],["type","button","target","_blank",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-gray",3,"click"],[1,"fa-solid","fa-arrow-left","font-18",2,"color","#ffffff"],[1,"col-4"],["type","button","target","_blank",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-teal",3,"click"],[1,"fa-solid","fa-plus","font-18",2,"color","#FFFFFF"],[1,"font-11","text-center","opacity-70"],["target","_blank",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-magenta",3,"click"],[1,"fa-solid","fa-pen","font-18",2,"color","#FFFFFF"],["target","_blank",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-red",3,"click"],[1,"fa-solid","fa-trash","font-18",2,"color","#ffffff"],["mat-sort-header",""],[3,"ngClass"],["matNativeControl","","cmsRecordStatusSelfSave","","style","background: none; border: none;",3,"contentService","row","ngStyle",4,"ngIf"],["matNativeControl","","cmsRecordStatusSelfSave","",2,"background","none","border","none",3,"contentService","row","ngStyle"],[1,"Action"],["type","button","mat-icon-button","","aria-label","Action Menu",3,"matMenuTriggerFor"],[3,"click"]],template:function(i,e){if(i&1){let c=M();a(0,"app-cms-html-list",3),x("optionActionGuideNoticeDisplayChange",function(p){return f(c),A(e.viewGuideNotice,p)||(e.viewGuideNotice=p),h(p)}),b("optionOnActionButtonMemoRow",function(){return f(c),h(e.onActionButtonMemoRow())})("optionOnActionButtonMemo",function(){return f(c),h(e.onActionButtonMemo())})("optionOnActionButtonExport",function(){return f(c),h(e.onActionButtonExport())})("optionOnActionButtonPrintRow",function(){return f(c),h(e.onActionButtonPrintRow())}),k(1,4),a(2,"app-ticketing-departemen-tree",5),b("optionChange",function(p){return f(c),h(e.onActionSelectorSelect(p))}),l(),E(),Ee(3,6)(4,7),k(5,8),v(6,Ec,2,0,"a",9),a(7,"a",10),b("click",function(){return f(c),h(e.viewGuideNotice=!e.viewGuideNotice)}),T(8,"i",11),l(),a(9,"a",10),b("click",function(){return f(c),h(e.onActionButtonReload())}),T(10,"i",12),l(),E(),k(11,13),a(12,"a",14),b("click",function(){return f(c),h(e.optionsSearch.data.show=!e.optionsSearch.data.show)}),T(13,"mat-slide-toggle",15),d(14),g(15,"translate"),l(),a(16,"a",14),b("click",function(){return f(c),h(e.onActionButtonStatist())}),T(17,"mat-slide-toggle",15),d(18),g(19,"translate"),l(),E(),k(20,16),v(21,yc,7,3,"div",17),E(),k(22,18),v(23,Ac,7,3,"div",17)(24,xc,7,3,"div",17),E(),k(25,19),a(26,"app-cms-search-list",20),x("optionsChange",function(p){return f(c),A(e.optionsSearch,p)||(e.optionsSearch=p),h(p)}),l(),a(27,"app-cms-statist-list",20),x("optionsChange",function(p){return f(c),A(e.optionsStatist,p)||(e.optionsStatist=p),h(p)}),l(),E(),k(28,21),a(29,"mat-table",22,0),b("matSortChange",function(){f(c);let p=D(30);return h(e.onTableSortData(p))}),k(31,23),v(32,Dc,2,1,"mat-header-cell",24)(33,Rc,2,1,"mat-cell",25),E(),k(34,26),v(35,Lc,2,1,"mat-header-cell",24)(36,Vc,4,5,"mat-cell",25),E(),k(37,27),v(38,Bc,2,1,"mat-header-cell",24)(39,Nc,5,7,"mat-cell",28),E(),k(40,29),v(41,Oc,2,1,"mat-header-cell",24)(42,Gc,2,1,"mat-cell",25),E(),k(43,30),v(44,Pc,3,3,"mat-header-cell",31)(45,Hc,6,1,"mat-cell",32),E(),v(46,qc,1,0,"mat-header-row",33)(47,jc,1,6,"mat-row",34),l(),E(),k(48,35),a(49,"mat-paginator",36,1),b("page",function(p){return f(c),h(e.onTablePageingData(p))}),l(),E(),l()}i&2&&(m("optionsListInfoAreaId",e.constructorInfoAreaId)("optionGuideNoticeKey",""),y("optionActionGuideNoticeDisplay",e.viewGuideNotice),m("optionTreeDisplay",e.requestDepartemenId===0)("optionActionRowId",e.tableRowSelected==null?null:e.tableRowSelected.id)("optionActionRowDisplayMenu",e.tableRowSelectDoubleClick)("optionSelectRowItemTitle",(e.tableRowSelected==null||e.tableRowSelected.title==null?null:e.tableRowSelected.title.length)>0?e.tableRowSelected==null?null:e.tableRowSelected.title:e.tableRowSelected==null?null:e.tableRowSelected.id),r(6),m("ngIf",e.requestDepartemenId>0),r(7),m("checked",e.optionsSearch.data.show),r(),S("",I(15,24,"ACTION.SEARCH")," "),r(3),m("checked",e.optionsStatist.data.show),r(),S("",I(19,26,"ACTION.STATIST")," "),r(3),m("ngIf",e.dataModelResult==null||e.dataModelResult.access==null?null:e.dataModelResult.access.accessAddRow),r(2),m("ngIf",e.dataModelResult==null||e.dataModelResult.access==null?null:e.dataModelResult.access.accessEditRow),r(),m("ngIf",e.dataModelResult==null||e.dataModelResult.access==null?null:e.dataModelResult.access.accessDeleteRow),r(2),y("options",e.optionsSearch),r(),y("options",e.optionsStatist),r(2),m("dataSource",e.tableSource),r(17),m("matHeaderRowDef",e.tabledisplayedColumns),r(),m("matRowDefColumns",e.tabledisplayedColumns),r(2),m("length",e.dataModelResult.totalRowCount)("pageIndex",e.dataModelResult.currentPageNumber-1)("pageSize",e.dataModelResult.rowPerPage)("pageSizeOptions",Qe(28,Mc)))},dependencies:[yt,G,Ke,Ve,xe,Q,Xe,Ye,Ze,$e,et,tt,it,ot,st,rt,nt,ct,at,lt,dt,pt,qe,je,He,Mt,Ot,Le,H,ut,Et,kt],encapsulation:2});let n=s;return n})();var Wc=[{path:"",component:Bn,data:{title:"ROUTE.TICKETING"},children:[{path:"config",loadChildren:()=>import("./chunk-WPCNO3JF.js").then(n=>n.TicketingConfigModule),data:{title:"ROUTE.TICKETING"}},{path:"departemen",component:Hn,data:{title:"ROUTE.TICKETING.DEPARTMENT"}},{path:"departemen/add/",component:Yt,data:{title:"ROUTE.TICKETING.DEPARTMENT"}},{path:"departemen/edit/:Id",component:Yt,data:{title:"ROUTE.TICKETING.DEPARTMENT"}},{path:"departemenlog/DepartemenId/:DepartemenId",component:tn,data:{title:"ROUTE.TICKETING.DEPARTMENTLOG"}},{path:"departemenlog/OperatorId/:OperatorId",component:tn,data:{title:"ROUTE.TICKETING.DEPARTMENTLOG"}},{path:"faq",component:Wn,data:{title:"ROUTE.TICKETING.FAQ"}},{path:"faq/:DepartemenId",component:nn,data:{title:"ROUTE.TICKETING.FAQ"}},{path:"faq/list",component:nn,data:{title:"ROUTE.TICKETING.LIST"}},{path:"template",component:rn,data:{title:"ROUTE.TICKETING.TEMPLATE"}},{path:"template/:DepartemenId",component:rn,data:{title:"ROUTE.TICKETING.TEMPLATE"}},{path:"contactus",component:Qn,data:{title:"ROUTE.TICKETING.CONTACTUS"}},{path:"task",component:fi,data:{title:"ROUTE.TICKETING.TASK"}},{path:"task/listTicketStatus/:TicketStatus",component:fi,data:{title:"ROUTE.TICKETING.TASK"}},{path:"task/contactus-list",component:on,data:{title:"ROUTE.TICKETING.TASK"}},{path:"task/contactus-list/LinkCmsUserId/:LinkCmsUserId",component:on,data:{title:"ROUTE.TICKETING.TASK"}},{path:"task/:DepartemenId",component:fi,data:{title:"ROUTE.TICKETING.TASK"}},{path:"task/LinkCmsUserId/:LinkCmsUserId",component:fi,data:{title:"ROUTE.TICKETING.TASK"}},{path:"answer",component:en,data:{title:"ROUTE.TICKETING.ANSWER"}},{path:"answer/LinkTaskId/:LinkTaskId",component:en,data:{title:"ROUTE.TICKETING.ANSWER"}}]}],Yn=(()=>{let s=class s{};s.\u0275fac=function(i){return new(i||s)},s.\u0275mod=vi({type:s}),s.\u0275inj=Ti({imports:[Xi.forChild(Wc),Xi]});let n=s;return n})();var Tu=(()=>{let s=class s{};s.\u0275fac=function(i){return new(i||s)},s.\u0275mod=vi({type:s}),s.\u0275inj=Ti({providers:[un,K,_n,hn,Pt,Be,Li,gn,Ne,xt,At,Dt,Rt],imports:[ln,Yn,sn,cn.withConfig({warnOnNgModelWithFormControl:"never"}),Ln,Vn,Cn]});let n=s;return n})();export{Tu as TicketingModule};
