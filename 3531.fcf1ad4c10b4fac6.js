"use strict";(self.webpackChunkntk_cms_web=self.webpackChunkntk_cms_web||[]).push([[3531],{9654:(U,C,i)=>{i.d(C,{B:()=>t});var f=i(4537);let t=(()=>{class p{transform(m,_){if(!_||0===_.length)return"";const M=_.find(v=>v.key===m||v.value===m);return M?M.description:""}static \u0275fac=function(_){return new(_||p)};static \u0275pipe=f.Yjl({name:"enums",type:p,pure:!0})}return p})()},7907:(U,C,i)=>{i.d(C,{H:()=>E});var f=i(4536),t=i(4511),p=i(656),e=i(4537),m=i(2607),_=i(6707),M=i(4032),v=i(8692),T=i(5738),I=i(6866),A=i(9654);function S(d,y){1&d&&(e.TgZ(0,"div"),e._UZ(1,"span",13)(2,"br"),e.qZA()),2&d&&(e.xp6(1),e.Q6J("inlineSVG","assets/media/svg/icons/General/Shield-check.svg"))}function P(d,y){if(1&d&&(e.TgZ(0,"div",8)(1,"div",9)(2,"div",10),e._uU(3),e.ALo(4,"translate"),e.qZA(),e.TgZ(5,"div",10),e._uU(6),e.qZA(),e._UZ(7,"div",11),e.qZA(),e.TgZ(8,"div",9)(9,"div",10),e._uU(10),e.ALo(11,"translate"),e.qZA(),e.TgZ(12,"div",10),e.YNc(13,S,3,1,"div",12),e._uU(14),e.ALo(15,"enums"),e.qZA(),e._UZ(16,"div",11),e.qZA(),e.TgZ(17,"div",9)(18,"div",10),e._uU(19),e.ALo(20,"translate"),e.qZA(),e.TgZ(21,"div",10),e._uU(22),e.qZA(),e._UZ(23,"div",11),e.qZA(),e.TgZ(24,"div",9)(25,"div",10),e._uU(26),e.ALo(27,"translate"),e.qZA(),e.TgZ(28,"div",10),e._uU(29),e.qZA(),e._UZ(30,"div",11),e.qZA()()),2&d){const l=e.oxw();e.xp6(3),e.Oqu(e.lcZ(4,11,"TITLE.Transaction_ID")),e.xp6(3),e.Oqu(l.dataModelResult.item.id),e.xp6(4),e.AsE("",e.lcZ(11,13,"TITLE.Transaction_status"),":",l.requestId,""),e.xp6(3),e.Q6J("ngIf",l.dataModelResult.item.transactionStatus===l.TransactionSuccessful),e.xp6(1),e.hij(" ",e.xi3(15,15,l.dataModelResult.item.transactionStatus,l.dataModelEnumTransactionRecordStatusResult.listItems)," "),e.xp6(5),e.hij(" ",e.lcZ(20,18,"TITLE.Amount")," "),e.xp6(3),e.AsE("",l.dataModelResult.item.amount," ",l.dataModelResult.item.currencyUnit,""),e.xp6(4),e.hij("",e.lcZ(27,20,"TITLE.Message")," "),e.xp6(3),e.Oqu(l.dataModelResult.item.lastStatusMessage)}}let E=(()=>{class d{data;bankPaymentTransactionService;dialogRef;bankPaymentEnumService;cmsToastrService;translate;cdr;publicHelper;static nextId=0;id=++d.nextId;requestId=0;constructor(l,c,u,O,R,D,b,L){this.data=l,this.bankPaymentTransactionService=c,this.dialogRef=u,this.bankPaymentEnumService=O,this.cmsToastrService=R,this.translate=D,this.cdr=b,this.publicHelper=L,this.publicHelper.processService.cdr=this.cdr,this.translate.get("MESSAGE.Receiving_information").subscribe(Z=>{this.loading.message=Z}),l&&(this.requestId=+l.id||0)}loading=new p.O;get optionLoading(){return this.loading}set optionLoading(l){this.loading=l}dataModelResult=new t.y$4;dataModelEnumTransactionRecordStatusResult=new t.y$4;ngOnInit(){if(this.requestId<=0)return this.cmsToastrService.typeErrorComponentAction(),void this.dialogRef.close({dialogChangedDate:!1});this.DataGeOne(),this.getEnumTransactionRecordStatus()}getEnumTransactionRecordStatus(){this.bankPaymentEnumService.ServiceTransactionRecordStatusEnum().subscribe({next:l=>{this.dataModelEnumTransactionRecordStatusResult=l}})}TransactionSuccessful=t.VnT.TransactionSuccessful;DataGeOne(){const l=this.constructor.name+"main";this.translate.get("MESSAGE.Receiving_information").subscribe(c=>{this.publicHelper.processService.processStart(l,c,this.constructor.name)}),this.bankPaymentTransactionService.ServiceGetOneById(this.requestId).subscribe({next:c=>{c.isSuccess?this.dataModelResult=c:this.cmsToastrService.typeErrorMessage(c.errorMessage),this.publicHelper.processService.processStop(l)},error:c=>{this.cmsToastrService.typeError(c),this.publicHelper.processService.processStop(l)}})}onFormCancel(){this.dialogRef.close({dialogChangedDate:!0})}static \u0275fac=function(c){return new(c||d)(e.Y36(f.WI),e.Y36(t.zRJ),e.Y36(f.so),e.Y36(t.T7Z),e.Y36(m.e),e.Y36(_.sK),e.Y36(e.sBO),e.Y36(M.i))};static \u0275cmp=e.Xpm({type:d,selectors:[["app-cms-bankpayment-transaction-info"]],inputs:{optionLoading:"optionLoading"},decls:12,vars:9,consts:[[1,"ntk-cms-html-card-header"],[1,"ntk-cms-html-card-body","progressOverlayContainer"],[3,"optionsInfoAreaId"],["class","table",4,"ngIf"],[1,"ntk-cms-html-card-footer"],[1,"form-actions"],["type","button",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-gray",3,"click"],[1,"ft-x"],[1,"table"],[1,"tr"],[1,"td"],[2,"clear","both"],[4,"ngIf"],[1,"svg-icon","svg-icon-3x","svg-icon-primary",3,"inlineSVG"]],template:function(c,u){1&c&&(e.TgZ(0,"div",0),e._uU(1),e.ALo(2,"translate"),e.qZA(),e.TgZ(3,"div",1),e._UZ(4,"app-progress-spinner",2),e.YNc(5,P,31,22,"div",3),e.qZA(),e.TgZ(6,"div",4)(7,"div",5)(8,"button",6),e.NdJ("click",function(){return u.onFormCancel()}),e._UZ(9,"i",7),e._uU(10),e.ALo(11,"translate"),e.qZA()()()),2&c&&(e.xp6(1),e.AsE(" ",e.lcZ(2,5,"TITLE.Transaction_status"),":",u.requestId," "),e.xp6(3),e.Q6J("optionsInfoAreaId",u.constructor.name),e.xp6(1),e.Q6J("ngIf",u.dataModelResult.item&&u.dataModelResult.item.id>0),e.xp6(5),e.hij(" ",e.lcZ(11,7,"ACTION.BACK")," "))},dependencies:[v.O5,T.O,I.d,_.X$,A.B],styles:[".table[_ngcontent-%COMP%]{display:table;border:1px solid #40A1F5}.table[_ngcontent-%COMP%]   .th[_ngcontent-%COMP%]{display:table-row;background-color:#40a1f5;color:#fff;font-weight:700}.table[_ngcontent-%COMP%]   .tr[_ngcontent-%COMP%]:nth-child(odd){background-color:#f9f9f9}.table[_ngcontent-%COMP%]   .tr[_ngcontent-%COMP%]{display:table-row;border-bottom:1px solid #000}.table[_ngcontent-%COMP%]   .td[_ngcontent-%COMP%]{display:table-cell;padding:15px;border-bottom:1px solid #40A1F5}.table[_ngcontent-%COMP%]   .tr[_ngcontent-%COMP%]:last-child   .td[_ngcontent-%COMP%]{border:0}.clear[_ngcontent-%COMP%]{clear:both}"]})}return d})()},6049:(U,C,i)=>{i.d(C,{T:()=>K});var f=i(8239),t=i(4537),p=i(92),e=i(4511),m=i(7445),_=i(1927),M=i(3151),v=i(2147),T=i(1528),I=i(7969),A=i(656),S=i(6707),P=i(4032),E=i(8692),d=i(1637),y=i(1379),l=i(8659),c=i(9665),u=i(5738),O=i(1418);function R(r,g){if(1&r&&(t._UZ(0,"img",13),t.ALo(1,"cmsthumbnail")),2&r){const n=t.oxw();t.s9C("src",t.lcZ(1,1,null==n.dataModelSelect?null:n.dataModelSelect.linkMainImageIdSrc),t.LSH)}}function D(r,g){if(1&r&&(t._UZ(0,"img",13),t.ALo(1,"cmsthumbnail")),2&r){const n=t.oxw().$implicit;t.s9C("src",t.lcZ(1,1,n.linkMainImageIdSrc),t.LSH)}}function b(r,g){if(1&r&&(t.TgZ(0,"mat-option",14),t.YNc(1,D,2,3,"img",15),t.TgZ(2,"span"),t._uU(3),t.qZA()()),2&r){const n=g.$implicit,o=t.oxw();t.Q6J("value",n)("disabled",o.optionDisabled),t.xp6(1),t.Q6J("ngIf",n.linkMainImageIdSrc),t.xp6(2),t.Oqu(o.displayOption(n))}}function L(r,g){1&r&&t._UZ(0,"i",16)}function Z(r,g){1&r&&t._UZ(0,"i",17)}function B(r,g){if(1&r){const n=t.EpF();t.TgZ(0,"i",18),t.NdJ("click",function(){t.CHM(n);const a=t.oxw();return t.KtG(a.onActionSelectClear())}),t.qZA()}}function W(r,g){1&r&&(t.TgZ(0,"em"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&r&&(t.xp6(1),t.hij("(",t.lcZ(2,1,"TITLE.Necessary"),")"))}const x=["*"];let K=(()=>{class r{coreEnumService;translate;cdr;publicHelper;categoryService;static nextId=0;id=++r.nextId;constructor(n,o,a,h,s){this.coreEnumService=n,this.translate=o,this.cdr=a,this.publicHelper=h,this.categoryService=s,this.publicHelper.processService.cdr=this.cdr,this.translate.get("MESSAGE.Receiving_information").subscribe(F=>{this.loading.message=F})}dataModelResult=new e.y$4;dataModelSelect=new e.CWo;formControl=new p.NI;filteredOptions;optionDisabled=!1;optionSelectFirstItem=!1;optionPlaceholder="";optionLabel="";optionRequired=!1;optionChange=new t.vpe;optionReload=()=>this.onActionButtonReload();set optionSelectForce(n){this.onActionSelectForce(n)}loading=new A.O;get optionLoading(){return this.loading}set optionLoading(n){this.loading=n}ngOnInit(){this.loadOptions(),(!this.optionLabel||0==this.optionLabel.length&&this.optionPlaceholder?.length>0)&&(this.optionLabel=this.optionPlaceholder)}loadOptions(){this.filteredOptions=this.formControl.valueChanges.pipe((0,_.O)(""),(0,M.b)(1500),(0,v.x)(),(0,T.w)(n=>this.DataGetAll("string"==typeof n||"number"==typeof n?n:"")))}displayFn(n){return n?n.titleML:void 0}displayOption(n){return n?n.titleML:void 0}dateUseStore=!0;DataGetAll(n){var o=this;return(0,f.Z)(function*(){if(o.dateUseStore&&(o.dataModelResult=yield o.publicHelper.getCurrency(),o.dataModelResult.isSuccess))return o.optionSelectFirstItem&&(!o.dataModelSelect||!o.dataModelSelect.id||o.dataModelSelect.id<=0)&&o.dataModelResult.listItems.length>0&&(o.optionSelectFirstItem=!1,setTimeout(()=>{o.formControl.setValue(o.dataModelResult.listItems[0])},1e3),o.onActionSelect(o.dataModelResult.listItems[0])),o.dataModelResult.listItems;const a=new e.Hay;if(a.rowPerPage=20,a.accessLoad=!0,n&&n.length>0){let s=new e.AO3;s=new e.AO3,s.propertyName="Symbol",s.value=n,s.searchType=e.J6G.Contains,s.clauseType=e.ppe.Or,a.filters.push(s),s=new e.AO3,s.propertyName="Title",s.value=n,s.searchType=e.J6G.Contains,s.clauseType=e.ppe.Or,a.filters.push(s),n&&"number"==typeof+n&&+n>0&&(s=new e.AO3,s.propertyName="Id",s.value=n,s.searchType=e.J6G.Equal,s.clauseType=e.ppe.Or,a.filters.push(s))}const h=o.constructor.name+"ServiceGetAll";return o.translate.get("MESSAGE.Receiving_information").subscribe(s=>{o.publicHelper.processService.processStart(h,s,o.constructor.name)}),o.categoryService.setAccessDataType(e.dR.Viewer),yield(0,m.z)(o.categoryService.ServiceGetAll(a)).then(s=>(o.dataModelResult=s,o.optionSelectFirstItem&&(!o.dataModelSelect||!o.dataModelSelect.id||o.dataModelSelect.id<=0)&&o.dataModelResult.listItems.length>0&&(o.optionSelectFirstItem=!1,setTimeout(()=>{o.formControl.setValue(o.dataModelResult.listItems[0])},1e3),o.onActionSelect(o.dataModelResult.listItems[0])),o.publicHelper.processService.processStop(h),s.listItems))})()}onActionSelect(n){this.optionDisabled||(this.dataModelSelect=n,this.optionChange.emit(this.dataModelSelect))}onActionSelectClear(){this.optionDisabled||(this.dataModelSelect=null,this.formControl.setValue(null),this.optionChange.emit(null))}push(n){return this.filteredOptions.pipe((0,I.U)(o=>(o.find(a=>a.id===n.id)||o.push(n),o)))}onActionSelectForce(n){if("number"==typeof n&&n>0){if(this.dataModelSelect&&this.dataModelSelect.id===n)return;if(this.dataModelResult&&this.dataModelResult.listItems&&this.dataModelResult.listItems.find(o=>o.id===n)){const o=this.dataModelResult.listItems.find(a=>a.id===n);return this.dataModelSelect=o,void this.formControl.setValue(o)}this.categoryService.ServiceGetOneById(n).subscribe({next:o=>{o.isSuccess&&(this.filteredOptions=this.push(o.item),this.dataModelSelect=o.item,this.formControl.setValue(o.item),this.optionChange.emit(o.item))}})}else{if(typeof n==typeof e.CWo)return this.filteredOptions=this.push(n),this.dataModelSelect=n,void this.formControl.setValue(n);this.formControl.setValue(null)}}onActionButtonReload(){this.dataModelSelect=new e.CWo,this.loadOptions()}static \u0275fac=function(o){return new(o||r)(t.Y36(e.FLW),t.Y36(S.sK),t.Y36(t.sBO),t.Y36(P.i),t.Y36(e._GB))};static \u0275cmp=t.Xpm({type:r,selectors:[["app-cms-currency-selector"]],inputs:{optionDisabled:"optionDisabled",optionSelectFirstItem:"optionSelectFirstItem",optionPlaceholder:"optionPlaceholder",optionLabel:"optionLabel",optionRequired:"optionRequired",optionReload:"optionReload",optionSelectForce:"optionSelectForce",optionLoading:"optionLoading"},outputs:{optionChange:"optionChange"},ngContentSelectors:x,decls:17,vars:16,consts:[[1,"input-style","has-borders","has-icon","input-style-always-active","validate-field","mb-4","progressOverlayContainer"],[3,"optionsInfoAreaId"],["matPrefix",""],["class","ntk-hover-zoom","style","vertical-align:middle;","class","ntk-hover-zoom","aria-hidden","","height","25","width","25",3,"src",4,"ngIf"],["type","text","aria-label","Assignee","matInput","","id","forminput",3,"placeholder","formControl","matAutocomplete","required"],["for","forminput",1,"color-highlight"],[3,"displayWith","optionSelected"],["matauto","matAutocomplete"],[3,"value","disabled",4,"ngFor","ngForOf"],["class","fa fa-info  invalid color-red-dark",4,"ngIf"],["class","fa fa-check  valid color-green-dark",4,"ngIf"],["class","fa fa-times  action color-red-dark",3,"click",4,"ngIf"],[4,"ngIf"],["aria-hidden","","height","25","width","25",1,"ntk-hover-zoom",2,"vertical-align","middle",3,"src"],[3,"value","disabled"],["style","vertical-align:middle;","class","ntk-hover-zoom","aria-hidden","","height","25","width","25",3,"src",4,"ngIf"],[1,"fa","fa-info","invalid","color-red-dark"],[1,"fa","fa-check","valid","color-green-dark"],[1,"fa","fa-times","action","color-red-dark",3,"click"]],template:function(o,a){if(1&o&&(t.F$t(),t.TgZ(0,"div",0),t._UZ(1,"app-progress-spinner",1),t.TgZ(2,"span",2),t.YNc(3,R,2,3,"img",3),t._uU(4," \xa0"),t.qZA(),t._UZ(5,"input",4),t.TgZ(6,"label",5),t._uU(7),t.qZA(),t.TgZ(8,"mat-autocomplete",6,7),t.NdJ("optionSelected",function(s){return a.onActionSelect(s.option.value)}),t.YNc(10,b,4,4,"mat-option",8),t.ALo(11,"async"),t.qZA(),t.YNc(12,L,1,0,"i",9),t.YNc(13,Z,1,0,"i",10),t.YNc(14,B,1,0,"i",11),t.YNc(15,W,3,3,"em",12),t.Hsn(16),t.qZA()),2&o){const h=t.MAs(9);t.xp6(1),t.Q6J("optionsInfoAreaId",a.constructor.name),t.xp6(2),t.Q6J("ngIf",a.dataModelSelect&&(null==a.dataModelSelect?null:a.dataModelSelect.linkMainImageIdSrc)),t.xp6(2),t.s9C("placeholder",a.optionPlaceholder),t.Q6J("formControl",a.formControl)("matAutocomplete",h)("required",a.optionRequired),t.uIk("disabled",!!a.optionDisabled||null),t.xp6(2),t.Oqu(a.optionLabel),t.xp6(1),t.Q6J("displayWith",a.displayFn),t.xp6(2),t.Q6J("ngForOf",t.lcZ(11,14,a.filteredOptions)),t.xp6(2),t.Q6J("ngIf",!a.formControl.valid),t.xp6(1),t.Q6J("ngIf",a.optionRequired&&a.formControl.valid),t.xp6(1),t.Q6J("ngIf",(null==a.dataModelSelect?null:a.dataModelSelect.id)>0),t.xp6(1),t.Q6J("ngIf",a.optionRequired&&(!a.dataModelSelect||!a.dataModelSelect.id||a.dataModelSelect.id<=0))}},dependencies:[E.sg,E.O5,p.Fj,p.JJ,p.Q7,p.oH,d.XC,y.ey,d.ZL,l.qo,c.Nt,u.O,E.Ov,S.X$,O.v],encapsulation:2})}return r})()}}]);