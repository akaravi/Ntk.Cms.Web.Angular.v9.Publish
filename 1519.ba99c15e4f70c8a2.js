"use strict";(self.webpackChunkntk_cms_web=self.webpackChunkntk_cms_web||[]).push([[1519],{2317:(G,m,s)=>{s.d(m,{z:()=>B});var h=s(3308),t=s(7788),c=s(7222),l=s(8189),f=s(5804),M=s(965),E=s(8887),g=s(3793),S=s(2831),C=s(3527),O=s(4434),D=s(5154),R=s(2882),p=s(6610),u=s(2497),y=s(8278),I=s(9344),P=s(6182),A=s(4587),v=s(7912);const T=["*"];function L(a,_){if(1&a&&(t.j41(0,"label",8),t.EFF(1),t.k0s()),2&a){const e=t.XpG();t.Mz_("for","app-cms-site-selector-",e.id,""),t.R7$(),t.JRh(e.optionLabel)}}function b(a,_){if(1&a&&(t.j41(0,"mat-option",9)(1,"span"),t.EFF(2),t.k0s()()),2&a){const e=_.$implicit,o=t.XpG();t.Y8G("value",e)("disabled",o.optionDisabled),t.R7$(2),t.JRh(o.displayOption(e))}}function U(a,_){if(1&a){const e=t.RV6();t.j41(0,"mat-icon",10),t.bIt("click",function(){t.eBV(e);const i=t.XpG();return t.Njj(i.onActionSelectClear())}),t.EFF(1,"close"),t.k0s()}}let B=(()=>{class a{static#t=this.nextId=0;constructor(e,o,i,r,n){this.coreEnumService=e,this.cdr=o,this.publicHelper=i,this.translate=r,this.categoryService=n,this.id=++a.nextId,this.dataModelResult=new l.N$V,this.dataModelSelect=new l.UAV,this.loading=new O.o,this.formControl=new c.MJ,this.optionDisabled=!1,this.optionSelectFirstItem=!1,this.optionPlaceholder="",this.optionLabel="",this.optionChange=new t.bkB,this.optionReload=()=>this.onActionButtonReload(),this.publicHelper.processService.cdr=this.cdr,this.translate.get("MESSAGE.Receiving_information").subscribe(d=>{this.loading.message=d})}get optionLoading(){return this.loading}set optionLoading(e){this.loading=e}set optionSelectForce(e){this.onActionSelectForce(e)}ngOnInit(){this.loadOptions(),(!this.optionLabel||0==this.optionLabel.length&&this.optionPlaceholder?.length>0)&&(this.optionLabel=this.optionPlaceholder)}loadOptions(){this.filteredOptions=this.formControl.valueChanges.pipe((0,M.Z)(""),(0,E.B)(1500),(0,g.F)(),(0,S.n)(e=>this.DataGetAll("string"==typeof e||"number"==typeof e?e:"")))}displayFn(e){return e?e.title:void 0}displayOption(e){return e?e.title:void 0}DataGetAll(e){var o=this;return(0,h.A)(function*(){const i=new l.O2i;if(i.rowPerPage=20,i.accessLoad=!0,e&&e.length>0){let n=new l.ycK;n=new l.ycK,n.propertyName="SubDomain",n.value=e,n.searchType=l._GO.Contains,n.clauseType=l.jL_.Or,i.filters.push(n),n=new l.ycK,n.propertyName="Domain",n.value=e,n.searchType=l._GO.Contains,n.clauseType=l.jL_.Or,i.filters.push(n),n=new l.ycK,n.propertyName="Title",n.value=e,n.searchType=l._GO.Contains,n.clauseType=l.jL_.Or,i.filters.push(n),e&&"number"==typeof+e&&+e>0&&(n=new l.ycK,n.propertyName="Id",n.value=e,n.searchType=l._GO.Equal,n.clauseType=l.jL_.Or,i.filters.push(n))}const r=o.constructor.name+"main";return o.translate.get("MESSAGE.Receiving_information").subscribe(n=>{o.publicHelper.processService.processStart(r,n,o.constructor.name)}),yield(0,f._)(o.categoryService.ServiceGetAll(i)).then(n=>(o.dataModelResult=n,o.optionSelectFirstItem&&(!o.dataModelSelect||!o.dataModelSelect.id||o.dataModelSelect.id<=0)&&o.dataModelResult.listItems.length>0&&(o.optionSelectFirstItem=!1,setTimeout(()=>{o.formControl.setValue(o.dataModelResult.listItems[0])},1e3),o.onActionSelect(o.dataModelResult.listItems[0])),o.publicHelper.processService.processStop(r),n.listItems))})()}onActionSelect(e){this.optionDisabled||(this.dataModelSelect=e,this.optionChange.emit(this.dataModelSelect))}onActionSelectClear(){this.optionDisabled||(this.dataModelSelect=null,this.formControl.setValue(null),this.optionChange.emit(null))}push(e){return this.filteredOptions.pipe((0,C.T)(o=>(o.find(i=>i.id===e.id)||o.push(e),o)))}onActionSelectForce(e){if("number"==typeof e&&e>0){if(this.dataModelSelect&&this.dataModelSelect.id===e)return;if(this.dataModelResult&&this.dataModelResult.listItems&&this.dataModelResult.listItems.find(o=>o.id===e)){const o=this.dataModelResult.listItems.find(i=>i.id===e);return this.dataModelSelect=o,void this.formControl.setValue(o)}this.categoryService.ServiceGetOneById(e).subscribe({next:o=>{o.isSuccess&&(this.filteredOptions=this.push(o.item),this.dataModelSelect=o.item,this.formControl.setValue(o.item),this.optionChange.emit(o.item))}})}else{if(typeof e==typeof l.UAV)return this.filteredOptions=this.push(e),this.dataModelSelect=e,void this.formControl.setValue(e);this.formControl.setValue(null)}}onActionButtonReload(){this.dataModelSelect=new l.UAV,this.loadOptions()}static#e=this.\u0275fac=function(o){return new(o||a)(t.rXU(l.i9D),t.rXU(t.gRc),t.rXU(D.A),t.rXU(R.c$),t.rXU(l.WCW))};static#o=this.\u0275cmp=t.VBU({type:a,selectors:[["app-cms-sitecategory-selector"]],inputs:{optionLoading:"optionLoading",optionDisabled:"optionDisabled",optionSelectFirstItem:"optionSelectFirstItem",optionPlaceholder:"optionPlaceholder",optionLabel:"optionLabel",optionReload:"optionReload",optionSelectForce:"optionSelectForce"},outputs:{optionChange:"optionChange"},ngContentSelectors:T,decls:10,vars:13,consts:[["matauto","matAutocomplete"],[1,"input-style","has-borders","no-icon","input-style-always-active","validate-field","mb-4","progressOverlayContainer"],[3,"optionsInfoAreaId"],["class","color-highlight",3,"for",4,"ngIf"],["type","text","matInput","",1,"form-control","validate-name",3,"placeholder","formControl","matAutocomplete","id"],[3,"optionSelected","displayWith"],["class","color-highlight",3,"value","disabled",4,"ngFor","ngForOf"],["matSuffix","","matSuffix","","mat-icon-button","","aria-label","Clear",3,"click",4,"ngIf"],[1,"color-highlight",3,"for"],[1,"color-highlight",3,"value","disabled"],["matSuffix","","matSuffix","","mat-icon-button","","aria-label","Clear",3,"click"]],template:function(o,i){if(1&o){const r=t.RV6();t.NAR(),t.j41(0,"div",1),t.nrm(1,"app-progress-spinner",2),t.DNE(2,L,2,3,"label",3),t.nrm(3,"input",4),t.j41(4,"mat-autocomplete",5,0),t.bIt("optionSelected",function(d){return t.eBV(r),t.Njj(i.onActionSelect(d.option.value))}),t.DNE(6,b,3,3,"mat-option",6),t.nI1(7,"async"),t.k0s(),t.DNE(8,U,2,0,"mat-icon",7),t.SdG(9),t.k0s()}if(2&o){const r=t.sdS(5);t.R7$(),t.Y8G("optionsInfoAreaId",i.constructor.name),t.R7$(),t.Y8G("ngIf",(null==i.optionLabel?null:i.optionLabel.length)>0),t.R7$(),t.FS9("placeholder",i.optionPlaceholder),t.Mz_("id","app-cms-site-selector-",i.id,""),t.Y8G("formControl",i.formControl)("matAutocomplete",r),t.BMQ("disabled",!!i.optionDisabled||null),t.R7$(),t.Y8G("displayWith",i.displayFn),t.R7$(2),t.Y8G("ngForOf",t.bMT(7,11,i.filteredOptions)),t.R7$(2),t.Y8G("ngIf",null==i.dataModelSelect?null:i.dataModelSelect.id)}},dependencies:[p.Sq,p.bT,c.me,c.BC,c.l_,u.$3,y.wT,u.pN,I.yw,P.An,A.fg,v._,p.Jj],encapsulation:2})}return a})()},5435:(G,m,s)=>{s.d(m,{E:()=>B});var h=s(3308),t=s(7788),c=s(7222),l=s(8189),f=s(5804),M=s(965),E=s(8887),g=s(3793),S=s(2831),C=s(3527),O=s(4434),D=s(5154),R=s(2882),p=s(6610),u=s(2497),y=s(8278),I=s(9344),P=s(6182),A=s(4587),v=s(7912);const T=["*"];function L(a,_){if(1&a&&(t.j41(0,"label",8),t.EFF(1),t.k0s()),2&a){const e=t.XpG();t.Mz_("for","app-cms-site-selector-",e.id,""),t.R7$(),t.JRh(e.optionLabel)}}function b(a,_){if(1&a&&(t.j41(0,"mat-option",9)(1,"span"),t.EFF(2),t.k0s()()),2&a){const e=_.$implicit,o=t.XpG();t.Y8G("value",e)("disabled",o.optionDisabled),t.R7$(2),t.JRh(o.displayOption(e))}}function U(a,_){if(1&a){const e=t.RV6();t.j41(0,"mat-icon",10),t.bIt("click",function(){t.eBV(e);const i=t.XpG();return t.Njj(i.onActionSelectClear())}),t.EFF(1,"close"),t.k0s()}}let B=(()=>{class a{static#t=this.nextId=0;constructor(e,o,i,r,n){this.coreEnumService=e,this.cdr=o,this.publicHelper=i,this.translate=r,this.categoryService=n,this.id=++a.nextId,this.dataModelResult=new l.N$V,this.dataModelSelect=new l.fNb,this.loading=new O.o,this.formControl=new c.MJ,this.optionDisabled=!1,this.optionSelectFirstItem=!1,this.optionPlaceholder="",this.optionLabel="",this.optionChange=new t.bkB,this.optionReload=()=>this.onActionButtonReload(),this.publicHelper.processService.cdr=this.cdr,this.translate.get("MESSAGE.Receiving_information").subscribe(d=>{this.loading.message=d})}get optionLoading(){return this.loading}set optionLoading(e){this.loading=e}set optionSelectForce(e){this.onActionSelectForce(e)}ngOnInit(){this.loadOptions(),(!this.optionLabel||0==this.optionLabel.length&&this.optionPlaceholder?.length>0)&&(this.optionLabel=this.optionPlaceholder)}loadOptions(){this.filteredOptions=this.formControl.valueChanges.pipe((0,M.Z)(""),(0,E.B)(1500),(0,g.F)(),(0,S.n)(e=>this.DataGetAll("string"==typeof e||"number"==typeof e?e:"")))}displayFn(e){return e?e.title:void 0}displayOption(e){return e?e.title:void 0}DataGetAll(e){var o=this;return(0,h.A)(function*(){const i=new l.O2i;if(i.rowPerPage=20,i.accessLoad=!0,e&&e.length>0){let n=new l.ycK;n=new l.ycK,n.propertyName="username",n.value=e,n.searchType=l._GO.Contains,n.clauseType=l.jL_.Or,i.filters.push(n),n=new l.ycK,n.propertyName="name",n.value=e,n.searchType=l._GO.Contains,n.clauseType=l.jL_.Or,i.filters.push(n),n=new l.ycK,n.propertyName="email",n.value=e,n.searchType=l._GO.Contains,n.clauseType=l.jL_.Or,i.filters.push(n),n=new l.ycK,n.propertyName="lastname",n.value=e,n.searchType=l._GO.Contains,n.clauseType=l.jL_.Or,i.filters.push(n),e&&"number"==typeof+e&&+e>0&&(n=new l.ycK,n.propertyName="Id",n.value=e,n.searchType=l._GO.Equal,n.clauseType=l.jL_.Or,i.filters.push(n))}const r=o.constructor.name+"main";return o.translate.get("MESSAGE.Receiving_information").subscribe(n=>{o.publicHelper.processService.processStart(r,n,o.constructor.name)}),yield(0,f._)(o.categoryService.ServiceGetAll(i)).then(n=>(o.dataModelResult=n,o.optionSelectFirstItem&&(!o.dataModelSelect||!o.dataModelSelect.id||o.dataModelSelect.id<=0)&&o.dataModelResult.listItems.length>0&&(o.optionSelectFirstItem=!1,setTimeout(()=>{o.formControl.setValue(o.dataModelResult.listItems[0])},1e3),o.onActionSelect(o.dataModelResult.listItems[0])),o.publicHelper.processService.processStop(r),n.listItems))})()}onActionSelect(e){this.optionDisabled||(this.dataModelSelect=e,this.optionChange.emit(this.dataModelSelect))}onActionSelectClear(){this.optionDisabled||(this.dataModelSelect=null,this.formControl.setValue(null),this.optionChange.emit(null))}push(e){return this.filteredOptions.pipe((0,C.T)(o=>(o.find(i=>i.id===e.id)||o.push(e),o)))}onActionSelectForce(e){if("number"==typeof e&&e>0){if(this.dataModelSelect&&this.dataModelSelect.id===e)return;if(this.dataModelResult&&this.dataModelResult.listItems&&this.dataModelResult.listItems.find(o=>o.id===e)){const o=this.dataModelResult.listItems.find(i=>i.id===e);return this.dataModelSelect=o,void this.formControl.setValue(o)}this.categoryService.ServiceGetOneById(e).subscribe({next:o=>{o.isSuccess&&(this.filteredOptions=this.push(o.item),this.dataModelSelect=o.item,this.formControl.setValue(o.item),this.optionChange.emit(o.item))}})}else{if(typeof e==typeof l.fNb)return this.filteredOptions=this.push(e),this.dataModelSelect=e,void this.formControl.setValue(e);this.formControl.setValue(null)}}onActionButtonReload(){this.dataModelSelect=new l.fNb,this.loadOptions()}static#e=this.\u0275fac=function(o){return new(o||a)(t.rXU(l.i9D),t.rXU(t.gRc),t.rXU(D.A),t.rXU(R.c$),t.rXU(l.jmw))};static#o=this.\u0275cmp=t.VBU({type:a,selectors:[["app-cms-usergroup-selector"]],inputs:{optionLoading:"optionLoading",optionDisabled:"optionDisabled",optionSelectFirstItem:"optionSelectFirstItem",optionPlaceholder:"optionPlaceholder",optionLabel:"optionLabel",optionReload:"optionReload",optionSelectForce:"optionSelectForce"},outputs:{optionChange:"optionChange"},ngContentSelectors:T,decls:10,vars:13,consts:[["matauto","matAutocomplete"],[1,"input-style","has-borders","no-icon","input-style-always-active","validate-field","mb-4","progressOverlayContainer"],[3,"optionsInfoAreaId"],["class","color-highlight",3,"for",4,"ngIf"],["type","text","matInput","",1,"form-control","validate-name",3,"placeholder","formControl","matAutocomplete","id"],[3,"optionSelected","displayWith"],["class","color-highlight",3,"value","disabled",4,"ngFor","ngForOf"],["matSuffix","","matSuffix","","mat-icon-button","","aria-label","Clear",3,"click",4,"ngIf"],[1,"color-highlight",3,"for"],[1,"color-highlight",3,"value","disabled"],["matSuffix","","matSuffix","","mat-icon-button","","aria-label","Clear",3,"click"]],template:function(o,i){if(1&o){const r=t.RV6();t.NAR(),t.j41(0,"div",1),t.nrm(1,"app-progress-spinner",2),t.DNE(2,L,2,3,"label",3),t.nrm(3,"input",4),t.j41(4,"mat-autocomplete",5,0),t.bIt("optionSelected",function(d){return t.eBV(r),t.Njj(i.onActionSelect(d.option.value))}),t.DNE(6,b,3,3,"mat-option",6),t.nI1(7,"async"),t.k0s(),t.DNE(8,U,2,0,"mat-icon",7),t.SdG(9),t.k0s()}if(2&o){const r=t.sdS(5);t.R7$(),t.Y8G("optionsInfoAreaId",i.constructor.name),t.R7$(),t.Y8G("ngIf",(null==i.optionLabel?null:i.optionLabel.length)>0),t.R7$(),t.FS9("placeholder",i.optionPlaceholder),t.Mz_("id","app-cms-site-selector-",i.id,""),t.Y8G("formControl",i.formControl)("matAutocomplete",r),t.BMQ("disabled",!!i.optionDisabled||null),t.R7$(),t.Y8G("displayWith",i.displayFn),t.R7$(2),t.Y8G("ngForOf",t.bMT(7,11,i.filteredOptions)),t.R7$(2),t.Y8G("ngIf",null==i.dataModelSelect?null:i.dataModelSelect.id)}},dependencies:[p.Sq,p.bT,c.me,c.BC,c.l_,u.$3,y.wT,u.pN,I.yw,P.An,A.fg,v._,p.Jj],encapsulation:2})}return a})()}}]);