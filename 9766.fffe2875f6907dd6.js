"use strict";(self.webpackChunkntk_cms_web=self.webpackChunkntk_cms_web||[]).push([[9766],{4209:(y,I,s)=>{s.d(I,{Z:()=>D});var t=s(9406),i=s(3527),M=s(7788),u=s(8189);let D=(()=>{class C{constructor(g){this.service=g}transform(g){return!g||g<=0?new t.c:this.service.ServiceGetOneById(g,1e6).pipe((0,i.T)(d=>{var p="";return d.isSuccess&&(d.item.title&&d.item.title.length>0&&(p=d.item.title),d.item.id&&d.item.id>0&&(p.length>0&&(p+=" | "),p+=d.item.id),d.item.domain&&d.item.domain.length>0&&d.item.subDomain&&d.item.subDomain.length>0?(p.length>0&&(p+=" | "),p=p+d.item.subDomain+"."+d.item.domain):d.item.domain&&d.item.domain.length>0&&(p.length>0&&(p+=" | "),p+=d.item.domain)),0===p.length&&(p=g.toString()),p},d=>g.toString()))}static#t=this.\u0275fac=function(d){return new(d||C)(M.rXU(u.kNx,16))};static#e=this.\u0275pipe=M.EJ8({name:"cmssiteinfo",type:C,pure:!0})}return C})()},7848:(y,I,s)=>{s.d(I,{l:()=>b});var t=s(7788),i=s(6610),M=s(2882);let u=(()=>{class n{transform(a,r){if(!a)return[];let E=Object.keys(a);return E=E.filter(O=>O&&O.length>0&&O.toLowerCase().indexOf("antiinjection")<0),r&&r.size>0&&(E=E.filter(O=>O&&O.length>0&&r.has(O))),E}static#t=this.\u0275fac=function(r){return new(r||n)};static#e=this.\u0275pipe=t.EJ8({name:"listkeys",type:n,pure:!0})}return n})();function D(n,m){1&n&&(t.j41(0,"div",6)(1,"div",7),t.EFF(2),t.nI1(3,"translate"),t.k0s(),t.j41(4,"div",7),t.EFF(5),t.nI1(6,"translate"),t.k0s(),t.nrm(7,"div",8),t.k0s()),2&n&&(t.R7$(2),t.JRh(t.bMT(3,2,"TITLE.parameter")),t.R7$(3),t.JRh(t.bMT(6,4,"TITLE.Values")))}function C(n,m){if(1&n&&(t.j41(0,"div",9)(1,"div",7),t.EFF(2),t.k0s(),t.j41(3,"div",7),t.EFF(4),t.k0s(),t.nrm(5,"div",10),t.k0s()),2&n){const a=m.$implicit,r=t.XpG(2);t.R7$(2),t.JRh(r.optionFields&&r.optionFields.size>0?r.optionFields.get(a):a),t.R7$(2),t.JRh(r.dataModel[a])}}function L(n,m){if(1&n&&(t.j41(0,"div",3),t.DNE(1,D,8,6,"div",4)(2,C,6,2,"div",5),t.nI1(3,"listkeys"),t.k0s()),2&n){const a=t.XpG();t.R7$(),t.Y8G("ngIf",a.optionViewHead),t.R7$(),t.Y8G("ngForOf",t.i5U(3,2,a.dataModel,a.optionFields))}}function g(n,m){if(1&n&&(t.j41(0,"div",7),t.EFF(1),t.k0s()),2&n){const a=m.$implicit,r=t.XpG(3);t.R7$(),t.JRh(r.optionFields&&r.optionFields.size>0?r.optionFields.get(a):a)}}function d(n,m){if(1&n&&(t.j41(0,"div",6),t.DNE(1,g,2,1,"div",11),t.nI1(2,"listkeys"),t.nrm(3,"div",8),t.k0s()),2&n){const a=t.XpG(2);t.R7$(),t.Y8G("ngForOf",t.i5U(2,1,a.dataModel[0],a.optionFields))}}function p(n,m){if(1&n&&(t.j41(0,"div",7),t.EFF(1),t.k0s()),2&n){const a=m.$implicit,r=t.XpG().$implicit;t.R7$(),t.JRh(r[a])}}function S(n,m){if(1&n&&(t.j41(0,"div",9),t.DNE(1,p,2,1,"div",11),t.nI1(2,"listkeys"),t.nrm(3,"div",10),t.k0s()),2&n){const a=m.$implicit,r=t.XpG(2);t.R7$(),t.Y8G("ngForOf",t.i5U(2,1,a,r.optionFields))}}function F(n,m){if(1&n&&(t.j41(0,"div",3),t.DNE(1,d,4,4,"div",4)(2,S,4,4,"div",5),t.k0s()),2&n){const a=t.XpG();t.R7$(),t.Y8G("ngIf",a.optionViewHead),t.R7$(),t.Y8G("ngForOf",a.dataModel)}}function l(n,m){if(1&n&&(t.j41(0,"div",7),t.EFF(1),t.k0s()),2&n){const a=m.$implicit,r=t.XpG(3);t.R7$(),t.JRh(r.optionFields&&r.optionFields.size>0?r.optionFields.get(a):a)}}function h(n,m){if(1&n&&(t.j41(0,"div",6),t.DNE(1,l,2,1,"div",11),t.nI1(2,"listkeys"),t.nrm(3,"div",8),t.k0s()),2&n){const a=t.XpG(2);t.R7$(),t.Y8G("ngForOf",t.i5U(2,1,a.dataModel[0],a.optionFields))}}function f(n,m){if(1&n&&(t.j41(0,"div",7),t.EFF(1),t.k0s()),2&n){const a=m.$implicit,r=t.XpG(2);t.R7$(),t.JRh(r.dataModel[a])}}function P(n,m){if(1&n&&(t.j41(0,"div",3),t.DNE(1,h,4,4,"div",4),t.j41(2,"div",9),t.DNE(3,f,2,1,"div",11),t.nI1(4,"listkeys"),t.nrm(5,"div",10),t.k0s()()),2&n){const a=t.XpG();t.R7$(),t.Y8G("ngIf",a.optionViewHead),t.R7$(2),t.Y8G("ngForOf",t.i5U(4,2,a.dataModel,a.optionFields))}}let b=(()=>{class n{static#t=this.nextId=0;constructor(){this.id=++n.nextId,this.optionMethod=1,this.optionViewHead=!0}ngOnInit(){}static#e=this.\u0275fac=function(r){return new(r||n)};static#i=this.\u0275cmp=t.VBU({type:n,selectors:[["app-cms-json-list"]],inputs:{optionMethod:"optionMethod",dataModel:"dataModel",optionFields:"optionFields",optionViewHead:"optionViewHead"},decls:5,vars:3,consts:[[1,"card","card-style"],[1,"content","mb-0"],["class","table",4,"ngIf"],[1,"table"],["class","th",4,"ngIf"],["class","tr",4,"ngFor","ngForOf"],[1,"th"],[1,"td"],[1,"clear"],[1,"tr"],[2,"clear","both"],["class","td",4,"ngFor","ngForOf"]],template:function(r,E){1&r&&(t.j41(0,"div",0)(1,"div",1),t.DNE(2,L,4,5,"div",2)(3,F,3,2,"div",2)(4,P,6,5,"div",2),t.k0s()()),2&r&&(t.R7$(2),t.Y8G("ngIf",1===E.optionMethod&&E.dataModel),t.R7$(),t.Y8G("ngIf",2===E.optionMethod&&E.dataModel),t.R7$(),t.Y8G("ngIf",3===E.optionMethod&&E.dataModel))},dependencies:[i.Sq,i.bT,M.D9,u],styles:[".table[_ngcontent-%COMP%]{display:table;border:1px solid #40A1F5}.table[_ngcontent-%COMP%]   .th[_ngcontent-%COMP%]{display:table-row;background-color:#40a1f5;color:#fff;font-weight:700}.table[_ngcontent-%COMP%]   .tr[_ngcontent-%COMP%]:nth-child(odd){background-color:#f9f9f9}.table[_ngcontent-%COMP%]   .tr[_ngcontent-%COMP%]{display:table-row;border-bottom:1px solid #000}.table[_ngcontent-%COMP%]   .td[_ngcontent-%COMP%]{display:table-cell;padding:15px;border-bottom:1px solid #40A1F5}.table[_ngcontent-%COMP%]   .tr[_ngcontent-%COMP%]:last-child   .td[_ngcontent-%COMP%]{border:0}.clear[_ngcontent-%COMP%]{clear:both}"]})}return n})()},4660:(y,I,s)=>{s.d(I,{p:()=>B});var t=s(3308),i=s(7788),M=s(7222),u=s(8189),D=s(5804),C=s(965),L=s(8887),g=s(3793),d=s(2831),p=s(3527),S=s(2882),F=s(5154),l=s(6610),h=s(2497),f=s(8278),P=s(9344),b=s(6182),n=s(4587),m=s(7912),a=s(8267);const r=["*"];function E(v,T){if(1&v&&(i.j41(0,"label",8),i.EFF(1),i.k0s()),2&v){const e=i.XpG();i.Mz_("for","app-cms-site-selector-",e.id,""),i.R7$(),i.JRh(e.optionLabel)}}function O(v,T){if(1&v&&(i.nrm(0,"img",11),i.nI1(1,"cmsthumbnail")),2&v){const e=i.XpG().$implicit;i.FS9("src",i.bMT(1,1,e.linkImageIdSrc),i.B4B)}}function A(v,T){if(1&v&&(i.j41(0,"mat-option",9),i.DNE(1,O,2,3,"img",10),i.j41(2,"span"),i.EFF(3),i.k0s()()),2&v){const e=T.$implicit,o=i.XpG();i.Y8G("value",e)("disabled",o.optionDisabled),i.R7$(),i.Y8G("ngIf",e.linkImageIdSrc),i.R7$(2),i.JRh(o.displayOption(e))}}function G(v,T){if(1&v){const e=i.RV6();i.j41(0,"mat-icon",12),i.bIt("click",function(){i.eBV(e);const c=i.XpG();return i.Njj(c.onActionSelectClear())}),i.EFF(1,"close"),i.k0s()}}let B=(()=>{class v{static#t=this.nextId=0;constructor(e,o,c,R,_){this.coreEnumService=e,this.translate=o,this.publicHelper=c,this.cdr=R,this.categoryService=_,this.id=++v.nextId,this.dataModelResult=new u.N$V,this.dataModelSelect=new u.skK,this.formControl=new M.MJ,this.optionDisabled=!1,this.optionSelectFirstItem=!1,this.optionPlaceholder="",this.optionLabel="",this.optionChange=new i.bkB,this.optionReload=()=>this.onActionButtonReload(),this.publicHelper.processService.cdr=this.cdr}set optionSelectForce(e){this.onActionSelectForce(e)}ngOnInit(){this.loadOptions(),(!this.optionLabel||0==this.optionLabel.length&&this.optionPlaceholder?.length>0)&&(this.optionLabel=this.optionPlaceholder)}loadOptions(){this.filteredOptions=this.formControl.valueChanges.pipe((0,C.Z)(""),(0,L.B)(1500),(0,g.F)(),(0,d.n)(e=>this.DataGetAll("string"==typeof e||"number"==typeof e?e:"")))}displayFn(e){return e&&e.virtual_Parent&&e.virtual_Parent.title.length>0&&e.virtual_Parent.virtual_Parent&&e.virtual_Parent.virtual_Parent.title.length>0&&e.virtual_Parent.virtual_Parent.virtual_Parent&&e.virtual_Parent.virtual_Parent.virtual_Parent.title.length>0?e.virtual_Parent.virtual_Parent.virtual_Parent.titleML+" > "+e.virtual_Parent.virtual_Parent.titleML+" > "+e.virtual_Parent.titleML+" > "+e.titleML:e&&e.virtual_Parent&&e.virtual_Parent.title.length>0&&e.virtual_Parent.virtual_Parent&&e.virtual_Parent.virtual_Parent.title.length>0?e.virtual_Parent.virtual_Parent.titleML+" > "+e.virtual_Parent.titleML+" > "+e.titleML:e&&e.virtual_Parent&&e.virtual_Parent.title.length>0?e.virtual_Parent.titleML+" > "+e.titleML:e?e.titleML:void 0}displayOption(e){return e&&e.virtual_Parent&&e.virtual_Parent.title.length>0&&e.virtual_Parent.virtual_Parent&&e.virtual_Parent.virtual_Parent.title.length>0&&e.virtual_Parent.virtual_Parent.virtual_Parent&&e.virtual_Parent.virtual_Parent.virtual_Parent.title.length>0?e.virtual_Parent.virtual_Parent.virtual_Parent.titleML+" > "+e.virtual_Parent.virtual_Parent.titleML+" > "+e.virtual_Parent.titleML+" > "+e.titleML:e&&e.virtual_Parent&&e.virtual_Parent.title.length>0&&e.virtual_Parent.virtual_Parent&&e.virtual_Parent.virtual_Parent.title.length>0?e.virtual_Parent.virtual_Parent.titleML+" > "+e.virtual_Parent.titleML+" > "+e.titleML:e&&e.virtual_Parent&&e.virtual_Parent.title.length>0?e.virtual_Parent.titleML+" > "+e.titleML:e?e.titleML:void 0}DataGetAll(e){var o=this;return(0,t.A)(function*(){const c=new u.O2i;if(c.rowPerPage=20,c.accessLoad=!0,e&&e.length>0){let _=new u.ycK;_=new u.ycK,_.propertyName="Symbol",_.value=e,_.searchType=u._GO.Contains,_.clauseType=u.jL_.Or,c.filters.push(_),_=new u.ycK,_.propertyName="Title",_.value=e,_.searchType=u._GO.Contains,_.clauseType=u.jL_.Or,c.filters.push(_),e&&"number"==typeof+e&&+e>0&&(_=new u.ycK,_.propertyName="Id",_.value=e,_.searchType=u._GO.Equal,_.clauseType=u.jL_.Or,c.filters.push(_))}const R=o.constructor.name+"main";return o.translate.get("MESSAGE.Receiving_information").subscribe(_=>{o.publicHelper.processService.processStart(R,_,o.constructor.name)}),yield(0,D._)(o.categoryService.ServiceGetAll(c)).then(_=>(o.dataModelResult=_,o.optionSelectFirstItem&&(!o.dataModelSelect||!o.dataModelSelect.id||o.dataModelSelect.id<=0)&&o.dataModelResult.listItems.length>0&&(o.optionSelectFirstItem=!1,setTimeout(()=>{o.formControl.setValue(o.dataModelResult.listItems[0])},1e3),o.onActionSelect(o.dataModelResult.listItems[0])),o.publicHelper.processService.processStop(R),_.listItems))})()}onActionSelect(e){this.optionDisabled||(this.dataModelSelect=e,this.optionChange.emit(this.dataModelSelect))}onActionSelectClear(){this.optionDisabled||(this.dataModelSelect=null,this.formControl.setValue(null),this.optionChange.emit(null))}push(e){return this.filteredOptions.pipe((0,p.T)(o=>(o.find(c=>c.id===e.id)||o.push(e),o)))}onActionSelectForce(e){if("number"==typeof e&&e>0){if(this.dataModelSelect&&this.dataModelSelect.id===e)return;if(this.dataModelResult&&this.dataModelResult.listItems&&this.dataModelResult.listItems.find(o=>o.id===e)){const o=this.dataModelResult.listItems.find(c=>c.id===e);return this.dataModelSelect=o,void this.formControl.setValue(o)}this.categoryService.ServiceGetOneIncludeParent(e).subscribe({next:o=>{o.isSuccess&&(this.filteredOptions=this.push(o.item),this.dataModelSelect=o.item,this.formControl.setValue(o.item),this.optionChange.emit(o.item))}})}else{if(typeof e==typeof u.skK)return this.filteredOptions=this.push(e),this.dataModelSelect=e,void this.formControl.setValue(e);this.formControl.setValue(null)}}onActionButtonReload(){this.dataModelSelect=new u.skK,this.loadOptions()}static#e=this.\u0275fac=function(o){return new(o||v)(i.rXU(u.i9D),i.rXU(S.c$),i.rXU(F.A),i.rXU(i.gRc),i.rXU(u.QZQ))};static#i=this.\u0275cmp=i.VBU({type:v,selectors:[["app-cms-location-selector"]],inputs:{optionDisabled:"optionDisabled",optionSelectFirstItem:"optionSelectFirstItem",optionPlaceholder:"optionPlaceholder",optionLabel:"optionLabel",optionReload:"optionReload",optionSelectForce:"optionSelectForce"},outputs:{optionChange:"optionChange"},ngContentSelectors:r,decls:10,vars:13,consts:[["matauto","matAutocomplete"],[1,"input-style","has-borders","no-icon","input-style-always-active","validate-field","mb-4","progressOverlayContainer"],[3,"optionsInfoAreaId"],["class","color-highlight",3,"for",4,"ngIf"],["type","text","matInput","",1,"form-control","validate-name",3,"placeholder","formControl","matAutocomplete","id"],[3,"optionSelected","displayWith"],[3,"value","disabled",4,"ngFor","ngForOf"],["matSuffix","","matSuffix","","mat-icon-button","","aria-label","Clear",3,"click",4,"ngIf"],[1,"color-highlight",3,"for"],[3,"value","disabled"],["style","vertical-align:middle;","class","ntk-hover-zoom","aria-hidden","","height","25","width","25",3,"src",4,"ngIf"],["aria-hidden","","height","25","width","25",1,"ntk-hover-zoom",2,"vertical-align","middle",3,"src"],["matSuffix","","matSuffix","","mat-icon-button","","aria-label","Clear",3,"click"]],template:function(o,c){if(1&o){const R=i.RV6();i.NAR(),i.j41(0,"div",1),i.nrm(1,"app-progress-spinner",2),i.DNE(2,E,2,3,"label",3),i.nrm(3,"input",4),i.j41(4,"mat-autocomplete",5,0),i.bIt("optionSelected",function(U){return i.eBV(R),i.Njj(c.onActionSelect(U.option.value))}),i.DNE(6,A,4,4,"mat-option",6),i.nI1(7,"async"),i.k0s(),i.DNE(8,G,2,0,"mat-icon",7),i.SdG(9),i.k0s()}if(2&o){const R=i.sdS(5);i.R7$(),i.Y8G("optionsInfoAreaId",c.constructor.name),i.R7$(),i.Y8G("ngIf",(null==c.optionLabel?null:c.optionLabel.length)>0),i.R7$(),i.FS9("placeholder",c.optionPlaceholder),i.Mz_("id","app-cms-site-selector-",c.id,""),i.Y8G("formControl",c.formControl)("matAutocomplete",R),i.BMQ("disabled",!!c.optionDisabled||null),i.R7$(),i.Y8G("displayWith",c.displayFn),i.R7$(2),i.Y8G("ngForOf",i.bMT(7,11,c.filteredOptions)),i.R7$(2),i.Y8G("ngIf",null==c.dataModelSelect?null:c.dataModelSelect.id)}},dependencies:[l.Sq,l.bT,M.me,M.BC,M.l_,h.$3,f.wT,h.pN,P.yw,b.An,n.fg,m._,l.Jj,a.r],encapsulation:2})}return v})()},9666:(y,I,s)=>{s.d(I,{y:()=>p});var t=s(7788),i=s(7222),M=s(8189),u=s(5154),D=s(9722),C=s(2882),L=s(6610),g=s(1041);function d(S,F){if(1&S){const l=t.RV6();t.j41(0,"li")(1,"mat-checkbox",1),t.bIt("change",function(){const f=t.eBV(l).$implicit,P=t.XpG();return t.Njj(P.onActionSelect(f))}),t.EFF(2),t.k0s()()}if(2&S){const l=F.$implicit,h=t.XpG();t.R7$(),t.Y8G("checked",h.fieldsStatus.get(l.id))("disabled",h.optionDisabled),t.R7$(),t.SpI(" ",l.title," ")}}let p=(()=>{class S{static#t=this.nextId=0;constructor(l,h,f,P,b,n){this.coreEnumService=l,this.categoryService=h,this.cdr=f,this.publicHelper=P,this.cmsToastrService=b,this.translate=n,this.id=++S.nextId,this.dataModelResult=new M.N$V,this.dataModelSelect=[],this.dataIdsSelect=[],this.formControl=new i.MJ,this.fieldsStatus=new Map,this.optionDisabled=!1,this.optionSelectFirstItem=!1,this.optionPlaceholder=new t.bkB,this.optionChange=new t.bkB,this.optionSelectAdded=new t.bkB,this.optionSelectRemoved=new t.bkB,this.optionReload=()=>this.onActionButtonReload(),this.publicHelper.processService.cdr=this.cdr}set optionSelectForce(l){this.onActionSelectForce(l)}ngOnInit(){this.DataGetAll()}DataGetAll(){const l=new M.O2i;l.rowPerPage=50,l.accessLoad=!0;const h=this.constructor.name+"main";this.translate.get("MESSAGE.Receiving_information").subscribe(f=>{this.publicHelper.processService.processStart(h,f,this.constructor.name)}),this.categoryService.ServiceGetAll(l).subscribe({next:f=>{f.isSuccess&&(this.dataModelResult=f,this.dataModelResult.listItems.forEach(P=>this.fieldsStatus.set(P.id,!1)),this.dataIdsSelect.forEach(P=>this.fieldsStatus.set(P,!0)),this.dataModelResult.listItems.forEach(P=>{this.fieldsStatus.get(P.id)&&this.dataModelSelect.push(P)})),this.publicHelper.processService.processStop(h)},error:f=>{this.cmsToastrService.typeError(f),this.publicHelper.processService.processStop(h)}})}onActionSelect(l){this.fieldsStatus.get(l.id)?(this.fieldsStatus.set(l.id,!1),this.optionSelectRemoved.emit(l),this.dataModelSelect.splice(this.dataModelSelect.indexOf(l),1)):(this.fieldsStatus.set(l.id,!0),this.optionSelectAdded.emit(l),this.dataModelSelect.push(l)),this.optionChange.emit(this.dataModelSelect)}onActionSelectForce(l){typeof l==typeof Array(Number)?l.forEach(h=>{this.dataIdsSelect.push(h)}):typeof l==typeof Array(M.UAV)&&l.forEach(h=>{this.dataIdsSelect.push(h.id)}),this.dataIdsSelect.forEach(h=>this.fieldsStatus.set(h,!0))}onActionButtonReload(){this.DataGetAll()}static#e=this.\u0275fac=function(h){return new(h||S)(t.rXU(M.i9D),t.rXU(M.WCW),t.rXU(t.gRc),t.rXU(u.A),t.rXU(D.k),t.rXU(C.c$))};static#i=this.\u0275cmp=t.VBU({type:S,selectors:[["app-cms-sitecategory-selectionlist"]],inputs:{optionDisabled:"optionDisabled",optionSelectFirstItem:"optionSelectFirstItem",optionPlaceholder:"optionPlaceholder",optionReload:"optionReload",optionSelectForce:"optionSelectForce"},outputs:{optionChange:"optionChange",optionSelectAdded:"optionSelectAdded",optionSelectRemoved:"optionSelectRemoved"},decls:2,vars:1,consts:[[4,"ngFor","ngForOf"],[3,"change","checked","disabled"]],template:function(h,f){1&h&&(t.j41(0,"ul"),t.DNE(1,d,3,3,"li",0),t.k0s()),2&h&&(t.R7$(),t.Y8G("ngForOf",f.dataModelResult.listItems))},dependencies:[L.Sq,g.So],encapsulation:2})}return S})()}}]);