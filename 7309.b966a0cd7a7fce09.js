"use strict";(self.webpackChunkntk_cms_web=self.webpackChunkntk_cms_web||[]).push([[7309],{1704:(L,v,n)=>{n.d(v,{E:()=>I});var f=n(4434),t=n(3279),u=n(6610);const r=[[["","cms-tree-body",""]],[["","cms-tree-header",""]],[["","cms-tree-action",""]],[["","cms-tree-footer",""]]],P=["[cms-tree-body]","[cms-tree-header]","[cms-tree-action]","[cms-tree-footer]"];function g(l,c){1&l&&(t.j41(0,"div",8)(1,"p",9),t.SdG(2,1),t.k0s()())}function M(l,c){1&l&&t.nrm(0,"div",10)}function E(l,c){1&l&&(t.j41(0,"div",11),t.SdG(1,2),t.k0s())}function C(l,c){1&l&&t.nrm(0,"div",12)}function D(l,c){1&l&&t.nrm(0,"div",10)}function S(l,c){1&l&&(t.j41(0,"div",6)(1,"p",13),t.SdG(2,3),t.k0s()())}let I=(()=>{class l{static nextId=0;id=++l.nextId;optionHeaderDisplay=!0;optionActionMainDisplay=!0;optionFooterDisplay=!0;set optionLoading(d){this.loading=d}loading=new f.o;constructor(){}ngOnInit(){}static \u0275fac=function(m){return new(m||l)};static \u0275cmp=t.VBU({type:l,selectors:[["app-cms-html-tree"]],inputs:{optionHeaderDisplay:"optionHeaderDisplay",optionActionMainDisplay:"optionActionMainDisplay",optionFooterDisplay:"optionFooterDisplay",optionLoading:"optionLoading"},ngContentSelectors:P,decls:10,vars:6,consts:[[1,"card","card-style"],[1,"row","justify-content-center","tree-parent"],["class","font-14 opacity-50",4,"ngIf"],["class","divider mb-1",4,"ngIf"],["class","col-12 pe-0 tree-child-hidden",4,"ngIf"],["class","divider mb-1 tree-child-hidden",4,"ngIf"],[1,"col-12","pe-0"],["class","col-12 pe-0",4,"ngIf"],[1,"font-14","opacity-50"],[1,"text-center","mb-2","mt-2","color-highlight","font-600"],[1,"divider","mb-1"],[1,"col-12","pe-0","tree-child-hidden"],[1,"divider","mb-1","tree-child-hidden"],[1,"text-center"]],template:function(m,_){1&m&&(t.NAR(r),t.j41(0,"div",0)(1,"div",1),t.DNE(2,g,3,0,"div",2)(3,M,1,0,"div",3)(4,E,2,0,"div",4)(5,C,1,0,"div",5),t.j41(6,"div",6),t.SdG(7),t.k0s(),t.DNE(8,D,1,0,"div",3)(9,S,3,0,"div",7),t.k0s()()),2&m&&(t.R7$(2),t.Y8G("ngIf",_.optionHeaderDisplay),t.R7$(),t.Y8G("ngIf",_.optionHeaderDisplay),t.R7$(),t.Y8G("ngIf",_.optionActionMainDisplay),t.R7$(),t.Y8G("ngIf",_.optionActionMainDisplay),t.R7$(3),t.Y8G("ngIf",_.optionFooterDisplay),t.R7$(),t.Y8G("ngIf",_.optionFooterDisplay))},dependencies:[u.bT],encapsulation:2})}return l})()},4660:(L,v,n)=>{n.d(v,{p:()=>U});var f=n(3308),t=n(3279),u=n(7222),r=n(8189),P=n(5804),g=n(965),M=n(8887),E=n(3793),C=n(2831),D=n(3527),S=n(4434),I=n(2882),l=n(5154),c=n(6610),d=n(2497),m=n(8278),_=n(5468),y=n(6182),R=n(4587),T=n(7912),A=n(8267);const b=["*"];function B(s,h){if(1&s&&(t.j41(0,"label",8),t.EFF(1),t.k0s()),2&s){const e=t.XpG();t.Mz_("for","app-cms-site-selector-",e.id,""),t.R7$(),t.JRh(e.optionLabel)}}function G(s,h){if(1&s&&(t.nrm(0,"img",11),t.nI1(1,"cmsthumbnail")),2&s){const e=t.XpG().$implicit;t.FS9("src",t.bMT(1,1,e.linkImageIdSrc),t.B4B)}}function F(s,h){if(1&s&&(t.j41(0,"mat-option",9),t.DNE(1,G,2,3,"img",10),t.j41(2,"span"),t.EFF(3),t.k0s()()),2&s){const e=h.$implicit,i=t.XpG();t.Y8G("value",e)("disabled",i.optionDisabled),t.R7$(),t.Y8G("ngIf",e.linkImageIdSrc),t.R7$(2),t.JRh(i.displayOption(e))}}function K(s,h){if(1&s){const e=t.RV6();t.j41(0,"mat-icon",12),t.bIt("click",function(){t.eBV(e);const a=t.XpG();return t.Njj(a.onActionSelectClear())}),t.EFF(1,"close"),t.k0s()}}let U=(()=>{class s{coreEnumService;translate;publicHelper;cdr;categoryService;static nextId=0;id=++s.nextId;constructor(e,i,a,p,o){this.coreEnumService=e,this.translate=i,this.publicHelper=a,this.cdr=p,this.categoryService=o,this.publicHelper.processService.cdr=this.cdr,this.translate.get("MESSAGE.Receiving_information").subscribe(O=>{this.loading.message=O})}dataModelResult=new r.N$V;dataModelSelect=new r.skK;formControl=new u.MJ;filteredOptions;optionDisabled=!1;optionSelectFirstItem=!1;optionPlaceholder="";optionLabel="";optionChange=new t.bkB;optionReload=()=>this.onActionButtonReload();set optionSelectForce(e){this.onActionSelectForce(e)}loading=new S.o;get optionLoading(){return this.loading}set optionLoading(e){this.loading=e}ngOnInit(){this.loadOptions(),(!this.optionLabel||0==this.optionLabel.length&&this.optionPlaceholder?.length>0)&&(this.optionLabel=this.optionPlaceholder)}loadOptions(){this.filteredOptions=this.formControl.valueChanges.pipe((0,g.Z)(""),(0,M.B)(1500),(0,E.F)(),(0,C.n)(e=>this.DataGetAll("string"==typeof e||"number"==typeof e?e:"")))}displayFn(e){return e&&e.virtual_Parent&&e.virtual_Parent.title.length>0&&e.virtual_Parent.virtual_Parent&&e.virtual_Parent.virtual_Parent.title.length>0&&e.virtual_Parent.virtual_Parent.virtual_Parent&&e.virtual_Parent.virtual_Parent.virtual_Parent.title.length>0?e.virtual_Parent.virtual_Parent.virtual_Parent.titleML+" > "+e.virtual_Parent.virtual_Parent.titleML+" > "+e.virtual_Parent.titleML+" > "+e.titleML:e&&e.virtual_Parent&&e.virtual_Parent.title.length>0&&e.virtual_Parent.virtual_Parent&&e.virtual_Parent.virtual_Parent.title.length>0?e.virtual_Parent.virtual_Parent.titleML+" > "+e.virtual_Parent.titleML+" > "+e.titleML:e&&e.virtual_Parent&&e.virtual_Parent.title.length>0?e.virtual_Parent.titleML+" > "+e.titleML:e?e.titleML:void 0}displayOption(e){return e&&e.virtual_Parent&&e.virtual_Parent.title.length>0&&e.virtual_Parent.virtual_Parent&&e.virtual_Parent.virtual_Parent.title.length>0&&e.virtual_Parent.virtual_Parent.virtual_Parent&&e.virtual_Parent.virtual_Parent.virtual_Parent.title.length>0?e.virtual_Parent.virtual_Parent.virtual_Parent.titleML+" > "+e.virtual_Parent.virtual_Parent.titleML+" > "+e.virtual_Parent.titleML+" > "+e.titleML:e&&e.virtual_Parent&&e.virtual_Parent.title.length>0&&e.virtual_Parent.virtual_Parent&&e.virtual_Parent.virtual_Parent.title.length>0?e.virtual_Parent.virtual_Parent.titleML+" > "+e.virtual_Parent.titleML+" > "+e.titleML:e&&e.virtual_Parent&&e.virtual_Parent.title.length>0?e.virtual_Parent.titleML+" > "+e.titleML:e?e.titleML:void 0}DataGetAll(e){var i=this;return(0,f.A)(function*(){const a=new r.O2i;if(a.rowPerPage=20,a.accessLoad=!0,e&&e.length>0){let o=new r.ycK;o=new r.ycK,o.propertyName="Symbol",o.value=e,o.searchType=r._GO.Contains,o.clauseType=r.jL_.Or,a.filters.push(o),o=new r.ycK,o.propertyName="Title",o.value=e,o.searchType=r._GO.Contains,o.clauseType=r.jL_.Or,a.filters.push(o),e&&"number"==typeof+e&&+e>0&&(o=new r.ycK,o.propertyName="Id",o.value=e,o.searchType=r._GO.Equal,o.clauseType=r.jL_.Or,a.filters.push(o))}const p=i.constructor.name+"main";return i.translate.get("MESSAGE.Receiving_information").subscribe(o=>{i.publicHelper.processService.processStart(p,o,i.constructor.name)}),yield(0,P._)(i.categoryService.ServiceGetAll(a)).then(o=>(i.dataModelResult=o,i.optionSelectFirstItem&&(!i.dataModelSelect||!i.dataModelSelect.id||i.dataModelSelect.id<=0)&&i.dataModelResult.listItems.length>0&&(i.optionSelectFirstItem=!1,setTimeout(()=>{i.formControl.setValue(i.dataModelResult.listItems[0])},1e3),i.onActionSelect(i.dataModelResult.listItems[0])),i.publicHelper.processService.processStop(p),o.listItems))})()}onActionSelect(e){this.optionDisabled||(this.dataModelSelect=e,this.optionChange.emit(this.dataModelSelect))}onActionSelectClear(){this.optionDisabled||(this.dataModelSelect=null,this.formControl.setValue(null),this.optionChange.emit(null))}push(e){return this.filteredOptions.pipe((0,D.T)(i=>(i.find(a=>a.id===e.id)||i.push(e),i)))}onActionSelectForce(e){if("number"==typeof e&&e>0){if(this.dataModelSelect&&this.dataModelSelect.id===e)return;if(this.dataModelResult&&this.dataModelResult.listItems&&this.dataModelResult.listItems.find(i=>i.id===e)){const i=this.dataModelResult.listItems.find(a=>a.id===e);return this.dataModelSelect=i,void this.formControl.setValue(i)}this.categoryService.ServiceGetOneIncludeParent(e).subscribe({next:i=>{i.isSuccess&&(this.filteredOptions=this.push(i.item),this.dataModelSelect=i.item,this.formControl.setValue(i.item),this.optionChange.emit(i.item))}})}else{if(typeof e==typeof r.skK)return this.filteredOptions=this.push(e),this.dataModelSelect=e,void this.formControl.setValue(e);this.formControl.setValue(null)}}onActionButtonReload(){this.dataModelSelect=new r.skK,this.loadOptions()}static \u0275fac=function(i){return new(i||s)(t.rXU(r.i9D),t.rXU(I.c$),t.rXU(l.A),t.rXU(t.gRc),t.rXU(r.QZQ))};static \u0275cmp=t.VBU({type:s,selectors:[["app-cms-location-selector"]],inputs:{optionDisabled:"optionDisabled",optionSelectFirstItem:"optionSelectFirstItem",optionPlaceholder:"optionPlaceholder",optionLabel:"optionLabel",optionReload:"optionReload",optionSelectForce:"optionSelectForce",optionLoading:"optionLoading"},outputs:{optionChange:"optionChange"},ngContentSelectors:b,decls:10,vars:13,consts:[["matauto","matAutocomplete"],[1,"input-style","has-borders","no-icon","input-style-always-active","validate-field","mb-4","progressOverlayContainer"],[3,"optionsInfoAreaId"],["class","color-highlight",3,"for",4,"ngIf"],["type","text","matInput","",1,"form-control","validate-name",3,"placeholder","formControl","matAutocomplete","id"],[3,"optionSelected","displayWith"],[3,"value","disabled",4,"ngFor","ngForOf"],["matSuffix","","matSuffix","","mat-icon-button","","aria-label","Clear",3,"click",4,"ngIf"],[1,"color-highlight",3,"for"],[3,"value","disabled"],["style","vertical-align:middle;","class","ntk-hover-zoom","aria-hidden","","height","25","width","25",3,"src",4,"ngIf"],["aria-hidden","","height","25","width","25",1,"ntk-hover-zoom",2,"vertical-align","middle",3,"src"],["matSuffix","","matSuffix","","mat-icon-button","","aria-label","Clear",3,"click"]],template:function(i,a){if(1&i){const p=t.RV6();t.NAR(),t.j41(0,"div",1),t.nrm(1,"app-progress-spinner",2),t.DNE(2,B,2,3,"label",3),t.nrm(3,"input",4),t.j41(4,"mat-autocomplete",5,0),t.bIt("optionSelected",function(O){return t.eBV(p),t.Njj(a.onActionSelect(O.option.value))}),t.DNE(6,F,4,4,"mat-option",6),t.nI1(7,"async"),t.k0s(),t.DNE(8,K,2,0,"mat-icon",7),t.SdG(9),t.k0s()}if(2&i){const p=t.sdS(5);t.R7$(),t.Y8G("optionsInfoAreaId",a.constructor.name),t.R7$(),t.Y8G("ngIf",(null==a.optionLabel?null:a.optionLabel.length)>0),t.R7$(),t.FS9("placeholder",a.optionPlaceholder),t.Mz_("id","app-cms-site-selector-",a.id,""),t.Y8G("formControl",a.formControl)("matAutocomplete",p),t.BMQ("disabled",!!a.optionDisabled||null),t.R7$(),t.Y8G("displayWith",a.displayFn),t.R7$(2),t.Y8G("ngForOf",t.bMT(7,11,a.filteredOptions)),t.R7$(2),t.Y8G("ngIf",null==a.dataModelSelect?null:a.dataModelSelect.id)}},dependencies:[c.Sq,c.bT,u.me,u.BC,u.l_,d.$3,m.wT,d.pN,_.yw,y.An,R.fg,T._,c.Jj,A.r],encapsulation:2})}return s})()}}]);