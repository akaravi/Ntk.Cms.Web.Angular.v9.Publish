"use strict";(self.webpackChunkntk_cms_web=self.webpackChunkntk_cms_web||[]).push([[4126],{5631:(b,u,a)=>{a.d(u,{z:()=>U});var m=a(8239),t=a(4537),p=a(92),i=a(4511),h=a(7445),f=a(1927),g=a(3151),O=a(2147),M=a(1528),C=a(7969),E=a(656),S=a(6707),c=a(8692),d=a(1637),A=a(1379),D=a(8659),y=a(3331),P=a(9665),v=a(5738);function I(s,_){if(1&s&&(t.TgZ(0,"label",8),t._uU(1),t.qZA()),2&s){const e=t.oxw();t.MGl("for","app-cms-site-selector-",e.id,""),t.xp6(1),t.Oqu(e.optionLabel)}}function T(s,_){if(1&s&&(t.TgZ(0,"mat-option",9)(1,"span"),t._uU(2),t.qZA()()),2&s){const e=_.$implicit,o=t.oxw();t.Q6J("value",e)("disabled",o.optionDisabled),t.xp6(2),t.Oqu(o.displayOption(e))}}function L(s,_){if(1&s){const e=t.EpF();t.TgZ(0,"mat-icon",10),t.NdJ("click",function(){t.CHM(e);const l=t.oxw();return t.KtG(l.onActionSelectClear())}),t._uU(1,"close"),t.qZA()}}const R=["*"];let U=(()=>{class s{coreEnumService;cdr;translate;categoryService;static nextId=0;id=++s.nextId;constructor(e,o,l,r){this.coreEnumService=e,this.cdr=o,this.translate=l,this.categoryService=r,this.loading.cdr=this.cdr,this.translate.get("MESSAGE.Receiving_information").subscribe(n=>{this.loading.message=n})}dataModelResult=new i.y$4;dataModelSelect=new i.MCb;loading=new E.O;get optionLoading(){return this.loading}set optionLoading(e){this.loading=e}formControl=new p.NI;filteredOptions;optionDisabled=!1;optionSelectFirstItem=!1;optionPlaceholder="";optionLabel="";optionChange=new t.vpe;optionReload=()=>this.onActionButtonReload();set optionSelectForce(e){this.onActionSelectForce(e)}ngOnInit(){this.loadOptions(),(!this.optionLabel||0==this.optionLabel.length&&this.optionPlaceholder?.length>0)&&(this.optionLabel=this.optionPlaceholder)}loadOptions(){this.filteredOptions=this.formControl.valueChanges.pipe((0,f.O)(""),(0,g.b)(1500),(0,O.x)(),(0,M.w)(e=>this.DataGetAll("string"==typeof e||"number"==typeof e?e:"")))}displayFn(e){return e?e.title:void 0}displayOption(e){return e?e.title:void 0}DataGetAll(e){var o=this;return(0,m.Z)(function*(){const l=new i.Hay;if(l.rowPerPage=20,l.accessLoad=!0,e&&e.length>0){let n=new i.AO3;n=new i.AO3,n.propertyName="SubDomain",n.value=e,n.searchType=i.J6G.Contains,n.clauseType=i.ppe.Or,l.filters.push(n),n=new i.AO3,n.propertyName="Domain",n.value=e,n.searchType=i.J6G.Contains,n.clauseType=i.ppe.Or,l.filters.push(n),n=new i.AO3,n.propertyName="Title",n.value=e,n.searchType=i.J6G.Contains,n.clauseType=i.ppe.Or,l.filters.push(n),e&&"number"==typeof+e&&+e>0&&(n=new i.AO3,n.propertyName="Id",n.value=e,n.searchType=i.J6G.Equal,n.clauseType=i.ppe.Or,l.filters.push(n))}const r=o.constructor.name+"main";return o.loading.Start(r),yield(0,h.z)(o.categoryService.ServiceGetAll(l)).then(n=>(o.dataModelResult=n,o.optionSelectFirstItem&&(!o.dataModelSelect||!o.dataModelSelect.id||o.dataModelSelect.id<=0)&&o.dataModelResult.listItems.length>0&&(o.optionSelectFirstItem=!1,setTimeout(()=>{o.formControl.setValue(o.dataModelResult.listItems[0])},1e3),o.onActionSelect(o.dataModelResult.listItems[0])),o.loading.Stop(r),n.listItems))})()}onActionSelect(e){this.optionDisabled||(this.dataModelSelect=e,this.optionChange.emit(this.dataModelSelect))}onActionSelectClear(){this.optionDisabled||(this.dataModelSelect=null,this.formControl.setValue(null),this.optionChange.emit(null))}push(e){return this.filteredOptions.pipe((0,C.U)(o=>(o.find(l=>l.id===e.id)||o.push(e),o)))}onActionSelectForce(e){if("number"==typeof e&&e>0){if(this.dataModelSelect&&this.dataModelSelect.id===e)return;if(this.dataModelResult&&this.dataModelResult.listItems&&this.dataModelResult.listItems.find(o=>o.id===e)){const o=this.dataModelResult.listItems.find(l=>l.id===e);return this.dataModelSelect=o,void this.formControl.setValue(o)}this.categoryService.ServiceGetOneById(e).subscribe({next:o=>{o.isSuccess&&(this.filteredOptions=this.push(o.item),this.dataModelSelect=o.item,this.formControl.setValue(o.item),this.optionChange.emit(o.item))}})}else{if(typeof e==typeof i.MCb)return this.filteredOptions=this.push(e),this.dataModelSelect=e,void this.formControl.setValue(e);this.formControl.setValue(null)}}onActionButtonReload(){this.dataModelSelect=new i.MCb,this.loadOptions()}static \u0275fac=function(o){return new(o||s)(t.Y36(i.FLW),t.Y36(t.sBO),t.Y36(S.sK),t.Y36(i.PwI))};static \u0275cmp=t.Xpm({type:s,selectors:[["app-cms-sitecategory-selector"]],inputs:{optionLoading:"optionLoading",optionDisabled:"optionDisabled",optionSelectFirstItem:"optionSelectFirstItem",optionPlaceholder:"optionPlaceholder",optionLabel:"optionLabel",optionReload:"optionReload",optionSelectForce:"optionSelectForce"},outputs:{optionChange:"optionChange"},ngContentSelectors:R,decls:10,vars:12,consts:[[1,"input-style","has-borders","no-icon","input-style-always-active","validate-field","mb-4"],[3,"options"],["class","color-highlight",3,"for",4,"ngIf"],["type","text","matInput","",1,"form-control","validate-name",3,"placeholder","formControl","matAutocomplete","id"],[3,"displayWith","optionSelected"],["matauto","matAutocomplete"],["class","color-highlight",3,"value","disabled",4,"ngFor","ngForOf"],["matSuffix","","matSuffix","","mat-icon-button","","aria-label","Clear",3,"click",4,"ngIf"],[1,"color-highlight",3,"for"],[1,"color-highlight",3,"value","disabled"],["matSuffix","","matSuffix","","mat-icon-button","","aria-label","Clear",3,"click"]],template:function(o,l){if(1&o&&(t.F$t(),t.TgZ(0,"div",0),t._UZ(1,"app-progress-spinner",1),t.YNc(2,I,2,2,"label",2),t._UZ(3,"input",3),t.TgZ(4,"mat-autocomplete",4,5),t.NdJ("optionSelected",function(n){return l.onActionSelect(n.option.value)}),t.YNc(6,T,3,3,"mat-option",6),t.ALo(7,"async"),t.qZA(),t.YNc(8,L,2,0,"mat-icon",7),t.Hsn(9),t.qZA()),2&o){const r=t.MAs(5);t.xp6(1),t.Q6J("options",l.loading),t.xp6(1),t.Q6J("ngIf",(null==l.optionLabel?null:l.optionLabel.length)>0),t.xp6(1),t.s9C("placeholder",l.optionPlaceholder),t.MGl("id","app-cms-site-selector-",l.id,""),t.Q6J("formControl",l.formControl)("matAutocomplete",r),t.uIk("disabled",!!l.optionDisabled||null),t.xp6(1),t.Q6J("displayWith",l.displayFn),t.xp6(2),t.Q6J("ngForOf",t.lcZ(7,10,l.filteredOptions)),t.xp6(2),t.Q6J("ngIf",null==l.dataModelSelect?null:l.dataModelSelect.id)}},dependencies:[c.sg,c.O5,p.Fj,p.JJ,p.oH,d.XC,A.ey,d.ZL,D.R9,y.Hw,P.Nt,v.O,c.Ov],encapsulation:2})}return s})()},6586:(b,u,a)=>{a.d(u,{w:()=>U});var m=a(8239),t=a(4537),p=a(92),i=a(4511),h=a(7445),f=a(1927),g=a(3151),O=a(2147),M=a(1528),C=a(7969),E=a(656),S=a(6707),c=a(8692),d=a(1637),A=a(1379),D=a(8659),y=a(3331),P=a(9665),v=a(5738);function I(s,_){if(1&s&&(t.TgZ(0,"label",8),t._uU(1),t.qZA()),2&s){const e=t.oxw();t.MGl("for","app-cms-site-selector-",e.id,""),t.xp6(1),t.Oqu(e.optionLabel)}}function T(s,_){if(1&s&&(t.TgZ(0,"mat-option",9)(1,"span"),t._uU(2),t.qZA()()),2&s){const e=_.$implicit,o=t.oxw();t.Q6J("value",e)("disabled",o.optionDisabled),t.xp6(2),t.Oqu(o.displayOption(e))}}function L(s,_){if(1&s){const e=t.EpF();t.TgZ(0,"mat-icon",10),t.NdJ("click",function(){t.CHM(e);const l=t.oxw();return t.KtG(l.onActionSelectClear())}),t._uU(1,"close"),t.qZA()}}const R=["*"];let U=(()=>{class s{coreEnumService;cdr;translate;categoryService;static nextId=0;id=++s.nextId;constructor(e,o,l,r){this.coreEnumService=e,this.cdr=o,this.translate=l,this.categoryService=r,this.loading.cdr=this.cdr,this.translate.get("MESSAGE.Receiving_information").subscribe(n=>{this.loading.message=n})}dataModelResult=new i.y$4;dataModelSelect=new i.fsQ;loading=new E.O;get optionLoading(){return this.loading}set optionLoading(e){this.loading=e}formControl=new p.NI;filteredOptions;optionDisabled=!1;optionSelectFirstItem=!1;optionPlaceholder="";optionLabel="";optionChange=new t.vpe;optionReload=()=>this.onActionButtonReload();set optionSelectForce(e){this.onActionSelectForce(e)}ngOnInit(){this.loadOptions(),(!this.optionLabel||0==this.optionLabel.length&&this.optionPlaceholder?.length>0)&&(this.optionLabel=this.optionPlaceholder)}loadOptions(){this.filteredOptions=this.formControl.valueChanges.pipe((0,f.O)(""),(0,g.b)(1500),(0,O.x)(),(0,M.w)(e=>this.DataGetAll("string"==typeof e||"number"==typeof e?e:"")))}displayFn(e){return e?e.title:void 0}displayOption(e){return e?e.title:void 0}DataGetAll(e){var o=this;return(0,m.Z)(function*(){const l=new i.Hay;if(l.rowPerPage=20,l.accessLoad=!0,e&&e.length>0){let n=new i.AO3;n=new i.AO3,n.propertyName="username",n.value=e,n.searchType=i.J6G.Contains,n.clauseType=i.ppe.Or,l.filters.push(n),n=new i.AO3,n.propertyName="name",n.value=e,n.searchType=i.J6G.Contains,n.clauseType=i.ppe.Or,l.filters.push(n),n=new i.AO3,n.propertyName="email",n.value=e,n.searchType=i.J6G.Contains,n.clauseType=i.ppe.Or,l.filters.push(n),n=new i.AO3,n.propertyName="lastname",n.value=e,n.searchType=i.J6G.Contains,n.clauseType=i.ppe.Or,l.filters.push(n),e&&"number"==typeof+e&&+e>0&&(n=new i.AO3,n.propertyName="Id",n.value=e,n.searchType=i.J6G.Equal,n.clauseType=i.ppe.Or,l.filters.push(n))}const r=o.constructor.name+"main";return o.loading.Start(r),yield(0,h.z)(o.categoryService.ServiceGetAll(l)).then(n=>(o.dataModelResult=n,o.optionSelectFirstItem&&(!o.dataModelSelect||!o.dataModelSelect.id||o.dataModelSelect.id<=0)&&o.dataModelResult.listItems.length>0&&(o.optionSelectFirstItem=!1,setTimeout(()=>{o.formControl.setValue(o.dataModelResult.listItems[0])},1e3),o.onActionSelect(o.dataModelResult.listItems[0])),o.loading.Stop(r),n.listItems))})()}onActionSelect(e){this.optionDisabled||(this.dataModelSelect=e,this.optionChange.emit(this.dataModelSelect))}onActionSelectClear(){this.optionDisabled||(this.dataModelSelect=null,this.formControl.setValue(null),this.optionChange.emit(null))}push(e){return this.filteredOptions.pipe((0,C.U)(o=>(o.find(l=>l.id===e.id)||o.push(e),o)))}onActionSelectForce(e){if("number"==typeof e&&e>0){if(this.dataModelSelect&&this.dataModelSelect.id===e)return;if(this.dataModelResult&&this.dataModelResult.listItems&&this.dataModelResult.listItems.find(o=>o.id===e)){const o=this.dataModelResult.listItems.find(l=>l.id===e);return this.dataModelSelect=o,void this.formControl.setValue(o)}this.categoryService.ServiceGetOneById(e).subscribe({next:o=>{o.isSuccess&&(this.filteredOptions=this.push(o.item),this.dataModelSelect=o.item,this.formControl.setValue(o.item),this.optionChange.emit(o.item))}})}else{if(typeof e==typeof i.fsQ)return this.filteredOptions=this.push(e),this.dataModelSelect=e,void this.formControl.setValue(e);this.formControl.setValue(null)}}onActionButtonReload(){this.dataModelSelect=new i.fsQ,this.loadOptions()}static \u0275fac=function(o){return new(o||s)(t.Y36(i.FLW),t.Y36(t.sBO),t.Y36(S.sK),t.Y36(i.dyD))};static \u0275cmp=t.Xpm({type:s,selectors:[["app-cms-usergroup-selector"]],inputs:{optionLoading:"optionLoading",optionDisabled:"optionDisabled",optionSelectFirstItem:"optionSelectFirstItem",optionPlaceholder:"optionPlaceholder",optionLabel:"optionLabel",optionReload:"optionReload",optionSelectForce:"optionSelectForce"},outputs:{optionChange:"optionChange"},ngContentSelectors:R,decls:10,vars:12,consts:[[1,"input-style","has-borders","no-icon","input-style-always-active","validate-field","mb-4"],[3,"options"],["class","color-highlight",3,"for",4,"ngIf"],["type","text","matInput","",1,"form-control","validate-name",3,"placeholder","formControl","matAutocomplete","id"],[3,"displayWith","optionSelected"],["matauto","matAutocomplete"],["class","color-highlight",3,"value","disabled",4,"ngFor","ngForOf"],["matSuffix","","matSuffix","","mat-icon-button","","aria-label","Clear",3,"click",4,"ngIf"],[1,"color-highlight",3,"for"],[1,"color-highlight",3,"value","disabled"],["matSuffix","","matSuffix","","mat-icon-button","","aria-label","Clear",3,"click"]],template:function(o,l){if(1&o&&(t.F$t(),t.TgZ(0,"div",0),t._UZ(1,"app-progress-spinner",1),t.YNc(2,I,2,2,"label",2),t._UZ(3,"input",3),t.TgZ(4,"mat-autocomplete",4,5),t.NdJ("optionSelected",function(n){return l.onActionSelect(n.option.value)}),t.YNc(6,T,3,3,"mat-option",6),t.ALo(7,"async"),t.qZA(),t.YNc(8,L,2,0,"mat-icon",7),t.Hsn(9),t.qZA()),2&o){const r=t.MAs(5);t.xp6(1),t.Q6J("options",l.loading),t.xp6(1),t.Q6J("ngIf",(null==l.optionLabel?null:l.optionLabel.length)>0),t.xp6(1),t.s9C("placeholder",l.optionPlaceholder),t.MGl("id","app-cms-site-selector-",l.id,""),t.Q6J("formControl",l.formControl)("matAutocomplete",r),t.uIk("disabled",!!l.optionDisabled||null),t.xp6(1),t.Q6J("displayWith",l.displayFn),t.xp6(2),t.Q6J("ngForOf",t.lcZ(7,10,l.filteredOptions)),t.xp6(2),t.Q6J("ngIf",null==l.dataModelSelect?null:l.dataModelSelect.id)}},dependencies:[c.sg,c.O5,p.Fj,p.JJ,p.oH,d.XC,A.ey,d.ZL,D.R9,y.Hw,P.Nt,v.O,c.Ov],encapsulation:2})}return s})()}}]);