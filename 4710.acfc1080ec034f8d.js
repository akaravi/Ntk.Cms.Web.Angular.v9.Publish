(self.webpackChunkntk_cms_web=self.webpackChunkntk_cms_web||[]).push([[4710],{9081:()=>{window.libpannellum=function(st,E,f){"use strict";function t(q,Rt){var F;q&&((F=E.createElement("canvas")).style.width=F.style.height="100%",q.appendChild(F));var h,i,at,pt,S,P,dt,ot,Et,de,Gt,C,et,V,Nt,Ct,ee,Vt,Ft=["f","b","u","d","l","r"],Ht=["f","r","b","l","u","d"];function ie(c,v){return 1==c.level&&1!=v.level?-1:1==v.level&&1!=c.level?1:v.timestamp-c.timestamp}function ht(c,v){return c.level!=v.level?c.level-v.level:c.diff-v.diff}function _t(c,v,p,T,y,A,w){this.vertices=c,this.side=v,this.level=p,this.x=T,this.y=y;var O="object"==typeof A?A.tileKey:A;O=O.replace("%s",v).replace("%l0",p-1).replace("%l",p).replace("%x",T).replace("%y",y),this.path="object"==typeof A?A[O]:O,this.parentPath=w}function St(c,v,p,T,y,A){if(function te(c,v){var p=Qt(c,v.slice(0,3)),T=Qt(c,v.slice(3,6)),y=Qt(c,v.slice(6,9)),A=Qt(c,v.slice(9,12)),w=p[0]+T[0]+y[0]+A[0];if(-4==w||4==w)return!1;var O=p[1]+T[1]+y[1]+A[1];return-4!=O&&4!=O&&4!=p[2]+T[2]+y[2]+A[2]}(c,p.vertices)){for(var w=[],O=[],k=2,W=[],J=0,U=0;U<4;U++){var rt=H(v,p.vertices.slice(3*U,3*(U+1)));w.push(rt[0]*rt[3]),O.push(rt[1]*rt[3]);var Xt=rt[2]*rt[3];k=Math.min(k,Xt),W.push(Math.abs(w[U])<=1&&Math.abs(O[U])<=1&&Xt>0),J+=W[U]}var Yt=C.cubeResolution*Math.pow(2,p.level-C.maxLevel),lt=Math.ceil(Yt*C.invTileResolution)-1,nt=Yt%C.tileResolution*2,ut=2*Yt%C.tileResolution;if(0===ut&&(ut=C.tileResolution),0===nt&&(nt=2*C.tileResolution),p.level>1&&k>0&&J>0){var ft=0;for(U=0;U<4;U++){var gt=(U+1)%4;if(W[U]||W[gt]){var At=(w[gt]-w[U])*i.drawingBufferWidth/2,tt=(O[gt]-O[U])*i.drawingBufferHeight/2;ut<C.tileResolution&&(p.x==lt?At*=C.tileResolution/ut:p.y==lt&&(tt*=C.tileResolution/ut)),nt<=C.tileResolution&&(p.x==lt&&(At*=2),p.y==lt&&(tt*=2)),ft=Math.max(ft,Math.sqrt(At*At+tt*tt))}}if(ft<=C.tileResolution/2)return}var g=p.vertices,bt=g[0]+g[3]+g[6]+g[9],kt=g[1]+g[4]+g[7]+g[10],mt=g[2]+g[5]+g[8]+g[11],Bt=Math.sqrt(bt*bt+kt*kt+mt*mt),d=Math.asin(mt/Bt),l=Math.atan2(kt,bt)-y;l+=l>Math.PI?-2*Math.PI:l<-Math.PI?2*Math.PI:0,l=Math.abs(l),p.diff=Math.acos(Math.sin(T)*Math.sin(d)+Math.cos(T)*Math.cos(d)*Math.cos(l));for(var n=!1,s=0;s<h.nodeCache.length;s++)if(h.nodeCache[s].path==p.path){n=!0,h.nodeCache[s].timestamp=h.nodeCacheTimestamp++,h.nodeCache[s].diff=p.diff,h.currentNodes.push(h.nodeCache[s]);break}if(n||(p.timestamp=h.nodeCacheTimestamp++,h.currentNodes.push(p),h.nodeCache.push(p)),p.level<C.maxLevel){var o=.5;(p.x==lt||p.y==lt)&&(o=1-C.tileResolution/(C.tileResolution+ut));var R,m=[],vt=o,j=o,$=o,G=U=1-o,wt=U,Lt=U;for(ut<C.tileResolution&&(p.x==lt&&p.y!=lt?(j=.5,wt=.5,("d"==p.side||"u"==p.side)&&($=.5,Lt=.5)):p.x!=lt&&p.y==lt&&(vt=.5,G=.5,("l"==p.side||"r"==p.side)&&($=.5,Lt=.5))),nt<=C.tileResolution&&(p.x==lt&&(vt=0,G=1,("l"==p.side||"r"==p.side)&&($=0,Lt=1)),p.y==lt&&(j=0,wt=1,("d"==p.side||"u"==p.side)&&($=0,Lt=1))),R=new _t(new Float32Array([g[0],g[1],g[2],g[0]*vt+g[3]*G,g[1]*o+g[4]*U,g[2]*$+g[5]*Lt,g[0]*vt+g[6]*G,g[1]*j+g[7]*wt,g[2]*$+g[8]*Lt,g[0]*o+g[9]*U,g[1]*j+g[10]*wt,g[2]*$+g[11]*Lt]),p.side,p.level+1,2*p.x,2*p.y,C.fullpath,p.path),m.push(R),p.x==lt&&nt<=C.tileResolution||(R=new _t(new Float32Array([g[0]*vt+g[3]*G,g[1]*o+g[4]*U,g[2]*$+g[5]*Lt,g[3],g[4],g[5],g[3]*o+g[6]*U,g[4]*j+g[7]*wt,g[5]*$+g[8]*Lt,g[0]*vt+g[6]*G,g[1]*j+g[7]*wt,g[2]*$+g[8]*Lt]),p.side,p.level+1,2*p.x+1,2*p.y,C.fullpath,p.path),m.push(R)),!(p.x==lt&&nt<=C.tileResolution)&&!(p.y==lt&&nt<=C.tileResolution)&&(R=new _t(new Float32Array([g[0]*vt+g[6]*G,g[1]*j+g[7]*wt,g[2]*$+g[8]*Lt,g[3]*o+g[6]*U,g[4]*j+g[7]*wt,g[5]*$+g[8]*Lt,g[6],g[7],g[8],g[9]*vt+g[6]*G,g[10]*o+g[7]*U,g[11]*$+g[8]*Lt]),p.side,p.level+1,2*p.x+1,2*p.y+1,C.fullpath,p.path),m.push(R)),p.y==lt&&nt<=C.tileResolution||(R=new _t(new Float32Array([g[0]*o+g[9]*U,g[1]*j+g[10]*wt,g[2]*$+g[11]*Lt,g[0]*vt+g[6]*G,g[1]*j+g[7]*wt,g[2]*$+g[8]*Lt,g[9]*vt+g[6]*G,g[10]*o+g[7]*U,g[11]*$+g[8]*Lt,g[9],g[10],g[11]]),p.side,p.level+1,2*p.x,2*p.y+1,C.fullpath,p.path),m.push(R)),gt=0;gt<m.length;gt++)St(c,v,m[gt],T,y,A)}}}function ae(){return new Float32Array([-1,1,-1,1,1,-1,1,-1,-1,-1,-1,-1,1,1,1,-1,1,1,-1,-1,1,1,-1,1,-1,1,1,1,1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1,1,-1,1,-1,-1,1,-1,1,1,-1,1,-1,-1,-1,-1,-1,-1,1,1,1,-1,1,1,1,1,-1,1,1,-1,-1])}function Zt(c,v,p){var T=Math.sin(v),y=Math.cos(v);return"x"==p?new Float32Array([c[0],y*c[1]+T*c[2],y*c[2]-T*c[1],c[3],y*c[4]+T*c[5],y*c[5]-T*c[4],c[6],y*c[7]+T*c[8],y*c[8]-T*c[7]]):"y"==p?new Float32Array([y*c[0]-T*c[2],c[1],y*c[2]+T*c[0],y*c[3]-T*c[5],c[4],y*c[5]+T*c[3],y*c[6]-T*c[8],c[7],y*c[8]+T*c[6]]):"z"==p?new Float32Array([y*c[0]+T*c[1],y*c[1]-T*c[0],c[2],y*c[3]+T*c[4],y*c[4]-T*c[3],c[5],y*c[6]+T*c[7],y*c[7]-T*c[6],c[8]]):void 0}function Tt(c){return new Float32Array([c[0],c[4],c[8],c[12],c[1],c[5],c[9],c[13],c[2],c[6],c[10],c[14],c[3],c[7],c[11],c[15]])}function _e(c,v,p,T){var y=2*Math.atan(Math.tan(c/2)*i.drawingBufferHeight/i.drawingBufferWidth),A=1/Math.tan(y/2);return new Float32Array([A/v,0,0,0,0,A,0,0,0,0,(T+p)/(p-T),2*T*p/(p-T),0,0,-1,0])}function oe(c,v){i.bindTexture(i.TEXTURE_2D,v),i.texImage2D(i.TEXTURE_2D,0,i.RGB,i.RGB,i.UNSIGNED_BYTE,c),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MAG_FILTER,i.LINEAR),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MIN_FILTER,i.LINEAR),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_S,i.CLAMP_TO_EDGE),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_T,i.CLAMP_TO_EDGE),i.bindTexture(i.TEXTURE_2D,null)}Rt&&(i=Rt),this.init=function(c,v,p,T,y,A,w){if(v===f&&(v="equirectangular"),"equirectangular"!=v&&"cubemap"!=v&&"multires"!=v)throw console.log("Error: invalid image type specified!"),{type:"config error"};if(et=v,C=c,Vt=w||{},h){if(at&&(i.detachShader(h,at),i.deleteShader(at)),pt&&(i.detachShader(h,pt),i.deleteShader(pt)),i.bindBuffer(i.ARRAY_BUFFER,null),i.bindBuffer(i.ELEMENT_ARRAY_BUFFER,null),h.texture&&i.deleteTexture(h.texture),h.nodeCache)for(var O=0;O<h.nodeCache.length;O++)i.deleteTexture(h.nodeCache[O].texture);if(h.textureLoads)for(Q=[];h.textureLoads.length>0;)h.textureLoads.shift()(!1);i.deleteProgram(h),h=f}S&&(P&&(i.detachShader(S,P),i.deleteShader(P)),dt&&(i.detachShader(S,dt),i.deleteShader(dt)),i.deleteProgram(S),S=f),Gt=f;var k,J,W=!1;if("cubemap"==et)for(k=0;k<6;k++)C[k].width>0?(J===f&&(J=C[k].width),J!=C[k].width&&console.log("Cube faces have inconsistent widths: "+J+" vs. "+C[k].width)):W=!0;function U(_){if(W){var R=_*_*4,vt=new Uint8ClampedArray(R),j=w.backgroundColor?w.backgroundColor:[0,0,0];j[0]*=255,j[1]*=255,j[2]*=255;for(var $=0;$<R;$++)vt[$++]=j[0],vt[$++]=j[1],vt[$++]=j[2];var G=new ImageData(vt,_,_);for(k=0;k<6;k++)0==C[k].width&&(C[k]=G)}}if("cubemap"==et&&J&J-1&&(navigator.userAgent.toLowerCase().match(/(iphone|ipod|ipad).* os 8_/)||navigator.userAgent.toLowerCase().match(/(iphone|ipod|ipad).* os 9_/)||navigator.userAgent.toLowerCase().match(/(iphone|ipod|ipad).* os 10_/)||navigator.userAgent.match(/Trident.*rv[ :]*11\./))||(i||(i=F.getContext("experimental-webgl",{alpha:!1,depth:!1})),i&&1286==i.getError()&&me()),i||!("multires"==et&&C.hasOwnProperty("fallbackPath")||"cubemap"==et)||!("WebkitAppearance"in E.documentElement.style)&&!navigator.userAgent.match(/Trident.*rv[ :]*11\./)&&-1===navigator.appVersion.indexOf("MSIE 10")){if(!i)throw console.log("Error: no WebGL support detected!"),{type:"no webgl"};"cubemap"==et&&U(J),C.fullpath=C.basePath?C.basePath+C.path:C.path,C.invTileResolution=1/C.tileResolution;var ut=ae();for(de=[],k=0;k<6;k++)de[k]=ut.slice(12*k,12*k+12),ut=ae();var ft=0;if("equirectangular"==et){if(ft=i.getParameter(i.MAX_TEXTURE_SIZE),Math.max(C.width/2,C.height)>ft)throw console.log("Error: The image is too big; it's "+C.width+"px wide, but this device's maximum supported size is "+2*ft+"px."),{type:"webgl size error",width:C.width,maxWidth:2*ft}}else if("cubemap"==et&&J>i.getParameter(i.MAX_CUBE_MAP_TEXTURE_SIZE))throw console.log("Error: The image is too big; it's "+J+"px wide, but this device's maximum supported size is "+ft+"px."),{type:"webgl size error",width:J,maxWidth:ft};if(w!==f){var gt=isNaN(w.horizonPitch)?0:Number(w.horizonPitch),At=isNaN(w.horizonRoll)?0:Number(w.horizonRoll);(0!=gt||0!=At)&&(Gt=[gt,At])}var tt=i.TEXTURE_2D;if(i.viewport(0,0,i.drawingBufferWidth,i.drawingBufferHeight),i.getShaderPrecisionFormat){var g=i.getShaderPrecisionFormat(i.FRAGMENT_SHADER,i.HIGH_FLOAT);g&&g.precision<1&&(ct=ct.replace("highp","mediump"))}at=i.createShader(i.VERTEX_SHADER);var bt=L;"multires"==et&&(bt=z),i.shaderSource(at,bt),i.compileShader(at),pt=i.createShader(i.FRAGMENT_SHADER);var kt=Z;if("cubemap"==et?(tt=i.TEXTURE_CUBE_MAP,kt=e):"multires"==et&&(kt=Y),i.shaderSource(pt,kt),i.compileShader(pt),h=i.createProgram(),i.attachShader(h,at),i.attachShader(h,pt),i.linkProgram(h),i.getShaderParameter(at,i.COMPILE_STATUS)||console.log(i.getShaderInfoLog(at)),i.getShaderParameter(pt,i.COMPILE_STATUS)||console.log(i.getShaderInfoLog(pt)),i.getProgramParameter(h,i.LINK_STATUS)||console.log(i.getProgramInfoLog(h)),i.useProgram(h),h.drawInProgress=!1,null!==w.backgroundColor){var mt=w.backgroundColor?w.backgroundColor:[0,0,0];i.clearColor(mt[0],mt[1],mt[2],1),i.clear(i.COLOR_BUFFER_BIT)}if(h.texCoordLocation=i.getAttribLocation(h,"a_texCoord"),i.enableVertexAttribArray(h.texCoordLocation),"multires"!=et){if(V||(V=i.createBuffer()),i.bindBuffer(i.ARRAY_BUFFER,V),i.bufferData(i.ARRAY_BUFFER,new Float32Array([-1,1,1,1,1,-1,-1,1,1,-1,-1,-1]),i.STATIC_DRAW),i.vertexAttribPointer(h.texCoordLocation,2,i.FLOAT,!1,0,0),h.aspectRatio=i.getUniformLocation(h,"u_aspectRatio"),i.uniform1f(h.aspectRatio,i.drawingBufferWidth/i.drawingBufferHeight),h.psi=i.getUniformLocation(h,"u_psi"),h.theta=i.getUniformLocation(h,"u_theta"),h.f=i.getUniformLocation(h,"u_f"),h.h=i.getUniformLocation(h,"u_h"),h.v=i.getUniformLocation(h,"u_v"),h.vo=i.getUniformLocation(h,"u_vo"),h.rot=i.getUniformLocation(h,"u_rot"),i.uniform1f(h.h,p/(2*Math.PI)),i.uniform1f(h.v,T/Math.PI),i.uniform1f(h.vo,y/Math.PI*2),"equirectangular"==et&&(h.backgroundColor=i.getUniformLocation(h,"u_backgroundColor"),i.uniform4fv(h.backgroundColor,mt.concat([1]))),h.texture=i.createTexture(),i.bindTexture(tt,h.texture),"cubemap"==et)i.texImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X,0,i.RGB,i.RGB,i.UNSIGNED_BYTE,C[1]),i.texImage2D(i.TEXTURE_CUBE_MAP_NEGATIVE_X,0,i.RGB,i.RGB,i.UNSIGNED_BYTE,C[3]),i.texImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_Y,0,i.RGB,i.RGB,i.UNSIGNED_BYTE,C[4]),i.texImage2D(i.TEXTURE_CUBE_MAP_NEGATIVE_Y,0,i.RGB,i.RGB,i.UNSIGNED_BYTE,C[5]),i.texImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_Z,0,i.RGB,i.RGB,i.UNSIGNED_BYTE,C[0]),i.texImage2D(i.TEXTURE_CUBE_MAP_NEGATIVE_Z,0,i.RGB,i.RGB,i.UNSIGNED_BYTE,C[2]);else if(C.width<=ft)i.uniform1i(i.getUniformLocation(h,"u_splitImage"),0),i.texImage2D(tt,0,i.RGB,i.RGB,i.UNSIGNED_BYTE,C);else{i.uniform1i(i.getUniformLocation(h,"u_splitImage"),1);var Bt=E.createElement("canvas");Bt.width=C.width/2,Bt.height=C.height;var d=Bt.getContext("2d");d.drawImage(C,0,0);var I=d.getImageData(0,0,C.width/2,C.height);i.texImage2D(tt,0,i.RGB,i.RGB,i.UNSIGNED_BYTE,I),h.texture2=i.createTexture(),i.activeTexture(i.TEXTURE1),i.bindTexture(tt,h.texture2),i.uniform1i(i.getUniformLocation(h,"u_image1"),1),d.drawImage(C,-C.width/2,0),I=d.getImageData(0,0,C.width/2,C.height),i.texImage2D(tt,0,i.RGB,i.RGB,i.UNSIGNED_BYTE,I),i.texParameteri(tt,i.TEXTURE_WRAP_S,i.CLAMP_TO_EDGE),i.texParameteri(tt,i.TEXTURE_WRAP_T,i.CLAMP_TO_EDGE),i.texParameteri(tt,i.TEXTURE_MIN_FILTER,i.LINEAR),i.texParameteri(tt,i.TEXTURE_MAG_FILTER,i.LINEAR),i.activeTexture(i.TEXTURE0)}"cubemap"!=et&&C.width&&C.width<=ft&&p==2*Math.PI&&!(C.width&C.width-1)?i.texParameteri(tt,i.TEXTURE_WRAP_S,i.REPEAT):i.texParameteri(tt,i.TEXTURE_WRAP_S,i.CLAMP_TO_EDGE),i.texParameteri(tt,i.TEXTURE_WRAP_T,i.CLAMP_TO_EDGE),i.texParameteri(tt,i.TEXTURE_MIN_FILTER,i.LINEAR),i.texParameteri(tt,i.TEXTURE_MAG_FILTER,i.LINEAR)}else if(h.vertPosLocation=i.getAttribLocation(h,"a_vertCoord"),i.enableVertexAttribArray(h.vertPosLocation),Nt||(Nt=i.createBuffer()),Ct||(Ct=i.createBuffer()),ee||(ee=i.createBuffer()),i.bindBuffer(i.ARRAY_BUFFER,Ct),i.bufferData(i.ARRAY_BUFFER,new Float32Array([0,0,1,0,1,1,0,1]),i.STATIC_DRAW),i.vertexAttribPointer(h.texCoordLocation,2,i.FLOAT,!1,0,0),i.bindBuffer(i.ELEMENT_ARRAY_BUFFER,ee),i.bufferData(i.ELEMENT_ARRAY_BUFFER,new Uint16Array([0,1,2,0,2,3]),i.STATIC_DRAW),i.bindBuffer(i.ARRAY_BUFFER,Nt),i.vertexAttribPointer(h.vertPosLocation,3,i.FLOAT,!1,0,0),h.perspUniform=i.getUniformLocation(h,"u_perspMatrix"),h.cubeUniform=i.getUniformLocation(h,"u_cubeMatrix"),h.currentNodes=[],h.nodeCache=[],h.nodeCacheTimestamp=0,h.textureLoads=[],C.shtHash||C.equirectangularThumbnail){P=i.createShader(i.VERTEX_SHADER),i.shaderSource(P,L),i.compileShader(P),dt=i.createShader(i.FRAGMENT_SHADER),i.shaderSource(dt,Z),i.compileShader(dt),S=i.createProgram(),i.attachShader(S,P),i.attachShader(S,dt),i.linkProgram(S),i.getShaderParameter(P,i.COMPILE_STATUS)||console.log(i.getShaderInfoLog(P)),i.getShaderParameter(dt,i.COMPILE_STATUS)||console.log(i.getShaderInfoLog(dt)),i.getProgramParameter(S,i.LINK_STATUS)||console.log(i.getProgramInfoLog(S)),i.useProgram(S),S.texCoordLocation=i.getAttribLocation(S,"a_texCoord"),i.enableVertexAttribArray(S.texCoordLocation),V||(V=i.createBuffer()),i.bindBuffer(i.ARRAY_BUFFER,V),i.bufferData(i.ARRAY_BUFFER,new Float32Array([-1,1,1,1,1,-1,-1,1,1,-1,-1,-1]),i.STATIC_DRAW),i.vertexAttribPointer(S.texCoordLocation,2,i.FLOAT,!1,0,0),S.aspectRatio=i.getUniformLocation(S,"u_aspectRatio"),i.uniform1f(S.aspectRatio,i.drawingBufferWidth/i.drawingBufferHeight),S.psi=i.getUniformLocation(S,"u_psi"),S.theta=i.getUniformLocation(S,"u_theta"),S.f=i.getUniformLocation(S,"u_f"),S.h=i.getUniformLocation(S,"u_h"),S.v=i.getUniformLocation(S,"u_v"),S.vo=i.getUniformLocation(S,"u_vo"),S.rot=i.getUniformLocation(S,"u_rot"),i.uniform1f(S.h,1),S.texture=i.createTexture(),i.bindTexture(tt,S.texture);var l,n,s,o=function(){i.useProgram(S),i.uniform1i(i.getUniformLocation(S,"u_splitImage"),0),i.texImage2D(tt,0,i.RGBA,i.RGBA,i.UNSIGNED_BYTE,l),i.texParameteri(tt,i.TEXTURE_WRAP_S,i.REPEAT),i.texParameteri(tt,i.TEXTURE_WRAP_T,i.CLAMP_TO_EDGE),i.texParameteri(tt,i.TEXTURE_MIN_FILTER,i.LINEAR),i.texParameteri(tt,i.TEXTURE_MAG_FILTER,i.LINEAR),i.uniform1f(S.v,n),i.uniform1f(S.vo,s),i.useProgram(h)};if(C.shtHash&&(l=function $t(c){if(Mt.length<1)for(var v=jt.length/32,p=0;p<32;p++){Mt.push([]);for(var T=0;T<v;T++)Mt[p].push(se(Ut(jt[p*v+T],1),41)*fe)}Ut(c[0],1);var A=255*(se(Ut(c[1],1),41)+1)/2,w=Ut(c.slice(2),2),O=[],k=[],W=[];for(p=0;p<w.length;p++){var J=ce(w[p],A);O.push(J[0]),k.push(J[1]),W.push(J[2])}var U=.03125*Math.PI,rt=[];for(p=31;p>=0;p--)for(T=0;T<64;T++)rt.push(Wt(O,Mt[p],(T+.5)*U)),rt.push(Wt(k,Mt[p],(T+.5)*U)),rt.push(Wt(W,Mt[p],(T+.5)*U)),rt.push(255);return new ImageData(new Uint8ClampedArray(rt),64,32)}(C.shtHash),n=(2+1/31)/2,s=1-(2+1/31)/2,o()),C.equirectangularThumbnail)if("string"==typeof C.equirectangularThumbnail){if("data:"!=C.equirectangularThumbnail.slice(0,5))throw console.log("Error: thumbnail string is not a data URI!"),{type:"config error"};(l=new Image).onload=function(){n=1,s=0,o()},l.src=C.equirectangularThumbnail}else l=C.equirectangularThumbnail,n=1,s=0,o();i.bindBuffer(i.ARRAY_BUFFER,Nt),i.vertexAttribPointer(h.vertPosLocation,3,i.FLOAT,!1,0,0),i.useProgram(h)}var m=i.getError();if(0!==m)throw console.log("Error: Something went wrong with WebGL!",m),{type:"webgl error"};A()}else{var rt;Et&&q.removeChild(Et),(Et=E.createElement("div")).className="pnlm-world",rt=C.basePath?C.basePath+C.fallbackPath:C.fallbackPath;var Xt=0,Yt=function(){var _=E.createElement("canvas");_.className="pnlm-face pnlm-"+Ht[this.side]+"face",Et.appendChild(_);var R=_.getContext("2d");_.style.width=this.width+4+"px",_.style.height=this.height+4+"px",_.width=this.width+4,_.height=this.height+4,R.drawImage(this,2,2);var $,G,vt=R.getImageData(0,0,_.width,_.height),j=vt.data;for($=2;$<_.width-2;$++)for(G=0;G<4;G++)j[4*($+_.width)+G]=j[4*($+2*_.width)+G],j[4*($+_.width*(_.height-2))+G]=j[4*($+_.width*(_.height-3))+G];for($=2;$<_.height-2;$++)for(G=0;G<4;G++)j[4*($*_.width+1)+G]=j[4*($*_.width+2)+G],j[4*(($+1)*_.width-2)+G]=j[4*(($+1)*_.width-3)+G];for(G=0;G<4;G++)j[4*(_.width+1)+G]=j[4*(2*_.width+2)+G],j[4*(2*_.width-2)+G]=j[4*(3*_.width-3)+G],j[4*(_.width*(_.height-2)+1)+G]=j[4*(_.width*(_.height-3)+2)+G],j[4*(_.width*(_.height-1)-2)+G]=j[4*(_.width*(_.height-2)-3)+G];for($=1;$<_.width-1;$++)for(G=0;G<4;G++)j[4*$+G]=j[4*($+_.width)+G],j[4*($+_.width*(_.height-1))+G]=j[4*($+_.width*(_.height-2))+G];for($=1;$<_.height-1;$++)for(G=0;G<4;G++)j[$*_.width*4+G]=j[4*($*_.width+1)+G],j[4*(($+1)*_.width-1)+G]=j[4*(($+1)*_.width-2)+G];for(G=0;G<4;G++)j[G]=j[4*(_.width+1)+G],j[4*(_.width-1)+G]=j[4*(2*_.width-2)+G],j[_.width*(_.height-1)*4+G]=j[4*(_.width*(_.height-2)+1)+G],j[4*(_.width*_.height-1)+G]=j[4*(_.width*(_.height-1)-2)+G];R.putImageData(vt,0,0),lt.call(this)},lt=function(){this.width>0?(ot===f&&(ot=this.width),ot!=this.width&&console.log("Fallback faces have inconsistent widths: "+ot+" vs. "+this.width)):W=!0,6==++Xt&&(ot=this.width,q.appendChild(Et),A())};for(W=!1,k=0;k<6;k++){var nt=new Image;nt.crossOrigin=Vt.crossOrigin?Vt.crossOrigin:"anonymous",nt.side=k,nt.onload=Yt,nt.onerror=lt,nt.src="multires"==et?rt.replace("%s",Ht[k])+(C.extension?"."+C.extension:""):C[k].src}U(ot)}},this.destroy=function(){if(q!==f&&(F!==f&&q.contains(F)&&q.removeChild(F),Et!==f&&q.contains(Et)&&q.removeChild(Et)),i){var c=i.getExtension("WEBGL_lose_context");c&&c.loseContext()}},this.resize=function(){var c=st.devicePixelRatio||1;F.width=F.clientWidth*c,F.height=F.clientHeight*c,i&&(1286==i.getError()&&me(),i.viewport(0,0,i.drawingBufferWidth,i.drawingBufferHeight),"multires"!=et?i.uniform1f(h.aspectRatio,F.clientWidth/F.clientHeight):C.shtHash&&(i.useProgram(S),i.uniform1f(S.aspectRatio,F.clientWidth/F.clientHeight),i.useProgram(h)))},F&&this.resize(),this.setPose=function(c,v){c=isNaN(c)?0:Number(c),v=isNaN(v)?0:Number(v),Gt=0==c&&0==v?f:[c,v]},this.render=function(c,v,p,T){var y,w,O=0;if(T===f&&(T={}),T.roll&&(O=T.roll),T.dynamic)var k=T.dynamic;if(Gt!==f){var W=Gt[0],J=Gt[1],U=c,rt=v,Xt=Math.cos(J)*Math.sin(c)*Math.sin(W)+Math.cos(c)*(Math.cos(W)*Math.cos(v)+Math.sin(J)*Math.sin(W)*Math.sin(v)),Yt=-Math.sin(c)*Math.sin(J)+Math.cos(c)*Math.cos(J)*Math.sin(v),lt=Math.cos(J)*Math.cos(W)*Math.sin(c)+Math.cos(c)*(-Math.cos(v)*Math.sin(W)+Math.cos(W)*Math.sin(J)*Math.sin(v));c=Math.asin(Math.max(Math.min(lt,1),-1)),v=Math.atan2(Yt,Xt);var nt=[Math.cos(U)*(Math.sin(J)*Math.sin(W)*Math.cos(rt)-Math.cos(W)*Math.sin(rt)),Math.cos(U)*Math.cos(J)*Math.cos(rt),Math.cos(U)*(Math.cos(W)*Math.sin(J)*Math.cos(rt)+Math.sin(rt)*Math.sin(W))],ut=[-Math.cos(c)*Math.sin(v),Math.cos(c)*Math.cos(v)],ft=Math.acos(Math.max(Math.min((nt[0]*ut[0]+nt[1]*ut[1])/(Math.sqrt(nt[0]*nt[0]+nt[1]*nt[1]+nt[2]*nt[2])*Math.sqrt(ut[0]*ut[0]+ut[1]*ut[1])),1),-1));nt[2]<0&&(ft=2*Math.PI-ft),O+=ft}if(T.hook&&T.hook({gl:i,program:h,previewProgram:S,imageType:et,texCoordBuffer:V,cubeVertBuf:Nt,cubeVertTexCoordBuf:Ct,cubeVertIndBuf:ee}),i||"multires"!=et&&"cubemap"!=et){if("multires"!=et){var kt=2*Math.atan(Math.tan(.5*p)/(i.drawingBufferWidth/i.drawingBufferHeight));y=1/Math.tan(.5*kt),i.uniform1f(h.psi,v),i.uniform1f(h.theta,c),i.uniform1f(h.rot,O),i.uniform1f(h.f,y),!0===k&&"equirectangular"==et&&(i.bindTexture(i.TEXTURE_2D,h.texture),i.texImage2D(i.TEXTURE_2D,0,i.RGB,i.RGB,i.UNSIGNED_BYTE,C)),i.drawArrays(i.TRIANGLES,0,6)}else{var mt=typeof C.shtHash<"u"||typeof C.equirectangularThumbnail<"u",Bt=mt;if(mt&&h.currentNodes.length>=6){Bt=!1;for(var A=0;A<6;A++)if(!h.currentNodes[A].textureLoaded){Bt=!0;break}}Bt&&(i.useProgram(S),i.bindBuffer(i.ARRAY_BUFFER,V),i.vertexAttribPointer(S.texCoordLocation,2,i.FLOAT,!1,0,0),i.bindTexture(i.TEXTURE_2D,S.texture),kt=2*Math.atan(Math.tan(.5*p)/(i.drawingBufferWidth/i.drawingBufferHeight)),y=1/Math.tan(.5*kt),i.uniform1f(S.psi,v),i.uniform1f(S.theta,c),i.uniform1f(S.rot,O),i.uniform1f(S.f,y),i.drawArrays(i.TRIANGLES,0,6),i.bindBuffer(i.ARRAY_BUFFER,Nt),i.vertexAttribPointer(h.vertPosLocation,3,i.FLOAT,!1,0,0),i.useProgram(h));var d=_e(p,i.drawingBufferWidth/i.drawingBufferHeight,.1,100),I=_e(p,i.drawingBufferWidth/i.drawingBufferHeight,-100,100),l=function Jt(){return new Float32Array([1,0,0,0,1,0,0,0,1])}();l=Zt(l,-O,"z"),l=Zt(l,-c,"x"),l=function ue(c){return new Float32Array([c[0],c[1],c[2],0,c[3],c[4],c[5],0,c[6],c[7],c[8],0,0,0,0,1])}(l=Zt(l,v,"y")),i.uniformMatrix4fv(h.perspUniform,!1,Tt(d)),i.uniformMatrix4fv(h.cubeUniform,!1,Tt(l));var n=re(d,l),s=re(I,l);if(h.nodeCache.sort(ie),h.nodeCache.length>200&&h.nodeCache.length>h.currentNodes.length+50)for(var o=h.nodeCache.splice(200,h.nodeCache.length-200),m=0;m<o.length;m++)i.deleteTexture(o[m].texture);for(h.currentNodes=[],w=0;w<6;w++)St(n,s,new _t(de[w],Ft[w],1,0,0,C.fullpath,null),c,v,p);for(h.currentNodes.sort(ht),A=Q.length-1;A>=0;A--)-1===h.currentNodes.indexOf(Q[A].node)&&(Q[A].node.textureLoad=!1,Q.splice(A,1));if(0===Q.length)for(A=0;A<h.currentNodes.length;A++){var R=h.currentNodes[A];if(!R.texture&&!R.textureLoad){R.textureLoad=!0,setTimeout(yt,0,R);break}}h.textureLoads.length>0&&h.textureLoads.shift()(!0),function It(c){if(!h.drawInProgress){h.drawInProgress=!0,c&&i.clear(i.COLOR_BUFFER_BIT);for(var v={},p=0;p<h.currentNodes.length;p++)v[h.currentNodes[p].parentPath]===f&&(v[h.currentNodes[p].parentPath]=0),v[h.currentNodes[p].parentPath]+=!(h.currentNodes[p].textureLoaded>1);for(p=0;p<h.currentNodes.length;p++)h.currentNodes[p].textureLoaded>1&&4!=v[h.currentNodes[p].path]&&(i.bufferData(i.ARRAY_BUFFER,h.currentNodes[p].vertices,i.STATIC_DRAW),i.bindTexture(i.TEXTURE_2D,h.currentNodes[p].texture),i.drawElements(i.TRIANGLES,6,i.UNSIGNED_SHORT,0));h.drawInProgress=!1}}(!mt)}if(T.returnImage!==f)return st.createImageBitmap&&"ImageBitmap"==T.returnImage?createImageBitmap(F):0==T.returnImage.toString().indexOf("image/")?F.toDataURL(T.returnImage):F.toDataURL("image/png")}else{var gt={f:"translate3d(-"+(2+(w=ot/2))+"px, -"+(w+2)+"px, -"+w+"px)",b:"translate3d("+(w+2)+"px, -"+(w+2)+"px, "+w+"px) rotateX(180deg) rotateZ(180deg)",u:"translate3d(-"+(w+2)+"px, -"+w+"px, "+(w+2)+"px) rotateX(270deg)",d:"translate3d(-"+(w+2)+"px, "+w+"px, -"+(w+2)+"px) rotateX(90deg)",l:"translate3d(-"+w+"px, -"+(w+2)+"px, "+(w+2)+"px) rotateX(180deg) rotateY(90deg) rotateZ(180deg)",r:"translate3d("+w+"px, -"+(w+2)+"px, -"+(w+2)+"px) rotateY(270deg)"},At=(y=1/Math.tan(p/2))*F.clientWidth/2+"px",tt="perspective("+At+") translateZ("+At+") rotateX("+c+"rad) rotateY("+v+"rad) ",g=Object.keys(gt);for(A=0;A<6;A++){var bt=Et.querySelector(".pnlm-"+g[A]+"face");bt&&(bt.style.webkitTransform=tt+gt[g[A]],bt.style.transform=tt+gt[g[A]])}}},this.isLoading=function(){if(i&&"multires"==et)for(var c=0;c<h.currentNodes.length;c++)if(!h.currentNodes[c].textureLoaded)return!0;return!1},this.isBaseLoaded=function(){if(h.currentNodes.length>=6){for(var c=0;c<6;c++)if(!h.currentNodes[c].textureLoaded)return!1;return!0}return!1},this.getCanvas=function(){return F};var yt,Q=[],Ot=function(){var p,c=4,v={};function T(){var O=this;this.texture=this.callback=null,this.image=new Image,this.image.crossOrigin=p||"anonymous";var k=function(){h.textureLoads.push(function(W){W&&(O.image.width>0&&O.image.height>0?(oe(O.image,O.texture),O.callback(O.texture,!0)):O.callback(O.texture,!1)),function A(O){if(Q.length){var k=Q.shift();O.loadTexture(k.src,k.texture,k.callback)}else v[c++]=O}(O)})};this.image.addEventListener("load",k),this.image.addEventListener("error",k)}function y(O,k,W,J){this.node=O,this.src=k,this.texture=W,this.callback=J}T.prototype.loadTexture=function(O,k,W){this.texture=k,this.callback=W,this.image.src=O};for(var w=0;w<c;w++)v[w]=new T;return function(O,k,W,J){p=J;var U=i.createTexture();return c?v[--c].loadTexture(k,U,W):Q.push(new y(O,k,U,W)),U}}();if(st.Worker&&st.createImageBitmap){var ne=new Blob(["("+function(){self.onmessage=function(v){var p=v.data[0];fetch(p,{mode:"cors",credentials:"use-credentials"==v.data[1]?"include":"same-origin"}).then(function(y){return y.blob()}).then(function(y){return createImageBitmap(y)}).then(function(y){postMessage([p,!0,y],[y])}).catch(function(){postMessage([p,!1])})}}.toString()+")()"],{type:"application/javascript"}),pe=new Worker(URL.createObjectURL(ne)),x={};pe.onmessage=function(v){var p=v.data[0],T=v.data[1],y=v.data[2];h.textureLoads.push(function(A){var w,O=!1;T&&A&&(w=i.createTexture(),oe(y,w),O=!0);var k=x[p];delete x[p],k!==f&&(k.texture=w,k.textureLoaded=O?2:1)})},yt=function(v){var p=new URL(v.path+(C.extension?"."+C.extension:""),st.location).href;x[p]=v,pe.postMessage([p,Vt.crossOrigin])}}else yt=function Dt(c){Ot(c,c.path+(C.extension?"."+C.extension:""),function(v,p){c.texture=v,c.textureLoaded=p?2:1},Vt.crossOrigin)};function re(c,v){return new Float32Array([c[0]*v[0],c[0]*v[1],c[0]*v[2],0,c[5]*v[4],c[5]*v[5],c[5]*v[6],0,c[10]*v[8],c[10]*v[9],c[10]*v[10],c[11],-v[8],-v[9],-v[10],0])}function H(c,v){return new Float32Array([c[0]*v[0]+c[1]*v[1]+c[2]*v[2],c[4]*v[0]+c[5]*v[1]+c[6]*v[2],c[11]+c[8]*v[0]+c[9]*v[1]+c[10]*v[2],1/(c[12]*v[0]+c[13]*v[1]+c[14]*v[2])])}function Qt(c,v){var p=H(c,v),T=p[0]*p[3],y=p[1]*p[3],A=p[2]*p[3],w=[0,0,0];return T<-1&&(w[0]=-1),T>1&&(w[0]=1),y<-1&&(w[1]=-1),y>1&&(w[1]=1),(A<-1||A>1)&&(w[2]=1),w}function me(){console.log("Reducing canvas size due to error 1286!"),F.width=Math.round(F.width/2),F.height=Math.round(F.height/2)}var le="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz#$%*+,-.:;=?@[]^_{|}~",jt="Bf[ff4fff|ffff0fffffBo@Ri5xag{Jmdf2+WiefCs@Ll7+Vi]Btag6[NmdgCv=Ho9;Qk;7zWiF_GsahDy:ErE?Mn$5+SkS_AyWiD#-CuJ[Iqp6;Nnx?7*SlE$*BxR@FtPA?Jq+%7:NnF*zAzn?CwIG@Ft-Y9?IrG+vA%w:AzGR?Cx*IF@EuI,nA+$*9%Gu:A#xCR?ByJ-VB-*wA+J**9*ZBv:9%L.QD.*aB.O.v9-MF+$8,O:MG:*OD;a:UB:IO:n9:Q:KJ;#IG=u-KE=Hs:MC?T:IO=wEL?#%FJ@K**FI@Y;HV=pDU?*sCS@S.uCR[m;Hp=VDq?*SCs@s.QCt[r:Iw=OEz?#IF$@#*HF%@u:K$;KI+=uEK-=*sCM:?w:M+:HO.;aCU;:%OCn?:z.Q..Ha;.ODv?-yFG$@,$-V;-Hw=+JH*?*lBP:?%%,n=+J*?%GQ:=#NCt?;y++v=%O:=zGt?:xHI,@-u,*z=zX?:wI+@,tEY??%r-$*;xt@,tP=?$qG%[:xn.#-:u$[%qp];xnN?[*sl.y:-r-?yn$^+sks_=yoi:v=*o?;uk;[zoi,_+skh:s@zl[+pi];tkg][xmhg;o@ti^xkg{$mhf|+oigf;f[ff_fff|ffff~fffff",fe=3.317,Mt=[];function se(c,v){return Math.pow((Math.abs(c)-v)/v,2)*(c-v>0?1:-1)}function ce(c,v){var p=Math.floor(c/361),T=Math.floor(c/19)%19,y=c%19;return[se(p,9)*v,se(T,9)*v,se(y,9)*v]}function Ut(c,v){for(var p=Math.floor(c.length/v),T=[],y=0;y<p;y++){for(var A=0,w=0;w<v;w++)A=83*A+le.indexOf(c[y*v+w]);T.push(A)}return T}function Wt(c,v,p){var T=Math.floor(Math.sqrt(c.length))-1,y=Array(T+1),A=Array(T+1);A[0]=0,y[0]=1,A[1]=Math.sin(p),y[1]=Math.cos(p);for(var w=2;w<=T;w++)A[w]=2*A[w-1]*y[1]-A[w-2],y[w]=2*y[w-1]*y[1]-y[w-2];for(var O=0,k=0,W=1;W<=T+1;W++)k+=W;for(var J=T;J>=0;J--){var U=Math.floor((J+1)*J/2);for(O+=0!=U?c[U]*v[U-1]:c[U],w=1;w<=J;w++)O+=(c[++U]*y[w]+c[U+k-J-1]*A[w])*v[U-1]}return Math.round(O)}}var L=["attribute vec2 a_texCoord;","varying vec2 v_texCoord;","void main() {","gl_Position = vec4(a_texCoord, 0.0, 1.0);","v_texCoord = a_texCoord;","}"].join(""),z=["attribute vec3 a_vertCoord;","attribute vec2 a_texCoord;","uniform mat4 u_cubeMatrix;","uniform mat4 u_perspMatrix;","varying mediump vec2 v_texCoord;","void main(void) {","gl_Position = u_perspMatrix * u_cubeMatrix * vec4(a_vertCoord, 1.0);","v_texCoord = a_texCoord;","}"].join(""),ct=["precision highp float;","uniform float u_aspectRatio;","uniform float u_psi;","uniform float u_theta;","uniform float u_f;","uniform float u_h;","uniform float u_v;","uniform float u_vo;","uniform float u_rot;","const float PI = 3.14159265358979323846264;","uniform sampler2D u_image0;","uniform sampler2D u_image1;","uniform bool u_splitImage;","uniform samplerCube u_imageCube;","varying vec2 v_texCoord;","uniform vec4 u_backgroundColor;","void main() {","float x = v_texCoord.x * u_aspectRatio;","float y = v_texCoord.y;","float sinrot = sin(u_rot);","float cosrot = cos(u_rot);","float rot_x = x * cosrot - y * sinrot;","float rot_y = x * sinrot + y * cosrot;","float sintheta = sin(u_theta);","float costheta = cos(u_theta);","float a = u_f * costheta - rot_y * sintheta;","float root = sqrt(rot_x * rot_x + a * a);","float lambda = atan(rot_x / root, a / root) + u_psi;","float phi = atan((rot_y * costheta + u_f * sintheta) / root);"].join("\n"),e=ct+["float cosphi = cos(phi);","gl_FragColor = textureCube(u_imageCube, vec3(cosphi*sin(lambda), sin(phi), cosphi*cos(lambda)));","}"].join("\n"),Z=ct+["lambda = mod(lambda + PI, PI * 2.0) - PI;","vec2 coord = vec2(lambda / PI, phi / (PI / 2.0));","if(coord.x < -u_h || coord.x > u_h || coord.y < -u_v + u_vo || coord.y > u_v + u_vo)","gl_FragColor = u_backgroundColor;","else {","if(u_splitImage) {","if(coord.x < 0.0)","gl_FragColor = texture2D(u_image0, vec2((coord.x + u_h) / u_h, (-coord.y + u_v + u_vo) / (u_v * 2.0)));","else","gl_FragColor = texture2D(u_image1, vec2((coord.x + u_h) / u_h - 1.0, (-coord.y + u_v + u_vo) / (u_v * 2.0)));","} else {","gl_FragColor = texture2D(u_image0, vec2((coord.x + u_h) / (u_h * 2.0), (-coord.y + u_v + u_vo) / (u_v * 2.0)));","}","}","}"].join("\n"),Y=["varying mediump vec2 v_texCoord;","uniform sampler2D u_sampler;","void main(void) {","gl_FragColor = texture2D(u_sampler, v_texCoord);","}"].join("");return{renderer:function(q,Rt,F){return new t(q,Rt,F)}}}(window,document)},6846:()=>{window.pannellum=function(st,E,f){"use strict";function t(L,z){var e,Z,Y,q,ot,C,et,Vt,Ht,ie,Zt,Tt,ct=this,Rt=!1,F=Date.now(),h=0,i=0,at=-1,pt=0,S=0,P=new Array(10),dt=!1,Et=!1,Gt=!1,V={yaw:0,pitch:0,hfov:0},Nt=!1,Ct=!1,ee=0,Ft=0,ht={},It={},_t=[],St=!1,ae=!1,Jt=1e-6,ue=!1,_e=!1,oe={hfov:100,minHfov:50,multiResMinHfov:!1,maxHfov:120,pitch:0,minPitch:f,maxPitch:f,yaw:0,minYaw:-180,maxYaw:180,roll:0,haov:360,vaov:180,vOffset:0,autoRotate:!1,autoRotateInactivityDelay:-1,autoRotateStopDelay:f,type:"equirectangular",northOffset:0,showFullscreenCtrl:!0,dynamic:!1,dynamicUpdate:!1,doubleClickZoom:!0,keyboardZoom:!0,mouseZoom:!0,showZoomCtrl:!0,autoLoad:!1,showControls:!0,orientationOnByDefault:!1,hotSpotDebug:!1,backgroundColor:[0,0,0],avoidShowingBackground:!1,animationTimingFunction:function At(a){return a<.5?2*a*a:(4-2*a)*a-1},draggable:!0,dragConfirm:!1,disableKeyboardCtrl:!1,crossOrigin:"anonymous",targetBlank:!1,touchPanSpeedCoeffFactor:1,capturedKeyNumbers:[16,17,27,37,38,39,40,61,65,68,83,87,107,109,173,187,189],friction:.15,strings:{loadButtonLabel:"Click to<br>Load<br>Panorama",loadingLabel:"Loading...",bylineLabel:"by %s",noPanoramaError:"No panorama image was specified.",fileAccessError:"The file %s could not be accessed.",malformedURLError:"There is something wrong with the panorama URL.",iOS8WebGLError:"Due to iOS 8's broken WebGL implementation, only progressive encoded JPEGs work for your device (this panorama uses standard encoding).",genericWebGLError:"Your browser does not have the necessary WebGL support to display this panorama.",textureSizeError:"This panorama is too big for your device! It's %spx wide, but your device only supports images up to %spx wide. Try another device. (If you're the author, try scaling down the image.)",unknownError:"Unknown error. Check developer console.",twoTouchActivate:"Use two fingers together to pan the panorama.",twoTouchXActivate:"Use two fingers together to pan the panorama horizontally.",twoTouchYActivate:"Use two fingers together to pan the panorama vertically.",ctrlZoomActivate:"Use %s + scroll to zoom the panorama."}};(L="string"==typeof L?E.getElementById(L):L).classList.add("pnlm-container"),L.tabIndex=0;var Q=E.createElement("div");Q.className="pnlm-ui",L.appendChild(Q);var Ot=E.createElement("div");Ot.className="pnlm-render-container",L.appendChild(Ot);var Dt=E.createElement("div");Dt.className="pnlm-dragfix",Q.appendChild(Dt);var yt=E.createElement("span");yt.className="pnlm-about-msg";var ne=E.createElement("a");ne.href="https://pannellum.org/",ne.textContent="Pannellum",yt.appendChild(ne);var pe=E.createElement("span");yt.appendChild(pe),Q.appendChild(yt),Dt.addEventListener("contextmenu",function Wt(a){var r=$t(a);yt.style.left=r.x+"px",yt.style.top=r.y+"px",clearTimeout(Wt.t1),clearTimeout(Wt.t2),yt.style.display="block",yt.style.opacity=1,Wt.t1=setTimeout(function(){yt.style.opacity=0},2e3),Wt.t2=setTimeout(function(){yt.style.display="none"},2500),a.preventDefault()});var x={},re=E.createElement("div");re.className="pnlm-sprite pnlm-hot-spot-debug-indicator",Q.appendChild(re),x.container=E.createElement("div"),x.container.className="pnlm-panorama-info",x.title=E.createElement("div"),x.title.className="pnlm-title-box",x.container.appendChild(x.title),x.author=E.createElement("div"),x.author.className="pnlm-author-box",x.container.appendChild(x.author),Q.appendChild(x.container),x.load={},x.load.box=E.createElement("div"),x.load.box.className="pnlm-load-box",x.load.boxp=E.createElement("p"),x.load.box.appendChild(x.load.boxp),x.load.lbox=E.createElement("div"),x.load.lbox.className="pnlm-lbox",x.load.lbox.innerHTML='<div class="pnlm-loading"></div>',x.load.box.appendChild(x.load.lbox),x.load.lbar=E.createElement("div"),x.load.lbar.className="pnlm-lbar",x.load.lbarFill=E.createElement("div"),x.load.lbarFill.className="pnlm-lbar-fill",x.load.lbar.appendChild(x.load.lbarFill),x.load.box.appendChild(x.load.lbar),x.load.msg=E.createElement("p"),x.load.msg.className="pnlm-lmsg",x.load.box.appendChild(x.load.msg),Q.appendChild(x.load.box),x.errorMsg=E.createElement("div"),x.errorMsg.className="pnlm-error-msg pnlm-info-box",Q.appendChild(x.errorMsg),x.interactionMsg=E.createElement("div"),x.interactionMsg.className="pnlm-interaction-msg pnlm-info-box",Q.appendChild(x.interactionMsg);var H={};H.container=E.createElement("div"),H.container.className="pnlm-controls-container",Q.appendChild(H.container),H.load=E.createElement("button"),H.load.className="pnlm-load-button",H.load.addEventListener("click",function(){$(),Ie()}),Q.appendChild(H.load),H.zoom=E.createElement("div"),H.zoom.className="pnlm-zoom-controls pnlm-controls",H.zoomIn=E.createElement("div"),H.zoomIn.className="pnlm-zoom-in pnlm-sprite pnlm-control",H.zoomIn.addEventListener("click",function Lt(){ot&&(qt(e.hfov-5),g())}),H.zoom.appendChild(H.zoomIn),H.zoomOut=E.createElement("div"),H.zoomOut.className="pnlm-zoom-out pnlm-sprite pnlm-control",H.zoomOut.addEventListener("click",function xe(){ot&&(qt(e.hfov+5),g())}),H.zoom.appendChild(H.zoomOut),H.container.appendChild(H.zoom),H.fullscreen=E.createElement("div"),H.fullscreen.addEventListener("click",G),H.fullscreen.className="pnlm-fullscreen-toggle-button pnlm-sprite pnlm-fullscreen-toggle-button-inactive pnlm-controls pnlm-control",(E.fullscreenEnabled||E.mozFullScreenEnabled||E.webkitFullscreenEnabled||E.msFullscreenEnabled)&&H.container.appendChild(H.fullscreen),H.orientation=E.createElement("div"),H.orientation.addEventListener("click",function(a){Ct?Ce():we()}),H.orientation.addEventListener("mousedown",function(a){a.stopPropagation()}),H.orientation.addEventListener("touchstart",function(a){a.stopPropagation()}),H.orientation.addEventListener("pointerdown",function(a){a.stopPropagation()}),H.orientation.className="pnlm-orientation-button pnlm-orientation-button-inactive pnlm-sprite pnlm-controls pnlm-control";var Qt=!1;st.DeviceOrientationEvent&&"https:"==location.protocol&&(navigator.userAgent.toLowerCase().indexOf("mobi")>=0||navigator.userAgent.indexOf("Mac")>=0&&navigator.maxTouchPoints&&navigator.maxTouchPoints>0)&&(H.container.appendChild(H.orientation),Qt=!0);var te=E.createElement("div");function me(){var a=E.createElement("div");if(a.innerHTML="\x3c!--[if lte IE 9]><i></i><![endif]--\x3e",1!=a.getElementsByTagName("i").length){var r,u;if(Ht=e.hfov,ie=e.pitch,"cubemap"==e.type){for(C=[],r=0;r<6;r++)C.push(new Image),C[r].crossOrigin=e.crossOrigin;x.load.lbox.style.display="block",x.load.lbar.style.display="none"}else if("multires"==e.type){var M=JSON.parse(JSON.stringify(e.multiRes));e.basePath&&e.multiRes.basePath&&!/^(?:[a-z]+:)?\/\//i.test(e.multiRes.basePath)?M.basePath=e.basePath+e.multiRes.basePath:e.multiRes.basePath?M.basePath=e.multiRes.basePath:e.basePath&&(M.basePath=e.basePath),C=M}else if(!0===e.dynamic)C=e.panorama;else{if(e.panorama===f)return void Mt(e.strings.noPanoramaError);C=new Image}if("cubemap"==e.type){var b=6,D=function(){0==--b&&jt()},K=function(B){var N=E.createElement("a");N.href=B.target.src,N.textContent=N.href,Mt(e.strings.fileAccessError.replace("%s",N.outerHTML))};for(r=0;r<C.length;r++)"null"==(u=e.cubeMap[r])?(console.log("Will use background instead of missing cubemap face "+r),D()):(e.basePath&&!le(u)&&(u=e.basePath+u),C[r].onload=D,C[r].onerror=K,C[r].src=ge(u))}else if("multires"==e.type)jt();else if(u="",e.basePath&&(u=e.basePath),!0!==e.dynamic){if(e.panorama instanceof Image||e.panorama instanceof ImageData||st.ImageBitmap&&e.panorama instanceof ImageBitmap)return C=e.panorama,void jt();u=le(e.panorama)?e.panorama:u+e.panorama,C.onload=function(){st.URL.revokeObjectURL(this.src),jt()},(Tt=new XMLHttpRequest).onloadend=function(){if(200!=Tt.status){var B=E.createElement("a");return B.href=u,B.textContent=B.href,void Mt(e.strings.fileAccessError.replace("%s",B.outerHTML))}(function fe(a,r){var u=new FileReader;u.addEventListener("loadend",function(){var M=u.result;if(navigator.userAgent.toLowerCase().match(/(iphone|ipod|ipad).* os 8_/)){var b=M.indexOf("\xff\xc2");(b<0||b>65536)&&Mt(e.strings.iOS8WebGLError)}var D=M.indexOf("<x:xmpmeta");if(D>-1&&!0!==e.ignoreGPanoXMP){var K=M.substring(D,M.indexOf("</x:xmpmeta>")+12),B=function(X){var it;return K.indexOf(X+'="')>=0?it=(it=K.substring(K.indexOf(X+'="')+X.length+2)).substring(0,it.indexOf('"')):K.indexOf(X+">")>=0&&(it=(it=K.substring(K.indexOf(X+">")+X.length+1)).substring(0,it.indexOf("<"))),it!==f?Number(it):null},N={fullWidth:B("GPano:FullPanoWidthPixels"),croppedWidth:B("GPano:CroppedAreaImageWidthPixels"),fullHeight:B("GPano:FullPanoHeightPixels"),croppedHeight:B("GPano:CroppedAreaImageHeightPixels"),topPixels:B("GPano:CroppedAreaTopPixels"),heading:B("GPano:PoseHeadingDegrees"),horizonPitch:B("GPano:PosePitchDegrees"),horizonRoll:B("GPano:PoseRollDegrees"),pitch:B("GPano:InitialViewPitchDegrees"),yaw:B("GPano:InitialViewHeadingDegrees"),hfov:B("GPano:InitialHorizontalFOVDegrees")};null!==N.fullWidth&&null!==N.croppedWidth&&null!==N.fullHeight&&null!==N.croppedHeight&&null!==N.topPixels&&(_t.indexOf("haov")<0&&(e.haov=N.croppedWidth/N.fullWidth*360),_t.indexOf("vaov")<0&&(e.vaov=N.croppedHeight/N.fullHeight*180),_t.indexOf("vOffset")<0&&(e.vOffset=-180*((N.topPixels+N.croppedHeight/2)/N.fullHeight-.5)),null!==N.heading&&_t.indexOf("northOffset")<0&&(e.northOffset=N.heading,!1!==e.compass&&(e.compass=!0)),null!==N.horizonPitch&&null!==N.horizonRoll&&(_t.indexOf("horizonPitch")<0&&(e.horizonPitch=N.horizonPitch),_t.indexOf("horizonRoll")<0&&(e.horizonRoll=N.horizonRoll)),null!=N.pitch&&_t.indexOf("pitch")<0&&(e.pitch=N.pitch),null!=N.yaw&&_t.indexOf("yaw")<0&&(e.yaw=N.yaw),null!=N.hfov&&_t.indexOf("hfov")<0&&(e.hfov=N.hfov))}C.src=st.URL.createObjectURL(a),C.onerror=function(){(function X(){return st.fetch?st.fetch(E.location.href).then(function(it){return it.headers.get("Content-Security-Policy")}):null})().then(function(it){it&&it.split(";").find(function(xt){var Kt=xt.match(/img-src(.*)/);if(Kt)return!Kt[1].includes("blob")})&&(console.log("CSP blocks blobs; reverting to URL."),C.crossOrigin=e.crossOrigin,C.src=r)})}}),u.readAsBinaryString!==f?u.readAsBinaryString(a):u.readAsText(a)})(this.response,u),x.load.msg.innerHTML=""},Tt.onprogress=function(B){var X,it,Pt;B.lengthComputable?(x.load.lbarFill.style.width=B.loaded/B.total*100+"%",B.total>1e6?(X="MB",it=(B.loaded/1e6).toFixed(2),Pt=(B.total/1e6).toFixed(2)):B.total>1e3?(X="kB",it=(B.loaded/1e3).toFixed(1),Pt=(B.total/1e3).toFixed(1)):(X="B",it=B.loaded,Pt=B.total),x.load.msg.innerHTML=it+" / "+Pt+" "+X):(x.load.lbox.style.display="block",x.load.lbar.style.display="none")};try{Tt.open("GET",u,!0)}catch{Mt(e.strings.malformedURLError)}Tt.responseType="blob",Tt.setRequestHeader("Accept","image/*,*/*;q=0.9"),Tt.setRequestHeader("cache-control","no-cache"),Tt.withCredentials="use-credentials"===e.crossOrigin,Tt.send()}e.draggable&&Q.classList.add("pnlm-grab"),Q.classList.remove("pnlm-grabbing"),St=!0===e.dynamicUpdate,e.dynamic&&St&&(C=e.panorama,jt())}else Mt()}function le(a){return new RegExp("^(?:[a-z]+:)?//","i").test(a)||"/"==a[0]||"blob:"==a.slice(0,5)}function jt(){Z||(Z=new libpannellum.renderer(Ot)),Gt||(Gt=!0,Dt.addEventListener("mousedown",c,!1),E.addEventListener("mousemove",T,!1),E.addEventListener("mouseup",y,!1),e.mouseZoom&&(Q.addEventListener("mousewheel",Xt,!1),Q.addEventListener("DOMMouseScroll",Xt,!1)),e.doubleClickZoom&&Dt.addEventListener("dblclick",v,!1),L.addEventListener("mozfullscreenchange",wt,!1),L.addEventListener("webkitfullscreenchange",wt,!1),L.addEventListener("msfullscreenchange",wt,!1),L.addEventListener("fullscreenchange",wt,!1),"function"==typeof ResizeObserver?(Zt=new ResizeObserver(tt)).observe(L):(st.addEventListener("resize",tt,!1),st.addEventListener("orientationchange",tt,!1)),e.disableKeyboardCtrl||(L.addEventListener("keydown",Yt,!1),L.addEventListener("keyup",nt,!1),L.addEventListener("blur",lt,!1)),E.addEventListener("mouseleave",y,!1),""===E.documentElement.style.pointerAction&&""===E.documentElement.style.touchAction?(Dt.addEventListener("pointerdown",J,!1),Dt.addEventListener("pointermove",U,!1),Dt.addEventListener("pointerup",rt,!1),Dt.addEventListener("pointerleave",rt,!1)):(Dt.addEventListener("touchstart",A,!1),Dt.addEventListener("touchmove",w,!1),Dt.addEventListener("touchend",O,!1)),st.navigator.pointerEnabled&&(L.style.touchAction="none")),function l(){try{var a={};e.horizonPitch!==f&&(a.horizonPitch=e.horizonPitch*Math.PI/180),e.horizonRoll!==f&&(a.horizonRoll=e.horizonRoll*Math.PI/180),e.backgroundColor!==f&&(a.backgroundColor=e.backgroundColor),Z.init(C,e.type,e.haov*Math.PI/180,e.vaov*Math.PI/180,e.vOffset*Math.PI/180,n,a)}catch(r){if(!0!==e.dynamic&&(C=f),"webgl error"==r.type||"no webgl"==r.type)Mt();else{if("webgl size error"!=r.type)throw Mt(e.strings.unknownError),r;Mt(e.strings.textureSizeError.replace("%s",r.width).replace("%s",r.maxWidth))}}}(),qt(e.hfov),setTimeout(function(){},500)}function Mt(a){a===f&&(a=e.strings.genericWebGLError),x.errorMsg.innerHTML="<p>"+a+"</p>",H.load.style.display="none",x.load.box.style.display="none",x.errorMsg.style.display="table",Et=!0,ot=f,Ot.style.display="none",zt("error",a)}function ce(a){x.interactionMsg.style.opacity=1,x.interactionMsg.innerHTML="<p>"+a+"</p>",x.interactionMsg.style.display="table",zt("messageshown"),clearTimeout(x.interactionMsg.timeout),x.interactionMsg.removeEventListener("transitionend",Ut),x.interactionMsg.timeout=setTimeout(function(){x.interactionMsg.style.opacity=0,x.interactionMsg.addEventListener("transitionend",Ut)},2e3)}function Ut(){x.interactionMsg.style.opacity=0,x.interactionMsg.style.display="none",zt("messagecleared")}function $t(a){var r=L.getBoundingClientRect(),u={};return u.x=(a.clientX||a.pageX)-r.left,u.y=(a.clientY||a.pageY)-r.top,u}function c(a){if(a.preventDefault(),L.focus(),ot&&e.draggable&&!e.draggingHotSpot){var r=$t(a);if(e.hotSpotDebug){var u=p(a);console.log("Pitch: "+u[0]+", Yaw: "+u[1]+", Center Pitch: "+e.pitch+", Center Yaw: "+e.yaw+", HFOV: "+e.hfov)}ve(),Ce(),e.roll=0,V.hfov=0,Rt=!0,F=Date.now(),h=r.x,i=r.y,pt=e.yaw,S=e.pitch,Q.classList.add("pnlm-grabbing"),Q.classList.remove("pnlm-grab"),zt("mousedown",a),g()}}function v(a){if(e.minHfov===e.hfov)ct.setHfov(Ht,1e3);else{var r=p(a);ct.lookAt(r[0],r[1],e.minHfov,1e3)}}function p(a){var r=$t(a),u=Z.getCanvas(),M=u.clientWidth,b=u.clientHeight,D=r.x/M*2-1,K=(1-r.y/b*2)*b/M,B=1/Math.tan(e.hfov*Math.PI/360),N=Math.sin(e.pitch*Math.PI/180),X=Math.cos(e.pitch*Math.PI/180),it=B*X-K*N,Pt=Math.sqrt(D*D+it*it),xt=180*Math.atan((K*X+B*N)/Pt)/Math.PI,Kt=180*Math.atan2(D/Pt,it/Pt)/Math.PI+e.yaw;return Kt<-180&&(Kt+=360),Kt>180&&(Kt-=360),[xt,Kt]}function T(a){if(q)o(q,a);else if(Rt&&ot){F=Date.now();var r=Z.getCanvas(),u=r.clientWidth,M=r.clientHeight,b=$t(a),D=180*(Math.atan(h/u*2-1)-Math.atan(b.x/u*2-1))/Math.PI*e.hfov/90+pt;V.yaw=(D-e.yaw)%360*.2,e.yaw=D;var K=2*Math.atan(Math.tan(e.hfov/360*Math.PI)*M/u)*180/Math.PI,B=180*(Math.atan(b.y/M*2-1)-Math.atan(i/M*2-1))/Math.PI*K/90+S;V.pitch=.2*(B-e.pitch),e.pitch=B}}function y(a){q&&q.dragHandlerFunc&&q.dragHandlerFunc(a,q.dragHandlerArgs),q=null,Rt&&(Rt=!1,Date.now()-F>15&&(V.pitch=V.yaw=0),Q.classList.add("pnlm-grab"),Q.classList.remove("pnlm-grabbing"),F=Date.now(),zt("mouseup",a))}function A(a){if(ot&&e.draggable&&!q){ve(),Ce(),e.roll=0,V.hfov=0;var r=$t(a.targetTouches[0]);if(h=r.x,i=r.y,2==a.targetTouches.length){var u=$t(a.targetTouches[1]);h+=.5*(u.x-r.x),i+=.5*(u.y-r.y),at=Math.sqrt((r.x-u.x)*(r.x-u.x)+(r.y-u.y)*(r.y-u.y))}Rt=!0,F=Date.now(),pt=e.yaw,S=e.pitch,zt("touchstart",a),g()}}function w(a){if(e.draggable&&(e.dragConfirm||a.preventDefault(),ot&&(F=Date.now()),Rt&&ot)){var r=$t(a.targetTouches[0]),u=r.x,M=r.y;if(2==a.targetTouches.length&&-1!=at){var b=$t(a.targetTouches[1]);u+=.5*(b.x-r.x),M+=.5*(b.y-r.y);var D=Math.sqrt((r.x-b.x)*(r.x-b.x)+(r.y-b.y)*(r.y-b.y));qt(e.hfov+.1*(at-D)),at=D}var K=e.hfov/360*e.touchPanSpeedCoeffFactor;if(dt||"both"!=e.dragConfirm&&"yaw"!=e.dragConfirm||2==a.targetTouches.length){var B=(h-u)*K+pt;V.yaw=(B-e.yaw)%360*.2,e.yaw=B}else h!=u&&ce("yaw"==e.dragConfirm?e.strings.twoTouchXActivate:e.strings.twoTouchActivate);if(dt||"both"!=e.dragConfirm&&"pitch"!=e.dragConfirm||2==a.targetTouches.length){var N=(M-i)*K+S;V.pitch=.2*(N-e.pitch),e.pitch=N}else i!=M&&ce("pitch"==e.dragConfirm?e.strings.twoTouchYActivate:e.strings.twoTouchActivate);("yaw"==e.dragConfirm||"pitch"==e.dragConfirm||"both"==e.dragConfirm)&&2==a.targetTouches.length&&(Ut(),a.preventDefault())}}function O(){q=null,Rt=!1,Date.now()-F>150&&(V.pitch=V.yaw=0),at=-1,F=Date.now(),zt("touchend",event)}te.className="pnlm-compass pnlm-controls pnlm-control",Q.appendChild(te),j(z.firstScene?z.firstScene:z.default&&z.default.firstScene?z.default.firstScene:null),$(!0);var k=[],W=[];function J(a){if("touch"==a.pointerType){if(!ot||!e.draggable)return;k.push(a.pointerId),W.push({clientX:a.clientX,clientY:a.clientY}),a.targetTouches=W,A(a),a.preventDefault()}}function U(a){if("touch"==a.pointerType){if(q)return void o(q,a);if(!e.draggable)return;for(var r=0;r<k.length;r++)if(a.pointerId==k[r])return W[r].clientX=a.clientX,W[r].clientY=a.clientY,a.targetTouches=W,w(a),void a.preventDefault()}}function rt(a){if(q&&q.dragHandlerFunc&&q.dragHandlerFunc(a,q.dragHandlerArgs),q=null,"touch"==a.pointerType){for(var r=!1,u=0;u<k.length;u++)a.pointerId==k[u]&&(k[u]=f),k[u]&&(r=!0);r||(k=[],W=[],O()),a.preventDefault()}}function Xt(a){if(ot&&("fullscreenonly"!=e.mouseZoom||dt)){if(!dt&&"ctrl"==e.mouseZoom&&!a.ctrlKey){var r=-1!=navigator.platform.indexOf("Mac")?"control":"ctrl";return void ce(e.strings.ctrlZoomActivate.replace("%s",'<kbd class="pnlm-outline">'+r+"</kbd>"))}Ut(),a.preventDefault(),ve(),F=Date.now(),a.wheelDeltaY?(qt(e.hfov-.05*a.wheelDeltaY),V.hfov=a.wheelDelta<0?1:-1):a.wheelDelta?(qt(e.hfov-.05*a.wheelDelta),V.hfov=a.wheelDelta<0?1:-1):a.detail&&(qt(e.hfov+1.5*a.detail),V.hfov=a.detail>0?1:-1),g()}}function Yt(a){ve(),F=Date.now(),Ce(),e.roll=0;var r=a.which||a.keycode;e.capturedKeyNumbers.indexOf(r)<0||!dt&&(16==r||17==r)&&"ctrl"==e.mouseZoom||(a.preventDefault(),27==r?dt&&G():ut(r,!0))}function lt(){for(var a=0;a<10;a++)P[a]=!1}function nt(a){var r=a.which||a.keycode;e.capturedKeyNumbers.indexOf(r)<0||(a.preventDefault(),ut(r,!1))}function ut(a,r){var u=!1;switch(a){case 109:case 189:case 17:case 173:P[0]!=r&&(u=!0),P[0]=r;break;case 107:case 187:case 16:case 61:P[1]!=r&&(u=!0),P[1]=r;break;case 38:P[2]!=r&&(u=!0),P[2]=r;break;case 87:P[6]!=r&&(u=!0),P[6]=r;break;case 40:P[3]!=r&&(u=!0),P[3]=r;break;case 83:P[7]!=r&&(u=!0),P[7]=r;break;case 37:P[4]!=r&&(u=!0),P[4]=r;break;case 65:P[8]!=r&&(u=!0),P[8]=r;break;case 39:P[5]!=r&&(u=!0),P[5]=r;break;case 68:P[9]!=r&&(u=!0),P[9]=r}u&&r&&(et=typeof performance<"u"&&performance.now()?performance.now():Date.now(),g())}function gt(a){var r=ht[a],u=Math.min(1,Math.max((Date.now()-r.startTime)/1e3/(r.duration/1e3),0)),M=r.startPosition+e.animationTimingFunction(u)*(r.endPosition-r.startPosition);(r.endPosition>r.startPosition&&M>=r.endPosition||r.endPosition<r.startPosition&&M<=r.endPosition||r.endPosition===r.startPosition)&&(M=r.endPosition,V[a]=0,delete ht[a]),e[a]=M}function tt(){wt("resize")}function g(){Nt||(Nt=!0,bt())}function bt(){if(!_e)if(function kt(){var a;if(ot){var r=Z.getCanvas();!1!==e.autoRotate&&(e.yaw>360?e.yaw-=360:e.yaw<-360&&(e.yaw+=360)),a=e.yaw;var u=0;if(e.avoidShowingBackground){var b=e.hfov/2,D=180*Math.atan2(Math.tan(b/180*Math.PI),r.width/r.height)/Math.PI;e.vaov>e.haov?Math.min(Math.cos((e.pitch-b)/180*Math.PI),Math.cos((e.pitch+b)/180*Math.PI)):u=b*(1-Math.min(Math.cos((e.pitch-D)/180*Math.PI),Math.cos((e.pitch+D)/180*Math.PI)))}var B=e.maxYaw-e.minYaw,N=-180,X=180;B<360&&(N=e.minYaw+e.hfov/2+u,X=e.maxYaw-e.hfov/2-u,B<e.hfov&&(N=X=(N+X)/2),e.yaw=Math.max(N,Math.min(X,e.yaw))),!1===e.autoRotate&&(e.yaw>360?e.yaw-=360:e.yaw<-360&&(e.yaw+=360)),!1!==e.autoRotate&&a!=e.yaw&&et!==f&&(e.autoRotate*=-1);var it=2*Math.atan(Math.tan(e.hfov/180*Math.PI*.5)/(r.width/r.height))/Math.PI*180,Pt=e.minPitch+it/2,xt=e.maxPitch-it/2;e.maxPitch-e.minPitch<it&&(Pt=xt=(Pt+xt)/2),isNaN(Pt)&&(Pt=-90),isNaN(xt)&&(xt=90),e.pitch=Math.max(Pt,Math.min(xt,e.pitch)),Z.render(e.pitch*Math.PI/180,e.yaw*Math.PI/180,e.hfov*Math.PI/180,{roll:e.roll*Math.PI/180,dynamic:St}),ae&&(ae=St=!1),vt(),e.compass&&(te.style.transform="rotate("+(-e.yaw-e.northOffset)+"deg)",te.style.webkitTransform="rotate("+(-e.yaw-e.northOffset)+"deg)")}}(),Vt&&clearTimeout(Vt),Rt||!0===Ct)requestAnimationFrame(bt);else if(P[0]||P[1]||P[2]||P[3]||P[4]||P[5]||P[6]||P[7]||P[8]||P[9]||e.autoRotate||ht.pitch||ht.yaw||ht.hfov||Math.abs(V.yaw)>.01||Math.abs(V.pitch)>.01||Math.abs(V.hfov)>.01)(function ft(){if(ot){var b,a=!1,r=e.pitch,u=e.yaw,M=e.hfov;b=typeof performance<"u"&&performance.now()?performance.now():Date.now(),et===f&&(et=b);var D=(b-et)*e.hfov/1200;if(D=Math.min(D,10),P[0]&&!0===e.keyboardZoom&&(qt(e.hfov+(.8*V.hfov+.4)*D),a=!0),P[1]&&!0===e.keyboardZoom&&(qt(e.hfov+(.8*V.hfov-.2)*D),a=!0),(P[2]||P[6])&&(e.pitch+=(.8*V.pitch+.2)*D,a=!0),(P[3]||P[7])&&(e.pitch+=(.8*V.pitch-.2)*D,a=!0),(P[4]||P[8])&&(e.yaw+=(.8*V.yaw-.2)*D,a=!0),(P[5]||P[9])&&(e.yaw+=(.8*V.yaw+.2)*D,a=!0),a&&(F=Date.now()),e.autoRotate){if(b-et>.001){var K=(b-et)/1e3,B=(V.yaw/K*D-.2*e.autoRotate)*K;B=(-e.autoRotate>0?1:-1)*Math.min(Math.abs(e.autoRotate*K),Math.abs(B)),e.yaw+=B}e.autoRotateStopDelay&&(e.autoRotateStopDelay-=b-et,e.autoRotateStopDelay<=0&&(e.autoRotateStopDelay=!1,Ft=e.autoRotate,e.autoRotate=0))}if(ht.pitch&&(gt("pitch"),r=e.pitch),ht.yaw&&(gt("yaw"),u=e.yaw),ht.hfov&&(gt("hfov"),M=e.hfov),D>0&&!e.autoRotate){var N=1-e.friction;!P[4]&&!P[5]&&!P[8]&&!P[9]&&!ht.yaw&&(e.yaw+=V.yaw*D*N),!P[2]&&!P[3]&&!P[6]&&!P[7]&&!ht.pitch&&(e.pitch+=V.pitch*D*N),!P[0]&&!P[1]&&!ht.hfov&&(e.hfov>90&&(N*=1-(e.hfov-90)/90),qt(e.hfov+V.hfov*D*N))}if(et=b,D>0){V.yaw=.8*V.yaw+(e.yaw-u)/D*.2,V.pitch=.8*V.pitch+(e.pitch-r)/D*.2,V.hfov=.8*V.hfov+(e.hfov-M)/D*.2;var X=e.autoRotate?Math.abs(e.autoRotate):5;V.yaw=Math.min(X,Math.max(V.yaw,-X)),V.pitch=Math.min(X,Math.max(V.pitch,-X)),V.hfov=Math.min(X,Math.max(V.hfov,-X))}P[0]&&P[1]&&(V.hfov=0),(P[2]||P[6])&&(P[3]||P[7])&&(V.pitch=0),(P[4]||P[8])&&(P[5]||P[9])&&(V.yaw=0)}})(),e.autoRotateInactivityDelay>=0&&Ft&&Date.now()-F>e.autoRotateInactivityDelay&&!e.autoRotate&&(e.autoRotate=Ft,ct.lookAt(ie,f,Ht,3e3)),requestAnimationFrame(bt);else if(Z&&(Z.isLoading()||!0===e.dynamic&&St))requestAnimationFrame(bt);else{ct.getPitch&&ct.getYaw&&ct.getHfov&&zt("animatefinished",{pitch:ct.getPitch(),yaw:ct.getYaw(),hfov:ct.getHfov()}),Nt=!1,et=f;var a=e.autoRotateInactivityDelay-(Date.now()-F);a>0?Vt=setTimeout(function(){e.autoRotate=Ft,ct.lookAt(ie,f,Ht,3e3),g()},a):e.autoRotateInactivityDelay>=0&&Ft&&(e.autoRotate=Ft,ct.lookAt(ie,f,Ht,3e3),g())}}function mt(a,r,u,M){this.w=a,this.x=r,this.y=u,this.z=M}function I(a){var r=function d(a,r,u){var M=function Bt(a,r,u){var M=[r?r*Math.PI/180/2:0,u?u*Math.PI/180/2:0,a?a*Math.PI/180/2:0],b=[Math.cos(M[0]),Math.cos(M[1]),Math.cos(M[2])],D=[Math.sin(M[0]),Math.sin(M[1]),Math.sin(M[2])];return new mt(b[0]*b[1]*b[2]-D[0]*D[1]*D[2],D[0]*b[1]*b[2]-b[0]*D[1]*D[2],b[0]*D[1]*b[2]+D[0]*b[1]*D[2],b[0]*b[1]*D[2]+D[0]*D[1]*b[2])}(a,r,u);M=M.multiply(new mt(Math.sqrt(.5),-Math.sqrt(.5),0,0));var b=st.orientation?-st.orientation*Math.PI/180/2:0;return M.multiply(new mt(Math.cos(b),0,-Math.sin(b),0))}(a.alpha,a.beta,a.gamma).toEulerAngles();"number"==typeof Ct&&Ct<10?Ct+=1:10===Ct?(ee=r[2]/Math.PI*180+e.yaw,Ct=!0,requestAnimationFrame(bt)):(e.pitch=r[0]/Math.PI*180,e.roll=-r[1]/Math.PI*180,e.yaw=-r[2]/Math.PI*180+ee)}function n(){if(e.sceneFadeDuration&&Z.fadeImg!==f){Z.fadeImg.style.opacity=0;var a=Z.fadeImg;delete Z.fadeImg,setTimeout(function(){Ot.removeChild(a),zt("scenechangefadedone")},e.sceneFadeDuration)}te.style.display=e.compass?"inline":"none",function m(){ue||(e.hotSpots?(e.hotSpots=e.hotSpots.sort(function(a,r){return a.pitch<r.pitch}),e.hotSpots.forEach(s)):e.hotSpots=[],ue=!0,vt())}(),x.load.box.style.display="none",Y!==f&&(Ot.removeChild(Y),Y=f),ot=!0,!0!==e.dynamic&&(C=f),g(),zt("load")}function s(a){a.pitch=Number(a.pitch)||0,a.yaw=Number(a.yaw)||0;var r=E.createElement("div");r.tabIndex=-1,r.className="pnlm-hotspot-base",r.className+=a.cssClass?" "+a.cssClass:" pnlm-hotspot pnlm-sprite pnlm-"+he(a.type);var M,u=E.createElement("span");if(a.text&&(u.innerHTML=he(a.text)),a.video){var b=E.createElement("video"),D=a.video;e.basePath&&!le(D)&&(D=e.basePath+D),b.src=ge(D),b.controls=!0,b.style.width=a.width+"px",Q.appendChild(r),u.appendChild(b)}else if(a.image){var K=a.image;e.basePath&&!le(K)&&(K=e.basePath+K),(M=E.createElement("a")).href=ge(a.URL?a.URL:K,!0),e.targetBlank&&(M.target="_blank",M.rel="noopener"),u.appendChild(M);var B=E.createElement("img");B.src=ge(K),B.style.width=a.width+"px",B.style.paddingTop="5px",Q.appendChild(r),M.appendChild(B),u.style.maxWidth="initial"}else if(a.URL){if((M=E.createElement("a")).href=ge(a.URL,!0),a.attributes)for(var N in a.attributes)M.setAttribute(N,a.attributes[N]);else e.targetBlank&&(M.target="_blank",M.rel="noopener");Q.appendChild(M),r.className+=" pnlm-pointer",u.className+=" pnlm-pointer",M.appendChild(r)}else a.sceneId&&(r.onclick=r.ontouchend=function(){return r.clicked||(r.clicked=!0,Me(a.sceneId,a.targetPitch,a.targetYaw,a.targetHfov)),!1},r.className+=" pnlm-pointer",u.className+=" pnlm-pointer"),Q.appendChild(r);a.createTooltipFunc?a.createTooltipFunc(r,a.createTooltipArgs):(a.text||a.video||a.image)&&(r.classList.add("pnlm-tooltip"),r.appendChild(u),u.style.width=u.scrollWidth-20+"px",u.style.marginLeft=-(u.scrollWidth-r.offsetWidth)/2+"px",u.style.marginTop=-u.scrollHeight-12+"px"),a.clickHandlerFunc&&(r.addEventListener("click",function(X){a.clickHandlerFunc(X,a.clickHandlerArgs)},"false"),r.addEventListener(""===E.documentElement.style.pointerAction&&""===E.documentElement.style.touchAction?"pointerup":"touchend",function(X){a.clickHandlerFunc(X,a.clickHandlerArgs)},!1),r.className+=" pnlm-pointer",u.className+=" pnlm-pointer"),a.draggable&&(r.addEventListener("mousedown",function(X){a.dragHandlerFunc&&a.dragHandlerFunc(X,a.dragHandlerArgs),q=a}),""===E.documentElement.style.pointerAction&&""===E.documentElement.style.touchAction&&r.addEventListener("pointerdown",function(X){a.dragHandlerFunc&&a.dragHandlerFunc(X,a.dragHandlerArgs),q=a}),r.addEventListener("touchmove",function(X){o(a,X.targetTouches[0])}),r.addEventListener("touchend",function(X){a.dragHandlerFunc&&a.dragHandlerFunc(X,a.dragHandlerArgs),q=null})),a.div=r}function o(a,r){var u=p(r);a.pitch=u[0],a.yaw=u[1],R(a)}function R(a){var r=Math.sin(a.pitch*Math.PI/180),u=Math.cos(a.pitch*Math.PI/180),M=Math.sin(e.pitch*Math.PI/180),b=Math.cos(e.pitch*Math.PI/180),D=Math.cos((-a.yaw+e.yaw)*Math.PI/180),K=r*M+u*D*b;if(a.yaw<=90&&a.yaw>-90&&K<=0||(a.yaw>90||a.yaw<=-90)&&K<=0)a.div.style.visibility="hidden";else{var B=Math.sin((-a.yaw+e.yaw)*Math.PI/180),N=Math.tan(e.hfov*Math.PI/360);a.div.style.visibility="visible";var X=Z.getCanvas(),it=X.clientWidth,Pt=X.clientHeight,xt=[-it/N*B*u/K/2,-it/N*(r*b-u*D*M)/K/2],Kt=Math.sin(e.roll*Math.PI/180),Te=Math.cos(e.roll*Math.PI/180);(xt=[xt[0]*Te-xt[1]*Kt,xt[0]*Kt+xt[1]*Te])[0]+=(it-a.div.offsetWidth)/2,xt[1]+=(Pt-a.div.offsetHeight)/2;var be="translate("+xt[0]+"px, "+xt[1]+"px) translateZ(9999px) rotate("+e.roll+"deg)";a.scale&&(be+=" scale("+Ht/e.hfov/K+")"),a.div.style.webkitTransform=be,a.div.style.MozTransform=be,a.div.style.transform=be}}function vt(){e.hotSpots.forEach(R)}function j(a){e={};var r,u,M=["haov","vaov","vOffset","northOffset","horizonPitch","horizonRoll"];for(r in _t=[],oe)oe.hasOwnProperty(r)&&(e[r]=oe[r]);for(r in z.default)if(z.default.hasOwnProperty(r))if("strings"==r)for(u in z.default.strings)z.default.strings.hasOwnProperty(u)&&(e.strings[u]=he(z.default.strings[u]));else e[r]=z.default[r],M.indexOf(r)>=0&&_t.push(r);if(null!==a&&""!==a&&z.scenes&&z.scenes[a]){var b=z.scenes[a];for(r in b)if(b.hasOwnProperty(r))if("strings"==r)for(u in b.strings)b.strings.hasOwnProperty(u)&&(e.strings[u]=he(b.strings[u]));else e[r]=b[r],M.indexOf(r)>=0&&_t.push(r);e.scene=a}for(r in z)if(z.hasOwnProperty(r))if("strings"==r)for(u in z.strings)z.strings.hasOwnProperty(u)&&(e.strings[u]=he(z.strings[u]));else e[r]=z[r],M.indexOf(r)>=0&&_t.push(r)}function $(a){if((a=a||!1)&&"preview"in e){var r=e.preview;e.basePath&&!le(r)&&(r=e.basePath+r),(Y=E.createElement("div")).className="pnlm-preview-img",Y.style.backgroundImage="url('"+function De(a){return ge(a).replace(/"/g,"%22").replace(/'/g,"%27")}(r)+"')",Ot.appendChild(Y)}var u=e.title,M=e.author;for(var b in a&&("previewTitle"in e&&(e.title=e.previewTitle),"previewAuthor"in e&&(e.author=e.previewAuthor)),e.hasOwnProperty("title")||(x.title.innerHTML=""),e.hasOwnProperty("author")||(x.author.innerHTML=""),!e.hasOwnProperty("title")&&!e.hasOwnProperty("author")&&(x.container.style.display="none"),e.targetBlank&&(ne.rel="noopener",ne.target="_blank"),H.load.innerHTML="<div><p>"+e.strings.loadButtonLabel+"</p></div>",x.load.boxp.innerHTML=e.strings.loadingLabel,e)if(e.hasOwnProperty(b))switch(b){case"title":x.title.innerHTML=he(e[b]),x.container.style.display="inline";break;case"author":var D=he(e[b]);if(e.authorURL){var K=E.createElement("a");K.href=ge(e.authorURL,!0),e.targetBlank&&(K.target="_blank",K.rel="noopener"),K.innerHTML=he(e[b]),D=K.outerHTML}x.author.innerHTML=e.strings.bylineLabel.replace("%s",D),x.container.style.display="inline";break;case"hfov":qt(Number(e[b]));break;case"autoLoad":!0===e[b]&&Z===f&&(x.load.box.style.display="inline",H.load.style.display="none",me());break;case"showZoomCtrl":H.zoom.style.display=e[b]&&0!=e.showControls?"block":"none";break;case"showFullscreenCtrl":H.fullscreen.style.display=e[b]&&0!=e.showControls&&("fullscreen"in E||"mozFullScreen"in E||"webkitIsFullScreen"in E||"msFullscreenElement"in E)?"block":"none";break;case"hotSpotDebug":re.style.display=e[b]?"block":"none";break;case"showControls":e[b]||(H.orientation.style.display="none",H.zoom.style.display="none",H.fullscreen.style.display="none");break;case"orientationOnByDefault":e[b]&&we()}a&&(u?e.title=u:delete e.title,M?e.author=M:delete e.author)}function G(){if(ot&&!Et)if(dt)E.exitFullscreen?E.exitFullscreen():E.mozCancelFullScreen?E.mozCancelFullScreen():E.webkitCancelFullScreen?E.webkitCancelFullScreen():E.msExitFullscreen&&E.msExitFullscreen();else try{L.requestFullscreen?L.requestFullscreen():L.mozRequestFullScreen?L.mozRequestFullScreen():L.msRequestFullscreen?L.msRequestFullscreen():L.webkitRequestFullScreen()}catch{}}function wt(a){E.fullscreenElement||E.fullscreen||E.mozFullScreen||E.webkitIsFullScreen||E.msFullscreenElement?(H.fullscreen.classList.add("pnlm-fullscreen-toggle-button-active"),dt=!0):(H.fullscreen.classList.remove("pnlm-fullscreen-toggle-button-active"),dt=!1),"resize"!==a&&zt("fullscreenchange",dt),Z.resize(),qt(e.hfov),g()}function Ee(a){var r=e.minHfov;if("multires"==e.type&&Z&&!e.multiResMinHfov&&(r=Math.min(r,Z.getCanvas().width/(e.multiRes.cubeResolution/90*.9))),r>e.maxHfov)return console.log("HFOV bounds do not make sense (minHfov > maxHfov)."),e.hfov;var u=e.hfov;if(u=a<r?r:a>e.maxHfov?e.maxHfov:a,e.avoidShowingBackground&&Z&&!isNaN(e.maxPitch-e.minPitch)){var M=Z.getCanvas();u=Math.min(u,360*Math.atan(Math.tan((e.maxPitch-e.minPitch)/360*Math.PI)/M.height*M.width)/Math.PI)}return u}function qt(a){e.hfov=Ee(a),zt("zoomchange",e.hfov)}function ve(){ht={},Ft=e.autoRotate?e.autoRotate:Ft,e.autoRotate=!1}function Ie(){(function se(){Et&&(x.load.box.style.display="none",x.errorMsg.style.display="none",Et=!1,Ot.style.display="block",zt("errorcleared"))})(),ot=!1,Ut(),H.load.style.display="none",x.load.box.style.display="inline",me()}function Me(a,r,u,M,b){var D,K,B,N;if(ot||(b=!0),ot=!1,ht={},e.sceneFadeDuration&&!b){var X=Z.render(e.pitch*Math.PI/180,e.yaw*Math.PI/180,e.hfov*Math.PI/180,{returnImage:"ImageBitmap"});if(X!==f)return(D=X.then?E.createElement("canvas"):new Image).className="pnlm-fade-img",D.style.transition="opacity "+e.sceneFadeDuration/1e3+"s",D.style.width="100%",D.style.height="100%",X.then?X.then(function(it){D.width=it.width,D.height=it.height,D.getContext("2d").drawImage(it,0,0),Me(a,r,u,M,!0)}):(D.onload=function(){Me(a,r,u,M,!0)},D.src=X),Ot.appendChild(D),void(Z.fadeImg=D)}K="same"===r?e.pitch:r,B="same"===u?e.yaw:"sameAzimuth"===u?e.yaw+(e.northOffset||0)-(z.scenes[a].northOffset||0):u,N="same"===M?e.hfov:M,function _(){var a=e.hotSpots;if(ue=!1,delete e.hotSpots,a)for(var r=0;r<a.length;r++){var u=a[r].div;if(u){for(;u.parentNode&&u.parentNode!=Q;)u=u.parentNode;Q.removeChild(u)}delete a[r].div}}(),j(a),V.yaw=V.pitch=V.hfov=0,$(),K!==f&&(e.pitch=K),B!==f&&(e.yaw=B),N!==f&&(e.hfov=N),zt("scenechange",a),Ie()}function Ce(){st.removeEventListener("deviceorientation",I),H.orientation.classList.remove("pnlm-orientation-button-active"),Ct=!1}function we(){Qt&&(typeof DeviceMotionEvent<"u"&&"function"==typeof DeviceMotionEvent.requestPermission?DeviceOrientationEvent.requestPermission().then(function(a){"granted"==a&&(Ct=1,st.addEventListener("deviceorientation",I),H.orientation.classList.add("pnlm-orientation-button-active"))}):(Ct=1,st.addEventListener("deviceorientation",I),H.orientation.classList.add("pnlm-orientation-button-active")))}function he(a){return z.escapeHTML?String(a).split(/&/g).join("&amp;").split('"').join("&quot;").split("'").join("&#39;").split("<").join("&lt;").split(">").join("&gt;").split("/").join("&#x2f;").split("\n").join("<br>"):String(a).split("\n").join("<br>")}function ge(a,r){try{var u=decodeURIComponent(function Re(a){return a.replace(/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/gi,function(r,u){return"colon"===(u=u.toLowerCase())?":":"#"===u.charAt(0)?"x"===u.charAt(1)?String.fromCharCode(parseInt(u.substring(2),16)):String.fromCharCode(+u.substring(1)):""})}(a)).replace(/[^\w:]/g,"").toLowerCase()}catch{return"about:blank"}return 0===u.indexOf("javascript:")||0===u.indexOf("vbscript:")?(console.log("Script URL removed."),"about:blank"):r&&0===u.indexOf("data:")?(console.log("Data URI removed from link."),"about:blank"):a}function zt(a){if(a in It)for(var r=It[a].length;r>0;r--)It[a][It[a].length-r].apply(null,[].slice.call(arguments,1))}mt.prototype.multiply=function(a){return new mt(this.w*a.w-this.x*a.x-this.y*a.y-this.z*a.z,this.x*a.w+this.w*a.x+this.y*a.z-this.z*a.y,this.y*a.w+this.w*a.y+this.z*a.x-this.x*a.z,this.z*a.w+this.w*a.z+this.x*a.y-this.y*a.x)},mt.prototype.toEulerAngles=function(){return[Math.atan2(2*(this.w*this.x+this.y*this.z),1-2*(this.x*this.x+this.y*this.y)),Math.asin(2*(this.w*this.y-this.z*this.x)),Math.atan2(2*(this.w*this.z+this.x*this.y),1-2*(this.y*this.y+this.z*this.z))]},this.isLoaded=function(){return!!ot},this.getPitch=function(){return e.pitch},this.setPitch=function(a,r,u,M){return F=Date.now(),Math.abs(a-e.pitch)<=Jt?("function"==typeof u&&u(M),this):((r=r==f?1e3:Number(r))?(ht.pitch={startTime:Date.now(),startPosition:e.pitch,endPosition:a,duration:r},"function"==typeof u&&setTimeout(function(){u(M)},r)):e.pitch=a,g(),this)},this.getPitchBounds=function(){return[e.minPitch,e.maxPitch]},this.setPitchBounds=function(a){return e.minPitch=Math.max(-90,Math.min(a[0],90)),e.maxPitch=Math.max(-90,Math.min(a[1],90)),this},this.getYaw=function(){return(e.yaw+540)%360-180},this.setYaw=function(a,r,u,M){return F=Date.now(),Math.abs(a-e.yaw)<=Jt?("function"==typeof u&&u(M),this):(a=(a+180)%360-180,(r=r==f?1e3:Number(r))?(e.yaw-a>180?a+=360:a-e.yaw>180&&(a-=360),ht.yaw={startTime:Date.now(),startPosition:e.yaw,endPosition:a,duration:r},"function"==typeof u&&setTimeout(function(){u(M)},r)):e.yaw=a,g(),this)},this.getYawBounds=function(){return[e.minYaw,e.maxYaw]},this.setYawBounds=function(a){return e.minYaw=Math.max(-360,Math.min(a[0],360)),e.maxYaw=Math.max(-360,Math.min(a[1],360)),this},this.getHfov=function(){return e.hfov},this.setHfov=function(a,r,u,M){return F=Date.now(),Math.abs(a-e.hfov)<=Jt?("function"==typeof u&&u(M),this):((r=r==f?1e3:Number(r))?(ht.hfov={startTime:Date.now(),startPosition:e.hfov,endPosition:Ee(a),duration:r},"function"==typeof u&&setTimeout(function(){u(M)},r)):qt(a),g(),this)},this.getHfovBounds=function(){return[e.minHfov,e.maxHfov]},this.setHfovBounds=function(a){return e.minHfov=Math.max(0,a[0]),e.maxHfov=Math.max(0,a[1]),this},this.lookAt=function(a,r,u,M,b,D){return M=M==f?1e3:Number(M),a!==f&&Math.abs(a-e.pitch)>Jt&&(this.setPitch(a,M,b,D),b=f),r!==f&&Math.abs(r-e.yaw)>Jt&&(this.setYaw(r,M,b,D),b=f),u!==f&&Math.abs(u-e.hfov)>Jt&&(this.setHfov(u,M,b,D),b=f),"function"==typeof b&&b(D),this},this.getNorthOffset=function(){return e.northOffset},this.setNorthOffset=function(a){return e.northOffset=Math.min(360,Math.max(0,a)),g(),this},this.getHorizonRoll=function(){return e.horizonRoll},this.setHorizonRoll=function(a){return e.horizonRoll=Math.min(90,Math.max(-90,a)),Z.setPose(e.horizonPitch*Math.PI/180,e.horizonRoll*Math.PI/180),g(),this},this.getHorizonPitch=function(){return e.horizonPitch},this.setHorizonPitch=function(a){return e.horizonPitch=Math.min(90,Math.max(-90,a)),Z.setPose(e.horizonPitch*Math.PI/180,e.horizonRoll*Math.PI/180),g(),this},this.startAutoRotate=function(a,r,u,M){return r=r===f?ie:r,u=u===f?Ht:u,e.autoRotate=a=a||Ft||1,M!==f&&(e.autoRotateInactivityDelay=M),ct.lookAt(r,f,u,3e3),g(),this},this.stopAutoRotate=function(){return Ft=e.autoRotate?e.autoRotate:Ft,e.autoRotate=!1,e.autoRotateInactivityDelay=-1,this},this.stopMovement=function(){ve(),V={yaw:0,pitch:0,hfov:0}},this.getRenderer=function(){return Z},this.setUpdate=function(a){return(St=!0===a)&&(ae=!1,Z===f?jt():g()),this},this.updateOnce=function(){return St=ae=!0,Z===f?jt():g(),this},this.mouseEventToCoords=function(a){return p(a)},this.loadScene=function(a,r,u,M){return!1!==ot&&Me(a,r,u,M),this},this.getScene=function(){return e.scene},this.addScene=function(a,r){return z.scenes[a]=r,this},this.removeScene=function(a){return!(e.scene==a||!z.scenes.hasOwnProperty(a)||(delete z.scenes[a],0))},this.toggleFullscreen=function(){return G(),this},this.getConfig=function(){return e},this.getContainer=function(){return L},this.addHotSpot=function(a,r){if(r===f&&e.scene===f)e.hotSpots.push(a);else{var u=r!==f?r:e.scene;if(!z.scenes.hasOwnProperty(u))throw"Invalid scene ID!";z.scenes[u].hasOwnProperty("hotSpots")||(z.scenes[u].hotSpots=[],u==e.scene&&(e.hotSpots=z.scenes[u].hotSpots)),z.scenes[u].hotSpots.push(a)}return(r===f||e.scene==r)&&(s(a),ot&&R(a)),this},this.removeHotSpot=function(a,r){if(r===f||e.scene==r){if(!e.hotSpots)return!1;for(var u=0;u<e.hotSpots.length;u++)if(e.hotSpots[u].hasOwnProperty("id")&&e.hotSpots[u].id==a){for(var M=e.hotSpots[u].div;M.parentNode!=Q;)M=M.parentNode;return Q.removeChild(M),delete e.hotSpots[u].div,e.hotSpots.splice(u,1),!0}}else{if(!z.scenes.hasOwnProperty(r))return!1;if(!z.scenes[r].hasOwnProperty("hotSpots"))return!1;for(var b=0;b<z.scenes[r].hotSpots.length;b++)if(z.scenes[r].hotSpots[b].hasOwnProperty("id")&&z.scenes[r].hotSpots[b].id==a)return z.scenes[r].hotSpots.splice(b,1),!0}},this.resize=function(){Z&&tt()},this.isOrientationSupported=function(){return Qt||!1},this.stopOrientation=function(){Ce()},this.startOrientation=function(){we()},this.isOrientationActive=function(){return!!Ct},this.on=function(a,r){return It[a]=It[a]||[],It[a].push(r),this},this.off=function(a,r){if(!a)return It={},this;if(r){var u=It[a].indexOf(r);u>=0&&It[a].splice(u,1),0==It[a].length&&delete It[a]}else delete It[a];return this},this.destroy=function(){if(_e=!0,clearTimeout(Vt),Tt&&Tt.abort(),Array.isArray(C))for(var a=0;a<6;a++)C[a].src="";Z&&Z.destroy(),Gt&&(E.removeEventListener("mousemove",T,!1),E.removeEventListener("mouseup",y,!1),L.removeEventListener("mozfullscreenchange",wt,!1),L.removeEventListener("webkitfullscreenchange",wt,!1),L.removeEventListener("msfullscreenchange",wt,!1),L.removeEventListener("fullscreenchange",wt,!1),Zt?Zt.disconnect():(st.removeEventListener("resize",tt,!1),st.removeEventListener("orientationchange",tt,!1)),L.removeEventListener("keydown",Yt,!1),L.removeEventListener("keyup",nt,!1),L.removeEventListener("blur",lt,!1),E.removeEventListener("mouseleave",y,!1)),L.innerHTML="",L.classList.remove("pnlm-container")}}return{viewer:function(L,z){return new t(L,z)}}}(window,document)},4252:(st,E,f)=>{"use strict";f.d(E,{r:()=>z});var t=f(3279),L=f(8351);let z=(()=>{class ct{stepper;constructor(Z){this.stepper=Z}selectionChanged(){const Z=this.stepper._getStepLabelId(this.stepper.selectedIndex),Y=document.getElementById(Z);Y&&Y.scrollIntoView({block:"start",inline:"nearest",behavior:"smooth"})}static \u0275fac=function(Y){return new(Y||ct)(t.rXU(L.M6))};static \u0275dir=t.FsC({type:ct,selectors:[["mat-vertical-stepper"]],hostBindings:function(Y,q){1&Y&&t.bIt("animationDone",function(){return q.selectionChanged()})}})}return ct})()},9256:(st,E,f)=>{"use strict";f.d(E,{G:()=>t});class t{lat;lon}},8522:(st,E,f)=>{"use strict";f.d(E,{N:()=>Bt});var t=f(3279),L=f(8403),Y=(f(9081),f(6846),f(8189)),q=f(4434),Rt=f(9722),F=f(5154),h=f(2882),i=f(6610),at=f(7222),pt=f(8278),S=f(5468),P=f(6182),dt=f(4587),ot=f(6865),Et=f(8058),de=f(6566),Gt=f(295),C=f(4168),et=f(8267);const V=["container"];function Nt(d,I){if(1&d){const l=t.RV6();t.j41(0,"button",9),t.bIt("click",function(){t.eBV(l);const s=t.XpG();return t.Njj(s.onActionShowView360Add())}),t.EFF(1),t.nI1(2,"translate"),t.k0s()}2&d&&(t.R7$(),t.SpI(" ",t.bMT(2,1,"ACTION.Add_To_List"),"\n"))}function Ct(d,I){if(1&d){const l=t.RV6();t.j41(0,"mat-icon",50),t.bIt("click",function(){t.eBV(l);const s=t.XpG(2);return t.Njj(s.dataDetailModel.title="")}),t.EFF(1,"close"),t.k0s()}}function ee(d,I){if(1&d){const l=t.RV6();t.j41(0,"mat-icon",50),t.bIt("click",function(){t.eBV(l);const s=t.XpG(2);return t.Njj(s.dataDetailModel.description="")}),t.EFF(1,"close"),t.k0s()}}function Vt(d,I){if(1&d){const l=t.RV6();t.j41(0,"mat-icon",51),t.bIt("click",function(){t.eBV(l);const s=t.XpG(2);return t.Njj(s.dataDetailModel.linkFileId=null)}),t.EFF(1,"close"),t.k0s()}}function Ft(d,I){if(1&d&&(t.nrm(0,"img",52),t.nI1(1,"cmsthumbnail")),2&d){const l=t.XpG(2);t.FS9("src",t.bMT(1,1,l.dataDetailModel.panorama),t.B4B)}}function Ht(d,I){if(1&d&&(t.j41(0,"table",53)(1,"tr")(2,"td"),t.EFF(3,"viewer Yaw"),t.k0s(),t.j41(4,"td"),t.EFF(5,"viewer Pitch"),t.k0s(),t.j41(6,"td"),t.EFF(7,"click Yaw"),t.k0s(),t.j41(8,"td"),t.EFF(9,"click Pitch"),t.k0s()(),t.j41(10,"tr")(11,"td"),t.EFF(12),t.k0s(),t.j41(13,"td"),t.EFF(14),t.k0s(),t.j41(15,"td"),t.EFF(16),t.k0s(),t.j41(17,"td"),t.EFF(18),t.k0s()()()),2&d){const l=t.XpG(2);t.R7$(12),t.JRh(l.postionView.viewerGetYaw),t.R7$(2),t.JRh(l.postionView.viewerGetPitch),t.R7$(2),t.JRh(l.postionView.clickGetYaw),t.R7$(2),t.JRh(l.postionView.clickGetPitch)}}function ie(d,I){if(1&d){const l=t.RV6();t.j41(0,"button",54),t.bIt("click",function(){t.eBV(l);const s=t.XpG(2);return t.Njj(s.onActionShowHotspotAdd())}),t.EFF(1),t.nI1(2,"translate"),t.k0s()}2&d&&(t.R7$(),t.SpI(" ",t.bMT(2,1,"ACTION.ADD")," "))}function ht(d,I){1&d&&(t.j41(0,"mat-header-cell"),t.EFF(1,"\u0634\u0646\u0627\u0633\u0647 \u0635\u062d\u0646\u0647"),t.k0s())}function It(d,I){if(1&d&&(t.qex(0),t.j41(1,"p",56),t.EFF(2),t.k0s(),t.bVm()),2&d){const l=t.XpG().$implicit;t.R7$(2),t.SpI("",l.sceneId||"N/A"," ")}}function _t(d,I){if(1&d){const l=t.RV6();t.qex(0),t.j41(1,"div",12)(2,"input",57),t.mxI("ngModelChange",function(s){t.eBV(l);const o=t.XpG().$implicit;return t.DH7(o.sceneId,s)||(o.sceneId=s),t.Njj(s)}),t.k0s()(),t.bVm()}if(2&d){const l=t.XpG().$implicit,n=t.XpG(2);t.R7$(2),t.Y8G("disabled",n.editdisabled),t.R50("ngModel",l.sceneId)}}function St(d,I){if(1&d&&(t.j41(0,"mat-cell"),t.DNE(1,It,3,1,"ng-container",55)(2,_t,3,2,"ng-container",55),t.k0s()),2&d){const l=I.$implicit,n=t.XpG(2);t.R7$(),t.Y8G("ngIf",!n.editHotspot.guid||!l.guid||l.guid!==n.editHotspot.guid),t.R7$(),t.Y8G("ngIf",n.editHotspot.guid&&l.guid&&l.guid===n.editHotspot.guid)}}function ae(d,I){1&d&&(t.j41(0,"mat-header-cell"),t.EFF(1,"pitch"),t.k0s())}function Jt(d,I){if(1&d&&(t.qex(0),t.j41(1,"p",56),t.EFF(2),t.k0s(),t.bVm()),2&d){const l=t.XpG().$implicit;t.R7$(2),t.SpI("",l.pitch||"N/A"," ")}}function Zt(d,I){if(1&d){const l=t.RV6();t.qex(0),t.j41(1,"div",12)(2,"input",58),t.mxI("ngModelChange",function(s){t.eBV(l);const o=t.XpG().$implicit;return t.DH7(o.pitch,s)||(o.pitch=s),t.Njj(s)}),t.k0s()(),t.bVm()}if(2&d){const l=t.XpG().$implicit,n=t.XpG(2);t.R7$(2),t.Y8G("disabled",n.editdisabled),t.R50("ngModel",l.pitch)}}function ue(d,I){if(1&d&&(t.j41(0,"mat-cell"),t.DNE(1,Jt,3,1,"ng-container",55)(2,Zt,3,2,"ng-container",55),t.k0s()),2&d){const l=I.$implicit,n=t.XpG(2);t.R7$(),t.Y8G("ngIf",!n.editHotspot.guid||!l.guid||l.guid!==n.editHotspot.guid),t.R7$(),t.Y8G("ngIf",n.editHotspot.guid&&l.guid&&l.guid===n.editHotspot.guid)}}function Tt(d,I){1&d&&(t.j41(0,"mat-header-cell"),t.EFF(1,"yaw"),t.k0s())}function _e(d,I){if(1&d&&(t.qex(0),t.j41(1,"p",59),t.EFF(2),t.k0s(),t.bVm()),2&d){const l=t.XpG().$implicit;t.R7$(2),t.SpI("",l.yaw||"N/A"," ")}}function oe(d,I){if(1&d){const l=t.RV6();t.qex(0),t.j41(1,"div",12)(2,"input",60),t.mxI("ngModelChange",function(s){t.eBV(l);const o=t.XpG().$implicit;return t.DH7(o.yaw,s)||(o.yaw=s),t.Njj(s)}),t.k0s()(),t.bVm()}if(2&d){const l=t.XpG().$implicit,n=t.XpG(2);t.R7$(2),t.Y8G("disabled",n.editdisabled),t.R50("ngModel",l.yaw)}}function Q(d,I){if(1&d&&(t.j41(0,"mat-cell"),t.DNE(1,_e,3,1,"ng-container",55)(2,oe,3,2,"ng-container",55),t.k0s()),2&d){const l=I.$implicit,n=t.XpG(2);t.R7$(),t.Y8G("ngIf",!n.editHotspot.guid||!l.guid||l.guid!==n.editHotspot.guid),t.R7$(),t.Y8G("ngIf",n.editHotspot.guid&&l.guid&&l.guid===n.editHotspot.guid)}}function Ot(d,I){1&d&&(t.j41(0,"mat-header-cell"),t.EFF(1,"\u0646\u0648\u0639"),t.k0s())}function Dt(d,I){if(1&d&&(t.qex(0),t.j41(1,"p",59),t.EFF(2),t.k0s(),t.bVm()),2&d){const l=t.XpG().$implicit;t.R7$(2),t.JRh(l.type)}}function yt(d,I){if(1&d){const l=t.RV6();t.qex(0),t.j41(1,"div",12)(2,"mat-select",61),t.mxI("ngModelChange",function(s){t.eBV(l);const o=t.XpG().$implicit;return t.DH7(o.type,s)||(o.type=s),t.Njj(s)}),t.j41(3,"mat-option",62),t.EFF(4,"\u0627\u0637\u0644\u0627\u0639\u0627\u062a"),t.k0s()()(),t.bVm()}if(2&d){const l=t.XpG().$implicit,n=t.XpG(2);t.R7$(2),t.Y8G("disabled",n.editdisabled),t.R50("ngModel",l.type),t.R7$(),t.Y8G("value","info")}}function ne(d,I){if(1&d&&(t.j41(0,"mat-cell"),t.DNE(1,Dt,3,1,"ng-container",55)(2,yt,5,3,"ng-container",55),t.k0s()),2&d){const l=I.$implicit,n=t.XpG(2);t.R7$(),t.Y8G("ngIf",!n.editHotspot.guid||!l.guid||l.guid!==n.editHotspot.guid),t.R7$(),t.Y8G("ngIf",n.editHotspot.guid&&l.guid&&l.guid===n.editHotspot.guid)}}function pe(d,I){1&d&&(t.j41(0,"mat-header-cell"),t.EFF(1,"targetYaw"),t.k0s())}function x(d,I){if(1&d&&(t.qex(0),t.j41(1,"p",59),t.EFF(2),t.k0s(),t.bVm()),2&d){const l=t.XpG().$implicit;t.R7$(2),t.SpI("",l.targetYaw||"N/A"," ")}}function re(d,I){if(1&d){const l=t.RV6();t.qex(0),t.j41(1,"div",12)(2,"input",63),t.mxI("ngModelChange",function(s){t.eBV(l);const o=t.XpG().$implicit;return t.DH7(o.targetYaw,s)||(o.targetYaw=s),t.Njj(s)}),t.k0s()(),t.bVm()}if(2&d){const l=t.XpG().$implicit,n=t.XpG(2);t.R7$(2),t.Y8G("disabled",n.editdisabled),t.R50("ngModel",l.targetYaw)}}function H(d,I){if(1&d&&(t.j41(0,"mat-cell"),t.DNE(1,x,3,1,"ng-container",55)(2,re,3,2,"ng-container",55),t.k0s()),2&d){const l=I.$implicit,n=t.XpG(2);t.R7$(),t.Y8G("ngIf",!n.editHotspot.guid||!l.guid||l.guid!==n.editHotspot.guid),t.R7$(),t.Y8G("ngIf",n.editHotspot.guid&&l.guid&&l.guid===n.editHotspot.guid)}}function Qt(d,I){1&d&&(t.j41(0,"mat-header-cell"),t.EFF(1,"targetPitch"),t.k0s())}function te(d,I){if(1&d&&(t.qex(0),t.j41(1,"p",59),t.EFF(2),t.k0s(),t.bVm()),2&d){const l=t.XpG().$implicit;t.R7$(2),t.SpI("",l.targetPitch||"N/A"," ")}}function me(d,I){if(1&d){const l=t.RV6();t.qex(0),t.j41(1,"div",12)(2,"input",64),t.mxI("ngModelChange",function(s){t.eBV(l);const o=t.XpG().$implicit;return t.DH7(o.targetPitch,s)||(o.targetPitch=s),t.Njj(s)}),t.k0s()(),t.bVm()}if(2&d){const l=t.XpG().$implicit,n=t.XpG(2);t.R7$(2),t.Y8G("disabled",n.editdisabled),t.R50("ngModel",l.targetPitch)}}function le(d,I){if(1&d&&(t.j41(0,"mat-cell"),t.DNE(1,te,3,1,"ng-container",55)(2,me,3,2,"ng-container",55),t.k0s()),2&d){const l=I.$implicit,n=t.XpG(2);t.R7$(),t.Y8G("ngIf",!n.editHotspot.guid||!l.guid||l.guid!==n.editHotspot.guid),t.R7$(),t.Y8G("ngIf",n.editHotspot.guid&&l.guid&&l.guid===n.editHotspot.guid)}}function jt(d,I){1&d&&(t.j41(0,"mat-header-cell"),t.EFF(1,"\u062a\u0648\u0636\u06cc\u062d\u0627\u062a"),t.k0s())}function fe(d,I){if(1&d&&(t.qex(0),t.j41(1,"p",56),t.EFF(2),t.k0s(),t.bVm()),2&d){const l=t.XpG().$implicit;t.R7$(2),t.SpI("",l.text||"N/A"," ")}}function Mt(d,I){if(1&d){const l=t.RV6();t.qex(0),t.j41(1,"div",12)(2,"input",65),t.mxI("ngModelChange",function(s){t.eBV(l);const o=t.XpG().$implicit;return t.DH7(o.text,s)||(o.text=s),t.Njj(s)}),t.k0s()(),t.bVm()}if(2&d){const l=t.XpG().$implicit,n=t.XpG(2);t.R7$(2),t.Y8G("disabled",n.editdisabled),t.R50("ngModel",l.text)}}function se(d,I){if(1&d&&(t.j41(0,"mat-cell"),t.DNE(1,fe,3,1,"ng-container",55)(2,Mt,3,2,"ng-container",55),t.k0s()),2&d){const l=I.$implicit,n=t.XpG(2);t.R7$(),t.Y8G("ngIf",!n.editHotspot.guid||!l.guid||l.guid!==n.editHotspot.guid),t.R7$(),t.Y8G("ngIf",n.editHotspot.guid&&l.guid&&l.guid===n.editHotspot.guid)}}function ce(d,I){1&d&&(t.j41(0,"mat-header-cell"),t.EFF(1,"\u0622\u062f\u0631\u0633 \u0648\u0628 \u0633\u0627\u06cc\u062a"),t.k0s())}function Ut(d,I){if(1&d&&(t.qex(0),t.j41(1,"p",66),t.EFF(2),t.k0s(),t.bVm()),2&d){const l=t.XpG().$implicit;t.R7$(2),t.SpI("",l.url||"N/A"," ")}}function Wt(d,I){if(1&d){const l=t.RV6();t.qex(0),t.j41(1,"div",12)(2,"input",67),t.mxI("ngModelChange",function(s){t.eBV(l);const o=t.XpG().$implicit;return t.DH7(o.url,s)||(o.url=s),t.Njj(s)}),t.k0s()(),t.bVm()}if(2&d){const l=t.XpG().$implicit,n=t.XpG(2);t.R7$(2),t.Y8G("disabled",n.editdisabled),t.R50("ngModel",l.url)}}function $t(d,I){if(1&d&&(t.j41(0,"mat-cell"),t.DNE(1,Ut,3,1,"ng-container",55)(2,Wt,3,2,"ng-container",55),t.k0s()),2&d){const l=I.$implicit,n=t.XpG(2);t.R7$(),t.Y8G("ngIf",!n.editHotspot.guid||!l.guid||l.guid!==n.editHotspot.guid),t.R7$(),t.Y8G("ngIf",n.editHotspot.guid&&l.guid&&l.guid===n.editHotspot.guid)}}function c(d,I){1&d&&(t.j41(0,"mat-header-cell"),t.EFF(1,"Action"),t.k0s())}function v(d,I){if(1&d){const l=t.RV6();t.qex(0),t.j41(1,"mat-icon",69),t.bIt("click",function(){t.eBV(l);const s=t.XpG().$implicit,o=t.XpG(2);return t.Njj(o.editROw(s))}),t.EFF(2,"edit"),t.k0s(),t.j41(3,"mat-icon",69),t.bIt("click",function(){t.eBV(l);const s=t.XpG().$implicit,o=t.XpG(2);return t.Njj(o.removeROw(s))}),t.EFF(4,"delete"),t.k0s(),t.bVm()}}function p(d,I){if(1&d){const l=t.RV6();t.j41(0,"button",73),t.bIt("click",function(){t.eBV(l);const s=t.XpG(4);return t.Njj(s.updateEdit())}),t.EFF(1),t.nI1(2,"translate"),t.k0s()}if(2&d){const l=t.XpG(4);t.Y8G("disabled",l.editdisabled||!l.editHotspot.text||0===l.editHotspot.text.length),t.R7$(),t.JRh(t.bMT(2,2,"ACTION.Update"))}}function T(d,I){if(1&d){const l=t.RV6();t.j41(0,"button",74),t.bIt("click",function(){t.eBV(l);const s=t.XpG(4);return t.Njj(s.onActionPannellumClickLastPoint())}),t.EFF(1,"\u0646\u0642\u0637\u0647"),t.k0s()}if(2&d){const l=t.XpG(4);t.Y8G("disabled",l.editdisabled)}}function y(d,I){if(1&d){const l=t.RV6();t.qex(0),t.DNE(1,p,3,4,"button",70),t.j41(2,"button",71),t.bIt("click",function(){t.eBV(l);const s=t.XpG(3);return t.Njj(s.cancelEdit())}),t.EFF(3),t.nI1(4,"translate"),t.k0s(),t.DNE(5,T,2,1,"button",72),t.bVm()}if(2&d){const l=t.XpG(3);t.R7$(),t.Y8G("ngIf",l.postionView),t.R7$(),t.Y8G("disabled",l.editdisabled),t.R7$(),t.JRh(t.bMT(4,4,"ACTION.CANCEL")),t.R7$(2),t.Y8G("ngIf",l.editHotspot.pitch!==(null==l.postionView?null:l.postionView.clickGetPitch)&&l.editHotspot.yaw!==(null==l.postionView?null:l.postionView.clickGetYaw))}}function A(d,I){if(1&d&&(t.j41(0,"mat-cell")(1,"span",68),t.DNE(2,v,5,0,"ng-container",55)(3,y,6,6,"ng-container",55),t.k0s()()),2&d){const l=I.$implicit,n=t.XpG(2);t.R7$(2),t.Y8G("ngIf",!n.editHotspot.guid||!l.guid||l.guid!==n.editHotspot.guid),t.R7$(),t.Y8G("ngIf",n.editHotspot.guid&&l.guid&&l.guid===n.editHotspot.guid)}}function w(d,I){1&d&&t.nrm(0,"mat-header-row")}function O(d,I){1&d&&t.nrm(0,"mat-row")}function k(d,I){if(1&d){const l=t.RV6();t.j41(0,"mat-icon",50),t.bIt("click",function(){t.eBV(l);const s=t.XpG(2);return t.Njj(s.dataDetailModel.configDataJson="")}),t.EFF(1,"close"),t.k0s()}}function W(d,I){if(1&d){const l=t.RV6();t.j41(0,"div",10)(1,"div",11)(2,"div",12)(3,"label",13),t.EFF(4),t.nI1(5,"translate"),t.k0s(),t.j41(6,"input",14,1),t.nI1(8,"translate"),t.mxI("ngModelChange",function(s){t.eBV(l);const o=t.XpG();return t.DH7(o.dataDetailModel.title,s)||(o.dataDetailModel.title=s),t.Njj(s)}),t.k0s(),t.DNE(9,Ct,2,0,"mat-icon",15),t.j41(10,"mat-icon",16),t.EFF(11,"mode_edit"),t.k0s()(),t.j41(12,"div",12)(13,"label",17),t.EFF(14),t.nI1(15,"translate"),t.k0s(),t.j41(16,"input",18,2),t.nI1(18,"translate"),t.mxI("ngModelChange",function(s){t.eBV(l);const o=t.XpG();return t.DH7(o.dataDetailModel.description,s)||(o.dataDetailModel.description=s),t.Njj(s)}),t.k0s(),t.DNE(19,ee,2,0,"mat-icon",15),t.j41(20,"mat-icon",16),t.EFF(21,"mode_edit"),t.k0s()(),t.j41(22,"div",12)(23,"label",19),t.EFF(24),t.nI1(25,"translate"),t.k0s(),t.j41(26,"input",20,3),t.nI1(28,"translate"),t.mxI("ngModelChange",function(s){t.eBV(l);const o=t.XpG();return t.DH7(o.dataDetailModel.linkFileId,s)||(o.dataDetailModel.linkFileId=s),t.Njj(s)}),t.bIt("click",function(){t.eBV(l);const s=t.XpG();return t.Njj(s.fileManagerOpenFormReport=!0)}),t.k0s(),t.DNE(29,Vt,2,0,"mat-icon",21),t.j41(30,"mat-icon",22),t.bIt("click",function(){t.eBV(l);const s=t.XpG();return t.Njj(s.fileManagerOpenFormReport=!0)}),t.EFF(31,"mode_edit"),t.k0s()(),t.j41(32,"cms-file-manager",23),t.bIt("itemSelected",function(s){t.eBV(l);const o=t.XpG();return t.Njj(o.onActionFileSelect(s))}),t.mxI("openFormChange",function(s){t.eBV(l);const o=t.XpG();return t.DH7(o.fileManagerOpenFormReport,s)||(o.fileManagerOpenFormReport=s),t.Njj(s)}),t.k0s(),t.j41(33,"a",24),t.nI1(34,"cmsthumbnail"),t.DNE(35,Ft,2,3,"img",25),t.k0s(),t.nrm(36,"hr"),t.DNE(37,Ht,19,4,"table",26),t.nrm(38,"hr"),t.j41(39,"h5"),t.EFF(40,"\u062a\u0646\u0638\u06cc\u0645\u0627\u062a "),t.k0s(),t.j41(41,"p"),t.EFF(42,"\u062f\u0631 \u0648\u0631\u0648\u062f \u0627\u06cc\u0646 \u062a\u0646\u0638\u06cc\u0645\u0627\u062a \u0628\u0627 \u0645\u062f\u06cc\u0631\u06cc\u062a \u0633\u0627\u0645\u0627\u0646\u0647 \u0647\u0645\u0627\u0647\u0646\u06af \u0628\u0627\u0634\u06cc\u062f"),t.k0s(),t.j41(43,"div",27)(44,"div",28),t.DNE(45,ie,3,3,"button",29),t.k0s(),t.j41(46,"mat-table",30,4),t.qex(48,31),t.DNE(49,ht,2,0,"mat-header-cell",32)(50,St,3,2,"mat-cell",33),t.bVm(),t.qex(51,34),t.DNE(52,ae,2,0,"mat-header-cell",32)(53,ue,3,2,"mat-cell",33),t.bVm(),t.qex(54,35),t.DNE(55,Tt,2,0,"mat-header-cell",32)(56,Q,3,2,"mat-cell",33),t.bVm(),t.qex(57,36),t.DNE(58,Ot,2,0,"mat-header-cell",32)(59,ne,3,2,"mat-cell",33),t.bVm(),t.qex(60,37),t.DNE(61,pe,2,0,"mat-header-cell",32)(62,H,3,2,"mat-cell",33),t.bVm(),t.qex(63,38),t.DNE(64,Qt,2,0,"mat-header-cell",32)(65,le,3,2,"mat-cell",33),t.bVm(),t.qex(66,39),t.DNE(67,jt,2,0,"mat-header-cell",32)(68,se,3,2,"mat-cell",33),t.bVm(),t.qex(69,40),t.DNE(70,ce,2,0,"mat-header-cell",32)(71,$t,3,2,"mat-cell",33),t.bVm(),t.qex(72,41),t.DNE(73,c,2,0,"mat-header-cell",32)(74,A,4,2,"mat-cell",33),t.bVm(),t.DNE(75,w,1,0,"mat-header-row",42)(76,O,1,0,"mat-row",43),t.k0s()(),t.j41(77,"div",44)(78,"label",45),t.EFF(79),t.nI1(80,"translate"),t.k0s(),t.j41(81,"input",46,2),t.nI1(83,"translate"),t.mxI("ngModelChange",function(s){t.eBV(l);const o=t.XpG();return t.DH7(o.dataDetailModel.configDataJson,s)||(o.dataDetailModel.configDataJson=s),t.Njj(s)}),t.k0s(),t.DNE(84,k,2,0,"mat-icon",15),t.j41(85,"mat-icon",16),t.EFF(86,"mode_edit"),t.k0s()(),t.j41(87,"div",28)(88,"button",9),t.bIt("click",function(){t.eBV(l);const s=t.XpG();return t.Njj(s.onActionSubmitView360())}),t.nrm(89,"i",47),t.EFF(90),t.nI1(91,"translate"),t.k0s(),t.j41(92,"button",48),t.bIt("click",function(){t.eBV(l);const s=t.XpG();return t.Njj(s.onActionCancellView360())}),t.nrm(93,"i",49),t.EFF(94),t.nI1(95,"translate"),t.k0s()(),t.nrm(96,"br"),t.k0s()()}if(2&d){const l=t.XpG();t.R7$(4),t.JRh(t.bMT(5,34,"TITLE.Photography_Place")),t.R7$(2),t.FS9("placeholder",t.bMT(8,36,"TITLE.Photography_Place")),t.R50("ngModel",l.dataDetailModel.title),t.R7$(3),t.Y8G("ngIf",l.dataDetailModel.title),t.R7$(5),t.JRh(t.bMT(15,38,"TITLE.DESCRIPTION")),t.R7$(2),t.FS9("placeholder",t.bMT(18,40,"TITLE.DESCRIPTION")),t.R50("ngModel",l.dataDetailModel.description),t.R7$(3),t.Y8G("ngIf",l.dataDetailModel.description),t.R7$(5),t.JRh(t.bMT(25,42,"TITLE.View_360_File_ID")),t.R7$(2),t.FS9("placeholder",t.bMT(28,44,"TITLE.View_360_File_ID")),t.R50("ngModel",l.dataDetailModel.linkFileId),t.R7$(3),t.Y8G("ngIf",l.dataDetailModel.linkFileId),t.R7$(3),t.Y8G("language",l.appLanguage)("isPopup",!0),t.R50("openForm",l.fileManagerOpenFormReport),t.Y8G("tree",l.fileManagerTree)("openDirectUploadView",!0)("openFilemanagerButtonLabelKey","select")("selectFileType",l.selectFileTypeReport)("openFilemanagerButtonView",!1),t.R7$(),t.FS9("href",t.bMT(34,46,l.dataDetailModel.panorama),t.B4B),t.R7$(2),t.Y8G("ngIf",(null==l.dataDetailModel||null==l.dataDetailModel.panorama?null:l.dataDetailModel.panorama.length)>0),t.R7$(2),t.Y8G("ngIf",l.postionView),t.R7$(8),t.Y8G("ngIf",l.postionView),t.R7$(),t.Y8G("dataSource",l.tableHotSpotdataSource),t.R7$(29),t.Y8G("matHeaderRowDef",l.tableHotspotDisplayedColumns)("matHeaderRowDefSticky",!0),t.R7$(),t.Y8G("matRowDefColumns",l.tableHotspotDisplayedColumns),t.R7$(3),t.JRh(t.bMT(80,48,"TITLE.configDataJson")),t.R7$(2),t.FS9("placeholder",t.bMT(83,50,"TITLE.configDataJson")),t.R50("ngModel",l.dataDetailModel.configDataJson),t.R7$(3),t.Y8G("ngIf",l.dataDetailModel.configDataJson),t.R7$(6),t.SpI(" ",t.bMT(91,52,"ACTION.SUBMIT_BUTTON")," "),t.R7$(4),t.SpI(" ",t.bMT(95,54,"ACTION.CANCEL")," ")}}function J(d,I){1&d&&(t.j41(0,"mat-header-cell"),t.EFF(1),t.nI1(2,"translate"),t.k0s()),2&d&&(t.R7$(),t.SpI(" ",t.bMT(2,1,"TITLE.PHOTO")," "))}function U(d,I){if(1&d&&t.nrm(0,"img",52),2&d){const l=t.XpG(2).$implicit;t.FS9("src",l.panorama,t.B4B)}}function rt(d,I){if(1&d&&(t.qex(0),t.j41(1,"a",24),t.DNE(2,U,1,1,"img",25),t.k0s(),t.bVm()),2&d){const l=t.XpG().$implicit;t.R7$(),t.FS9("href",l.panorama,t.B4B),t.R7$(),t.Y8G("ngIf",(null==l||null==l.panorama?null:l.panorama.length)>0)}}function Xt(d,I){if(1&d&&(t.j41(0,"mat-cell"),t.DNE(1,rt,3,2,"ng-container",55),t.k0s()),2&d){const l=I.$implicit;t.R7$(),t.Y8G("ngIf",l.panorama)}}function Yt(d,I){1&d&&(t.j41(0,"mat-header-cell"),t.EFF(1),t.nI1(2,"translate"),t.k0s()),2&d&&(t.R7$(),t.SpI(" ",t.bMT(2,1,"TITLE.Photography_Place")," "))}function lt(d,I){if(1&d&&(t.qex(0),t.EFF(1),t.bVm()),2&d){const l=t.XpG().$implicit;t.R7$(),t.SpI(" ",l.title," ")}}function nt(d,I){if(1&d&&(t.j41(0,"mat-cell"),t.DNE(1,lt,2,1,"ng-container",55),t.k0s()),2&d){const l=I.$implicit;t.R7$(),t.Y8G("ngIf",l.title)}}function ut(d,I){1&d&&(t.j41(0,"mat-header-cell"),t.EFF(1),t.nI1(2,"translate"),t.k0s()),2&d&&(t.R7$(),t.SpI(" ",t.bMT(2,1,"TITLE.DESCRIPTION")," "))}function ft(d,I){if(1&d&&(t.qex(0),t.EFF(1),t.bVm()),2&d){const l=t.XpG().$implicit;t.R7$(),t.SpI(" ",l.description," ")}}function gt(d,I){if(1&d&&(t.j41(0,"mat-cell"),t.DNE(1,ft,2,1,"ng-container",55),t.k0s()),2&d){const l=I.$implicit;t.R7$(),t.Y8G("ngIf",l.description)}}function At(d,I){1&d&&(t.j41(0,"mat-header-cell"),t.EFF(1),t.nI1(2,"translate"),t.nI1(3,"translate"),t.k0s()),2&d&&(t.R7$(),t.Lme(" ",t.bMT(2,2,"TITLE.Edit")," | ",t.bMT(3,4,"TITLE.Delete")," "))}function tt(d,I){if(1&d){const l=t.RV6();t.j41(0,"mat-cell",81)(1,"small")(2,"mat-icon",82),t.bIt("click",function(){const s=t.eBV(l).renderIndex,o=t.XpG(2);return t.Njj(o.onActionOptionEditView360(s))}),t.EFF(3,"edit"),t.k0s()(),t.EFF(4,"| "),t.j41(5,"small")(6,"mat-icon",83),t.bIt("click",function(){const s=t.eBV(l).renderIndex,o=t.XpG(2);return t.Njj(o.onActionOptionRemoveView360(s))}),t.EFF(7,"delete"),t.k0s()()()}}function g(d,I){1&d&&t.nrm(0,"mat-header-row")}function bt(d,I){1&d&&t.nrm(0,"mat-row")}function kt(d,I){if(1&d&&(t.j41(0,"div",10)(1,"mat-table",75),t.qex(2,76),t.DNE(3,J,3,3,"mat-header-cell",32)(4,Xt,2,1,"mat-cell",33),t.bVm(),t.qex(5,77),t.DNE(6,Yt,3,3,"mat-header-cell",32)(7,nt,2,1,"mat-cell",33),t.bVm(),t.qex(8,78),t.DNE(9,ut,3,3,"mat-header-cell",32)(10,gt,2,1,"mat-cell",33),t.bVm(),t.qex(11,41),t.DNE(12,At,4,6,"mat-header-cell",32)(13,tt,8,0,"mat-cell",79),t.bVm(),t.DNE(14,g,1,0,"mat-header-row",80)(15,bt,1,0,"mat-row",43),t.k0s()()),2&d){const l=t.XpG();t.R7$(),t.Y8G("dataSource",l.tabledataSource),t.R7$(13),t.Y8G("matHeaderRowDef",l.tabledisplayedColumns),t.R7$(),t.Y8G("matRowDefColumns",l.tabledisplayedColumns)}}class mt{viewerGetYaw;viewerGetPitch;clickGetYaw;clickGetPitch}let Bt=(()=>{class d{cmsToastrService;publicHelper;translate;static nextId=0;id=++d.nextId;constructor(l,n,s){this.cmsToastrService=l,this.publicHelper=n,this.translate=s,this.fileManagerTree=this.publicHelper.GetfileManagerTreeConfig()}privateDataModel=[];dataDetailModel=new Y.oDM;dataModelChange=new t.bkB;set dataModel(l){l||(l=[]),this.privateDataModel=l,this.privateDataModel.forEach(n=>{n.hotSpots||(n.hotSpots=[]),n.hotSpots=this.uniqByReduce(n.hotSpots),n.hotSpots.forEach(s=>{s.guid=this.getGuid()})}),this.tabledataSource.data=this.privateDataModel,this.tableHotSpotdataSource.data=[]}get dataModel(){return this.privateDataModel}uniqByReduce(l){const n=[];return l.forEach(s=>{!n.includes(s)&&0==n.filter(o=>o.pitch==s.pitch&&o.yaw==s.yaw).length&&n.push(s)}),n}formInfo=new Y.IL9;loading=new q.o;loadingOption=new q.o;tabledataSource=new L.I6;tableHotSpotdataSource=new L.I6;tabledisplayedColumns=["panorama","Title","Description","Action"];tableHotspotDisplayedColumns=["type","text","url","pitch","yaw","Action"];selectFileTypeReport=["jpeg","jpg"];fileManagerTree;appLanguage="fa";showAddView360=!1;fileManagerOpenFormReport=!1;ngOnInit(){this.translate.get("TITLE.Edit").subscribe(l=>{this.formInfo.formTitle=l})}container;viewer;options;postionView;ngAfterViewInit(){this.container.nativeElement.style.display="none"}getGuid(){return Math.floor(Math.random()*(new Date).getTime()).toString()}actionPannellumImageLoad(l,n){const s={type:"equirectangular",panorama:l,autoLoad:!0,autoRotate:1.5,crossOrigin:"anonymous"};n&&n.length>0&&(s.hotSpots=n);const o=Object.assign({},s,this.options);this.viewer&&this.onActionPannellumDestroy(),this.viewer=pannellum.viewer(this.container.nativeElement,o),this.container.nativeElement.style.display="block"}actionPrivateDataModelOptimaze(){const l=[];this.privateDataModel||(this.privateDataModel=[]),this.privateDataModel.forEach(n=>{n.hotSpots||(n.hotSpots=[]),n.hotSpots.forEach(s=>{s.type&&s.type.length>0&&l.push(s)}),n.hotSpots=this.uniqByReduce(l)})}onActionPannellumClick(l){if(!this.viewer)return;this.postionView=new mt,this.postionView.viewerGetYaw=this.viewer.getYaw(),this.postionView.viewerGetPitch=this.viewer.getPitch();const n=this.viewer.mouseEventToCoords(l);!n||0==n.length||(this.postionView.clickGetYaw=n[1],this.postionView.clickGetPitch=n[0])}onActionPannellumDestroy(){this.container.nativeElement.style.display="none",this.postionView=null,this.viewer&&this.viewer.destroy()}onActionPannellumClickLastPoint(){this.postionView&&(0!=this.postionView.clickGetYaw||0!=this.postionView.clickGetPitch)&&(this.editHotspot.yaw=this.postionView.clickGetYaw,this.editHotspot.pitch=this.postionView.clickGetPitch)}onActionFileSelect(l){l&&l.id&&0!==l.id?(this.dataDetailModel.linkFileId=l.id,this.dataDetailModel.panorama=l.downloadLinksrc,this.dataDetailModel.preview=l.downloadLinksrc,this.actionPannellumImageLoad(this.dataDetailModel.panorama,[])):this.cmsToastrService.typeErrorSelectedRow()}onActionSubmitView360(){(!this.dataDetailModel.linkFileId||this.dataDetailModel.linkFileId<=0)&&this.cmsToastrService.typeErrorMessage("\u0641\u0627\u06cc\u0644 \u0627\u0646\u062a\u062e\u0627\u0628 \u0646\u0634\u062f\u0647"),this.privateDataModel||(this.privateDataModel=[]),this.selectIndex>=0?this.privateDataModel[this.selectIndex]=this.dataDetailModel:this.privateDataModel.push(this.dataDetailModel),this.actionPrivateDataModelOptimaze(),this.dataModel=this.privateDataModel,this.dataModelChange.emit(this.privateDataModel),this.showAddView360=!this.showAddView360,this.selectIndex=-1,this.onActionPannellumDestroy()}onActionCancellView360(){this.showAddView360=!1,this.onActionPannellumDestroy()}onActionShowView360Add(){this.dataDetailModel=new Y.oDM,this.showAddView360=!this.showAddView360}inAddhotspotGuid="";onActionShowHotspotAdd(){this.dataDetailModel||(this.dataDetailModel=new Y.oDM),this.dataDetailModel.hotSpots||(this.dataDetailModel.hotSpots=[]),this.editHotspot=new Y.I1z;const l=new Y.I1z;l.type="info",l.guid=this.getGuid(),this.inAddhotspotGuid=l.guid,this.dataDetailModel.hotSpots.push(l),this.tableHotSpotdataSource.data=this.uniqByReduce(this.dataDetailModel.hotSpots),this.newROw(l),this.onActionPannellumClickLastPoint()}onActionOptionRemoveView360(l){l<0||!this.privateDataModel||0===this.privateDataModel.length||(this.privateDataModel.splice(l,1),this.actionPrivateDataModelOptimaze(),this.dataModel=this.privateDataModel,this.dataModelChange.emit(this.privateDataModel),this.onActionPannellumDestroy())}selectIndex=-1;onActionOptionEditView360(l){l<0||!this.privateDataModel||0===this.privateDataModel.length||(this.dataDetailModel=this.privateDataModel[l],this.dataDetailModel.hotSpots||(this.dataDetailModel.hotSpots=[]),this.actionPannellumImageLoad(this.dataDetailModel.panorama,this.dataDetailModel.hotSpots),this.oldHotspot=new Y.I1z,this.editHotspot=new Y.I1z,this.tableHotSpotdataSource.data=this.uniqByReduce(this.dataDetailModel.hotSpots),this.selectIndex=l,this.showAddView360=!this.showAddView360)}editHotspot;oldHotspot;editdisabled;newROw(l){this.editHotspot=l&&l.guid?l:new Y.I1z,this.oldHotspot={...this.editHotspot}}editROw(l){this.editHotspot=l&&l.guid?l:new Y.I1z,this.oldHotspot={...this.editHotspot},this.inAddhotspotGuid=""}removeROw(l){const n=this.dataDetailModel.hotSpots.findIndex(s=>s.guid==l.guid);n>=0&&(this.dataDetailModel.hotSpots.splice(n,1),this.tableHotSpotdataSource.data=this.uniqByReduce(this.dataDetailModel.hotSpots))}updateEdit(){this.inAddhotspotGuid="",this.editdisabled=!0;const l=this.dataDetailModel.hotSpots.findIndex(n=>n.guid==this.oldHotspot.guid);l>=0&&(this.dataDetailModel.hotSpots[l]=this.editHotspot),this.editdisabled=!1,this.oldHotspot=new Y.I1z,this.editHotspot=new Y.I1z}cancelEdit(){this.inAddhotspotGuid?.length>0&&(this.dataDetailModel.hotSpots=this.dataDetailModel.hotSpots.filter(l=>l.guid!=this.inAddhotspotGuid)),this.editHotspot=new Y.I1z,this.oldHotspot&&this.oldHotspot.guid&&(this.dataDetailModel.hotSpots||(this.dataDetailModel.hotSpots=[]),this.tableHotSpotdataSource.data=this.uniqByReduce(this.dataDetailModel.hotSpots))}static \u0275fac=function(n){return new(n||d)(t.rXU(Rt.k),t.rXU(F.A),t.rXU(h.c$))};static \u0275cmp=t.VBU({type:d,selectors:[["app-cms-360-image-list"]],viewQuery:function(n,s){if(1&n&&t.GBs(V,5),2&n){let o;t.mGM(o=t.lsd())&&(s.container=o.first)}},inputs:{dataModel:"dataModel"},outputs:{dataModelChange:"dataModelChange"},decls:6,vars:5,consts:[["container",""],["Title",""],["Description",""],["LinkFileId",""],["table",""],["type","button","class","btn font-13 font-600 btn-s m-1 rounded-s shadow-xl border-0 gradient-highlight",3,"click",4,"ngIf"],[1,"container",2,"height","380px","width","100%","direction","ltr",3,"click","id"],["class","example-container mat-elevation-z8",4,"ngIf"],[3,"options"],["type","button",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-highlight",3,"click"],[1,"example-container","mat-elevation-z8"],[1,"m-2"],[1,"input-style","has-borders","no-icon","input-style-always-active","validate-field","mb-4"],["for","dataDetailModel.title",1,"color-highlight"],["type","text","name","dataDetailModel.title","id","dataDetailModel.title","minlength","3","maxlength","100","required","",1,"form-control","validate-name",3,"ngModelChange","ngModel","placeholder"],["matSuffix","","class","pointer","matSuffix","","mat-icon-button","","aria-label","Clear",3,"click",4,"ngIf"],["matSuffix","",1,"pointer"],["for","dataDetailModel.description",1,"color-highlight"],["type","text","name","dataDetailModel.description","id","dataDetailModel.description","minlength","3","maxlength","100",1,"form-control","validate-name",3,"ngModelChange","ngModel","placeholder"],["for","dataDetailModel.linkFileId",1,"color-highlight"],["type","text","name","dataDetailModel.linkFileId","id","dataDetailModel.linkFileId",1,"form-control","validate-name",3,"ngModelChange","click","ngModel","placeholder"],["matSuffix","","matSuffix","","mat-icon-button","","aria-label","Clear",3,"click",4,"ngIf"],["matSuffix","",3,"click"],[3,"itemSelected","openFormChange","language","isPopup","openForm","tree","openDirectUploadView","openFilemanagerButtonLabelKey","selectFileType","openFilemanagerButtonView"],["target","_blank",3,"href"],["style","vertical-align:middle;","class","ntk-hover-zoom","aria-hidden","","height","50","width","50",3,"src",4,"ngIf"],["class","grid-row-ltr-center",4,"ngIf"],[2,"background-color","bisque","padding","5px"],[1,"form-actions",2,"direction","ltr"],["type","button","class","btn font-13 font-600 btn-s m-1 rounded-s shadow-xl border-0 gradient-teal",3,"click",4,"ngIf"],["matSort","",3,"dataSource"],["matColumnDef","sceneId"],[4,"matHeaderCellDef"],[4,"matCellDef"],["matColumnDef","pitch"],["matColumnDef","yaw"],["matColumnDef","type"],["matColumnDef","targetYaw"],["matColumnDef","targetPitch"],["matColumnDef","text"],["matColumnDef","url"],["matColumnDef","Action"],[4,"matHeaderRowDef","matHeaderRowDefSticky"],[4,"matRowDef","matRowDefColumns"],[1,"input-style","has-borders","no-icon","input-style-always-active","validate-field","mb-4",2,"visibility","hidden"],["for","dataDetailModel.configDataJson",1,"color-highlight"],["type","text","name","dataDetailModel.configDataJson","id","dataDetailModel.configDataJson","minlength","0","maxlength","10000","required","",1,"form-control","validate-name",3,"ngModelChange","ngModel","placeholder"],[1,"fa","fa-check-square-o"],["type","button",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-gray",3,"click"],[1,"ft-x"],["matSuffix","","matSuffix","","mat-icon-button","","aria-label","Clear",1,"pointer",3,"click"],["matSuffix","","matSuffix","","mat-icon-button","","aria-label","Clear",3,"click"],["aria-hidden","","height","50","width","50",1,"ntk-hover-zoom",2,"vertical-align","middle",3,"src"],[1,"grid-row-ltr-center"],["type","button",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-teal",3,"click"],[4,"ngIf"],[1,"text-truncate"],["matInput","","placeholder","\u0634\u0646\u0627\u0633\u0647 \u0635\u062d\u0646\u0647","name","sceneId",1,"form-control","validate-name",2,"direction","ltr","text-align","left",3,"ngModelChange","disabled","ngModel"],["matInput","","type","number","placeholder","pitch","name","pitch",1,"form-control","validate-name",2,"direction","ltr","text-align","left",3,"ngModelChange","disabled","ngModel"],[1,"text-truncate","grid-row-ltr-center"],["matInput","","type","number","placeholder","yaw","name","yaw",1,"form-control","validate-name",2,"direction","ltr","text-align","left",3,"ngModelChange","disabled","ngModel"],["placeholder","Select","name","type",1,"form-control","validate-name",3,"ngModelChange","disabled","ngModel"],[3,"value"],["matInput","","placeholder","targetYaw","name","targetYaw",1,"form-control","validate-name",2,"direction","ltr","text-align","left",3,"ngModelChange","disabled","ngModel"],["matInput","","placeholder","targetPitch","name","targetPitch",1,"form-control","validate-name",2,"direction","ltr","text-align","left",3,"ngModelChange","disabled","ngModel"],["matInput","","placeholder","text","name","text",1,"form-control","validate-name",2,"direction","ltr","text-align","left",3,"ngModelChange","disabled","ngModel"],[1,"text-truncate","grid-row-ltr"],["matInput","","placeholder","url","name","url",1,"form-control","validate-name",2,"direction","ltr","text-align","left",3,"ngModelChange","disabled","ngModel"],[1,"m-1",2,"text-align","center"],[3,"click"],["type","button","class","mb-2",3,"disabled","click",4,"ngIf"],["type","button",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-gray",3,"click","disabled"],["type","button","class","btn font-13 font-600 btn-s m-1 rounded-s shadow-xl border-0 gradient-green","matTooltip","\u062b\u0628\u062a \u0622\u062e\u0631\u06cc\u0646 \u0646\u0642\u0637\u0647 \u06a9\u0644\u06cc\u06a9 \u0634\u062f\u0647",3,"disabled","click",4,"ngIf"],["type","button",1,"mb-2",3,"click","disabled"],["type","button","matTooltip","\u062b\u0628\u062a \u0622\u062e\u0631\u06cc\u0646 \u0646\u0642\u0637\u0647 \u06a9\u0644\u06cc\u06a9 \u0634\u062f\u0647",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-green",3,"click","disabled"],["multiTemplateDataRows","",3,"dataSource"],["matColumnDef","panorama"],["matColumnDef","Title"],["matColumnDef","Description"],["class","Action",4,"matCellDef"],[4,"matHeaderRowDef"],[1,"Action"],["matTooltipPosition","before","aria-hidden","false",2,"color","blue","cursor","pointer",3,"click"],["matTooltipPosition","before","aria-hidden","false",2,"color","red","cursor","pointer",3,"click"]],template:function(n,s){if(1&n){const o=t.RV6();t.DNE(0,Nt,3,3,"button",5),t.j41(1,"div",6,0),t.bIt("click",function(_){return t.eBV(o),t.Njj(s.onActionPannellumClick(_))}),t.k0s(),t.DNE(3,W,97,56,"div",7),t.nrm(4,"cms-progress-spinner",8),t.DNE(5,kt,16,3,"div",7)}2&n&&(t.Y8G("ngIf",!s.showAddView360),t.R7$(),t.Y8G("id",s.id),t.R7$(2),t.Y8G("ngIf",s.showAddView360),t.R7$(),t.Y8G("options",s.loadingOption),t.R7$(),t.Y8G("ngIf",!s.showAddView360))},dependencies:[i.bT,at.me,at.Q0,at.BC,at.YS,at.xh,at.tU,at.vS,pt.wT,S.yw,P.An,dt.fg,ot.VO,Et.B4,L.Zl,L.tL,L.ji,L.cC,L.YV,L.iL,L.KS,L.$R,L.YZ,L.NB,de.oV,Gt.e5,C.X,h.D9,et.r],encapsulation:2})}return d})()},9908:(st,E,f)=>{"use strict";f.d(E,{Y:()=>l});var t=f(3279),L=f(8403),Y=(f(9081),f(6846),f(8189)),q=f(4434),Rt=f(9722),F=f(5154),h=f(2882),i=f(6610),at=f(7222),pt=f(8278),S=f(5468),P=f(6182),dt=f(6865),ot=f(8058),Et=f(6566),de=f(295),Gt=f(4168),C=f(8267);const et=["container"];function V(n,s){if(1&n){const o=t.RV6();t.j41(0,"button",9),t.bIt("click",function(){t.eBV(o);const _=t.XpG();return t.Njj(_.onActionShowView360Add())}),t.EFF(1),t.nI1(2,"translate"),t.k0s()}2&n&&(t.R7$(),t.SpI(" ",t.bMT(2,1,"ACTION.Add_To_List"),"\n"))}function Nt(n,s){if(1&n){const o=t.RV6();t.j41(0,"button",10),t.bIt("click",function(){t.eBV(o);const _=t.XpG();return t.Njj(_.onActionImportFile360View())}),t.EFF(1," \u0648\u0631\u0648\u062f \u0627\u0637\u0644\u0627\u0639\u0627\u062a \u0639\u06a9\u0633 \u0647\u0627\u06cc 360\n"),t.k0s()}}function Ct(n,s){if(1&n){const o=t.RV6();t.j41(0,"button",10),t.bIt("click",function(){t.eBV(o);const _=t.XpG();return t.Njj(_.actionPannellumTourLoad())}),t.EFF(1," \u0646\u0645\u0627\u06cc\u0634 \u062a\u0648\u0631\n"),t.k0s()}}function ee(n,s){if(1&n){const o=t.RV6();t.j41(0,"mat-icon",46),t.bIt("click",function(){t.eBV(o);const _=t.XpG(2);return t.Njj(_.dataDetailModel.title="")}),t.EFF(1,"close"),t.k0s()}}function Vt(n,s){if(1&n){const o=t.RV6();t.j41(0,"mat-icon",47),t.bIt("click",function(){t.eBV(o);const _=t.XpG(2);return t.Njj(_.dataDetailModel.linkFileId=null)}),t.EFF(1,"close"),t.k0s()}}function Ft(n,s){if(1&n&&(t.nrm(0,"img",48),t.nI1(1,"cmsthumbnail")),2&n){const o=t.XpG(2);t.FS9("src",t.bMT(1,1,o.dataDetailModel.panorama),t.B4B)}}function Ht(n,s){if(1&n&&(t.j41(0,"table",49)(1,"tr")(2,"td"),t.EFF(3,"viewer Yaw"),t.k0s(),t.j41(4,"td"),t.EFF(5,"viewer Pitch"),t.k0s(),t.j41(6,"td"),t.EFF(7,"click Yaw"),t.k0s(),t.j41(8,"td"),t.EFF(9,"click Pitch"),t.k0s()(),t.j41(10,"tr")(11,"td"),t.EFF(12),t.k0s(),t.j41(13,"td"),t.EFF(14),t.k0s(),t.j41(15,"td"),t.EFF(16),t.k0s(),t.j41(17,"td"),t.EFF(18),t.k0s()()()),2&n){const o=t.XpG(2);t.R7$(12),t.JRh(o.postionView.viewerGetYaw),t.R7$(2),t.JRh(o.postionView.viewerGetPitch),t.R7$(2),t.JRh(o.postionView.clickGetYaw),t.R7$(2),t.JRh(o.postionView.clickGetPitch)}}function ie(n,s){if(1&n){const o=t.RV6();t.j41(0,"button",50),t.bIt("click",function(){t.eBV(o);const _=t.XpG(2);return t.Njj(_.onActionShowHotspotAdd())}),t.EFF(1),t.nI1(2,"translate"),t.k0s()}2&n&&(t.R7$(),t.SpI(" ",t.bMT(2,1,"ACTION.ADD")," "))}function ht(n,s){1&n&&(t.j41(0,"mat-header-cell"),t.EFF(1,"\u0646\u0648\u0639"),t.k0s())}function It(n,s){if(1&n&&(t.qex(0),t.j41(1,"p",52),t.EFF(2),t.k0s(),t.bVm()),2&n){const o=t.XpG().$implicit;t.R7$(2),t.JRh(o.type)}}function _t(n,s){if(1&n){const o=t.RV6();t.qex(0),t.j41(1,"div",13)(2,"mat-select",53),t.mxI("ngModelChange",function(_){t.eBV(o);const R=t.XpG().$implicit;return t.DH7(R.type,_)||(R.type=_),t.Njj(_)}),t.j41(3,"mat-option",54),t.EFF(4,"\u0635\u062d\u0646\u0647"),t.k0s(),t.j41(5,"mat-option",54),t.EFF(6,"\u0627\u0637\u0644\u0627\u0639\u0627\u062a"),t.k0s()()(),t.bVm()}if(2&n){const o=t.XpG().$implicit,m=t.XpG(2);t.R7$(2),t.Y8G("disabled",m.editdisabled),t.R50("ngModel",o.type),t.R7$(),t.Y8G("value","scene"),t.R7$(2),t.Y8G("value","info")}}function St(n,s){if(1&n&&(t.j41(0,"mat-cell"),t.DNE(1,It,3,1,"ng-container",51)(2,_t,7,4,"ng-container",51),t.k0s()),2&n){const o=s.$implicit,m=t.XpG(2);t.R7$(),t.Y8G("ngIf",!m.editHotspot.guid||!o.guid||o.guid!==m.editHotspot.guid),t.R7$(),t.Y8G("ngIf",m.editHotspot.guid&&o.guid&&o.guid===m.editHotspot.guid)}}function ae(n,s){1&n&&(t.j41(0,"mat-header-cell"),t.EFF(1,"\u0634\u0646\u0627\u0633\u0647 \u0635\u062d\u0646\u0647"),t.k0s())}function Jt(n,s){if(1&n&&(t.qex(0),t.j41(1,"p",55),t.EFF(2),t.k0s(),t.bVm()),2&n){const o=t.XpG().$implicit;t.R7$(2),t.SpI("",o.sceneId||"N/A"," ")}}function Zt(n,s){if(1&n){const o=t.RV6();t.qex(0),t.j41(1,"div",13)(2,"input",56),t.mxI("ngModelChange",function(_){t.eBV(o);const R=t.XpG().$implicit;return t.DH7(R.sceneId,_)||(R.sceneId=_),t.Njj(_)}),t.k0s()(),t.bVm()}if(2&n){const o=t.XpG().$implicit,m=t.XpG(2);t.R7$(2),t.Y8G("disabled",m.editdisabled),t.R50("ngModel",o.sceneId)}}function ue(n,s){if(1&n&&(t.j41(0,"mat-cell"),t.DNE(1,Jt,3,1,"ng-container",51)(2,Zt,3,2,"ng-container",51),t.k0s()),2&n){const o=s.$implicit,m=t.XpG(2);t.R7$(),t.Y8G("ngIf",!m.editHotspot.guid||!o.guid||o.guid!==m.editHotspot.guid),t.R7$(),t.Y8G("ngIf",m.editHotspot.guid&&o.guid&&o.guid===m.editHotspot.guid&&"scene"===o.type)}}function Tt(n,s){1&n&&(t.j41(0,"mat-header-cell"),t.EFF(1,"\u0634\u0646\u0627\u0633\u0647 \u0635\u062d\u0646\u0647"),t.k0s())}function _e(n,s){if(1&n&&(t.qex(0),t.j41(1,"p",52),t.EFF(2),t.k0s(),t.bVm()),2&n){const o=t.XpG().$implicit;t.R7$(2),t.JRh(o.sceneId)}}function oe(n,s){if(1&n&&(t.j41(0,"mat-option",54),t.EFF(1),t.k0s()),2&n){const o=s.$implicit;t.Y8G("value",o.linkFileId),t.R7$(),t.JRh(o.title)}}function Q(n,s){if(1&n){const o=t.RV6();t.qex(0),t.j41(1,"div",13)(2,"mat-select",57),t.mxI("ngModelChange",function(_){t.eBV(o);const R=t.XpG().$implicit;return t.DH7(R.sceneId,_)||(R.sceneId=_),t.Njj(_)}),t.DNE(3,oe,2,2,"mat-option",58),t.k0s()(),t.bVm()}if(2&n){const o=t.XpG().$implicit,m=t.XpG(2);t.R7$(2),t.Y8G("disabled",m.editdisabled),t.R50("ngModel",o.sceneId),t.R7$(),t.Y8G("ngForOf",m.scenesList)}}function Ot(n,s){if(1&n&&(t.j41(0,"mat-cell"),t.DNE(1,_e,3,1,"ng-container",51)(2,Q,4,3,"ng-container",51),t.k0s()),2&n){const o=s.$implicit,m=t.XpG(2);t.R7$(),t.Y8G("ngIf",!m.editHotspot.guid||!o.guid||o.guid!==m.editHotspot.guid),t.R7$(),t.Y8G("ngIf",m.editHotspot.guid&&o.guid&&o.guid===m.editHotspot.guid&&"scene"===o.type)}}function Dt(n,s){1&n&&(t.j41(0,"mat-header-cell"),t.EFF(1,"pitch"),t.k0s())}function yt(n,s){if(1&n&&(t.qex(0),t.j41(1,"p",55),t.EFF(2),t.k0s(),t.bVm()),2&n){const o=t.XpG().$implicit;t.R7$(2),t.SpI("",o.pitch||"N/A"," ")}}function ne(n,s){if(1&n){const o=t.RV6();t.qex(0),t.j41(1,"div",13)(2,"input",59),t.mxI("ngModelChange",function(_){t.eBV(o);const R=t.XpG().$implicit;return t.DH7(R.pitch,_)||(R.pitch=_),t.Njj(_)}),t.k0s()(),t.bVm()}if(2&n){const o=t.XpG().$implicit,m=t.XpG(2);t.R7$(2),t.Y8G("disabled",m.editdisabled),t.R50("ngModel",o.pitch)}}function pe(n,s){if(1&n&&(t.j41(0,"mat-cell"),t.DNE(1,yt,3,1,"ng-container",51)(2,ne,3,2,"ng-container",51),t.k0s()),2&n){const o=s.$implicit,m=t.XpG(2);t.R7$(),t.Y8G("ngIf",!m.editHotspot.guid||!o.guid||o.guid!==m.editHotspot.guid),t.R7$(),t.Y8G("ngIf",m.editHotspot.guid&&o.guid&&o.guid===m.editHotspot.guid)}}function x(n,s){1&n&&(t.j41(0,"mat-header-cell"),t.EFF(1,"yaw"),t.k0s())}function re(n,s){if(1&n&&(t.qex(0),t.j41(1,"p",52),t.EFF(2),t.k0s(),t.bVm()),2&n){const o=t.XpG().$implicit;t.R7$(2),t.SpI("",o.yaw||"N/A"," ")}}function H(n,s){if(1&n){const o=t.RV6();t.qex(0),t.j41(1,"div",13)(2,"input",60),t.mxI("ngModelChange",function(_){t.eBV(o);const R=t.XpG().$implicit;return t.DH7(R.yaw,_)||(R.yaw=_),t.Njj(_)}),t.k0s()(),t.bVm()}if(2&n){const o=t.XpG().$implicit,m=t.XpG(2);t.R7$(2),t.Y8G("disabled",m.editdisabled),t.R50("ngModel",o.yaw)}}function Qt(n,s){if(1&n&&(t.j41(0,"mat-cell"),t.DNE(1,re,3,1,"ng-container",51)(2,H,3,2,"ng-container",51),t.k0s()),2&n){const o=s.$implicit,m=t.XpG(2);t.R7$(),t.Y8G("ngIf",!m.editHotspot.guid||!o.guid||o.guid!==m.editHotspot.guid),t.R7$(),t.Y8G("ngIf",m.editHotspot.guid&&o.guid&&o.guid===m.editHotspot.guid)}}function te(n,s){1&n&&(t.j41(0,"mat-header-cell"),t.EFF(1,"targetYaw"),t.k0s())}function me(n,s){if(1&n&&(t.qex(0),t.j41(1,"p",52),t.EFF(2),t.k0s(),t.bVm()),2&n){const o=t.XpG().$implicit;t.R7$(2),t.SpI("",o.targetYaw||"N/A"," ")}}function le(n,s){if(1&n){const o=t.RV6();t.qex(0),t.j41(1,"div",13)(2,"input",61),t.mxI("ngModelChange",function(_){t.eBV(o);const R=t.XpG().$implicit;return t.DH7(R.targetYaw,_)||(R.targetYaw=_),t.Njj(_)}),t.k0s()(),t.bVm()}if(2&n){const o=t.XpG().$implicit,m=t.XpG(2);t.R7$(2),t.Y8G("disabled",m.editdisabled),t.R50("ngModel",o.targetYaw)}}function jt(n,s){if(1&n&&(t.j41(0,"mat-cell"),t.DNE(1,me,3,1,"ng-container",51)(2,le,3,2,"ng-container",51),t.k0s()),2&n){const o=s.$implicit,m=t.XpG(2);t.R7$(),t.Y8G("ngIf",!m.editHotspot.guid||!o.guid||o.guid!==m.editHotspot.guid),t.R7$(),t.Y8G("ngIf",m.editHotspot.guid&&o.guid&&o.guid===m.editHotspot.guid)}}function fe(n,s){1&n&&(t.j41(0,"mat-header-cell"),t.EFF(1,"targetPitch"),t.k0s())}function Mt(n,s){if(1&n&&(t.qex(0),t.j41(1,"p",52),t.EFF(2),t.k0s(),t.bVm()),2&n){const o=t.XpG().$implicit;t.R7$(2),t.SpI("",o.targetPitch||"N/A"," ")}}function se(n,s){if(1&n){const o=t.RV6();t.qex(0),t.j41(1,"div",13)(2,"input",62),t.mxI("ngModelChange",function(_){t.eBV(o);const R=t.XpG().$implicit;return t.DH7(R.targetPitch,_)||(R.targetPitch=_),t.Njj(_)}),t.k0s()(),t.bVm()}if(2&n){const o=t.XpG().$implicit,m=t.XpG(2);t.R7$(2),t.Y8G("disabled",m.editdisabled),t.R50("ngModel",o.targetPitch)}}function ce(n,s){if(1&n&&(t.j41(0,"mat-cell"),t.DNE(1,Mt,3,1,"ng-container",51)(2,se,3,2,"ng-container",51),t.k0s()),2&n){const o=s.$implicit,m=t.XpG(2);t.R7$(),t.Y8G("ngIf",!m.editHotspot.guid||!o.guid||o.guid!==m.editHotspot.guid),t.R7$(),t.Y8G("ngIf",m.editHotspot.guid&&o.guid&&o.guid===m.editHotspot.guid)}}function Ut(n,s){1&n&&(t.j41(0,"mat-header-cell"),t.EFF(1,"\u062a\u0648\u0636\u06cc\u062d\u0627\u062a"),t.k0s())}function Wt(n,s){if(1&n&&(t.qex(0),t.j41(1,"p",55),t.EFF(2),t.k0s(),t.bVm()),2&n){const o=t.XpG().$implicit;t.R7$(2),t.SpI("",o.text||"N/A"," ")}}function $t(n,s){if(1&n){const o=t.RV6();t.qex(0),t.j41(1,"div",13)(2,"input",63),t.mxI("ngModelChange",function(_){t.eBV(o);const R=t.XpG().$implicit;return t.DH7(R.text,_)||(R.text=_),t.Njj(_)}),t.k0s()(),t.bVm()}if(2&n){const o=t.XpG().$implicit,m=t.XpG(2);t.R7$(2),t.Y8G("disabled",m.editdisabled),t.R50("ngModel",o.text)}}function c(n,s){if(1&n&&(t.j41(0,"mat-cell"),t.DNE(1,Wt,3,1,"ng-container",51)(2,$t,3,2,"ng-container",51),t.k0s()),2&n){const o=s.$implicit,m=t.XpG(2);t.R7$(),t.Y8G("ngIf",!m.editHotspot.guid||!o.guid||o.guid!==m.editHotspot.guid),t.R7$(),t.Y8G("ngIf",m.editHotspot.guid&&o.guid&&o.guid===m.editHotspot.guid)}}function v(n,s){1&n&&(t.j41(0,"mat-header-cell"),t.EFF(1,"\u0622\u062f\u0631\u0633 \u0648\u0628 \u0633\u0627\u06cc\u062a"),t.k0s())}function p(n,s){if(1&n&&(t.qex(0),t.j41(1,"p",64),t.EFF(2),t.k0s(),t.bVm()),2&n){const o=t.XpG().$implicit;t.R7$(2),t.SpI("",o.url||"N/A"," ")}}function T(n,s){if(1&n){const o=t.RV6();t.qex(0),t.j41(1,"div",13)(2,"input",65),t.mxI("ngModelChange",function(_){t.eBV(o);const R=t.XpG().$implicit;return t.DH7(R.url,_)||(R.url=_),t.Njj(_)}),t.k0s()(),t.bVm()}if(2&n){const o=t.XpG().$implicit,m=t.XpG(2);t.R7$(2),t.Y8G("disabled",m.editdisabled),t.R50("ngModel",o.url)}}function y(n,s){if(1&n&&(t.j41(0,"mat-cell"),t.DNE(1,p,3,1,"ng-container",51)(2,T,3,2,"ng-container",51),t.k0s()),2&n){const o=s.$implicit,m=t.XpG(2);t.R7$(),t.Y8G("ngIf",!m.editHotspot.guid||!o.guid||o.guid!==m.editHotspot.guid),t.R7$(),t.Y8G("ngIf",m.editHotspot.guid&&o.guid&&o.guid===m.editHotspot.guid)}}function A(n,s){1&n&&(t.j41(0,"mat-header-cell"),t.EFF(1,"Action"),t.k0s())}function w(n,s){if(1&n){const o=t.RV6();t.qex(0),t.j41(1,"mat-icon",67),t.bIt("click",function(){t.eBV(o);const _=t.XpG().$implicit,R=t.XpG(2);return t.Njj(R.editROw(_))}),t.EFF(2,"edit"),t.k0s(),t.j41(3,"mat-icon",67),t.bIt("click",function(){t.eBV(o);const _=t.XpG().$implicit,R=t.XpG(2);return t.Njj(R.removeROw(_))}),t.EFF(4,"delete"),t.k0s(),t.bVm()}}function O(n,s){if(1&n){const o=t.RV6();t.j41(0,"button",71),t.bIt("click",function(){t.eBV(o);const _=t.XpG(4);return t.Njj(_.updateEdit())}),t.EFF(1),t.nI1(2,"translate"),t.k0s()}if(2&n){const o=t.XpG(4);t.Y8G("disabled",o.editdisabled||!o.editHotspot.text||0===o.editHotspot.text.length),t.R7$(),t.JRh(t.bMT(2,2,"ACTION.Update"))}}function k(n,s){if(1&n){const o=t.RV6();t.j41(0,"button",72),t.bIt("click",function(){t.eBV(o);const _=t.XpG(4);return t.Njj(_.onActionPannellumClickLastPoint())}),t.EFF(1,"\u0646\u0642\u0637\u0647"),t.k0s()}if(2&n){const o=t.XpG(4);t.Y8G("disabled",o.editdisabled)}}function W(n,s){if(1&n){const o=t.RV6();t.qex(0),t.DNE(1,O,3,4,"button",68),t.j41(2,"button",69),t.bIt("click",function(){t.eBV(o);const _=t.XpG(3);return t.Njj(_.cancelEdit())}),t.EFF(3),t.nI1(4,"translate"),t.k0s(),t.DNE(5,k,2,1,"button",70),t.bVm()}if(2&n){const o=t.XpG(3);t.R7$(),t.Y8G("ngIf",o.postionView),t.R7$(),t.Y8G("disabled",o.editdisabled),t.R7$(),t.JRh(t.bMT(4,4,"ACTION.CANCEL")),t.R7$(2),t.Y8G("ngIf",o.editHotspot.pitch!==(null==o.postionView?null:o.postionView.clickGetPitch)&&o.editHotspot.yaw!==(null==o.postionView?null:o.postionView.clickGetYaw))}}function J(n,s){if(1&n&&(t.j41(0,"mat-cell")(1,"span",66),t.DNE(2,w,5,0,"ng-container",51)(3,W,6,6,"ng-container",51),t.k0s()()),2&n){const o=s.$implicit,m=t.XpG(2);t.R7$(2),t.Y8G("ngIf",!m.editHotspot.guid||!o.guid||o.guid!==m.editHotspot.guid),t.R7$(),t.Y8G("ngIf",m.editHotspot.guid&&o.guid&&o.guid===m.editHotspot.guid)}}function U(n,s){1&n&&t.nrm(0,"mat-header-row")}function rt(n,s){1&n&&t.nrm(0,"mat-row")}function Xt(n,s){if(1&n){const o=t.RV6();t.j41(0,"div",11)(1,"div",12)(2,"div",13)(3,"mat-label"),t.EFF(4),t.nI1(5,"translate"),t.k0s(),t.j41(6,"label",14),t.EFF(7),t.nI1(8,"translate"),t.k0s(),t.j41(9,"input",15,1),t.nI1(11,"translate"),t.mxI("ngModelChange",function(_){t.eBV(o);const R=t.XpG();return t.DH7(R.dataDetailModel.title,_)||(R.dataDetailModel.title=_),t.Njj(_)}),t.k0s(),t.DNE(12,ee,2,0,"mat-icon",16),t.j41(13,"mat-icon",17),t.EFF(14,"mode_edit"),t.k0s()(),t.j41(15,"div",13)(16,"input",18,2),t.nI1(18,"translate"),t.mxI("ngModelChange",function(_){t.eBV(o);const R=t.XpG();return t.DH7(R.dataDetailModel.linkFileId,_)||(R.dataDetailModel.linkFileId=_),t.Njj(_)}),t.bIt("click",function(){t.eBV(o);const _=t.XpG();return t.Njj(_.fileManagerOpenFormReport=!0)}),t.k0s(),t.DNE(19,Vt,2,0,"mat-icon",19),t.j41(20,"mat-icon",20),t.bIt("click",function(){t.eBV(o);const _=t.XpG();return t.Njj(_.fileManagerOpenFormReport=!0)}),t.EFF(21,"mode_edit"),t.k0s()(),t.j41(22,"cms-file-manager",21),t.bIt("itemSelected",function(_){t.eBV(o);const R=t.XpG();return t.Njj(R.onActionFileSelect(_))}),t.mxI("openFormChange",function(_){t.eBV(o);const R=t.XpG();return t.DH7(R.fileManagerOpenFormReport,_)||(R.fileManagerOpenFormReport=_),t.Njj(_)}),t.k0s(),t.j41(23,"a",22),t.nI1(24,"cmsthumbnail"),t.DNE(25,Ft,2,3,"img",23),t.k0s(),t.nrm(26,"hr"),t.DNE(27,Ht,19,4,"table",24),t.nrm(28,"hr"),t.j41(29,"h5"),t.EFF(30,"\u062a\u0646\u0638\u06cc\u0645\u0627\u062a \u062a\u0648\u0631"),t.k0s(),t.j41(31,"p"),t.EFF(32,"\u062f\u0631 \u0648\u0631\u0648\u062f \u0627\u06cc\u0646 \u062a\u0646\u0638\u06cc\u0645\u0627\u062a \u0628\u0627 \u0645\u062f\u06cc\u0631\u06cc\u062a \u0633\u0627\u0645\u0627\u0646\u0647 \u0647\u0645\u0627\u0647\u0646\u06af \u0628\u0627\u0634\u06cc\u062f"),t.k0s(),t.j41(33,"div",25)(34,"div",26),t.DNE(35,ie,3,3,"button",27),t.k0s(),t.j41(36,"mat-table",28,3),t.qex(38,29),t.DNE(39,ht,2,0,"mat-header-cell",30)(40,St,3,2,"mat-cell",31),t.bVm(),t.qex(41,32),t.DNE(42,ae,2,0,"mat-header-cell",30)(43,ue,3,2,"mat-cell",31),t.bVm(),t.qex(44,33),t.DNE(45,Tt,2,0,"mat-header-cell",30)(46,Ot,3,2,"mat-cell",31),t.bVm(),t.qex(47,34),t.DNE(48,Dt,2,0,"mat-header-cell",30)(49,pe,3,2,"mat-cell",31),t.bVm(),t.qex(50,35),t.DNE(51,x,2,0,"mat-header-cell",30)(52,Qt,3,2,"mat-cell",31),t.bVm(),t.qex(53,36),t.DNE(54,te,2,0,"mat-header-cell",30)(55,jt,3,2,"mat-cell",31),t.bVm(),t.qex(56,37),t.DNE(57,fe,2,0,"mat-header-cell",30)(58,ce,3,2,"mat-cell",31),t.bVm(),t.qex(59,38),t.DNE(60,Ut,2,0,"mat-header-cell",30)(61,c,3,2,"mat-cell",31),t.bVm(),t.qex(62,39),t.DNE(63,v,2,0,"mat-header-cell",30)(64,y,3,2,"mat-cell",31),t.bVm(),t.qex(65,40),t.DNE(66,A,2,0,"mat-header-cell",30)(67,J,4,2,"mat-cell",31),t.bVm(),t.DNE(68,U,1,0,"mat-header-row",41)(69,rt,1,0,"mat-row",42),t.k0s()(),t.j41(70,"div",26)(71,"button",9),t.bIt("click",function(){t.eBV(o);const _=t.XpG();return t.Njj(_.onActionSubmitView360())}),t.nrm(72,"i",43),t.EFF(73),t.nI1(74,"translate"),t.k0s(),t.j41(75,"button",44),t.bIt("click",function(){t.eBV(o);const _=t.XpG();return t.Njj(_.onActionCancellView360())}),t.nrm(76,"i",45),t.EFF(77),t.nI1(78,"translate"),t.k0s()(),t.nrm(79,"br"),t.k0s()()}if(2&n){const o=t.XpG();t.R7$(4),t.JRh(t.bMT(5,26,"TITLE.Photography_Place")),t.R7$(3),t.JRh(t.bMT(8,28,"TITLE.title")),t.R7$(2),t.FS9("placeholder",t.bMT(11,30,"TITLE.Photography_Place")),t.R50("ngModel",o.dataDetailModel.title),t.R7$(3),t.Y8G("ngIf",o.dataDetailModel.title),t.R7$(4),t.FS9("placeholder",t.bMT(18,32,"TITLE.View_360_File_ID")),t.R50("ngModel",o.dataDetailModel.linkFileId),t.R7$(3),t.Y8G("ngIf",o.dataDetailModel.linkFileId),t.R7$(3),t.Y8G("language",o.appLanguage)("isPopup",!0),t.R50("openForm",o.fileManagerOpenFormReport),t.Y8G("tree",o.fileManagerTree)("openDirectUploadView",!0)("openFilemanagerButtonLabelKey","select")("selectFileType",o.selectFileTypeReport)("openFilemanagerButtonView",!1),t.R7$(),t.FS9("href",t.bMT(24,34,o.dataDetailModel.panorama),t.B4B),t.R7$(2),t.Y8G("ngIf",(null==o.dataDetailModel||null==o.dataDetailModel.panorama?null:o.dataDetailModel.panorama.length)>0),t.R7$(2),t.Y8G("ngIf",o.postionView),t.R7$(8),t.Y8G("ngIf",o.postionView),t.R7$(),t.Y8G("dataSource",o.tableHotSpotdataSource),t.R7$(32),t.Y8G("matHeaderRowDef",o.tableHotspotDisplayedColumns)("matHeaderRowDefSticky",!0),t.R7$(),t.Y8G("matRowDefColumns",o.tableHotspotDisplayedColumns),t.R7$(4),t.SpI(" ",t.bMT(74,36,"ACTION.SUBMIT_BUTTON")," "),t.R7$(4),t.SpI(" ",t.bMT(78,38,"ACTION.CANCEL")," ")}}function Yt(n,s){1&n&&(t.j41(0,"mat-header-cell"),t.EFF(1),t.nI1(2,"translate"),t.k0s()),2&n&&(t.R7$(),t.SpI(" ",t.bMT(2,1,"TITLE.PHOTO")," "))}function lt(n,s){if(1&n&&t.nrm(0,"img",48),2&n){const o=t.XpG(2).$implicit;t.FS9("src",o.panorama,t.B4B)}}function nt(n,s){if(1&n&&(t.qex(0),t.j41(1,"a",22),t.DNE(2,lt,1,1,"img",23),t.k0s(),t.bVm()),2&n){const o=t.XpG().$implicit;t.R7$(),t.FS9("href",o.panorama,t.B4B),t.R7$(),t.Y8G("ngIf",(null==o||null==o.panorama?null:o.panorama.length)>0)}}function ut(n,s){if(1&n&&(t.j41(0,"mat-cell"),t.DNE(1,nt,3,2,"ng-container",51),t.k0s()),2&n){const o=s.$implicit;t.R7$(),t.Y8G("ngIf",o.panorama)}}function ft(n,s){1&n&&(t.j41(0,"mat-header-cell"),t.EFF(1),t.nI1(2,"translate"),t.k0s()),2&n&&(t.R7$(),t.SpI(" ",t.bMT(2,1,"TITLE.Photography_Place")," "))}function gt(n,s){if(1&n&&(t.qex(0),t.EFF(1),t.bVm()),2&n){const o=t.XpG().$implicit;t.R7$(),t.SpI(" ",o.title," ")}}function At(n,s){if(1&n&&(t.j41(0,"mat-cell"),t.DNE(1,gt,2,1,"ng-container",51),t.k0s()),2&n){const o=s.$implicit;t.R7$(),t.Y8G("ngIf",o.title)}}function tt(n,s){1&n&&(t.j41(0,"mat-header-cell"),t.EFF(1," \u0634\u0646\u0627\u0633\u0647 \u0635\u062d\u0646\u0647 "),t.k0s())}function g(n,s){if(1&n&&(t.j41(0,"mat-cell"),t.qex(1),t.EFF(2),t.bVm(),t.k0s()),2&n){const o=s.$implicit;t.R7$(2),t.SpI(" ",o.linkFileId," ")}}function bt(n,s){1&n&&(t.j41(0,"mat-header-cell"),t.EFF(1),t.nI1(2,"translate"),t.nI1(3,"translate"),t.k0s()),2&n&&(t.R7$(),t.Lme(" ",t.bMT(2,2,"TITLE.Edit")," | ",t.bMT(3,4,"TITLE.Delete")," "))}function kt(n,s){if(1&n){const o=t.RV6();t.j41(0,"mat-cell",79)(1,"small")(2,"mat-icon",80),t.bIt("click",function(){const _=t.eBV(o).renderIndex,R=t.XpG(2);return t.Njj(R.onActionOptionEditView360(_))}),t.EFF(3,"edit"),t.k0s()(),t.EFF(4,"| "),t.j41(5,"small")(6,"mat-icon",81),t.bIt("click",function(){const _=t.eBV(o).renderIndex,R=t.XpG(2);return t.Njj(R.onActionOptionRemoveView360(_))}),t.EFF(7,"delete"),t.k0s()()()}}function mt(n,s){1&n&&t.nrm(0,"mat-header-row")}function Bt(n,s){1&n&&t.nrm(0,"mat-row")}function d(n,s){if(1&n&&(t.j41(0,"div",11)(1,"mat-table",73),t.qex(2,74),t.DNE(3,Yt,3,3,"mat-header-cell",30)(4,ut,2,1,"mat-cell",31),t.bVm(),t.qex(5,75),t.DNE(6,ft,3,3,"mat-header-cell",30)(7,At,2,1,"mat-cell",31),t.bVm(),t.qex(8,76),t.DNE(9,tt,2,0,"mat-header-cell",30)(10,g,3,1,"mat-cell",31),t.bVm(),t.qex(11,40),t.DNE(12,bt,4,6,"mat-header-cell",30)(13,kt,8,0,"mat-cell",77),t.bVm(),t.DNE(14,mt,1,0,"mat-header-row",78)(15,Bt,1,0,"mat-row",42),t.k0s()()),2&n){const o=t.XpG();t.R7$(),t.Y8G("dataSource",o.tabledataSource),t.R7$(13),t.Y8G("matHeaderRowDef",o.tabledisplayedColumns),t.R7$(),t.Y8G("matRowDefColumns",o.tabledisplayedColumns)}}class I{viewerGetYaw;viewerGetPitch;clickGetYaw;clickGetPitch}let l=(()=>{class n{cmsToastrService;publicHelper;translate;static nextId=0;id=++n.nextId;constructor(o,m,_){this.cmsToastrService=o,this.publicHelper=m,this.translate=_,this.fileManagerTree=this.publicHelper.GetfileManagerTreeConfig()}getGuid(){return Math.floor(1e3*Math.random())+""}scenesList=[];dataDetailModel=new Y.k49;privateDataModel;dataModelChange=new t.bkB;set dataModel(o){o||(o=new Y.J6_),o.defaultValue||(o.defaultValue=new Y.SBG),o.scenes||(o.scenes=new Map),this.scenesList=[],Object.keys(o.scenes).map(m=>{o.scenes[m].guid=this.getGuid(),this.scenesList.push(o.scenes[m])}),this.scenesList.forEach(m=>{m.hotSpots||(m.hotSpots=[]),m.hotSpots.forEach(_=>{_.guid=this.getGuid()})}),this.privateDataModel=o,this.tabledataSource.data=this.scenesList,this.tableHotSpotdataSource.data=[]}get dataModel(){return this.privateDataModel}set dataImageModel(o){o||(o=[]),this.privateDataImageModel=o}privateDataImageModel;formInfo=new Y.IL9;loading=new q.o;loadingOption=new q.o;tabledataSource=new L.I6;tableHotSpotdataSource=new L.I6;tabledisplayedColumns=["linkFileId","panorama","Title","Action"];tableHotspotDisplayedColumns=["type","sceneIdSelector","text","url","pitch","yaw","Action"];selectFileTypeReport=["jpeg","jpg"];fileManagerTree;appLanguage="fa";showAddView360=!1;fileManagerOpenFormReport=!1;ngOnInit(){this.translate.get("TITLE.Edit").subscribe(o=>{this.formInfo.formTitle=o})}container;viewer;options;postionView;ngAfterViewInit(){this.container.nativeElement.style.display="none"}uniqByReduce(o){const m=[];return o.forEach(_=>{!m.includes(_)&&0==m.filter(R=>R.pitch==_.pitch&&R.yaw==_.yaw).length&&m.push(_)}),m}actionPannellumImageLoad(o,m){const _={type:"equirectangular",panorama:o,autoLoad:!0,autoRotate:1.5,crossOrigin:"anonymous"};m&&m.length>0&&(_.hotSpots=this.uniqByReduce(m));const R=Object.assign({},_,this.options);this.viewer&&this.onActionPannellumDestroy(),this.viewer=pannellum.viewer(this.container.nativeElement,R),this.container.nativeElement.style.display="block"}actionPannellumTourLoadClick=!1;actionPannellumTourLoad(){this.actionPannellumTourLoadClick=!0,this.actionPrivateDataModelOptimaze();const o={};o.default=this.privateDataModel.defaultValue,this.privateDataModel&&this.privateDataModel.scenes&&(o.scenes=this.privateDataModel.scenes);const m=Object.assign({},o,this.options);this.viewer&&this.onActionPannellumDestroy(),this.viewer=pannellum.viewer(this.container.nativeElement,m),this.container.nativeElement.style.display="block"}onActionPannellumClick(o){if(!this.viewer)return;if(this.actionPannellumTourLoadClick)return void(this.actionPannellumTourLoadClick=!1);this.postionView=new I,this.postionView.viewerGetYaw=this.viewer.getYaw(),this.postionView.viewerGetPitch=this.viewer.getPitch();const m=this.viewer.mouseEventToCoords(o);!m||0==m.length||(this.postionView.clickGetYaw=m[1],this.postionView.clickGetPitch=m[0])}onActionPannellumDestroy(){this.container.nativeElement.style.display="none",this.postionView=null,this.viewer&&this.viewer.destroy()}onActionPannellumClickLastPoint(){this.postionView&&(0!=this.postionView.clickGetYaw||0!=this.postionView.clickGetPitch)&&(this.editHotspot.yaw=this.postionView.clickGetYaw,this.editHotspot.pitch=this.postionView.clickGetPitch)}onActionFileSelect(o){o&&o.id&&0!==o.id?(this.dataDetailModel.linkFileId=o.id,this.dataDetailModel.panorama=o.downloadLinksrc,this.dataDetailModel.preview=o.downloadLinksrc,this.actionPannellumImageLoad(this.dataDetailModel.panorama,[])):this.cmsToastrService.typeErrorSelectedRow()}onActionSubmitView360(){(!this.dataDetailModel.linkFileId||this.dataDetailModel.linkFileId<=0)&&this.cmsToastrService.typeErrorMessage("\u0641\u0627\u06cc\u0644 \u0627\u0646\u062a\u062e\u0627\u0628 \u0646\u0634\u062f\u0647"),this.scenesList||(this.scenesList=[]),this.selectIndex>=0?this.scenesList[this.selectIndex]=this.dataDetailModel:this.scenesList.push(this.dataDetailModel),this.actionPrivateDataModelOptimaze(),this.dataModelChange.emit(this.privateDataModel),this.showAddView360=!this.showAddView360,this.selectIndex=-1,this.onActionPannellumDestroy()}actionPrivateDataModelOptimaze(){this.privateDataModel.defaultValue||(this.privateDataModel.defaultValue=new Y.SBG),this.privateDataModel.scenes=new Map,this.scenesList||(this.scenesList=[]),this.scenesList.forEach(o=>{if(o.title&&o.title.length>0){const m=[];o.hotSpots||(o.hotSpots=[]),o.hotSpots.forEach(_=>{_.type&&_.type.length>0&&m.push(_)}),o.hotSpots=this.uniqByReduce(m),this.privateDataModel.scenes[o.linkFileId]=o,this.privateDataModel.scenes[o.linkFileId].hfov=110}}),(!this.privateDataModel.defaultValue.firstScene||0==this.privateDataModel.defaultValue.firstScene.length)&&(this.privateDataModel.scenes&&this.scenesList&&this.scenesList.length>0&&(this.privateDataModel.defaultValue.firstScene=this.scenesList[0].linkFileId+""),this.privateDataModel.defaultValue.sceneFadeDuration=1e3)}onActionCancellView360(){this.showAddView360=!1,this.onActionPannellumDestroy()}onActionShowView360Add(){this.dataDetailModel=new Y.k49,this.showAddView360=!this.showAddView360,this.tableHotSpotdataSource.data=[]}inAddhotspotGuid="";onActionShowHotspotAdd(){this.dataDetailModel||(this.dataDetailModel=new Y.k49),this.dataDetailModel.hotSpots||(this.dataDetailModel.hotSpots=[]),this.editHotspot=new Y.I1z;const o=new Y.I1z;o.guid=this.getGuid(),this.inAddhotspotGuid=o.guid,this.dataDetailModel.hotSpots.push(o),this.tableHotSpotdataSource.data=this.uniqByReduce(this.dataDetailModel.hotSpots),this.newROw(o),this.onActionPannellumClickLastPoint()}onActionOptionRemoveView360(o){o<0||!this.scenesList||0===this.scenesList.length||(this.scenesList.splice(o,1),this.actionPrivateDataModelOptimaze(),this.dataModel=this.privateDataModel,this.dataModelChange.emit(this.privateDataModel),this.onActionPannellumDestroy())}selectIndex=-1;onActionOptionEditView360(o){o<0||!this.scenesList||0===this.scenesList.length||(this.dataDetailModel=this.scenesList[o],this.dataDetailModel.hotSpots||(this.dataDetailModel.hotSpots=[]),this.actionPannellumImageLoad(this.dataDetailModel.panorama,this.dataDetailModel.hotSpots),this.oldHotspot=new Y.I1z,this.editHotspot=new Y.I1z,this.tableHotSpotdataSource.data=this.uniqByReduce(this.dataDetailModel.hotSpots),this.selectIndex=o,this.showAddView360=!this.showAddView360)}editHotspot;oldHotspot;editdisabled;newROw(o){this.editHotspot=o&&o.guid?o:new Y.I1z,this.oldHotspot={...this.editHotspot}}editROw(o){this.editHotspot=o&&o.guid?o:new Y.I1z,this.oldHotspot={...this.editHotspot},this.inAddhotspotGuid=""}removeROw(o){const m=this.dataDetailModel.hotSpots.findIndex(_=>_.guid==o.guid);m>=0&&(this.dataDetailModel.hotSpots.splice(m,1),this.tableHotSpotdataSource.data=this.uniqByReduce(this.dataDetailModel.hotSpots))}updateEdit(){this.inAddhotspotGuid="",this.editdisabled=!0;const o=this.dataDetailModel.hotSpots.findIndex(m=>m.guid==this.oldHotspot.guid);o>=0&&(this.dataDetailModel.hotSpots[o]=this.editHotspot),this.editdisabled=!1,this.oldHotspot=new Y.I1z,this.editHotspot=new Y.I1z}cancelEdit(){this.inAddhotspotGuid?.length>0&&(this.dataDetailModel.hotSpots=this.dataDetailModel.hotSpots.filter(o=>o.guid!=this.inAddhotspotGuid)),this.editHotspot=new Y.I1z,this.oldHotspot&&this.oldHotspot.guid&&(this.dataDetailModel.hotSpots||(this.dataDetailModel.hotSpots=[]),this.tableHotSpotdataSource.data=this.uniqByReduce(this.dataDetailModel.hotSpots))}onActionImportFile360View(){this.privateDataImageModel&&this.privateDataImageModel.length>0&&(this.actionPrivateDataModelOptimaze(),this.privateDataImageModel.forEach(o=>{if(!this.privateDataModel.scenes[o.linkFileId]&&o.linkFileId>0){const m=new Y.k49;m.guid=this.getGuid(),m.linkFileId=o.linkFileId,m.title=o.title,m.hotSpots=this.uniqByReduce(o.hotSpots),m.panorama=o.panorama,m.preview=o.preview,m.hfov=110,this.privateDataModel.scenes[o.linkFileId]=m}}),this.dataModel=this.privateDataModel)}static \u0275fac=function(m){return new(m||n)(t.rXU(Rt.k),t.rXU(F.A),t.rXU(h.c$))};static \u0275cmp=t.VBU({type:n,selectors:[["app-cms-360-tour-list"]],viewQuery:function(m,_){if(1&m&&t.GBs(et,5),2&m){let R;t.mGM(R=t.lsd())&&(_.container=R.first)}},inputs:{dataModel:"dataModel",dataImageModel:"dataImageModel"},outputs:{dataModelChange:"dataModelChange"},decls:8,vars:7,consts:[["container",""],["Title",""],["LinkFileId",""],["table",""],["type","button","class","btn font-13 font-600 btn-s m-1 rounded-s shadow-xl border-0 gradient-highlight",3,"click",4,"ngIf"],["type","button","class","btn font-13 font-600 btn-s m-1 rounded-s shadow-xl border-0 gradient-highlight","style","margin: 10px ",3,"click",4,"ngIf"],[1,"container",2,"height","380px","width","100%","direction","ltr",3,"click","id"],["class","example-container mat-elevation-z8",4,"ngIf"],[3,"options"],["type","button",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-highlight",3,"click"],["type","button",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-highlight",2,"margin","10px",3,"click"],[1,"example-container","mat-elevation-z8"],[1,"m-2"],[1,"input-style","has-borders","no-icon","input-style-always-active","validate-field","mb-4"],["for","dataDetailModel.title",1,"color-highlight"],["type","text","name","dataDetailModel.title","id","dataDetailModel.title","minlength","3","maxlength","100","required","",1,"form-control","validate-name",3,"ngModelChange","ngModel","placeholder"],["matSuffix","","class","pointer","matSuffix","","mat-icon-button","","aria-label","Clear",3,"click",4,"ngIf"],["matSuffix","",1,"pointer"],["type","text","name","dataDetailModel.linkFileId",1,"form-control","validate-name",3,"ngModelChange","click","ngModel","placeholder"],["matSuffix","","matSuffix","","mat-icon-button","","aria-label","Clear",3,"click",4,"ngIf"],["matSuffix","",3,"click"],[3,"itemSelected","openFormChange","language","isPopup","openForm","tree","openDirectUploadView","openFilemanagerButtonLabelKey","selectFileType","openFilemanagerButtonView"],["target","_blank",3,"href"],["style","vertical-align:middle;","class","ntk-hover-zoom","aria-hidden","","height","50","width","50",3,"src",4,"ngIf"],["class","grid-row-ltr-center",4,"ngIf"],[2,"background-color","bisque","padding","5px"],[1,"form-actions",2,"direction","ltr"],["type","button","class","btn font-13 font-600 btn-s m-1 rounded-s shadow-xl border-0 gradient-teal",3,"click",4,"ngIf"],["matSort","",3,"dataSource"],["matColumnDef","type"],[4,"matHeaderCellDef"],[4,"matCellDef"],["matColumnDef","sceneId"],["matColumnDef","sceneIdSelector"],["matColumnDef","pitch"],["matColumnDef","yaw"],["matColumnDef","targetYaw"],["matColumnDef","targetPitch"],["matColumnDef","text"],["matColumnDef","url"],["matColumnDef","Action"],[4,"matHeaderRowDef","matHeaderRowDefSticky"],[4,"matRowDef","matRowDefColumns"],[1,"fa","fa-check-square-o"],["type","button",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-gray",3,"click"],[1,"ft-x"],["matSuffix","","matSuffix","","mat-icon-button","","aria-label","Clear",1,"pointer",3,"click"],["matSuffix","","matSuffix","","mat-icon-button","","aria-label","Clear",3,"click"],["aria-hidden","","height","50","width","50",1,"ntk-hover-zoom",2,"vertical-align","middle",3,"src"],[1,"grid-row-ltr-center"],["type","button",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-teal",3,"click"],[4,"ngIf"],[1,"text-truncate","grid-row-ltr-center"],["placeholder","Select","name","type",1,"form-control","validate-name",3,"ngModelChange","disabled","ngModel"],[3,"value"],[1,"text-truncate"],["type","text","placeholder","sceneId","name","sceneId",1,"form-control","validate-name",2,"direction","ltr","text-align","left",3,"ngModelChange","disabled","ngModel"],["placeholder","Select","name","sceneId",1,"form-control","validate-name",3,"ngModelChange","disabled","ngModel"],[3,"value",4,"ngFor","ngForOf"],["type","number","placeholder","pitch","name","pitch",1,"form-control","validate-name",2,"direction","ltr","text-align","left",3,"ngModelChange","disabled","ngModel"],["type","number","placeholder","yaw","name","yaw",1,"form-control","validate-name",2,"direction","ltr","text-align","left",3,"ngModelChange","disabled","ngModel"],["type","text","placeholder","targetYaw","name","targetYaw",1,"form-control","validate-name",2,"direction","ltr","text-align","left",3,"ngModelChange","disabled","ngModel"],["type","text","placeholder","targetPitch","name","targetPitch",1,"form-control","validate-name",2,"direction","ltr","text-align","left",3,"ngModelChange","disabled","ngModel"],["type","text","placeholder","text","name","text",1,"form-control","validate-name",2,"direction","ltr","text-align","left",3,"ngModelChange","disabled","ngModel"],[1,"text-truncate","grid-row-ltr"],["type","text","placeholder","url","name","url",1,"form-control","validate-name",2,"direction","ltr","text-align","left",3,"ngModelChange","disabled","ngModel"],[1,"m-1",2,"text-align","center"],[3,"click"],["type","button","class","mb-2",3,"disabled","click",4,"ngIf"],["type","button",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-gray",3,"click","disabled"],["type","button","class","btn font-13 font-600 btn-s m-1 rounded-s shadow-xl border-0 gradient-green","matTooltip","\u062b\u0628\u062a \u0622\u062e\u0631\u06cc\u0646 \u0646\u0642\u0637\u0647 \u06a9\u0644\u06cc\u06a9 \u0634\u062f\u0647",3,"disabled","click",4,"ngIf"],["type","button",1,"mb-2",3,"click","disabled"],["type","button","matTooltip","\u062b\u0628\u062a \u0622\u062e\u0631\u06cc\u0646 \u0646\u0642\u0637\u0647 \u06a9\u0644\u06cc\u06a9 \u0634\u062f\u0647",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-green",3,"click","disabled"],["multiTemplateDataRows","",3,"dataSource"],["matColumnDef","panorama"],["matColumnDef","Title"],["matColumnDef","linkFileId"],["class","Action",4,"matCellDef"],[4,"matHeaderRowDef"],[1,"Action"],["matTooltipPosition","before","aria-hidden","false",2,"color","blue","cursor","pointer",3,"click"],["matTooltipPosition","before","aria-hidden","false",2,"color","red","cursor","pointer",3,"click"]],template:function(m,_){if(1&m){const R=t.RV6();t.DNE(0,V,3,3,"button",4)(1,Nt,2,0,"button",5)(2,Ct,2,0,"button",5),t.j41(3,"div",6,0),t.bIt("click",function(j){return t.eBV(R),t.Njj(_.onActionPannellumClick(j))}),t.k0s(),t.DNE(5,Xt,80,40,"div",7),t.nrm(6,"cms-progress-spinner",8),t.DNE(7,d,16,3,"div",7)}2&m&&(t.Y8G("ngIf",!_.showAddView360),t.R7$(),t.Y8G("ngIf",_.privateDataImageModel&&_.privateDataImageModel.length>0),t.R7$(),t.Y8G("ngIf",_.privateDataModel&&_.privateDataModel&&_.privateDataModel.scenes&&_.scenesList&&_.scenesList.length>0),t.R7$(),t.Y8G("id",_.id),t.R7$(2),t.Y8G("ngIf",_.showAddView360),t.R7$(),t.Y8G("options",_.loadingOption),t.R7$(),t.Y8G("ngIf",!_.showAddView360))},dependencies:[i.Sq,i.bT,at.me,at.Q0,at.BC,at.YS,at.xh,at.tU,at.vS,pt.wT,S.nJ,S.yw,P.An,dt.VO,ot.B4,L.Zl,L.tL,L.ji,L.cC,L.YV,L.iL,L.KS,L.$R,L.YZ,L.NB,Et.oV,de.e5,Gt.X,h.D9,C.r],encapsulation:2})}return n})()},4768:(st,E,f)=>{"use strict";f.d(E,{p:()=>Y});var t=f(3279),L=f(9197),ct=f(5312),e=f(9722),Z=f(8786);let Y=(()=>{class q{cmsToastrService;static nextId=0;id=++q.nextId;map$=new t.bkB;zoom$=new t.bkB;options={layers:[(0,L.tileLayer)(ct.c.leafletUrl,{opacity:.7,maxZoom:19,detectRetina:!0})],zoom:16,center:[32.684985,51.6359425]};set optonCenter(F){this.map&&F&&F.lat&&F.lon&&0!==F.lat&&0!==F.lon&&this.map.setView(new L.LatLng(F.lat,F.lon),this.zoom)}set optionCurrentPoint(F){this.onActionCurrentPoint(F)}map;zoom;destroy=!1;constructor(F){this.cmsToastrService=F}ngOnInit(){const at=L.icon({iconRetinaUrl:"assets/leaflet/marker-icon-2x.png",iconUrl:"assets/leaflet/marker-icon.png",shadowUrl:"assets/leaflet/marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]});L.Marker.prototype.options.icon=at}ngAfterViewInit(){}ngOnDestroy(){this.map&&(this.map.clearAllEventListeners(),this.destroy=!0)}onMapReady(F){setTimeout(()=>{this.map&&!this.destroy&&F.invalidateSize()},500),this.map=F,this.map$.emit(F),this.zoom=F.getZoom(),this.zoom$.emit(this.zoom)}onMapZoomEnd(F){this.zoom=F.target.getZoom(),this.zoom$.emit(this.zoom)}onActionCurrentPoint(F=!0){this.getPosition().then(h=>{this.map.setView(new L.LatLng(h.lat,h.lon),this.zoom)})}getPosition(){return new Promise((F,h)=>{navigator.geolocation.getCurrentPosition(i=>{F({lon:i.coords.longitude,lat:i.coords.latitude})},i=>{this.cmsToastrService.typeErrorGetPosition()})})}static \u0275fac=function(h){return new(h||q)(t.rXU(e.k))};static \u0275cmp=t.VBU({type:q,selectors:[["app-cms-map"]],inputs:{options:"options",optonCenter:"optonCenter",optionCurrentPoint:"optionCurrentPoint"},outputs:{map$:"map$",zoom$:"zoom$"},decls:1,vars:1,consts:[["leaflet","",1,"map-container",3,"leafletMapReady","leafletMapZoomEnd","leafletOptions"]],template:function(h,i){1&h&&(t.j41(0,"div",0),t.bIt("leafletMapReady",function(pt){return i.onMapReady(pt)})("leafletMapZoomEnd",function(pt){return i.onMapZoomEnd(pt)}),t.k0s()),2&h&&t.Y8G("leafletOptions",i.options)},dependencies:[Z.V1],styles:[".map-container[_ngcontent-%COMP%]{width:100%;height:300px}"]})}return q})()}}]);