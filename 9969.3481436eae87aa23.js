"use strict";(self.webpackChunkntk_cms_web=self.webpackChunkntk_cms_web||[]).push([[9969],{7647:(H,G,a)=>{a.d(G,{S:()=>Y});var M=a(3308),i=a(7788),u=a(7222),h=a(8189),w=a(5804),F=a(965),N=a(8887),U=a(3793),T=a(2831),$=a(3527),D=a(9722),y=a(5154),X=a(2882),e=a(6610),E=a(2497),O=a(8278),I=a(9344),L=a(6182),j=a(4587),P=a(7912);const B=["*"];function V(_,R){if(1&_&&(i.j41(0,"label",8),i.EFF(1),i.k0s()),2&_){const l=i.XpG();i.Mz_("for","app-cms-site-selector-",l.id,""),i.R7$(),i.JRh(l.optionLabel)}}function x(_,R){if(1&_&&(i.j41(0,"mat-option",9)(1,"span"),i.EFF(2),i.k0s()()),2&_){const l=R.$implicit,r=i.XpG();i.Y8G("value",l)("disabled",r.optionDisabled),i.R7$(2),i.JRh(r.displayOption(l))}}function W(_,R){if(1&_){const l=i.RV6();i.j41(0,"mat-icon",10),i.bIt("click",function(){i.eBV(l);const m=i.XpG();return i.Njj(m.onActionSelectClear())}),i.EFF(1,"close"),i.k0s()}}let Y=(()=>{class _{static#e=this.nextId=0;constructor(l,r,m,p,g,S){this.coreEnumService=l,this.cmsToastrService=r,this.cdr=m,this.publicHelper=p,this.translate=g,this.categoryService=S,this.id=++_.nextId,this.dataModelResult=new h.N$V,this.dataModelSelect=new h.fq5,this.formControl=new u.MJ,this.optionDisabled=!1,this.optionSelectFirstItem=!1,this.optionPlaceholder="",this.optionLabel="",this.optionChange=new i.bkB,this.optionReload=()=>this.onActionButtonReload(),this.publicHelper.processService.cdr=this.cdr}set optionSelectForce(l){this.onActionSelectForce(l)}ngOnInit(){this.loadOptions(),(!this.optionLabel||0==this.optionLabel.length&&this.optionPlaceholder?.length>0)&&(this.optionLabel=this.optionPlaceholder)}loadOptions(){this.filteredOptions=this.formControl.valueChanges.pipe((0,F.Z)(""),(0,N.B)(1500),(0,U.F)(),(0,T.n)(l=>"string"==typeof l||"number"==typeof l?this.DataGetAll(l||""):[]))}displayFn(l){return l?l.title:void 0}displayOption(l){return l?l.title:void 0}DataGetAll(l){var r=this;return(0,M.A)(function*(){const m=new h.O2i;m.rowPerPage=20,m.accessLoad=!0;let p=new h.ycK;p.propertyName="Title",p.value=l,p.searchType=h._GO.Contains,p.clauseType=h.jL_.Or,m.filters.push(p),l&&"number"==typeof+l&&+l>0&&(p=new h.ycK,p.propertyName="Id",p.value=l,p.searchType=h._GO.Equal,p.clauseType=h.jL_.Or,m.filters.push(p));const g=r.constructor.name+"main";return r.translate.get("MESSAGE.Receiving_information").subscribe(S=>{r.publicHelper.processService.processStart(g,S,r.constructor.name)}),yield(0,w._)(r.categoryService.ServiceGetAll(m)).then(S=>(r.dataModelResult=S,r.optionSelectFirstItem&&(!r.dataModelSelect||!r.dataModelSelect.id||r.dataModelSelect.id<=0)&&r.dataModelResult.listItems.length>0&&(r.optionSelectFirstItem=!1,setTimeout(()=>{r.formControl.setValue(r.dataModelResult.listItems[0])},1e3),r.onActionSelect(r.dataModelResult.listItems[0])),r.publicHelper.processService.processStop(g),S.listItems))})()}onActionSelect(l){this.optionDisabled||(this.dataModelSelect=l,this.optionChange.emit(this.dataModelSelect))}onActionSelectClear(){this.optionDisabled||(this.dataModelSelect=null,this.formControl.setValue(null),this.optionChange.emit(null))}onActionEmpty(){this.formControl.setValue(0),this.dataModelSelect=new h.fq5,this.optionChange.emit(this.dataModelSelect)}push(l){return this.filteredOptions.pipe((0,$.T)(r=>(r.find(m=>m.id===l.id)||r.push(l),r)))}onActionSelectForce(l){if("number"==typeof l&&l>0){if(this.dataModelSelect&&this.dataModelSelect.id===l)return;if(this.dataModelResult&&this.dataModelResult.listItems&&this.dataModelResult.listItems.find(r=>r.id===l)){const r=this.dataModelResult.listItems.find(m=>m.id===l);return this.dataModelSelect=r,void this.formControl.setValue(r)}this.categoryService.ServiceGetOneById(l).subscribe({next:r=>{r.isSuccess?(this.filteredOptions=this.push(r.item),this.dataModelSelect=r.item,this.formControl.setValue(r.item),this.optionChange.emit(r.item)):this.cmsToastrService.typeErrorMessage(r.errorMessage)}})}else{if(typeof l==typeof h.fq5)return this.filteredOptions=this.push(l),this.dataModelSelect=l,void this.formControl.setValue(l);this.formControl.setValue(null)}}onActionButtonReload(){this.dataModelSelect=new h.fq5,this.loadOptions()}static#t=this.\u0275fac=function(r){return new(r||_)(i.rXU(h.i9D),i.rXU(D.k),i.rXU(i.gRc),i.rXU(y.A),i.rXU(X.c$),i.rXU(h.XBe))};static#o=this.\u0275cmp=i.VBU({type:_,selectors:[["app-core-module-selector"]],inputs:{optionDisabled:"optionDisabled",optionSelectFirstItem:"optionSelectFirstItem",optionPlaceholder:"optionPlaceholder",optionLabel:"optionLabel",optionReload:"optionReload",optionSelectForce:"optionSelectForce"},outputs:{optionChange:"optionChange"},ngContentSelectors:B,decls:10,vars:13,consts:[["matauto","matAutocomplete"],[1,"input-style","has-borders","no-icon","input-style-always-active","validate-field","mb-4","progressOverlayContainer"],[3,"optionsInfoAreaId"],["class","color-highlight",3,"for",4,"ngIf"],["type","text","matInput","",1,"form-control","validate-name",3,"placeholder","formControl","matAutocomplete","id"],[3,"optionSelected","displayWith"],[3,"value","disabled",4,"ngFor","ngForOf"],["matSuffix","","matSuffix","","mat-icon-button","","aria-label","Clear",3,"click",4,"ngIf"],[1,"color-highlight",3,"for"],[3,"value","disabled"],["matSuffix","","matSuffix","","mat-icon-button","","aria-label","Clear",3,"click"]],template:function(r,m){if(1&r){const p=i.RV6();i.NAR(),i.j41(0,"div",1),i.nrm(1,"app-progress-spinner",2),i.DNE(2,V,2,3,"label",3),i.nrm(3,"input",4),i.j41(4,"mat-autocomplete",5,0),i.bIt("optionSelected",function(S){return i.eBV(p),i.Njj(m.onActionSelect(S.option.value))}),i.DNE(6,x,3,3,"mat-option",6),i.nI1(7,"async"),i.k0s(),i.DNE(8,W,2,0,"mat-icon",7),i.SdG(9),i.k0s()}if(2&r){const p=i.sdS(5);i.R7$(),i.Y8G("optionsInfoAreaId",m.constructor.name),i.R7$(),i.Y8G("ngIf",(null==m.optionLabel?null:m.optionLabel.length)>0),i.R7$(),i.FS9("placeholder",m.optionPlaceholder),i.Mz_("id","app-cms-site-selector-",m.id,""),i.Y8G("formControl",m.formControl)("matAutocomplete",p),i.BMQ("disabled",!!m.optionDisabled||null),i.R7$(),i.Y8G("displayWith",m.displayFn),i.R7$(2),i.Y8G("ngForOf",i.bMT(7,11,m.filteredOptions)),i.R7$(2),i.Y8G("ngIf",null==m.dataModelSelect?null:m.dataModelSelect.id)}},dependencies:[e.Sq,e.bT,u.me,u.BC,u.l_,E.$3,O.wT,E.pN,I.yw,L.An,j.fg,P._,e.Jj],encapsulation:2})}return _})()},9969:(H,G,a)=>{a.r(G),a.d(G,{CoreSiteCategoryCmsModuleModule:()=>je});var M=a(6610),i=a(7222),u=a(8189),h=a(2688),w=a(3627),F=a(5459),N=a(4429),U=a(8012),T=a(9675),$=a(9915),D=a(5312),y=a(6482),X=a(8784),e=a(7788),E=a(9722),O=a(5154),I=a(2882),L=a(4587),j=a(1536),P=a(7912),B=a(7647),V=a(2243);const x=["vform"];function W(n,C){if(1&n){const t=e.RV6();e.j41(0,"app-cms-enum-record-status-selector",12),e.mxI("modelChange",function(o){e.eBV(t);const c=e.XpG();return e.DH7(c.dataModel.recordStatus,o)||(c.dataModel.recordStatus=o),e.Njj(o)}),e.k0s()}if(2&n){const t=e.XpG();e.R50("model",t.dataModel.recordStatus),e.Y8G("optionDisabled",!1)("optionLabel",null==t.fieldsInfo.recordStatus?null:t.fieldsInfo.recordStatus.fieldTitle)("optionRequired",!0)("optionSelectFirstItem",!0)}}function Y(n,C){if(1&n){const t=e.RV6();e.j41(0,"div",13)(1,"label",14),e.EFF(2),e.k0s(),e.j41(3,"textarea",15,1),e.mxI("ngModelChange",function(o){e.eBV(t);const c=e.XpG();return e.DH7(c.dataModel.configValuesJson,o)||(c.dataModel.configValuesJson=o),e.Njj(o)}),e.EFF(5,"                "),e.k0s(),e.j41(6,"em"),e.EFF(7),e.k0s()()}if(2&n){const t=e.sdS(4),s=e.XpG();e.R7$(2),e.JRh(null==s.fieldsInfo.configValuesJson?null:s.fieldsInfo.configValuesJson.fieldTitle),e.R7$(),e.R50("ngModel",s.dataModel.configValuesJson),e.Y8G("disabled",!(null!=s.fieldsInfo.configValuesJson&&s.fieldsInfo.configValuesJson.accessAddField)),e.R7$(4),e.SpI("",t.value.length," / 10000")}}function _(n,C){if(1&n){const t=e.RV6();e.j41(0,"div",16)(1,"button",17),e.bIt("click",function(){e.eBV(t);const o=e.XpG();return e.Njj(o.onFormCancel())}),e.nrm(2,"i",18),e.EFF(3),e.nI1(4,"translate"),e.k0s(),e.j41(5,"button",19),e.nrm(6,"i",20),e.EFF(7),e.nI1(8,"translate"),e.k0s()()}if(2&n){e.XpG();const t=e.sdS(9);e.R7$(3),e.SpI(" ",e.bMT(4,3,"ACTION.CANCEL")," "),e.R7$(2),e.Y8G("disabled",!t.form.valid),e.R7$(2),e.SpI(" ",e.bMT(8,5,"ACTION.SAVE")," ")}}let R=(()=>{class n extends X.Q{constructor(t,s,o,c,f,d,v,k){super(c,new u.pP,d,k),this.data=t,this.dialogRef=s,this.coreEnumService=o,this.coreSiteCategoryCmsModuleService=c,this.cmsToastrService=f,this.publicHelper=d,this.cdr=v,this.translate=k,this.requestLinkCmsModuleId=0,this.requestLinkCmsSiteCategoryId=0,this.fieldsInfo=new Map,this.dataModelResult=new u.N$V,this.dataModel=new u.pP,this.formInfo=new u.IL9,this.fileManagerOpenForm=!1,this.publicHelper.processService.cdr=this.cdr,t&&(this.requestLinkCmsSiteCategoryId=+t.linkCmsSiteCategoryId||0,this.requestLinkCmsModuleId=+t.linkCmsModuleId||0),this.requestLinkCmsSiteCategoryId>0&&(this.dataModel.linkCmsSiteCategoryId=this.requestLinkCmsSiteCategoryId),this.requestLinkCmsModuleId>0&&(this.dataModel.linkCmsModuleId=this.requestLinkCmsModuleId)}ngOnInit(){this.DataGetAccess()}DataAddContent(){this.translate.get("MESSAGE.sending_information_to_the_server").subscribe(s=>{this.formInfo.formAlert=s}),this.formInfo.formError="";const t=this.constructor.name+"main";this.translate.get("MESSAGE.Receiving_information").subscribe(s=>{this.publicHelper.processService.processStart(t,s,this.constructor.name)}),this.coreSiteCategoryCmsModuleService.ServiceAdd(this.dataModel).subscribe({next:s=>{this.formInfo.formSubmitAllow=!0,this.dataModelResult=s,s.isSuccess?(this.translate.get("MESSAGE.registration_completed_successfully").subscribe(o=>{this.formInfo.formAlert=o}),this.cmsToastrService.typeSuccessAdd(),this.dialogRef.close({dialogChangedDate:!0})):(this.translate.get("ERRORMESSAGE.MESSAGE.typeError").subscribe(o=>{this.formInfo.formAlert=o}),this.formInfo.formError=s.errorMessage,this.cmsToastrService.typeErrorMessage(s.errorMessage)),this.publicHelper.processService.processStop(t)},error:s=>{this.formInfo.formSubmitAllow=!0,this.cmsToastrService.typeError(s),this.publicHelper.processService.processStop(t,!1)}})}onFormSubmit(){this.formGroup.valid&&(this.formInfo.formSubmitAllow=!1,this.DataAddContent())}onActionSiteCategorySelect(t){this.dataModel.linkCmsSiteCategoryId=null,t&&t.id>0&&(this.dataModel.linkCmsSiteCategoryId=t.id)}onActionSelectorModuleSelect(t){this.dataModel.linkCmsModuleId=null,t&&t.id>0&&(this.dataModel.linkCmsModuleId=t.id)}onFormCancel(){this.dialogRef.close({dialogChangedDate:!1})}static#e=this.\u0275fac=function(s){return new(s||n)(e.rXU(y.Vh),e.rXU(y.CP),e.rXU(u.i9D),e.rXU(u.V2o),e.rXU(E.k),e.rXU(O.A),e.rXU(e.gRc),e.rXU(I.c$))};static#t=this.\u0275cmp=e.VBU({type:n,selectors:[["app-core-sitecategorycmsmodule-add"]],viewQuery:function(s,o){if(1&s&&e.GBs(x,5),2&s){let c;e.mGM(c=e.lsd())&&(o.formGroup=c.first)}},features:[e.Vt3],decls:17,vars:19,consts:[["vform","ngForm"],["ConfigValuesJson",""],[1,"card","card-style","progressOverlayContainer"],[3,"optionsInfoAreaId"],[1,"content","mb-0"],[1,"mb-0","color-highlight","font-600","font-12"],[3,"ngSubmit"],[3,"model","optionDisabled","optionLabel","optionRequired","optionSelectFirstItem","modelChange",4,"ngIf"],[3,"optionChange","optionDisabled","optionSelectForce","optionPlaceholder"],[3,"optionChange","optionDisabled","optionSelectFirstItem","optionSelectForce","optionPlaceholder"],["class","input-style has-borders no-icon input-style-always-active validate-field mb-4",4,"ngIf"],["class","form-actions",4,"ngIf"],[3,"modelChange","model","optionDisabled","optionLabel","optionRequired","optionSelectFirstItem"],[1,"input-style","has-borders","no-icon","input-style-always-active","validate-field","mb-4"],["for","dataModel.configValuesJson",1,"color-highlight"],["matInput","","name","dataModel.configValuesJson","type","text","placeholder","ConfigValuesJson","minlength","0","maxlength","10000","rows","6","id","dataModel.configValuesJson",1,"form-control","validate-name",3,"ngModelChange","ngModel","disabled"],[1,"form-actions"],["type","button",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-gray",3,"click"],[1,"ft-x"],["type","submit",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-green",3,"disabled"],[1,"fa","fa-check-square-o"]],template:function(s,o){if(1&s){const c=e.RV6();e.j41(0,"div",2),e.nrm(1,"app-progress-spinner",3),e.j41(2,"div",4)(3,"p",5),e.EFF(4),e.k0s(),e.j41(5,"p"),e.EFF(6),e.nI1(7,"translate"),e.k0s(),e.j41(8,"form",6,0),e.bIt("ngSubmit",function(){return e.eBV(c),e.Njj(o.onFormSubmit())}),e.DNE(10,W,1,5,"app-cms-enum-record-status-selector",7),e.j41(11,"app-core-sitecategory-selector",8),e.nI1(12,"translate"),e.bIt("optionChange",function(d){return e.eBV(c),e.Njj(o.onActionSiteCategorySelect(d))}),e.k0s(),e.j41(13,"app-core-module-selector",9),e.nI1(14,"translate"),e.bIt("optionChange",function(d){return e.eBV(c),e.Njj(o.onActionSelectorModuleSelect(d))}),e.k0s(),e.DNE(15,Y,8,4,"div",10)(16,_,9,7,"div",11),e.k0s()()()}2&s&&(e.R7$(),e.Y8G("optionsInfoAreaId",o.constructor.name),e.R7$(3),e.SpI(" ",o.formInfo.formTitle," "),e.R7$(2),e.SpI(" ",e.bMT(7,13,"TITLE.Be_Careful_When_Entering_Information")," "),e.R7$(4),e.Y8G("ngIf",null==o.fieldsInfo.recordStatus?null:o.fieldsInfo.recordStatus.accessWatchField),e.R7$(),e.Y8G("optionDisabled",!1)("optionSelectForce",o.dataModel.linkCmsSiteCategoryId)("optionPlaceholder",e.bMT(12,15,"TITLE.SITE_CATEGORY")),e.R7$(2),e.Y8G("optionDisabled",!1)("optionSelectFirstItem",!0)("optionSelectForce",o.dataModel.linkCmsModuleId)("optionPlaceholder",e.bMT(14,17,"TITLE.MODULE")),e.R7$(2),e.Y8G("ngIf",null==o.fieldsInfo.configValuesJson?null:o.fieldsInfo.configValuesJson.accessWatchField),e.R7$(),e.Y8G("ngIf",o.formInfo.formSubmitAllow))},dependencies:[M.bT,i.qT,i.me,i.BC,i.cb,i.xh,i.tU,i.vS,i.cV,L.fg,j.m,P._,B.S,V.n,I.D9],styles:[".form-body[_ngcontent-%COMP%]{width:500px}@media (max-width: 700px){.form-body[_ngcontent-%COMP%]{display:contents}}#file-manager[_ngcontent-%COMP%]{width:calc(100vw - 16px);height:calc(100vh - 16px)}.recordStatus-1.mat-select-panel[_ngcontent-%COMP%]{background:#ff0}.recordStatus-2.mat-select-panel[_ngcontent-%COMP%]{background:#000}.recordStatus-3.mat-select-panel[_ngcontent-%COMP%]{background:red}"]})}return n})();var l=a(5113);const r=["vform"];function m(n,C){if(1&n){const t=e.RV6();e.j41(0,"app-cms-enum-record-status-selector",11),e.mxI("modelChange",function(o){e.eBV(t);const c=e.XpG();return e.DH7(c.dataModel.recordStatus,o)||(c.dataModel.recordStatus=o),e.Njj(o)}),e.k0s()}if(2&n){const t=e.XpG();e.R50("model",t.dataModel.recordStatus),e.Y8G("optionDisabled",!1)("optionLabel",null==t.fieldsInfo.recordStatus?null:t.fieldsInfo.recordStatus.fieldTitle)("optionRequired",!0)("optionSelectFirstItem",!0)}}function p(n,C){if(1&n){const t=e.RV6();e.j41(0,"div",12)(1,"label",13),e.EFF(2),e.k0s(),e.j41(3,"textarea",14,1),e.mxI("ngModelChange",function(o){e.eBV(t);const c=e.XpG();return e.DH7(c.dataModel.configValuesJson,o)||(c.dataModel.configValuesJson=o),e.Njj(o)}),e.EFF(5,"                "),e.k0s(),e.j41(6,"em"),e.EFF(7),e.k0s()()}if(2&n){const t=e.sdS(4),s=e.XpG();e.R7$(2),e.JRh(null==s.fieldsInfo.configValuesJson?null:s.fieldsInfo.configValuesJson.fieldTitle),e.R7$(),e.R50("ngModel",s.dataModel.configValuesJson),e.Y8G("disabled",!(null!=s.fieldsInfo.configValuesJson&&s.fieldsInfo.configValuesJson.accessAddField)),e.R7$(4),e.SpI("",t.value.length," / 10000")}}function g(n,C){if(1&n){const t=e.RV6();e.j41(0,"div",15)(1,"button",16),e.bIt("click",function(){e.eBV(t);const o=e.XpG();return e.Njj(o.onFormCancel())}),e.nrm(2,"i",17),e.EFF(3),e.nI1(4,"translate"),e.k0s(),e.j41(5,"button",18),e.nrm(6,"i",19),e.EFF(7),e.nI1(8,"translate"),e.k0s()()}if(2&n){e.XpG();const t=e.sdS(9);e.R7$(3),e.SpI(" ",e.bMT(4,3,"ACTION.CANCEL")," "),e.R7$(2),e.Y8G("disabled",!t.form.valid),e.R7$(2),e.SpI(" ",e.bMT(8,5,"ACTION.SAVE")," ")}}let S=(()=>{class n extends l.n{constructor(t,s,o,c,f,d,v,k){super(c,new u.pP,k,d),this.data=t,this.dialogRef=s,this.coreEnumService=o,this.coreSiteCategoryCmsModuleService=c,this.cmsToastrService=f,this.translate=d,this.cdr=v,this.publicHelper=k,this.requestLinkCmsModuleId=0,this.requestLinkCmsSiteCategoryId=0,this.dataModelResult=new u.YyC,this.dataModel=new u.pP,this.formInfo=new u.IL9,this.fileManagerOpenForm=!1,this.publicHelper.processService.cdr=this.cdr,t&&(this.requestLinkCmsSiteCategoryId=+t.linkCmsSiteCategoryId||0,this.requestLinkCmsModuleId=+t.linkCmsModuleId||0)}ngOnInit(){if(this.requestLinkCmsSiteCategoryId<=0||this.requestLinkCmsModuleId<=0)return this.cmsToastrService.typeErrorComponentAction(),void this.dialogRef.close({dialogChangedDate:!1});this.DataGetOneContent()}DataGetOneContent(){this.translate.get("MESSAGE.Receiving_Information_From_The_Server").subscribe(c=>{this.formInfo.formAlert=c}),this.formInfo.formError="";const t=this.constructor.name+"main";this.translate.get("MESSAGE.Receiving_information").subscribe(c=>{this.publicHelper.processService.processStart(t,c,this.constructor.name)});const s=new u.O2i;let o=new u.ycK;o.propertyName="LinkCmsSiteCategoryId",o.value=this.requestLinkCmsSiteCategoryId,s.filters.push(o),o=new u.ycK,o.propertyName="LinkCmsModuleId",o.value=this.requestLinkCmsModuleId,s.filters.push(o),s.accessLoad=!0,this.coreSiteCategoryCmsModuleService.setAccessLoad(),this.coreSiteCategoryCmsModuleService.setAccessDataType(u.FYP.Editor),this.coreSiteCategoryCmsModuleService.ServiceGetAll(s).subscribe({next:c=>{this.dataAccessModel=c.access,this.fieldsInfo=this.publicHelper.fieldInfoConvertor(c.access),this.dataModel=c.item,c.isSuccess?c.listItems&&c.listItems.length>0?(this.dataModel=c.listItems[0],this.formInfo.formTitle=this.formInfo.formTitle+" "+c.item.linkCmsModuleId+"<==>"+c.item.linkCmsSiteCategoryId,this.formInfo.formAlert=""):this.cmsToastrService.typeErrorMessage(this.translate.instant("MESSAGE.Module_not_found_for_editing")):(this.translate.get("ERRORMESSAGE.MESSAGE.typeError").subscribe(f=>{this.formInfo.formAlert=f}),this.formInfo.formError=c.errorMessage,this.cmsToastrService.typeErrorMessage(c.errorMessage)),this.publicHelper.processService.processStop(t)},error:c=>{this.cmsToastrService.typeError(c),this.publicHelper.processService.processStop(t,!1)}})}DataEditContent(){this.translate.get("MESSAGE.sending_information_to_the_server").subscribe(s=>{this.formInfo.formAlert=s}),this.formInfo.formError="";const t=this.constructor.name+"main";this.translate.get("MESSAGE.sending_information_to_the_server").subscribe(s=>{this.publicHelper.processService.processStart(t,s,this.constructor.name)}),this.coreSiteCategoryCmsModuleService.ServiceEdit(this.dataModel).subscribe({next:s=>{this.formInfo.formSubmitAllow=!0,this.dataModelResult=s,s.isSuccess?(this.translate.get("MESSAGE.registration_completed_successfully").subscribe(o=>{this.formInfo.formAlert=o}),this.cmsToastrService.typeSuccessEdit(),this.dialogRef.close({dialogChangedDate:!0})):(this.translate.get("ERRORMESSAGE.MESSAGE.typeError").subscribe(o=>{this.formInfo.formAlert=o}),this.formInfo.formError=s.errorMessage,this.cmsToastrService.typeErrorMessage(s.errorMessage)),this.publicHelper.processService.processStop(t)},error:s=>{this.formInfo.formSubmitAllow=!0,this.cmsToastrService.typeError(s),this.publicHelper.processService.processStop(t,!1)}})}onActionSiteCategorySelect(t){this.dataModel.linkCmsSiteCategoryId=null,t&&t.id>0&&(this.dataModel.linkCmsSiteCategoryId=t.id)}onActionSelectorModuleSelect(t){this.dataModel.linkCmsModuleId=null,t&&t.id>0&&(this.dataModel.linkCmsModuleId=t.id)}onFormSubmit(){this.formGroup.valid&&(this.formInfo.formSubmitAllow=!1,this.DataEditContent())}onFormCancel(){this.dialogRef.close({dialogChangedDate:!1})}onStepClick(t,s){t.previouslySelectedIndex<t.selectedIndex&&(this.formGroup.valid||(this.cmsToastrService.typeErrorFormInvalid(),setTimeout(()=>{s.selectedIndex=t.previouslySelectedIndex},10)))}static#e=this.\u0275fac=function(s){return new(s||n)(e.rXU(y.Vh),e.rXU(y.CP),e.rXU(u.i9D),e.rXU(u.V2o),e.rXU(E.k),e.rXU(I.c$),e.rXU(e.gRc),e.rXU(O.A))};static#t=this.\u0275cmp=e.VBU({type:n,selectors:[["app-core-sitecategorycmsmodule-edit"]],viewQuery:function(s,o){if(1&s&&e.GBs(r,5),2&s){let c;e.mGM(c=e.lsd())&&(o.formGroup=c.first)}},features:[e.Vt3],decls:17,vars:18,consts:[["vform","ngForm"],["ConfigValuesJson",""],[1,"card","card-style","progressOverlayContainer"],[3,"optionsInfoAreaId"],[1,"content","mb-0"],[1,"mb-0","color-highlight","font-600","font-12"],[3,"ngSubmit"],[3,"model","optionDisabled","optionLabel","optionRequired","optionSelectFirstItem","modelChange",4,"ngIf"],[3,"optionChange","optionDisabled","optionSelectForce","optionPlaceholder"],["class","input-style has-borders no-icon input-style-always-active validate-field mb-4",4,"ngIf"],["class","form-actions",4,"ngIf"],[3,"modelChange","model","optionDisabled","optionLabel","optionRequired","optionSelectFirstItem"],[1,"input-style","has-borders","no-icon","input-style-always-active","validate-field","mb-4"],["for","dataModel.configValuesJson",1,"color-highlight"],["matInput","","name","dataModel.configValuesJson","type","text","placeholder","ConfigValuesJson","minlength","0","maxlength","10000","rows","6","id","dataModel.configValuesJson",1,"form-control","validate-name",3,"ngModelChange","ngModel","disabled"],[1,"form-actions"],["type","button",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-gray",3,"click"],[1,"ft-x"],["type","submit",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-green",3,"disabled"],[1,"fa","fa-check-square-o"]],template:function(s,o){if(1&s){const c=e.RV6();e.j41(0,"div",2),e.nrm(1,"app-progress-spinner",3),e.j41(2,"div",4)(3,"p",5),e.EFF(4),e.k0s(),e.j41(5,"p"),e.EFF(6),e.nI1(7,"translate"),e.k0s(),e.j41(8,"form",6,0),e.bIt("ngSubmit",function(){return e.eBV(c),e.Njj(o.onFormSubmit())}),e.DNE(10,m,1,5,"app-cms-enum-record-status-selector",7),e.j41(11,"app-core-sitecategory-selector",8),e.nI1(12,"translate"),e.bIt("optionChange",function(d){return e.eBV(c),e.Njj(o.onActionSiteCategorySelect(d))}),e.k0s(),e.j41(13,"app-core-module-selector",8),e.nI1(14,"translate"),e.bIt("optionChange",function(d){return e.eBV(c),e.Njj(o.onActionSelectorModuleSelect(d))}),e.k0s(),e.DNE(15,p,8,4,"div",9)(16,g,9,7,"div",10),e.k0s()()()}2&s&&(e.R7$(),e.Y8G("optionsInfoAreaId",o.constructor.name),e.R7$(3),e.SpI(" ",o.formInfo.formTitle," "),e.R7$(2),e.SpI(" ",e.bMT(7,12,"TITLE.Be_Careful_When_Entering_Information")," "),e.R7$(4),e.Y8G("ngIf",null==o.fieldsInfo.recordStatus?null:o.fieldsInfo.recordStatus.accessWatchField),e.R7$(),e.Y8G("optionDisabled",!(null!=o.fieldsInfo.linkCmsSiteCategoryId&&o.fieldsInfo.linkCmsSiteCategoryId.accessEditField))("optionSelectForce",o.dataModel.linkCmsSiteCategoryId)("optionPlaceholder",e.bMT(12,14,"TITLE.SITE_CATEGORY")),e.R7$(2),e.Y8G("optionDisabled",!(null!=o.fieldsInfo.linkCmsModuleId&&o.fieldsInfo.linkCmsModuleId.accessEditField))("optionSelectForce",o.dataModel.linkCmsModuleId)("optionPlaceholder",e.bMT(14,16,"TITLE.MODULE")),e.R7$(2),e.Y8G("ngIf",null==o.fieldsInfo.configValuesJson?null:o.fieldsInfo.configValuesJson.accessWatchField),e.R7$(),e.Y8G("ngIf",o.formInfo.formSubmitAllow))},dependencies:[M.bT,i.qT,i.me,i.BC,i.cb,i.xh,i.tU,i.vS,i.cV,L.fg,j.m,P._,B.S,V.n,I.D9],styles:[".form-body[_ngcontent-%COMP%]{width:500px}@media (max-width: 700px){.form-body[_ngcontent-%COMP%]{display:contents}}#file-manager[_ngcontent-%COMP%]{width:calc(100vw - 16px);height:calc(100vh - 16px)}.recordStatus-1.mat-select-panel[_ngcontent-%COMP%]{background:#ff0}.recordStatus-2.mat-select-panel[_ngcontent-%COMP%]{background:#000}.recordStatus-3.mat-select-panel[_ngcontent-%COMP%]{background:red}"]})}return n})();var Z=a(8339),q=a(6006),ee=a(2221),te=a(6182),J=a(1184),oe=a(8966),ie=a(4685),z=a(8058),b=a(8403),se=a(6145),ne=a(1908),le=a(3036),re=a(3438),ae=a(6381),ce=a(1268);const de=()=>[5,10,20,100],me=n=>({display:n});function ue(n,C){if(1&n){const t=e.RV6();e.j41(0,"a",14),e.bIt("click",function(){e.eBV(t);const o=e.XpG();return e.Njj(o.onActionBackToParentModule())}),e.nrm(1,"i",39),e.k0s()}}function pe(n,C){if(1&n){const t=e.RV6();e.j41(0,"a",14),e.bIt("click",function(){e.eBV(t);const o=e.XpG();return e.Njj(o.onActionBackToParent())}),e.nrm(1,"i",39),e.k0s()}}function fe(n,C){if(1&n){const t=e.RV6();e.j41(0,"div",40)(1,"a",41),e.bIt("click",function(){e.eBV(t);const o=e.XpG();return e.Njj(o.onActionButtonNewRow())}),e.nrm(2,"i",42)(3,"br"),e.k0s(),e.j41(4,"p",43),e.EFF(5),e.nI1(6,"translate"),e.k0s()()}2&n&&(e.R7$(5),e.JRh(e.bMT(6,1,"ACTION.ADD")))}function Ce(n,C){if(1&n){const t=e.RV6();e.j41(0,"div",40)(1,"a",44),e.bIt("click",function(){e.eBV(t);const o=e.XpG();return e.Njj(o.onActionButtonEditRow(o.tableRowSelected))}),e.nrm(2,"i",45)(3,"br"),e.k0s(),e.j41(4,"p",43),e.EFF(5),e.nI1(6,"translate"),e.k0s()()}2&n&&(e.R7$(5),e.JRh(e.bMT(6,1,"ACTION.EDIT")))}function he(n,C){if(1&n){const t=e.RV6();e.j41(0,"div",40)(1,"a",46),e.bIt("click",function(){e.eBV(t);const o=e.XpG();return e.Njj(o.onActionButtonDeleteRow(o.tableRowSelected))}),e.nrm(2,"i",47)(3,"br"),e.k0s(),e.j41(4,"p",43),e.EFF(5),e.nI1(6,"translate"),e.k0s()()}2&n&&(e.R7$(5),e.JRh(e.bMT(6,1,"ACTION.DELETE")))}function _e(n,C){if(1&n){const t=e.RV6();e.j41(0,"div",40)(1,"a",48),e.bIt("click",function(){e.eBV(t);const o=e.XpG();return e.Njj(o.onActionButtonConfigMainAdminRow(o.tableRowSelected))}),e.nrm(2,"i",49)(3,"br"),e.k0s(),e.j41(4,"p",43),e.EFF(5),e.nI1(6,"translate"),e.k0s()()}2&n&&(e.R7$(5),e.JRh(e.bMT(6,1,"ACTION.MODULE_MANAGEMENT_SETTING")))}function Se(n,C){if(1&n&&(e.j41(0,"mat-header-cell",50),e.EFF(1),e.k0s()),2&n){const t=e.XpG();e.R7$(),e.SpI(" ",null==t.fieldsInfo.linkCmsModuleId?null:t.fieldsInfo.linkCmsModuleId.fieldTitle," ")}}function ge(n,C){if(1&n&&(e.j41(0,"mat-cell"),e.EFF(1),e.k0s()),2&n){const t=C.$implicit;e.R7$(),e.SpI(" ",t.linkCmsModuleId," ")}}function Me(n,C){if(1&n&&(e.j41(0,"mat-header-cell",50),e.EFF(1),e.k0s()),2&n){const t=e.XpG();e.R7$(),e.SpI(" ",null==t.fieldsInfo.linkCmsSiteCategoryId?null:t.fieldsInfo.linkCmsSiteCategoryId.fieldTitle," ")}}function Ie(n,C){if(1&n&&(e.j41(0,"mat-cell"),e.EFF(1),e.k0s()),2&n){const t=C.$implicit;e.R7$(),e.SpI(" ",t.linkCmsSiteCategoryId," ")}}function be(n,C){if(1&n&&(e.j41(0,"mat-header-cell",50),e.EFF(1),e.k0s()),2&n){const t=e.XpG();e.R7$(),e.SpI(" ",null==t.fieldsInfo.recordStatus?null:t.fieldsInfo.recordStatus.fieldTitle," ")}}function ye(n,C){if(1&n&&e.nrm(0,"select",53),2&n){const t=e.XpG().$implicit,s=e.XpG();e.Y8G("contentService",s.contentService)("row",t)("ngStyle",e.eq3(3,me,t.id===(null==s.tableRowSelected?null:s.tableRowSelected.id)?"":"none"))}}function Ee(n,C){if(1&n&&(e.j41(0,"mat-cell",51),e.nI1(1,"statusCellClass"),e.nrm(2,"i",51),e.nI1(3,"statusIconClass"),e.DNE(4,ye,1,5,"select",52),e.k0s()),2&n){const t=C.$implicit,s=e.XpG();e.Y8G("ngClass",e.bMT(1,3,t.recordStatus)),e.R7$(2),e.Y8G("ngClass",e.bMT(3,5,t.recordStatus)),e.R7$(2),e.Y8G("ngIf",null==s.dataModelResult||null==s.dataModelResult.access?null:s.dataModelResult.access.accessEditRow)}}function Re(n,C){1&n&&(e.j41(0,"mat-header-cell",50),e.EFF(1),e.nI1(2,"translate"),e.k0s()),2&n&&(e.R7$(),e.SpI(" ",e.bMT(2,1,"TITLE.SITE_CATEGORY")," "))}function ve(n,C){if(1&n&&(e.j41(0,"mat-cell"),e.EFF(1),e.k0s()),2&n){const t=C.$implicit;e.R7$(),e.SpI(" ",t.virtual_CmsSiteCategory.title," ")}}function Ae(n,C){1&n&&(e.j41(0,"mat-header-cell",50),e.EFF(1),e.nI1(2,"translate"),e.k0s()),2&n&&(e.R7$(),e.SpI(" ",e.bMT(2,1,"TITLE.MODULE")," "))}function Te(n,C){if(1&n&&(e.j41(0,"mat-cell"),e.EFF(1),e.k0s()),2&n){const t=C.$implicit;e.R7$(),e.SpI(" ",t.virtual_CmsModule.title," ")}}function De(n,C){1&n&&(e.j41(0,"mat-header-cell"),e.EFF(1),e.nI1(2,"translate"),e.k0s()),2&n&&(e.R7$(),e.SpI(" ",e.bMT(2,1,"TITLE.OPTION")," "))}function ke(n,C){if(1&n&&(e.j41(0,"mat-cell",54)(1,"button",55)(2,"mat-icon"),e.EFF(3,"more_vert"),e.k0s()(),e.nrm(4,"mat-menu",null,2),e.k0s()),2&n){const t=e.sdS(5);e.R7$(),e.Y8G("matMenuTriggerFor",t)}}function Oe(n,C){1&n&&e.nrm(0,"mat-header-row")}function Le(n,C){if(1&n){const t=e.RV6();e.j41(0,"mat-row",11),e.bIt("click",function(){const o=e.eBV(t).$implicit,c=e.XpG();return e.Njj(c.onActionTableRowSelect(o))}),e.k0s()}if(2&n){const t=C.$implicit,s=C.dataIndex,o=e.XpG();e.AVh("ntk-row-odd",s%2)("ntk-row-even",!(s%2))("ntk-row-selected",t.linkCmsModuleId===(null==o.tableRowSelected?null:o.tableRowSelected.linkCmsModuleId)&&t.linkCmsSiteCategoryId===(null==o.tableRowSelected?null:o.tableRowSelected.linkCmsSiteCategoryId))}}let K=(()=>{class n extends $.j{constructor(t,s,o,c,f,d,v,k,Pe,Q,Be){if(super(t,new u.pP,Q,f,k),this.contentService=t,this.cmsToastrService=s,this.router=o,this.activatedRoute=c,this.tokenHelper=f,this.cmsConfirmationDialogService=d,this.cdr=v,this.translate=k,this.pageInfo=Pe,this.publicHelper=Q,this.dialog=Be,this.requestLinkCmsModuleId=0,this.requestLinkCmsSiteCategoryId=0,this.flag=!1,this.tableContentSelected=[],this.filteModelContent=new u.O2i,this.tabledisplayedColumns=[],this.tabledisplayedColumnsSource=["LinkCmsModuleId","LinkCmsSiteCategoryId","RecordStatus","virtual_CmsSiteCategory.title","virtual_CmsModule.title"],this.tabledisplayedColumnsMobileSource=["LinkCmsModuleId","LinkCmsSiteCategoryId","RecordStatus","virtual_CmsSiteCategory.title","virtual_CmsModule.title"],this.publicHelper.processService.cdr=this.cdr,this.optionsSearch.parentMethods={onSubmit:A=>this.onSubmitOptionsSearch(A)},this.filteModelContent.sortColumn="Id",this.filteModelContent.sortType=u.eKW.Descending,this.requestLinkCmsModuleId=+Number(this.activatedRoute.snapshot.paramMap.get("LinkCmsModuleId")),this.requestLinkCmsSiteCategoryId=+Number(this.activatedRoute.snapshot.paramMap.get("LinkCmsSiteCategoryId")),this.requestLinkCmsModuleId>0){const A=new u.ycK;A.propertyName="LinkCmsModuleId",A.value=this.requestLinkCmsModuleId,this.filteModelContent.filters.push(A)}if(this.requestLinkCmsSiteCategoryId>0){const A=new u.ycK;A.propertyName="LinkCmsSiteCategoryId",A.value=this.requestLinkCmsSiteCategoryId,this.filteModelContent.filters.push(A)}}ngOnInit(){this.filteModelContent.sortColumn="LinkCmsModuleId",this.tokenHelper.getCurrentToken().then(t=>{this.tokenInfo=t,this.DataGetAll()}),this.cmsApiStoreSubscribe=this.tokenHelper.getCurrentTokenOnChange().subscribe({next:t=>{this.tokenInfo=t,this.DataGetAll()}})}ngOnDestroy(){this.cmsApiStoreSubscribe.unsubscribe()}DataGetAll(){this.tabledisplayedColumns=this.publicHelper.TableDisplayedColumns(this.tabledisplayedColumnsSource,this.tabledisplayedColumnsMobileSource,[],this.tokenInfo),this.tableRowsSelected=[],this.onActionTableRowSelect(new u.pP);const t=this.constructor.name+"main";this.translate.get("MESSAGE.get_information_list").subscribe(o=>{this.publicHelper.processService.processStart(t,o,this.constructor.name)}),this.filteModelContent.accessLoad=!0;const s=JSON.parse(JSON.stringify(this.filteModelContent));this.contentService.ServiceGetAllEditor(s).subscribe({next:o=>{o.isSuccess?(this.fieldsInfo=this.publicHelper.fieldInfoConvertor(o.access),this.dataModelResult=o,this.tableSource.data=o.listItems,this.optionsStatist?.data?.show&&this.onActionButtonStatist(!0),this.optionsSearch.childMethods&&this.optionsSearch.childMethods.setAccess(o.access)):this.cmsToastrService.typeErrorMessage(o.errorMessage),this.publicHelper.processService.processStop(t)},error:o=>{this.cmsToastrService.typeError(o),this.publicHelper.processService.processStop(t,!1)}})}onTableSortData(t){this.tableSource&&this.tableSource.sort&&this.tableSource.sort.active===t.active?"asc"===this.tableSource.sort.start?(t.start="desc",this.filteModelContent.sortColumn=t.active,this.filteModelContent.sortType=u.eKW.Descending):"desc"===this.tableSource.sort.start?(t.start="asc",this.filteModelContent.sortColumn="",this.filteModelContent.sortType=u.eKW.Ascending):t.start="desc":(this.filteModelContent.sortColumn=t.active,this.filteModelContent.sortType=u.eKW.Descending),this.tableSource.sort=t,this.filteModelContent.currentPageNumber=0,this.DataGetAll()}onTablePageingData(t){this.filteModelContent.currentPageNumber=t.pageIndex+1,this.filteModelContent.rowPerPage=t.pageSize,this.DataGetAll()}onActionButtonNewRow(){null!=this.dataModelResult&&null!=this.dataModelResult.access&&this.dataModelResult.access.accessAddRow?this.dialog.open(R,{height:"90%",panelClass:this.tokenHelper.isMobile?"dialog-fullscreen":"dialog-min",enterAnimationDuration:D.c.cmsViewConfig.enterAnimationDuration,exitAnimationDuration:D.c.cmsViewConfig.exitAnimationDuration,data:{linkCmsModuleId:this.requestLinkCmsModuleId,linkCmsSiteCategoryId:this.requestLinkCmsSiteCategoryId}}).afterClosed().subscribe(o=>{o&&o.dialogChangedDate&&this.DataGetAll()}):this.cmsToastrService.typeErrorAccessAdd()}onActionButtonEditRow(t=this.tableRowSelected){t&&t.linkCmsModuleId&&0!==t.linkCmsModuleId&&t.linkCmsSiteCategoryId&&0!==t.linkCmsSiteCategoryId?(this.onActionTableRowSelect(t),null!=this.dataModelResult&&null!=this.dataModelResult.access&&this.dataModelResult.access.accessEditRow?this.dialog.open(S,{height:"90%",panelClass:this.tokenHelper.isMobile?"dialog-fullscreen":"dialog-min",enterAnimationDuration:D.c.cmsViewConfig.enterAnimationDuration,exitAnimationDuration:D.c.cmsViewConfig.exitAnimationDuration,data:{linkCmsModuleId:this.tableRowSelected.linkCmsModuleId,linkCmsSiteCategoryId:this.tableRowSelected.linkCmsSiteCategoryId}}).afterClosed().subscribe(c=>{c&&c.dialogChangedDate&&this.DataGetAll()}):this.cmsToastrService.typeErrorAccessEdit()):this.cmsToastrService.typeErrorSelectedRow()}onActionButtonDeleteRow(t=this.tableRowSelected){if(t&&t.linkCmsModuleId&&0!==t.linkCmsModuleId&&t.linkCmsSiteCategoryId&&0!==t.linkCmsSiteCategoryId)if(this.onActionTableRowSelect(t),null!=this.dataModelResult&&null!=this.dataModelResult.access&&this.dataModelResult.access.accessDeleteRow){var s="",o="";this.translate.get(["MESSAGE.Please_Confirm","MESSAGE.Do_you_want_to_delete_this_content"]).subscribe(c=>{s=c["MESSAGE.Please_Confirm"],o=c["MESSAGE.Do_you_want_to_delete_this_content"]+"?<br> ( "+this.tableRowSelected.virtual_CmsModule.title+"<==>"+this.tableRowSelected.virtual_CmsSiteCategory.title+" ) "}),this.cmsConfirmationDialogService.confirm(s,o).then(c=>{if(c){const f=this.constructor.name+"main";this.translate.get("MESSAGE.Receiving_information").subscribe(d=>{this.publicHelper.processService.processStart(f,d,this.constructor.name)}),this.contentService.ServiceDeleteEntity(this.tableRowSelected).subscribe({next:d=>{d.isSuccess?(this.cmsToastrService.typeSuccessRemove(),this.DataGetAll()):this.cmsToastrService.typeErrorRemove(),this.publicHelper.processService.processStop(f)},error:d=>{this.cmsToastrService.typeError(d),this.publicHelper.processService.processStop(f,!1)}})}}).catch(()=>{})}else this.cmsToastrService.typeErrorAccessDelete();else this.translate.get("MESSAGE.no_row_selected_to_delete").subscribe(c=>{this.cmsToastrService.typeErrorSelected(c)})}onActionButtonGoToSiteCategoryCmsModuleList(t=this.tableRowSelected){t&&t.linkCmsModuleId&&0!==t.linkCmsModuleId&&t.linkCmsSiteCategoryId&&0!==t.linkCmsSiteCategoryId?(this.onActionTableRowSelect(t),this.router.navigate(["/core/siteSiteCategoryCmsModule/",this.tableRowSelected.id])):this.translate.get("MESSAGE.no_row_selected_to_display").subscribe(s=>{this.cmsToastrService.typeErrorSelected(s)})}onActionButtonStatist(t=!this.optionsStatist.data.show){if(this.optionsStatist.data.show=t,!this.optionsStatist.data.show)return;const s=new Map;this.translate.get("MESSAGE.Active").subscribe(d=>{s.set(d,0)}),this.translate.get("MESSAGE.All").subscribe(d=>{s.set(d,0)});const o=this.constructor.name+".ServiceStatist";this.translate.get("MESSAGE.Get_the_statist").subscribe(d=>{this.publicHelper.processService.processStart(o,d,this.constructor.name)}),this.contentService.ServiceGetCount(this.filteModelContent).subscribe({next:d=>{d.isSuccess?(this.translate.get("MESSAGE.All").subscribe(v=>{s.set(v,d.totalRowCount)}),this.optionsStatist.childMethods.setStatistValue(s)):this.cmsToastrService.typeErrorMessage(d.errorMessage),this.publicHelper.processService.processStop(o)},error:d=>{this.cmsToastrService.typeError(d),this.publicHelper.processService.processStop(o,!1)}});const c=JSON.parse(JSON.stringify(this.filteModelContent)),f=new u.ycK;f.propertyName="RecordStatus",f.value=u.Xw7.Available,c.filters.push(f),this.contentService.ServiceGetCount(c).subscribe({next:d=>{d.isSuccess?(this.translate.get("MESSAGE.Active").subscribe(v=>{s.set(v,d.totalRowCount)}),this.optionsStatist.childMethods.setStatistValue(s)):this.cmsToastrService.typeErrorMessage(d.errorMessage),this.publicHelper.processService.processStop(o)},error:d=>{this.cmsToastrService.typeError(d),this.publicHelper.processService.processStop(o,!1)}})}onActionButtonConfigMainAdminRow(t=this.tableRowSelected){t&&t.linkCmsModuleId&&0!==t.linkCmsModuleId&&t.linkCmsSiteCategoryId&&0!==t.linkCmsSiteCategoryId?(this.onActionTableRowSelect(t),this.router.navigate([t.virtual_CmsModule.className+"/config/mainadmin/"])):this.translate.get("ERRORMESSAGE.MESSAGE.typeErrorSelectedRow").subscribe(s=>{this.cmsToastrService.typeErrorSelected(s)})}onActionButtonReload(){this.DataGetAll()}onSubmitOptionsSearch(t){this.filteModelContent.filters=t,this.DataGetAll()}onActionBackToParent(){this.router.navigate(["/core/sitecategory/"])}onActionBackToParentModule(){this.router.navigate(["/core/module/"])}static#e=this.\u0275fac=function(s){return new(s||n)(e.rXU(u.V2o),e.rXU(E.k),e.rXU(T.Ix),e.rXU(T.nX),e.rXU(Z._),e.rXU(F.o),e.rXU(e.gRc),e.rXU(I.c$),e.rXU(q.P),e.rXU(O.A),e.rXU(y.bZ))};static#t=this.\u0275cmp=e.VBU({type:n,selectors:[["app-core-sitecategorycmsmodule-list"]],features:[e.Vt3],decls:57,vars:30,consts:[["tableSort","matSort"],["paginator",""],["actionMenu","matMenu"],[3,"optionActionGuideNoticeDisplayChange","optionOnActionButtonMemoRow","optionOnActionButtonMemo","optionOnActionButtonExport","optionOnActionButtonPrintRow","optionsListInfoAreaId","optionGuideNoticeKey","optionActionGuideNoticeDisplay","optionTreeDisplay","optionActionRowId","optionActionRowDisplayMenu","optionSelectRowItemTitle"],["cms-tree",""],["cms-header",""],["cms-action-header",""],[1,"d-flex","justify-content-between","flex-wrap"],[1,"justify-content-end"],[1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-highlight"],[1,"custom-slide-toggle",3,"ngModelChange","ngModel"],[3,"click"],[1,"justify-content-start"],["type","button","class","btn font-13 font-600 btn-s m-1 rounded-s shadow-xl border-0 gradient-highlight","target","_blank",3,"click",4,"ngIf"],["type","button","target","_blank",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-highlight",3,"click"],[1,"fa-solid","fa-info","font-18",2,"color","#ffffff"],[1,"fa-solid","fa-rotate-right","font-18",2,"color","#ffffff"],["cms-action-main",""],["class","col-4",4,"ngIf"],["cms-action-row",""],["cms-action-area",""],[3,"optionsChange","options"],["cms-body",""],["matSort","",3,"matSortChange","dataSource"],["matColumnDef","LinkCmsModuleId"],["mat-sort-header","",4,"matHeaderCellDef"],[4,"matCellDef"],["matColumnDef","LinkCmsSiteCategoryId"],["matColumnDef","RecordStatus"],[3,"ngClass",4,"matCellDef"],["matColumnDef","virtual_CmsSiteCategory.title"],["matColumnDef","virtual_CmsModule.title"],["matColumnDef","Action"],[4,"matHeaderCellDef"],["class"," Action",4,"matCellDef"],[4,"matHeaderRowDef"],[3,"ntk-row-odd","ntk-row-even","ntk-row-selected","click",4,"matRowDef","matRowDefColumns"],["cms-footer",""],[3,"page","length","pageIndex","pageSize","pageSizeOptions"],[1,"fa-solid","fa-arrow-left","font-18",2,"color","#ffffff"],[1,"col-4"],["type","button","target","_blank",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-teal",3,"click"],[1,"fa-solid","fa-plus","font-18",2,"color","#FFFFFF"],[1,"font-11","text-center","opacity-70"],["target","_blank",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-magenta",3,"click"],[1,"fa-solid","fa-pen","font-18",2,"color","#FFFFFF"],["target","_blank",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-red",3,"click"],[1,"fa-solid","fa-trash","font-18",2,"color","#ffffff"],["target","_blank",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-highlight",3,"click"],[1,"fa-solid","fa-gear","font-18",2,"color","#ffffff"],["mat-sort-header",""],[3,"ngClass"],["matNativeControl","","cmsRecordStatusSelfSave","","style","background: none; border: none;",3,"contentService","row","ngStyle",4,"ngIf"],["matNativeControl","","cmsRecordStatusSelfSave","",2,"background","none","border","none",3,"contentService","row","ngStyle"],[1,"Action"],["type","button","mat-icon-button","","aria-label","Action Menu",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-highlight",3,"matMenuTriggerFor"]],template:function(s,o){if(1&s){const c=e.RV6();e.j41(0,"app-cms-html-list",3),e.mxI("optionActionGuideNoticeDisplayChange",function(d){return e.eBV(c),e.DH7(o.viewGuideNotice,d)||(o.viewGuideNotice=d),e.Njj(d)}),e.bIt("optionOnActionButtonMemoRow",function(){return e.eBV(c),e.Njj(o.onActionButtonMemoRow())})("optionOnActionButtonMemo",function(){return e.eBV(c),e.Njj(o.onActionButtonMemo())})("optionOnActionButtonExport",function(){return e.eBV(c),e.Njj(o.onActionButtonExport())})("optionOnActionButtonPrintRow",function(){return e.eBV(c),e.Njj(o.onActionButtonPrintRow())}),e.qex(1,4),e.EFF(2," -------------------------------------- "),e.bVm(),e.eu8(3,5),e.qex(4,6),e.j41(5,"div",7)(6,"div",8)(7,"a",9)(8,"mat-slide-toggle",10),e.mxI("ngModelChange",function(d){return e.eBV(c),e.DH7(o.optionsSearch.data.show,d)||(o.optionsSearch.data.show=d),e.Njj(d)}),e.k0s(),e.EFF(9),e.nI1(10,"translate"),e.k0s(),e.j41(11,"a",9)(12,"mat-slide-toggle",11),e.bIt("click",function(){return e.eBV(c),e.Njj(o.onActionButtonStatist())}),e.k0s(),e.EFF(13),e.nI1(14,"translate"),e.k0s()(),e.j41(15,"div",12),e.DNE(16,ue,2,0,"a",13)(17,pe,2,0,"a",13),e.j41(18,"a",14),e.bIt("click",function(){return e.eBV(c),e.Njj(o.viewGuideNotice=!o.viewGuideNotice)}),e.nrm(19,"i",15),e.k0s(),e.j41(20,"a",14),e.bIt("click",function(){return e.eBV(c),e.Njj(o.onActionButtonReload())}),e.nrm(21,"i",16),e.k0s()()(),e.bVm(),e.qex(22,17),e.DNE(23,fe,7,3,"div",18),e.bVm(),e.qex(24,19),e.DNE(25,Ce,7,3,"div",18)(26,he,7,3,"div",18)(27,_e,7,3,"div",18),e.bVm(),e.qex(28,20),e.j41(29,"app-cms-search-list",21),e.mxI("optionsChange",function(d){return e.eBV(c),e.DH7(o.optionsSearch,d)||(o.optionsSearch=d),e.Njj(d)}),e.k0s(),e.j41(30,"app-cms-statist-list",21),e.mxI("optionsChange",function(d){return e.eBV(c),e.DH7(o.optionsStatist,d)||(o.optionsStatist=d),e.Njj(d)}),e.k0s(),e.bVm(),e.qex(31,22),e.j41(32,"mat-table",23,0),e.bIt("matSortChange",function(){e.eBV(c);const d=e.sdS(33);return e.Njj(o.onTableSortData(d))}),e.qex(34,24),e.DNE(35,Se,2,1,"mat-header-cell",25)(36,ge,2,1,"mat-cell",26),e.bVm(),e.qex(37,27),e.DNE(38,Me,2,1,"mat-header-cell",25)(39,Ie,2,1,"mat-cell",26),e.bVm(),e.qex(40,28),e.DNE(41,be,2,1,"mat-header-cell",25)(42,Ee,5,7,"mat-cell",29),e.bVm(),e.qex(43,30),e.DNE(44,Re,3,3,"mat-header-cell",25)(45,ve,2,1,"mat-cell",26),e.bVm(),e.qex(46,31),e.DNE(47,Ae,3,3,"mat-header-cell",25)(48,Te,2,1,"mat-cell",26),e.bVm(),e.qex(49,32),e.DNE(50,De,3,3,"mat-header-cell",33)(51,ke,6,1,"mat-cell",34),e.bVm(),e.DNE(52,Oe,1,0,"mat-header-row",35)(53,Le,1,6,"mat-row",36),e.k0s(),e.bVm(),e.qex(54,37),e.j41(55,"mat-paginator",38,1),e.bIt("page",function(d){return e.eBV(c),e.Njj(o.onTablePageingData(d))}),e.k0s(),e.bVm(),e.k0s()}2&s&&(e.Y8G("optionsListInfoAreaId",o.constructor.name)("optionGuideNoticeKey",""),e.R50("optionActionGuideNoticeDisplay",o.viewGuideNotice),e.Y8G("optionTreeDisplay",!1)("optionActionRowId",null==o.tableRowSelected?null:o.tableRowSelected.id)("optionActionRowDisplayMenu",o.tableRowSelectDoubleClick)("optionSelectRowItemTitle",null==o.tableRowSelected?null:o.tableRowSelected.id),e.R7$(8),e.R50("ngModel",o.optionsSearch.data.show),e.R7$(),e.SpI("",e.bMT(10,25,"ACTION.SEARCH")," "),e.R7$(4),e.SpI("",e.bMT(14,27,"ACTION.STATIST")," "),e.R7$(3),e.Y8G("ngIf",o.requestLinkCmsModuleId>0),e.R7$(),e.Y8G("ngIf",o.requestLinkCmsSiteCategoryId>0),e.R7$(6),e.Y8G("ngIf",null==o.dataModelResult||null==o.dataModelResult.access?null:o.dataModelResult.access.accessAddRow),e.R7$(2),e.Y8G("ngIf",null==o.dataModelResult||null==o.dataModelResult.access?null:o.dataModelResult.access.accessEditRow),e.R7$(),e.Y8G("ngIf",null==o.dataModelResult||null==o.dataModelResult.access?null:o.dataModelResult.access.accessDeleteRow),e.R7$(),e.Y8G("ngIf",o.tokenInfo.userAccessAdminAllowToProfessionalData),e.R7$(2),e.R50("options",o.optionsSearch),e.R7$(),e.R50("options",o.optionsStatist),e.R7$(2),e.Y8G("dataSource",o.tableSource),e.R7$(20),e.Y8G("matHeaderRowDef",o.tabledisplayedColumns),e.R7$(),e.Y8G("matRowDefColumns",o.tabledisplayedColumns),e.R7$(2),e.Y8G("length",o.dataModelResult.totalRowCount)("pageIndex",o.dataModelResult.currentPageNumber-1)("pageSize",o.dataModelResult.rowPerPage)("pageSizeOptions",e.lJ4(29,de)))},dependencies:[M.YU,M.bT,M.B3,i.BC,i.vS,ee.iY,te.An,L.fg,J.kk,J.Cp,oe.iy,ie.sG,z.B4,z.aE,b.Zl,b.tL,b.ji,b.cC,b.YV,b.iL,b.KS,b.$R,b.YZ,b.NB,se.l,ne.l,le.A,re.x,I.D9,ae.T,ce.M],encapsulation:2})}return n})();const Ge=[{path:"",children:[{path:"",component:K},{path:"LinkCmsModuleId/:LinkCmsModuleId",component:K},{path:"LinkCmsSiteCategoryId/:LinkCmsSiteCategoryId",component:K}]}];let Fe=(()=>{class n{static#e=this.\u0275fac=function(s){return new(s||n)};static#t=this.\u0275mod=e.$C({type:n});static#o=this.\u0275inj=e.G2t({imports:[T.iI.forChild(Ge),T.iI]})}return n})(),je=(()=>{class n{static#e=this.\u0275fac=function(s){return new(s||n)};static#t=this.\u0275mod=e.$C({type:n});static#o=this.\u0275inj=e.G2t({providers:[u.V2o,F.o,u.XBe],imports:[M.MD,i.YN,Fe,i.X1.withConfig({warnOnNgModelWithFormControl:"never"}),h.G,w.Qt,N.CoreModuleModule,U.CoreSiteCategoryCmsModule]})}return n})()},2243:(H,G,a)=>{a.d(G,{n:()=>Y});var M=a(3308),i=a(7788),u=a(7222),h=a(8189),w=a(5804),F=a(965),N=a(8887),U=a(3793),T=a(2831),$=a(3527),D=a(9722),y=a(5154),X=a(2882),e=a(6610),E=a(2497),O=a(8278),I=a(9344),L=a(6182),j=a(4587),P=a(7912);const B=["*"];function V(_,R){if(1&_&&(i.j41(0,"label",8),i.EFF(1),i.k0s()),2&_){const l=i.XpG();i.Mz_("for","app-cms-site-selector-",l.id,""),i.R7$(),i.JRh(l.optionLabel)}}function x(_,R){if(1&_&&(i.j41(0,"mat-option",9)(1,"span"),i.EFF(2),i.k0s()()),2&_){const l=R.$implicit,r=i.XpG();i.Y8G("value",l)("disabled",r.optionDisabled),i.R7$(2),i.JRh(r.displayOption(l))}}function W(_,R){if(1&_){const l=i.RV6();i.j41(0,"mat-icon",10),i.bIt("click",function(){i.eBV(l);const m=i.XpG();return i.Njj(m.onActionSelectClear())}),i.EFF(1,"close"),i.k0s()}}let Y=(()=>{class _{static#e=this.nextId=0;constructor(l,r,m,p,g,S){this.coreEnumService=l,this.cmsToastrService=r,this.cdr=m,this.publicHelper=p,this.translate=g,this.categoryService=S,this.id=++_.nextId,this.dataModelResult=new h.N$V,this.dataModelSelect=new h.UAV,this.formControl=new u.MJ,this.optionDisabled=!1,this.optionSelectFirstItem=!1,this.optionPlaceholder="",this.optionLabel="",this.optionChange=new i.bkB,this.optionReload=()=>this.onActionButtonReload(),this.publicHelper.processService.cdr=this.cdr}set optionSelectForce(l){this.onActionSelectForce(l)}ngOnInit(){this.loadOptions(),(!this.optionLabel||0==this.optionLabel.length&&this.optionPlaceholder?.length>0)&&(this.optionLabel=this.optionPlaceholder)}loadOptions(){this.filteredOptions=this.formControl.valueChanges.pipe((0,F.Z)(""),(0,N.B)(1500),(0,U.F)(),(0,T.n)(l=>"string"==typeof l||"number"==typeof l?this.DataGetAll(l||""):[]))}displayFn(l){return l?l.title:void 0}displayOption(l){return l?l.title:void 0}DataGetAll(l){var r=this;return(0,M.A)(function*(){const m=new h.O2i;m.rowPerPage=20,m.accessLoad=!0;let p=new h.ycK;return p.propertyName="Title",p.value=l,p.searchType=h._GO.Contains,p.clauseType=h.jL_.Or,m.filters.push(p),l&&"number"==typeof+l&&+l>0&&(p=new h.ycK,p.propertyName="Id",p.value=l,p.searchType=h._GO.Equal,p.clauseType=h.jL_.Or,m.filters.push(p)),r.publicHelper.processService.processStart("DataGetAll"),yield(0,w._)(r.categoryService.ServiceGetAll(m)).then(g=>(r.dataModelResult=g,r.optionSelectFirstItem&&(!r.dataModelSelect||!r.dataModelSelect.id||r.dataModelSelect.id<=0)&&r.dataModelResult.listItems.length>0&&(r.optionSelectFirstItem=!1,setTimeout(()=>{r.formControl.setValue(r.dataModelResult.listItems[0])},1e3),r.onActionSelect(r.dataModelResult.listItems[0])),r.publicHelper.processService.processStop("DataGetAll"),g.listItems))})()}onActionSelect(l){this.optionDisabled||(this.dataModelSelect=l,this.optionChange.emit(this.dataModelSelect))}onActionSelectClear(){this.optionDisabled||(this.dataModelSelect=null,this.formControl.setValue(null),this.optionChange.emit(null))}push(l){return this.filteredOptions.pipe((0,$.T)(r=>(r.find(m=>m.id===l.id)||r.push(l),r)))}onActionSelectForce(l){if("number"==typeof l&&l>0){if(this.dataModelSelect&&this.dataModelSelect.id===l)return;if(this.dataModelResult&&this.dataModelResult.listItems&&this.dataModelResult.listItems.find(r=>r.id===l)){const r=this.dataModelResult.listItems.find(m=>m.id===l);return this.dataModelSelect=r,void this.formControl.setValue(r)}this.categoryService.ServiceGetOneById(l).subscribe({next:r=>{r.isSuccess?(this.filteredOptions=this.push(r.item),this.dataModelSelect=r.item,this.formControl.setValue(r.item),this.optionChange.emit(r.item)):this.cmsToastrService.typeErrorMessage(r.errorMessage)}})}else{if(typeof l==typeof h.UAV)return this.filteredOptions=this.push(l),this.dataModelSelect=l,void this.formControl.setValue(l);this.formControl.setValue(null)}}onActionButtonReload(){this.dataModelSelect=new h.UAV,this.loadOptions()}static#t=this.\u0275fac=function(r){return new(r||_)(i.rXU(h.i9D),i.rXU(D.k),i.rXU(i.gRc),i.rXU(y.A),i.rXU(X.c$),i.rXU(h.WCW))};static#o=this.\u0275cmp=i.VBU({type:_,selectors:[["app-core-sitecategory-selector"]],inputs:{optionDisabled:"optionDisabled",optionSelectFirstItem:"optionSelectFirstItem",optionPlaceholder:"optionPlaceholder",optionLabel:"optionLabel",optionReload:"optionReload",optionSelectForce:"optionSelectForce"},outputs:{optionChange:"optionChange"},ngContentSelectors:B,decls:10,vars:13,consts:[["matauto","matAutocomplete"],[1,"input-style","has-borders","no-icon","input-style-always-active","validate-field","mb-4","progressOverlayContainer"],[3,"optionsInfoAreaId"],["class","color-highlight",3,"for",4,"ngIf"],["type","text","matInput","",1,"form-control","validate-name",3,"placeholder","formControl","matAutocomplete","id"],[3,"optionSelected","displayWith"],[3,"value","disabled",4,"ngFor","ngForOf"],["matSuffix","","matSuffix","","mat-icon-button","","aria-label","Clear",3,"click",4,"ngIf"],[1,"color-highlight",3,"for"],[3,"value","disabled"],["matSuffix","","matSuffix","","mat-icon-button","","aria-label","Clear",3,"click"]],template:function(r,m){if(1&r){const p=i.RV6();i.NAR(),i.j41(0,"div",1),i.nrm(1,"app-progress-spinner",2),i.DNE(2,V,2,3,"label",3),i.nrm(3,"input",4),i.j41(4,"mat-autocomplete",5,0),i.bIt("optionSelected",function(S){return i.eBV(p),i.Njj(m.onActionSelect(S.option.value))}),i.DNE(6,x,3,3,"mat-option",6),i.nI1(7,"async"),i.k0s(),i.DNE(8,W,2,0,"mat-icon",7),i.SdG(9),i.k0s()}if(2&r){const p=i.sdS(5);i.R7$(),i.Y8G("optionsInfoAreaId",m.constructor.name),i.R7$(),i.Y8G("ngIf",(null==m.optionLabel?null:m.optionLabel.length)>0),i.R7$(),i.FS9("placeholder",m.optionPlaceholder),i.Mz_("id","app-cms-site-selector-",m.id,""),i.Y8G("formControl",m.formControl)("matAutocomplete",p),i.BMQ("disabled",!!m.optionDisabled||null),i.R7$(),i.Y8G("displayWith",m.displayFn),i.R7$(2),i.Y8G("ngForOf",i.bMT(7,11,m.filteredOptions)),i.R7$(2),i.Y8G("ngIf",null==m.dataModelSelect?null:m.dataModelSelect.id)}},dependencies:[e.Sq,e.bT,u.me,u.BC,u.l_,E.$3,O.wT,E.pN,I.yw,L.An,j.fg,P._,e.Jj],encapsulation:2})}return _})()}}]);