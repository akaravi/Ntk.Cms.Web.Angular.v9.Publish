import{a as as}from"./chunk-QRZKKIFG.js";import{a as Ts,b as Is,c as Cs,d as As,e as ks,f as Ds,g as Ps,h as Ms,i as Ns,l as Ls}from"./chunk-GTXBIGCT.js";import{Eb as Rs,Gd as Os,Q as v,R as fe,U as Xi,V as Gn,Y as Xe,Z as Qn,_ as Nt,fb as cs,ga as Zi,gb as ls,la as rs,ma as is,nb as ys,qb as _s,sb as bs,tb as ws,ub as Ss,vb as vs,wb as Es}from"./chunk-LG46RZ3K.js";import{a as ss,b as Ot,d as os,e as Jn,m as Xn,n as dt,o as gs,p as Ft}from"./chunk-2SSUC34R.js";import{$c as Mt,A as Fn,D as Bn,Da as jn,E as Je,Ea as Hn,F as Ie,Fe as xt,Ge as $t,Ha as Mi,Ja as ht,La as Un,M as Oe,Ma as j,Mc as qn,Md as Lt,N as Ii,Qa as Ni,Qc as Wi,Qd as fs,S as Ci,Sa as Dt,Uc as Vi,Ud as ds,Wc as Ki,X as lt,Xc as qi,Yb as Li,Yc as Gi,Yd as ps,Yf as ms,Zb as xi,Zc as Qi,_ as Ai,_c as Yi,a as S,aa as I,ab as zn,ad as Ji,aq as P,b as le,c as Qe,ca as q,cb as ut,cd as es,d as Si,da as he,dc as Pt,dd as Yn,ea as ki,ec as Kn,ed as ts,fa as te,g as d,gc as $i,gd as ns,hd as Rt,i as xn,ja as Di,k as vi,ka as ue,kd as ft,l as ct,lb as Wn,mb as Vn,md as hs,na as Pi,nb as Le,qc as Fi,r as Ye,s as Ei,sc as Bi,sd as us,tc as ji,ub as Ri,v as be,vc as Hi,wb as Oi,x as Ti,xa as kt,xc as Ui,y as $n,zc as zi}from"./chunk-KKCXRFWS.js";var mt="Service workers are disabled or not supported by this browser";function Ra(n){return $n(()=>Ei(new Error(n)))}var Ze=class{constructor(e){if(this.serviceWorker=e,!e)this.worker=this.events=this.registration=Ra(mt);else{let r=Fn(e,"controllerchange").pipe(be(()=>e.controller)),i=$n(()=>Ye(e.controller)),s=Ti(i,r);this.worker=s.pipe(Ie(h=>!!h)),this.registration=this.worker.pipe(lt(()=>e.getRegistration()));let l=Fn(e,"message").pipe(be(h=>h.data)).pipe(Ie(h=>h&&h.type)).pipe(Ci());l.connect(),this.events=l}}postMessage(e,t){return this.worker.pipe(Oe(1),Ai(r=>{r.postMessage(S({action:e},t))})).toPromise().then(()=>{})}postMessageWithOperation(e,t,r){let i=this.waitForOperationCompleted(r),s=this.postMessage(e,t);return Promise.all([s,i]).then(([,o])=>o)}generateNonce(){return Math.round(Math.random()*1e7)}eventsOfType(e){let t;return typeof e=="string"?t=r=>r.type===e:t=r=>e.includes(r.type),this.events.pipe(Ie(t))}nextEventOfType(e){return this.eventsOfType(e).pipe(Oe(1))}waitForOperationCompleted(e){return this.eventsOfType("OPERATION_COMPLETED").pipe(Ie(t=>t.nonce===e),Oe(1),be(t=>{if(t.result!==void 0)return t.result;throw new Error(t.error)})).toPromise()}get isEnabled(){return!!this.serviceWorker}},Bt=(()=>{let e=class e{get isEnabled(){return this.sw.isEnabled}constructor(r){if(this.sw=r,this.pushManager=null,this.subscriptionChanges=new vi,!r.isEnabled){this.messages=Je,this.notificationClicks=Je,this.subscription=Je;return}this.messages=this.sw.eventsOfType("PUSH").pipe(be(s=>s.data)),this.notificationClicks=this.sw.eventsOfType("NOTIFICATION_CLICK").pipe(be(s=>s.data)),this.pushManager=this.sw.registration.pipe(be(s=>s.pushManager));let i=this.pushManager.pipe(lt(s=>s.getSubscription()));this.subscription=Bn(i,this.subscriptionChanges)}requestSubscription(r){if(!this.sw.isEnabled||this.pushManager===null)return Promise.reject(new Error(mt));let i={userVisibleOnly:!0},s=this.decodeBase64(r.serverPublicKey.replace(/_/g,"/").replace(/-/g,"+")),o=new Uint8Array(new ArrayBuffer(s.length));for(let a=0;a<s.length;a++)o[a]=s.charCodeAt(a);return i.applicationServerKey=o,this.pushManager.pipe(lt(a=>a.subscribe(i)),Oe(1)).toPromise().then(a=>(this.subscriptionChanges.next(a),a))}unsubscribe(){if(!this.sw.isEnabled)return Promise.reject(new Error(mt));let r=i=>{if(i===null)throw new Error("Not subscribed to push notifications.");return i.unsubscribe().then(s=>{if(!s)throw new Error("Unsubscribe failed!");this.subscriptionChanges.next(null)})};return this.subscription.pipe(Oe(1),lt(r)).toPromise()}decodeBase64(r){return atob(r)}};e.\u0275fac=function(i){return new(i||e)(te(Ze))},e.\u0275prov=q({token:e,factory:e.\u0275fac});let n=e;return n})(),Bs=(()=>{let e=class e{get isEnabled(){return this.sw.isEnabled}constructor(r){if(this.sw=r,!r.isEnabled){this.versionUpdates=Je,this.unrecoverable=Je;return}this.versionUpdates=this.sw.eventsOfType(["VERSION_DETECTED","VERSION_INSTALLATION_FAILED","VERSION_READY","NO_NEW_VERSION_DETECTED"]),this.unrecoverable=this.sw.eventsOfType("UNRECOVERABLE_STATE")}checkForUpdate(){if(!this.sw.isEnabled)return Promise.reject(new Error(mt));let r=this.sw.generateNonce();return this.sw.postMessageWithOperation("CHECK_FOR_UPDATES",{nonce:r},r)}activateUpdate(){if(!this.sw.isEnabled)return Promise.reject(new Error(mt));let r=this.sw.generateNonce();return this.sw.postMessageWithOperation("ACTIVATE_UPDATE",{nonce:r},r)}};e.\u0275fac=function(i){return new(i||e)(te(Ze))},e.\u0275prov=q({token:e,factory:e.\u0275fac});let n=e;return n})();var xs=new ki("");function Oa(n,e,t,r){return()=>{if(!(qn(r)&&"serviceWorker"in navigator&&t.enabled!==!1))return;let i=n.get(Dt),s=n.get(Kn);i.runOutsideAngular(()=>{let a=navigator.serviceWorker,c=()=>a.controller?.postMessage({action:"INITIALIZE"});a.addEventListener("controllerchange",c),s.onDestroy(()=>{a.removeEventListener("controllerchange",c)})});let o;if(typeof t.registrationStrategy=="function")o=t.registrationStrategy();else{let[a,...c]=(t.registrationStrategy||"registerWhenStable:30000").split(":");switch(a){case"registerImmediately":o=Ye(null);break;case"registerWithDelay":o=$s(+c[0]||0);break;case"registerWhenStable":o=c[0]?Bn(Fs(n),$s(+c[0])):Fs(n);break;default:throw new Error(`Unknown ServiceWorker registration strategy: ${t.registrationStrategy}`)}}i.runOutsideAngular(()=>o.pipe(Oe(1)).subscribe(()=>navigator.serviceWorker.register(e,{scope:t.scope}).catch(a=>console.error("Service worker registration failed with:",a))))}}function $s(n){return Ye(null).pipe(Ii(n))}function Fs(n){return n.get(Kn).isStable.pipe(Ie(t=>t))}function La(n,e){return new Ze(qn(e)&&n.enabled!==!1?navigator.serviceWorker:void 0)}var pt=class{};function xa(n,e={}){return Pi([Bt,Bs,{provide:xs,useValue:n},{provide:pt,useValue:e},{provide:Ze,useFactory:La,deps:[pt,jn]},{provide:Pt,useFactory:Oa,deps:[kt,xs,pt,jn],multi:!0}])}var js=(()=>{let e=class e{static register(r,i={}){return{ngModule:e,providers:[xa(r,i)]}}};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=ue({type:e}),e.\u0275inj=he({providers:[Bt,Bs]});let n=e;return n})();function Hs(n){return new I(3e3,!1)}function Fa(){return new I(3100,!1)}function Ba(){return new I(3101,!1)}function ja(n){return new I(3001,!1)}function Ha(n){return new I(3003,!1)}function Ua(n){return new I(3004,!1)}function za(n,e){return new I(3005,!1)}function Wa(){return new I(3006,!1)}function Va(){return new I(3007,!1)}function Ka(n,e){return new I(3008,!1)}function qa(n){return new I(3002,!1)}function Ga(n,e,t,r,i){return new I(3010,!1)}function Qa(){return new I(3011,!1)}function Ya(){return new I(3012,!1)}function Ja(){return new I(3200,!1)}function Xa(){return new I(3202,!1)}function Za(){return new I(3013,!1)}function ec(n){return new I(3014,!1)}function tc(n){return new I(3015,!1)}function nc(n){return new I(3016,!1)}function rc(n,e){return new I(3404,!1)}function ic(n){return new I(3502,!1)}function sc(n){return new I(3503,!1)}function oc(){return new I(3300,!1)}function ac(n){return new I(3504,!1)}function cc(n){return new I(3301,!1)}function lc(n,e){return new I(3302,!1)}function hc(n){return new I(3303,!1)}function uc(n,e){return new I(3400,!1)}function fc(n){return new I(3401,!1)}function dc(n){return new I(3402,!1)}function pc(n,e){return new I(3505,!1)}function Ce(n){switch(n.length){case 0:return new Xe;case 1:return n[0];default:return new Qn(n)}}function to(n,e,t=new Map,r=new Map){let i=[],s=[],o=-1,a=null;if(e.forEach(c=>{let l=c.get("offset"),h=l==o,f=h&&a||new Map;c.forEach((p,m)=>{let y=m,w=p;if(m!=="offset")switch(y=n.normalizePropertyName(y,i),w){case Nt:w=t.get(m);break;case fe:w=r.get(m);break;default:w=n.normalizeStyleValue(m,y,w,i);break}f.set(y,w)}),h||s.push(f),a=f,o=l}),i.length)throw ic(i);return s}function Sr(n,e,t,r){switch(e){case"start":n.onStart(()=>r(t&&Zn(t,"start",n)));break;case"done":n.onDone(()=>r(t&&Zn(t,"done",n)));break;case"destroy":n.onDestroy(()=>r(t&&Zn(t,"destroy",n)));break}}function Zn(n,e,t){let r=t.totalTime,i=!!t.disabled,s=vr(n.element,n.triggerName,n.fromState,n.toState,e||n.phaseName,r??n.totalTime,i),o=n._data;return o!=null&&(s._data=o),s}function vr(n,e,t,r,i="",s=0,o){return{element:n,triggerName:e,fromState:t,toState:r,phaseName:i,totalTime:s,disabled:!!o}}function Q(n,e,t){let r=n.get(e);return r||n.set(e,r=t),r}function Us(n){let e=n.indexOf(":"),t=n.substring(1,e),r=n.slice(e+1);return[t,r]}var mc=typeof document>"u"?null:document.documentElement;function Er(n){let e=n.parentNode||n.host||null;return e===mc?null:e}function gc(n){return n.substring(1,6)=="ebkit"}var xe=null,zs=!1;function yc(n){xe||(xe=_c()||{},zs=xe.style?"WebkitAppearance"in xe.style:!1);let e=!0;return xe.style&&!gc(n)&&(e=n in xe.style,!e&&zs&&(e="Webkit"+n.charAt(0).toUpperCase()+n.slice(1)in xe.style)),e}function _c(){return typeof document<"u"?document.body:null}function no(n,e){for(;e;){if(e===n)return!0;e=Er(e)}return!1}function ro(n,e,t){if(t)return Array.from(n.querySelectorAll(e));let r=n.querySelector(e);return r?[r]:[]}var Tr=(()=>{let e=class e{validateStyleProperty(r){return yc(r)}containsElement(r,i){return no(r,i)}getParentElement(r){return Er(r)}query(r,i,s){return ro(r,i,s)}computeStyle(r,i,s){return s||""}animate(r,i,s,o,a,c=[],l){return new Xe(s,o)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=q({token:e,factory:e.\u0275fac});let n=e;return n})(),kr=class kr{};kr.NOOP=new Tr;var Be=kr,je=class{};var bc=1e3,io="{{",wc="}}",so="ng-enter",sr="ng-leave",jt="ng-trigger",Vt=".ng-trigger",Ws="ng-animating",or=".ng-animating";function Se(n){if(typeof n=="number")return n;let e=n.match(/^(-?[\.\d]+)(m?s)/);return!e||e.length<2?0:ar(parseFloat(e[1]),e[2])}function ar(n,e){switch(e){case"s":return n*bc;default:return n}}function Kt(n,e,t){return n.hasOwnProperty("duration")?n:Sc(n,e,t)}function Sc(n,e,t){let r=/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i,i,s=0,o="";if(typeof n=="string"){let a=n.match(r);if(a===null)return e.push(Hs(n)),{duration:0,delay:0,easing:""};i=ar(parseFloat(a[1]),a[2]);let c=a[3];c!=null&&(s=ar(parseFloat(c),a[4]));let l=a[5];l&&(o=l)}else i=n;if(!t){let a=!1,c=e.length;i<0&&(e.push(Fa()),a=!0),s<0&&(e.push(Ba()),a=!0),a&&e.splice(c,0,Hs(n))}return{duration:i,delay:s,easing:o}}function vc(n){return n.length?n[0]instanceof Map?n:n.map(e=>new Map(Object.entries(e))):[]}function de(n,e,t){e.forEach((r,i)=>{let s=Ir(i);t&&!t.has(i)&&t.set(i,n.style[s]),n.style[s]=r})}function Fe(n,e){e.forEach((t,r)=>{let i=Ir(r);n.style[i]=""})}function gt(n){return Array.isArray(n)?n.length==1?n[0]:Xi(n):n}function Ec(n,e,t){let r=e.params||{},i=oo(n);i.length&&i.forEach(s=>{r.hasOwnProperty(s)||t.push(ja(s))})}var cr=new RegExp(`${io}\\s*(.+?)\\s*${wc}`,"g");function oo(n){let e=[];if(typeof n=="string"){let t;for(;t=cr.exec(n);)e.push(t[1]);cr.lastIndex=0}return e}function _t(n,e,t){let r=`${n}`,i=r.replace(cr,(s,o)=>{let a=e[o];return a==null&&(t.push(Ha(o)),a=""),a.toString()});return i==r?n:i}var Tc=/-+([a-z0-9])/g;function Ir(n){return n.replace(Tc,(...e)=>e[1].toUpperCase())}function Ic(n,e){return n===0||e===0}function Cc(n,e,t){if(t.size&&e.length){let r=e[0],i=[];if(t.forEach((s,o)=>{r.has(o)||i.push(o),r.set(o,s)}),i.length)for(let s=1;s<e.length;s++){let o=e[s];i.forEach(a=>o.set(a,Cr(n,a)))}}return e}function G(n,e,t){switch(e.type){case v.Trigger:return n.visitTrigger(e,t);case v.State:return n.visitState(e,t);case v.Transition:return n.visitTransition(e,t);case v.Sequence:return n.visitSequence(e,t);case v.Group:return n.visitGroup(e,t);case v.Animate:return n.visitAnimate(e,t);case v.Keyframes:return n.visitKeyframes(e,t);case v.Style:return n.visitStyle(e,t);case v.Reference:return n.visitReference(e,t);case v.AnimateChild:return n.visitAnimateChild(e,t);case v.AnimateRef:return n.visitAnimateRef(e,t);case v.Query:return n.visitQuery(e,t);case v.Stagger:return n.visitStagger(e,t);default:throw Ua(e.type)}}function Cr(n,e){return window.getComputedStyle(n)[e]}var Ac=new Set(["width","height","minWidth","minHeight","maxWidth","maxHeight","left","top","bottom","right","fontSize","outlineWidth","outlineOffset","paddingTop","paddingLeft","paddingBottom","paddingRight","marginTop","marginLeft","marginBottom","marginRight","borderRadius","borderWidth","borderTopWidth","borderLeftWidth","borderRightWidth","borderBottomWidth","textIndent","perspective"]),qt=class extends je{normalizePropertyName(e,t){return Ir(e)}normalizeStyleValue(e,t,r,i){let s="",o=r.toString().trim();if(Ac.has(t)&&r!==0&&r!=="0")if(typeof r=="number")s="px";else{let a=r.match(/^[+-]?[\d\.]+([a-z]*)$/);a&&a[1].length==0&&i.push(za(e,r))}return o+s}};var Gt="*";function kc(n,e){let t=[];return typeof n=="string"?n.split(/\s*,\s*/).forEach(r=>Dc(r,t,e)):t.push(n),t}function Dc(n,e,t){if(n[0]==":"){let c=Pc(n,t);if(typeof c=="function"){e.push(c);return}n=c}let r=n.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(r==null||r.length<4)return t.push(tc(n)),e;let i=r[1],s=r[2],o=r[3];e.push(Vs(i,o));let a=i==Gt&&o==Gt;s[0]=="<"&&!a&&e.push(Vs(o,i))}function Pc(n,e){switch(n){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(t,r)=>parseFloat(r)>parseFloat(t);case":decrement":return(t,r)=>parseFloat(r)<parseFloat(t);default:return e.push(nc(n)),"* => *"}}var Ht=new Set(["true","1"]),Ut=new Set(["false","0"]);function Vs(n,e){let t=Ht.has(n)||Ut.has(n),r=Ht.has(e)||Ut.has(e);return(i,s)=>{let o=n==Gt||n==i,a=e==Gt||e==s;return!o&&t&&typeof i=="boolean"&&(o=i?Ht.has(n):Ut.has(n)),!a&&r&&typeof s=="boolean"&&(a=s?Ht.has(e):Ut.has(e)),o&&a}}var ao=":self",Mc=new RegExp(`s*${ao}s*,?`,"g");function co(n,e,t,r){return new lr(n).build(e,t,r)}var Ks="",lr=class{constructor(e){this._driver=e}build(e,t,r){let i=new hr(t);return this._resetContextStyleTimingState(i),G(this,gt(e),i)}_resetContextStyleTimingState(e){e.currentQuerySelector=Ks,e.collectedStyles=new Map,e.collectedStyles.set(Ks,new Map),e.currentTime=0}visitTrigger(e,t){let r=t.queryCount=0,i=t.depCount=0,s=[],o=[];return e.name.charAt(0)=="@"&&t.errors.push(Wa()),e.definitions.forEach(a=>{if(this._resetContextStyleTimingState(t),a.type==v.State){let c=a,l=c.name;l.toString().split(/\s*,\s*/).forEach(h=>{c.name=h,s.push(this.visitState(c,t))}),c.name=l}else if(a.type==v.Transition){let c=this.visitTransition(a,t);r+=c.queryCount,i+=c.depCount,o.push(c)}else t.errors.push(Va())}),{type:v.Trigger,name:e.name,states:s,transitions:o,queryCount:r,depCount:i,options:null}}visitState(e,t){let r=this.visitStyle(e.styles,t),i=e.options&&e.options.params||null;if(r.containsDynamicStyles){let s=new Set,o=i||{};r.styles.forEach(a=>{a instanceof Map&&a.forEach(c=>{oo(c).forEach(l=>{o.hasOwnProperty(l)||s.add(l)})})}),s.size&&t.errors.push(Ka(e.name,[...s.values()]))}return{type:v.State,name:e.name,style:r,options:i?{params:i}:null}}visitTransition(e,t){t.queryCount=0,t.depCount=0;let r=G(this,gt(e.animation),t),i=kc(e.expr,t.errors);return{type:v.Transition,matchers:i,animation:r,queryCount:t.queryCount,depCount:t.depCount,options:$e(e.options)}}visitSequence(e,t){return{type:v.Sequence,steps:e.steps.map(r=>G(this,r,t)),options:$e(e.options)}}visitGroup(e,t){let r=t.currentTime,i=0,s=e.steps.map(o=>{t.currentTime=r;let a=G(this,o,t);return i=Math.max(i,t.currentTime),a});return t.currentTime=i,{type:v.Group,steps:s,options:$e(e.options)}}visitAnimate(e,t){let r=Lc(e.timings,t.errors);t.currentAnimateTimings=r;let i,s=e.styles?e.styles:Gn({});if(s.type==v.Keyframes)i=this.visitKeyframes(s,t);else{let o=e.styles,a=!1;if(!o){a=!0;let l={};r.easing&&(l.easing=r.easing),o=Gn(l)}t.currentTime+=r.duration+r.delay;let c=this.visitStyle(o,t);c.isEmptyStep=a,i=c}return t.currentAnimateTimings=null,{type:v.Animate,timings:r,style:i,options:null}}visitStyle(e,t){let r=this._makeStyleAst(e,t);return this._validateStyleAst(r,t),r}_makeStyleAst(e,t){let r=[],i=Array.isArray(e.styles)?e.styles:[e.styles];for(let a of i)typeof a=="string"?a===fe?r.push(a):t.errors.push(qa(a)):r.push(new Map(Object.entries(a)));let s=!1,o=null;return r.forEach(a=>{if(a instanceof Map&&(a.has("easing")&&(o=a.get("easing"),a.delete("easing")),!s)){for(let c of a.values())if(c.toString().indexOf(io)>=0){s=!0;break}}}),{type:v.Style,styles:r,easing:o,offset:e.offset,containsDynamicStyles:s,options:null}}_validateStyleAst(e,t){let r=t.currentAnimateTimings,i=t.currentTime,s=t.currentTime;r&&s>0&&(s-=r.duration+r.delay),e.styles.forEach(o=>{typeof o!="string"&&o.forEach((a,c)=>{let l=t.collectedStyles.get(t.currentQuerySelector),h=l.get(c),f=!0;h&&(s!=i&&s>=h.startTime&&i<=h.endTime&&(t.errors.push(Ga(c,h.startTime,h.endTime,s,i)),f=!1),s=h.startTime),f&&l.set(c,{startTime:s,endTime:i}),t.options&&Ec(a,t.options,t.errors)})})}visitKeyframes(e,t){let r={type:v.Keyframes,styles:[],options:null};if(!t.currentAnimateTimings)return t.errors.push(Qa()),r;let i=1,s=0,o=[],a=!1,c=!1,l=0,h=e.steps.map(O=>{let $=this._makeStyleAst(O,t),F=$.offset!=null?$.offset:Oc($.styles),E=0;return F!=null&&(s++,E=$.offset=F),c=c||E<0||E>1,a=a||E<l,l=E,o.push(E),$});c&&t.errors.push(Ya()),a&&t.errors.push(Ja());let f=e.steps.length,p=0;s>0&&s<f?t.errors.push(Xa()):s==0&&(p=i/(f-1));let m=f-1,y=t.currentTime,w=t.currentAnimateTimings,A=w.duration;return h.forEach((O,$)=>{let F=p>0?$==m?1:p*$:o[$],E=F*A;t.currentTime=y+w.delay+E,w.duration=E,this._validateStyleAst(O,t),O.offset=F,r.styles.push(O)}),r}visitReference(e,t){return{type:v.Reference,animation:G(this,gt(e.animation),t),options:$e(e.options)}}visitAnimateChild(e,t){return t.depCount++,{type:v.AnimateChild,options:$e(e.options)}}visitAnimateRef(e,t){return{type:v.AnimateRef,animation:this.visitReference(e.animation,t),options:$e(e.options)}}visitQuery(e,t){let r=t.currentQuerySelector,i=e.options||{};t.queryCount++,t.currentQuery=e;let[s,o]=Nc(e.selector);t.currentQuerySelector=r.length?r+" "+s:s,Q(t.collectedStyles,t.currentQuerySelector,new Map);let a=G(this,gt(e.animation),t);return t.currentQuery=null,t.currentQuerySelector=r,{type:v.Query,selector:s,limit:i.limit||0,optional:!!i.optional,includeSelf:o,animation:a,originalSelector:e.selector,options:$e(e.options)}}visitStagger(e,t){t.currentQuery||t.errors.push(Za());let r=e.timings==="full"?{duration:0,delay:0,easing:"full"}:Kt(e.timings,t.errors,!0);return{type:v.Stagger,animation:G(this,gt(e.animation),t),timings:r,options:null}}};function Nc(n){let e=!!n.split(/\s*,\s*/).find(t=>t==ao);return e&&(n=n.replace(Mc,"")),n=n.replace(/@\*/g,Vt).replace(/@\w+/g,t=>Vt+"-"+t.slice(1)).replace(/:animating/g,or),[n,e]}function Rc(n){return n?S({},n):null}var hr=class{constructor(e){this.errors=e,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles=new Map,this.options=null,this.unsupportedCSSPropertiesFound=new Set}};function Oc(n){if(typeof n=="string")return null;let e=null;if(Array.isArray(n))n.forEach(t=>{if(t instanceof Map&&t.has("offset")){let r=t;e=parseFloat(r.get("offset")),r.delete("offset")}});else if(n instanceof Map&&n.has("offset")){let t=n;e=parseFloat(t.get("offset")),t.delete("offset")}return e}function Lc(n,e){if(n.hasOwnProperty("duration"))return n;if(typeof n=="number"){let s=Kt(n,e).duration;return er(s,0,"")}let t=n;if(t.split(/\s+/).some(s=>s.charAt(0)=="{"&&s.charAt(1)=="{")){let s=er(0,0,"");return s.dynamic=!0,s.strValue=t,s}let i=Kt(t,e);return er(i.duration,i.delay,i.easing)}function $e(n){return n?(n=S({},n),n.params&&(n.params=Rc(n.params))):n={},n}function er(n,e,t){return{duration:n,delay:e,easing:t}}function Ar(n,e,t,r,i,s,o=null,a=!1){return{type:1,element:n,keyframes:e,preStyleProps:t,postStyleProps:r,duration:i,delay:s,totalTime:i+s,easing:o,subTimeline:a}}var bt=class{constructor(){this._map=new Map}get(e){return this._map.get(e)||[]}append(e,t){let r=this._map.get(e);r||this._map.set(e,r=[]),r.push(...t)}has(e){return this._map.has(e)}clear(){this._map.clear()}},xc=1,$c=":enter",Fc=new RegExp($c,"g"),Bc=":leave",jc=new RegExp(Bc,"g");function lo(n,e,t,r,i,s=new Map,o=new Map,a,c,l=[]){return new ur().buildKeyframes(n,e,t,r,i,s,o,a,c,l)}var ur=class{buildKeyframes(e,t,r,i,s,o,a,c,l,h=[]){l=l||new bt;let f=new fr(e,t,l,i,s,h,[]);f.options=c;let p=c.delay?Se(c.delay):0;f.currentTimeline.delayNextStep(p),f.currentTimeline.setStyles([o],null,f.errors,c),G(this,r,f);let m=f.timelines.filter(y=>y.containsAnimation());if(m.length&&a.size){let y;for(let w=m.length-1;w>=0;w--){let A=m[w];if(A.element===t){y=A;break}}y&&!y.allowOnlyTimelineStyles()&&y.setStyles([a],null,f.errors,c)}return m.length?m.map(y=>y.buildKeyframes()):[Ar(t,[],[],[],0,p,"",!1)]}visitTrigger(e,t){}visitState(e,t){}visitTransition(e,t){}visitAnimateChild(e,t){let r=t.subInstructions.get(t.element);if(r){let i=t.createSubContext(e.options),s=t.currentTimeline.currentTime,o=this._visitSubInstructions(r,i,i.options);s!=o&&t.transformIntoNewTimeline(o)}t.previousNode=e}visitAnimateRef(e,t){let r=t.createSubContext(e.options);r.transformIntoNewTimeline(),this._applyAnimationRefDelays([e.options,e.animation.options],t,r),this.visitReference(e.animation,r),t.transformIntoNewTimeline(r.currentTimeline.currentTime),t.previousNode=e}_applyAnimationRefDelays(e,t,r){for(let i of e){let s=i?.delay;if(s){let o=typeof s=="number"?s:Se(_t(s,i?.params??{},t.errors));r.delayNextStep(o)}}}_visitSubInstructions(e,t,r){let s=t.currentTimeline.currentTime,o=r.duration!=null?Se(r.duration):null,a=r.delay!=null?Se(r.delay):null;return o!==0&&e.forEach(c=>{let l=t.appendInstructionToTimeline(c,o,a);s=Math.max(s,l.duration+l.delay)}),s}visitReference(e,t){t.updateOptions(e.options,!0),G(this,e.animation,t),t.previousNode=e}visitSequence(e,t){let r=t.subContextCount,i=t,s=e.options;if(s&&(s.params||s.delay)&&(i=t.createSubContext(s),i.transformIntoNewTimeline(),s.delay!=null)){i.previousNode.type==v.Style&&(i.currentTimeline.snapshotCurrentStyles(),i.previousNode=Qt);let o=Se(s.delay);i.delayNextStep(o)}e.steps.length&&(e.steps.forEach(o=>G(this,o,i)),i.currentTimeline.applyStylesToKeyframe(),i.subContextCount>r&&i.transformIntoNewTimeline()),t.previousNode=e}visitGroup(e,t){let r=[],i=t.currentTimeline.currentTime,s=e.options&&e.options.delay?Se(e.options.delay):0;e.steps.forEach(o=>{let a=t.createSubContext(e.options);s&&a.delayNextStep(s),G(this,o,a),i=Math.max(i,a.currentTimeline.currentTime),r.push(a.currentTimeline)}),r.forEach(o=>t.currentTimeline.mergeTimelineCollectedStyles(o)),t.transformIntoNewTimeline(i),t.previousNode=e}_visitTiming(e,t){if(e.dynamic){let r=e.strValue,i=t.params?_t(r,t.params,t.errors):r;return Kt(i,t.errors)}else return{duration:e.duration,delay:e.delay,easing:e.easing}}visitAnimate(e,t){let r=t.currentAnimateTimings=this._visitTiming(e.timings,t),i=t.currentTimeline;r.delay&&(t.incrementTime(r.delay),i.snapshotCurrentStyles());let s=e.style;s.type==v.Keyframes?this.visitKeyframes(s,t):(t.incrementTime(r.duration),this.visitStyle(s,t),i.applyStylesToKeyframe()),t.currentAnimateTimings=null,t.previousNode=e}visitStyle(e,t){let r=t.currentTimeline,i=t.currentAnimateTimings;!i&&r.hasCurrentStyleProperties()&&r.forwardFrame();let s=i&&i.easing||e.easing;e.isEmptyStep?r.applyEmptyStep(s):r.setStyles(e.styles,s,t.errors,t.options),t.previousNode=e}visitKeyframes(e,t){let r=t.currentAnimateTimings,i=t.currentTimeline.duration,s=r.duration,a=t.createSubContext().currentTimeline;a.easing=r.easing,e.styles.forEach(c=>{let l=c.offset||0;a.forwardTime(l*s),a.setStyles(c.styles,c.easing,t.errors,t.options),a.applyStylesToKeyframe()}),t.currentTimeline.mergeTimelineCollectedStyles(a),t.transformIntoNewTimeline(i+s),t.previousNode=e}visitQuery(e,t){let r=t.currentTimeline.currentTime,i=e.options||{},s=i.delay?Se(i.delay):0;s&&(t.previousNode.type===v.Style||r==0&&t.currentTimeline.hasCurrentStyleProperties())&&(t.currentTimeline.snapshotCurrentStyles(),t.previousNode=Qt);let o=r,a=t.invokeQuery(e.selector,e.originalSelector,e.limit,e.includeSelf,!!i.optional,t.errors);t.currentQueryTotal=a.length;let c=null;a.forEach((l,h)=>{t.currentQueryIndex=h;let f=t.createSubContext(e.options,l);s&&f.delayNextStep(s),l===t.element&&(c=f.currentTimeline),G(this,e.animation,f),f.currentTimeline.applyStylesToKeyframe();let p=f.currentTimeline.currentTime;o=Math.max(o,p)}),t.currentQueryIndex=0,t.currentQueryTotal=0,t.transformIntoNewTimeline(o),c&&(t.currentTimeline.mergeTimelineCollectedStyles(c),t.currentTimeline.snapshotCurrentStyles()),t.previousNode=e}visitStagger(e,t){let r=t.parentContext,i=t.currentTimeline,s=e.timings,o=Math.abs(s.duration),a=o*(t.currentQueryTotal-1),c=o*t.currentQueryIndex;switch(s.duration<0?"reverse":s.easing){case"reverse":c=a-c;break;case"full":c=r.currentStaggerTime;break}let h=t.currentTimeline;c&&h.delayNextStep(c);let f=h.currentTime;G(this,e.animation,t),t.previousNode=e,r.currentStaggerTime=i.currentTime-f+(i.startTime-r.currentTimeline.startTime)}},Qt={},fr=class n{constructor(e,t,r,i,s,o,a,c){this._driver=e,this.element=t,this.subInstructions=r,this._enterClassName=i,this._leaveClassName=s,this.errors=o,this.timelines=a,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=Qt,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=c||new Yt(this._driver,t,0),a.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(e,t){if(!e)return;let r=e,i=this.options;r.duration!=null&&(i.duration=Se(r.duration)),r.delay!=null&&(i.delay=Se(r.delay));let s=r.params;if(s){let o=i.params;o||(o=this.options.params={}),Object.keys(s).forEach(a=>{(!t||!o.hasOwnProperty(a))&&(o[a]=_t(s[a],o,this.errors))})}}_copyOptions(){let e={};if(this.options){let t=this.options.params;if(t){let r=e.params={};Object.keys(t).forEach(i=>{r[i]=t[i]})}}return e}createSubContext(e=null,t,r){let i=t||this.element,s=new n(this._driver,i,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(i,r||0));return s.previousNode=this.previousNode,s.currentAnimateTimings=this.currentAnimateTimings,s.options=this._copyOptions(),s.updateOptions(e),s.currentQueryIndex=this.currentQueryIndex,s.currentQueryTotal=this.currentQueryTotal,s.parentContext=this,this.subContextCount++,s}transformIntoNewTimeline(e){return this.previousNode=Qt,this.currentTimeline=this.currentTimeline.fork(this.element,e),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(e,t,r){let i={duration:t??e.duration,delay:this.currentTimeline.currentTime+(r??0)+e.delay,easing:""},s=new dr(this._driver,e.element,e.keyframes,e.preStyleProps,e.postStyleProps,i,e.stretchStartingKeyframe);return this.timelines.push(s),i}incrementTime(e){this.currentTimeline.forwardTime(this.currentTimeline.duration+e)}delayNextStep(e){e>0&&this.currentTimeline.delayNextStep(e)}invokeQuery(e,t,r,i,s,o){let a=[];if(i&&a.push(this.element),e.length>0){e=e.replace(Fc,"."+this._enterClassName),e=e.replace(jc,"."+this._leaveClassName);let c=r!=1,l=this._driver.query(this.element,e,c);r!==0&&(l=r<0?l.slice(l.length+r,l.length):l.slice(0,r)),a.push(...l)}return!s&&a.length==0&&o.push(ec(t)),a}},Yt=class n{constructor(e,t,r,i){this._driver=e,this.element=t,this.startTime=r,this._elementTimelineStylesLookup=i,this.duration=0,this.easing=null,this._previousKeyframe=new Map,this._currentKeyframe=new Map,this._keyframes=new Map,this._styleSummary=new Map,this._localTimelineStyles=new Map,this._pendingStyles=new Map,this._backFill=new Map,this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(t),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(t,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.hasCurrentStyleProperties();default:return!0}}hasCurrentStyleProperties(){return this._currentKeyframe.size>0}get currentTime(){return this.startTime+this.duration}delayNextStep(e){let t=this._keyframes.size===1&&this._pendingStyles.size;this.duration||t?(this.forwardTime(this.currentTime+e),t&&this.snapshotCurrentStyles()):this.startTime+=e}fork(e,t){return this.applyStylesToKeyframe(),new n(this._driver,e,t||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=new Map,this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=xc,this._loadKeyframe()}forwardTime(e){this.applyStylesToKeyframe(),this.duration=e,this._loadKeyframe()}_updateStyle(e,t){this._localTimelineStyles.set(e,t),this._globalTimelineStyles.set(e,t),this._styleSummary.set(e,{time:this.currentTime,value:t})}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(e){e&&this._previousKeyframe.set("easing",e);for(let[t,r]of this._globalTimelineStyles)this._backFill.set(t,r||fe),this._currentKeyframe.set(t,fe);this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(e,t,r,i){t&&this._previousKeyframe.set("easing",t);let s=i&&i.params||{},o=Hc(e,this._globalTimelineStyles);for(let[a,c]of o){let l=_t(c,s,r);this._pendingStyles.set(a,l),this._localTimelineStyles.has(a)||this._backFill.set(a,this._globalTimelineStyles.get(a)??fe),this._updateStyle(a,l)}}applyStylesToKeyframe(){this._pendingStyles.size!=0&&(this._pendingStyles.forEach((e,t)=>{this._currentKeyframe.set(t,e)}),this._pendingStyles.clear(),this._localTimelineStyles.forEach((e,t)=>{this._currentKeyframe.has(t)||this._currentKeyframe.set(t,e)}))}snapshotCurrentStyles(){for(let[e,t]of this._localTimelineStyles)this._pendingStyles.set(e,t),this._updateStyle(e,t)}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){let e=[];for(let t in this._currentKeyframe)e.push(t);return e}mergeTimelineCollectedStyles(e){e._styleSummary.forEach((t,r)=>{let i=this._styleSummary.get(r);(!i||t.time>i.time)&&this._updateStyle(r,t.value)})}buildKeyframes(){this.applyStylesToKeyframe();let e=new Set,t=new Set,r=this._keyframes.size===1&&this.duration===0,i=[];this._keyframes.forEach((a,c)=>{let l=new Map([...this._backFill,...a]);l.forEach((h,f)=>{h===Nt?e.add(f):h===fe&&t.add(f)}),r||l.set("offset",c/this.duration),i.push(l)});let s=[...e.values()],o=[...t.values()];if(r){let a=i[0],c=new Map(a);a.set("offset",0),c.set("offset",1),i=[a,c]}return Ar(this.element,i,s,o,this.duration,this.startTime,this.easing,!1)}},dr=class extends Yt{constructor(e,t,r,i,s,o,a=!1){super(e,t,o.delay),this.keyframes=r,this.preStyleProps=i,this.postStyleProps=s,this._stretchStartingKeyframe=a,this.timings={duration:o.duration,delay:o.delay,easing:o.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let e=this.keyframes,{delay:t,duration:r,easing:i}=this.timings;if(this._stretchStartingKeyframe&&t){let s=[],o=r+t,a=t/o,c=new Map(e[0]);c.set("offset",0),s.push(c);let l=new Map(e[0]);l.set("offset",qs(a)),s.push(l);let h=e.length-1;for(let f=1;f<=h;f++){let p=new Map(e[f]),m=p.get("offset"),y=t+m*r;p.set("offset",qs(y/o)),s.push(p)}r=o,t=0,i="",e=s}return Ar(this.element,e,this.preStyleProps,this.postStyleProps,r,t,i,!0)}};function qs(n,e=3){let t=Math.pow(10,e-1);return Math.round(n*t)/t}function Hc(n,e){let t=new Map,r;return n.forEach(i=>{if(i==="*"){r??=e.keys();for(let s of r)t.set(s,fe)}else for(let[s,o]of i)t.set(s,o)}),t}function Gs(n,e,t,r,i,s,o,a,c,l,h,f,p){return{type:0,element:n,triggerName:e,isRemovalTransition:i,fromState:t,fromStyles:s,toState:r,toStyles:o,timelines:a,queriedElements:c,preStyleProps:l,postStyleProps:h,totalTime:f,errors:p}}var tr={},Jt=class{constructor(e,t,r){this._triggerName=e,this.ast=t,this._stateStyles=r}match(e,t,r,i){return Uc(this.ast.matchers,e,t,r,i)}buildStyles(e,t,r){let i=this._stateStyles.get("*");return e!==void 0&&(i=this._stateStyles.get(e?.toString())||i),i?i.buildStyles(t,r):new Map}build(e,t,r,i,s,o,a,c,l,h){let f=[],p=this.ast.options&&this.ast.options.params||tr,m=a&&a.params||tr,y=this.buildStyles(r,m,f),w=c&&c.params||tr,A=this.buildStyles(i,w,f),O=new Set,$=new Map,F=new Map,E=i==="void",Z={params:ho(w,p),delay:this.ast.options?.delay},ae=h?[]:lo(e,t,this.ast.animation,s,o,y,A,Z,l,f),z=0;return ae.forEach(W=>{z=Math.max(W.duration+W.delay,z)}),f.length?Gs(t,this._triggerName,r,i,E,y,A,[],[],$,F,z,f):(ae.forEach(W=>{let Me=W.element,Ge=Q($,Me,new Set);W.preStyleProps.forEach(Ne=>Ge.add(Ne));let yi=Q(F,Me,new Set);W.postStyleProps.forEach(Ne=>yi.add(Ne)),Me!==t&&O.add(Me)}),Gs(t,this._triggerName,r,i,E,y,A,ae,[...O.values()],$,F,z))}};function Uc(n,e,t,r,i){return n.some(s=>s(e,t,r,i))}function ho(n,e){let t=S({},e);return Object.entries(n).forEach(([r,i])=>{i!=null&&(t[r]=i)}),t}var pr=class{constructor(e,t,r){this.styles=e,this.defaultParams=t,this.normalizer=r}buildStyles(e,t){let r=new Map,i=ho(e,this.defaultParams);return this.styles.styles.forEach(s=>{typeof s!="string"&&s.forEach((o,a)=>{o&&(o=_t(o,i,t));let c=this.normalizer.normalizePropertyName(a,t);o=this.normalizer.normalizeStyleValue(a,c,o,t),r.set(a,o)})}),r}};function zc(n,e,t){return new mr(n,e,t)}var mr=class{constructor(e,t,r){this.name=e,this.ast=t,this._normalizer=r,this.transitionFactories=[],this.states=new Map,t.states.forEach(i=>{let s=i.options&&i.options.params||{};this.states.set(i.name,new pr(i.style,s,r))}),Qs(this.states,"true","1"),Qs(this.states,"false","0"),t.transitions.forEach(i=>{this.transitionFactories.push(new Jt(e,i,this.states))}),this.fallbackTransition=Wc(e,this.states,this._normalizer)}get containsQueries(){return this.ast.queryCount>0}matchTransition(e,t,r,i){return this.transitionFactories.find(o=>o.match(e,t,r,i))||null}matchStyles(e,t,r){return this.fallbackTransition.buildStyles(e,t,r)}};function Wc(n,e,t){let r=[(o,a)=>!0],i={type:v.Sequence,steps:[],options:null},s={type:v.Transition,animation:i,matchers:r,options:null,queryCount:0,depCount:0};return new Jt(n,s,e)}function Qs(n,e,t){n.has(e)?n.has(t)||n.set(t,n.get(e)):n.has(t)&&n.set(e,n.get(t))}var Vc=new bt,gr=class{constructor(e,t,r){this.bodyNode=e,this._driver=t,this._normalizer=r,this._animations=new Map,this._playersById=new Map,this.players=[]}register(e,t){let r=[],i=[],s=co(this._driver,t,r,i);if(r.length)throw sc(r);i.length&&void 0,this._animations.set(e,s)}_buildPlayer(e,t,r){let i=e.element,s=to(this._normalizer,e.keyframes,t,r);return this._driver.animate(i,s,e.duration,e.delay,e.easing,[],!0)}create(e,t,r={}){let i=[],s=this._animations.get(e),o,a=new Map;if(s?(o=lo(this._driver,t,s,so,sr,new Map,new Map,r,Vc,i),o.forEach(h=>{let f=Q(a,h.element,new Map);h.postStyleProps.forEach(p=>f.set(p,null))})):(i.push(oc()),o=[]),i.length)throw ac(i);a.forEach((h,f)=>{h.forEach((p,m)=>{h.set(m,this._driver.computeStyle(f,m,fe))})});let c=o.map(h=>{let f=a.get(h.element);return this._buildPlayer(h,new Map,f)}),l=Ce(c);return this._playersById.set(e,l),l.onDestroy(()=>this.destroy(e)),this.players.push(l),l}destroy(e){let t=this._getPlayer(e);t.destroy(),this._playersById.delete(e);let r=this.players.indexOf(t);r>=0&&this.players.splice(r,1)}_getPlayer(e){let t=this._playersById.get(e);if(!t)throw cc(e);return t}listen(e,t,r,i){let s=vr(t,"","","");return Sr(this._getPlayer(e),r,s,i),()=>{}}command(e,t,r,i){if(r=="register"){this.register(e,i[0]);return}if(r=="create"){let o=i[0]||{};this.create(e,t,o);return}let s=this._getPlayer(e);switch(r){case"play":s.play();break;case"pause":s.pause();break;case"reset":s.reset();break;case"restart":s.restart();break;case"finish":s.finish();break;case"init":s.init();break;case"setPosition":s.setPosition(parseFloat(i[0]));break;case"destroy":this.destroy(e);break}}},Ys="ng-animate-queued",Kc=".ng-animate-queued",nr="ng-animate-disabled",qc=".ng-animate-disabled",Gc="ng-star-inserted",Qc=".ng-star-inserted",Yc=[],uo={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},Jc={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},ie="__ng_removed",wt=class{get params(){return this.options.params}constructor(e,t=""){this.namespaceId=t;let r=e&&e.hasOwnProperty("value"),i=r?e.value:e;if(this.value=Zc(i),r){let s=e,{value:o}=s,a=Si(s,["value"]);this.options=a}else this.options={};this.options.params||(this.options.params={})}absorbOptions(e){let t=e.params;if(t){let r=this.options.params;Object.keys(t).forEach(i=>{r[i]==null&&(r[i]=t[i])})}}},yt="void",rr=new wt(yt),yr=class{constructor(e,t,r){this.id=e,this.hostElement=t,this._engine=r,this.players=[],this._triggers=new Map,this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+e,ne(t,this._hostClassName)}listen(e,t,r,i){if(!this._triggers.has(t))throw lc(r,t);if(r==null||r.length==0)throw hc(t);if(!el(r))throw uc(r,t);let s=Q(this._elementListeners,e,[]),o={name:t,phase:r,callback:i};s.push(o);let a=Q(this._engine.statesByElement,e,new Map);return a.has(t)||(ne(e,jt),ne(e,jt+"-"+t),a.set(t,rr)),()=>{this._engine.afterFlush(()=>{let c=s.indexOf(o);c>=0&&s.splice(c,1),this._triggers.has(t)||a.delete(t)})}}register(e,t){return this._triggers.has(e)?!1:(this._triggers.set(e,t),!0)}_getTrigger(e){let t=this._triggers.get(e);if(!t)throw fc(e);return t}trigger(e,t,r,i=!0){let s=this._getTrigger(t),o=new St(this.id,t,e),a=this._engine.statesByElement.get(e);a||(ne(e,jt),ne(e,jt+"-"+t),this._engine.statesByElement.set(e,a=new Map));let c=a.get(t),l=new wt(r,this.id);if(!(r&&r.hasOwnProperty("value"))&&c&&l.absorbOptions(c.options),a.set(t,l),c||(c=rr),!(l.value===yt)&&c.value===l.value){if(!rl(c.params,l.params)){let w=[],A=s.matchStyles(c.value,c.params,w),O=s.matchStyles(l.value,l.params,w);w.length?this._engine.reportError(w):this._engine.afterFlush(()=>{Fe(e,A),de(e,O)})}return}let p=Q(this._engine.playersByElement,e,[]);p.forEach(w=>{w.namespaceId==this.id&&w.triggerName==t&&w.queued&&w.destroy()});let m=s.matchTransition(c.value,l.value,e,l.params),y=!1;if(!m){if(!i)return;m=s.fallbackTransition,y=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:t,transition:m,fromState:c,toState:l,player:o,isFallbackTransition:y}),y||(ne(e,Ys),o.onStart(()=>{et(e,Ys)})),o.onDone(()=>{let w=this.players.indexOf(o);w>=0&&this.players.splice(w,1);let A=this._engine.playersByElement.get(e);if(A){let O=A.indexOf(o);O>=0&&A.splice(O,1)}}),this.players.push(o),p.push(o),o}deregister(e){this._triggers.delete(e),this._engine.statesByElement.forEach(t=>t.delete(e)),this._elementListeners.forEach((t,r)=>{this._elementListeners.set(r,t.filter(i=>i.name!=e))})}clearElementCache(e){this._engine.statesByElement.delete(e),this._elementListeners.delete(e);let t=this._engine.playersByElement.get(e);t&&(t.forEach(r=>r.destroy()),this._engine.playersByElement.delete(e))}_signalRemovalForInnerTriggers(e,t){let r=this._engine.driver.query(e,Vt,!0);r.forEach(i=>{if(i[ie])return;let s=this._engine.fetchNamespacesByElement(i);s.size?s.forEach(o=>o.triggerLeaveAnimation(i,t,!1,!0)):this.clearElementCache(i)}),this._engine.afterFlushAnimationsDone(()=>r.forEach(i=>this.clearElementCache(i)))}triggerLeaveAnimation(e,t,r,i){let s=this._engine.statesByElement.get(e),o=new Map;if(s){let a=[];if(s.forEach((c,l)=>{if(o.set(l,c.value),this._triggers.has(l)){let h=this.trigger(e,l,yt,i);h&&a.push(h)}}),a.length)return this._engine.markElementAsRemoved(this.id,e,!0,t,o),r&&Ce(a).onDone(()=>this._engine.processLeaveNode(e)),!0}return!1}prepareLeaveAnimationListeners(e){let t=this._elementListeners.get(e),r=this._engine.statesByElement.get(e);if(t&&r){let i=new Set;t.forEach(s=>{let o=s.name;if(i.has(o))return;i.add(o);let c=this._triggers.get(o).fallbackTransition,l=r.get(o)||rr,h=new wt(yt),f=new St(this.id,o,e);this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:o,transition:c,fromState:l,toState:h,player:f,isFallbackTransition:!0})})}}removeNode(e,t){let r=this._engine;if(e.childElementCount&&this._signalRemovalForInnerTriggers(e,t),this.triggerLeaveAnimation(e,t,!0))return;let i=!1;if(r.totalAnimations){let s=r.players.length?r.playersByQueriedElement.get(e):[];if(s&&s.length)i=!0;else{let o=e;for(;o=o.parentNode;)if(r.statesByElement.get(o)){i=!0;break}}}if(this.prepareLeaveAnimationListeners(e),i)r.markElementAsRemoved(this.id,e,!1,t);else{let s=e[ie];(!s||s===uo)&&(r.afterFlush(()=>this.clearElementCache(e)),r.destroyInnerAnimations(e),r._onRemovalComplete(e,t))}}insertNode(e,t){ne(e,this._hostClassName)}drainQueuedTransitions(e){let t=[];return this._queue.forEach(r=>{let i=r.player;if(i.destroyed)return;let s=r.element,o=this._elementListeners.get(s);o&&o.forEach(a=>{if(a.name==r.triggerName){let c=vr(s,r.triggerName,r.fromState.value,r.toState.value);c._data=e,Sr(r.player,a.phase,c,a.callback)}}),i.markedForDestroy?this._engine.afterFlush(()=>{i.destroy()}):t.push(r)}),this._queue=[],t.sort((r,i)=>{let s=r.transition.ast.depCount,o=i.transition.ast.depCount;return s==0||o==0?s-o:this._engine.driver.containsElement(r.element,i.element)?1:-1})}destroy(e){this.players.forEach(t=>t.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,e)}},_r=class{_onRemovalComplete(e,t){this.onRemovalComplete(e,t)}constructor(e,t,r){this.bodyNode=e,this.driver=t,this._normalizer=r,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(i,s)=>{}}get queuedPlayers(){let e=[];return this._namespaceList.forEach(t=>{t.players.forEach(r=>{r.queued&&e.push(r)})}),e}createNamespace(e,t){let r=new yr(e,t,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,t)?this._balanceNamespaceList(r,t):(this.newHostElements.set(t,r),this.collectEnterElement(t)),this._namespaceLookup[e]=r}_balanceNamespaceList(e,t){let r=this._namespaceList,i=this.namespacesByHostElement;if(r.length-1>=0){let o=!1,a=this.driver.getParentElement(t);for(;a;){let c=i.get(a);if(c){let l=r.indexOf(c);r.splice(l+1,0,e),o=!0;break}a=this.driver.getParentElement(a)}o||r.unshift(e)}else r.push(e);return i.set(t,e),e}register(e,t){let r=this._namespaceLookup[e];return r||(r=this.createNamespace(e,t)),r}registerTrigger(e,t,r){let i=this._namespaceLookup[e];i&&i.register(t,r)&&this.totalAnimations++}destroy(e,t){e&&(this.afterFlush(()=>{}),this.afterFlushAnimationsDone(()=>{let r=this._fetchNamespace(e);this.namespacesByHostElement.delete(r.hostElement);let i=this._namespaceList.indexOf(r);i>=0&&this._namespaceList.splice(i,1),r.destroy(t),delete this._namespaceLookup[e]}))}_fetchNamespace(e){return this._namespaceLookup[e]}fetchNamespacesByElement(e){let t=new Set,r=this.statesByElement.get(e);if(r){for(let i of r.values())if(i.namespaceId){let s=this._fetchNamespace(i.namespaceId);s&&t.add(s)}}return t}trigger(e,t,r,i){if(zt(t)){let s=this._fetchNamespace(e);if(s)return s.trigger(t,r,i),!0}return!1}insertNode(e,t,r,i){if(!zt(t))return;let s=t[ie];if(s&&s.setForRemoval){s.setForRemoval=!1,s.setForMove=!0;let o=this.collectedLeaveElements.indexOf(t);o>=0&&this.collectedLeaveElements.splice(o,1)}if(e){let o=this._fetchNamespace(e);o&&o.insertNode(t,r)}i&&this.collectEnterElement(t)}collectEnterElement(e){this.collectedEnterElements.push(e)}markElementAsDisabled(e,t){t?this.disabledNodes.has(e)||(this.disabledNodes.add(e),ne(e,nr)):this.disabledNodes.has(e)&&(this.disabledNodes.delete(e),et(e,nr))}removeNode(e,t,r){if(zt(t)){let i=e?this._fetchNamespace(e):null;i?i.removeNode(t,r):this.markElementAsRemoved(e,t,!1,r);let s=this.namespacesByHostElement.get(t);s&&s.id!==e&&s.removeNode(t,r)}else this._onRemovalComplete(t,r)}markElementAsRemoved(e,t,r,i,s){this.collectedLeaveElements.push(t),t[ie]={namespaceId:e,setForRemoval:i,hasAnimation:r,removedBeforeQueried:!1,previousTriggersValues:s}}listen(e,t,r,i,s){return zt(t)?this._fetchNamespace(e).listen(t,r,i,s):()=>{}}_buildInstruction(e,t,r,i,s){return e.transition.build(this.driver,e.element,e.fromState.value,e.toState.value,r,i,e.fromState.options,e.toState.options,t,s)}destroyInnerAnimations(e){let t=this.driver.query(e,Vt,!0);t.forEach(r=>this.destroyActiveAnimationsForElement(r)),this.playersByQueriedElement.size!=0&&(t=this.driver.query(e,or,!0),t.forEach(r=>this.finishActiveQueriedAnimationOnElement(r)))}destroyActiveAnimationsForElement(e){let t=this.playersByElement.get(e);t&&t.forEach(r=>{r.queued?r.markedForDestroy=!0:r.destroy()})}finishActiveQueriedAnimationOnElement(e){let t=this.playersByQueriedElement.get(e);t&&t.forEach(r=>r.finish())}whenRenderingDone(){return new Promise(e=>{if(this.players.length)return Ce(this.players).onDone(()=>e());e()})}processLeaveNode(e){let t=e[ie];if(t&&t.setForRemoval){if(e[ie]=uo,t.namespaceId){this.destroyInnerAnimations(e);let r=this._fetchNamespace(t.namespaceId);r&&r.clearElementCache(e)}this._onRemovalComplete(e,t.setForRemoval)}e.classList?.contains(nr)&&this.markElementAsDisabled(e,!1),this.driver.query(e,qc,!0).forEach(r=>{this.markElementAsDisabled(r,!1)})}flush(e=-1){let t=[];if(this.newHostElements.size&&(this.newHostElements.forEach((r,i)=>this._balanceNamespaceList(r,i)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let r=0;r<this.collectedEnterElements.length;r++){let i=this.collectedEnterElements[r];ne(i,Gc)}if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){let r=[];try{t=this._flushAnimations(r,e)}finally{for(let i=0;i<r.length;i++)r[i]()}}else for(let r=0;r<this.collectedLeaveElements.length;r++){let i=this.collectedLeaveElements[r];this.processLeaveNode(i)}if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(r=>r()),this._flushFns=[],this._whenQuietFns.length){let r=this._whenQuietFns;this._whenQuietFns=[],t.length?Ce(t).onDone(()=>{r.forEach(i=>i())}):r.forEach(i=>i())}}reportError(e){throw dc(e)}_flushAnimations(e,t){let r=new bt,i=[],s=new Map,o=[],a=new Map,c=new Map,l=new Map,h=new Set;this.disabledNodes.forEach(g=>{h.add(g);let _=this.driver.query(g,Kc,!0);for(let b=0;b<_.length;b++)h.add(_[b])});let f=this.bodyNode,p=Array.from(this.statesByElement.keys()),m=Zs(p,this.collectedEnterElements),y=new Map,w=0;m.forEach((g,_)=>{let b=so+w++;y.set(_,b),g.forEach(T=>ne(T,b))});let A=[],O=new Set,$=new Set;for(let g=0;g<this.collectedLeaveElements.length;g++){let _=this.collectedLeaveElements[g],b=_[ie];b&&b.setForRemoval&&(A.push(_),O.add(_),b.hasAnimation?this.driver.query(_,Qc,!0).forEach(T=>O.add(T)):$.add(_))}let F=new Map,E=Zs(p,Array.from(O));E.forEach((g,_)=>{let b=sr+w++;F.set(_,b),g.forEach(T=>ne(T,b))}),e.push(()=>{m.forEach((g,_)=>{let b=y.get(_);g.forEach(T=>et(T,b))}),E.forEach((g,_)=>{let b=F.get(_);g.forEach(T=>et(T,b))}),A.forEach(g=>{this.processLeaveNode(g)})});let Z=[],ae=[];for(let g=this._namespaceList.length-1;g>=0;g--)this._namespaceList[g].drainQueuedTransitions(t).forEach(b=>{let T=b.player,B=b.element;if(Z.push(T),this.collectedEnterElements.length){let U=B[ie];if(U&&U.setForMove){if(U.previousTriggersValues&&U.previousTriggersValues.has(b.triggerName)){let Re=U.previousTriggersValues.get(b.triggerName),ee=this.statesByElement.get(b.element);if(ee&&ee.has(b.triggerName)){let At=ee.get(b.triggerName);At.value=Re,ee.set(b.triggerName,At)}}T.destroy();return}}let ce=!f||!this.driver.containsElement(f,B),K=F.get(B),Te=y.get(B),N=this._buildInstruction(b,r,Te,K,ce);if(N.errors&&N.errors.length){ae.push(N);return}if(ce){T.onStart(()=>Fe(B,N.fromStyles)),T.onDestroy(()=>de(B,N.toStyles)),i.push(T);return}if(b.isFallbackTransition){T.onStart(()=>Fe(B,N.fromStyles)),T.onDestroy(()=>de(B,N.toStyles)),i.push(T);return}let wi=[];N.timelines.forEach(U=>{U.stretchStartingKeyframe=!0,this.disabledNodes.has(U.element)||wi.push(U)}),N.timelines=wi,r.append(B,N.timelines);let Na={instruction:N,player:T,element:B};o.push(Na),N.queriedElements.forEach(U=>Q(a,U,[]).push(T)),N.preStyleProps.forEach((U,Re)=>{if(U.size){let ee=c.get(Re);ee||c.set(Re,ee=new Set),U.forEach((At,Ln)=>ee.add(Ln))}}),N.postStyleProps.forEach((U,Re)=>{let ee=l.get(Re);ee||l.set(Re,ee=new Set),U.forEach((At,Ln)=>ee.add(Ln))})});if(ae.length){let g=[];ae.forEach(_=>{g.push(pc(_.triggerName,_.errors))}),Z.forEach(_=>_.destroy()),this.reportError(g)}let z=new Map,W=new Map;o.forEach(g=>{let _=g.element;r.has(_)&&(W.set(_,_),this._beforeAnimationBuild(g.player.namespaceId,g.instruction,z))}),i.forEach(g=>{let _=g.element;this._getPreviousPlayers(_,!1,g.namespaceId,g.triggerName,null).forEach(T=>{Q(z,_,[]).push(T),T.destroy()})});let Me=A.filter(g=>eo(g,c,l)),Ge=new Map;Xs(Ge,this.driver,$,l,fe).forEach(g=>{eo(g,c,l)&&Me.push(g)});let Ne=new Map;m.forEach((g,_)=>{Xs(Ne,this.driver,new Set(g),c,Nt)}),Me.forEach(g=>{let _=Ge.get(g),b=Ne.get(g);Ge.set(g,new Map([..._?.entries()??[],...b?.entries()??[]]))});let On=[],_i=[],bi={};o.forEach(g=>{let{element:_,player:b,instruction:T}=g;if(r.has(_)){if(h.has(_)){b.onDestroy(()=>de(_,T.toStyles)),b.disabled=!0,b.overrideTotalTime(T.totalTime),i.push(b);return}let B=bi;if(W.size>1){let K=_,Te=[];for(;K=K.parentNode;){let N=W.get(K);if(N){B=N;break}Te.push(K)}Te.forEach(N=>W.set(N,B))}let ce=this._buildAnimation(b.namespaceId,T,z,s,Ne,Ge);if(b.setRealPlayer(ce),B===bi)On.push(b);else{let K=this.playersByElement.get(B);K&&K.length&&(b.parentPlayer=Ce(K)),i.push(b)}}else Fe(_,T.fromStyles),b.onDestroy(()=>de(_,T.toStyles)),_i.push(b),h.has(_)&&i.push(b)}),_i.forEach(g=>{let _=s.get(g.element);if(_&&_.length){let b=Ce(_);g.setRealPlayer(b)}}),i.forEach(g=>{g.parentPlayer?g.syncPlayerEvents(g.parentPlayer):g.destroy()});for(let g=0;g<A.length;g++){let _=A[g],b=_[ie];if(et(_,sr),b&&b.hasAnimation)continue;let T=[];if(a.size){let ce=a.get(_);ce&&ce.length&&T.push(...ce);let K=this.driver.query(_,or,!0);for(let Te=0;Te<K.length;Te++){let N=a.get(K[Te]);N&&N.length&&T.push(...N)}}let B=T.filter(ce=>!ce.destroyed);B.length?tl(this,_,B):this.processLeaveNode(_)}return A.length=0,On.forEach(g=>{this.players.push(g),g.onDone(()=>{g.destroy();let _=this.players.indexOf(g);this.players.splice(_,1)}),g.play()}),On}afterFlush(e){this._flushFns.push(e)}afterFlushAnimationsDone(e){this._whenQuietFns.push(e)}_getPreviousPlayers(e,t,r,i,s){let o=[];if(t){let a=this.playersByQueriedElement.get(e);a&&(o=a)}else{let a=this.playersByElement.get(e);if(a){let c=!s||s==yt;a.forEach(l=>{l.queued||!c&&l.triggerName!=i||o.push(l)})}}return(r||i)&&(o=o.filter(a=>!(r&&r!=a.namespaceId||i&&i!=a.triggerName))),o}_beforeAnimationBuild(e,t,r){let i=t.triggerName,s=t.element,o=t.isRemovalTransition?void 0:e,a=t.isRemovalTransition?void 0:i;for(let c of t.timelines){let l=c.element,h=l!==s,f=Q(r,l,[]);this._getPreviousPlayers(l,h,o,a,t.toState).forEach(m=>{let y=m.getRealPlayer();y.beforeDestroy&&y.beforeDestroy(),m.destroy(),f.push(m)})}Fe(s,t.fromStyles)}_buildAnimation(e,t,r,i,s,o){let a=t.triggerName,c=t.element,l=[],h=new Set,f=new Set,p=t.timelines.map(y=>{let w=y.element;h.add(w);let A=w[ie];if(A&&A.removedBeforeQueried)return new Xe(y.duration,y.delay);let O=w!==c,$=nl((r.get(w)||Yc).map(z=>z.getRealPlayer())).filter(z=>{let W=z;return W.element?W.element===w:!1}),F=s.get(w),E=o.get(w),Z=to(this._normalizer,y.keyframes,F,E),ae=this._buildPlayer(y,Z,$);if(y.subTimeline&&i&&f.add(w),O){let z=new St(e,a,w);z.setRealPlayer(ae),l.push(z)}return ae});l.forEach(y=>{Q(this.playersByQueriedElement,y.element,[]).push(y),y.onDone(()=>Xc(this.playersByQueriedElement,y.element,y))}),h.forEach(y=>ne(y,Ws));let m=Ce(p);return m.onDestroy(()=>{h.forEach(y=>et(y,Ws)),de(c,t.toStyles)}),f.forEach(y=>{Q(i,y,[]).push(m)}),m}_buildPlayer(e,t,r){return t.length>0?this.driver.animate(e.element,t,e.duration,e.delay,e.easing,r):new Xe(e.duration,e.delay)}},St=class{constructor(e,t,r){this.namespaceId=e,this.triggerName=t,this.element=r,this._player=new Xe,this._containsRealPlayer=!1,this._queuedCallbacks=new Map,this.destroyed=!1,this.parentPlayer=null,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(e){this._containsRealPlayer||(this._player=e,this._queuedCallbacks.forEach((t,r)=>{t.forEach(i=>Sr(e,r,void 0,i))}),this._queuedCallbacks.clear(),this._containsRealPlayer=!0,this.overrideTotalTime(e.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(e){this.totalTime=e}syncPlayerEvents(e){let t=this._player;t.triggerCallback&&e.onStart(()=>t.triggerCallback("start")),e.onDone(()=>this.finish()),e.onDestroy(()=>this.destroy())}_queueEvent(e,t){Q(this._queuedCallbacks,e,[]).push(t)}onDone(e){this.queued&&this._queueEvent("done",e),this._player.onDone(e)}onStart(e){this.queued&&this._queueEvent("start",e),this._player.onStart(e)}onDestroy(e){this.queued&&this._queueEvent("destroy",e),this._player.onDestroy(e)}init(){this._player.init()}hasStarted(){return this.queued?!1:this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(e){this.queued||this._player.setPosition(e)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(e){let t=this._player;t.triggerCallback&&t.triggerCallback(e)}};function Xc(n,e,t){let r=n.get(e);if(r){if(r.length){let i=r.indexOf(t);r.splice(i,1)}r.length==0&&n.delete(e)}return r}function Zc(n){return n??null}function zt(n){return n&&n.nodeType===1}function el(n){return n=="start"||n=="done"}function Js(n,e){let t=n.style.display;return n.style.display=e??"none",t}function Xs(n,e,t,r,i){let s=[];t.forEach(c=>s.push(Js(c)));let o=[];r.forEach((c,l)=>{let h=new Map;c.forEach(f=>{let p=e.computeStyle(l,f,i);h.set(f,p),(!p||p.length==0)&&(l[ie]=Jc,o.push(l))}),n.set(l,h)});let a=0;return t.forEach(c=>Js(c,s[a++])),o}function Zs(n,e){let t=new Map;if(n.forEach(a=>t.set(a,[])),e.length==0)return t;let r=1,i=new Set(e),s=new Map;function o(a){if(!a)return r;let c=s.get(a);if(c)return c;let l=a.parentNode;return t.has(l)?c=l:i.has(l)?c=r:c=o(l),s.set(a,c),c}return e.forEach(a=>{let c=o(a);c!==r&&t.get(c).push(a)}),t}function ne(n,e){n.classList?.add(e)}function et(n,e){n.classList?.remove(e)}function tl(n,e,t){Ce(t).onDone(()=>n.processLeaveNode(e))}function nl(n){let e=[];return fo(n,e),e}function fo(n,e){for(let t=0;t<n.length;t++){let r=n[t];r instanceof Qn?fo(r.players,e):e.push(r)}}function rl(n,e){let t=Object.keys(n),r=Object.keys(e);if(t.length!=r.length)return!1;for(let i=0;i<t.length;i++){let s=t[i];if(!e.hasOwnProperty(s)||n[s]!==e[s])return!1}return!0}function eo(n,e,t){let r=t.get(n);if(!r)return!1;let i=e.get(n);return i?r.forEach(s=>i.add(s)):e.set(n,r),t.delete(n),!0}var nt=class{constructor(e,t,r){this._driver=t,this._normalizer=r,this._triggerCache={},this.onRemovalComplete=(i,s)=>{},this._transitionEngine=new _r(e.body,t,r),this._timelineEngine=new gr(e.body,t,r),this._transitionEngine.onRemovalComplete=(i,s)=>this.onRemovalComplete(i,s)}registerTrigger(e,t,r,i,s){let o=e+"-"+i,a=this._triggerCache[o];if(!a){let c=[],l=[],h=co(this._driver,s,c,l);if(c.length)throw rc(i,c);l.length&&void 0,a=zc(i,h,this._normalizer),this._triggerCache[o]=a}this._transitionEngine.registerTrigger(t,i,a)}register(e,t){this._transitionEngine.register(e,t)}destroy(e,t){this._transitionEngine.destroy(e,t)}onInsert(e,t,r,i){this._transitionEngine.insertNode(e,t,r,i)}onRemove(e,t,r){this._transitionEngine.removeNode(e,t,r)}disableAnimations(e,t){this._transitionEngine.markElementAsDisabled(e,t)}process(e,t,r,i){if(r.charAt(0)=="@"){let[s,o]=Us(r),a=i;this._timelineEngine.command(s,t,o,a)}else this._transitionEngine.trigger(e,t,r,i)}listen(e,t,r,i,s){if(r.charAt(0)=="@"){let[o,a]=Us(r);return this._timelineEngine.listen(o,t,a,s)}return this._transitionEngine.listen(e,t,r,i,s)}flush(e=-1){this._transitionEngine.flush(e)}get players(){return[...this._transitionEngine.players,...this._timelineEngine.players]}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}afterFlushAnimationsDone(e){this._transitionEngine.afterFlushAnimationsDone(e)}};function il(n,e){let t=null,r=null;return Array.isArray(e)&&e.length?(t=ir(e[0]),e.length>1&&(r=ir(e[e.length-1]))):e instanceof Map&&(t=ir(e)),t||r?new br(n,t,r):null}var tt=class tt{constructor(e,t,r){this._element=e,this._startStyles=t,this._endStyles=r,this._state=0;let i=tt.initialStylesByElement.get(e);i||tt.initialStylesByElement.set(e,i=new Map),this._initialStyles=i}start(){this._state<1&&(this._startStyles&&de(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(de(this._element,this._initialStyles),this._endStyles&&(de(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(tt.initialStylesByElement.delete(this._element),this._startStyles&&(Fe(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(Fe(this._element,this._endStyles),this._endStyles=null),de(this._element,this._initialStyles),this._state=3)}};tt.initialStylesByElement=new WeakMap;var br=tt;function ir(n){let e=null;return n.forEach((t,r)=>{sl(r)&&(e=e||new Map,e.set(r,t))}),e}function sl(n){return n==="display"||n==="position"}var Xt=class{constructor(e,t,r,i){this.element=e,this.keyframes=t,this.options=r,this._specialStyles=i,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this._originalOnDoneFns=[],this._originalOnStartFns=[],this.time=0,this.parentPlayer=null,this.currentSnapshot=new Map,this._duration=r.duration,this._delay=r.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;let e=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,e,this.options),this._finalKeyframe=e.length?e[e.length-1]:new Map;let t=()=>this._onFinish();this.domPlayer.addEventListener("finish",t),this.onDestroy(()=>{this.domPlayer.removeEventListener("finish",t)})}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_convertKeyframesToObject(e){let t=[];return e.forEach(r=>{t.push(Object.fromEntries(r))}),t}_triggerWebAnimation(e,t,r){return e.animate(this._convertKeyframesToObject(t),r)}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(e=>e()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}setPosition(e){this.domPlayer===void 0&&this.init(),this.domPlayer.currentTime=e*this.time}getPosition(){return+(this.domPlayer.currentTime??0)/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){let e=new Map;this.hasStarted()&&this._finalKeyframe.forEach((r,i)=>{i!=="offset"&&e.set(i,this._finished?r:Cr(this.element,i))}),this.currentSnapshot=e}triggerCallback(e){let t=e==="start"?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}},Zt=class{validateStyleProperty(e){return!0}validateAnimatableStyleProperty(e){return!0}containsElement(e,t){return no(e,t)}getParentElement(e){return Er(e)}query(e,t,r){return ro(e,t,r)}computeStyle(e,t,r){return Cr(e,t)}animate(e,t,r,i,s,o=[]){let a=i==0?"both":"forwards",c={duration:r,delay:i,fill:a};s&&(c.easing=s);let l=new Map,h=o.filter(m=>m instanceof Xt);Ic(r,i)&&h.forEach(m=>{m.currentSnapshot.forEach((y,w)=>l.set(w,y))});let f=vc(t).map(m=>new Map(m));f=Cc(e,f,l);let p=il(e,f);return new Xt(e,f,c,p)}};var Wt="@",po="@.disabled",en=class{constructor(e,t,r,i){this.namespaceId=e,this.delegate=t,this.engine=r,this._onDestroy=i,this.\u0275type=0}get data(){return this.delegate.data}destroyNode(e){this.delegate.destroyNode?.(e)}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.engine.afterFlushAnimationsDone(()=>{queueMicrotask(()=>{this.delegate.destroy()})}),this._onDestroy?.()}createElement(e,t){return this.delegate.createElement(e,t)}createComment(e){return this.delegate.createComment(e)}createText(e){return this.delegate.createText(e)}appendChild(e,t){this.delegate.appendChild(e,t),this.engine.onInsert(this.namespaceId,t,e,!1)}insertBefore(e,t,r,i=!0){this.delegate.insertBefore(e,t,r),this.engine.onInsert(this.namespaceId,t,e,i)}removeChild(e,t,r){this.engine.onRemove(this.namespaceId,t,this.delegate)}selectRootElement(e,t){return this.delegate.selectRootElement(e,t)}parentNode(e){return this.delegate.parentNode(e)}nextSibling(e){return this.delegate.nextSibling(e)}setAttribute(e,t,r,i){this.delegate.setAttribute(e,t,r,i)}removeAttribute(e,t,r){this.delegate.removeAttribute(e,t,r)}addClass(e,t){this.delegate.addClass(e,t)}removeClass(e,t){this.delegate.removeClass(e,t)}setStyle(e,t,r,i){this.delegate.setStyle(e,t,r,i)}removeStyle(e,t,r){this.delegate.removeStyle(e,t,r)}setProperty(e,t,r){t.charAt(0)==Wt&&t==po?this.disableAnimations(e,!!r):this.delegate.setProperty(e,t,r)}setValue(e,t){this.delegate.setValue(e,t)}listen(e,t,r){return this.delegate.listen(e,t,r)}disableAnimations(e,t){this.engine.disableAnimations(e,t)}},wr=class extends en{constructor(e,t,r,i,s){super(t,r,i,s),this.factory=e,this.namespaceId=t}setProperty(e,t,r){t.charAt(0)==Wt?t.charAt(1)=="."&&t==po?(r=r===void 0?!0:!!r,this.disableAnimations(e,r)):this.engine.process(this.namespaceId,e,t.slice(1),r):this.delegate.setProperty(e,t,r)}listen(e,t,r){if(t.charAt(0)==Wt){let i=ol(e),s=t.slice(1),o="";return s.charAt(0)!=Wt&&([s,o]=al(s)),this.engine.listen(this.namespaceId,i,s,o,a=>{let c=a._data||-1;this.factory.scheduleListenerCallback(c,r,a)})}return this.delegate.listen(e,t,r)}};function ol(n){switch(n){case"body":return document.body;case"document":return document;case"window":return window;default:return n}}function al(n){let e=n.indexOf("."),t=n.substring(0,e),r=n.slice(e+1);return[t,r]}var tn=class{constructor(e,t,r){this.delegate=e,this.engine=t,this._zone=r,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,t.onRemovalComplete=(i,s)=>{let o=s?.parentNode(i);o&&s.removeChild(o,i)}}createRenderer(e,t){let r="",i=this.delegate.createRenderer(e,t);if(!e||!t?.data?.animation){let l=this._rendererCache,h=l.get(i);if(!h){let f=()=>l.delete(i);h=new en(r,i,this.engine,f),l.set(i,h)}return h}let s=t.id,o=t.id+"-"+this._currentId;this._currentId++,this.engine.register(o,e);let a=l=>{Array.isArray(l)?l.forEach(a):this.engine.registerTrigger(s,o,e,l.name,l)};return t.data.animation.forEach(a),new wr(this,o,i,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){queueMicrotask(()=>{this._microtaskId++})}scheduleListenerCallback(e,t,r){if(e>=0&&e<this._microtaskId){this._zone.run(()=>t(r));return}let i=this._animationCallbacksBuffer;i.length==0&&queueMicrotask(()=>{this._zone.run(()=>{i.forEach(s=>{let[o,a]=s;o(a)}),this._animationCallbacksBuffer=[]})}),i.push([t,r])}end(){this._cdRecurDepth--,this._cdRecurDepth==0&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}};var ll=(()=>{let e=class e extends nt{constructor(r,i,s){super(r,i,s)}ngOnDestroy(){this.flush()}};e.\u0275fac=function(i){return new(i||e)(te(Fi),te(Be),te(je))},e.\u0275prov=q({token:e,factory:e.\u0275fac});let n=e;return n})();function hl(){return new qt}function ul(n,e,t){return new tn(n,e,t)}var go=[{provide:je,useFactory:hl},{provide:nt,useClass:ll},{provide:Ni,useFactory:ul,deps:[Qi,nt,Dt]}],mo=[{provide:Be,useFactory:()=>new Zt},{provide:Hn,useValue:"BrowserAnimations"},...go],fl=[{provide:Be,useClass:Tr},{provide:Hn,useValue:"NoopAnimations"},...go],yo=(()=>{let e=class e{static withConfig(r){return{ngModule:e,providers:r.disableAnimations?fl:mo}}};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=ue({type:e}),e.\u0275inj=he({providers:mo,imports:[Mt]});let n=e;return n})();var nn=class{http;prefix;suffix;constructor(e,t="/assets/i18n/",r=".json"){this.http=e,this.prefix=t,this.suffix=r}getTranslation(e){return this.http.get(`${this.prefix}${e}${this.suffix}`)}};var bo=function(n){let e=[],t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},dl=function(n){let e=[],t=0,r=0;for(;t<n.length;){let i=n[t++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){let s=n[t++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){let s=n[t++],o=n[t++],a=n[t++],c=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{let s=n[t++],o=n[t++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},wo={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();let t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){let s=n[i],o=i+1<n.length,a=o?n[i+1]:0,c=i+2<n.length,l=c?n[i+2]:0,h=s>>2,f=(s&3)<<4|a>>4,p=(a&15)<<2|l>>6,m=l&63;c||(m=64,o||(p=64)),r.push(t[h],t[f],t[p],t[m])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(bo(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):dl(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();let t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){let s=t[n.charAt(i++)],a=i<n.length?t[n.charAt(i)]:0;++i;let l=i<n.length?t[n.charAt(i)]:64;++i;let f=i<n.length?t[n.charAt(i)]:64;if(++i,s==null||a==null||l==null||f==null)throw new Dr;let p=s<<2|a>>4;if(r.push(p),l!==64){let m=a<<4&240|l>>2;if(r.push(m),f!==64){let y=l<<6&192|f;r.push(y)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}},Dr=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},pl=function(n){let e=bo(n);return wo.encodeByteArray(e,!0)},Pr=function(n){return pl(n).replace(/\./g,"")},ml=function(n){try{return wo.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function gl(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var yl=()=>gl().__FIREBASE_DEFAULTS__,_l=()=>{if(typeof process>"u"||typeof process.env>"u")return;let n=process.env.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},bl=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=n&&ml(n[1]);return e&&JSON.parse(e)},wl=()=>{try{return yl()||_l()||bl()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}};var Mr=()=>{var n;return(n=wl())===null||n===void 0?void 0:n.config};var rn=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}};function So(){let n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function sn(){try{return typeof indexedDB=="object"}catch{return!1}}function on(){return new Promise((n,e)=>{try{let t=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(t){e(t)}})}function vo(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}var Sl="FirebaseError",se=class n extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=Sl,Object.setPrototypeOf(this,n.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ve.prototype.create)}},ve=class{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){let r=t[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?vl(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new se(i,a,r)}};function vl(n,e){return n.replace(El,(t,r)=>{let i=e[r];return i!=null?String(i):`<${r}?>`})}var El=/\{\$([^}]+)}/g;function rt(n,e){if(n===e)return!0;let t=Object.keys(n),r=Object.keys(e);for(let i of t){if(!r.includes(i))return!1;let s=n[i],o=e[i];if(_o(s)&&_o(o)){if(!rt(s,o))return!1}else if(s!==o)return!1}for(let i of r)if(!t.includes(i))return!1;return!0}function _o(n){return n!==null&&typeof n=="object"}var Tl=1e3,Il=2,Cl=4*60*60*1e3,Al=.5;function Nr(n,e=Tl,t=Il){let r=e*Math.pow(t,n),i=Math.round(Al*r*(Math.random()-.5)*2);return Math.min(Cl,r+i)}function Rr(n){return n&&n._delegate?n._delegate:n}var Y=class{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var He="[DEFAULT]";var Or=class{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){let r=new rn;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{let i=this.getOrInitializeService({instanceIdentifier:t});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;let r=this.normalizeInstanceIdentifier(e?.identifier),i=(t=e?.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(Dl(e))try{this.getOrInitializeService({instanceIdentifier:He})}catch{}for(let[t,r]of this.instancesDeferred.entries()){let i=this.normalizeInstanceIdentifier(t);try{let s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=He){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}delete(){return d(this,null,function*(){let e=Array.from(this.instances.values());yield Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])})}isComponentSet(){return this.component!=null}isInitialized(e=He){return this.instances.has(e)}getOptions(e=He){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let i=this.getOrInitializeService({instanceIdentifier:r,options:t});for(let[s,o]of this.instancesDeferred.entries()){let a=this.normalizeInstanceIdentifier(s);r===a&&o.resolve(i)}return i}onInit(e,t){var r;let i=this.normalizeInstanceIdentifier(t),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);let o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,t){let r=this.onInitCallbacks.get(t);if(r)for(let i of r)try{i(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:kl(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=He){return this.component?this.component.multipleInstances?e:He:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function kl(n){return n===He?void 0:n}function Dl(n){return n.instantiationMode==="EAGER"}var an=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let t=new Or(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}};var Pl=[],M=function(n){return n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT",n}(M||{}),Ml={debug:M.DEBUG,verbose:M.VERBOSE,info:M.INFO,warn:M.WARN,error:M.ERROR,silent:M.SILENT},Nl=M.INFO,Rl={[M.DEBUG]:"log",[M.VERBOSE]:"log",[M.INFO]:"info",[M.WARN]:"warn",[M.ERROR]:"error"},Ol=(n,e,...t)=>{if(e<n.logLevel)return;let r=new Date().toISOString(),i=Rl[e];if(i)console[i](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},it=class{constructor(e){this.name=e,this._logLevel=Nl,this._logHandler=Ol,this._userLogHandler=null,Pl.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in M))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?Ml[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,M.DEBUG,...e),this._logHandler(this,M.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,M.VERBOSE,...e),this._logHandler(this,M.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,M.INFO,...e),this._logHandler(this,M.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,M.WARN,...e),this._logHandler(this,M.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,M.ERROR,...e),this._logHandler(this,M.ERROR,...e)}};var Ll=(n,e)=>e.some(t=>n instanceof t),Eo,To;function xl(){return Eo||(Eo=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function $l(){return To||(To=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var Io=new WeakMap,xr=new WeakMap,Co=new WeakMap,Lr=new WeakMap,Fr=new WeakMap;function Fl(n){let e=new Promise((t,r)=>{let i=()=>{n.removeEventListener("success",s),n.removeEventListener("error",o)},s=()=>{t(pe(n.result)),i()},o=()=>{r(n.error),i()};n.addEventListener("success",s),n.addEventListener("error",o)});return e.then(t=>{t instanceof IDBCursor&&Io.set(t,n)}).catch(()=>{}),Fr.set(e,n),e}function Bl(n){if(xr.has(n))return;let e=new Promise((t,r)=>{let i=()=>{n.removeEventListener("complete",s),n.removeEventListener("error",o),n.removeEventListener("abort",o)},s=()=>{t(),i()},o=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",s),n.addEventListener("error",o),n.addEventListener("abort",o)});xr.set(n,e)}var $r={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return xr.get(n);if(e==="objectStoreNames")return n.objectStoreNames||Co.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return pe(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function Ao(n){$r=n($r)}function jl(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){let r=n.call(cn(this),e,...t);return Co.set(r,e.sort?e.sort():[e]),pe(r)}:$l().includes(n)?function(...e){return n.apply(cn(this),e),pe(Io.get(this))}:function(...e){return pe(n.apply(cn(this),e))}}function Hl(n){return typeof n=="function"?jl(n):(n instanceof IDBTransaction&&Bl(n),Ll(n,xl())?new Proxy(n,$r):n)}function pe(n){if(n instanceof IDBRequest)return Fl(n);if(Lr.has(n))return Lr.get(n);let e=Hl(n);return e!==n&&(Lr.set(n,e),Fr.set(e,n)),e}var cn=n=>Fr.get(n);function Do(n,e,{blocked:t,upgrade:r,blocking:i,terminated:s}={}){let o=indexedDB.open(n,e),a=pe(o);return r&&o.addEventListener("upgradeneeded",c=>{r(pe(o.result),c.oldVersion,c.newVersion,pe(o.transaction),c)}),t&&o.addEventListener("blocked",c=>t(c.oldVersion,c.newVersion,c)),a.then(c=>{s&&c.addEventListener("close",()=>s()),i&&c.addEventListener("versionchange",l=>i(l.oldVersion,l.newVersion,l))}).catch(()=>{}),a}var Ul=["get","getKey","getAll","getAllKeys","count"],zl=["put","add","delete","clear"],Br=new Map;function ko(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(Br.get(e))return Br.get(e);let t=e.replace(/FromIndex$/,""),r=e!==t,i=zl.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(i||Ul.includes(t)))return;let s=function(o,...a){return d(this,null,function*(){let c=this.transaction(o,i?"readwrite":"readonly"),l=c.store;return r&&(l=l.index(a.shift())),(yield Promise.all([l[t](...a),i&&c.done]))[0]})};return Br.set(e,s),s}Ao(n=>le(S({},n),{get:(e,t,r)=>ko(e,t)||n.get(e,t,r),has:(e,t)=>!!ko(e,t)||n.has(e,t)}));var Hr=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(Wl(t)){let r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}};function Wl(n){let e=n.getComponent();return e?.type==="VERSION"}var Ur="@firebase/app",Po="0.9.13";var Ue=new it("@firebase/app"),Vl="@firebase/app-compat",Kl="@firebase/analytics-compat",ql="@firebase/analytics",Gl="@firebase/app-check-compat",Ql="@firebase/app-check",Yl="@firebase/auth",Jl="@firebase/auth-compat",Xl="@firebase/database",Zl="@firebase/database-compat",eh="@firebase/functions",th="@firebase/functions-compat",nh="@firebase/installations",rh="@firebase/installations-compat",ih="@firebase/messaging",sh="@firebase/messaging-compat",oh="@firebase/performance",ah="@firebase/performance-compat",ch="@firebase/remote-config",lh="@firebase/remote-config-compat",hh="@firebase/storage",uh="@firebase/storage-compat",fh="@firebase/firestore",dh="@firebase/firestore-compat",ph="firebase";var zr="[DEFAULT]",mh={[Ur]:"fire-core",[Vl]:"fire-core-compat",[ql]:"fire-analytics",[Kl]:"fire-analytics-compat",[Ql]:"fire-app-check",[Gl]:"fire-app-check-compat",[Yl]:"fire-auth",[Jl]:"fire-auth-compat",[Xl]:"fire-rtdb",[Zl]:"fire-rtdb-compat",[eh]:"fire-fn",[th]:"fire-fn-compat",[nh]:"fire-iid",[rh]:"fire-iid-compat",[ih]:"fire-fcm",[sh]:"fire-fcm-compat",[oh]:"fire-perf",[ah]:"fire-perf-compat",[ch]:"fire-rc",[lh]:"fire-rc-compat",[hh]:"fire-gcs",[uh]:"fire-gcs-compat",[fh]:"fire-fst",[dh]:"fire-fst-compat","fire-js":"fire-js",[ph]:"fire-js-all"};var ln=new Map,Wr=new Map;function gh(n,e){try{n.container.addComponent(e)}catch(t){Ue.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function Ee(n){let e=n.name;if(Wr.has(e))return Ue.debug(`There were multiple attempts to register component ${e}.`),!1;Wr.set(e,n);for(let t of ln.values())gh(t,n);return!0}function st(n,e){let t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}var yh={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."},Ae=new ve("app","Firebase",yh);var Vr=class{constructor(e,t,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Y("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Ae.create("app-deleted",{appName:this._name})}};function Gr(n,e={}){let t=n;typeof e!="object"&&(e={name:e});let r=Object.assign({name:zr,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw Ae.create("bad-app-name",{appName:String(i)});if(t||(t=Mr()),!t)throw Ae.create("no-options");let s=ln.get(i);if(s){if(rt(t,s.options)&&rt(r,s.config))return s;throw Ae.create("duplicate-app",{appName:i})}let o=new an(i);for(let c of Wr.values())o.addComponent(c);let a=new Vr(t,r,o);return ln.set(i,a),a}function Qr(n=zr){let e=ln.get(n);if(!e&&n===zr&&Mr())return Gr();if(!e)throw Ae.create("no-app",{appName:n});return e}function oe(n,e,t){var r;let i=(r=mh[n])!==null&&r!==void 0?r:n;t&&(i+=`-${t}`);let s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){let a=[`Unable to register library "${i}" with version "${e}":`];s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Ue.warn(a.join(" "));return}Ee(new Y(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}var _h="firebase-heartbeat-database",bh=1,vt="firebase-heartbeat-store",jr=null;function Oo(){return jr||(jr=Do(_h,bh,{upgrade:(n,e)=>{switch(e){case 0:n.createObjectStore(vt)}}}).catch(n=>{throw Ae.create("idb-open",{originalErrorMessage:n.message})})),jr}function wh(n){return d(this,null,function*(){try{return yield(yield Oo()).transaction(vt).objectStore(vt).get(Lo(n))}catch(e){if(e instanceof se)Ue.warn(e.message);else{let t=Ae.create("idb-get",{originalErrorMessage:e?.message});Ue.warn(t.message)}}})}function Mo(n,e){return d(this,null,function*(){try{let r=(yield Oo()).transaction(vt,"readwrite");yield r.objectStore(vt).put(e,Lo(n)),yield r.done}catch(t){if(t instanceof se)Ue.warn(t.message);else{let r=Ae.create("idb-set",{originalErrorMessage:t?.message});Ue.warn(r.message)}}})}function Lo(n){return`${n.name}!${n.options.appId}`}var Sh=1024,vh=30*24*60*60*1e3,Kr=class{constructor(e){this.container=e,this._heartbeatsCache=null;let t=this.container.getProvider("app").getImmediate();this._storage=new qr(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}triggerHeartbeat(){return d(this,null,function*(){let t=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=No();if(this._heartbeatsCache===null&&(this._heartbeatsCache=yield this._heartbeatsCachePromise),!(this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(i=>i.date===r)))return this._heartbeatsCache.heartbeats.push({date:r,agent:t}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(i=>{let s=new Date(i.date).valueOf();return Date.now()-s<=vh}),this._storage.overwrite(this._heartbeatsCache)})}getHeartbeatsHeader(){return d(this,null,function*(){if(this._heartbeatsCache===null&&(yield this._heartbeatsCachePromise),this._heartbeatsCache===null||this._heartbeatsCache.heartbeats.length===0)return"";let e=No(),{heartbeatsToSend:t,unsentEntries:r}=Eh(this._heartbeatsCache.heartbeats),i=Pr(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,yield this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i})}};function No(){return new Date().toISOString().substring(0,10)}function Eh(n,e=Sh){let t=[],r=n.slice();for(let i of n){let s=t.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),Ro(t)>e){s.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),Ro(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}var qr=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return d(this,null,function*(){return sn()?on().then(()=>!0).catch(()=>!1):!1})}read(){return d(this,null,function*(){return(yield this._canUseIndexedDBPromise)?(yield wh(this.app))||{heartbeats:[]}:{heartbeats:[]}})}overwrite(e){return d(this,null,function*(){var t;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return Mo(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return})}add(e){return d(this,null,function*(){var t;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return Mo(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return})}};function Ro(n){return Pr(JSON.stringify({version:2,heartbeats:n})).length}function Th(n){Ee(new Y("platform-logger",e=>new Hr(e),"PRIVATE")),Ee(new Y("heartbeat",e=>new Kr(e),"PRIVATE")),oe(Ur,Po,n),oe(Ur,Po,"esm2017"),oe("fire-js","")}Th("");var Ih=(n,e)=>e.some(t=>n instanceof t),xo,$o;function Ch(){return xo||(xo=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Ah(){return $o||($o=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var Fo=new WeakMap,Jr=new WeakMap,Bo=new WeakMap,Yr=new WeakMap,Zr=new WeakMap;function kh(n){let e=new Promise((t,r)=>{let i=()=>{n.removeEventListener("success",s),n.removeEventListener("error",o)},s=()=>{t(me(n.result)),i()},o=()=>{r(n.error),i()};n.addEventListener("success",s),n.addEventListener("error",o)});return e.then(t=>{t instanceof IDBCursor&&Fo.set(t,n)}).catch(()=>{}),Zr.set(e,n),e}function Dh(n){if(Jr.has(n))return;let e=new Promise((t,r)=>{let i=()=>{n.removeEventListener("complete",s),n.removeEventListener("error",o),n.removeEventListener("abort",o)},s=()=>{t(),i()},o=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",s),n.addEventListener("error",o),n.addEventListener("abort",o)});Jr.set(n,e)}var Xr={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return Jr.get(n);if(e==="objectStoreNames")return n.objectStoreNames||Bo.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return me(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function jo(n){Xr=n(Xr)}function Ph(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){let r=n.call(hn(this),e,...t);return Bo.set(r,e.sort?e.sort():[e]),me(r)}:Ah().includes(n)?function(...e){return n.apply(hn(this),e),me(Fo.get(this))}:function(...e){return me(n.apply(hn(this),e))}}function Mh(n){return typeof n=="function"?Ph(n):(n instanceof IDBTransaction&&Dh(n),Ih(n,Ch())?new Proxy(n,Xr):n)}function me(n){if(n instanceof IDBRequest)return kh(n);if(Yr.has(n))return Yr.get(n);let e=Mh(n);return e!==n&&(Yr.set(n,e),Zr.set(e,n)),e}var hn=n=>Zr.get(n);function Uo(n,e,{blocked:t,upgrade:r,blocking:i,terminated:s}={}){let o=indexedDB.open(n,e),a=me(o);return r&&o.addEventListener("upgradeneeded",c=>{r(me(o.result),c.oldVersion,c.newVersion,me(o.transaction))}),t&&o.addEventListener("blocked",()=>t()),a.then(c=>{s&&c.addEventListener("close",()=>s()),i&&c.addEventListener("versionchange",()=>i())}).catch(()=>{}),a}var Nh=["get","getKey","getAll","getAllKeys","count"],Rh=["put","add","delete","clear"],ei=new Map;function Ho(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(ei.get(e))return ei.get(e);let t=e.replace(/FromIndex$/,""),r=e!==t,i=Rh.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(i||Nh.includes(t)))return;let s=function(o,...a){return d(this,null,function*(){let c=this.transaction(o,i?"readwrite":"readonly"),l=c.store;return r&&(l=l.index(a.shift())),(yield Promise.all([l[t](...a),i&&c.done]))[0]})};return ei.set(e,s),s}jo(n=>le(S({},n),{get:(e,t,r)=>Ho(e,t)||n.get(e,t,r),has:(e,t)=>!!Ho(e,t)||n.has(e,t)}));var Vo="@firebase/installations",ii="0.6.4";var Ko=1e4,qo=`w:${ii}`,Go="FIS_v2",Oh="https://firebaseinstallations.googleapis.com/v1",Lh=60*60*1e3,xh="installations",$h="Installations";var Fh={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},We=new ve(xh,$h,Fh);function Qo(n){return n instanceof se&&n.code.includes("request-failed")}function Yo({projectId:n}){return`${Oh}/projects/${n}/installations`}function Jo(n){return{token:n.token,requestStatus:2,expiresIn:jh(n.expiresIn),creationTime:Date.now()}}function Xo(n,e){return d(this,null,function*(){let r=(yield e.json()).error;return We.create("request-failed",{requestName:n,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})})}function Zo({apiKey:n}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":n})}function Bh(n,{refreshToken:e}){let t=Zo(n);return t.append("Authorization",Hh(e)),t}function ea(n){return d(this,null,function*(){let e=yield n();return e.status>=500&&e.status<600?n():e})}function jh(n){return Number(n.replace("s","000"))}function Hh(n){return`${Go} ${n}`}function Uh(r,i){return d(this,arguments,function*({appConfig:n,heartbeatServiceProvider:e},{fid:t}){let s=Yo(n),o=Zo(n),a=e.getImmediate({optional:!0});if(a){let f=yield a.getHeartbeatsHeader();f&&o.append("x-firebase-client",f)}let c={fid:t,authVersion:Go,appId:n.appId,sdkVersion:qo},l={method:"POST",headers:o,body:JSON.stringify(c)},h=yield ea(()=>fetch(s,l));if(h.ok){let f=yield h.json();return{fid:f.fid||t,registrationStatus:2,refreshToken:f.refreshToken,authToken:Jo(f.authToken)}}else throw yield Xo("Create Installation",h)})}function ta(n){return new Promise(e=>{setTimeout(e,n)})}function zh(n){return btoa(String.fromCharCode(...n)).replace(/\+/g,"-").replace(/\//g,"_")}var Wh=/^[cdef][\w-]{21}$/,ri="";function Vh(){try{let n=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(n),n[0]=112+n[0]%16;let t=Kh(n);return Wh.test(t)?t:ri}catch{return ri}}function Kh(n){return zh(n).substr(0,22)}function fn(n){return`${n.appName}!${n.appId}`}var na=new Map;function ra(n,e){let t=fn(n);ia(t,e),qh(t,e)}function ia(n,e){let t=na.get(n);if(t)for(let r of t)r(e)}function qh(n,e){let t=Gh();t&&t.postMessage({key:n,fid:e}),Qh()}var ze=null;function Gh(){return!ze&&"BroadcastChannel"in self&&(ze=new BroadcastChannel("[Firebase] FID Change"),ze.onmessage=n=>{ia(n.data.key,n.data.fid)}),ze}function Qh(){na.size===0&&ze&&(ze.close(),ze=null)}var Yh="firebase-installations-database",Jh=1,Ve="firebase-installations-store",ti=null;function si(){return ti||(ti=Uo(Yh,Jh,{upgrade:(n,e)=>{switch(e){case 0:n.createObjectStore(Ve)}}})),ti}function un(n,e){return d(this,null,function*(){let t=fn(n),i=(yield si()).transaction(Ve,"readwrite"),s=i.objectStore(Ve),o=yield s.get(t);return yield s.put(e,t),yield i.done,(!o||o.fid!==e.fid)&&ra(n,e.fid),e})}function sa(n){return d(this,null,function*(){let e=fn(n),r=(yield si()).transaction(Ve,"readwrite");yield r.objectStore(Ve).delete(e),yield r.done})}function dn(n,e){return d(this,null,function*(){let t=fn(n),i=(yield si()).transaction(Ve,"readwrite"),s=i.objectStore(Ve),o=yield s.get(t),a=e(o);return a===void 0?yield s.delete(t):yield s.put(a,t),yield i.done,a&&(!o||o.fid!==a.fid)&&ra(n,a.fid),a})}function oi(n){return d(this,null,function*(){let e,t=yield dn(n.appConfig,r=>{let i=Xh(r),s=Zh(n,i);return e=s.registrationPromise,s.installationEntry});return t.fid===ri?{installationEntry:yield e}:{installationEntry:t,registrationPromise:e}})}function Xh(n){let e=n||{fid:Vh(),registrationStatus:0};return oa(e)}function Zh(n,e){if(e.registrationStatus===0){if(!navigator.onLine){let i=Promise.reject(We.create("app-offline"));return{installationEntry:e,registrationPromise:i}}let t={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},r=eu(n,t);return{installationEntry:t,registrationPromise:r}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:tu(n)}:{installationEntry:e}}function eu(n,e){return d(this,null,function*(){try{let t=yield Uh(n,e);return un(n.appConfig,t)}catch(t){throw Qo(t)&&t.customData.serverCode===409?yield sa(n.appConfig):yield un(n.appConfig,{fid:e.fid,registrationStatus:0}),t}})}function tu(n){return d(this,null,function*(){let e=yield zo(n.appConfig);for(;e.registrationStatus===1;)yield ta(100),e=yield zo(n.appConfig);if(e.registrationStatus===0){let{installationEntry:t,registrationPromise:r}=yield oi(n);return r||t}return e})}function zo(n){return dn(n,e=>{if(!e)throw We.create("installation-not-found");return oa(e)})}function oa(n){return nu(n)?{fid:n.fid,registrationStatus:0}:n}function nu(n){return n.registrationStatus===1&&n.registrationTime+Ko<Date.now()}function ru(r,i){return d(this,arguments,function*({appConfig:n,heartbeatServiceProvider:e},t){let s=iu(n,t),o=Bh(n,t),a=e.getImmediate({optional:!0});if(a){let f=yield a.getHeartbeatsHeader();f&&o.append("x-firebase-client",f)}let c={installation:{sdkVersion:qo,appId:n.appId}},l={method:"POST",headers:o,body:JSON.stringify(c)},h=yield ea(()=>fetch(s,l));if(h.ok){let f=yield h.json();return Jo(f)}else throw yield Xo("Generate Auth Token",h)})}function iu(n,{fid:e}){return`${Yo(n)}/${e}/authTokens:generate`}function ai(n,e=!1){return d(this,null,function*(){let t,r=yield dn(n.appConfig,s=>{if(!aa(s))throw We.create("not-registered");let o=s.authToken;if(!e&&au(o))return s;if(o.requestStatus===1)return t=su(n,e),s;{if(!navigator.onLine)throw We.create("app-offline");let a=lu(s);return t=ou(n,a),a}});return t?yield t:r.authToken})}function su(n,e){return d(this,null,function*(){let t=yield Wo(n.appConfig);for(;t.authToken.requestStatus===1;)yield ta(100),t=yield Wo(n.appConfig);let r=t.authToken;return r.requestStatus===0?ai(n,e):r})}function Wo(n){return dn(n,e=>{if(!aa(e))throw We.create("not-registered");let t=e.authToken;return hu(t)?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e})}function ou(n,e){return d(this,null,function*(){try{let t=yield ru(n,e),r=Object.assign(Object.assign({},e),{authToken:t});return yield un(n.appConfig,r),t}catch(t){if(Qo(t)&&(t.customData.serverCode===401||t.customData.serverCode===404))yield sa(n.appConfig);else{let r=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});yield un(n.appConfig,r)}throw t}})}function aa(n){return n!==void 0&&n.registrationStatus===2}function au(n){return n.requestStatus===2&&!cu(n)}function cu(n){let e=Date.now();return e<n.creationTime||n.creationTime+n.expiresIn<e+Lh}function lu(n){let e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},n),{authToken:e})}function hu(n){return n.requestStatus===1&&n.requestTime+Ko<Date.now()}function uu(n){return d(this,null,function*(){let e=n,{installationEntry:t,registrationPromise:r}=yield oi(e);return r?r.catch(console.error):ai(e).catch(console.error),t.fid})}function fu(n,e=!1){return d(this,null,function*(){let t=n;return yield du(t),(yield ai(t,e)).token})}function du(n){return d(this,null,function*(){let{registrationPromise:e}=yield oi(n);e&&(yield e)})}function pu(n){if(!n||!n.options)throw ni("App Configuration");if(!n.name)throw ni("App Name");let e=["projectId","apiKey","appId"];for(let t of e)if(!n.options[t])throw ni(t);return{appName:n.name,projectId:n.options.projectId,apiKey:n.options.apiKey,appId:n.options.appId}}function ni(n){return We.create("missing-app-config-values",{valueName:n})}var ca="installations",mu="installations-internal",gu=n=>{let e=n.getProvider("app").getImmediate(),t=pu(e),r=st(e,"heartbeat");return{app:e,appConfig:t,heartbeatServiceProvider:r,_delete:()=>Promise.resolve()}},yu=n=>{let e=n.getProvider("app").getImmediate(),t=st(e,ca).getImmediate();return{getId:()=>uu(t),getToken:i=>fu(t,i)}};function _u(){Ee(new Y(ca,gu,"PUBLIC")),Ee(new Y(mu,yu,"PRIVATE"))}_u();oe(Vo,ii);oe(Vo,ii,"esm2017");var pn="analytics",bu="firebase_id",wu="origin",Su=60*1e3,vu="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",pi="https://www.googletagmanager.com/gtag/js";var V=new it("@firebase/analytics");var Eu={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},J=new ve("analytics","Analytics",Eu);function Tu(n){if(!n.startsWith(pi)){let e=J.create("invalid-gtag-resource",{gtagURL:n});return V.warn(e.message),""}return n}function ma(n){return Promise.all(n.map(e=>e.catch(t=>t)))}function Iu(n,e){let t;return window.trustedTypes&&(t=window.trustedTypes.createPolicy(n,e)),t}function Cu(n,e){let t=Iu("firebase-js-sdk-policy",{createScriptURL:Tu}),r=document.createElement("script"),i=`${pi}?l=${n}&id=${e}`;r.src=t?t?.createScriptURL(i):i,r.async=!0,document.head.appendChild(r)}function Au(n){let e=[];return Array.isArray(window[n])?e=window[n]:window[n]=e,e}function ku(n,e,t,r,i,s){return d(this,null,function*(){let o=r[i];try{if(o)yield e[o];else{let c=(yield ma(t)).find(l=>l.measurementId===i);c&&(yield e[c.appId])}}catch(a){V.error(a)}n("config",i,s)})}function Du(n,e,t,r,i){return d(this,null,function*(){try{let s=[];if(i&&i.send_to){let o=i.send_to;Array.isArray(o)||(o=[o]);let a=yield ma(t);for(let c of o){let l=a.find(f=>f.measurementId===c),h=l&&e[l.appId];if(h)s.push(h);else{s=[];break}}}s.length===0&&(s=Object.values(e)),yield Promise.all(s),n("event",r,i||{})}catch(s){V.error(s)}})}function Pu(n,e,t,r){function i(s,...o){return d(this,null,function*(){try{if(s==="event"){let[a,c]=o;yield Du(n,e,t,a,c)}else if(s==="config"){let[a,c]=o;yield ku(n,e,t,r,a,c)}else if(s==="consent"){let[a]=o;n("consent","update",a)}else if(s==="get"){let[a,c,l]=o;n("get",a,c,l)}else if(s==="set"){let[a]=o;n("set",a)}else n(s,...o)}catch(a){V.error(a)}})}return i}function Mu(n,e,t,r,i){let s=function(...o){window[r].push(arguments)};return window[i]&&typeof window[i]=="function"&&(s=window[i]),window[i]=Pu(s,n,e,t),{gtagCore:s,wrappedGtag:window[i]}}function Nu(n){let e=window.document.getElementsByTagName("script");for(let t of Object.values(e))if(t.src&&t.src.includes(pi)&&t.src.includes(n))return t;return null}var Ru=30,Ou=1e3,li=class{constructor(e={},t=Ou){this.throttleMetadata=e,this.intervalMillis=t}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,t){this.throttleMetadata[e]=t}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}},ga=new li;function Lu(n){return new Headers({Accept:"application/json","x-goog-api-key":n})}function xu(n){return d(this,null,function*(){var e;let{appId:t,apiKey:r}=n,i={method:"GET",headers:Lu(r)},s=vu.replace("{app-id}",t),o=yield fetch(s,i);if(o.status!==200&&o.status!==304){let a="";try{let c=yield o.json();!((e=c.error)===null||e===void 0)&&e.message&&(a=c.error.message)}catch{}throw J.create("config-fetch-failed",{httpStatus:o.status,responseMessage:a})}return o.json()})}function $u(r){return d(this,arguments,function*(n,e=ga,t){let{appId:i,apiKey:s,measurementId:o}=n.options;if(!i)throw J.create("no-app-id");if(!s){if(o)return{measurementId:o,appId:i};throw J.create("no-api-key")}let a=e.getThrottleMetadata(i)||{backoffCount:0,throttleEndTimeMillis:Date.now()},c=new hi;return setTimeout(()=>d(this,null,function*(){c.abort()}),t!==void 0?t:Su),ya({appId:i,apiKey:s,measurementId:o},a,c,e)})}function ya(s,o,a){return d(this,arguments,function*(n,{throttleEndTimeMillis:e,backoffCount:t},r,i=ga){var c;let{appId:l,measurementId:h}=n;try{yield Fu(r,e)}catch(f){if(h)return V.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${h} provided in the "measurementId" field in the local Firebase config. [${f?.message}]`),{appId:l,measurementId:h};throw f}try{let f=yield xu(n);return i.deleteThrottleMetadata(l),f}catch(f){let p=f;if(!Bu(p)){if(i.deleteThrottleMetadata(l),h)return V.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${h} provided in the "measurementId" field in the local Firebase config. [${p?.message}]`),{appId:l,measurementId:h};throw f}let m=Number((c=p?.customData)===null||c===void 0?void 0:c.httpStatus)===503?Nr(t,i.intervalMillis,Ru):Nr(t,i.intervalMillis),y={throttleEndTimeMillis:Date.now()+m,backoffCount:t+1};return i.setThrottleMetadata(l,y),V.debug(`Calling attemptFetch again in ${m} millis`),ya(n,y,r,i)}})}function Fu(n,e){return new Promise((t,r)=>{let i=Math.max(e-Date.now(),0),s=setTimeout(t,i);n.addEventListener(()=>{clearTimeout(s),r(J.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function Bu(n){if(!(n instanceof se)||!n.customData)return!1;let e=Number(n.customData.httpStatus);return e===429||e===500||e===503||e===504}var hi=class{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}};var ui;function ju(n,e,t,r,i){return d(this,null,function*(){if(i&&i.global){n("event",t,r);return}else{let s=yield e,o=Object.assign(Object.assign({},r),{send_to:s});n("event",t,o)}})}var fi;function Hu(n){fi=n}function Uu(n){ui=n}function zu(){return d(this,null,function*(){if(sn())try{yield on()}catch(n){return V.warn(J.create("indexeddb-unavailable",{errorInfo:n?.toString()}).message),!1}else return V.warn(J.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0})}function Wu(n,e,t,r,i,s,o){return d(this,null,function*(){var a;let c=$u(n);c.then(m=>{t[m.measurementId]=m.appId,n.options.measurementId&&m.measurementId!==n.options.measurementId&&V.warn(`The measurement ID in the local Firebase config (${n.options.measurementId}) does not match the measurement ID fetched from the server (${m.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(m=>V.error(m)),e.push(c);let l=zu().then(m=>{if(m)return r.getId()}),[h,f]=yield Promise.all([c,l]);Nu(s)||Cu(s,h.measurementId),fi&&(i("consent","default",fi),Hu(void 0)),i("js",new Date);let p=(a=o?.config)!==null&&a!==void 0?a:{};return p[wu]="firebase",p.update=!0,f!=null&&(p[bu]=f),i("config",h.measurementId,p),ui&&(i("set",ui),Uu(void 0)),h.measurementId})}var di=class{constructor(e){this.app=e}_delete(){return delete Et[this.app.options.appId],Promise.resolve()}},Et={},la=[],ha={},ci="dataLayer",Vu="gtag",ua,_a,fa=!1;function Ku(){let n=[];if(So()&&n.push("This is a browser extension environment."),vo()||n.push("Cookies are not available."),n.length>0){let e=n.map((r,i)=>`(${i+1}) ${r}`).join(" "),t=J.create("invalid-analytics-context",{errorInfo:e});V.warn(t.message)}}function qu(n,e,t){Ku();let r=n.options.appId;if(!r)throw J.create("no-app-id");if(!n.options.apiKey)if(n.options.measurementId)V.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${n.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw J.create("no-api-key");if(Et[r]!=null)throw J.create("already-exists",{id:r});if(!fa){Au(ci);let{wrappedGtag:s,gtagCore:o}=Mu(Et,la,ha,ci,Vu);_a=s,ua=o,fa=!0}return Et[r]=Wu(n,la,ha,e,ua,ci,t),new di(n)}function ba(n=Qr()){n=Rr(n);let e=st(n,pn);return e.isInitialized()?e.getImmediate():Gu(n)}function Gu(n,e={}){let t=st(n,pn);if(t.isInitialized()){let i=t.getImmediate();if(rt(e,t.getOptions()))return i;throw J.create("already-initialized")}return t.initialize({options:e})}function Qu(n,e,t,r){n=Rr(n),ju(_a,Et[n.app.options.appId],e,t,r).catch(i=>V.error(i))}var da="@firebase/analytics",pa="0.10.0";function Yu(){Ee(new Y(pn,(e,{options:t})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("installations-internal").getImmediate();return qu(r,i,t)},"PUBLIC")),Ee(new Y("analytics-internal",n,"PRIVATE")),oe(da,pa),oe(da,pa,"esm2017");function n(e){try{let t=e.getProvider(pn).getImmediate();return{logEvent:(r,i,s)=>Qu(t,r,i,s)}}catch(t){throw J.create("interop-component-reg-failed",{reason:t})}}}Yu();var Ju="firebase",Xu="9.23.0";oe(Ju,Xu,"app");var re=class extends Error{constructor(e,t){let r=new.target.prototype;super(`${e}: Status code '${t}'`),this.statusCode=t,this.__proto__=r}},ke=class extends Error{constructor(e="A timeout occurred."){let t=new.target.prototype;super(e),this.__proto__=t}},H=class extends Error{constructor(e="An abort occurred."){let t=new.target.prototype;super(e),this.__proto__=t}},mn=class extends Error{constructor(e,t){let r=new.target.prototype;super(e),this.transport=t,this.errorType="UnsupportedTransportError",this.__proto__=r}},gn=class extends Error{constructor(e,t){let r=new.target.prototype;super(e),this.transport=t,this.errorType="DisabledTransportError",this.__proto__=r}},yn=class extends Error{constructor(e,t){let r=new.target.prototype;super(e),this.transport=t,this.errorType="FailedToStartTransportError",this.__proto__=r}},_n=class extends Error{constructor(e){let t=new.target.prototype;super(e),this.errorType="FailedToNegotiateWithServerError",this.__proto__=t}},bn=class extends Error{constructor(e,t){let r=new.target.prototype;super(e),this.innerErrors=t,this.__proto__=r}};var ot=class{constructor(e,t,r){this.statusCode=e,this.statusText=t,this.content=r}},ge=class{get(e,t){return this.send(le(S({},t),{method:"GET",url:e}))}post(e,t){return this.send(le(S({},t),{method:"POST",url:e}))}delete(e,t){return this.send(le(S({},t),{method:"DELETE",url:e}))}getCookieString(e){return""}};var u=function(n){return n[n.Trace=0]="Trace",n[n.Debug=1]="Debug",n[n.Information=2]="Information",n[n.Warning=3]="Warning",n[n.Error=4]="Error",n[n.Critical=5]="Critical",n[n.None=6]="None",n}(u||{});var ye=class{constructor(){}log(e,t){}};ye.instance=new ye;var Zu="7.0.14",k=class{static isRequired(e,t){if(e==null)throw new Error(`The '${t}' argument is required.`)}static isNotEmpty(e,t){if(!e||e.match(/^\s*$/))throw new Error(`The '${t}' argument should not be empty.`)}static isIn(e,t,r){if(!(e in t))throw new Error(`Unknown ${r} value: ${e}.`)}},D=class{static get isBrowser(){return typeof window=="object"&&typeof window.document=="object"}static get isWebWorker(){return typeof self=="object"&&"importScripts"in self}static get isReactNative(){return typeof window=="object"&&typeof window.document>"u"}static get isNode(){return!this.isBrowser&&!this.isWebWorker&&!this.isReactNative}};function De(n,e){let t="";return Pe(n)?(t=`Binary data of length ${n.byteLength}`,e&&(t+=`. Content: '${ef(n)}'`)):typeof n=="string"&&(t=`String data of length ${n.length}`,e&&(t+=`. Content: '${n}'`)),t}function ef(n){let e=new Uint8Array(n),t="";return e.forEach(r=>{let i=r<16?"0":"";t+=`0x${i}${r.toString(16)} `}),t.substr(0,t.length-1)}function Pe(n){return n&&typeof ArrayBuffer<"u"&&(n instanceof ArrayBuffer||n.constructor&&n.constructor.name==="ArrayBuffer")}function Sn(n,e,t,r,i,s){return d(this,null,function*(){let o={},[a,c]=_e();o[a]=c,n.log(u.Trace,`(${e} transport) sending data. ${De(i,s.logMessageContent)}.`);let l=Pe(i)?"arraybuffer":"text",h=yield t.post(r,{content:i,headers:S(S({},o),s.headers),responseType:l,timeout:s.timeout,withCredentials:s.withCredentials});n.log(u.Trace,`(${e} transport) request complete. Response status: ${h.statusCode}.`)})}function wa(n){return n===void 0?new Ke(u.Information):n===null?ye.instance:n.log!==void 0?n:new Ke(n)}var wn=class{constructor(e,t){this._subject=e,this._observer=t}dispose(){let e=this._subject.observers.indexOf(this._observer);e>-1&&this._subject.observers.splice(e,1),this._subject.observers.length===0&&this._subject.cancelCallback&&this._subject.cancelCallback().catch(t=>{})}},Ke=class{constructor(e){this._minLevel=e,this.out=console}log(e,t){if(e>=this._minLevel){let r=`[${new Date().toISOString()}] ${u[e]}: ${t}`;switch(e){case u.Critical:case u.Error:this.out.error(r);break;case u.Warning:this.out.warn(r);break;case u.Information:this.out.info(r);break;default:this.out.log(r);break}}}};function _e(){let n="X-SignalR-User-Agent";return D.isNode&&(n="User-Agent"),[n,tf(Zu,nf(),sf(),rf())]}function tf(n,e,t,r){let i="Microsoft SignalR/",s=n.split(".");return i+=`${s[0]}.${s[1]}`,i+=` (${n}; `,e&&e!==""?i+=`${e}; `:i+="Unknown OS; ",i+=`${t}`,r?i+=`; ${r}`:i+="; Unknown Runtime Version",i+=")",i}function nf(){if(D.isNode)switch(process.platform){case"win32":return"Windows NT";case"darwin":return"macOS";case"linux":return"Linux";default:return process.platform}else return""}function rf(){if(D.isNode)return process.versions.node}function sf(){return D.isNode?"NodeJS":"Browser"}function mi(n){return n.stack?n.stack:n.message?n.message:`${n}`}function Sa(){if(typeof globalThis<"u")return globalThis;if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("could not find global")}var vn=class extends ge{constructor(e){if(super(),this._logger=e,typeof fetch>"u"){let t=typeof __webpack_require__=="function"?__non_webpack_require__:Qe;this._jar=new(t("tough-cookie")).CookieJar,this._fetchType=t("node-fetch"),this._fetchType=t("fetch-cookie")(this._fetchType,this._jar)}else this._fetchType=fetch.bind(Sa());if(typeof AbortController>"u"){let t=typeof __webpack_require__=="function"?__non_webpack_require__:Qe;this._abortControllerType=t("abort-controller")}else this._abortControllerType=AbortController}send(e){return d(this,null,function*(){if(e.abortSignal&&e.abortSignal.aborted)throw new H;if(!e.method)throw new Error("No method defined.");if(!e.url)throw new Error("No url defined.");let t=new this._abortControllerType,r;e.abortSignal&&(e.abortSignal.onabort=()=>{t.abort(),r=new H});let i=null;if(e.timeout){let c=e.timeout;i=setTimeout(()=>{t.abort(),this._logger.log(u.Warning,"Timeout from HTTP request."),r=new ke},c)}e.content===""&&(e.content=void 0),e.content&&(e.headers=e.headers||{},Pe(e.content)?e.headers["Content-Type"]="application/octet-stream":e.headers["Content-Type"]="text/plain;charset=UTF-8");let s;try{s=yield this._fetchType(e.url,{body:e.content,cache:"no-cache",credentials:e.withCredentials===!0?"include":"same-origin",headers:S({"X-Requested-With":"XMLHttpRequest"},e.headers),method:e.method,mode:"cors",redirect:"follow",signal:t.signal})}catch(c){throw r||(this._logger.log(u.Warning,`Error from HTTP request. ${c}.`),c)}finally{i&&clearTimeout(i),e.abortSignal&&(e.abortSignal.onabort=null)}if(!s.ok){let c=yield va(s,"text");throw new re(c||s.statusText,s.status)}let a=yield va(s,e.responseType);return new ot(s.status,s.statusText,a)})}getCookieString(e){let t="";return D.isNode&&this._jar&&this._jar.getCookies(e,(r,i)=>t=i.join("; ")),t}};function va(n,e){let t;switch(e){case"arraybuffer":t=n.arrayBuffer();break;case"text":t=n.text();break;case"blob":case"document":case"json":throw new Error(`${e} is not supported.`);default:t=n.text();break}return t}var En=class extends ge{constructor(e){super(),this._logger=e}send(e){return e.abortSignal&&e.abortSignal.aborted?Promise.reject(new H):e.method?e.url?new Promise((t,r)=>{let i=new XMLHttpRequest;i.open(e.method,e.url,!0),i.withCredentials=e.withCredentials===void 0?!0:e.withCredentials,i.setRequestHeader("X-Requested-With","XMLHttpRequest"),e.content===""&&(e.content=void 0),e.content&&(Pe(e.content)?i.setRequestHeader("Content-Type","application/octet-stream"):i.setRequestHeader("Content-Type","text/plain;charset=UTF-8"));let s=e.headers;s&&Object.keys(s).forEach(o=>{i.setRequestHeader(o,s[o])}),e.responseType&&(i.responseType=e.responseType),e.abortSignal&&(e.abortSignal.onabort=()=>{i.abort(),r(new H)}),e.timeout&&(i.timeout=e.timeout),i.onload=()=>{e.abortSignal&&(e.abortSignal.onabort=null),i.status>=200&&i.status<300?t(new ot(i.status,i.statusText,i.response||i.responseText)):r(new re(i.response||i.responseText||i.statusText,i.status))},i.onerror=()=>{this._logger.log(u.Warning,`Error from HTTP request. ${i.status}: ${i.statusText}.`),r(new re(i.statusText,i.status))},i.ontimeout=()=>{this._logger.log(u.Warning,"Timeout from HTTP request."),r(new ke)},i.send(e.content)}):Promise.reject(new Error("No url defined.")):Promise.reject(new Error("No method defined."))}};var Tn=class extends ge{constructor(e){if(super(),typeof fetch<"u"||D.isNode)this._httpClient=new vn(e);else if(typeof XMLHttpRequest<"u")this._httpClient=new En(e);else throw new Error("No usable HttpClient found.")}send(e){return e.abortSignal&&e.abortSignal.aborted?Promise.reject(new H):e.method?e.url?this._httpClient.send(e):Promise.reject(new Error("No url defined.")):Promise.reject(new Error("No method defined."))}getCookieString(e){return this._httpClient.getCookieString(e)}};var X=class n{static write(e){return`${e}${n.RecordSeparator}`}static parse(e){if(e[e.length-1]!==n.RecordSeparator)throw new Error("Message is incomplete.");let t=e.split(n.RecordSeparator);return t.pop(),t}};X.RecordSeparatorCode=30;X.RecordSeparator=String.fromCharCode(X.RecordSeparatorCode);var In=class{writeHandshakeRequest(e){return X.write(JSON.stringify(e))}parseHandshakeResponse(e){let t,r;if(Pe(e)){let a=new Uint8Array(e),c=a.indexOf(X.RecordSeparatorCode);if(c===-1)throw new Error("Message is incomplete.");let l=c+1;t=String.fromCharCode.apply(null,Array.prototype.slice.call(a.slice(0,l))),r=a.byteLength>l?a.slice(l).buffer:null}else{let a=e,c=a.indexOf(X.RecordSeparator);if(c===-1)throw new Error("Message is incomplete.");let l=c+1;t=a.substring(0,l),r=a.length>l?a.substring(l):null}let i=X.parse(t),s=JSON.parse(i[0]);if(s.type)throw new Error("Expected a handshake response from the server.");return[r,s]}};var C=function(n){return n[n.Invocation=1]="Invocation",n[n.StreamItem=2]="StreamItem",n[n.Completion=3]="Completion",n[n.StreamInvocation=4]="StreamInvocation",n[n.CancelInvocation=5]="CancelInvocation",n[n.Ping=6]="Ping",n[n.Close=7]="Close",n}(C||{});var Cn=class{constructor(){this.observers=[]}next(e){for(let t of this.observers)t.next(e)}error(e){for(let t of this.observers)t.error&&t.error(e)}complete(){for(let e of this.observers)e.complete&&e.complete()}subscribe(e){return this.observers.push(e),new wn(this,e)}};var of=30*1e3,af=15*1e3,R=function(n){return n.Disconnected="Disconnected",n.Connecting="Connecting",n.Connected="Connected",n.Disconnecting="Disconnecting",n.Reconnecting="Reconnecting",n}(R||{}),An=class n{constructor(e,t,r,i){this._nextKeepAlive=0,this._freezeEventListener=()=>{this._logger.log(u.Warning,"The page is being frozen, this will likely lead to the connection being closed and messages being lost. For more information see the docs at https://docs.microsoft.com/aspnet/core/signalr/javascript-client#bsleep")},k.isRequired(e,"connection"),k.isRequired(t,"logger"),k.isRequired(r,"protocol"),this.serverTimeoutInMilliseconds=of,this.keepAliveIntervalInMilliseconds=af,this._logger=t,this._protocol=r,this.connection=e,this._reconnectPolicy=i,this._handshakeProtocol=new In,this.connection.onreceive=s=>this._processIncomingData(s),this.connection.onclose=s=>this._connectionClosed(s),this._callbacks={},this._methods={},this._closedCallbacks=[],this._reconnectingCallbacks=[],this._reconnectedCallbacks=[],this._invocationId=0,this._receivedHandshakeResponse=!1,this._connectionState=R.Disconnected,this._connectionStarted=!1,this._cachedPingMessage=this._protocol.writeMessage({type:C.Ping})}static create(e,t,r,i){return new n(e,t,r,i)}get state(){return this._connectionState}get connectionId(){return this.connection&&this.connection.connectionId||null}get baseUrl(){return this.connection.baseUrl||""}set baseUrl(e){if(this._connectionState!==R.Disconnected&&this._connectionState!==R.Reconnecting)throw new Error("The HubConnection must be in the Disconnected or Reconnecting state to change the url.");if(!e)throw new Error("The HubConnection url must be a valid url.");this.connection.baseUrl=e}start(){return this._startPromise=this._startWithStateTransitions(),this._startPromise}_startWithStateTransitions(){return d(this,null,function*(){if(this._connectionState!==R.Disconnected)return Promise.reject(new Error("Cannot start a HubConnection that is not in the 'Disconnected' state."));this._connectionState=R.Connecting,this._logger.log(u.Debug,"Starting HubConnection.");try{yield this._startInternal(),D.isBrowser&&window.document.addEventListener("freeze",this._freezeEventListener),this._connectionState=R.Connected,this._connectionStarted=!0,this._logger.log(u.Debug,"HubConnection connected successfully.")}catch(e){return this._connectionState=R.Disconnected,this._logger.log(u.Debug,`HubConnection failed to start successfully because of error '${e}'.`),Promise.reject(e)}})}_startInternal(){return d(this,null,function*(){this._stopDuringStartError=void 0,this._receivedHandshakeResponse=!1;let e=new Promise((t,r)=>{this._handshakeResolver=t,this._handshakeRejecter=r});yield this.connection.start(this._protocol.transferFormat);try{let t={protocol:this._protocol.name,version:this._protocol.version};if(this._logger.log(u.Debug,"Sending handshake request."),yield this._sendMessage(this._handshakeProtocol.writeHandshakeRequest(t)),this._logger.log(u.Information,`Using HubProtocol '${this._protocol.name}'.`),this._cleanupTimeout(),this._resetTimeoutPeriod(),this._resetKeepAliveInterval(),yield e,this._stopDuringStartError)throw this._stopDuringStartError;this.connection.features.inherentKeepAlive||(yield this._sendMessage(this._cachedPingMessage))}catch(t){throw this._logger.log(u.Debug,`Hub handshake failed with error '${t}' during start(). Stopping HubConnection.`),this._cleanupTimeout(),this._cleanupPingTimer(),yield this.connection.stop(t),t}})}stop(){return d(this,null,function*(){let e=this._startPromise;this._stopPromise=this._stopInternal(),yield this._stopPromise;try{yield e}catch{}})}_stopInternal(e){return this._connectionState===R.Disconnected?(this._logger.log(u.Debug,`Call to HubConnection.stop(${e}) ignored because it is already in the disconnected state.`),Promise.resolve()):this._connectionState===R.Disconnecting?(this._logger.log(u.Debug,`Call to HttpConnection.stop(${e}) ignored because the connection is already in the disconnecting state.`),this._stopPromise):(this._connectionState=R.Disconnecting,this._logger.log(u.Debug,"Stopping HubConnection."),this._reconnectDelayHandle?(this._logger.log(u.Debug,"Connection stopped during reconnect delay. Done reconnecting."),clearTimeout(this._reconnectDelayHandle),this._reconnectDelayHandle=void 0,this._completeClose(),Promise.resolve()):(this._cleanupTimeout(),this._cleanupPingTimer(),this._stopDuringStartError=e||new H("The connection was stopped before the hub handshake could complete."),this.connection.stop(e)))}stream(e,...t){let[r,i]=this._replaceStreamingParams(t),s=this._createStreamInvocation(e,t,i),o,a=new Cn;return a.cancelCallback=()=>{let c=this._createCancelInvocation(s.invocationId);return delete this._callbacks[s.invocationId],o.then(()=>this._sendWithProtocol(c))},this._callbacks[s.invocationId]=(c,l)=>{if(l){a.error(l);return}else c&&(c.type===C.Completion?c.error?a.error(new Error(c.error)):a.complete():a.next(c.item))},o=this._sendWithProtocol(s).catch(c=>{a.error(c),delete this._callbacks[s.invocationId]}),this._launchStreams(r,o),a}_sendMessage(e){return this._resetKeepAliveInterval(),this.connection.send(e)}_sendWithProtocol(e){return this._sendMessage(this._protocol.writeMessage(e))}send(e,...t){let[r,i]=this._replaceStreamingParams(t),s=this._sendWithProtocol(this._createInvocation(e,t,!0,i));return this._launchStreams(r,s),s}invoke(e,...t){let[r,i]=this._replaceStreamingParams(t),s=this._createInvocation(e,t,!1,i);return new Promise((a,c)=>{this._callbacks[s.invocationId]=(h,f)=>{if(f){c(f);return}else h&&(h.type===C.Completion?h.error?c(new Error(h.error)):a(h.result):c(new Error(`Unexpected message type: ${h.type}`)))};let l=this._sendWithProtocol(s).catch(h=>{c(h),delete this._callbacks[s.invocationId]});this._launchStreams(r,l)})}on(e,t){!e||!t||(e=e.toLowerCase(),this._methods[e]||(this._methods[e]=[]),this._methods[e].indexOf(t)===-1&&this._methods[e].push(t))}off(e,t){if(!e)return;e=e.toLowerCase();let r=this._methods[e];if(r)if(t){let i=r.indexOf(t);i!==-1&&(r.splice(i,1),r.length===0&&delete this._methods[e])}else delete this._methods[e]}onclose(e){e&&this._closedCallbacks.push(e)}onreconnecting(e){e&&this._reconnectingCallbacks.push(e)}onreconnected(e){e&&this._reconnectedCallbacks.push(e)}_processIncomingData(e){if(this._cleanupTimeout(),this._receivedHandshakeResponse||(e=this._processHandshakeResponse(e),this._receivedHandshakeResponse=!0),e){let t=this._protocol.parseMessages(e,this._logger);for(let r of t)switch(r.type){case C.Invocation:this._invokeClientMethod(r);break;case C.StreamItem:case C.Completion:{let i=this._callbacks[r.invocationId];if(i){r.type===C.Completion&&delete this._callbacks[r.invocationId];try{i(r)}catch(s){this._logger.log(u.Error,`Stream callback threw error: ${mi(s)}`)}}break}case C.Ping:break;case C.Close:{this._logger.log(u.Information,"Close message received from server.");let i=r.error?new Error("Server returned an error on close: "+r.error):void 0;r.allowReconnect===!0?this.connection.stop(i):this._stopPromise=this._stopInternal(i);break}default:this._logger.log(u.Warning,`Invalid message type: ${r.type}.`);break}}this._resetTimeoutPeriod()}_processHandshakeResponse(e){let t,r;try{[r,t]=this._handshakeProtocol.parseHandshakeResponse(e)}catch(i){let s="Error parsing handshake response: "+i;this._logger.log(u.Error,s);let o=new Error(s);throw this._handshakeRejecter(o),o}if(t.error){let i="Server returned handshake error: "+t.error;this._logger.log(u.Error,i);let s=new Error(i);throw this._handshakeRejecter(s),s}else this._logger.log(u.Debug,"Server handshake complete.");return this._handshakeResolver(),r}_resetKeepAliveInterval(){this.connection.features.inherentKeepAlive||(this._nextKeepAlive=new Date().getTime()+this.keepAliveIntervalInMilliseconds,this._cleanupPingTimer())}_resetTimeoutPeriod(){if((!this.connection.features||!this.connection.features.inherentKeepAlive)&&(this._timeoutHandle=setTimeout(()=>this.serverTimeout(),this.serverTimeoutInMilliseconds),this._pingServerHandle===void 0)){let e=this._nextKeepAlive-new Date().getTime();e<0&&(e=0),this._pingServerHandle=setTimeout(()=>d(this,null,function*(){if(this._connectionState===R.Connected)try{yield this._sendMessage(this._cachedPingMessage)}catch{this._cleanupPingTimer()}}),e)}}serverTimeout(){this.connection.stop(new Error("Server timeout elapsed without receiving a message from the server."))}_invokeClientMethod(e){return d(this,null,function*(){let t=e.target.toLowerCase(),r=this._methods[t];if(!r){this._logger.log(u.Warning,`No client method with the name '${t}' found.`),e.invocationId&&(this._logger.log(u.Warning,`No result given for '${t}' method and invocation ID '${e.invocationId}'.`),yield this._sendWithProtocol(this._createCompletionMessage(e.invocationId,"Client didn't provide a result.",null)));return}let i=r.slice(),s=!!e.invocationId,o,a,c;for(let l of i)try{let h=o;o=yield l.apply(this,e.arguments),s&&o&&h&&(this._logger.log(u.Error,`Multiple results provided for '${t}'. Sending error to server.`),c=this._createCompletionMessage(e.invocationId,"Client provided multiple results.",null)),a=void 0}catch(h){a=h,this._logger.log(u.Error,`A callback for the method '${t}' threw error '${h}'.`)}c?yield this._sendWithProtocol(c):s?(a?c=this._createCompletionMessage(e.invocationId,`${a}`,null):o!==void 0?c=this._createCompletionMessage(e.invocationId,null,o):(this._logger.log(u.Warning,`No result given for '${t}' method and invocation ID '${e.invocationId}'.`),c=this._createCompletionMessage(e.invocationId,"Client didn't provide a result.",null)),yield this._sendWithProtocol(c)):o&&this._logger.log(u.Error,`Result given for '${t}' method but server is not expecting a result.`)})}_connectionClosed(e){this._logger.log(u.Debug,`HubConnection.connectionClosed(${e}) called while in state ${this._connectionState}.`),this._stopDuringStartError=this._stopDuringStartError||e||new H("The underlying connection was closed before the hub handshake could complete."),this._handshakeResolver&&this._handshakeResolver(),this._cancelCallbacksWithError(e||new Error("Invocation canceled due to the underlying connection being closed.")),this._cleanupTimeout(),this._cleanupPingTimer(),this._connectionState===R.Disconnecting?this._completeClose(e):this._connectionState===R.Connected&&this._reconnectPolicy?this._reconnect(e):this._connectionState===R.Connected&&this._completeClose(e)}_completeClose(e){if(this._connectionStarted){this._connectionState=R.Disconnected,this._connectionStarted=!1,D.isBrowser&&window.document.removeEventListener("freeze",this._freezeEventListener);try{this._closedCallbacks.forEach(t=>t.apply(this,[e]))}catch(t){this._logger.log(u.Error,`An onclose callback called with error '${e}' threw error '${t}'.`)}}}_reconnect(e){return d(this,null,function*(){let t=Date.now(),r=0,i=e!==void 0?e:new Error("Attempting to reconnect due to a unknown error."),s=this._getNextRetryDelay(r++,0,i);if(s===null){this._logger.log(u.Debug,"Connection not reconnecting because the IRetryPolicy returned null on the first reconnect attempt."),this._completeClose(e);return}if(this._connectionState=R.Reconnecting,e?this._logger.log(u.Information,`Connection reconnecting because of error '${e}'.`):this._logger.log(u.Information,"Connection reconnecting."),this._reconnectingCallbacks.length!==0){try{this._reconnectingCallbacks.forEach(o=>o.apply(this,[e]))}catch(o){this._logger.log(u.Error,`An onreconnecting callback called with error '${e}' threw error '${o}'.`)}if(this._connectionState!==R.Reconnecting){this._logger.log(u.Debug,"Connection left the reconnecting state in onreconnecting callback. Done reconnecting.");return}}for(;s!==null;){if(this._logger.log(u.Information,`Reconnect attempt number ${r} will start in ${s} ms.`),yield new Promise(o=>{this._reconnectDelayHandle=setTimeout(o,s)}),this._reconnectDelayHandle=void 0,this._connectionState!==R.Reconnecting){this._logger.log(u.Debug,"Connection left the reconnecting state during reconnect delay. Done reconnecting.");return}try{if(yield this._startInternal(),this._connectionState=R.Connected,this._logger.log(u.Information,"HubConnection reconnected successfully."),this._reconnectedCallbacks.length!==0)try{this._reconnectedCallbacks.forEach(o=>o.apply(this,[this.connection.connectionId]))}catch(o){this._logger.log(u.Error,`An onreconnected callback called with connectionId '${this.connection.connectionId}; threw error '${o}'.`)}return}catch(o){if(this._logger.log(u.Information,`Reconnect attempt failed because of error '${o}'.`),this._connectionState!==R.Reconnecting){this._logger.log(u.Debug,`Connection moved to the '${this._connectionState}' from the reconnecting state during reconnect attempt. Done reconnecting.`),this._connectionState===R.Disconnecting&&this._completeClose();return}i=o instanceof Error?o:new Error(o.toString()),s=this._getNextRetryDelay(r++,Date.now()-t,i)}}this._logger.log(u.Information,`Reconnect retries have been exhausted after ${Date.now()-t} ms and ${r} failed attempts. Connection disconnecting.`),this._completeClose()})}_getNextRetryDelay(e,t,r){try{return this._reconnectPolicy.nextRetryDelayInMilliseconds({elapsedMilliseconds:t,previousRetryCount:e,retryReason:r})}catch(i){return this._logger.log(u.Error,`IRetryPolicy.nextRetryDelayInMilliseconds(${e}, ${t}) threw error '${i}'.`),null}}_cancelCallbacksWithError(e){let t=this._callbacks;this._callbacks={},Object.keys(t).forEach(r=>{let i=t[r];try{i(null,e)}catch(s){this._logger.log(u.Error,`Stream 'error' callback called with '${e}' threw error: ${mi(s)}`)}})}_cleanupPingTimer(){this._pingServerHandle&&(clearTimeout(this._pingServerHandle),this._pingServerHandle=void 0)}_cleanupTimeout(){this._timeoutHandle&&clearTimeout(this._timeoutHandle)}_createInvocation(e,t,r,i){if(r)return i.length!==0?{arguments:t,streamIds:i,target:e,type:C.Invocation}:{arguments:t,target:e,type:C.Invocation};{let s=this._invocationId;return this._invocationId++,i.length!==0?{arguments:t,invocationId:s.toString(),streamIds:i,target:e,type:C.Invocation}:{arguments:t,invocationId:s.toString(),target:e,type:C.Invocation}}}_launchStreams(e,t){if(e.length!==0){t||(t=Promise.resolve());for(let r in e)e[r].subscribe({complete:()=>{t=t.then(()=>this._sendWithProtocol(this._createCompletionMessage(r)))},error:i=>{let s;i instanceof Error?s=i.message:i&&i.toString?s=i.toString():s="Unknown error",t=t.then(()=>this._sendWithProtocol(this._createCompletionMessage(r,s)))},next:i=>{t=t.then(()=>this._sendWithProtocol(this._createStreamItemMessage(r,i)))}})}}_replaceStreamingParams(e){let t=[],r=[];for(let i=0;i<e.length;i++){let s=e[i];if(this._isObservable(s)){let o=this._invocationId;this._invocationId++,t[o]=s,r.push(o.toString()),e.splice(i,1)}}return[t,r]}_isObservable(e){return e&&e.subscribe&&typeof e.subscribe=="function"}_createStreamInvocation(e,t,r){let i=this._invocationId;return this._invocationId++,r.length!==0?{arguments:t,invocationId:i.toString(),streamIds:r,target:e,type:C.StreamInvocation}:{arguments:t,invocationId:i.toString(),target:e,type:C.StreamInvocation}}_createCancelInvocation(e){return{invocationId:e,type:C.CancelInvocation}}_createStreamItemMessage(e,t){return{invocationId:e,item:t,type:C.StreamItem}}_createCompletionMessage(e,t,r){return t?{error:t,invocationId:e,type:C.Completion}:{invocationId:e,result:r,type:C.Completion}}};var cf=[0,2e3,1e4,3e4,null],Tt=class{constructor(e){this._retryDelays=e!==void 0?[...e,null]:cf}nextRetryDelayInMilliseconds(e){return this._retryDelays[e.previousRetryCount]}};var qe=(()=>{class n{}return n.Authorization="Authorization",n.Cookie="Cookie",n})();var kn=class extends ge{constructor(e,t){super(),this._innerClient=e,this._accessTokenFactory=t}send(e){return d(this,null,function*(){let t=!0;this._accessTokenFactory&&(!this._accessToken||e.url&&e.url.indexOf("/negotiate?")>0)&&(t=!1,this._accessToken=yield this._accessTokenFactory()),this._setAuthorizationHeader(e);let r=yield this._innerClient.send(e);return t&&r.statusCode===401&&this._accessTokenFactory?(this._accessToken=yield this._accessTokenFactory(),this._setAuthorizationHeader(e),yield this._innerClient.send(e)):r})}_setAuthorizationHeader(e){e.headers||(e.headers={}),this._accessToken?e.headers[qe.Authorization]=`Bearer ${this._accessToken}`:this._accessTokenFactory&&e.headers[qe.Authorization]&&delete e.headers[qe.Authorization]}getCookieString(e){return this._innerClient.getCookieString(e)}};var L=function(n){return n[n.None=0]="None",n[n.WebSockets=1]="WebSockets",n[n.ServerSentEvents=2]="ServerSentEvents",n[n.LongPolling=4]="LongPolling",n}(L||{}),x=function(n){return n[n.Text=1]="Text",n[n.Binary=2]="Binary",n}(x||{});var Dn=class{constructor(){this._isAborted=!1,this.onabort=null}abort(){this._isAborted||(this._isAborted=!0,this.onabort&&this.onabort())}get signal(){return this}get aborted(){return this._isAborted}};var It=class{constructor(e,t,r){this._httpClient=e,this._logger=t,this._pollAbort=new Dn,this._options=r,this._running=!1,this.onreceive=null,this.onclose=null}get pollAborted(){return this._pollAbort.aborted}connect(e,t){return d(this,null,function*(){if(k.isRequired(e,"url"),k.isRequired(t,"transferFormat"),k.isIn(t,x,"transferFormat"),this._url=e,this._logger.log(u.Trace,"(LongPolling transport) Connecting."),t===x.Binary&&typeof XMLHttpRequest<"u"&&typeof new XMLHttpRequest().responseType!="string")throw new Error("Binary protocols over XmlHttpRequest not implementing advanced features are not supported.");let[r,i]=_e(),s=S({[r]:i},this._options.headers),o={abortSignal:this._pollAbort.signal,headers:s,timeout:1e5,withCredentials:this._options.withCredentials};t===x.Binary&&(o.responseType="arraybuffer");let a=`${e}&_=${Date.now()}`;this._logger.log(u.Trace,`(LongPolling transport) polling: ${a}.`);let c=yield this._httpClient.get(a,o);c.statusCode!==200?(this._logger.log(u.Error,`(LongPolling transport) Unexpected response code: ${c.statusCode}.`),this._closeError=new re(c.statusText||"",c.statusCode),this._running=!1):this._running=!0,this._receiving=this._poll(this._url,o)})}_poll(e,t){return d(this,null,function*(){try{for(;this._running;)try{let r=`${e}&_=${Date.now()}`;this._logger.log(u.Trace,`(LongPolling transport) polling: ${r}.`);let i=yield this._httpClient.get(r,t);i.statusCode===204?(this._logger.log(u.Information,"(LongPolling transport) Poll terminated by server."),this._running=!1):i.statusCode!==200?(this._logger.log(u.Error,`(LongPolling transport) Unexpected response code: ${i.statusCode}.`),this._closeError=new re(i.statusText||"",i.statusCode),this._running=!1):i.content?(this._logger.log(u.Trace,`(LongPolling transport) data received. ${De(i.content,this._options.logMessageContent)}.`),this.onreceive&&this.onreceive(i.content)):this._logger.log(u.Trace,"(LongPolling transport) Poll timed out, reissuing.")}catch(r){this._running?r instanceof ke?this._logger.log(u.Trace,"(LongPolling transport) Poll timed out, reissuing."):(this._closeError=r,this._running=!1):this._logger.log(u.Trace,`(LongPolling transport) Poll errored after shutdown: ${r.message}`)}}finally{this._logger.log(u.Trace,"(LongPolling transport) Polling complete."),this.pollAborted||this._raiseOnClose()}})}send(e){return d(this,null,function*(){return this._running?Sn(this._logger,"LongPolling",this._httpClient,this._url,e,this._options):Promise.reject(new Error("Cannot send until the transport is connected"))})}stop(){return d(this,null,function*(){this._logger.log(u.Trace,"(LongPolling transport) Stopping polling."),this._running=!1,this._pollAbort.abort();try{yield this._receiving,this._logger.log(u.Trace,`(LongPolling transport) sending DELETE request to ${this._url}.`);let e={},[t,r]=_e();e[t]=r;let i={headers:S(S({},e),this._options.headers),timeout:this._options.timeout,withCredentials:this._options.withCredentials};yield this._httpClient.delete(this._url,i),this._logger.log(u.Trace,"(LongPolling transport) DELETE request sent.")}finally{this._logger.log(u.Trace,"(LongPolling transport) Stop finished."),this._raiseOnClose()}})}_raiseOnClose(){if(this.onclose){let e="(LongPolling transport) Firing onclose event.";this._closeError&&(e+=" Error: "+this._closeError),this._logger.log(u.Trace,e),this.onclose(this._closeError)}}};var Pn=class{constructor(e,t,r,i){this._httpClient=e,this._accessToken=t,this._logger=r,this._options=i,this.onreceive=null,this.onclose=null}connect(e,t){return d(this,null,function*(){return k.isRequired(e,"url"),k.isRequired(t,"transferFormat"),k.isIn(t,x,"transferFormat"),this._logger.log(u.Trace,"(SSE transport) Connecting."),this._url=e,this._accessToken&&(e+=(e.indexOf("?")<0?"?":"&")+`access_token=${encodeURIComponent(this._accessToken)}`),new Promise((r,i)=>{let s=!1;if(t!==x.Text){i(new Error("The Server-Sent Events transport only supports the 'Text' transfer format"));return}let o;if(D.isBrowser||D.isWebWorker)o=new this._options.EventSource(e,{withCredentials:this._options.withCredentials});else{let a=this._httpClient.getCookieString(e),c={};c.Cookie=a;let[l,h]=_e();c[l]=h,o=new this._options.EventSource(e,{withCredentials:this._options.withCredentials,headers:S(S({},c),this._options.headers)})}try{o.onmessage=a=>{if(this.onreceive)try{this._logger.log(u.Trace,`(SSE transport) data received. ${De(a.data,this._options.logMessageContent)}.`),this.onreceive(a.data)}catch(c){this._close(c);return}},o.onerror=a=>{s?this._close():i(new Error("EventSource failed to connect. The connection could not be found on the server, either the connection ID is not present on the server, or a proxy is refusing/buffering the connection. If you have multiple servers check that sticky sessions are enabled."))},o.onopen=()=>{this._logger.log(u.Information,`SSE connected to ${this._url}`),this._eventSource=o,s=!0,r()}}catch(a){i(a);return}})})}send(e){return d(this,null,function*(){return this._eventSource?Sn(this._logger,"SSE",this._httpClient,this._url,e,this._options):Promise.reject(new Error("Cannot send until the transport is connected"))})}stop(){return this._close(),Promise.resolve()}_close(e){this._eventSource&&(this._eventSource.close(),this._eventSource=void 0,this.onclose&&this.onclose(e))}};var Mn=class{constructor(e,t,r,i,s,o){this._logger=r,this._accessTokenFactory=t,this._logMessageContent=i,this._webSocketConstructor=s,this._httpClient=e,this.onreceive=null,this.onclose=null,this._headers=o}connect(e,t){return d(this,null,function*(){k.isRequired(e,"url"),k.isRequired(t,"transferFormat"),k.isIn(t,x,"transferFormat"),this._logger.log(u.Trace,"(WebSockets transport) Connecting.");let r;return this._accessTokenFactory&&(r=yield this._accessTokenFactory()),new Promise((i,s)=>{e=e.replace(/^http/,"ws");let o,a=this._httpClient.getCookieString(e),c=!1;if(D.isNode||D.isReactNative){let l={},[h,f]=_e();l[h]=f,r&&(l[qe.Authorization]=`Bearer ${r}`),a&&(l[qe.Cookie]=a),o=new this._webSocketConstructor(e,void 0,{headers:S(S({},l),this._headers)})}else r&&(e+=(e.indexOf("?")<0?"?":"&")+`access_token=${encodeURIComponent(r)}`);o||(o=new this._webSocketConstructor(e)),t===x.Binary&&(o.binaryType="arraybuffer"),o.onopen=l=>{this._logger.log(u.Information,`WebSocket connected to ${e}.`),this._webSocket=o,c=!0,i()},o.onerror=l=>{let h=null;typeof ErrorEvent<"u"&&l instanceof ErrorEvent?h=l.error:h="There was an error with the transport",this._logger.log(u.Information,`(WebSockets transport) ${h}.`)},o.onmessage=l=>{if(this._logger.log(u.Trace,`(WebSockets transport) data received. ${De(l.data,this._logMessageContent)}.`),this.onreceive)try{this.onreceive(l.data)}catch(h){this._close(h);return}},o.onclose=l=>{if(c)this._close(l);else{let h=null;typeof ErrorEvent<"u"&&l instanceof ErrorEvent?h=l.error:h="WebSocket failed to connect. The connection could not be found on the server, either the endpoint may not be a SignalR endpoint, the connection ID is not present on the server, or there is a proxy blocking WebSockets. If you have multiple servers check that sticky sessions are enabled.",s(new Error(h))}}})})}send(e){return this._webSocket&&this._webSocket.readyState===this._webSocketConstructor.OPEN?(this._logger.log(u.Trace,`(WebSockets transport) sending data. ${De(e,this._logMessageContent)}.`),this._webSocket.send(e),Promise.resolve()):Promise.reject("WebSocket is not in the OPEN state")}stop(){return this._webSocket&&this._close(void 0),Promise.resolve()}_close(e){this._webSocket&&(this._webSocket.onclose=()=>{},this._webSocket.onmessage=()=>{},this._webSocket.onerror=()=>{},this._webSocket.close(),this._webSocket=void 0),this._logger.log(u.Trace,"(WebSockets transport) socket closed."),this.onclose&&(this._isCloseEvent(e)&&(e.wasClean===!1||e.code!==1e3)?this.onclose(new Error(`WebSocket closed with status code: ${e.code} (${e.reason||"no reason given"}).`)):e instanceof Error?this.onclose(e):this.onclose())}_isCloseEvent(e){return e&&typeof e.wasClean=="boolean"&&typeof e.code=="number"}};var Ea=100,Nn=class{constructor(e,t={}){if(this._stopPromiseResolver=()=>{},this.features={},this._negotiateVersion=1,k.isRequired(e,"url"),this._logger=wa(t.logger),this.baseUrl=this._resolveUrl(e),t=t||{},t.logMessageContent=t.logMessageContent===void 0?!1:t.logMessageContent,typeof t.withCredentials=="boolean"||t.withCredentials===void 0)t.withCredentials=t.withCredentials===void 0?!0:t.withCredentials;else throw new Error("withCredentials option was not a 'boolean' or 'undefined' value");t.timeout=t.timeout===void 0?100*1e3:t.timeout;let r=null,i=null;if(D.isNode&&typeof Qe<"u"){let s=typeof __webpack_require__=="function"?__non_webpack_require__:Qe;r=s("ws"),i=s("eventsource")}!D.isNode&&typeof WebSocket<"u"&&!t.WebSocket?t.WebSocket=WebSocket:D.isNode&&!t.WebSocket&&r&&(t.WebSocket=r),!D.isNode&&typeof EventSource<"u"&&!t.EventSource?t.EventSource=EventSource:D.isNode&&!t.EventSource&&typeof i<"u"&&(t.EventSource=i),this._httpClient=new kn(t.httpClient||new Tn(this._logger),t.accessTokenFactory),this._connectionState="Disconnected",this._connectionStarted=!1,this._options=t,this.onreceive=null,this.onclose=null}start(e){return d(this,null,function*(){if(e=e||x.Binary,k.isIn(e,x,"transferFormat"),this._logger.log(u.Debug,`Starting connection with transfer format '${x[e]}'.`),this._connectionState!=="Disconnected")return Promise.reject(new Error("Cannot start an HttpConnection that is not in the 'Disconnected' state."));if(this._connectionState="Connecting",this._startInternalPromise=this._startInternal(e),yield this._startInternalPromise,this._connectionState==="Disconnecting"){let t="Failed to start the HttpConnection before stop() was called.";return this._logger.log(u.Error,t),yield this._stopPromise,Promise.reject(new H(t))}else if(this._connectionState!=="Connected"){let t="HttpConnection.startInternal completed gracefully but didn't enter the connection into the connected state!";return this._logger.log(u.Error,t),Promise.reject(new H(t))}this._connectionStarted=!0})}send(e){return this._connectionState!=="Connected"?Promise.reject(new Error("Cannot send data if the connection is not in the 'Connected' State.")):(this._sendQueue||(this._sendQueue=new gi(this.transport)),this._sendQueue.send(e))}stop(e){return d(this,null,function*(){if(this._connectionState==="Disconnected")return this._logger.log(u.Debug,`Call to HttpConnection.stop(${e}) ignored because the connection is already in the disconnected state.`),Promise.resolve();if(this._connectionState==="Disconnecting")return this._logger.log(u.Debug,`Call to HttpConnection.stop(${e}) ignored because the connection is already in the disconnecting state.`),this._stopPromise;this._connectionState="Disconnecting",this._stopPromise=new Promise(t=>{this._stopPromiseResolver=t}),yield this._stopInternal(e),yield this._stopPromise})}_stopInternal(e){return d(this,null,function*(){this._stopError=e;try{yield this._startInternalPromise}catch{}if(this.transport){try{yield this.transport.stop()}catch(t){this._logger.log(u.Error,`HttpConnection.transport.stop() threw error '${t}'.`),this._stopConnection()}this.transport=void 0}else this._logger.log(u.Debug,"HttpConnection.transport is undefined in HttpConnection.stop() because start() failed.")})}_startInternal(e){return d(this,null,function*(){let t=this.baseUrl;this._accessTokenFactory=this._options.accessTokenFactory,this._httpClient._accessTokenFactory=this._accessTokenFactory;try{if(this._options.skipNegotiation)if(this._options.transport===L.WebSockets)this.transport=this._constructTransport(L.WebSockets),yield this._startTransport(t,e);else throw new Error("Negotiation can only be skipped when using the WebSocket transport directly.");else{let r=null,i=0;do{if(r=yield this._getNegotiationResponse(t),this._connectionState==="Disconnecting"||this._connectionState==="Disconnected")throw new H("The connection was stopped during negotiation.");if(r.error)throw new Error(r.error);if(r.ProtocolVersion)throw new Error("Detected a connection attempt to an ASP.NET SignalR Server. This client only supports connecting to an ASP.NET Core SignalR Server. See https://aka.ms/signalr-core-differences for details.");if(r.url&&(t=r.url),r.accessToken){let s=r.accessToken;this._accessTokenFactory=()=>s,this._httpClient._accessToken=s,this._httpClient._accessTokenFactory=void 0}i++}while(r.url&&i<Ea);if(i===Ea&&r.url)throw new Error("Negotiate redirection limit exceeded.");yield this._createTransport(t,this._options.transport,r,e)}this.transport instanceof It&&(this.features.inherentKeepAlive=!0),this._connectionState==="Connecting"&&(this._logger.log(u.Debug,"The HttpConnection connected successfully."),this._connectionState="Connected")}catch(r){return this._logger.log(u.Error,"Failed to start the connection: "+r),this._connectionState="Disconnected",this.transport=void 0,this._stopPromiseResolver(),Promise.reject(r)}})}_getNegotiationResponse(e){return d(this,null,function*(){let t={},[r,i]=_e();t[r]=i;let s=this._resolveNegotiateUrl(e);this._logger.log(u.Debug,`Sending negotiation request: ${s}.`);try{let o=yield this._httpClient.post(s,{content:"",headers:S(S({},t),this._options.headers),timeout:this._options.timeout,withCredentials:this._options.withCredentials});if(o.statusCode!==200)return Promise.reject(new Error(`Unexpected status code returned from negotiate '${o.statusCode}'`));let a=JSON.parse(o.content);return(!a.negotiateVersion||a.negotiateVersion<1)&&(a.connectionToken=a.connectionId),a}catch(o){let a="Failed to complete negotiation with the server: "+o;return o instanceof re&&o.statusCode===404&&(a=a+" Either this is not a SignalR endpoint or there is a proxy blocking the connection."),this._logger.log(u.Error,a),Promise.reject(new _n(a))}})}_createConnectUrl(e,t){return t?e+(e.indexOf("?")===-1?"?":"&")+`id=${t}`:e}_createTransport(e,t,r,i){return d(this,null,function*(){let s=this._createConnectUrl(e,r.connectionToken);if(this._isITransport(t)){this._logger.log(u.Debug,"Connection was provided an instance of ITransport, using that directly."),this.transport=t,yield this._startTransport(s,i),this.connectionId=r.connectionId;return}let o=[],a=r.availableTransports||[],c=r;for(let l of a){let h=this._resolveTransportOrError(l,t,i);if(h instanceof Error)o.push(`${l.transport} failed:`),o.push(h);else if(this._isITransport(h)){if(this.transport=h,!c){try{c=yield this._getNegotiationResponse(e)}catch(f){return Promise.reject(f)}s=this._createConnectUrl(e,c.connectionToken)}try{yield this._startTransport(s,i),this.connectionId=c.connectionId;return}catch(f){if(this._logger.log(u.Error,`Failed to start the transport '${l.transport}': ${f}`),c=void 0,o.push(new yn(`${l.transport} failed: ${f}`,L[l.transport])),this._connectionState!=="Connecting"){let p="Failed to select transport before stop() was called.";return this._logger.log(u.Debug,p),Promise.reject(new H(p))}}}}return o.length>0?Promise.reject(new bn(`Unable to connect to the server with any of the available transports. ${o.join(" ")}`,o)):Promise.reject(new Error("None of the transports supported by the client are supported by the server."))})}_constructTransport(e){switch(e){case L.WebSockets:if(!this._options.WebSocket)throw new Error("'WebSocket' is not supported in your environment.");return new Mn(this._httpClient,this._accessTokenFactory,this._logger,this._options.logMessageContent,this._options.WebSocket,this._options.headers||{});case L.ServerSentEvents:if(!this._options.EventSource)throw new Error("'EventSource' is not supported in your environment.");return new Pn(this._httpClient,this._httpClient._accessToken,this._logger,this._options);case L.LongPolling:return new It(this._httpClient,this._logger,this._options);default:throw new Error(`Unknown transport: ${e}.`)}}_startTransport(e,t){return this.transport.onreceive=this.onreceive,this.transport.onclose=r=>this._stopConnection(r),this.transport.connect(e,t)}_resolveTransportOrError(e,t,r){let i=L[e.transport];if(i==null)return this._logger.log(u.Debug,`Skipping transport '${e.transport}' because it is not supported by this client.`),new Error(`Skipping transport '${e.transport}' because it is not supported by this client.`);if(lf(t,i))if(e.transferFormats.map(o=>x[o]).indexOf(r)>=0){if(i===L.WebSockets&&!this._options.WebSocket||i===L.ServerSentEvents&&!this._options.EventSource)return this._logger.log(u.Debug,`Skipping transport '${L[i]}' because it is not supported in your environment.'`),new mn(`'${L[i]}' is not supported in your environment.`,i);this._logger.log(u.Debug,`Selecting transport '${L[i]}'.`);try{return this._constructTransport(i)}catch(o){return o}}else return this._logger.log(u.Debug,`Skipping transport '${L[i]}' because it does not support the requested transfer format '${x[r]}'.`),new Error(`'${L[i]}' does not support ${x[r]}.`);else return this._logger.log(u.Debug,`Skipping transport '${L[i]}' because it was disabled by the client.`),new gn(`'${L[i]}' is disabled by the client.`,i)}_isITransport(e){return e&&typeof e=="object"&&"connect"in e}_stopConnection(e){if(this._logger.log(u.Debug,`HttpConnection.stopConnection(${e}) called while in state ${this._connectionState}.`),this.transport=void 0,e=this._stopError||e,this._stopError=void 0,this._connectionState==="Disconnected"){this._logger.log(u.Debug,`Call to HttpConnection.stopConnection(${e}) was ignored because the connection is already in the disconnected state.`);return}if(this._connectionState==="Connecting")throw this._logger.log(u.Warning,`Call to HttpConnection.stopConnection(${e}) was ignored because the connection is still in the connecting state.`),new Error(`HttpConnection.stopConnection(${e}) was called while the connection is still in the connecting state.`);if(this._connectionState==="Disconnecting"&&this._stopPromiseResolver(),e?this._logger.log(u.Error,`Connection disconnected with error '${e}'.`):this._logger.log(u.Information,"Connection disconnected."),this._sendQueue&&(this._sendQueue.stop().catch(t=>{this._logger.log(u.Error,`TransportSendQueue.stop() threw error '${t}'.`)}),this._sendQueue=void 0),this.connectionId=void 0,this._connectionState="Disconnected",this._connectionStarted){this._connectionStarted=!1;try{this.onclose&&this.onclose(e)}catch(t){this._logger.log(u.Error,`HttpConnection.onclose(${e}) threw error '${t}'.`)}}}_resolveUrl(e){if(e.lastIndexOf("https://",0)===0||e.lastIndexOf("http://",0)===0)return e;if(!D.isBrowser)throw new Error(`Cannot resolve '${e}'.`);let t=window.document.createElement("a");return t.href=e,this._logger.log(u.Information,`Normalizing '${e}' to '${t.href}'.`),t.href}_resolveNegotiateUrl(e){let t=e.indexOf("?"),r=e.substring(0,t===-1?e.length:t);return r[r.length-1]!=="/"&&(r+="/"),r+="negotiate",r+=t===-1?"":e.substring(t),r.indexOf("negotiateVersion")===-1&&(r+=t===-1?"?":"&",r+="negotiateVersion="+this._negotiateVersion),r}};function lf(n,e){return!n||(e&n)!==0}var gi=class n{constructor(e){this._transport=e,this._buffer=[],this._executing=!0,this._sendBufferedData=new at,this._transportResult=new at,this._sendLoopPromise=this._sendLoop()}send(e){return this._bufferData(e),this._transportResult||(this._transportResult=new at),this._transportResult.promise}stop(){return this._executing=!1,this._sendBufferedData.resolve(),this._sendLoopPromise}_bufferData(e){if(this._buffer.length&&typeof this._buffer[0]!=typeof e)throw new Error(`Expected data to be of type ${typeof this._buffer} but was of type ${typeof e}`);this._buffer.push(e),this._sendBufferedData.resolve()}_sendLoop(){return d(this,null,function*(){for(;;){if(yield this._sendBufferedData.promise,!this._executing){this._transportResult&&this._transportResult.reject("Connection stopped.");break}this._sendBufferedData=new at;let e=this._transportResult;this._transportResult=void 0;let t=typeof this._buffer[0]=="string"?this._buffer.join(""):n._concatBuffers(this._buffer);this._buffer.length=0;try{yield this._transport.send(t),e.resolve()}catch(r){e.reject(r)}}})}static _concatBuffers(e){let t=e.map(s=>s.byteLength).reduce((s,o)=>s+o),r=new Uint8Array(t),i=0;for(let s of e)r.set(new Uint8Array(s),i),i+=s.byteLength;return r.buffer}},at=class{constructor(){this.promise=new Promise((e,t)=>[this._resolver,this._rejecter]=[e,t])}resolve(){this._resolver()}reject(e){this._rejecter(e)}};var hf="json",Rn=class{constructor(){this.name=hf,this.version=1,this.transferFormat=x.Text}parseMessages(e,t){if(typeof e!="string")throw new Error("Invalid input for JSON hub protocol. Expected a string.");if(!e)return[];t===null&&(t=ye.instance);let r=X.parse(e),i=[];for(let s of r){let o=JSON.parse(s);if(typeof o.type!="number")throw new Error("Invalid payload.");switch(o.type){case C.Invocation:this._isInvocationMessage(o);break;case C.StreamItem:this._isStreamItemMessage(o);break;case C.Completion:this._isCompletionMessage(o);break;case C.Ping:break;case C.Close:break;default:t.log(u.Information,"Unknown message type '"+o.type+"' ignored.");continue}i.push(o)}return i}writeMessage(e){return X.write(JSON.stringify(e))}_isInvocationMessage(e){this._assertNotEmptyString(e.target,"Invalid payload for Invocation message."),e.invocationId!==void 0&&this._assertNotEmptyString(e.invocationId,"Invalid payload for Invocation message.")}_isStreamItemMessage(e){if(this._assertNotEmptyString(e.invocationId,"Invalid payload for StreamItem message."),e.item===void 0)throw new Error("Invalid payload for StreamItem message.")}_isCompletionMessage(e){if(e.result&&e.error)throw new Error("Invalid payload for Completion message.");!e.result&&e.error&&this._assertNotEmptyString(e.error,"Invalid payload for Completion message."),this._assertNotEmptyString(e.invocationId,"Invalid payload for Completion message.")}_assertNotEmptyString(e,t){if(typeof e!="string"||e==="")throw new Error(t)}};var uf={trace:u.Trace,debug:u.Debug,info:u.Information,information:u.Information,warn:u.Warning,warning:u.Warning,error:u.Error,critical:u.Critical,none:u.None};function ff(n){let e=uf[n.toLowerCase()];if(typeof e<"u")return e;throw new Error(`Unknown log level: ${n}`)}var Ct=class{configureLogging(e){if(k.isRequired(e,"logging"),df(e))this.logger=e;else if(typeof e=="string"){let t=ff(e);this.logger=new Ke(t)}else this.logger=new Ke(e);return this}withUrl(e,t){return k.isRequired(e,"url"),k.isNotEmpty(e,"url"),this.url=e,typeof t=="object"?this.httpConnectionOptions=S(S({},this.httpConnectionOptions),t):this.httpConnectionOptions=le(S({},this.httpConnectionOptions),{transport:t}),this}withHubProtocol(e){return k.isRequired(e,"protocol"),this.protocol=e,this}withAutomaticReconnect(e){if(this.reconnectPolicy)throw new Error("A reconnectPolicy has already been set.");return e?Array.isArray(e)?this.reconnectPolicy=new Tt(e):this.reconnectPolicy=e:this.reconnectPolicy=new Tt,this}build(){let e=this.httpConnectionOptions||{};if(e.logger===void 0&&(e.logger=this.logger),!this.url)throw new Error("The 'HubConnectionBuilder.withUrl' method must be called before building the connection.");let t=new Nn(this.url,e);return An.create(t,this.logger||ye.instance,this.protocol||new Rn,this.reconnectPolicy)}};function df(n){return n.log!==void 0}var Ta=(()=>{let e=class e{constructor(r){this.toastr=r,this.connected=!1,this.addListenerMessage=i=>{this.hubConnection.on("ActionSendMessageToClient",s=>{switch(s.title=s.title+" "+new Date().toLocaleTimeString(),s.icon){case"info":this.toastr.info(s.content,s.title,{positionClass:"toast-top-center",timeOut:0});break;case"warning":this.toastr.warning(s.content,s.title,{positionClass:"toast-top-center",timeOut:0});break;case"success":this.toastr.success(s.content,s.title,{positionClass:"toast-top-center",timeOut:0});break;case"show":this.toastr.show(s.content,s.title,{positionClass:"toast-top-center",timeOut:0});break;case"error":this.toastr.error(s.content,s.title,{positionClass:"toast-top-center",timeOut:0});break;default:this.toastr.info(s.content,s.title,{positionClass:"toast-top-center",timeOut:0});break}if(s.contentJson?.length>0)try{var o=JSON.parse(s.contentJson);o&&o.action?.length>0&&o.action=="UpadteOnlineList"}catch{}})},this.addListenerActionLogin=()=>{this.hubConnection.on("ActionLogin",i=>{console.log("ActionLogin"),console.log(i),this.toastr.warning("\u0648\u0627\u0631\u062F \u0634\u062F\u06CC\u062F")})},this.addListenerActionLogout=()=>{this.hubConnection.on("ActionLogout",i=>{console.log("ActionLogout"),console.log(i),this.toastr.warning("\u062E\u0627\u0631\u062C \u0634\u062F\u06CC\u062F")})}}startConnection(r){let i=localStorage.getItem("userToken");this.hubConnection=new Ct().withUrl(P.cmsServerConfig.configHubServerPath+"notify",{accessTokenFactory:()=>i,skipNegotiation:!0,transport:L.WebSockets}).withAutomaticReconnect().configureLogging(u.Information).build(),this.hubConnection.start().then(()=>{P.consoleLog&&console.log("signalR Connection started"),this.connected=!0}).catch(s=>console.log("Error while signalR starting connection: "+s))}login(r){this.hubConnection.invoke("login",r)}logout(){this.hubConnection.invoke("logout")}subscribeToProduct(r){this.hubConnection.invoke("SuscribeToProduct",r)}};e.\u0275fac=function(i){return new(i||e)(te(cs))},e.\u0275prov=q({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();function bf(n,e){n&1&&Le(0,"app-footer-bar")}function wf(n,e){if(n&1&&(Le(0,"div",6),Li(1,"safeHtml")),n&2){let t=Oi();ut("innerHtml",xi(1,1,t.dataSupportModelResult.item.supportHtmlBody),Mi)}}var Ia=(()=>{let e=class e{constructor(r,i,s,o,a,c,l,h,f,p,m,y,w,A,O,$,F){this.router=r,this.titleService=i,this.translate=s,this.coreAuthService=o,this.coreSiteService=a,this.configService=c,this.themeService=l,this.publicHelper=h,this.tokenHelper=f,this.cmsTranslationService=p,this.singlarService=m,this.swPush=y,this.cmsToastrService=w,this.cmsStoreService=A,this.cdr=O,this.pageInfo=$,this.processService=F,this.title="ntk-cms-web",this.constructorInfoAreaId=this.constructor.name,this.firstOnonline=!0,this.toastId=0,this.themeService.updateInnerSize(),this.router.events.subscribe(E=>{E instanceof es&&(P.consoleLog&&console.log("NavigationStart"),this.themeService.onNavigationStartAppComponent()),E instanceof ts&&console.error(E.error),E instanceof Yn&&(P.consoleLog&&console.log("NavigationEnd"),this.themeService.onNavigationEndAppComponent())}),this.singlarService.startConnection(null),this.singlarService.addListenerMessage(null),this.publicHelper.processService.cdr=this.cdr,this.router.events.pipe(Ie(E=>E instanceof Yn),be(()=>{let E=this.router.routerState.root,Z=P.mainTitle;for(;E.firstChild;)E=E.firstChild;return E.snapshot.data.title&&(Z=E.snapshot.data.title),Z})).subscribe(E=>{E&&this.translate.get(E).subscribe(Z=>{this.titleService.setTitle(Z),this.pageInfo.updateTitle(Z)})}),P.cmsServerConfig.configApiServerPath&&P.cmsServerConfig.configApiServerPath.length>0&&this.coreAuthService.setConfig(P.cmsServerConfig.configApiServerPath),this.process$=F.processSubject}ngOnInit(){this.themeService.onInitAppComponentStateOnChange(),this.cmsApiStoreSubscribe=this.tokenHelper.onInitAppComponentStateOnChange().subscribe({next:s=>{s.tokenInfoStore.siteId>0&&s.tokenInfoStore.userId>0&&P.production&&this.getSupport(),s.tokenInfoStore.userId>0?this.singlarService.login(s.tokenInfoStore.token):this.singlarService.logout()}});let r=window.location.href;if(r.includes("?")){let s=new Wi({fromString:r.split("?")[1]}),o=s.get("site");+o>0&&localStorage.setItem("siteId",o);let c=s.get("sitetype");+c>0&&localStorage.setItem("siteTypeId",c);let h=s.get("rsite");+h>0&&localStorage.setItem("ResellerSiteId",h);let p=s.get("ruser");+p>0&&localStorage.setItem("ResellerUserId",p)}this.getDeviceToken(),this.publicHelper.getEnumRecordStatus();let i={apiKey:"AIzaSyA3lqa_xiaWGm5rh-IHNQaTt8FN67Y828g",authDomain:"ntk-cms.firebaseapp.com",databaseURL:"https://ntk-cms.firebaseio.com",projectId:"ntk-cms",storageBucket:"ntk-cms.appspot.com",messagingSenderId:"893852902485",appId:"1:893852902485:web:b58b55c1510532e9d2e0dc",measurementId:"G-45G43ESXQJ"};if(P.production){let s=Gr(i),o=ba(s)}this.getServiceVer(),setTimeout(()=>{this.themeService.updateMainPagePreloaderShow(!1)},1e4)}ngAfterViewInit(){this.themeService.afterViewInitAppComponent()}onWindowResize(){this.themeService.updateInnerSize()}getServiceVer(){let r=this.constructor.name+"ServiceIp";this.translate.get("MESSAGE.Receiving_Information_From_The_Server").subscribe(i=>{this.publicHelper.processService.processStart(r,i,this.constructorInfoAreaId)}),this.configService.ServiceIp().subscribe({next:i=>{this.publicHelper.appServerVersion=i.appVersion,this.publicHelper.processService.processStop(r)},error:i=>{this.cmsToastrService.typeErrorGetOne(i),this.publicHelper.processService.processStop(r,!1)}})}getDeviceToken(){let r=this.coreAuthService.getDeviceToken();if(!r||r.length===0){let i={securityKey:P.cmsTokenConfig.SecurityKey,clientMACAddress:"",osType:us.none,deviceType:hs.WebSite,packageName:P.appName,appBuildVer:0,appSourceVer:P.appVersion,country:"",deviceBrand:"",language:this.cmsTranslationService.getSelectedLanguage(),locationLat:"",locationLong:"",simCard:"",notificationId:""};this.cmsTranslationService.setLanguage(this.cmsTranslationService.getSelectedLanguage()),this.coreAuthService.ServiceGetTokenDevice(i).subscribe({next:s=>{s.isSuccess&&s.item.notificationFCMPublicKey.length>0&&this.subscribeToNotifications(s.item.notificationFCMPublicKey)},error:s=>{}})}else this.coreAuthService.ServiceCurrentDeviceToken().subscribe({next:i=>{i.isSuccess&&i.item.notificationFCMPublicKey.length>0&&this.subscribeToNotifications(i.item.notificationFCMPublicKey)},error:i=>{}})}subscribeToNotifications(r){this.swPush.requestSubscription({serverPublicKey:r}).then(i=>{var s=new ms;this.pushSubscription=i,s.notificationId=i.getKey+"",s.ClientMACAddress="",this.coreAuthService.ServiceSetTokenDeviceNotificationId(s).subscribe({next:o=>{},error:o=>{}})}).catch(i=>console.error("Could not subscribe to notifications",i))}getSupport(){this.coreSiteService.ServiceSupportSite().subscribe({next:r=>{this.dataSupportModelResult=r},error:r=>{}})}keyEvent(r){r?.key==="F9"&&(localStorage.getItem("KeyboardEventF9")?localStorage.removeItem("KeyboardEventF9"):localStorage.setItem("KeyboardEventF9","F9"))}ononline(){var r=new Jn;if(r.internetConnection=!0,r.serverConnection=!0,this.cmsStoreService.setState({type:Xn,payload:r}),this.firstOnonline){this.firstOnonline=!1;return}this.toastId>0&&this.cmsToastrService.toastr.clear(this.toastId),this.cmsToastrService.toastr.success(this.translate.instant("ERRORMESSAGE.TITLE.Youhavesuccessfullyconnectedtotheserver"),this.translate.instant("ERRORMESSAGE.TITLE.Internetaccesswasconnected"))}onoffline(){var r=new Jn;r.internetConnection=!1,r.serverConnection=!1,this.cmsStoreService.setState({type:Xn,payload:r}),this.firstOnonline=!1,this.toastId=this.cmsToastrService.toastr.error(this.translate.instant("ERRORMESSAGE.TITLE.Pleasecheckyourinternetconnection"),this.translate.instant("ERRORMESSAGE.TITLE.Internetaccesswasinterrupted"),{disableTimeOut:!0}).toastId}ngOnDestroy(){this.cmsApiStoreSubscribe.unsubscribe()}};e.\u0275fac=function(i){return new(i||e)(j(Rt),j(Ji),j(Ot),j($t),j(ps),j(Lt),j(gs),j(ws),j(Ft),j(Ss),j(Ta),j(Bt),j(ys),j(dt),j($i),j(bs),j(_s))},e.\u0275cmp=Di({type:e,selectors:[["app-root"]],hostBindings:function(i,s){i&1&&Ri("resize",function(a){return s.onWindowResize(a)},!1,ht)("keyup",function(a){return s.keyEvent(a)},!1,ht)("online",function(a){return s.ononline(a)},!1,ht)("offline",function(a){return s.onoffline(a)},!1,ht)},decls:16,vars:3,consts:[["id","preloader",3,"ngClass"],["role","status",1,"spinner-border","color-highlight"],["id","page"],[4,"ngIf"],[1,"page-title-clear"],["runScripts","",3,"innerHtml",4,"ngIf"],["runScripts","",3,"innerHtml"]],template:function(i,s){i&1&&(Wn(0,"div",0),Le(1,"div",1),Vn(),Wn(2,"div",2),Le(3,"app-progress-spinner")(4,"app-header-bar"),zn(5,bf,1,0,"app-footer-bar",3),Le(6,"div",4)(7,"router-outlet")(8,"app-menu-install-pwa-android")(9,"app-menu-install-pwa-ios"),Vn(),Le(10,"app-menu-main")(11,"app-menu-share")(12,"app-menu-colors")(13,"app-menu-language")(14,"app-scroll-top"),zn(15,wf,2,3,"div",5)),i&2&&(ut("ngClass",s.themeService.themeStore.mainPagePreloaderShow?"":"preloader-hide"),Un(5),ut("ngIf",s.tokenHelper.isMobile),Un(10),ut("ngIf",s.dataSupportModelResult&&s.dataSupportModelResult.isSuccess&&(s.dataSupportModelResult.item.supportHtmlBody==null?null:s.dataSupportModelResult.item.supportHtmlBody.length)>0))},dependencies:[Ui,zi,vs,Es,ns,Ts,Is,Cs,As,ks,Ds,Ps,Ms,Ns,Rs],encapsulation:2});let n=e;return n})();var Ca=(()=>{let e=class e{constructor(r,i){this.tokenHelper=r,this.router=i}canActivate(r,i){return d(this,null,function*(){let s=this.tokenHelper.coreAuthService.getUserToken();if(!s||s.length===0)return this.router.navigate(["auth"],{queryParams:{returnUrl:i.url}}),!1;let o=new xt;return yield this.tokenHelper.getTokenInfoState().then(a=>{o=a}),o&&o.userId>0&&o.siteId>0||o&&o.userId>0?!0:(this.router.navigate(["auth"],{queryParams:{returnUrl:i.url}}),!1)})}delay(r){return new Promise(i=>setTimeout(i,r))}ngOnDestroy(){this.subscriptions.unsubscribe()}};e.\u0275fac=function(i){return new(i||e)(te(Ft),te(Rt))},e.\u0275prov=q({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();var Sf=[{path:"error",loadChildren:()=>import("./chunk-QDEEG4Y7.js").then(n=>n.ErrorsModule)},{path:"page",loadChildren:()=>import("./chunk-TI65KWCR.js").then(n=>n.PagesModule)},{path:"auth",loadChildren:()=>import("./chunk-XDOOZPPK.js").then(n=>n.AuthModule)},{path:"",canActivate:[Ca],loadChildren:()=>import("./chunk-DHORYPRV.js").then(n=>n.PanelModule)},{path:"**",redirectTo:"error/404"}],Aa=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=ue({type:e}),e.\u0275inj=he({imports:[ft.forRoot(Sf),ft]});let n=e;return n})();var vf="language";function ka(n,e,t){return()=>new Promise(r=>{t.getUserByToken().subscribe().add(r),e.get(Bi,Promise.resolve(null)).then(()=>{let s=localStorage.getItem(vf)||this.translate?.getDefaultLang()||"fa";n.setDefaultLang(s),n.use(s).subscribe(()=>{P.consoleLog&&console.info(`Successfully initialized language:'${s}' '`)},o=>{P.consoleLog&&console.error(`Problem with '${s}' language initialization.'`)},()=>{r(null)})})})}var Da=(()=>{let e=class e{static forRoot(){return{ngModule:e,providers:[dt]}}};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=ue({type:e}),e.\u0275inj=he({providers:[dt]});let n=e;return n})();var Pa=(()=>{let e=class e{get currentUserValue(){return this.currentUserSubject.value}constructor(){this.unsubscribe=[],this.currentUser$=new xn,this.currentUserSubject=new ct(new xt),this.isLoading$=new xn,this.isLoadingSubject=new ct(!1),this.authLocalStorageToken=`${P.appVersion}-${P.authKey}`,this.isLoadingSubject=new ct(!1),this.currentUserSubject=new ct(void 0),this.currentUser$=this.currentUserSubject.asObservable(),this.isLoading$=this.isLoadingSubject.asObservable()}getUserByToken(){let r=this.getAuthFromLocalStorage();if(!r||!r.token)return Ye(void 0);this.isLoadingSubject.next(!0)}getAuthFromLocalStorage(){try{return JSON.parse(localStorage.getItem(this.authLocalStorageToken))}catch(r){console.error(r);return}}ngOnDestroy(){this.unsubscribe.forEach(r=>r.unsubscribe())}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=q({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();var Ef={display:{colorInput:"hex"}},Tf={align:"right",allowNegative:!0,decimal:",",precision:0,prefix:"",suffix:"",thousands:" "};function If(n){return new nn(n,"/assets/i18n/",".json")}var Ma=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=ue({type:e,bootstrap:[Ia]}),e.\u0275inj=he({providers:[Ki(qi()),$t,fs,ds,Lt,{provide:Pt,useFactory:ka,deps:[Ot,kt,Pa],multi:!0},{provide:ji,useClass:Hi},{provide:Zi,useValue:{separatorKeyCodes:[13]}},{provide:is,useValue:Tf},{provide:as,useValue:Ef}],imports:[Mt.withServerTransition({appId:"serverApp"}),yo,Gi,os.forRoot({loader:{provide:ss,useFactory:If,deps:[Vi]}}),Os.forRoot(),ls.forRoot({timeOut:5e3,enableHtml:!0,positionClass:"toast-bottom-right",preventDuplicates:!0,closeButton:!0,extendedTimeOut:1e3}),Da.forRoot(),Aa,rs,js.register("ngsw-worker.js",{enabled:P.production,registrationStrategy:"registerWhenStable:30000"}),ft,Ls]});let n=e;return n})();P.production&&void 0;Yi().bootstrapModule(Ma,{ngZoneEventCoalescing:!0}).catch(n=>console.error(n));
