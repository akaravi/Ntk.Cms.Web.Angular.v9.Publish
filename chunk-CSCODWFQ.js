import{f as Xt,g as Yt}from"./chunk-HPEEJFB2.js";import{a as Kt}from"./chunk-E4BROO6I.js";import{a as Qt}from"./chunk-DNGOJFUX.js";import{a as zt}from"./chunk-W32ETYMK.js";import{a as Me,b as Jt}from"./chunk-BILB4LMS.js";import{a as be}from"./chunk-WYYUBY7S.js";import{Ad as qt,C as st,Cc as Ot,Gb as yt,Hb as Mt,Id as Ut,L as pe,La as he,Lc as Ft,M as ue,Ma as Se,Na as ft,O as ct,P as dt,Sc as Pt,Ta as ge,Tc as Ht,Ub as bt,Vb as It,Wa as j,Wb as vt,Xb as wt,Yb as Et,Zb as At,aa as fe,bd as ye,da as mt,ec as Tt,fc as Rt,gc as xt,hc as Dt,hd as Wt,ic as Vt,jc as kt,kc as Lt,lc as Bt,m as at,mc as Gt,nb as G,nc as Nt,p as J,s as H,sa as ut,sb as _t,t as ce,tb as N,td as jt,v as de,vb as U,w as lt,x as K,y as me}from"./chunk-S5I24AVV.js";import{b as W,c as X,p as xe}from"./chunk-IY42FYQU.js";import{Aa as ze,Ab as we,Cd as gt,Db as ae,Dc as ot,Dd as Ce,Eb as le,Fb as se,Fc as nt,Hd as q,Ia as Qe,Ib as D,Id as Y,Jd as _e,Kb as m,L as We,La as a,Lb as v,Lc as rt,Ma as S,Mb as g,O as je,Qb as w,Qd as Z,Rb as E,Sb as A,Ud as Ct,Vb as $e,W as qe,Wb as et,X as Ue,Yb as C,Za as Q,Zb as _,Zd as B,_d as ie,ab as M,af as Re,aq as $,bb as Je,bf as V,cb as h,da as ne,eb as Ke,g as Fe,gc as F,hd as pt,ja as O,ka as re,kd as Ee,lb as s,ld as Ae,mb as c,nb as I,ob as R,pb as x,qb as Xe,qd as Te,ra as u,rb as T,sa as f,td as ht,u as Pe,ub as b,v as He,vd as te,wb as y,xb as Ye,xc as tt,yb as Ze,yc as it,zb as L,zc as P,zd as St}from"./chunk-ZJTC2AXA.js";var ai=["vform"];function li(o,l){if(o&1){let d=T();s(0,"app-cms-enum-record-status-selector",20),A("modelChange",function(i){u(d);let e=y();return E(e.dataModel.recordStatus,i)||(e.dataModel.recordStatus=i),f(i)}),c()}if(o&2){let d=y();w("model",d.dataModel.recordStatus),h("optionDisabled",!1)("optionLabel",d.fieldsInfo.recordStatus==null?null:d.fieldsInfo.recordStatus.fieldTitle)("optionRequired",!0)("optionSelectFirstItem",!0)}}function si(o,l){if(o&1&&(s(0,"mat-error"),m(1),s(2,"strong"),m(3),C(4,"translate"),c()()),o&2){let d=y();a(),g(" ",d.fieldsInfo.title==null?null:d.fieldsInfo.title.fieldTitle," is "),a(2),v(_(4,2,"MESSAGE.required"))}}function ci(o,l){o&1&&(s(0,"mat-error"),m(1," Description is "),s(2,"strong"),m(3),C(4,"translate"),c()()),o&2&&(a(3),v(_(4,1,"MESSAGE.required")))}function di(o,l){if(o&1){let d=T();s(0,"div",21)(1,"button",22),b("click",function(){u(d);let i=y();return f(i.onFormCancel())}),I(2,"i",23),m(3),C(4,"translate"),c(),s(5,"button",24),I(6,"i",25),m(7),C(8,"translate"),c()()}if(o&2){y();let d=D(9);a(3),g(" ",_(4,3,"ACTION.CANCEL")," "),a(2),h("disabled",!d.form.valid),a(2),g(" ",_(8,5,"ACTION.SAVE")," ")}}var Ne=(()=>{let l=class l extends zt{constructor(t,i,e,r,p,n,k,z){super(r,new V,n,z),this.data=t,this.dialogRef=i,this.coreEnumService=e,this.coreSiteCategoryService=r,this.cmsToastrService=p,this.publicHelper=n,this.cdr=k,this.translate=z,this.constructorInfoAreaId=this.constructor.name,this.fieldsInfo=new Map,this.selectFileTypeMainImage=["jpg","jpeg","png"],this.appLanguage="fa",this.dataModelResult=new Ce,this.dataModel=new V,this.formInfo=new _e,this.fileManagerOpenForm=!1,this.publicHelper.processService.cdr=this.cdr,this.fileManagerTree=this.publicHelper.GetfileManagerTreeConfig()}ngOnInit(){this.translate.get("TITLE.ADD").subscribe(t=>{this.formInfo.formTitle=t}),this.DataGetAccess()}DataAddContent(){this.translate.get("MESSAGE.sending_information_to_the_server").subscribe(i=>{this.formInfo.formAlert=i}),this.formInfo.formError="";let t=this.constructor.name+"main";this.translate.get("MESSAGE.Receiving_information").subscribe(i=>{this.publicHelper.processService.processStart(t,i,this.constructorInfoAreaId)}),this.coreSiteCategoryService.ServiceAdd(this.dataModel).subscribe({next:i=>{this.formInfo.formSubmitAllow=!0,this.dataModelResult=i,i.isSuccess?(this.translate.get("MESSAGE.registration_completed_successfully").subscribe(e=>{this.formInfo.formAlert=e}),this.cmsToastrService.typeSuccessAdd(),this.dialogRef.close({dialogChangedDate:!0})):(this.translate.get("ERRORMESSAGE.MESSAGE.typeError").subscribe(e=>{this.formInfo.formAlert=e}),this.formInfo.formError=i.errorMessage,this.cmsToastrService.typeErrorMessage(i.errorMessage)),this.publicHelper.processService.processStop(t)},error:i=>{this.formInfo.formSubmitAllow=!0,this.cmsToastrService.typeError(i),this.publicHelper.processService.processStop(t,!1)}})}onFormSubmit(){this.formGroup.valid&&(this.formInfo.formSubmitAllow=!1,this.DataAddContent())}onFormCancel(){this.dialogRef.close({dialogChangedDate:!1})}};l.\u0275fac=function(i){return new(i||l)(S(Se),S(he),S(Z),S(B),S(G),S(N),S(F),S(W))},l.\u0275cmp=O({type:l,selectors:[["app-core-sitecategory-add"]],viewQuery:function(i,e){if(i&1&&ae(ai,5),i&2){let r;le(r=se())&&(e.formGroup=r.first)}},features:[Q],decls:39,vars:26,consts:[["vform","ngForm"],["Title",""],["Domains",""],["Description",""],[1,"card","card-style","loader-container"],[3,"optionsInfoAreaId"],[1,"content","mb-0"],[1,"mb-0","color-highlight","font-600","font-12"],[3,"ngSubmit"],[3,"model","optionDisabled","optionLabel","optionRequired","optionSelectFirstItem","modelChange",4,"ngIf"],[1,"input-style","has-borders","no-icon","input-style-always-active","validate-field","mb-4"],["for","dataModel.title",1,"color-highlight"],["matInput","","type","text","name","dataModel.title","minlength","3","maxlength","100","id","dataModel.title",1,"form-control","validate-name",3,"ngModelChange","ngModel","placeholder"],[4,"ngIf"],["for","dataModel.domains",1,"color-highlight"],["matInput","","name","dataModel.domains","type","text","placeholder","domain.com","rows","10","id","dataModel.domains",1,"form-control","validate-name",3,"ngModelChange","ngModel"],["for","dataModel.description",1,"color-highlight"],["matInput","","name","dataModel.description","type","text","minlength","1","maxlength","500","rows","5","id","dataModel.description",1,"form-control","validate-name",3,"ngModelChange","ngModel","placeholder"],["...","","id","main","name","dataModel.ruleHtmlBody",3,"ngModelChange","placeholder","config","ngModel"],["class","form-actions",4,"ngIf"],[3,"modelChange","model","optionDisabled","optionLabel","optionRequired","optionSelectFirstItem"],[1,"form-actions"],["type","button",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-gray",3,"click"],[1,"ft-x"],["type","submit",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-green",3,"disabled"],[1,"fa","fa-check-square-o"]],template:function(i,e){if(i&1){let r=T();s(0,"div",4),I(1,"app-progress-spinner",5),s(2,"div",6)(3,"p",7),m(4),c(),s(5,"p"),m(6),C(7,"translate"),c(),s(8,"form",8,0),b("ngSubmit",function(){return u(r),f(e.onFormSubmit())}),M(10,li,1,5,"app-cms-enum-record-status-selector",9),s(11,"div",10)(12,"label",11),m(13),c(),s(14,"input",12,1),A("ngModelChange",function(n){return u(r),E(e.dataModel.title,n)||(e.dataModel.title=n),f(n)}),c(),s(16,"em"),m(17),c(),M(18,si,5,4,"mat-error",13),c(),s(19,"div",10)(20,"label",14),m(21,"Domains"),c(),s(22,"textarea",15,2),A("ngModelChange",function(n){return u(r),E(e.dataModel.domains,n)||(e.dataModel.domains=n),f(n)}),m(24,"                "),c()(),s(25,"div",10)(26,"label",16),m(27),c(),s(28,"textarea",17,3),A("ngModelChange",function(n){return u(r),E(e.dataModel.description,n)||(e.dataModel.description=n),f(n)}),m(30,"                "),c(),s(31,"em"),m(32),c(),M(33,ci,5,3,"mat-error",13),c(),m(34),C(35,"translate"),s(36,"angular-editor",18),C(37,"translate"),A("ngModelChange",function(n){return u(r),E(e.dataModel.ruleHtmlBody,n)||(e.dataModel.ruleHtmlBody=n),f(n)}),c(),M(38,di,9,7,"div",19),c()()()}if(i&2){let r=D(15),p=D(29);a(),h("optionsInfoAreaId",e.constructorInfoAreaId),a(3),g(" ",e.formInfo.formTitle," "),a(2),g(" ",_(7,20,"TITLE.Be_Careful_When_Entering_Information")," "),a(4),h("ngIf",e.fieldsInfo.recordStatus==null?null:e.fieldsInfo.recordStatus.accessWatchField),a(3),v(e.fieldsInfo.title==null?null:e.fieldsInfo.title.fieldTitle),a(),L("placeholder",e.fieldsInfo.title==null?null:e.fieldsInfo.title.fieldTitle),w("ngModel",e.dataModel.title),a(3),g("",r.value.length," / 100"),a(),h("ngIf",r.errors==null?null:r.errors.required),a(4),w("ngModel",e.dataModel.domains),a(5),v(e.fieldsInfo.description==null?null:e.fieldsInfo.description.fieldTitle),a(),L("placeholder",e.fieldsInfo.description==null?null:e.fieldsInfo.description.fieldTitle),w("ngModel",e.dataModel.description),a(4),g("",p.value.length," / 500"),a(),h("ngIf",p.errors==null?null:p.errors.required),a(),g(" ",_(35,22,"TITLE.Rules")," "),a(2),h("placeholder",_(37,24,"TITLE.Enter_the_text_of_the_rules"))("config",e.publicHelper.editorConfig),w("ngModel",e.dataModel.ruleHtmlBody),a(2),h("ngIf",e.formInfo.formSubmitAllow)}},dependencies:[P,me,J,H,ce,pe,ue,K,de,fe,j,ye,U,Me,X],styles:[".form-body[_ngcontent-%COMP%]{width:500px}@media (max-width: 700px){.form-body[_ngcontent-%COMP%]{display:contents}}#file-manager[_ngcontent-%COMP%]{width:calc(100vw - 16px);height:calc(100vh - 16px)}.recordStatus-1.mat-select-panel[_ngcontent-%COMP%]{background:#ff0}.recordStatus-2.mat-select-panel[_ngcontent-%COMP%]{background:#000}.recordStatus-3.mat-select-panel[_ngcontent-%COMP%]{background:red}"]});let o=l;return o})();var mi=["vform"];function pi(o,l){if(o&1){let d=T();s(0,"app-cms-enum-record-status-selector",21),A("modelChange",function(i){u(d);let e=y();return E(e.dataModel.recordStatus,i)||(e.dataModel.recordStatus=i),f(i)}),c()}if(o&2){let d=y();w("model",d.dataModel.recordStatus),h("optionDisabled",!1)("optionLabel",d.fieldsInfo.recordStatus==null?null:d.fieldsInfo.recordStatus.fieldTitle)("optionRequired",!0)("optionSelectFirstItem",!0)}}function ui(o,l){if(o&1&&(s(0,"mat-error"),m(1),s(2,"strong"),m(3),C(4,"translate"),c()()),o&2){let d=y();a(),g(" ",d.fieldsInfo.title==null?null:d.fieldsInfo.title.fieldTitle," is "),a(2),v(_(4,2,"MESSAGE.required"))}}function fi(o,l){o&1&&(s(0,"mat-error"),m(1," Description is "),s(2,"strong"),m(3),C(4,"translate"),c()()),o&2&&(a(3),v(_(4,1,"MESSAGE.required")))}function hi(o,l){if(o&1){let d=T();s(0,"div",22)(1,"button",23),b("click",function(){u(d);let i=y();return f(i.onFormCancel())}),I(2,"i",24),m(3),C(4,"translate"),c(),s(5,"button",25),I(6,"i",26),m(7),C(8,"translate"),c()()}if(o&2){y();let d=D(9);a(3),g(" ",_(4,3,"ACTION.CANCEL")," "),a(2),h("disabled",!d.form.valid),a(2),g(" ",_(8,5,"ACTION.SAVE")," ")}}var Oe=(()=>{let l=class l extends Qt{constructor(t,i,e,r,p,n,k,z,ee){super(r,new V,k,ee),this.data=t,this.dialogRef=i,this.coreEnumService=e,this.coreSiteCategoryService=r,this.coreSiteCategoryCmsModuleService=p,this.cmsToastrService=n,this.publicHelper=k,this.cdr=z,this.translate=ee,this.requestId=0,this.constructorInfoAreaId=this.constructor.name,this.selectFileTypeMainImage=["jpg","jpeg","png"],this.appLanguage="fa",this.dataModelResult=new gt,this.dataModel=new V,this.formInfo=new _e,this.fileManagerOpenForm=!1,this.dataCoreCpMainMenuIds=[],this.publicHelper.processService.cdr=this.cdr,t&&(this.requestId=+t.id||0),this.fileManagerTree=this.publicHelper.GetfileManagerTreeConfig()}ngOnInit(){if(this.requestId>0)this.translate.get("TITLE.Edit").subscribe(t=>{this.formInfo.formTitle=t});else{this.cmsToastrService.typeErrorComponentAction(),this.dialogRef.close({dialogChangedDate:!1});return}this.DataGetOneContent(),this.DataGetAllSiteCategoryCmsModule()}DataGetOneContent(){if(this.requestId<=0){this.cmsToastrService.typeErrorEditRowIsNull();return}this.translate.get("MESSAGE.Receiving_Information_From_The_Server").subscribe(i=>{this.formInfo.formAlert=i}),this.formInfo.formError="";let t=this.constructor.name+"main";this.translate.get("MESSAGE.Receiving_information").subscribe(i=>{this.publicHelper.processService.processStart(t,i,this.constructorInfoAreaId)}),this.coreSiteCategoryService.setAccessLoad(),this.coreSiteCategoryService.setAccessDataType(St.Editor),this.coreSiteCategoryService.ServiceGetOneById(this.requestId).subscribe({next:i=>{this.fieldsInfo=this.publicHelper.fieldInfoConvertor(i.access),this.dataModel=i.item,i.isSuccess?(this.formInfo.formTitle=this.formInfo.formTitle+" "+i.item.title,this.formInfo.formAlert=""):(this.translate.get("ERRORMESSAGE.MESSAGE.typeError").subscribe(e=>{this.formInfo.formAlert=e}),this.formInfo.formError=i.errorMessage,this.cmsToastrService.typeErrorMessage(i.errorMessage)),this.publicHelper.processService.processStop(t)},error:i=>{this.cmsToastrService.typeError(i),this.publicHelper.processService.processStop(t,!1)}})}DataGetAllSiteCategoryCmsModule(){if(this.requestId<=0){this.cmsToastrService.typeErrorEditRowIsNull();return}this.translate.get("MESSAGE.Receiving_Information_From_The_Server").subscribe(r=>{this.formInfo.formAlert=r}),this.formInfo.formError="";let t=this.constructor.name+"main";this.translate.get("MESSAGE.Receiving_information").subscribe(r=>{this.publicHelper.processService.processStart(t,r,this.constructorInfoAreaId)});let i=new Y,e=new q;e.propertyName="LinkCmsSiteCategoryId",e.value=this.requestId,i.filters.push(e),this.coreSiteCategoryCmsModuleService.ServiceGetAll(i).subscribe({next:r=>{this.dataCoreSiteCategoryCmsModuleModel=r.listItems;let p=[];this.dataCoreSiteCategoryCmsModuleModel.forEach(n=>{p.push(n.linkCmsModuleId)}),this.dataCoreCpMainMenuIds=p,r.isSuccess?this.formInfo.formAlert="":(this.translate.get("ERRORMESSAGE.MESSAGE.typeError").subscribe(n=>{this.formInfo.formAlert=n}),this.formInfo.formError=r.errorMessage,this.cmsToastrService.typeErrorMessage(r.errorMessage)),this.publicHelper.processService.processStop(t)},error:r=>{this.cmsToastrService.typeError(r),this.publicHelper.processService.processStop(t,!1)}})}DataEditContent(){this.translate.get("MESSAGE.sending_information_to_the_server").subscribe(i=>{this.formInfo.formAlert=i}),this.formInfo.formError="";let t=this.constructor.name+"main";this.translate.get("MESSAGE.sending_information_to_the_server").subscribe(i=>{this.publicHelper.processService.processStart(t,i,this.constructorInfoAreaId)}),this.coreSiteCategoryService.ServiceEdit(this.dataModel).subscribe({next:i=>{this.formInfo.formSubmitAllow=!0,this.dataModelResult=i,i.isSuccess?(this.translate.get("MESSAGE.registration_completed_successfully").subscribe(e=>{this.formInfo.formAlert=e}),this.cmsToastrService.typeSuccessEdit(),this.dialogRef.close({dialogChangedDate:!0})):(this.translate.get("ERRORMESSAGE.MESSAGE.typeError").subscribe(e=>{this.formInfo.formAlert=e}),this.formInfo.formError=i.errorMessage,this.cmsToastrService.typeErrorMessage(i.errorMessage)),this.publicHelper.processService.processStop(t)},error:i=>{this.formInfo.formSubmitAllow=!0,this.cmsToastrService.typeError(i),this.publicHelper.processService.processStop(t,!1)}})}onActionSelectorUserCategorySelect(t){this.dataCoreCpMainMenuModel=t}onActionSelectorUserCategorySelectAdded(t){let i=new Re;i.linkCmsModuleId=t.id,i.linkCmsSiteCategoryId=this.dataModel.id,this.coreSiteCategoryCmsModuleService.ServiceAdd(i).subscribe({next:e=>{e.isSuccess?(this.translate.get("MESSAGE.registration_in_this_group_was_successful").subscribe(r=>{this.formInfo.formAlert=r}),this.cmsToastrService.typeSuccessEdit()):(this.translate.get("ERRORMESSAGE.MESSAGE.typeError").subscribe(r=>{this.formInfo.formAlert=r}),this.formInfo.formError=e.errorMessage,this.cmsToastrService.typeErrorMessage(e.errorMessage))},error:e=>{this.formInfo.formSubmitAllow=!0,this.cmsToastrService.typeError(e)}})}onActionSelectorUserCategorySelectRemoved(t){let i=new Re;i.linkCmsModuleId=t.id,i.linkCmsSiteCategoryId=this.dataModel.id,this.coreSiteCategoryCmsModuleService.ServiceDeleteEntity(i).subscribe({next:e=>{e.isSuccess?(this.translate.get("MESSAGE.Deletion_from_this_group_Was_Successful").subscribe(r=>{this.formInfo.formAlert=r}),this.cmsToastrService.typeSuccessEdit()):(this.translate.get("ERRORMESSAGE.MESSAGE.typeError").subscribe(r=>{this.formInfo.formAlert=r}),this.formInfo.formError=e.errorMessage,this.cmsToastrService.typeErrorMessage(e.errorMessage))},error:e=>{this.formInfo.formSubmitAllow=!0,this.cmsToastrService.typeError(e)}})}onFormSubmit(){this.formGroup.valid&&(this.formInfo.formSubmitAllow=!1,this.DataEditContent())}onFormCancel(){this.dialogRef.close({dialogChangedDate:!1})}};l.\u0275fac=function(i){return new(i||l)(S(Se),S(he),S(Z),S(B),S(ie),S(G),S(N),S(F),S(W))},l.\u0275cmp=O({type:l,selectors:[["app-core-sitecategory-edit"]],viewQuery:function(i,e){if(i&1&&ae(mi,5),i&2){let r;le(r=se())&&(e.formGroup=r.first)}},features:[Q],decls:42,vars:31,consts:[["vform","ngForm"],["Title",""],["Domains",""],["Description",""],[1,"card","card-style","loader-container"],[3,"optionsInfoAreaId"],[1,"content","mb-0"],[1,"mb-0","color-highlight","font-600","font-12"],[3,"ngSubmit"],[3,"model","optionDisabled","optionLabel","optionRequired","optionSelectFirstItem","modelChange",4,"ngIf"],[1,"input-style","has-borders","no-icon","input-style-always-active","validate-field","mb-4"],["for","dataModel.title",1,"color-highlight"],["matInput","","type","text","name","dataModel.title","minlength","3","maxlength","100","id","dataModel.title",1,"form-control","validate-name",3,"ngModelChange","ngModel","placeholder"],[4,"ngIf"],["for","dataModel.domains",1,"color-highlight"],["matInput","","name","dataModel.domains","type","text","placeholder","domain.com","rows","10","id","dataModel.domains",1,"form-control","validate-name",3,"ngModelChange","ngModel"],["for","dataModel.description",1,"color-highlight"],["matInput","","name","dataModel.description","type","text","minlength","1","maxlength","500","rows","5","id","dataModel.description",1,"form-control","validate-name",3,"ngModelChange","ngModel","placeholder"],["id","main","name","dataModel.ruleHtmlBody",3,"ngModelChange","placeholder","config","ngModel"],[3,"optionChange","optionSelectAdded","optionSelectRemoved","optionSelectForce","optionDisabled"],["class","form-actions",4,"ngIf"],[3,"modelChange","model","optionDisabled","optionLabel","optionRequired","optionSelectFirstItem"],[1,"form-actions"],["type","button",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-gray",3,"click"],[1,"ft-x"],["type","submit",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-green",3,"disabled"],[1,"fa","fa-check-square-o"]],template:function(i,e){if(i&1){let r=T();s(0,"div",4),I(1,"app-progress-spinner",5),s(2,"div",6)(3,"p",7),m(4),c(),s(5,"p"),m(6),C(7,"translate"),c(),s(8,"form",8,0),b("ngSubmit",function(){return u(r),f(e.onFormSubmit())}),M(10,pi,1,5,"app-cms-enum-record-status-selector",9),s(11,"div",10)(12,"label",11),m(13),c(),s(14,"input",12,1),A("ngModelChange",function(n){return u(r),E(e.dataModel.title,n)||(e.dataModel.title=n),f(n)}),c(),s(16,"em"),m(17),c(),M(18,ui,5,4,"mat-error",13),c(),s(19,"div",10)(20,"label",14),m(21,"Domains"),c(),s(22,"textarea",15,2),A("ngModelChange",function(n){return u(r),E(e.dataModel.domains,n)||(e.dataModel.domains=n),f(n)}),m(24,"                "),c()(),s(25,"div",10)(26,"label",16),m(27),c(),s(28,"textarea",17,3),A("ngModelChange",function(n){return u(r),E(e.dataModel.description,n)||(e.dataModel.description=n),f(n)}),m(30,"                "),c(),s(31,"em"),m(32),c(),M(33,fi,5,3,"mat-error",13),c(),m(34),C(35,"translate"),s(36,"angular-editor",18),C(37,"translate"),A("ngModelChange",function(n){return u(r),E(e.dataModel.ruleHtmlBody,n)||(e.dataModel.ruleHtmlBody=n),f(n)}),c(),m(38),C(39,"translate"),s(40,"app-core-module-selectionlist",19),b("optionChange",function(n){return u(r),f(e.onActionSelectorUserCategorySelect(n))})("optionSelectAdded",function(n){return u(r),f(e.onActionSelectorUserCategorySelectAdded(n))})("optionSelectRemoved",function(n){return u(r),f(e.onActionSelectorUserCategorySelectRemoved(n))}),c(),M(41,hi,9,7,"div",20),c()()()}if(i&2){let r=D(15),p=D(29);a(),h("optionsInfoAreaId",e.constructorInfoAreaId),a(3),g(" ",e.formInfo.formTitle," "),a(2),g(" ",_(7,23,"TITLE.Be_Careful_When_Entering_Information")," "),a(4),h("ngIf",e.fieldsInfo.recordStatus==null?null:e.fieldsInfo.recordStatus.accessWatchField),a(3),v(e.fieldsInfo.title==null?null:e.fieldsInfo.title.fieldTitle),a(),L("placeholder",e.fieldsInfo.title==null?null:e.fieldsInfo.title.fieldTitle),w("ngModel",e.dataModel.title),a(3),g("",r.value.length," / 100"),a(),h("ngIf",r.errors==null?null:r.errors.required),a(4),w("ngModel",e.dataModel.domains),a(5),v(e.fieldsInfo.description==null?null:e.fieldsInfo.description.fieldTitle),a(),L("placeholder",e.fieldsInfo.description==null?null:e.fieldsInfo.description.fieldTitle),w("ngModel",e.dataModel.description),a(4),g("",p.value.length," / 500"),a(),h("ngIf",p.errors==null?null:p.errors.required),a(),g(" ",_(35,25,"TITLE.Rules")," : "),a(2),h("placeholder",_(37,27,"TITLE.Enter_the_text_of_the_rules"))("config",e.publicHelper.editorConfig),w("ngModel",e.dataModel.ruleHtmlBody),a(2),g(" ",_(39,29,"TITLE.Available_models")," "),a(2),h("optionSelectForce",e.dataCoreCpMainMenuIds)("optionDisabled",!1),a(),h("ngIf",e.formInfo.formSubmitAllow)}},dependencies:[P,me,J,H,ce,pe,ue,K,de,fe,j,ye,U,Me,Xt,X],styles:[".form-body[_ngcontent-%COMP%]{width:500px}@media (max-width: 700px){.form-body[_ngcontent-%COMP%]{display:contents}}#file-manager[_ngcontent-%COMP%]{width:calc(100vw - 16px);height:calc(100vh - 16px)}.recordStatus-1.mat-select-panel[_ngcontent-%COMP%]{background:#ff0}.recordStatus-2.mat-select-panel[_ngcontent-%COMP%]{background:#000}.recordStatus-3.mat-select-panel[_ngcontent-%COMP%]{background:red}"]});let o=l;return o})();var Ci=()=>[5,10,20,100],_i=o=>({display:o});function yi(o,l){if(o&1){let d=T();s(0,"div",19)(1,"a",43),b("click",function(){u(d);let i=y();return f(i.onActionButtonNewRow())}),I(2,"i",44)(3,"br"),c(),s(4,"p",21),m(5),C(6,"translate"),c()()}o&2&&(a(5),v(_(6,1,"ACTION.ADD")))}function Mi(o,l){if(o&1){let d=T();s(0,"div",19)(1,"a",45),b("click",function(){u(d);let i=y();return f(i.onActionButtonEditRow(i.tableRowSelected))}),I(2,"i",46)(3,"br"),c(),s(4,"p",21),m(5),C(6,"translate"),c()()}o&2&&(a(5),v(_(6,1,"ACTION.EDIT")))}function bi(o,l){if(o&1){let d=T();s(0,"div",19)(1,"a",47),b("click",function(){u(d);let i=y();return f(i.onActionButtonDeleteRow(i.tableRowSelected))}),I(2,"i",48)(3,"br"),c(),s(4,"p",21),m(5),C(6,"translate"),c()()}o&2&&(a(5),v(_(6,1,"ACTION.DELETE")))}function Ii(o,l){o&1&&(s(0,"mat-header-cell",49),m(1),C(2,"translate"),c()),o&2&&(a(),g(" ",_(2,1,"TITLE.PICTURE")," "))}function vi(o,l){if(o&1&&(I(0,"img",51),C(1,"cmsthumbnail")),o&2){let d=y().$implicit;L("src",_(1,1,d.mainImageSrc),Qe)}}function wi(o,l){if(o&1&&(s(0,"mat-cell"),M(1,vi,2,3,"img",50),c()),o&2){let d=l.$implicit;a(),h("ngIf",(d==null||d.mainImageSrc==null?null:d.mainImageSrc.length)>0)}}function Ei(o,l){if(o&1&&(s(0,"mat-header-cell",49),m(1),c()),o&2){let d=y();a(),g(" ",d.fieldsInfo.id==null?null:d.fieldsInfo.id.fieldTitle," ")}}function Ai(o,l){if(o&1&&(s(0,"mat-cell"),m(1),c()),o&2){let d=l.$implicit;a(),g(" ",d.id," ")}}function Ti(o,l){if(o&1&&(s(0,"mat-header-cell",49),m(1),c()),o&2){let d=y();a(),g(" ",d.fieldsInfo.linkCreatedBySiteId==null?null:d.fieldsInfo.linkCreatedBySiteId.fieldTitle," ")}}function Ri(o,l){if(o&1&&(s(0,"mat-cell"),m(1),c()),o&2){let d=l.$implicit;a(),g(" ",d.linkCreatedBySiteId," ")}}function xi(o,l){if(o&1&&(s(0,"mat-header-cell",49),m(1),c()),o&2){let d=y();a(),g(" ",d.fieldsInfo.recordStatus==null?null:d.fieldsInfo.recordStatus.fieldTitle," ")}}function Di(o,l){if(o&1&&I(0,"select",54),o&2){let d=y().$implicit,t=y();h("contentService",t.contentService)("row",d)("ngStyle",et(3,_i,d.id===(t.tableRowSelected==null?null:t.tableRowSelected.id)?"":"none"))}}function Vi(o,l){if(o&1&&(s(0,"mat-cell",52),C(1,"statusCellClass"),I(2,"i",52),C(3,"statusIconClass"),M(4,Di,1,5,"select",53),c()),o&2){let d=l.$implicit,t=y();h("ngClass",_(1,3,d.recordStatus)),a(2),h("ngClass",_(3,5,d.recordStatus)),a(2),h("ngIf",t.dataModelResult==null||t.dataModelResult.access==null?null:t.dataModelResult.access.accessEditRow)}}function ki(o,l){if(o&1&&(s(0,"mat-header-cell",49),m(1),c()),o&2){let d=y();a(),g(" ",d.fieldsInfo.title==null?null:d.fieldsInfo.title.fieldTitle," ")}}function Li(o,l){if(o&1&&(s(0,"mat-cell"),m(1),c()),o&2){let d=l.$implicit;a(),g(" ",d.title," ")}}function Bi(o,l){if(o&1&&(s(0,"mat-header-cell",49),m(1),c()),o&2){let d=y();a(),g(" ",d.fieldsInfo.domains==null?null:d.fieldsInfo.domains.fieldTitle," ")}}function Gi(o,l){if(o&1&&(s(0,"mat-cell"),m(1),c()),o&2){let d=l.$implicit;a(),g(" ",d.domains," ")}}function Ni(o,l){o&1&&(s(0,"mat-header-cell"),m(1),C(2,"translate"),c()),o&2&&(a(),g(" ",_(2,1,"TITLE.OPTION")," "))}function Oi(o,l){if(o&1&&(s(0,"mat-cell",55)(1,"button",56)(2,"mat-icon"),m(3,"more_vert"),c()(),I(4,"mat-menu",null,2),c()),o&2){let d=D(5);a(),h("matMenuTriggerFor",d)}}function Fi(o,l){o&1&&I(0,"mat-header-row")}function Pi(o,l){if(o&1){let d=T();s(0,"mat-row",57),b("click",function(){let i=u(d).$implicit,e=y();return f(e.onActionTableRowSelect(i))}),c()}if(o&2){let d=l.$implicit,t=l.dataIndex,i=y();Ke("ntk-row-odd",t%2)("ntk-row-even",!(t%2))("ntk-row-selected",d.id===(i.tableRowSelected==null?null:i.tableRowSelected.id))}}var ei=(()=>{let l=class l extends Kt{constructor(t,i,e,r,p,n,k,z,ee,ii){super(t,new V,ee,p,k),this.contentService=t,this.cmsToastrService=i,this.cmsConfirmationDialogService=e,this.router=r,this.tokenHelper=p,this.cdr=n,this.translate=k,this.pageInfo=z,this.publicHelper=ee,this.dialog=ii,this.constructorInfoAreaId=this.constructor.name,this.flag=!1,this.tableContentSelected=[],this.filteModelContent=new Y,this.tabledisplayedColumns=[],this.tabledisplayedColumnsSource=["MainImageSrc","Id","RecordStatus","Domains"],this.tabledisplayedColumnsMobileSource=["MainImageSrc","Id","RecordStatus","Domains"],this.publicHelper.processService.cdr=this.cdr,this.optionsSearch.parentMethods={onSubmit:oi=>this.onSubmitOptionsSearch(oi)},this.filteModelContent.sortColumn="Id",this.filteModelContent.sortType=te.Descending}ngOnInit(){this.filteModelContent.sortColumn="Title",this.tokenHelper.getTokenInfoState().then(t=>{this.tokenInfo=t,this.DataGetAll()}),this.cmsApiStoreSubscribe=this.tokenHelper.getTokenInfoStateOnChange().subscribe({next:t=>{this.tokenInfo=t,this.DataGetAll()}})}ngOnDestroy(){this.cmsApiStoreSubscribe.unsubscribe()}DataGetAll(){this.tabledisplayedColumns=this.publicHelper.TableDisplayedColumns(this.tabledisplayedColumnsSource,this.tabledisplayedColumnsMobileSource,[],this.tokenInfo),this.tableRowsSelected=[],this.onActionTableRowSelect(new V);let t=this.constructor.name+"main";this.translate.get("MESSAGE.get_information_list").subscribe(e=>{this.publicHelper.processService.processStart(t,e,this.constructorInfoAreaId)}),this.filteModelContent.accessLoad=!0;let i=JSON.parse(JSON.stringify(this.filteModelContent));this.contentService.ServiceGetAllEditor(i).subscribe({next:e=>{e.isSuccess?(this.fieldsInfo=this.publicHelper.fieldInfoConvertor(e.access),this.dataModelResult=e,this.tableSource.data=e.listItems,this.optionsStatist?.data?.show&&this.onActionButtonStatist(!0),setTimeout(()=>{this.optionsSearch.childMethods&&this.optionsSearch.childMethods.setAccess(e.access)},1e3)):this.cmsToastrService.typeErrorMessage(e.errorMessage),this.publicHelper.processService.processStop(t)},error:e=>{this.cmsToastrService.typeError(e),this.publicHelper.processService.processStop(t,!1)}})}onTableSortData(t){this.tableSource&&this.tableSource.sort&&this.tableSource.sort.active===t.active?this.tableSource.sort.start==="asc"?(t.start="desc",this.filteModelContent.sortColumn=t.active,this.filteModelContent.sortType=te.Descending):this.tableSource.sort.start==="desc"?(t.start="asc",this.filteModelContent.sortColumn="",this.filteModelContent.sortType=te.Ascending):t.start="desc":(this.filteModelContent.sortColumn=t.active,this.filteModelContent.sortType=te.Descending),this.tableSource.sort=t,this.filteModelContent.currentPageNumber=0,this.DataGetAll()}onTablePageingData(t){this.filteModelContent.currentPageNumber=t.pageIndex+1,this.filteModelContent.rowPerPage=t.pageSize,this.DataGetAll()}onActionButtonNewRow(){if(this.dataModelResult==null||this.dataModelResult.access==null||!this.dataModelResult.access.accessAddRow){this.cmsToastrService.typeErrorAccessAdd();return}var t="";this.tokenHelper.isMobile?t="dialog-fullscreen":t="dialog-min",this.dialog.open(Ne,{height:"90%",panelClass:t,enterAnimationDuration:$.cmsViewConfig.enterAnimationDuration,exitAnimationDuration:$.cmsViewConfig.exitAnimationDuration,data:{}}).afterClosed().subscribe(e=>{e&&e.dialogChangedDate&&this.DataGetAll()})}onActionButtonEditRow(t=this.tableRowSelected){if(!t||!t.id||t.id===0){this.cmsToastrService.typeErrorSelectedRow();return}if(this.onActionTableRowSelect(t),this.dataModelResult==null||this.dataModelResult.access==null||!this.dataModelResult.access.accessEditRow){this.cmsToastrService.typeErrorAccessEdit();return}var i="";this.tokenHelper.isMobile?i="dialog-fullscreen":i="dialog-min",this.dialog.open(Oe,{height:"90%",panelClass:i,enterAnimationDuration:$.cmsViewConfig.enterAnimationDuration,exitAnimationDuration:$.cmsViewConfig.exitAnimationDuration,data:{id:this.tableRowSelected.id}}).afterClosed().subscribe(r=>{r&&r.dialogChangedDate&&this.DataGetAll()})}onActionButtonDeleteRow(t=this.tableRowSelected){if(!t||!t.id||t.id===0){this.translate.get("MESSAGE.no_row_selected_to_delete").subscribe(r=>{this.cmsToastrService.typeErrorSelected(r)});return}if(this.onActionTableRowSelect(t),this.dataModelResult==null||this.dataModelResult.access==null||!this.dataModelResult.access.accessDeleteRow){this.cmsToastrService.typeErrorAccessDelete();return}var i="",e="";this.translate.get(["MESSAGE.Please_Confirm","MESSAGE.Do_you_want_to_delete_this_content"]).subscribe(r=>{i=r["MESSAGE.Please_Confirm"],e=r["MESSAGE.Do_you_want_to_delete_this_content"]+"?<br> ( "+this.tableRowSelected.title+" ) "}),this.cmsConfirmationDialogService.confirm(i,e).then(r=>{if(r){let p=this.constructor.name+"main";this.translate.get("MESSAGE.Receiving_information").subscribe(n=>{this.publicHelper.processService.processStart(p,n,this.constructorInfoAreaId)}),this.contentService.ServiceDelete(this.tableRowSelected.id).subscribe({next:n=>{n.isSuccess?(this.cmsToastrService.typeSuccessRemove(),this.DataGetAll()):this.cmsToastrService.typeErrorRemove(),this.publicHelper.processService.processStop(p)},error:n=>{this.cmsToastrService.typeError(n),this.publicHelper.processService.processStop(p,!1)}})}}).catch(()=>{})}onActionButtonGoToSiteCategoryList(t=this.tableRowSelected){if(!t||!t.id||t.id===0){this.translate.get("MESSAGE.no_row_selected_to_display").subscribe(i=>{this.cmsToastrService.typeErrorSelected(i)});return}this.onActionTableRowSelect(t),this.router.navigate(["/core/siteSiteCategory/",this.tableRowSelected.id])}onActionButtonStatist(t=!this.optionsStatist.data.show){if(this.optionsStatist.data.show=t,!this.optionsStatist.data.show)return;let i=new Map;this.translate.get("MESSAGE.Active").subscribe(n=>{i.set(n,0)}),this.translate.get("MESSAGE.All").subscribe(n=>{i.set(n,0)});let e=this.constructor.name+".ServiceStatist";this.translate.get("MESSAGE.Get_the_statist").subscribe(n=>{this.publicHelper.processService.processStart(e,n,this.constructorInfoAreaId)}),this.contentService.ServiceGetCount(this.filteModelContent).subscribe({next:n=>{n.isSuccess?(this.translate.get("MESSAGE.All").subscribe(k=>{i.set(k,n.totalRowCount)}),this.optionsStatist.childMethods.setStatistValue(i)):this.cmsToastrService.typeErrorMessage(n.errorMessage),this.publicHelper.processService.processStop(e)},error:n=>{this.cmsToastrService.typeError(n),this.publicHelper.processService.processStop(e,!1)}});let r=JSON.parse(JSON.stringify(this.filteModelContent)),p=new q;p.propertyName="RecordStatus",p.value=ht.Available,r.filters.push(p),this.contentService.ServiceGetCount(r).subscribe({next:n=>{n.isSuccess?(this.translate.get("MESSAGE.Active").subscribe(k=>{i.set(k,n.totalRowCount)}),this.optionsStatist.childMethods.setStatistValue(i)):this.cmsToastrService.typeErrorMessage(n.errorMessage),this.publicHelper.processService.processStop(e)},error:n=>{this.cmsToastrService.typeError(n),this.publicHelper.processService.processStop(e,!1)}})}onActionButtonModuleList(t=this.tableRowSelected){if(!t||!t.id||t.id===0){this.translate.get("ERRORMESSAGE.MESSAGE.typeErrorSelectedRow").subscribe(i=>{this.cmsToastrService.typeErrorSelected(i)});return}this.onActionTableRowSelect(t),this.router.navigate(["/core/sitecategorymodule/LinkCmsSiteCategoryId",this.tableRowSelected.id])}onActionButtonSiteList(t=this.tableRowSelected){if(!t||!t.id||t.id===0){this.translate.get("ERRORMESSAGE.MESSAGE.typeErrorSelectedRow").subscribe(i=>{this.cmsToastrService.typeErrorSelected(i)});return}this.onActionTableRowSelect(t),this.router.navigate(["/core/site/list/LinkSiteCategoryId",this.tableRowSelected.id])}onActionButtonReload(){this.DataGetAll()}onSubmitOptionsSearch(t){this.filteModelContent.filters=t,this.DataGetAll()}};l.\u0275fac=function(i){return new(i||l)(S(B),S(G),S(be),S(pt),S(xe),S(F),S(W),S(_t),S(N),S(ft))},l.\u0275cmp=O({type:l,selectors:[["app-core-sitecategory-list"]],features:[Q],decls:70,vars:34,consts:[["tableSort","matSort"],["paginator",""],["actionMenu","matMenu"],[3,"optionActionGuideNoticeDisplayChange","optionOnActionButtonMemoRow","optionOnActionButtonMemo","optionOnActionButtonExport","optionOnActionButtonPrintRow","optionsListInfoAreaId","optionGuideNoticeKey","optionActionGuideNoticeDisplay","optionTreeDisplay","optionActionRowId","optionActionRowDisplayMenu","optionSelectRowItemTitle"],["cms-tree",""],["cms-header",""],["cms-action-header",""],["cms-action-header-start",""],["type","button","target","_blank",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-highlight",3,"click"],[1,"fa-solid","fa-info","font-18",2,"color","#ffffff"],[1,"fa-solid","fa-rotate-right","font-18",2,"color","#ffffff"],["cms-action-header-end",""],[1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-highlight",3,"click"],[3,"ngModelChange","click","ngModel"],[1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-highlight"],[3,"click","ngModelChange","ngModel"],["cms-action-main",""],["class","col-4",4,"ngIf"],["cms-action-row",""],[1,"col-4"],["target","_blank",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-highlight",3,"click"],[1,"font-11","text-center","opacity-70"],[1,"fa-solid","fa-globe","font-18",2,"color","#ffffff"],["cms-action-area",""],[3,"optionsChange","options"],["cms-body",""],["matSort","",3,"matSortChange","dataSource"],["matColumnDef","MainImageSrc"],["mat-sort-header","",4,"matHeaderCellDef"],[4,"matCellDef"],["matColumnDef","Id"],["matColumnDef","linkCreatedBySiteId"],["matColumnDef","RecordStatus"],[3,"ngClass",4,"matCellDef"],["matColumnDef","Title"],["matColumnDef","Domains"],["matColumnDef","Action"],[4,"matHeaderCellDef"],["class"," Action",4,"matCellDef"],[4,"matHeaderRowDef"],[3,"ntk-row-odd","ntk-row-even","ntk-row-selected","click",4,"matRowDef","matRowDefColumns"],["cms-footer",""],[3,"page","length","pageIndex","pageSize","pageSizeOptions"],["type","button","target","_blank",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-teal",3,"click"],[1,"fa-solid","fa-plus","font-18",2,"color","#FFFFFF"],["target","_blank",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-magenta",3,"click"],[1,"fa-solid","fa-pen","font-18",2,"color","#FFFFFF"],["target","_blank",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-red",3,"click"],[1,"fa-solid","fa-trash","font-18",2,"color","#ffffff"],["mat-sort-header",""],["style","vertical-align:middle;","class","ntk-hover-zoom","aria-hidden","","height","40","width","40",3,"src",4,"ngIf"],["aria-hidden","","height","40","width","40",1,"ntk-hover-zoom",2,"vertical-align","middle",3,"src"],[3,"ngClass"],["matNativeControl","","cmsRecordStatusSelfSave","","style","background: none; border: none;",3,"contentService","row","ngStyle",4,"ngIf"],["matNativeControl","","cmsRecordStatusSelfSave","",2,"background","none","border","none",3,"contentService","row","ngStyle"],[1,"Action"],["type","button","mat-icon-button","","aria-label","Action Menu",3,"matMenuTriggerFor"],[3,"click"]],template:function(i,e){if(i&1){let r=T();s(0,"app-cms-html-list",3),A("optionActionGuideNoticeDisplayChange",function(n){return u(r),E(e.viewGuideNotice,n)||(e.viewGuideNotice=n),f(n)}),b("optionOnActionButtonMemoRow",function(){return u(r),f(e.onActionButtonMemoRow())})("optionOnActionButtonMemo",function(){return u(r),f(e.onActionButtonMemo())})("optionOnActionButtonExport",function(){return u(r),f(e.onActionButtonExport())})("optionOnActionButtonPrintRow",function(){return u(r),f(e.onActionButtonPrintRow())}),R(1,4),m(2," -------------------------------------- "),x(),Xe(3,5)(4,6),R(5,7),s(6,"a",8),b("click",function(){return u(r),f(e.viewGuideNotice=!e.viewGuideNotice)}),I(7,"i",9),c(),s(8,"a",8),b("click",function(){return u(r),f(e.onActionButtonReload())}),I(9,"i",10),c(),x(),R(10,11),s(11,"a",12),b("click",function(){return u(r),f(e.optionsSearch.data.show=!e.optionsSearch.data.show)}),s(12,"mat-slide-toggle",13),A("ngModelChange",function(n){return u(r),E(e.optionsSearch.data.show,n)||(e.optionsSearch.data.show=n),f(n)}),b("click",function(){return u(r),f(e.optionsSearch.data.show=!e.optionsSearch.data.show)}),c(),m(13),C(14,"translate"),c(),s(15,"a",14)(16,"mat-slide-toggle",15),b("click",function(){return u(r),f(e.onActionButtonStatist())}),A("ngModelChange",function(n){return u(r),E(e.optionsStatist.data.show,n)||(e.optionsStatist.data.show=n),f(n)}),c(),m(17),C(18,"translate"),c(),x(),R(19,16),M(20,yi,7,3,"div",17),x(),R(21,18),M(22,Mi,7,3,"div",17)(23,bi,7,3,"div",17),s(24,"div",19)(25,"a",20),b("click",function(){return u(r),f(e.onActionButtonModuleList(e.tableRowSelected))}),s(26,"mat-icon"),m(27,"view_module"),c()(),s(28,"p",21),m(29),C(30,"translate"),c()(),s(31,"div",19)(32,"a",20),b("click",function(){return u(r),f(e.onActionButtonSiteList(e.tableRowSelected))}),I(33,"i",22)(34,"br"),c(),s(35,"p",21),m(36),C(37,"translate"),c()(),x(),R(38,23),s(39,"app-cms-search-list",24),A("optionsChange",function(n){return u(r),E(e.optionsSearch,n)||(e.optionsSearch=n),f(n)}),c(),s(40,"app-cms-statist-list",24),A("optionsChange",function(n){return u(r),E(e.optionsStatist,n)||(e.optionsStatist=n),f(n)}),c(),x(),R(41,25),s(42,"mat-table",26,0),b("matSortChange",function(){u(r);let n=D(43);return f(e.onTableSortData(n))}),R(44,27),M(45,Ii,3,3,"mat-header-cell",28)(46,wi,2,1,"mat-cell",29),x(),R(47,30),M(48,Ei,2,1,"mat-header-cell",28)(49,Ai,2,1,"mat-cell",29),x(),R(50,31),M(51,Ti,2,1,"mat-header-cell",28)(52,Ri,2,1,"mat-cell",29),x(),R(53,32),M(54,xi,2,1,"mat-header-cell",28)(55,Vi,5,7,"mat-cell",33),x(),R(56,34),M(57,ki,2,1,"mat-header-cell",28)(58,Li,2,1,"mat-cell",29),x(),R(59,35),M(60,Bi,2,1,"mat-header-cell",28)(61,Gi,2,1,"mat-cell",29),x(),R(62,36),M(63,Ni,3,3,"mat-header-cell",37)(64,Oi,6,1,"mat-cell",38),x(),M(65,Fi,1,0,"mat-header-row",39)(66,Pi,1,6,"mat-row",40),c(),x(),R(67,41),s(68,"mat-paginator",42,1),b("page",function(n){return u(r),f(e.onTablePageingData(n))}),c(),x(),c()}i&2&&(h("optionsListInfoAreaId",e.constructorInfoAreaId)("optionGuideNoticeKey",""),w("optionActionGuideNoticeDisplay",e.viewGuideNotice),h("optionTreeDisplay",!1)("optionActionRowId",e.tableRowSelected==null?null:e.tableRowSelected.id)("optionActionRowDisplayMenu",e.tableRowSelectDoubleClick)("optionSelectRowItemTitle",(e.tableRowSelected==null||e.tableRowSelected.title==null?null:e.tableRowSelected.title.length)>0?e.tableRowSelected==null?null:e.tableRowSelected.title:e.tableRowSelected==null?null:e.tableRowSelected.id),a(12),w("ngModel",e.optionsSearch.data.show),a(),g("",_(14,25,"ACTION.SEARCH")," "),a(3),w("ngModel",e.optionsStatist.data.show),a(),g("",_(18,27,"ACTION.STATIST")," "),a(3),h("ngIf",e.dataModelResult==null||e.dataModelResult.access==null?null:e.dataModelResult.access.accessAddRow),a(2),h("ngIf",e.dataModelResult==null||e.dataModelResult.access==null?null:e.dataModelResult.access.accessEditRow),a(),h("ngIf",e.dataModelResult==null||e.dataModelResult.access==null?null:e.dataModelResult.access.accessDeleteRow),a(6),v(_(30,29,"ACTION.MODULES")),a(7),v(_(37,31,"ACTION.SITES")),a(3),w("options",e.optionsSearch),a(),w("options",e.optionsStatist),a(2),h("dataSource",e.tableSource),a(23),h("matHeaderRowDef",e.tabledisplayedColumns),a(),h("matRowDefColumns",e.tabledisplayedColumns),a(2),h("length",e.dataModelResult.totalRowCount)("pageIndex",e.dataModelResult.currentPageNumber-1)("pageSize",e.dataModelResult.rowPerPage)("pageSizeOptions",$e(33,Ci)))},dependencies:[tt,P,ot,H,K,ut,ge,j,bt,It,vt,wt,Et,At,Tt,xt,Lt,Dt,Rt,Bt,Vt,kt,Gt,Nt,jt,qt,Wt,Ot,X,Ft,Ht,Pt],encapsulation:2});let o=l;return o})();var Hi=[{path:"",children:[{path:"",component:ei}]}],ti=(()=>{let l=class l{};l.\u0275fac=function(i){return new(i||l)},l.\u0275mod=re({type:l}),l.\u0275inj=ne({imports:[Ee.forChild(Hi),Ee]});let o=l;return o})();var Wi=["*"];function ji(o,l){if(o&1&&(s(0,"label",8),m(1),c()),o&2){let d=y();we("for","app-cms-site-selector-",d.id,""),a(),v(d.optionLabel)}}function qi(o,l){if(o&1&&(s(0,"mat-option",9)(1,"span"),m(2),c()()),o&2){let d=l.$implicit,t=y();h("value",d)("disabled",t.optionDisabled),a(2),v(t.displayOption(d))}}function Ui(o,l){if(o&1){let d=T();s(0,"mat-icon",10),b("click",function(){u(d);let i=y();return f(i.onActionSelectClear())}),m(1,"close"),c()}}var Oo=(()=>{let l=class l{constructor(t,i,e,r,p,n){this.coreEnumService=t,this.cmsToastrService=i,this.cdr=e,this.publicHelper=r,this.translate=p,this.categoryService=n,this.id=++l.nextId,this.constructorInfoAreaId=this.constructor.name,this.dataModelResult=new Ce,this.dataModelSelect=new V,this.formControl=new lt,this.optionDisabled=!1,this.optionSelectFirstItem=!1,this.optionPlaceholder="",this.optionLabel="",this.optionChange=new ze,this.optionReload=()=>this.onActionButtonReload(),this.publicHelper.processService.cdr=this.cdr}set optionSelectForce(t){this.onActionSelectForce(t)}ngOnInit(){this.loadOptions(),(!this.optionLabel||this.optionLabel.length==0&&this.optionPlaceholder?.length>0)&&(this.optionLabel=this.optionPlaceholder)}loadOptions(){this.filteredOptions=this.formControl.valueChanges.pipe(qe(""),We(1500),je(),Ue(t=>typeof t=="string"||typeof t=="number"?this.DataGetAll(t||""):[]))}displayFn(t){return t?t.title:void 0}displayOption(t){return t?t.title:void 0}DataGetAll(t){return Fe(this,null,function*(){let i=new Y;i.rowPerPage=20,i.accessLoad=!0;let e=new q;return e.propertyName="Title",e.value=t,e.searchType=Te.Contains,e.clauseType=Ae.Or,i.filters.push(e),t&&typeof+t=="number"&&+t>0&&(e=new q,e.propertyName="Id",e.value=t,e.searchType=Te.Equal,e.clauseType=Ae.Or,i.filters.push(e)),this.publicHelper.processService.processStart("DataGetAll"),yield Pe(this.categoryService.ServiceGetAll(i)).then(r=>(this.dataModelResult=r,this.optionSelectFirstItem&&(!this.dataModelSelect||!this.dataModelSelect.id||this.dataModelSelect.id<=0)&&this.dataModelResult.listItems.length>0&&(this.optionSelectFirstItem=!1,setTimeout(()=>{this.formControl.setValue(this.dataModelResult.listItems[0])},1e3),this.onActionSelect(this.dataModelResult.listItems[0])),this.publicHelper.processService.processStop("DataGetAll"),r.listItems))})}onActionSelect(t){this.optionDisabled||(this.dataModelSelect=t,this.optionChange.emit(this.dataModelSelect))}onActionSelectClear(){this.optionDisabled||(this.dataModelSelect=null,this.formControl.setValue(null),this.optionChange.emit(null))}push(t){return this.filteredOptions.pipe(He(i=>(i.find(e=>e.id===t.id)||i.push(t),i)))}onActionSelectForce(t){if(typeof t=="number"&&t>0){if(this.dataModelSelect&&this.dataModelSelect.id===t)return;if(this.dataModelResult&&this.dataModelResult.listItems&&this.dataModelResult.listItems.find(i=>i.id===t)){let i=this.dataModelResult.listItems.find(e=>e.id===t);this.dataModelSelect=i,this.formControl.setValue(i);return}this.categoryService.ServiceGetOneById(t).subscribe({next:i=>{i.isSuccess?(this.filteredOptions=this.push(i.item),this.dataModelSelect=i.item,this.formControl.setValue(i.item),this.optionChange.emit(i.item)):this.cmsToastrService.typeErrorMessage(i.errorMessage)}});return}if(typeof t==typeof V){this.filteredOptions=this.push(t),this.dataModelSelect=t,this.formControl.setValue(t);return}this.formControl.setValue(null)}onActionButtonReload(){this.dataModelSelect=new V,this.loadOptions()}};l.nextId=0,l.\u0275fac=function(i){return new(i||l)(S(Z),S(G),S(F),S(N),S(W),S(B))},l.\u0275cmp=O({type:l,selectors:[["app-core-sitecategory-selector"]],inputs:{optionDisabled:"optionDisabled",optionSelectFirstItem:"optionSelectFirstItem",optionPlaceholder:"optionPlaceholder",optionLabel:"optionLabel",optionReload:"optionReload",optionSelectForce:"optionSelectForce"},outputs:{optionChange:"optionChange"},ngContentSelectors:Wi,decls:10,vars:13,consts:[["matauto","matAutocomplete"],[1,"input-style","has-borders","no-icon","input-style-always-active","validate-field","mb-4","loader-container"],[3,"optionsInfoAreaId"],["class","color-highlight",3,"for",4,"ngIf"],["type","text","matInput","",1,"form-control","validate-name",3,"placeholder","formControl","matAutocomplete","id"],[3,"optionSelected","displayWith"],[3,"value","disabled",4,"ngFor","ngForOf"],["matSuffix","","matSuffix","","mat-icon-button","","aria-label","Clear",3,"click",4,"ngIf"],[1,"color-highlight",3,"for"],[3,"value","disabled"],["matSuffix","","matSuffix","","mat-icon-button","","aria-label","Clear",3,"click"]],template:function(i,e){if(i&1){let r=T();Ye(),s(0,"div",1),I(1,"app-progress-spinner",2),M(2,ji,2,3,"label",3),I(3,"input",4),s(4,"mat-autocomplete",5,0),b("optionSelected",function(n){return u(r),f(e.onActionSelect(n.option.value))}),M(6,qi,3,3,"mat-option",6),C(7,"async"),c(),M(8,Ui,2,0,"mat-icon",7),Ze(9),c()}if(i&2){let r=D(5);a(),h("optionsInfoAreaId",e.constructorInfoAreaId),a(),h("ngIf",(e.optionLabel==null?null:e.optionLabel.length)>0),a(),L("placeholder",e.optionPlaceholder),we("id","app-cms-site-selector-",e.id,""),h("formControl",e.formControl)("matAutocomplete",r),Je("disabled",e.optionDisabled?!0:null),a(),h("displayWith",e.displayFn),a(2),h("ngForOf",_(7,11,e.filteredOptions)),a(2),h("ngIf",e.dataModelSelect==null?null:e.dataModelSelect.id)}},dependencies:[it,P,J,H,st,yt,at,Mt,mt,ge,j,U,nt],encapsulation:2});let o=l;return o})();var fn=(()=>{let l=class l{};l.\u0275fac=function(i){return new(i||l)},l.\u0275mod=re({type:l}),l.\u0275inj=ne({providers:[B,ie,Ct,ie,be],imports:[rt,ct,ti,dt.withConfig({warnOnNgModelWithFormControl:"never"}),Ut,Jt,Yt]});let o=l;return o})();export{Oo as a,fn as b};
