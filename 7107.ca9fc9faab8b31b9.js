"use strict";(self.webpackChunkntk_cms_web=self.webpackChunkntk_cms_web||[]).push([[7107],{9041:(U,S,i)=>{i.d(S,{p:()=>e});var M=i(7788);let e=(()=>{class _{transform(h,p){if(!p||0===p.length)return"";const g=p.find(E=>E.key===h||E.value===h);return g?g.description:""}static#t=this.\u0275fac=function(p){return new(p||_)};static#e=this.\u0275pipe=M.EJ8({name:"enums",type:_,pure:!0})}return _})()},2646:(U,S,i)=>{i.d(S,{B:()=>I});var M=i(6482),e=i(8189),_=i(4434),t=i(7788),h=i(9722),p=i(2882),g=i(5154),E=i(6610),R=i(7912),T=i(2643),O=i(9041);function C(d,D){1&d&&(t.j41(0,"div"),t.nrm(1,"span",13)(2,"br"),t.k0s()),2&d&&(t.R7$(),t.Y8G("inlineSVG","assets/media/svg/icons/General/Shield-check.svg"))}function P(d,D){if(1&d&&(t.j41(0,"div",8)(1,"div",9)(2,"div",10),t.EFF(3),t.nI1(4,"translate"),t.k0s(),t.j41(5,"div",10),t.EFF(6),t.k0s(),t.nrm(7,"div",11),t.k0s(),t.j41(8,"div",9)(9,"div",10),t.EFF(10),t.nI1(11,"translate"),t.k0s(),t.j41(12,"div",10),t.DNE(13,C,3,1,"div",12),t.EFF(14),t.nI1(15,"enums"),t.k0s(),t.nrm(16,"div",11),t.k0s(),t.j41(17,"div",9)(18,"div",10),t.EFF(19),t.nI1(20,"translate"),t.k0s(),t.j41(21,"div",10),t.EFF(22),t.k0s(),t.nrm(23,"div",11),t.k0s(),t.j41(24,"div",9)(25,"div",10),t.EFF(26),t.nI1(27,"translate"),t.k0s(),t.j41(28,"div",10),t.EFF(29),t.k0s(),t.nrm(30,"div",11),t.k0s()()),2&d){const r=t.XpG();t.R7$(3),t.JRh(t.bMT(4,11,"TITLE.Transaction_ID")),t.R7$(3),t.JRh(r.dataModelResult.item.id),t.R7$(4),t.Lme("",t.bMT(11,13,"TITLE.Transaction_status"),":",r.requestId,""),t.R7$(3),t.Y8G("ngIf",r.dataModelResult.item.transactionStatus===r.TransactionSuccessful),t.R7$(),t.SpI(" ",t.i5U(15,15,r.dataModelResult.item.transactionStatus,r.dataModelEnumTransactionRecordStatusResult.listItems)," "),t.R7$(5),t.SpI(" ",t.bMT(20,18,"TITLE.Amount")," "),t.R7$(3),t.Lme("",r.dataModelResult.item.amount," ",r.dataModelResult.item.currencyUnit,""),t.R7$(4),t.SpI("",t.bMT(27,20,"TITLE.Message")," "),t.R7$(3),t.JRh(r.dataModelResult.item.lastStatusMessage)}}let I=(()=>{class d{static#t=this.nextId=0;constructor(r,c,m,v,b,y,A,L){this.data=r,this.bankPaymentTransactionService=c,this.dialogRef=m,this.bankPaymentEnumService=v,this.cmsToastrService=b,this.translate=y,this.cdr=A,this.publicHelper=L,this.id=++d.nextId,this.requestId=0,this.loading=new _.o,this.dataModelResult=new e.N$V,this.dataModelEnumTransactionRecordStatusResult=new e.N$V,this.TransactionSuccessful=e.Ngb.TransactionSuccessful,this.publicHelper.processService.cdr=this.cdr,this.translate.get("MESSAGE.Receiving_information").subscribe(F=>{this.loading.message=F}),r&&(this.requestId=+r.id||0)}get optionLoading(){return this.loading}set optionLoading(r){this.loading=r}ngOnInit(){if(this.requestId<=0)return this.cmsToastrService.typeErrorComponentAction(),void this.dialogRef.close({dialogChangedDate:!1});this.DataGeOne(),this.getEnumTransactionRecordStatus()}getEnumTransactionRecordStatus(){this.bankPaymentEnumService.ServiceTransactionRecordStatusEnum().subscribe({next:r=>{this.dataModelEnumTransactionRecordStatusResult=r}})}DataGeOne(){const r=this.constructor.name+"main";this.translate.get("MESSAGE.Receiving_information").subscribe(c=>{this.publicHelper.processService.processStart(r,c,this.constructor.name)}),this.bankPaymentTransactionService.ServiceGetOneById(this.requestId).subscribe({next:c=>{c.isSuccess?this.dataModelResult=c:this.cmsToastrService.typeErrorMessage(c.errorMessage),this.publicHelper.processService.processStop(r)},error:c=>{this.cmsToastrService.typeError(c),this.publicHelper.processService.processStop(r)}})}onFormCancel(){this.dialogRef.close({dialogChangedDate:!0})}static#e=this.\u0275fac=function(c){return new(c||d)(t.rXU(M.Vh),t.rXU(e.sVk),t.rXU(M.CP),t.rXU(e.nPX),t.rXU(h.k),t.rXU(p.c$),t.rXU(t.gRc),t.rXU(g.A))};static#n=this.\u0275cmp=t.VBU({type:d,selectors:[["app-cms-bankpayment-transaction-info"]],inputs:{optionLoading:"optionLoading"},decls:12,vars:9,consts:[[1,"ntk-cms-html-card-header"],[1,"ntk-cms-html-card-body","progressOverlayContainer"],[3,"optionsInfoAreaId"],["class","table",4,"ngIf"],[1,"ntk-cms-html-card-footer"],[1,"form-actions"],["type","button",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-gray",3,"click"],[1,"ft-x"],[1,"table"],[1,"tr"],[1,"td"],[2,"clear","both"],[4,"ngIf"],[1,"svg-icon","svg-icon-3x","svg-icon-primary",3,"inlineSVG"]],template:function(c,m){1&c&&(t.j41(0,"div",0),t.EFF(1),t.nI1(2,"translate"),t.k0s(),t.j41(3,"div",1),t.nrm(4,"app-progress-spinner",2),t.DNE(5,P,31,22,"div",3),t.k0s(),t.j41(6,"div",4)(7,"div",5)(8,"button",6),t.bIt("click",function(){return m.onFormCancel()}),t.nrm(9,"i",7),t.EFF(10),t.nI1(11,"translate"),t.k0s()()()),2&c&&(t.R7$(),t.Lme(" ",t.bMT(2,5,"TITLE.Transaction_status"),":",m.requestId," "),t.R7$(3),t.Y8G("optionsInfoAreaId",m.constructor.name),t.R7$(),t.Y8G("ngIf",m.dataModelResult.item&&m.dataModelResult.item.id>0),t.R7$(5),t.SpI(" ",t.bMT(11,7,"ACTION.BACK")," "))},dependencies:[E.bT,R._,T.l,p.D9,O.p],styles:[".table[_ngcontent-%COMP%]{display:table;border:1px solid #40A1F5}.table[_ngcontent-%COMP%]   .th[_ngcontent-%COMP%]{display:table-row;background-color:#40a1f5;color:#fff;font-weight:700}.table[_ngcontent-%COMP%]   .tr[_ngcontent-%COMP%]:nth-child(odd){background-color:#f9f9f9}.table[_ngcontent-%COMP%]   .tr[_ngcontent-%COMP%]{display:table-row;border-bottom:1px solid #000}.table[_ngcontent-%COMP%]   .td[_ngcontent-%COMP%]{display:table-cell;padding:15px;border-bottom:1px solid #40A1F5}.table[_ngcontent-%COMP%]   .tr[_ngcontent-%COMP%]:last-child   .td[_ngcontent-%COMP%]{border:0}.clear[_ngcontent-%COMP%]{clear:both}"]})}return d})()},996:(U,S,i)=>{i.d(S,{B:()=>W});var M=i(3308),e=i(7788),_=i(7222),t=i(8189),h=i(5804),p=i(965),g=i(8887),E=i(3793),R=i(2831),T=i(3527),O=i(4434),C=i(2882),P=i(5154),I=i(6610),d=i(2497),D=i(8278),r=i(9344),c=i(4587),m=i(7912),v=i(8267);const b=["*"];function y(l,f){if(1&l&&(e.nrm(0,"img",13),e.nI1(1,"cmsthumbnail")),2&l){const o=e.XpG();e.FS9("src",e.bMT(1,1,null==o.dataModelSelect?null:o.dataModelSelect.linkMainImageIdSrc),e.B4B)}}function A(l,f){if(1&l&&(e.nrm(0,"img",13),e.nI1(1,"cmsthumbnail")),2&l){const o=e.XpG().$implicit;e.FS9("src",e.bMT(1,1,o.linkMainImageIdSrc),e.B4B)}}function L(l,f){if(1&l&&(e.j41(0,"mat-option",14),e.DNE(1,A,2,3,"img",4),e.j41(2,"span"),e.EFF(3),e.k0s()()),2&l){const o=f.$implicit,n=e.XpG();e.Y8G("value",o)("disabled",n.optionDisabled),e.R7$(),e.Y8G("ngIf",o.linkMainImageIdSrc),e.R7$(2),e.JRh(n.displayOption(o))}}function F(l,f){1&l&&e.nrm(0,"i",15)}function k(l,f){1&l&&e.nrm(0,"i",16)}function G(l,f){if(1&l){const o=e.RV6();e.j41(0,"i",17),e.bIt("click",function(){e.eBV(o);const s=e.XpG();return e.Njj(s.onActionSelectClear())}),e.k0s()}}function K(l,f){1&l&&(e.j41(0,"em"),e.EFF(1),e.nI1(2,"translate"),e.k0s()),2&l&&(e.R7$(),e.SpI("(",e.bMT(2,1,"TITLE.Necessary"),")"))}let W=(()=>{class l{static#t=this.nextId=0;constructor(o,n,s,u,a){this.coreEnumService=o,this.translate=n,this.cdr=s,this.publicHelper=u,this.categoryService=a,this.id=++l.nextId,this.dataModelResult=new t.N$V,this.dataModelSelect=new t.skm,this.formControl=new _.MJ,this.optionDisabled=!1,this.optionSelectFirstItem=!1,this.optionPlaceholder="",this.optionLabel="",this.optionRequired=!1,this.optionChange=new e.bkB,this.optionReload=()=>this.onActionButtonReload(),this.loading=new O.o,this.dateUseStore=!0,this.publicHelper.processService.cdr=this.cdr,this.translate.get("MESSAGE.Receiving_information").subscribe(B=>{this.loading.message=B})}set optionSelectForce(o){this.onActionSelectForce(o)}get optionLoading(){return this.loading}set optionLoading(o){this.loading=o}ngOnInit(){this.loadOptions(),(!this.optionLabel||0==this.optionLabel.length&&this.optionPlaceholder?.length>0)&&(this.optionLabel=this.optionPlaceholder)}loadOptions(){this.filteredOptions=this.formControl.valueChanges.pipe((0,p.Z)(""),(0,g.B)(1500),(0,E.F)(),(0,R.n)(o=>this.DataGetAll("string"==typeof o||"number"==typeof o?o:"")))}displayFn(o){return o?o.titleML:void 0}displayOption(o){return o?o.titleML:void 0}DataGetAll(o){var n=this;return(0,M.A)(function*(){if(n.dateUseStore&&(n.dataModelResult=yield n.publicHelper.getCurrency(),n.dataModelResult.isSuccess))return n.optionSelectFirstItem&&(!n.dataModelSelect||!n.dataModelSelect.id||n.dataModelSelect.id<=0)&&n.dataModelResult.listItems.length>0&&(n.optionSelectFirstItem=!1,setTimeout(()=>{n.formControl.setValue(n.dataModelResult.listItems[0])},1e3),n.onActionSelect(n.dataModelResult.listItems[0])),n.dataModelResult.listItems;const s=new t.O2i;if(s.rowPerPage=20,s.accessLoad=!0,o&&o.length>0){let a=new t.ycK;a=new t.ycK,a.propertyName="Symbol",a.value=o,a.searchType=t._GO.Contains,a.clauseType=t.jL_.Or,s.filters.push(a),a=new t.ycK,a.propertyName="Title",a.value=o,a.searchType=t._GO.Contains,a.clauseType=t.jL_.Or,s.filters.push(a),o&&"number"==typeof+o&&+o>0&&(a=new t.ycK,a.propertyName="Id",a.value=o,a.searchType=t._GO.Equal,a.clauseType=t.jL_.Or,s.filters.push(a))}const u=n.constructor.name+"ServiceGetAll";return n.translate.get("MESSAGE.Receiving_information").subscribe(a=>{n.publicHelper.processService.processStart(u,a,n.constructor.name)}),n.categoryService.setAccessDataType(t.FYP.Viewer),yield(0,h._)(n.categoryService.ServiceGetAll(s)).then(a=>(n.dataModelResult=a,n.optionSelectFirstItem&&(!n.dataModelSelect||!n.dataModelSelect.id||n.dataModelSelect.id<=0)&&n.dataModelResult.listItems.length>0&&(n.optionSelectFirstItem=!1,setTimeout(()=>{n.formControl.setValue(n.dataModelResult.listItems[0])},1e3),n.onActionSelect(n.dataModelResult.listItems[0])),n.publicHelper.processService.processStop(u),a.listItems))})()}onActionSelect(o){this.optionDisabled||(this.dataModelSelect=o,this.optionChange.emit(this.dataModelSelect))}onActionSelectClear(){this.optionDisabled||(this.dataModelSelect=null,this.formControl.setValue(null),this.optionChange.emit(null))}push(o){return this.filteredOptions.pipe((0,T.T)(n=>(n.find(s=>s.id===o.id)||n.push(o),n)))}onActionSelectForce(o){if("number"==typeof o&&o>0){if(this.dataModelSelect&&this.dataModelSelect.id===o)return;if(this.dataModelResult&&this.dataModelResult.listItems&&this.dataModelResult.listItems.find(n=>n.id===o)){const n=this.dataModelResult.listItems.find(s=>s.id===o);return this.dataModelSelect=n,void this.formControl.setValue(n)}this.categoryService.ServiceGetOneById(o).subscribe({next:n=>{n.isSuccess&&(this.filteredOptions=this.push(n.item),this.dataModelSelect=n.item,this.formControl.setValue(n.item),this.optionChange.emit(n.item))}})}else{if(typeof o==typeof t.skm)return this.filteredOptions=this.push(o),this.dataModelSelect=o,void this.formControl.setValue(o);this.formControl.setValue(null)}}onActionButtonReload(){this.dataModelSelect=new t.skm,this.loadOptions()}static#e=this.\u0275fac=function(n){return new(n||l)(e.rXU(t.i9D),e.rXU(C.c$),e.rXU(e.gRc),e.rXU(P.A),e.rXU(t.SGQ))};static#n=this.\u0275cmp=e.VBU({type:l,selectors:[["app-cms-currency-selector"]],inputs:{optionDisabled:"optionDisabled",optionSelectFirstItem:"optionSelectFirstItem",optionPlaceholder:"optionPlaceholder",optionLabel:"optionLabel",optionRequired:"optionRequired",optionReload:"optionReload",optionSelectForce:"optionSelectForce",optionLoading:"optionLoading"},outputs:{optionChange:"optionChange"},ngContentSelectors:b,decls:17,vars:16,consts:[["matauto","matAutocomplete"],[1,"input-style","has-borders","has-icon","input-style-always-active","validate-field","mb-4","progressOverlayContainer"],[3,"optionsInfoAreaId"],["matPrefix",""],["style","vertical-align:middle;","class","ntk-hover-zoom","aria-hidden","","height","25","width","25",3,"src",4,"ngIf"],["type","text","aria-label","Assignee","matInput","","id","forminput",3,"placeholder","formControl","matAutocomplete","required"],["for","forminput",1,"color-highlight"],[3,"optionSelected","displayWith"],[3,"value","disabled",4,"ngFor","ngForOf"],["class","fa fa-info  invalid color-red-dark",4,"ngIf"],["class","fa fa-check  valid color-green-dark",4,"ngIf"],["class","fa fa-times  action color-red-dark",3,"click",4,"ngIf"],[4,"ngIf"],["aria-hidden","","height","25","width","25",1,"ntk-hover-zoom",2,"vertical-align","middle",3,"src"],[3,"value","disabled"],[1,"fa","fa-info","invalid","color-red-dark"],[1,"fa","fa-check","valid","color-green-dark"],[1,"fa","fa-times","action","color-red-dark",3,"click"]],template:function(n,s){if(1&n){const u=e.RV6();e.NAR(),e.j41(0,"div",1),e.nrm(1,"app-progress-spinner",2),e.j41(2,"span",3),e.DNE(3,y,2,3,"img",4),e.EFF(4," \xa0"),e.k0s(),e.nrm(5,"input",5),e.j41(6,"label",6),e.EFF(7),e.k0s(),e.j41(8,"mat-autocomplete",7,0),e.bIt("optionSelected",function(B){return e.eBV(u),e.Njj(s.onActionSelect(B.option.value))}),e.DNE(10,L,4,4,"mat-option",8),e.nI1(11,"async"),e.k0s(),e.DNE(12,F,1,0,"i",9)(13,k,1,0,"i",10)(14,G,1,0,"i",11)(15,K,3,3,"em",12),e.SdG(16),e.k0s()}if(2&n){const u=e.sdS(9);e.R7$(),e.Y8G("optionsInfoAreaId",s.constructor.name),e.R7$(2),e.Y8G("ngIf",s.dataModelSelect&&(null==s.dataModelSelect?null:s.dataModelSelect.linkMainImageIdSrc)),e.R7$(2),e.FS9("placeholder",s.optionPlaceholder),e.Y8G("formControl",s.formControl)("matAutocomplete",u)("required",s.optionRequired),e.BMQ("disabled",!!s.optionDisabled||null),e.R7$(2),e.JRh(s.optionLabel),e.R7$(),e.Y8G("displayWith",s.displayFn),e.R7$(2),e.Y8G("ngForOf",e.bMT(11,14,s.filteredOptions)),e.R7$(2),e.Y8G("ngIf",!s.formControl.valid),e.R7$(),e.Y8G("ngIf",s.optionRequired&&s.formControl.valid),e.R7$(),e.Y8G("ngIf",(null==s.dataModelSelect?null:s.dataModelSelect.id)>0),e.R7$(),e.Y8G("ngIf",s.optionRequired&&(!s.dataModelSelect||!s.dataModelSelect.id||s.dataModelSelect.id<=0))}},dependencies:[I.Sq,I.bT,_.me,_.BC,_.YS,_.l_,d.$3,D.wT,d.pN,r.JW,c.fg,m._,I.Jj,C.D9,v.r],encapsulation:2})}return l})()}}]);