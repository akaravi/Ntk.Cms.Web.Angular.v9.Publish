"use strict";(self.webpackChunkntk_cms_web=self.webpackChunkntk_cms_web||[]).push([[6937],{4209:(j,I,l)=>{l.d(I,{Z:()=>b});var S=l(9406),a=l(3527),C=l(7788),t=l(8189);let b=(()=>{class g{constructor(u){this.service=u}transform(u){return!u||u<=0?new S.c:this.service.ServiceGetOneById(u,1e6).pipe((0,a.T)(c=>{var r="";return c.isSuccess&&(c.item.title&&c.item.title.length>0&&(r=c.item.title),c.item.id&&c.item.id>0&&(r.length>0&&(r+=" | "),r+=c.item.id),c.item.domain&&c.item.domain.length>0&&c.item.subDomain&&c.item.subDomain.length>0?(r.length>0&&(r+=" | "),r=r+c.item.subDomain+"."+c.item.domain):c.item.domain&&c.item.domain.length>0&&(r.length>0&&(r+=" | "),r+=c.item.domain)),0===r.length&&(r=u.toString()),r},c=>u.toString()))}static#t=this.\u0275fac=function(c){return new(c||g)(C.rXU(t.kNx,16))};static#e=this.\u0275pipe=C.EJ8({name:"cmssiteinfo",type:g,pure:!0})}return g})()},2310:(j,I,l)=>{l.d(I,{O:()=>lt});var S=l(6482),a=l(8189),C=l(5312),t=l(7788),b=l(9722),g=l(6409),P=l(9675),u=l(2882),c=l(8339),r=l(5154),f=l(6610),p=l(7222),_=l(9344),v=l(4587),A=l(2161),D=l(254),T=l(7912),V=l(8544),y=l(3308),k=l(5804),R=l(965),F=l(8887),E=l(3793),L=l(2831),w=l(3527),M=l(2497),G=l(8278),O=l(6182);const x=["*"];function B(i,m){if(1&i&&(t.j41(0,"label",8),t.EFF(1),t.k0s()),2&i){const e=t.XpG();t.Mz_("for","app-cms-site-selector-",e.id,""),t.R7$(),t.JRh(e.optionLabel)}}function N(i,m){if(1&i&&(t.j41(0,"mat-option",9)(1,"span"),t.EFF(2),t.k0s()()),2&i){const e=m.$implicit,o=t.XpG();t.Y8G("value",e)("disabled",o.optionDisabled),t.R7$(2),t.JRh(o.displayOption(e))}}function $(i,m){if(1&i){const e=t.RV6();t.j41(0,"mat-icon",10),t.bIt("click",function(){t.eBV(e);const n=t.XpG();return t.Njj(n.onActionSelectClear())}),t.EFF(1,"close"),t.k0s()}}let X=(()=>{class i{static#t=this.nextId=0;constructor(e,o,n,s,d,h){this.coreEnumService=e,this.cmsToastrService=o,this.cdr=n,this.publicHelper=s,this.translate=d,this.categoryService=h,this.id=++i.nextId,this.dataModelResult=new a.N$V,this.dataModelSelect=new a.xDr,this.formControl=new p.MJ,this.optionDisabled=!1,this.optionSelectFirstItem=!1,this.optionPlaceholder="",this.optionLabel="",this.optionChange=new t.bkB,this.optionReload=()=>this.onActionButtonReload(),this.publicHelper.processService.cdr=this.cdr}set optionSelectForce(e){this.onActionSelectForce(e)}ngOnInit(){this.loadOptions()}loadOptions(){this.filteredOptions=this.formControl.valueChanges.pipe((0,R.Z)(""),(0,F.B)(1500),(0,E.F)(),(0,L.n)(e=>"string"==typeof e||"number"==typeof e?this.DataGetAll(e||""):[]))}displayFn(e){return e?e.title:void 0}displayOption(e){return e?e.title:void 0}DataGetAll(e){var o=this;return(0,y.A)(function*(){const n=new a.O2i;n.rowPerPage=20,n.accessLoad=!0;let s=new a.ycK;return s.propertyName="Title",s.value=e,s.searchType=a._GO.Contains,s.clauseType=a.jL_.Or,n.filters.push(s),e&&"number"==typeof+e&&+e>0&&(s=new a.ycK,s.propertyName="Id",s.value=e,s.searchType=a._GO.Equal,s.clauseType=a.jL_.Or,n.filters.push(s)),o.publicHelper.processService.processStart("DataGetAll"),yield(0,k._)(o.categoryService.ServiceGetAll(n)).then(d=>(o.dataModelResult=d,o.optionSelectFirstItem&&(!o.dataModelSelect||!o.dataModelSelect.id||o.dataModelSelect.id.length<=0)&&o.dataModelResult.listItems.length>0&&(o.optionSelectFirstItem=!1,setTimeout(()=>{o.formControl.setValue(o.dataModelResult.listItems[0])},1e3),o.onActionSelect(o.dataModelResult.listItems[0])),o.publicHelper.processService.processStop("DataGetAll"),d.listItems))})()}onActionSelect(e){this.optionDisabled||(this.dataModelSelect=e,this.optionChange.emit(this.dataModelSelect))}onActionSelectClear(){this.optionDisabled||(this.dataModelSelect=null,this.formControl.setValue(null),this.optionChange.emit(null))}push(e){return this.filteredOptions.pipe((0,w.T)(o=>(o.find(n=>n.id===e.id)||o.push(e),o)))}onActionSelectForce(e){if("string"==typeof e&&e.length>0){if(this.dataModelSelect&&this.dataModelSelect.id===e)return;if(this.dataModelResult&&this.dataModelResult.listItems&&this.dataModelResult.listItems.find(o=>o.id===e)){const o=this.dataModelResult.listItems.find(n=>n.id===e);return this.dataModelSelect=o,void this.formControl.setValue(o)}this.categoryService.ServiceGetOneById(e).subscribe({next:o=>{o.isSuccess?(this.filteredOptions=this.push(o.item),this.dataModelSelect=o.item,this.formControl.setValue(o.item),this.optionChange.emit(o.item)):this.cmsToastrService.typeErrorMessage(o.errorMessage)}})}else{if(typeof e==typeof a.xDr)return this.filteredOptions=this.push(e),this.dataModelSelect=e,void this.formControl.setValue(e);this.formControl.setValue(null)}}onActionButtonReload(){this.dataModelSelect=new a.xDr,this.loadOptions()}static#e=this.\u0275fac=function(o){return new(o||i)(t.rXU(a.i9D),t.rXU(b.k),t.rXU(t.gRc),t.rXU(r.A),t.rXU(u.c$),t.rXU(a.pMv))};static#o=this.\u0275cmp=t.VBU({type:i,selectors:[["app-cms-sms-apipath-selector"]],inputs:{optionDisabled:"optionDisabled",optionSelectFirstItem:"optionSelectFirstItem",optionPlaceholder:"optionPlaceholder",optionLabel:"optionLabel",optionReload:"optionReload",optionSelectForce:"optionSelectForce"},outputs:{optionChange:"optionChange"},ngContentSelectors:x,decls:10,vars:13,consts:[["matauto","matAutocomplete"],[1,"input-style","has-borders","no-icon","input-style-always-active","validate-field","mb-4","progressOverlayContainer"],[3,"optionsInfoAreaId"],["class","color-highlight",3,"for",4,"ngIf"],["type","text","matInput","",1,"form-control","validate-name",3,"placeholder","formControl","matAutocomplete","id"],[3,"optionSelected","displayWith"],["class","color-highlight",3,"value","disabled",4,"ngFor","ngForOf"],["matSuffix","","matSuffix","","mat-icon-button","","aria-label","Clear",3,"click",4,"ngIf"],[1,"color-highlight",3,"for"],[1,"color-highlight",3,"value","disabled"],["matSuffix","","matSuffix","","mat-icon-button","","aria-label","Clear",3,"click"]],template:function(o,n){if(1&o){const s=t.RV6();t.NAR(),t.j41(0,"div",1),t.nrm(1,"app-progress-spinner",2),t.DNE(2,B,2,3,"label",3),t.nrm(3,"input",4),t.j41(4,"mat-autocomplete",5,0),t.bIt("optionSelected",function(h){return t.eBV(s),t.Njj(n.onActionSelect(h.option.value))}),t.DNE(6,N,3,3,"mat-option",6),t.nI1(7,"async"),t.k0s(),t.DNE(8,$,2,0,"mat-icon",7),t.SdG(9),t.k0s()}if(2&o){const s=t.sdS(5);t.R7$(),t.Y8G("optionsInfoAreaId",n.constructor.name),t.R7$(),t.Y8G("ngIf",(null==n.optionLabel?null:n.optionLabel.length)>0),t.R7$(),t.FS9("placeholder",n.optionPlaceholder),t.Mz_("id","app-cms-site-selector-",n.id,""),t.Y8G("formControl",n.formControl)("matAutocomplete",s),t.BMQ("disabled",!!n.optionDisabled||null),t.R7$(),t.Y8G("displayWith",n.displayFn),t.R7$(2),t.Y8G("ngForOf",t.bMT(7,11,n.filteredOptions)),t.R7$(2),t.Y8G("ngIf",null==n.dataModelSelect?null:n.dataModelSelect.id)}},dependencies:[f.Sq,f.bT,p.me,p.BC,p.l_,M.$3,G.wT,M.pN,_.yw,O.An,v.fg,T._,f.Jj],encapsulation:2})}return i})();const U=["*"];function Q(i,m){if(1&i&&(t.j41(0,"label",8),t.EFF(1),t.k0s()),2&i){const e=t.XpG();t.Mz_("for","app-cms-site-selector-",e.id,""),t.R7$(),t.JRh(e.optionLabel)}}function Y(i,m){if(1&i&&(t.j41(0,"mat-option",9)(1,"span"),t.EFF(2),t.k0s()()),2&i){const e=m.$implicit,o=t.XpG();t.Y8G("value",e)("disabled",o.optionDisabled),t.R7$(2),t.JRh(o.displayOption(e))}}function H(i,m){if(1&i){const e=t.RV6();t.j41(0,"mat-icon",10),t.bIt("click",function(){t.eBV(e);const n=t.XpG();return t.Njj(n.onActionSelectClear())}),t.EFF(1,"close"),t.k0s()}}let K=(()=>{class i{static#t=this.nextId=0;constructor(e,o,n,s,d,h){this.coreEnumService=e,this.cmsToastrService=o,this.translate=n,this.cdr=s,this.publicHelper=d,this.categoryService=h,this.id=++i.nextId,this.dataModelResult=new a.N$V,this.dataModelSelect=new a.Hx,this.formControl=new p.MJ,this.optionDisabled=!1,this.optionSelectFirstItem=!1,this.optionSelectFirstItemOnChangeApi=!1,this.optionLabel="",this.optionPlaceholder="",this.optionChange=new t.bkB,this.optionReload=()=>this.onActionButtonReload(),this.privateLinkApiPathId="",this.privateLinkApiPathIdLast="",this.publicHelper.processService.cdr=this.cdr}set optionSelectForce(e){this.onActionSelectForce(e)}set optionLinkApiPathId(e){e!=this.privateLinkApiPathId&&(""!=this.privateLinkApiPathId&&this.onActionSelectClear(),this.privateLinkApiPathId=e,this.privateLinkApiPathId!=this.privateLinkApiPathIdLast&&(this.optionSelectFirstItem=this.optionSelectFirstItemOnChangeApi),this.privateLinkApiPathIdLast=e,this.loadOptions())}ngOnInit(){this.loadOptions()}loadOptions(){this.filteredOptions=this.formControl.valueChanges.pipe((0,R.Z)(""),(0,F.B)(1500),(0,E.F)(),(0,L.n)(e=>"string"==typeof e||"number"==typeof e?this.DataGetAll(e||""):[]))}displayFn(e){return e?e.numberChar:void 0}displayOption(e){return e?e.numberChar:void 0}DataGetAll(e){var o=this;return(0,y.A)(function*(){const n=new a.O2i;n.rowPerPage=20,n.accessLoad=!0;let s=new a.ycK;return s.propertyName="NumberChar",s.value=e,s.searchType=a._GO.Contains,s.clauseType=a.jL_.Or,n.filters.push(s),o.privateLinkApiPathId&&o.privateLinkApiPathId.length>0&&(s=new a.ycK,s.propertyName="ApiPathAndApiNumbers",s.propertyAnyName="LinkApiPathId",s.value=o.privateLinkApiPathId,s.searchType=a._GO.Equal,n.filters.push(s)),o.publicHelper.processService.processStart("DataGetAll"),yield(0,k._)(o.categoryService.ServiceGetAll(n)).then(d=>(o.dataModelResult=d,o.optionSelectFirstItem&&(!o.dataModelSelect||!o.dataModelSelect.id||o.dataModelSelect.id.length<=0)&&o.dataModelResult.listItems.length>0&&(o.optionSelectFirstItem=!1,setTimeout(()=>{o.formControl.setValue(o.dataModelResult.listItems[0]),o.onActionSelect(o.dataModelResult.listItems[0])},1e3)),o.publicHelper.processService.processStop("DataGetAll"),d.listItems))})()}onActionSelect(e){this.optionDisabled||(this.dataModelSelect=e,this.optionChange.emit(this.dataModelSelect))}onActionSelectClear(){this.optionDisabled||(this.dataModelSelect=new a.Hx,this.formControl.setValue(null),this.optionChange.emit(null))}push(e){return this.filteredOptions.pipe((0,w.T)(o=>(o.find(n=>n.id===e.id)||o.push(e),o)))}onActionSelectForce(e){if("string"==typeof e&&e.length>0){if(this.dataModelSelect&&this.dataModelSelect.id===e)return;if(this.dataModelResult&&this.dataModelResult.listItems&&this.dataModelResult.listItems.find(o=>o.id===e)){const o=this.dataModelResult.listItems.find(n=>n.id===e);return this.dataModelSelect=o,void this.formControl.setValue(o)}if(this.dataModelResult&&this.dataModelResult.listItems&&this.dataModelResult.listItems.find(o=>o.numberChar===e)){const o=this.dataModelResult.listItems.find(n=>n.numberChar===e);return this.dataModelSelect=o,void this.formControl.setValue(o)}this.categoryService.ServiceGetOneById(e).subscribe({next:o=>{o.isSuccess?(this.filteredOptions=this.push(o.item),this.dataModelSelect=o.item,this.formControl.setValue(o.item),this.optionChange.emit(o.item)):(!this.dataModelResult.listItems||0===this.dataModelResult.listItems.length)&&this.cmsToastrService.typeErrorMessage(o.errorMessage)}})}else{if(typeof e==typeof a.Hx)return this.filteredOptions=this.push(e),this.dataModelSelect=e,void this.formControl.setValue(e);this.formControl.setValue(null)}}onActionButtonReload(){this.dataModelSelect=new a.Hx,this.loadOptions()}static#e=this.\u0275fac=function(o){return new(o||i)(t.rXU(a.i9D),t.rXU(b.k),t.rXU(u.c$),t.rXU(t.gRc),t.rXU(r.A),t.rXU(a.veb))};static#o=this.\u0275cmp=t.VBU({type:i,selectors:[["app-cms-sms-api-number-selector"]],inputs:{optionDisabled:"optionDisabled",optionSelectFirstItem:"optionSelectFirstItem",optionSelectFirstItemOnChangeApi:"optionSelectFirstItemOnChangeApi",optionLabel:"optionLabel",optionPlaceholder:"optionPlaceholder",optionReload:"optionReload",optionSelectForce:"optionSelectForce",optionLinkApiPathId:"optionLinkApiPathId"},outputs:{optionChange:"optionChange"},ngContentSelectors:U,decls:10,vars:13,consts:[["matauto","matAutocomplete"],[1,"input-style","has-borders","no-icon","input-style-always-active","validate-field","mb-4","progressOverlayContainer"],[3,"optionsInfoAreaId"],["class","color-highlight",3,"for",4,"ngIf"],["type","text","matInput","",1,"form-control","validate-name",3,"placeholder","formControl","matAutocomplete","id"],[3,"optionSelected","displayWith"],["class","color-highlight",3,"value","disabled",4,"ngFor","ngForOf"],["matSuffix","","matSuffix","","mat-icon-button","","aria-label","Clear",3,"click",4,"ngIf"],[1,"color-highlight",3,"for"],[1,"color-highlight",3,"value","disabled"],["matSuffix","","matSuffix","","mat-icon-button","","aria-label","Clear",3,"click"]],template:function(o,n){if(1&o){const s=t.RV6();t.NAR(),t.j41(0,"div",1),t.nrm(1,"app-progress-spinner",2),t.DNE(2,Q,2,3,"label",3),t.nrm(3,"input",4),t.j41(4,"mat-autocomplete",5,0),t.bIt("optionSelected",function(h){return t.eBV(s),t.Njj(n.onActionSelect(h.option.value))}),t.DNE(6,Y,3,3,"mat-option",6),t.nI1(7,"async"),t.k0s(),t.DNE(8,H,2,0,"mat-icon",7),t.SdG(9),t.k0s()}if(2&o){const s=t.sdS(5);t.R7$(),t.Y8G("optionsInfoAreaId",n.constructor.name),t.R7$(),t.Y8G("ngIf",(null==n.optionLabel?null:n.optionLabel.length)>0),t.R7$(),t.FS9("placeholder",n.optionPlaceholder),t.Mz_("id","app-cms-site-selector-",n.id,""),t.Y8G("formControl",n.formControl)("matAutocomplete",s),t.BMQ("disabled",!!n.optionDisabled||null),t.R7$(),t.Y8G("displayWith",n.displayFn),t.R7$(2),t.Y8G("ngForOf",t.bMT(7,11,n.filteredOptions)),t.R7$(2),t.Y8G("ngIf",null==n.dataModelSelect?null:n.dataModelSelect.id)}},dependencies:[f.Sq,f.bT,p.me,p.BC,p.l_,M.$3,G.wT,M.pN,_.yw,O.An,v.fg,T._,f.Jj],encapsulation:2})}return i})();const J=["Message"],W=["vform"],z=i=>({direction:i});function Z(i,m){if(1&i){const e=t.RV6();t.j41(0,"button",45),t.bIt("click",function(){t.eBV(e);const n=t.XpG(2);return t.Njj(n.onActionSendUrlToQDoc())}),t.nrm(1,"i",46),t.EFF(2),t.nI1(3,"translate"),t.k0s()}2&i&&(t.R7$(2),t.SpI(" ",t.bMT(3,1,"ACTION.VIEW")," "))}function q(i,m){if(1&i&&(t.j41(0,"div")(1,"a",47),t.nrm(2,"img",48),t.nI1(3,"translate"),t.k0s()()),2&i){const e=t.XpG(2);t.R7$(),t.FS9("href",e.optionurlViewContent,t.B4B),t.R7$(),t.FS9("alt",t.bMT(3,3,"TITLE.Scan_the_barcode")),t.Y8G("src",e.optionurlViewContentQRCodeBase64,t.B4B)}}function tt(i,m){if(1&i){const e=t.RV6();t.j41(0,"div")(1,"div",13)(2,"div",26)(3,"p"),t.EFF(4),t.k0s()()(),t.j41(5,"div",13)(6,"div",17)(7,"div",20)(8,"label",27),t.EFF(9),t.nI1(10,"translate"),t.k0s(),t.j41(11,"input",28,2),t.mxI("ngModelChange",function(n){t.eBV(e);const s=t.XpG();return t.DH7(s.QDocModel.username,n)||(s.QDocModel.username=n),t.Njj(n)}),t.k0s()(),t.DNE(13,Z,4,3,"button",29),t.nrm(14,"br")(15,"br"),t.j41(16,"button",30),t.bIt("click",function(){t.eBV(e);const n=t.XpG();return t.Njj(n.onActionOpenLink())}),t.EFF(17),t.nI1(18,"translate"),t.k0s()(),t.j41(19,"div",31),t.DNE(20,q,4,5,"div",12),t.j41(21,"div",32)(22,"a",33),t.nrm(23,"i",34),t.k0s(),t.j41(24,"a",35),t.nrm(25,"i",36),t.k0s(),t.j41(26,"a",37),t.nrm(27,"i",38),t.k0s(),t.j41(28,"a",39),t.nrm(29,"i",40),t.k0s(),t.j41(30,"a",41),t.nrm(31,"i",42),t.k0s(),t.j41(32,"span",43),t.bIt("click",function(){t.eBV(e);const n=t.XpG();return t.Njj(n.onActionCopied())}),t.nrm(33,"i",44),t.k0s()()()()()}if(2&i){const e=t.XpG();t.R7$(4),t.SpI(" ",e.optionLabel,""),t.R7$(5),t.JRh(t.bMT(10,21,"ACTION.ID_Code")),t.R7$(2),t.R50("ngModel",e.QDocModel.username),t.R7$(2),t.Y8G("ngIf",e.optionurlViewContent&&e.optionurlViewContent.length>0&&e.QDocModel.username),t.R7$(4),t.SpI("",t.bMT(18,23,"ACTION.VIEW_PAGE")," "),t.R7$(3),t.Y8G("ngIf",(null==e.optionurlViewContentQRCodeBase64?null:e.optionurlViewContentQRCodeBase64.length)>0&&(null==e.optionurlViewContent?null:e.optionurlViewContent.length)>0),t.R7$(2),t.FCK("href","whatsapp://send?text=",e.optionLabel,"- ",e.optionurlViewContent,"",t.B4B),t.R7$(2),t.FCK("href","https://telegram.me/share/url?url=",e.optionurlViewContent,"&text=",e.optionLabel,"",t.B4B),t.R7$(2),t.FCK("href","https://www.linkedin.com/shareArticle?url=",e.optionurlViewContent,"&title=",e.optionLabel,"",t.B4B),t.R7$(2),t.Mz_("href","http://www.facebook.com/share.php?u=",e.optionurlViewContent,"",t.B4B),t.R7$(2),t.FCK("href","http://twitter.com/share?text=",e.optionLabel,"&url=",e.optionurlViewContent,"",t.B4B),t.R7$(2),t.Y8G("cdkCopyToClipboard",e.optionurlViewContent)}}function et(i,m){if(1&i){const e=t.RV6();t.j41(0,"app-cms-sms-api-number-selector",49),t.nI1(1,"translate"),t.bIt("optionChange",function(n){t.eBV(e);const s=t.XpG();return t.Njj(s.onActionSelectApiNumber(n))}),t.k0s()}if(2&i){const e=t.XpG();t.Y8G("optionLinkApiPathId",null==e.dataModel?null:e.dataModel.linkApiPathId)("optionPlaceholder",t.bMT(1,4,"TITLE.sender_number"))("optionSelectFirstItem",!0)("optionSelectFirstItemOnChangeApi",!0)}}function ot(i,m){1&i&&(t.j41(0,"mat-error"),t.EFF(1),t.nI1(2,"translate"),t.j41(3,"strong"),t.EFF(4),t.nI1(5,"translate"),t.k0s()()),2&i&&(t.R7$(),t.SpI(" ",t.bMT(2,2,"TITLE.Message_Text")," "),t.R7$(3),t.JRh(t.bMT(5,4,"MESSAGE.required")))}function nt(i,m){if(1&i){const e=t.RV6();t.j41(0,"div",20)(1,"label",50),t.EFF(2),t.nI1(3,"translate"),t.k0s(),t.j41(4,"textarea",51,3),t.mxI("ngModelChange",function(n){t.eBV(e);const s=t.XpG();return t.DH7(s.dataModel.toNumbers,n)||(s.dataModel.toNumbers=n),t.Njj(n)}),t.EFF(6,"                                                "),t.k0s(),t.j41(7,"em"),t.EFF(8),t.nI1(9,"translate"),t.k0s()()}if(2&i){const e=t.XpG();t.R7$(2),t.JRh(t.bMT(3,3,"TITLE.Receiver_number")),t.R7$(2),t.R50("ngModel",e.dataModel.toNumbers),t.R7$(4),t.JRh(t.bMT(9,5,"TITLE.You_can_separate_the_number_of_the_recipient_of_the_message_with_an_inter"))}}function it(i,m){if(1&i&&(t.j41(0,"button",54),t.nrm(1,"i",46),t.EFF(2),t.nI1(3,"translate"),t.k0s()),2&i){t.XpG(2);const e=t.sdS(10);t.Y8G("disabled",!e.valid),t.R7$(2),t.SpI(" ",t.bMT(3,2,"ACTION.Send_Message")," ")}}function st(i,m){if(1&i&&(t.j41(0,"div",52),t.DNE(1,it,4,4,"button",53),t.k0s()),2&i){const e=t.XpG();t.R7$(),t.Y8G("ngIf",!e.publicHelper.processService.processInRun)}}let lt=(()=>{class i{static#t=this.nextId=0;constructor(e,o,n,s,d,h,at,rt,ct){this.cmsToastrService=e,this.data=o,this.dialogRef=n,this.smsMainApiPathService=s,this.http=d,this.router=h,this.translate=at,this.tokenHelper=rt,this.publicHelper=ct,this.id=++i.nextId,this.dataModel=new a.j3T,this.formInfo=new a.IL9,this.tokenInfo=new a.l$k,this.optionLabel="",this.optionurlViewContentQRCodeBase64="",this.optionurlViewContent="",this.QDocModel={},this.sendByShow=!1,o&&(this.optionLabel=o.title,this.optionurlViewContentQRCodeBase64=o.urlViewContentQRCodeBase64,this.optionurlViewContent=o.urlViewContent)}ngOnInit(){this.dataModel.message=`${this.optionLabel}\n    ${this.optionurlViewContent}`,this.tokenHelper.getCurrentToken().then(e=>{this.tokenInfo=e}),this.cmsApiStoreSubscribe=this.tokenHelper.getCurrentTokenOnChange().subscribe({next:e=>{this.tokenInfo=e}})}ngOnDestroy(){this.cmsApiStoreSubscribe.unsubscribe()}onActionSelectApiNumber(e){e&&e.id?.length>0?this.dataModel.linkFromNumber=e.id:e&&e.numberChar?.length>0&&(this.dataModel.linkFromNumber=e.numberChar)}onActionMessageLTR(){this.message.nativeElement.style.direction="ltr",this.message.nativeElement.style.textAlign="left"}onActionMessageRTL(){this.message.nativeElement.style.direction="rtl",this.message.nativeElement.style.textAlign="right"}onActionSelectPrivateSiteConfig(e){this.dataModelParentSelected=e,e&&e.id.length>0&&(this.dataModel.linkApiPathId=e.id,this.sendByShow=!1,e.apiAbilitySendByDirect&&(this.dataModel.sendByQeue=!1),e.apiAbilitySendByQueue&&(this.dataModel.sendByQeue=!0),e.apiAbilitySendByQueue&&e.apiAbilitySendByDirect&&(this.sendByShow=!0))}onActionSendUrlToQDoc(){this.QDocModel.message=this.optionurlViewContent,!this.QDocModel.username&&this.QDocModel.username.length<=0?this.cmsToastrService.typeWarningSelected("\u06a9\u062f \u0634\u0646\u0627\u0633\u0647 \u0631\u0627 \u0627\u0632 \u0648\u0628\u0633\u0627\u06cc\u062a https://Qdoc.ir \u062f\u0631\u06cc\u0627\u0641\u062a \u0646\u0645\u0627\u06cc\u06cc\u062f"):this.http.post(C.c.cmsServerConfig.configQDocServerPath,this.QDocModel,{headers:{}}).subscribe({next:e=>{this.cmsToastrService.typeSuccessMessage(this.translate.instant("MESSAGE.The_order_was_sent_to_the_website"))},error:e=>{this.cmsToastrService.typeErrorMessage("\u0628\u0631\u0631\u0648\u0632 \u062e\u0637\u0627 \u062f\u0631 \u0627\u0631\u0633\u0627\u0644 \u062f\u0633\u062a\u0648\u0631",e)}})}onFormSubmit(){if(!this.formGroup.valid)return;(!this.dataModel.linkApiPathId||this.dataModel.linkApiPathId.length<=0)&&this.cmsToastrService.typeErrorFormInvalid(),this.formInfo.formSubmitAllow=!1;const e=this.constructor.name+"main";this.translate.get("MESSAGE.Receiving_information").subscribe(o=>{this.publicHelper.processService.processStart(e,o,this.constructor.name)}),this.formInfo.formAlert="",this.formInfo.formError="",this.smsMainApiPathService.ServiceSendMessage(this.dataModel).subscribe({next:o=>{this.formInfo.formSubmitAllow=!0,o.isSuccess?(this.formInfo.formAlert=this.translate.instant("MESSAGE.Submit_request_was_successfully_registered"),this.cmsToastrService.typeSuccessMessage(this.translate.instant("MESSAGE.Send_request_was_successfully_registered"))):(this.translate.get("ERRORMESSAGE.MESSAGE.typeError").subscribe(n=>{this.formInfo.formAlert=n}),this.formInfo.formError=o.errorMessage,this.cmsToastrService.typeErrorMessage(o.errorMessage)),this.publicHelper.processService.processStop(e)},error:o=>{this.formInfo.formSubmitAllow=!0,this.cmsToastrService.typeError(o),this.publicHelper.processService.processStop(e,!1)},complete:()=>{}})}onActionCopied(){this.cmsToastrService.typeSuccessCopedToClipboard()}onActionOpenLink(){this.router.serializeUrl(this.router.createUrlTree([this.optionurlViewContent])),window.open(this.optionurlViewContent,"_blank")}static#e=this.\u0275fac=function(o){return new(o||i)(t.rXU(b.k),t.rXU(S.Vh),t.rXU(S.CP),t.rXU(a.pMv),t.rXU(g.Qq),t.rXU(P.Ix),t.rXU(u.c$),t.rXU(c._),t.rXU(r.A))};static#o=this.\u0275cmp=t.VBU({type:i,selectors:[["app-cms-link-to"]],viewQuery:function(o,n){if(1&o&&(t.GBs(J,5),t.GBs(W,5)),2&o){let s;t.mGM(s=t.lsd())&&(n.message=s.first),t.mGM(s=t.lsd())&&(n.formGroup=s.first)}},inputs:{optionLabel:"optionLabel",optionurlViewContentQRCodeBase64:"optionurlViewContentQRCodeBase64",optionurlViewContent:"optionurlViewContent"},decls:41,vars:30,consts:[["vform","ngForm"],["Message",""],["QDocCode",""],["ToNumbers",""],[3,"Key"],[3,"optionsInfoAreaId"],[1,"card","card-style"],[1,"content","mb-0"],[1,"mb-0","color-highlight","font-600","font-12"],[3,"ngSubmit","ngStyle"],[3,"label"],[1,"row",2,"padding","5px"],[4,"ngIf"],[1,"row"],[1,"col-md-6","col-sm-6","col-xs-9",2,"padding-top","40px"],[3,"optionChange","optionSelectForce","optionPlaceholder","optionSelectFirstItem"],[3,"optionSelectForce","optionLinkApiPathId","optionPlaceholder","optionSelectFirstItem","optionSelectFirstItemOnChangeApi","optionChange",4,"ngIf"],[1,"col-md-6","col-sm-6","col-xs-9"],[1,"message-box"],[1,"row",2,"height","300px"],[1,"input-style","has-borders","no-icon","input-style-always-active","validate-field","mb-4"],["for","dataModel.message",1,"color-highlight"],["matInput","","name","dataModel.message","type","text","placeholder","...","minlength","1","maxlength","500","rows","9","id","dataModel.message",1,"form-control","validate-name",3,"ngModelChange","ngModel"],[1,"row",2,"height","83px"],["class","input-style has-borders no-icon input-style-always-active validate-field mb-4",4,"ngIf"],["class","row","style","height:140px;bottom: 4vh;justify-content: center;",4,"ngIf"],[1,"col-md-12","col-sm-12","col-xs-18"],["for","QDocModel.username",1,"color-highlight"],["matInput","","type","text","name","QDocModel.username","id","QDocModel.username","placeholder","12345",1,"form-control","validate-name",3,"ngModelChange","ngModel"],["type","button","class","btn font-13 font-600 btn-s m-1 rounded-s shadow-xl border-0 gradient-highlight",3,"click",4,"ngIf"],["type","button","type","button",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-highlight",3,"click"],[1,"col-md-6","col-sm-6","col-xs-9",2,"text-align","center"],[1,"mt-4"],["target","_blank",1,"style","whatsapp",3,"href"],[1,"flaticon-whatsapp","text-dark"],["target","_blank",1,"style","telegram",3,"href"],[1,"flaticon2-telegram-logo","text-dark"],["target","_blank",1,"style","linkedin",3,"href"],[1,"flaticon-linkedin-logo","text-dark"],["target","_blank",1,"style","facebook",3,"href"],[1,"flaticon-facebook-letter-logo","text-dark"],["target","_blank",1,"style","twitter",3,"href"],[1,"flaticon-twitter-logo","text-dark"],[1,"navi-icon","style","cursor",3,"click","cdkCopyToClipboard"],[1,"flaticon2-copy","text-dark"],["type","button",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-highlight",3,"click"],[1,"fa","fa-check-square-o"],["target","_blank",3,"href"],["height","200px","width","200px",3,"src","alt"],[3,"optionChange","optionSelectForce","optionLinkApiPathId","optionPlaceholder","optionSelectFirstItem","optionSelectFirstItemOnChangeApi"],["for","dataModel.toNumbers",1,"color-highlight"],["matInput","","name","dataModel.toNumbers","type","text","placeholder","0912","minlength","1","maxlength","500","rows","2","id","dataModel.toNumbers",1,"form-control","validate-name",3,"ngModelChange","ngModel"],[1,"row",2,"height","140px","bottom","4vh","justify-content","center"],["type","submit","class","btn font-13 font-600 btn-s m-1 rounded-s shadow-xl border-0 gradient-highlight",3,"disabled",4,"ngIf"],["type","submit",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-highlight",3,"disabled"]],template:function(o,n){if(1&o){const s=t.RV6();t.nrm(0,"app-cms-guide-notice",4)(1,"app-progress-spinner",5),t.j41(2,"div",6)(3,"div",7)(4,"p",8),t.EFF(5),t.k0s(),t.j41(6,"p"),t.EFF(7),t.nI1(8,"translate"),t.k0s(),t.j41(9,"form",9,0),t.bIt("ngSubmit",function(){return t.eBV(s),t.Njj(n.onFormSubmit())}),t.j41(11,"mat-tab-group")(12,"mat-tab",10),t.nI1(13,"translate"),t.j41(14,"div",11),t.DNE(15,tt,34,25,"div",12),t.k0s()(),t.j41(16,"mat-tab",10),t.nI1(17,"translate"),t.j41(18,"div",13)(19,"div",14)(20,"app-cms-sms-apipath-selector",15),t.nI1(21,"translate"),t.bIt("optionChange",function(h){return t.eBV(s),t.Njj(n.onActionSelectPrivateSiteConfig(h))}),t.k0s(),t.DNE(22,et,2,6,"app-cms-sms-api-number-selector",16),t.k0s(),t.j41(23,"div",17)(24,"div",18)(25,"div",19)(26,"div",20)(27,"label",21),t.EFF(28),t.nI1(29,"translate"),t.k0s(),t.j41(30,"textarea",22,1),t.mxI("ngModelChange",function(h){return t.eBV(s),t.DH7(n.dataModel.message,h)||(n.dataModel.message=h),t.Njj(h)}),t.EFF(32,"                                                "),t.k0s(),t.j41(33,"em"),t.EFF(34),t.k0s(),t.DNE(35,ot,6,6,"mat-error",12),t.k0s()(),t.nrm(36,"br"),t.j41(37,"div",23),t.DNE(38,nt,10,7,"div",24),t.k0s(),t.nrm(39,"br"),t.DNE(40,st,2,1,"div",25),t.k0s()()()()()()()()}if(2&o){const s=t.sdS(31);t.Y8G("Key","linkto.content"),t.R7$(),t.Y8G("optionsInfoAreaId",n.constructor.name),t.R7$(4),t.SpI(" ",n.formInfo.formTitle," "),t.R7$(2),t.SpI(" ",t.bMT(8,18,"TITLE.Be_Careful_When_Entering_Information")," "),t.R7$(2),t.Y8G("ngStyle",t.eq3(28,z,n.tokenInfo.direction)),t.R7$(3),t.FS9("label",t.bMT(13,20,"TITLE.LINKTO")),t.R7$(3),t.Y8G("ngIf",n.optionurlViewContent&&n.optionurlViewContent.length>0),t.R7$(),t.FS9("label",t.bMT(17,22,"TITLE.Send_Message")),t.R7$(4),t.Y8G("optionSelectForce",null==n.dataModel?null:n.dataModel.linkApiPathId)("optionPlaceholder",t.bMT(21,24,"TITLE.Direction"))("optionSelectFirstItem",!0),t.R7$(2),t.Y8G("ngIf",(null==n.dataModel.linkApiPathId?null:n.dataModel.linkApiPathId.length)>0),t.R7$(6),t.JRh(t.bMT(29,26,"TITLE.Message_Text")),t.R7$(2),t.R50("ngModel",n.dataModel.message),t.R7$(4),t.SpI("",s.value.length," / 500"),t.R7$(),t.Y8G("ngIf",null==s.errors?null:s.errors.required),t.R7$(3),t.Y8G("ngIf",!(n.dataModel.toContactCategories&&0!==(null==n.dataModel.toContactCategories?null:n.dataModel.toContactCategories.length)||n.dataModel.toContactContents&&0!==(null==n.dataModel.toContactContents?null:n.dataModel.toContactContents.length))),t.R7$(2),t.Y8G("ngIf",n.formInfo.formSubmitAllow)}},dependencies:[f.bT,f.B3,p.qT,p.me,p.BC,p.cb,p.xh,p.tU,p.vS,p.cV,_.TL,v.fg,A.mq,A.T8,D.dF,T._,V.f,X,K,u.D9],styles:[".style[_ngcontent-%COMP%]{padding:6px;margin:2px;font-size:20px;text-align:center;text-decoration:none;border:black solid 2px;border-radius:50%}.style-copy[_ngcontent-%COMP%]{color:#000;border-radius:20%}.whatsapp[_ngcontent-%COMP%]:hover{background-color:#adff2f}.facebook[_ngcontent-%COMP%]:hover{background:#3b5998}.twitter[_ngcontent-%COMP%]:hover{background:#55acee}.linkedin[_ngcontent-%COMP%]:hover{background:#007bb5}.telegram[_ngcontent-%COMP%]:hover{background:#125688}.cursor[_ngcontent-%COMP%]{cursor:pointer}.message-box[_ngcontent-%COMP%]{background-image:url(/assets/media/bg/iphone.png);height:600px;width:300px;background-position:center;background-repeat:no-repeat;background-size:cover;padding-right:33px;padding-left:33px}.message-box-button[_ngcontent-%COMP%]{color:#00f;border-color:transparent;background-color:transparent}.message-box-button[_ngcontent-%COMP%]:hover{color:red;font-size:initial}.message-box-button[_ngcontent-%COMP%]:active{color:#a200ff}"]})}return i})()}}]);