(self.webpackChunkntk_cms_web=self.webpackChunkntk_cms_web||[]).push([[6323],{7226:()=>{window.libpannellum=function(pt,E,h){"use strict";function t($,bt){var D;$&&((D=E.createElement("canvas")).style.width=D.style.height="100%",$.appendChild(D));var m,i,rt,vt,H,R,gt,ct,yt,oe,Ht,x,at,U,kt,wt,mt,Pt,M=["f","b","u","d","l","r"],Y=["f","r","b","l","u","d"];function lt(s,C){return 1==s.level&&1!=C.level?-1:1==C.level&&1!=s.level?1:C.timestamp-s.timestamp}function dt(s,C){return s.level!=C.level?s.level-C.level:s.diff-C.diff}function xt(s,C,f,A,P,O,y){this.vertices=s,this.side=C,this.level=f,this.x=A,this.y=P;var k="object"==typeof O?O.tileKey:O;k=k.replace("%s",C).replace("%l0",f-1).replace("%l",f).replace("%x",A).replace("%y",P),this.path="object"==typeof O?O[k]:k,this.parentPath=y}function Ft(s,C,f,A,P,O){if(function ie(s,C){var f=ee(s,C.slice(0,3)),A=ee(s,C.slice(3,6)),P=ee(s,C.slice(6,9)),O=ee(s,C.slice(9,12)),y=f[0]+A[0]+P[0]+O[0];if(-4==y||4==y)return!1;var k=f[1]+A[1]+P[1]+O[1];return-4!=k&&4!=k&&4!=f[2]+A[2]+P[2]+O[2]}(s,f.vertices)){for(var y=[],k=[],Z=2,z=[],it=0,J=0;J<4;J++){var _t=G(C,f.vertices.slice(3*J,3*(J+1)));y.push(_t[0]*_t[3]),k.push(_t[1]*_t[3]);var Kt=_t[2]*_t[3];Z=Math.min(Z,Kt),z.push(Math.abs(y[J])<=1&&Math.abs(k[J])<=1&&Kt>0),it+=z[J]}var Vt=x.cubeResolution*Math.pow(2,f.level-x.maxLevel),ht=Math.ceil(Vt*x.invTileResolution)-1,ut=Vt%x.tileResolution*2,Ct=2*Vt%x.tileResolution;if(0===Ct&&(Ct=x.tileResolution),0===ut&&(ut=2*x.tileResolution),f.level>1&&Z>0&&it>0){var Tt=0;for(J=0;J<4;J++){var Et=(J+1)%4;if(z[J]||z[Et]){var Bt=(y[Et]-y[J])*i.drawingBufferWidth/2,nt=(k[Et]-k[J])*i.drawingBufferHeight/2;Ct<x.tileResolution&&(f.x==ht?Bt*=x.tileResolution/Ct:f.y==ht&&(nt*=x.tileResolution/Ct)),ut<=x.tileResolution&&(f.x==ht&&(Bt*=2),f.y==ht&&(nt*=2)),Tt=Math.max(Tt,Math.sqrt(Bt*Bt+nt*nt))}}if(Tt<=x.tileResolution/2)return}var v=f.vertices,Lt=v[0]+v[3]+v[6]+v[9],Ut=v[1]+v[4]+v[7]+v[10],Mt=v[2]+v[5]+v[8]+v[11],Gt=Math.sqrt(Lt*Lt+Ut*Ut+Mt*Mt),c=Math.asin(Mt/Gt),l=Math.atan2(Ut,Lt)-P;l+=l>Math.PI?-2*Math.PI:l<-Math.PI?2*Math.PI:0,l=Math.abs(l),f.diff=Math.acos(Math.sin(A)*Math.sin(c)+Math.cos(A)*Math.cos(c)*Math.cos(l));for(var n=!1,d=0;d<m.nodeCache.length;d++)if(m.nodeCache[d].path==f.path){n=!0,m.nodeCache[d].timestamp=m.nodeCacheTimestamp++,m.nodeCache[d].diff=f.diff,m.currentNodes.push(m.nodeCache[d]);break}if(n||(f.timestamp=m.nodeCacheTimestamp++,m.currentNodes.push(f),m.nodeCache.push(f)),f.level<x.maxLevel){var a=.5;(f.x==ht||f.y==ht)&&(a=1-x.tileResolution/(x.tileResolution+Ct));var S,_=[],ft=a,Q=a,q=a,N=J=1-a,It=J,St=J;for(Ct<x.tileResolution&&(f.x==ht&&f.y!=ht?(Q=.5,It=.5,("d"==f.side||"u"==f.side)&&(q=.5,St=.5)):f.x!=ht&&f.y==ht&&(ft=.5,N=.5,("l"==f.side||"r"==f.side)&&(q=.5,St=.5))),ut<=x.tileResolution&&(f.x==ht&&(ft=0,N=1,("l"==f.side||"r"==f.side)&&(q=0,St=1)),f.y==ht&&(Q=0,It=1,("d"==f.side||"u"==f.side)&&(q=0,St=1))),S=new xt(new Float32Array([v[0],v[1],v[2],v[0]*ft+v[3]*N,v[1]*a+v[4]*J,v[2]*q+v[5]*St,v[0]*ft+v[6]*N,v[1]*Q+v[7]*It,v[2]*q+v[8]*St,v[0]*a+v[9]*J,v[1]*Q+v[10]*It,v[2]*q+v[11]*St]),f.side,f.level+1,2*f.x,2*f.y,x.fullpath,f.path),_.push(S),f.x==ht&&ut<=x.tileResolution||(S=new xt(new Float32Array([v[0]*ft+v[3]*N,v[1]*a+v[4]*J,v[2]*q+v[5]*St,v[3],v[4],v[5],v[3]*a+v[6]*J,v[4]*Q+v[7]*It,v[5]*q+v[8]*St,v[0]*ft+v[6]*N,v[1]*Q+v[7]*It,v[2]*q+v[8]*St]),f.side,f.level+1,2*f.x+1,2*f.y,x.fullpath,f.path),_.push(S)),!(f.x==ht&&ut<=x.tileResolution)&&!(f.y==ht&&ut<=x.tileResolution)&&(S=new xt(new Float32Array([v[0]*ft+v[6]*N,v[1]*Q+v[7]*It,v[2]*q+v[8]*St,v[3]*a+v[6]*J,v[4]*Q+v[7]*It,v[5]*q+v[8]*St,v[6],v[7],v[8],v[9]*ft+v[6]*N,v[10]*a+v[7]*J,v[11]*q+v[8]*St]),f.side,f.level+1,2*f.x+1,2*f.y+1,x.fullpath,f.path),_.push(S)),f.y==ht&&ut<=x.tileResolution||(S=new xt(new Float32Array([v[0]*a+v[9]*J,v[1]*Q+v[10]*It,v[2]*q+v[11]*St,v[0]*ft+v[6]*N,v[1]*Q+v[7]*It,v[2]*q+v[8]*St,v[9]*ft+v[6]*N,v[10]*a+v[7]*J,v[11]*q+v[8]*St,v[9],v[10],v[11]]),f.side,f.level+1,2*f.x,2*f.y+1,x.fullpath,f.path),_.push(S)),Et=0;Et<_.length;Et++)Ft(s,C,_[Et],A,P,O)}}}function ae(){return new Float32Array([-1,1,-1,1,1,-1,1,-1,-1,-1,-1,-1,1,1,1,-1,1,1,-1,-1,1,1,-1,1,-1,1,1,1,1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1,1,-1,1,-1,-1,1,-1,1,1,-1,1,-1,-1,-1,-1,-1,-1,1,1,1,-1,1,1,1,1,-1,1,1,-1,-1])}function te(s,C,f){var A=Math.sin(C),P=Math.cos(C);return"x"==f?new Float32Array([s[0],P*s[1]+A*s[2],P*s[2]-A*s[1],s[3],P*s[4]+A*s[5],P*s[5]-A*s[4],s[6],P*s[7]+A*s[8],P*s[8]-A*s[7]]):"y"==f?new Float32Array([P*s[0]-A*s[2],s[1],P*s[2]+A*s[0],P*s[3]-A*s[5],s[4],P*s[5]+A*s[3],P*s[6]-A*s[8],s[7],P*s[8]+A*s[6]]):"z"==f?new Float32Array([P*s[0]+A*s[1],P*s[1]-A*s[0],s[2],P*s[3]+A*s[4],P*s[4]-A*s[3],s[5],P*s[6]+A*s[7],P*s[7]-A*s[6],s[8]]):void 0}function Dt(s){return new Float32Array([s[0],s[4],s[8],s[12],s[1],s[5],s[9],s[13],s[2],s[6],s[10],s[14],s[3],s[7],s[11],s[15]])}function _e(s,C,f,A){var P=2*Math.atan(Math.tan(s/2)*i.drawingBufferHeight/i.drawingBufferWidth),O=1/Math.tan(P/2);return new Float32Array([O/C,0,0,0,0,O,0,0,0,0,(A+f)/(f-A),2*A*f/(f-A),0,0,-1,0])}function ne(s,C){i.bindTexture(i.TEXTURE_2D,C),i.texImage2D(i.TEXTURE_2D,0,i.RGB,i.RGB,i.UNSIGNED_BYTE,s),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MAG_FILTER,i.LINEAR),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MIN_FILTER,i.LINEAR),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_S,i.CLAMP_TO_EDGE),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_T,i.CLAMP_TO_EDGE),i.bindTexture(i.TEXTURE_2D,null)}bt&&(i=bt),this.init=function(s,C,f,A,P,O,y){if(C===h&&(C="equirectangular"),"equirectangular"!=C&&"cubemap"!=C&&"multires"!=C)throw console.log("Error: invalid image type specified!"),{type:"config error"};if(at=C,x=s,Pt=y||{},m){if(rt&&(i.detachShader(m,rt),i.deleteShader(rt)),vt&&(i.detachShader(m,vt),i.deleteShader(vt)),i.bindBuffer(i.ARRAY_BUFFER,null),i.bindBuffer(i.ELEMENT_ARRAY_BUFFER,null),m.texture&&i.deleteTexture(m.texture),m.nodeCache)for(var k=0;k<m.nodeCache.length;k++)i.deleteTexture(m.nodeCache[k].texture);if(m.textureLoads)for(ot=[];m.textureLoads.length>0;)m.textureLoads.shift()(!1);i.deleteProgram(m),m=h}H&&(R&&(i.detachShader(H,R),i.deleteShader(R)),gt&&(i.detachShader(H,gt),i.deleteShader(gt)),i.deleteProgram(H),H=h),Ht=h;var Z,it,z=!1;if("cubemap"==at)for(Z=0;Z<6;Z++)x[Z].width>0?(it===h&&(it=x[Z].width),it!=x[Z].width&&console.log("Cube faces have inconsistent widths: "+it+" vs. "+x[Z].width)):z=!0;function J(p){if(z){var S=p*p*4,ft=new Uint8ClampedArray(S),Q=y.backgroundColor?y.backgroundColor:[0,0,0];Q[0]*=255,Q[1]*=255,Q[2]*=255;for(var q=0;q<S;q++)ft[q++]=Q[0],ft[q++]=Q[1],ft[q++]=Q[2];var N=new ImageData(ft,p,p);for(Z=0;Z<6;Z++)0==x[Z].width&&(x[Z]=N)}}if("cubemap"==at&&it&it-1&&(navigator.userAgent.toLowerCase().match(/(iphone|ipod|ipad).* os 8_/)||navigator.userAgent.toLowerCase().match(/(iphone|ipod|ipad).* os 9_/)||navigator.userAgent.toLowerCase().match(/(iphone|ipod|ipad).* os 10_/)||navigator.userAgent.match(/Trident.*rv[ :]*11\./))||(i||(i=D.getContext("experimental-webgl",{alpha:!1,depth:!1})),i&&1286==i.getError()&&pe()),i||!("multires"==at&&x.hasOwnProperty("fallbackPath")||"cubemap"==at)||!("WebkitAppearance"in E.documentElement.style)&&!navigator.userAgent.match(/Trident.*rv[ :]*11\./)&&-1===navigator.appVersion.indexOf("MSIE 10")){if(!i)throw console.log("Error: no WebGL support detected!"),{type:"no webgl"};"cubemap"==at&&J(it),x.fullpath=x.basePath?x.basePath+x.path:x.path,x.invTileResolution=1/x.tileResolution;var Ct=ae();for(oe=[],Z=0;Z<6;Z++)oe[Z]=Ct.slice(12*Z,12*Z+12),Ct=ae();var Tt=0;if("equirectangular"==at){if(Tt=i.getParameter(i.MAX_TEXTURE_SIZE),Math.max(x.width/2,x.height)>Tt)throw console.log("Error: The image is too big; it's "+x.width+"px wide, but this device's maximum supported size is "+2*Tt+"px."),{type:"webgl size error",width:x.width,maxWidth:2*Tt}}else if("cubemap"==at&&it>i.getParameter(i.MAX_CUBE_MAP_TEXTURE_SIZE))throw console.log("Error: The image is too big; it's "+it+"px wide, but this device's maximum supported size is "+Tt+"px."),{type:"webgl size error",width:it,maxWidth:Tt};if(y!==h){var Et=isNaN(y.horizonPitch)?0:Number(y.horizonPitch),Bt=isNaN(y.horizonRoll)?0:Number(y.horizonRoll);(0!=Et||0!=Bt)&&(Ht=[Et,Bt])}var nt=i.TEXTURE_2D;if(i.viewport(0,0,i.drawingBufferWidth,i.drawingBufferHeight),i.getShaderPrecisionFormat){var v=i.getShaderPrecisionFormat(i.FRAGMENT_SHADER,i.HIGH_FLOAT);v&&v.precision<1&&(et=et.replace("highp","mediump"))}rt=i.createShader(i.VERTEX_SHADER);var Lt=g;"multires"==at&&(Lt=K),i.shaderSource(rt,Lt),i.compileShader(rt),vt=i.createShader(i.FRAGMENT_SHADER);var Ut=j;if("cubemap"==at?(nt=i.TEXTURE_CUBE_MAP,Ut=e):"multires"==at&&(Ut=V),i.shaderSource(vt,Ut),i.compileShader(vt),m=i.createProgram(),i.attachShader(m,rt),i.attachShader(m,vt),i.linkProgram(m),i.getShaderParameter(rt,i.COMPILE_STATUS)||console.log(i.getShaderInfoLog(rt)),i.getShaderParameter(vt,i.COMPILE_STATUS)||console.log(i.getShaderInfoLog(vt)),i.getProgramParameter(m,i.LINK_STATUS)||console.log(i.getProgramInfoLog(m)),i.useProgram(m),m.drawInProgress=!1,null!==y.backgroundColor){var Mt=y.backgroundColor?y.backgroundColor:[0,0,0];i.clearColor(Mt[0],Mt[1],Mt[2],1),i.clear(i.COLOR_BUFFER_BIT)}if(m.texCoordLocation=i.getAttribLocation(m,"a_texCoord"),i.enableVertexAttribArray(m.texCoordLocation),"multires"!=at){if(U||(U=i.createBuffer()),i.bindBuffer(i.ARRAY_BUFFER,U),i.bufferData(i.ARRAY_BUFFER,new Float32Array([-1,1,1,1,1,-1,-1,1,1,-1,-1,-1]),i.STATIC_DRAW),i.vertexAttribPointer(m.texCoordLocation,2,i.FLOAT,!1,0,0),m.aspectRatio=i.getUniformLocation(m,"u_aspectRatio"),i.uniform1f(m.aspectRatio,i.drawingBufferWidth/i.drawingBufferHeight),m.psi=i.getUniformLocation(m,"u_psi"),m.theta=i.getUniformLocation(m,"u_theta"),m.f=i.getUniformLocation(m,"u_f"),m.h=i.getUniformLocation(m,"u_h"),m.v=i.getUniformLocation(m,"u_v"),m.vo=i.getUniformLocation(m,"u_vo"),m.rot=i.getUniformLocation(m,"u_rot"),i.uniform1f(m.h,f/(2*Math.PI)),i.uniform1f(m.v,A/Math.PI),i.uniform1f(m.vo,P/Math.PI*2),"equirectangular"==at&&(m.backgroundColor=i.getUniformLocation(m,"u_backgroundColor"),i.uniform4fv(m.backgroundColor,Mt.concat([1]))),m.texture=i.createTexture(),i.bindTexture(nt,m.texture),"cubemap"==at)i.texImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X,0,i.RGB,i.RGB,i.UNSIGNED_BYTE,x[1]),i.texImage2D(i.TEXTURE_CUBE_MAP_NEGATIVE_X,0,i.RGB,i.RGB,i.UNSIGNED_BYTE,x[3]),i.texImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_Y,0,i.RGB,i.RGB,i.UNSIGNED_BYTE,x[4]),i.texImage2D(i.TEXTURE_CUBE_MAP_NEGATIVE_Y,0,i.RGB,i.RGB,i.UNSIGNED_BYTE,x[5]),i.texImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_Z,0,i.RGB,i.RGB,i.UNSIGNED_BYTE,x[0]),i.texImage2D(i.TEXTURE_CUBE_MAP_NEGATIVE_Z,0,i.RGB,i.RGB,i.UNSIGNED_BYTE,x[2]);else if(x.width<=Tt)i.uniform1i(i.getUniformLocation(m,"u_splitImage"),0),i.texImage2D(nt,0,i.RGB,i.RGB,i.UNSIGNED_BYTE,x);else{i.uniform1i(i.getUniformLocation(m,"u_splitImage"),1);var Gt=E.createElement("canvas");Gt.width=x.width/2,Gt.height=x.height;var c=Gt.getContext("2d");c.drawImage(x,0,0);var b=c.getImageData(0,0,x.width/2,x.height);i.texImage2D(nt,0,i.RGB,i.RGB,i.UNSIGNED_BYTE,b),m.texture2=i.createTexture(),i.activeTexture(i.TEXTURE1),i.bindTexture(nt,m.texture2),i.uniform1i(i.getUniformLocation(m,"u_image1"),1),c.drawImage(x,-x.width/2,0),b=c.getImageData(0,0,x.width/2,x.height),i.texImage2D(nt,0,i.RGB,i.RGB,i.UNSIGNED_BYTE,b),i.texParameteri(nt,i.TEXTURE_WRAP_S,i.CLAMP_TO_EDGE),i.texParameteri(nt,i.TEXTURE_WRAP_T,i.CLAMP_TO_EDGE),i.texParameteri(nt,i.TEXTURE_MIN_FILTER,i.LINEAR),i.texParameteri(nt,i.TEXTURE_MAG_FILTER,i.LINEAR),i.activeTexture(i.TEXTURE0)}"cubemap"!=at&&x.width&&x.width<=Tt&&f==2*Math.PI&&!(x.width&x.width-1)?i.texParameteri(nt,i.TEXTURE_WRAP_S,i.REPEAT):i.texParameteri(nt,i.TEXTURE_WRAP_S,i.CLAMP_TO_EDGE),i.texParameteri(nt,i.TEXTURE_WRAP_T,i.CLAMP_TO_EDGE),i.texParameteri(nt,i.TEXTURE_MIN_FILTER,i.LINEAR),i.texParameteri(nt,i.TEXTURE_MAG_FILTER,i.LINEAR)}else if(m.vertPosLocation=i.getAttribLocation(m,"a_vertCoord"),i.enableVertexAttribArray(m.vertPosLocation),kt||(kt=i.createBuffer()),wt||(wt=i.createBuffer()),mt||(mt=i.createBuffer()),i.bindBuffer(i.ARRAY_BUFFER,wt),i.bufferData(i.ARRAY_BUFFER,new Float32Array([0,0,1,0,1,1,0,1]),i.STATIC_DRAW),i.vertexAttribPointer(m.texCoordLocation,2,i.FLOAT,!1,0,0),i.bindBuffer(i.ELEMENT_ARRAY_BUFFER,mt),i.bufferData(i.ELEMENT_ARRAY_BUFFER,new Uint16Array([0,1,2,0,2,3]),i.STATIC_DRAW),i.bindBuffer(i.ARRAY_BUFFER,kt),i.vertexAttribPointer(m.vertPosLocation,3,i.FLOAT,!1,0,0),m.perspUniform=i.getUniformLocation(m,"u_perspMatrix"),m.cubeUniform=i.getUniformLocation(m,"u_cubeMatrix"),m.currentNodes=[],m.nodeCache=[],m.nodeCacheTimestamp=0,m.textureLoads=[],x.shtHash||x.equirectangularThumbnail){R=i.createShader(i.VERTEX_SHADER),i.shaderSource(R,g),i.compileShader(R),gt=i.createShader(i.FRAGMENT_SHADER),i.shaderSource(gt,j),i.compileShader(gt),H=i.createProgram(),i.attachShader(H,R),i.attachShader(H,gt),i.linkProgram(H),i.getShaderParameter(R,i.COMPILE_STATUS)||console.log(i.getShaderInfoLog(R)),i.getShaderParameter(gt,i.COMPILE_STATUS)||console.log(i.getShaderInfoLog(gt)),i.getProgramParameter(H,i.LINK_STATUS)||console.log(i.getProgramInfoLog(H)),i.useProgram(H),H.texCoordLocation=i.getAttribLocation(H,"a_texCoord"),i.enableVertexAttribArray(H.texCoordLocation),U||(U=i.createBuffer()),i.bindBuffer(i.ARRAY_BUFFER,U),i.bufferData(i.ARRAY_BUFFER,new Float32Array([-1,1,1,1,1,-1,-1,1,1,-1,-1,-1]),i.STATIC_DRAW),i.vertexAttribPointer(H.texCoordLocation,2,i.FLOAT,!1,0,0),H.aspectRatio=i.getUniformLocation(H,"u_aspectRatio"),i.uniform1f(H.aspectRatio,i.drawingBufferWidth/i.drawingBufferHeight),H.psi=i.getUniformLocation(H,"u_psi"),H.theta=i.getUniformLocation(H,"u_theta"),H.f=i.getUniformLocation(H,"u_f"),H.h=i.getUniformLocation(H,"u_h"),H.v=i.getUniformLocation(H,"u_v"),H.vo=i.getUniformLocation(H,"u_vo"),H.rot=i.getUniformLocation(H,"u_rot"),i.uniform1f(H.h,1),H.texture=i.createTexture(),i.bindTexture(nt,H.texture);var l,n,d,a=function(){i.useProgram(H),i.uniform1i(i.getUniformLocation(H,"u_splitImage"),0),i.texImage2D(nt,0,i.RGBA,i.RGBA,i.UNSIGNED_BYTE,l),i.texParameteri(nt,i.TEXTURE_WRAP_S,i.REPEAT),i.texParameteri(nt,i.TEXTURE_WRAP_T,i.CLAMP_TO_EDGE),i.texParameteri(nt,i.TEXTURE_MIN_FILTER,i.LINEAR),i.texParameteri(nt,i.TEXTURE_MAG_FILTER,i.LINEAR),i.uniform1f(H.v,n),i.uniform1f(H.vo,d),i.useProgram(m)};if(x.shtHash&&(l=function qt(s){if(At.length<1)for(var C=Jt.length/32,f=0;f<32;f++){At.push([]);for(var A=0;A<C;A++)At[f].push(ce(Qt(Jt[f*C+A],1),41)*fe)}Qt(s[0],1);var O=255*(ce(Qt(s[1],1),41)+1)/2,y=Qt(s.slice(2),2),k=[],Z=[],z=[];for(f=0;f<y.length;f++){var it=ue(y[f],O);k.push(it[0]),Z.push(it[1]),z.push(it[2])}var J=.03125*Math.PI,_t=[];for(f=31;f>=0;f--)for(A=0;A<64;A++)_t.push($t(k,At[f],(A+.5)*J)),_t.push($t(Z,At[f],(A+.5)*J)),_t.push($t(z,At[f],(A+.5)*J)),_t.push(255);return new ImageData(new Uint8ClampedArray(_t),64,32)}(x.shtHash),n=(2+1/31)/2,d=1-(2+1/31)/2,a()),x.equirectangularThumbnail)if("string"==typeof x.equirectangularThumbnail){if("data:"!=x.equirectangularThumbnail.slice(0,5))throw console.log("Error: thumbnail string is not a data URI!"),{type:"config error"};(l=new Image).onload=function(){n=1,d=0,a()},l.src=x.equirectangularThumbnail}else l=x.equirectangularThumbnail,n=1,d=0,a();i.bindBuffer(i.ARRAY_BUFFER,kt),i.vertexAttribPointer(m.vertPosLocation,3,i.FLOAT,!1,0,0),i.useProgram(m)}var _=i.getError();if(0!==_)throw console.log("Error: Something went wrong with WebGL!",_),{type:"webgl error"};O()}else{var _t;yt&&$.removeChild(yt),(yt=E.createElement("div")).className="pnlm-world",_t=x.basePath?x.basePath+x.fallbackPath:x.fallbackPath;var Kt=0,Vt=function(){var p=E.createElement("canvas");p.className="pnlm-face pnlm-"+Y[this.side]+"face",yt.appendChild(p);var S=p.getContext("2d");p.style.width=this.width+4+"px",p.style.height=this.height+4+"px",p.width=this.width+4,p.height=this.height+4,S.drawImage(this,2,2);var q,N,ft=S.getImageData(0,0,p.width,p.height),Q=ft.data;for(q=2;q<p.width-2;q++)for(N=0;N<4;N++)Q[4*(q+p.width)+N]=Q[4*(q+2*p.width)+N],Q[4*(q+p.width*(p.height-2))+N]=Q[4*(q+p.width*(p.height-3))+N];for(q=2;q<p.height-2;q++)for(N=0;N<4;N++)Q[4*(q*p.width+1)+N]=Q[4*(q*p.width+2)+N],Q[4*((q+1)*p.width-2)+N]=Q[4*((q+1)*p.width-3)+N];for(N=0;N<4;N++)Q[4*(p.width+1)+N]=Q[4*(2*p.width+2)+N],Q[4*(2*p.width-2)+N]=Q[4*(3*p.width-3)+N],Q[4*(p.width*(p.height-2)+1)+N]=Q[4*(p.width*(p.height-3)+2)+N],Q[4*(p.width*(p.height-1)-2)+N]=Q[4*(p.width*(p.height-2)-3)+N];for(q=1;q<p.width-1;q++)for(N=0;N<4;N++)Q[4*q+N]=Q[4*(q+p.width)+N],Q[4*(q+p.width*(p.height-1))+N]=Q[4*(q+p.width*(p.height-2))+N];for(q=1;q<p.height-1;q++)for(N=0;N<4;N++)Q[q*p.width*4+N]=Q[4*(q*p.width+1)+N],Q[4*((q+1)*p.width-1)+N]=Q[4*((q+1)*p.width-2)+N];for(N=0;N<4;N++)Q[N]=Q[4*(p.width+1)+N],Q[4*(p.width-1)+N]=Q[4*(2*p.width-2)+N],Q[p.width*(p.height-1)*4+N]=Q[4*(p.width*(p.height-2)+1)+N],Q[4*(p.width*p.height-1)+N]=Q[4*(p.width*(p.height-1)-2)+N];S.putImageData(ft,0,0),ht.call(this)},ht=function(){this.width>0?(ct===h&&(ct=this.width),ct!=this.width&&console.log("Fallback faces have inconsistent widths: "+ct+" vs. "+this.width)):z=!0,6==++Kt&&(ct=this.width,$.appendChild(yt),O())};for(z=!1,Z=0;Z<6;Z++){var ut=new Image;ut.crossOrigin=Pt.crossOrigin?Pt.crossOrigin:"anonymous",ut.side=Z,ut.onload=Vt,ut.onerror=ht,ut.src="multires"==at?_t.replace("%s",Y[Z])+(x.extension?"."+x.extension:""):x[Z].src}J(ct)}},this.destroy=function(){if($!==h&&(D!==h&&$.contains(D)&&$.removeChild(D),yt!==h&&$.contains(yt)&&$.removeChild(yt)),i){var s=i.getExtension("WEBGL_lose_context");s&&s.loseContext()}},this.resize=function(){var s=pt.devicePixelRatio||1;D.width=D.clientWidth*s,D.height=D.clientHeight*s,i&&(1286==i.getError()&&pe(),i.viewport(0,0,i.drawingBufferWidth,i.drawingBufferHeight),"multires"!=at?i.uniform1f(m.aspectRatio,D.clientWidth/D.clientHeight):x.shtHash&&(i.useProgram(H),i.uniform1f(H.aspectRatio,D.clientWidth/D.clientHeight),i.useProgram(m)))},D&&this.resize(),this.setPose=function(s,C){s=isNaN(s)?0:Number(s),C=isNaN(C)?0:Number(C),Ht=0==s&&0==C?h:[s,C]},this.render=function(s,C,f,A){var P,y,k=0;if(A===h&&(A={}),A.roll&&(k=A.roll),A.dynamic)var Z=A.dynamic;if(Ht!==h){var z=Ht[0],it=Ht[1],J=s,_t=C,Kt=Math.cos(it)*Math.sin(s)*Math.sin(z)+Math.cos(s)*(Math.cos(z)*Math.cos(C)+Math.sin(it)*Math.sin(z)*Math.sin(C)),Vt=-Math.sin(s)*Math.sin(it)+Math.cos(s)*Math.cos(it)*Math.sin(C),ht=Math.cos(it)*Math.cos(z)*Math.sin(s)+Math.cos(s)*(-Math.cos(C)*Math.sin(z)+Math.cos(z)*Math.sin(it)*Math.sin(C));s=Math.asin(Math.max(Math.min(ht,1),-1)),C=Math.atan2(Vt,Kt);var ut=[Math.cos(J)*(Math.sin(it)*Math.sin(z)*Math.cos(_t)-Math.cos(z)*Math.sin(_t)),Math.cos(J)*Math.cos(it)*Math.cos(_t),Math.cos(J)*(Math.cos(z)*Math.sin(it)*Math.cos(_t)+Math.sin(_t)*Math.sin(z))],Ct=[-Math.cos(s)*Math.sin(C),Math.cos(s)*Math.cos(C)],Tt=Math.acos(Math.max(Math.min((ut[0]*Ct[0]+ut[1]*Ct[1])/(Math.sqrt(ut[0]*ut[0]+ut[1]*ut[1]+ut[2]*ut[2])*Math.sqrt(Ct[0]*Ct[0]+Ct[1]*Ct[1])),1),-1));ut[2]<0&&(Tt=2*Math.PI-Tt),k+=Tt}if(A.hook&&A.hook({gl:i,program:m,previewProgram:H,imageType:at,texCoordBuffer:U,cubeVertBuf:kt,cubeVertTexCoordBuf:wt,cubeVertIndBuf:mt}),i||"multires"!=at&&"cubemap"!=at){if("multires"!=at){var Ut=2*Math.atan(Math.tan(.5*f)/(i.drawingBufferWidth/i.drawingBufferHeight));P=1/Math.tan(.5*Ut),i.uniform1f(m.psi,C),i.uniform1f(m.theta,s),i.uniform1f(m.rot,k),i.uniform1f(m.f,P),!0===Z&&"equirectangular"==at&&(i.bindTexture(i.TEXTURE_2D,m.texture),i.texImage2D(i.TEXTURE_2D,0,i.RGB,i.RGB,i.UNSIGNED_BYTE,x)),i.drawArrays(i.TRIANGLES,0,6)}else{var Mt=typeof x.shtHash<"u"||typeof x.equirectangularThumbnail<"u",Gt=Mt;if(Mt&&m.currentNodes.length>=6){Gt=!1;for(var O=0;O<6;O++)if(!m.currentNodes[O].textureLoaded){Gt=!0;break}}Gt&&(i.useProgram(H),i.bindBuffer(i.ARRAY_BUFFER,U),i.vertexAttribPointer(H.texCoordLocation,2,i.FLOAT,!1,0,0),i.bindTexture(i.TEXTURE_2D,H.texture),Ut=2*Math.atan(Math.tan(.5*f)/(i.drawingBufferWidth/i.drawingBufferHeight)),P=1/Math.tan(.5*Ut),i.uniform1f(H.psi,C),i.uniform1f(H.theta,s),i.uniform1f(H.rot,k),i.uniform1f(H.f,P),i.drawArrays(i.TRIANGLES,0,6),i.bindBuffer(i.ARRAY_BUFFER,kt),i.vertexAttribPointer(m.vertPosLocation,3,i.FLOAT,!1,0,0),i.useProgram(m));var c=_e(f,i.drawingBufferWidth/i.drawingBufferHeight,.1,100),b=_e(f,i.drawingBufferWidth/i.drawingBufferHeight,-100,100),l=function Xt(){return new Float32Array([1,0,0,0,1,0,0,0,1])}();l=te(l,-k,"z"),l=te(l,-s,"x"),l=function de(s){return new Float32Array([s[0],s[1],s[2],0,s[3],s[4],s[5],0,s[6],s[7],s[8],0,0,0,0,1])}(l=te(l,C,"y")),i.uniformMatrix4fv(m.perspUniform,!1,Dt(c)),i.uniformMatrix4fv(m.cubeUniform,!1,Dt(l));var n=le(c,l),d=le(b,l);if(m.nodeCache.sort(lt),m.nodeCache.length>200&&m.nodeCache.length>m.currentNodes.length+50)for(var a=m.nodeCache.splice(200,m.nodeCache.length-200),_=0;_<a.length;_++)i.deleteTexture(a[_].texture);for(m.currentNodes=[],y=0;y<6;y++)Ft(n,d,new xt(oe[y],M[y],1,0,0,x.fullpath,null),s,C,f);for(m.currentNodes.sort(dt),O=ot.length-1;O>=0;O--)-1===m.currentNodes.indexOf(ot[O].node)&&(ot[O].node.textureLoad=!1,ot.splice(O,1));if(0===ot.length)for(O=0;O<m.currentNodes.length;O++){var S=m.currentNodes[O];if(!S.texture&&!S.textureLoad){S.textureLoad=!0,setTimeout(Ot,0,S);break}}m.textureLoads.length>0&&m.textureLoads.shift()(!0),function X(s){if(!m.drawInProgress){m.drawInProgress=!0,s&&i.clear(i.COLOR_BUFFER_BIT);for(var C={},f=0;f<m.currentNodes.length;f++)C[m.currentNodes[f].parentPath]===h&&(C[m.currentNodes[f].parentPath]=0),C[m.currentNodes[f].parentPath]+=!(m.currentNodes[f].textureLoaded>1);for(f=0;f<m.currentNodes.length;f++)m.currentNodes[f].textureLoaded>1&&4!=C[m.currentNodes[f].path]&&(i.bufferData(i.ARRAY_BUFFER,m.currentNodes[f].vertices,i.STATIC_DRAW),i.bindTexture(i.TEXTURE_2D,m.currentNodes[f].texture),i.drawElements(i.TRIANGLES,6,i.UNSIGNED_SHORT,0));m.drawInProgress=!1}}(!Mt)}if(A.returnImage!==h)return pt.createImageBitmap&&"ImageBitmap"==A.returnImage?createImageBitmap(D):0==A.returnImage.toString().indexOf("image/")?D.toDataURL(A.returnImage):D.toDataURL("image/png")}else{var Et={f:"translate3d(-"+(2+(y=ct/2))+"px, -"+(y+2)+"px, -"+y+"px)",b:"translate3d("+(y+2)+"px, -"+(y+2)+"px, "+y+"px) rotateX(180deg) rotateZ(180deg)",u:"translate3d(-"+(y+2)+"px, -"+y+"px, "+(y+2)+"px) rotateX(270deg)",d:"translate3d(-"+(y+2)+"px, "+y+"px, -"+(y+2)+"px) rotateX(90deg)",l:"translate3d(-"+y+"px, -"+(y+2)+"px, "+(y+2)+"px) rotateX(180deg) rotateY(90deg) rotateZ(180deg)",r:"translate3d("+y+"px, -"+(y+2)+"px, -"+(y+2)+"px) rotateY(270deg)"},Bt=(P=1/Math.tan(f/2))*D.clientWidth/2+"px",nt="perspective("+Bt+") translateZ("+Bt+") rotateX("+s+"rad) rotateY("+C+"rad) ",v=Object.keys(Et);for(O=0;O<6;O++){var Lt=yt.querySelector(".pnlm-"+v[O]+"face");Lt&&(Lt.style.webkitTransform=nt+Et[v[O]],Lt.style.transform=nt+Et[v[O]])}}},this.isLoading=function(){if(i&&"multires"==at)for(var s=0;s<m.currentNodes.length;s++)if(!m.currentNodes[s].textureLoaded)return!0;return!1},this.isBaseLoaded=function(){if(m.currentNodes.length>=6){for(var s=0;s<6;s++)if(!m.currentNodes[s].textureLoaded)return!1;return!0}return!1},this.getCanvas=function(){return D};var Ot,ot=[],Yt=function(){var f,s=4,C={};function A(){var k=this;this.texture=this.callback=null,this.image=new Image,this.image.crossOrigin=f||"anonymous";var Z=function(){m.textureLoads.push(function(z){z&&(k.image.width>0&&k.image.height>0?(ne(k.image,k.texture),k.callback(k.texture,!0)):k.callback(k.texture,!1)),function O(k){if(ot.length){var Z=ot.shift();k.loadTexture(Z.src,Z.texture,Z.callback)}else C[s++]=k}(k)})};this.image.addEventListener("load",Z),this.image.addEventListener("error",Z)}function P(k,Z,z,it){this.node=k,this.src=Z,this.texture=z,this.callback=it}A.prototype.loadTexture=function(k,Z,z){this.texture=Z,this.callback=z,this.image.src=k};for(var y=0;y<s;y++)C[y]=new A;return function(k,Z,z,it){f=it;var J=i.createTexture();return s?C[--s].loadTexture(Z,J,z):ot.push(new P(k,Z,J,z)),J}}();if(pt.Worker&&pt.createImageBitmap){var re=new Blob(["("+function(){self.onmessage=function(C){var f=C.data[0];fetch(f,{mode:"cors",credentials:"use-credentials"==C.data[1]?"include":"same-origin"}).then(function(P){return P.blob()}).then(function(P){return createImageBitmap(P)}).then(function(P){postMessage([f,!0,P],[P])}).catch(function(){postMessage([f,!1])})}}.toString()+")()"],{type:"application/javascript"}),me=new Worker(URL.createObjectURL(re)),L={};me.onmessage=function(C){var f=C.data[0],A=C.data[1],P=C.data[2];m.textureLoads.push(function(O){var y,k=!1;A&&O&&(y=i.createTexture(),ne(P,y),k=!0);var Z=L[f];delete L[f],Z!==h&&(Z.texture=y,Z.textureLoaded=k?2:1)})},Ot=function(C){var f=new URL(C.path+(x.extension?"."+x.extension:""),pt.location).href;L[f]=C,me.postMessage([f,Pt.crossOrigin])}}else Ot=function Zt(s){Yt(s,s.path+(x.extension?"."+x.extension:""),function(C,f){s.texture=C,s.textureLoaded=f?2:1},Pt.crossOrigin)};function le(s,C){return new Float32Array([s[0]*C[0],s[0]*C[1],s[0]*C[2],0,s[5]*C[4],s[5]*C[5],s[5]*C[6],0,s[10]*C[8],s[10]*C[9],s[10]*C[10],s[11],-C[8],-C[9],-C[10],0])}function G(s,C){return new Float32Array([s[0]*C[0]+s[1]*C[1]+s[2]*C[2],s[4]*C[0]+s[5]*C[1]+s[6]*C[2],s[11]+s[8]*C[0]+s[9]*C[1]+s[10]*C[2],1/(s[12]*C[0]+s[13]*C[1]+s[14]*C[2])])}function ee(s,C){var f=G(s,C),A=f[0]*f[3],P=f[1]*f[3],O=f[2]*f[3],y=[0,0,0];return A<-1&&(y[0]=-1),A>1&&(y[0]=1),P<-1&&(y[1]=-1),P>1&&(y[1]=1),(O<-1||O>1)&&(y[2]=1),y}function pe(){console.log("Reducing canvas size due to error 1286!"),D.width=Math.round(D.width/2),D.height=Math.round(D.height/2)}var se="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz#$%*+,-.:;=?@[]^_{|}~",Jt="Bf[ff4fff|ffff0fffffBo@Ri5xag{Jmdf2+WiefCs@Ll7+Vi]Btag6[NmdgCv=Ho9;Qk;7zWiF_GsahDy:ErE?Mn$5+SkS_AyWiD#-CuJ[Iqp6;Nnx?7*SlE$*BxR@FtPA?Jq+%7:NnF*zAzn?CwIG@Ft-Y9?IrG+vA%w:AzGR?Cx*IF@EuI,nA+$*9%Gu:A#xCR?ByJ-VB-*wA+J**9*ZBv:9%L.QD.*aB.O.v9-MF+$8,O:MG:*OD;a:UB:IO:n9:Q:KJ;#IG=u-KE=Hs:MC?T:IO=wEL?#%FJ@K**FI@Y;HV=pDU?*sCS@S.uCR[m;Hp=VDq?*SCs@s.QCt[r:Iw=OEz?#IF$@#*HF%@u:K$;KI+=uEK-=*sCM:?w:M+:HO.;aCU;:%OCn?:z.Q..Ha;.ODv?-yFG$@,$-V;-Hw=+JH*?*lBP:?%%,n=+J*?%GQ:=#NCt?;y++v=%O:=zGt?:xHI,@-u,*z=zX?:wI+@,tEY??%r-$*;xt@,tP=?$qG%[:xn.#-:u$[%qp];xnN?[*sl.y:-r-?yn$^+sks_=yoi:v=*o?;uk;[zoi,_+skh:s@zl[+pi];tkg][xmhg;o@ti^xkg{$mhf|+oigf;f[ff_fff|ffff~fffff",fe=3.317,At=[];function ce(s,C){return Math.pow((Math.abs(s)-C)/C,2)*(s-C>0?1:-1)}function ue(s,C){var f=Math.floor(s/361),A=Math.floor(s/19)%19,P=s%19;return[ce(f,9)*C,ce(A,9)*C,ce(P,9)*C]}function Qt(s,C){for(var f=Math.floor(s.length/C),A=[],P=0;P<f;P++){for(var O=0,y=0;y<C;y++)O=83*O+se.indexOf(s[P*C+y]);A.push(O)}return A}function $t(s,C,f){var A=Math.floor(Math.sqrt(s.length))-1,P=Array(A+1),O=Array(A+1);O[0]=0,P[0]=1,O[1]=Math.sin(f),P[1]=Math.cos(f);for(var y=2;y<=A;y++)O[y]=2*O[y-1]*P[1]-O[y-2],P[y]=2*P[y-1]*P[1]-P[y-2];for(var k=0,Z=0,z=1;z<=A+1;z++)Z+=z;for(var it=A;it>=0;it--){var J=Math.floor((it+1)*it/2);for(k+=0!=J?s[J]*C[J-1]:s[J],y=1;y<=it;y++)k+=(s[++J]*P[y]+s[J+Z-it-1]*O[y])*C[J-1]}return Math.round(k)}}var g=["attribute vec2 a_texCoord;","varying vec2 v_texCoord;","void main() {","gl_Position = vec4(a_texCoord, 0.0, 1.0);","v_texCoord = a_texCoord;","}"].join(""),K=["attribute vec3 a_vertCoord;","attribute vec2 a_texCoord;","uniform mat4 u_cubeMatrix;","uniform mat4 u_perspMatrix;","varying mediump vec2 v_texCoord;","void main(void) {","gl_Position = u_perspMatrix * u_cubeMatrix * vec4(a_vertCoord, 1.0);","v_texCoord = a_texCoord;","}"].join(""),et=["precision highp float;","uniform float u_aspectRatio;","uniform float u_psi;","uniform float u_theta;","uniform float u_f;","uniform float u_h;","uniform float u_v;","uniform float u_vo;","uniform float u_rot;","const float PI = 3.14159265358979323846264;","uniform sampler2D u_image0;","uniform sampler2D u_image1;","uniform bool u_splitImage;","uniform samplerCube u_imageCube;","varying vec2 v_texCoord;","uniform vec4 u_backgroundColor;","void main() {","float x = v_texCoord.x * u_aspectRatio;","float y = v_texCoord.y;","float sinrot = sin(u_rot);","float cosrot = cos(u_rot);","float rot_x = x * cosrot - y * sinrot;","float rot_y = x * sinrot + y * cosrot;","float sintheta = sin(u_theta);","float costheta = cos(u_theta);","float a = u_f * costheta - rot_y * sintheta;","float root = sqrt(rot_x * rot_x + a * a);","float lambda = atan(rot_x / root, a / root) + u_psi;","float phi = atan((rot_y * costheta + u_f * sintheta) / root);"].join("\n"),e=et+["float cosphi = cos(phi);","gl_FragColor = textureCube(u_imageCube, vec3(cosphi*sin(lambda), sin(phi), cosphi*cos(lambda)));","}"].join("\n"),j=et+["lambda = mod(lambda + PI, PI * 2.0) - PI;","vec2 coord = vec2(lambda / PI, phi / (PI / 2.0));","if(coord.x < -u_h || coord.x > u_h || coord.y < -u_v + u_vo || coord.y > u_v + u_vo)","gl_FragColor = u_backgroundColor;","else {","if(u_splitImage) {","if(coord.x < 0.0)","gl_FragColor = texture2D(u_image0, vec2((coord.x + u_h) / u_h, (-coord.y + u_v + u_vo) / (u_v * 2.0)));","else","gl_FragColor = texture2D(u_image1, vec2((coord.x + u_h) / u_h - 1.0, (-coord.y + u_v + u_vo) / (u_v * 2.0)));","} else {","gl_FragColor = texture2D(u_image0, vec2((coord.x + u_h) / (u_h * 2.0), (-coord.y + u_v + u_vo) / (u_v * 2.0)));","}","}","}"].join("\n"),V=["varying mediump vec2 v_texCoord;","uniform sampler2D u_sampler;","void main(void) {","gl_FragColor = texture2D(u_sampler, v_texCoord);","}"].join("");return{renderer:function($,bt,D){return new t($,bt,D)}}}(window,document)},2647:()=>{window.pannellum=function(pt,E,h){"use strict";function t(g,K){var e,j,V,$,ct,x,at,Pt,Y,lt,te,Dt,et=this,bt=!1,D=Date.now(),m=0,i=0,rt=-1,vt=0,H=0,R=new Array(10),gt=!1,yt=!1,Ht=!1,U={yaw:0,pitch:0,hfov:0},kt=!1,wt=!1,mt=0,M=0,dt={},X={},xt=[],Ft=!1,ae=!1,Xt=1e-6,de=!1,_e=!1,ne={hfov:100,minHfov:50,multiResMinHfov:!1,maxHfov:120,pitch:0,minPitch:h,maxPitch:h,yaw:0,minYaw:-180,maxYaw:180,roll:0,haov:360,vaov:180,vOffset:0,autoRotate:!1,autoRotateInactivityDelay:-1,autoRotateStopDelay:h,type:"equirectangular",northOffset:0,showFullscreenCtrl:!0,dynamic:!1,dynamicUpdate:!1,doubleClickZoom:!0,keyboardZoom:!0,mouseZoom:!0,showZoomCtrl:!0,autoLoad:!1,showControls:!0,orientationOnByDefault:!1,hotSpotDebug:!1,backgroundColor:[0,0,0],avoidShowingBackground:!1,animationTimingFunction:function Bt(o){return o<.5?2*o*o:(4-2*o)*o-1},draggable:!0,dragConfirm:!1,disableKeyboardCtrl:!1,crossOrigin:"anonymous",targetBlank:!1,touchPanSpeedCoeffFactor:1,capturedKeyNumbers:[16,17,27,37,38,39,40,61,65,68,83,87,107,109,173,187,189],friction:.15,strings:{loadButtonLabel:"Click to<br>Load<br>Panorama",loadingLabel:"Loading...",bylineLabel:"by %s",noPanoramaError:"No panorama image was specified.",fileAccessError:"The file %s could not be accessed.",malformedURLError:"There is something wrong with the panorama URL.",iOS8WebGLError:"Due to iOS 8's broken WebGL implementation, only progressive encoded JPEGs work for your device (this panorama uses standard encoding).",genericWebGLError:"Your browser does not have the necessary WebGL support to display this panorama.",textureSizeError:"This panorama is too big for your device! It's %spx wide, but your device only supports images up to %spx wide. Try another device. (If you're the author, try scaling down the image.)",unknownError:"Unknown error. Check developer console.",twoTouchActivate:"Use two fingers together to pan the panorama.",twoTouchXActivate:"Use two fingers together to pan the panorama horizontally.",twoTouchYActivate:"Use two fingers together to pan the panorama vertically.",ctrlZoomActivate:"Use %s + scroll to zoom the panorama."}};(g="string"==typeof g?E.getElementById(g):g).classList.add("pnlm-container"),g.tabIndex=0;var ot=E.createElement("div");ot.className="pnlm-ui",g.appendChild(ot);var Yt=E.createElement("div");Yt.className="pnlm-render-container",g.appendChild(Yt);var Zt=E.createElement("div");Zt.className="pnlm-dragfix",ot.appendChild(Zt);var Ot=E.createElement("span");Ot.className="pnlm-about-msg";var re=E.createElement("a");re.href="https://pannellum.org/",re.textContent="Pannellum",Ot.appendChild(re);var me=E.createElement("span");Ot.appendChild(me),ot.appendChild(Ot),Zt.addEventListener("contextmenu",function $t(o){var r=qt(o);Ot.style.left=r.x+"px",Ot.style.top=r.y+"px",clearTimeout($t.t1),clearTimeout($t.t2),Ot.style.display="block",Ot.style.opacity=1,$t.t1=setTimeout(function(){Ot.style.opacity=0},2e3),$t.t2=setTimeout(function(){Ot.style.display="none"},2500),o.preventDefault()});var L={},le=E.createElement("div");le.className="pnlm-sprite pnlm-hot-spot-debug-indicator",ot.appendChild(le),L.container=E.createElement("div"),L.container.className="pnlm-panorama-info",L.title=E.createElement("div"),L.title.className="pnlm-title-box",L.container.appendChild(L.title),L.author=E.createElement("div"),L.author.className="pnlm-author-box",L.container.appendChild(L.author),ot.appendChild(L.container),L.load={},L.load.box=E.createElement("div"),L.load.box.className="pnlm-load-box",L.load.boxp=E.createElement("p"),L.load.box.appendChild(L.load.boxp),L.load.lbox=E.createElement("div"),L.load.lbox.className="pnlm-lbox",L.load.lbox.innerHTML='<div class="pnlm-loading"></div>',L.load.box.appendChild(L.load.lbox),L.load.lbar=E.createElement("div"),L.load.lbar.className="pnlm-lbar",L.load.lbarFill=E.createElement("div"),L.load.lbarFill.className="pnlm-lbar-fill",L.load.lbar.appendChild(L.load.lbarFill),L.load.box.appendChild(L.load.lbar),L.load.msg=E.createElement("p"),L.load.msg.className="pnlm-lmsg",L.load.box.appendChild(L.load.msg),ot.appendChild(L.load.box),L.errorMsg=E.createElement("div"),L.errorMsg.className="pnlm-error-msg pnlm-info-box",ot.appendChild(L.errorMsg),L.interactionMsg=E.createElement("div"),L.interactionMsg.className="pnlm-interaction-msg pnlm-info-box",ot.appendChild(L.interactionMsg);var G={};G.container=E.createElement("div"),G.container.className="pnlm-controls-container",ot.appendChild(G.container),G.load=E.createElement("button"),G.load.className="pnlm-load-button",G.load.addEventListener("click",function(){q(),Ee()}),ot.appendChild(G.load),G.zoom=E.createElement("div"),G.zoom.className="pnlm-zoom-controls pnlm-controls",G.zoomIn=E.createElement("div"),G.zoomIn.className="pnlm-zoom-in pnlm-sprite pnlm-control",G.zoomIn.addEventListener("click",function St(){ct&&(zt(e.hfov-5),v())}),G.zoom.appendChild(G.zoomIn),G.zoomOut=E.createElement("div"),G.zoomOut.className="pnlm-zoom-out pnlm-sprite pnlm-control",G.zoomOut.addEventListener("click",function be(){ct&&(zt(e.hfov+5),v())}),G.zoom.appendChild(G.zoomOut),G.container.appendChild(G.zoom),G.fullscreen=E.createElement("div"),G.fullscreen.addEventListener("click",N),G.fullscreen.className="pnlm-fullscreen-toggle-button pnlm-sprite pnlm-fullscreen-toggle-button-inactive pnlm-controls pnlm-control",(E.fullscreenEnabled||E.mozFullScreenEnabled||E.webkitFullscreenEnabled||E.msFullscreenEnabled)&&G.container.appendChild(G.fullscreen),G.orientation=E.createElement("div"),G.orientation.addEventListener("click",function(o){wt?Ce():we()}),G.orientation.addEventListener("mousedown",function(o){o.stopPropagation()}),G.orientation.addEventListener("touchstart",function(o){o.stopPropagation()}),G.orientation.addEventListener("pointerdown",function(o){o.stopPropagation()}),G.orientation.className="pnlm-orientation-button pnlm-orientation-button-inactive pnlm-sprite pnlm-controls pnlm-control";var ee=!1;pt.DeviceOrientationEvent&&"https:"==location.protocol&&(navigator.userAgent.toLowerCase().indexOf("mobi")>=0||navigator.userAgent.indexOf("Mac")>=0&&navigator.maxTouchPoints&&navigator.maxTouchPoints>0)&&(G.container.appendChild(G.orientation),ee=!0);var ie=E.createElement("div");function pe(){var o=E.createElement("div");if(o.innerHTML="\x3c!--[if lte IE 9]><i></i><![endif]--\x3e",1!=o.getElementsByTagName("i").length){var r,u;if(Y=e.hfov,lt=e.pitch,"cubemap"==e.type){for(x=[],r=0;r<6;r++)x.push(new Image),x[r].crossOrigin=e.crossOrigin;L.load.lbox.style.display="block",L.load.lbar.style.display="none"}else if("multires"==e.type){var w=JSON.parse(JSON.stringify(e.multiRes));e.basePath&&e.multiRes.basePath&&!/^(?:[a-z]+:)?\/\//i.test(e.multiRes.basePath)?w.basePath=e.basePath+e.multiRes.basePath:e.multiRes.basePath?w.basePath=e.multiRes.basePath:e.basePath&&(w.basePath=e.basePath),x=w}else if(!0===e.dynamic)x=e.panorama;else{if(e.panorama===h)return void At(e.strings.noPanoramaError);x=new Image}if("cubemap"==e.type){var T=6,I=function(){0==--T&&Jt()},tt=function(B){var F=E.createElement("a");F.href=B.target.src,F.textContent=F.href,At(e.strings.fileAccessError.replace("%s",F.outerHTML))};for(r=0;r<x.length;r++)"null"==(u=e.cubeMap[r])?(console.log("Will use background instead of missing cubemap face "+r),I()):(e.basePath&&!se(u)&&(u=e.basePath+u),x[r].onload=I,x[r].onerror=tt,x[r].src=ge(u))}else if("multires"==e.type)Jt();else if(u="",e.basePath&&(u=e.basePath),!0!==e.dynamic){if(e.panorama instanceof Image||e.panorama instanceof ImageData||pt.ImageBitmap&&e.panorama instanceof ImageBitmap)return x=e.panorama,void Jt();u=se(e.panorama)?e.panorama:u+e.panorama,x.onload=function(){pt.URL.revokeObjectURL(this.src),Jt()},(Dt=new XMLHttpRequest).onloadend=function(){if(200!=Dt.status){var B=E.createElement("a");return B.href=u,B.textContent=B.href,void At(e.strings.fileAccessError.replace("%s",B.outerHTML))}(function fe(o,r){var u=new FileReader;u.addEventListener("loadend",function(){var w=u.result;if(navigator.userAgent.toLowerCase().match(/(iphone|ipod|ipad).* os 8_/)){var T=w.indexOf("\xff\xc2");(T<0||T>65536)&&At(e.strings.iOS8WebGLError)}var I=w.indexOf("<x:xmpmeta");if(I>-1&&!0!==e.ignoreGPanoXMP){var tt=w.substring(I,w.indexOf("</x:xmpmeta>")+12),B=function(W){var st;return tt.indexOf(W+'="')>=0?st=(st=tt.substring(tt.indexOf(W+'="')+W.length+2)).substring(0,st.indexOf('"')):tt.indexOf(W+">")>=0&&(st=(st=tt.substring(tt.indexOf(W+">")+W.length+1)).substring(0,st.indexOf("<"))),st!==h?Number(st):null},F={fullWidth:B("GPano:FullPanoWidthPixels"),croppedWidth:B("GPano:CroppedAreaImageWidthPixels"),fullHeight:B("GPano:FullPanoHeightPixels"),croppedHeight:B("GPano:CroppedAreaImageHeightPixels"),topPixels:B("GPano:CroppedAreaTopPixels"),heading:B("GPano:PoseHeadingDegrees"),horizonPitch:B("GPano:PosePitchDegrees"),horizonRoll:B("GPano:PoseRollDegrees"),pitch:B("GPano:InitialViewPitchDegrees"),yaw:B("GPano:InitialViewHeadingDegrees"),hfov:B("GPano:InitialHorizontalFOVDegrees")};null!==F.fullWidth&&null!==F.croppedWidth&&null!==F.fullHeight&&null!==F.croppedHeight&&null!==F.topPixels&&(xt.indexOf("haov")<0&&(e.haov=F.croppedWidth/F.fullWidth*360),xt.indexOf("vaov")<0&&(e.vaov=F.croppedHeight/F.fullHeight*180),xt.indexOf("vOffset")<0&&(e.vOffset=-180*((F.topPixels+F.croppedHeight/2)/F.fullHeight-.5)),null!==F.heading&&xt.indexOf("northOffset")<0&&(e.northOffset=F.heading,!1!==e.compass&&(e.compass=!0)),null!==F.horizonPitch&&null!==F.horizonRoll&&(xt.indexOf("horizonPitch")<0&&(e.horizonPitch=F.horizonPitch),xt.indexOf("horizonRoll")<0&&(e.horizonRoll=F.horizonRoll)),null!=F.pitch&&xt.indexOf("pitch")<0&&(e.pitch=F.pitch),null!=F.yaw&&xt.indexOf("yaw")<0&&(e.yaw=F.yaw),null!=F.hfov&&xt.indexOf("hfov")<0&&(e.hfov=F.hfov))}x.src=pt.URL.createObjectURL(o),x.onerror=function(){(function W(){return pt.fetch?pt.fetch(E.location.href).then(function(st){return st.headers.get("Content-Security-Policy")}):null})().then(function(st){st&&st.split(";").find(function(Rt){var jt=Rt.match(/img-src(.*)/);if(jt)return!jt[1].includes("blob")})&&(console.log("CSP blocks blobs; reverting to URL."),x.crossOrigin=e.crossOrigin,x.src=r)})}}),u.readAsBinaryString!==h?u.readAsBinaryString(o):u.readAsText(o)})(this.response,u),L.load.msg.innerHTML=""},Dt.onprogress=function(B){var W,st,Nt;B.lengthComputable?(L.load.lbarFill.style.width=B.loaded/B.total*100+"%",B.total>1e6?(W="MB",st=(B.loaded/1e6).toFixed(2),Nt=(B.total/1e6).toFixed(2)):B.total>1e3?(W="kB",st=(B.loaded/1e3).toFixed(1),Nt=(B.total/1e3).toFixed(1)):(W="B",st=B.loaded,Nt=B.total),L.load.msg.innerHTML=st+" / "+Nt+" "+W):(L.load.lbox.style.display="block",L.load.lbar.style.display="none")};try{Dt.open("GET",u,!0)}catch{At(e.strings.malformedURLError)}Dt.responseType="blob",Dt.setRequestHeader("Accept","image/*,*/*;q=0.9"),Dt.setRequestHeader("cache-control","no-cache"),Dt.withCredentials="use-credentials"===e.crossOrigin,Dt.send()}e.draggable&&ot.classList.add("pnlm-grab"),ot.classList.remove("pnlm-grabbing"),Ft=!0===e.dynamicUpdate,e.dynamic&&Ft&&(x=e.panorama,Jt())}else At()}function se(o){return new RegExp("^(?:[a-z]+:)?//","i").test(o)||"/"==o[0]||"blob:"==o.slice(0,5)}function Jt(){j||(j=new libpannellum.renderer(Yt)),Ht||(Ht=!0,Zt.addEventListener("mousedown",s,!1),E.addEventListener("mousemove",A,!1),E.addEventListener("mouseup",P,!1),e.mouseZoom&&(ot.addEventListener("mousewheel",Kt,!1),ot.addEventListener("DOMMouseScroll",Kt,!1)),e.doubleClickZoom&&Zt.addEventListener("dblclick",C,!1),g.addEventListener("mozfullscreenchange",It,!1),g.addEventListener("webkitfullscreenchange",It,!1),g.addEventListener("msfullscreenchange",It,!1),g.addEventListener("fullscreenchange",It,!1),"function"==typeof ResizeObserver?(te=new ResizeObserver(nt)).observe(g):(pt.addEventListener("resize",nt,!1),pt.addEventListener("orientationchange",nt,!1)),e.disableKeyboardCtrl||(g.addEventListener("keydown",Vt,!1),g.addEventListener("keyup",ut,!1),g.addEventListener("blur",ht,!1)),E.addEventListener("mouseleave",P,!1),""===E.documentElement.style.pointerAction&&""===E.documentElement.style.touchAction?(Zt.addEventListener("pointerdown",it,!1),Zt.addEventListener("pointermove",J,!1),Zt.addEventListener("pointerup",_t,!1),Zt.addEventListener("pointerleave",_t,!1)):(Zt.addEventListener("touchstart",O,!1),Zt.addEventListener("touchmove",y,!1),Zt.addEventListener("touchend",k,!1)),pt.navigator.pointerEnabled&&(g.style.touchAction="none")),function l(){try{var o={};e.horizonPitch!==h&&(o.horizonPitch=e.horizonPitch*Math.PI/180),e.horizonRoll!==h&&(o.horizonRoll=e.horizonRoll*Math.PI/180),e.backgroundColor!==h&&(o.backgroundColor=e.backgroundColor),j.init(x,e.type,e.haov*Math.PI/180,e.vaov*Math.PI/180,e.vOffset*Math.PI/180,n,o)}catch(r){if(!0!==e.dynamic&&(x=h),"webgl error"==r.type||"no webgl"==r.type)At();else{if("webgl size error"!=r.type)throw At(e.strings.unknownError),r;At(e.strings.textureSizeError.replace("%s",r.width).replace("%s",r.maxWidth))}}}(),zt(e.hfov),setTimeout(function(){},500)}function At(o){o===h&&(o=e.strings.genericWebGLError),L.errorMsg.innerHTML="<p>"+o+"</p>",G.load.style.display="none",L.load.box.style.display="none",L.errorMsg.style.display="table",yt=!0,ct=h,Yt.style.display="none",Wt("error",o)}function ue(o){L.interactionMsg.style.opacity=1,L.interactionMsg.innerHTML="<p>"+o+"</p>",L.interactionMsg.style.display="table",Wt("messageshown"),clearTimeout(L.interactionMsg.timeout),L.interactionMsg.removeEventListener("transitionend",Qt),L.interactionMsg.timeout=setTimeout(function(){L.interactionMsg.style.opacity=0,L.interactionMsg.addEventListener("transitionend",Qt)},2e3)}function Qt(){L.interactionMsg.style.opacity=0,L.interactionMsg.style.display="none",Wt("messagecleared")}function qt(o){var r=g.getBoundingClientRect(),u={};return u.x=(o.clientX||o.pageX)-r.left,u.y=(o.clientY||o.pageY)-r.top,u}function s(o){if(o.preventDefault(),g.focus(),ct&&e.draggable&&!e.draggingHotSpot){var r=qt(o);if(e.hotSpotDebug){var u=f(o);console.log("Pitch: "+u[0]+", Yaw: "+u[1]+", Center Pitch: "+e.pitch+", Center Yaw: "+e.yaw+", HFOV: "+e.hfov)}ve(),Ce(),e.roll=0,U.hfov=0,bt=!0,D=Date.now(),m=r.x,i=r.y,vt=e.yaw,H=e.pitch,ot.classList.add("pnlm-grabbing"),ot.classList.remove("pnlm-grab"),Wt("mousedown",o),v()}}function C(o){if(e.minHfov===e.hfov)et.setHfov(Y,1e3);else{var r=f(o);et.lookAt(r[0],r[1],e.minHfov,1e3)}}function f(o){var r=qt(o),u=j.getCanvas(),w=u.clientWidth,T=u.clientHeight,I=r.x/w*2-1,tt=(1-r.y/T*2)*T/w,B=1/Math.tan(e.hfov*Math.PI/360),F=Math.sin(e.pitch*Math.PI/180),W=Math.cos(e.pitch*Math.PI/180),st=B*W-tt*F,Nt=Math.sqrt(I*I+st*st),Rt=180*Math.atan((tt*W+B*F)/Nt)/Math.PI,jt=180*Math.atan2(I/Nt,st/Nt)/Math.PI+e.yaw;return jt<-180&&(jt+=360),jt>180&&(jt-=360),[Rt,jt]}function A(o){if($)a($,o);else if(bt&&ct){D=Date.now();var r=j.getCanvas(),u=r.clientWidth,w=r.clientHeight,T=qt(o),I=180*(Math.atan(m/u*2-1)-Math.atan(T.x/u*2-1))/Math.PI*e.hfov/90+vt;U.yaw=(I-e.yaw)%360*.2,e.yaw=I;var tt=2*Math.atan(Math.tan(e.hfov/360*Math.PI)*w/u)*180/Math.PI,B=180*(Math.atan(T.y/w*2-1)-Math.atan(i/w*2-1))/Math.PI*tt/90+H;U.pitch=.2*(B-e.pitch),e.pitch=B}}function P(o){$&&$.dragHandlerFunc&&$.dragHandlerFunc(o,$.dragHandlerArgs),$=null,bt&&(bt=!1,Date.now()-D>15&&(U.pitch=U.yaw=0),ot.classList.add("pnlm-grab"),ot.classList.remove("pnlm-grabbing"),D=Date.now(),Wt("mouseup",o))}function O(o){if(ct&&e.draggable&&!$){ve(),Ce(),e.roll=0,U.hfov=0;var r=qt(o.targetTouches[0]);if(m=r.x,i=r.y,2==o.targetTouches.length){var u=qt(o.targetTouches[1]);m+=.5*(u.x-r.x),i+=.5*(u.y-r.y),rt=Math.sqrt((r.x-u.x)*(r.x-u.x)+(r.y-u.y)*(r.y-u.y))}bt=!0,D=Date.now(),vt=e.yaw,H=e.pitch,Wt("touchstart",o),v()}}function y(o){if(e.draggable&&(e.dragConfirm||o.preventDefault(),ct&&(D=Date.now()),bt&&ct)){var r=qt(o.targetTouches[0]),u=r.x,w=r.y;if(2==o.targetTouches.length&&-1!=rt){var T=qt(o.targetTouches[1]);u+=.5*(T.x-r.x),w+=.5*(T.y-r.y);var I=Math.sqrt((r.x-T.x)*(r.x-T.x)+(r.y-T.y)*(r.y-T.y));zt(e.hfov+.1*(rt-I)),rt=I}var tt=e.hfov/360*e.touchPanSpeedCoeffFactor;if(gt||"both"!=e.dragConfirm&&"yaw"!=e.dragConfirm||2==o.targetTouches.length){var B=(m-u)*tt+vt;U.yaw=(B-e.yaw)%360*.2,e.yaw=B}else m!=u&&ue("yaw"==e.dragConfirm?e.strings.twoTouchXActivate:e.strings.twoTouchActivate);if(gt||"both"!=e.dragConfirm&&"pitch"!=e.dragConfirm||2==o.targetTouches.length){var F=(w-i)*tt+H;U.pitch=.2*(F-e.pitch),e.pitch=F}else i!=w&&ue("pitch"==e.dragConfirm?e.strings.twoTouchYActivate:e.strings.twoTouchActivate);("yaw"==e.dragConfirm||"pitch"==e.dragConfirm||"both"==e.dragConfirm)&&2==o.targetTouches.length&&(Qt(),o.preventDefault())}}function k(){$=null,bt=!1,Date.now()-D>150&&(U.pitch=U.yaw=0),rt=-1,D=Date.now(),Wt("touchend",event)}ie.className="pnlm-compass pnlm-controls pnlm-control",ot.appendChild(ie),Q(K.firstScene?K.firstScene:K.default&&K.default.firstScene?K.default.firstScene:null),q(!0);var Z=[],z=[];function it(o){if("touch"==o.pointerType){if(!ct||!e.draggable)return;Z.push(o.pointerId),z.push({clientX:o.clientX,clientY:o.clientY}),o.targetTouches=z,O(o),o.preventDefault()}}function J(o){if("touch"==o.pointerType){if($)return void a($,o);if(!e.draggable)return;for(var r=0;r<Z.length;r++)if(o.pointerId==Z[r])return z[r].clientX=o.clientX,z[r].clientY=o.clientY,o.targetTouches=z,y(o),void o.preventDefault()}}function _t(o){if($&&$.dragHandlerFunc&&$.dragHandlerFunc(o,$.dragHandlerArgs),$=null,"touch"==o.pointerType){for(var r=!1,u=0;u<Z.length;u++)o.pointerId==Z[u]&&(Z[u]=h),Z[u]&&(r=!0);r||(Z=[],z=[],k()),o.preventDefault()}}function Kt(o){if(ct&&("fullscreenonly"!=e.mouseZoom||gt)){if(!gt&&"ctrl"==e.mouseZoom&&!o.ctrlKey){var r=-1!=navigator.platform.indexOf("Mac")?"control":"ctrl";return void ue(e.strings.ctrlZoomActivate.replace("%s",'<kbd class="pnlm-outline">'+r+"</kbd>"))}Qt(),o.preventDefault(),ve(),D=Date.now(),o.wheelDeltaY?(zt(e.hfov-.05*o.wheelDeltaY),U.hfov=o.wheelDelta<0?1:-1):o.wheelDelta?(zt(e.hfov-.05*o.wheelDelta),U.hfov=o.wheelDelta<0?1:-1):o.detail&&(zt(e.hfov+1.5*o.detail),U.hfov=o.detail>0?1:-1),v()}}function Vt(o){ve(),D=Date.now(),Ce(),e.roll=0;var r=o.which||o.keycode;e.capturedKeyNumbers.indexOf(r)<0||!gt&&(16==r||17==r)&&"ctrl"==e.mouseZoom||(o.preventDefault(),27==r?gt&&N():Ct(r,!0))}function ht(){for(var o=0;o<10;o++)R[o]=!1}function ut(o){var r=o.which||o.keycode;e.capturedKeyNumbers.indexOf(r)<0||(o.preventDefault(),Ct(r,!1))}function Ct(o,r){var u=!1;switch(o){case 109:case 189:case 17:case 173:R[0]!=r&&(u=!0),R[0]=r;break;case 107:case 187:case 16:case 61:R[1]!=r&&(u=!0),R[1]=r;break;case 38:R[2]!=r&&(u=!0),R[2]=r;break;case 87:R[6]!=r&&(u=!0),R[6]=r;break;case 40:R[3]!=r&&(u=!0),R[3]=r;break;case 83:R[7]!=r&&(u=!0),R[7]=r;break;case 37:R[4]!=r&&(u=!0),R[4]=r;break;case 65:R[8]!=r&&(u=!0),R[8]=r;break;case 39:R[5]!=r&&(u=!0),R[5]=r;break;case 68:R[9]!=r&&(u=!0),R[9]=r}u&&r&&(at=typeof performance<"u"&&performance.now()?performance.now():Date.now(),v())}function Et(o){var r=dt[o],u=Math.min(1,Math.max((Date.now()-r.startTime)/1e3/(r.duration/1e3),0)),w=r.startPosition+e.animationTimingFunction(u)*(r.endPosition-r.startPosition);(r.endPosition>r.startPosition&&w>=r.endPosition||r.endPosition<r.startPosition&&w<=r.endPosition||r.endPosition===r.startPosition)&&(w=r.endPosition,U[o]=0,delete dt[o]),e[o]=w}function nt(){It("resize")}function v(){kt||(kt=!0,Lt())}function Lt(){if(!_e)if(function Ut(){var o;if(ct){var r=j.getCanvas();!1!==e.autoRotate&&(e.yaw>360?e.yaw-=360:e.yaw<-360&&(e.yaw+=360)),o=e.yaw;var u=0;if(e.avoidShowingBackground){var T=e.hfov/2,I=180*Math.atan2(Math.tan(T/180*Math.PI),r.width/r.height)/Math.PI;e.vaov>e.haov?Math.min(Math.cos((e.pitch-T)/180*Math.PI),Math.cos((e.pitch+T)/180*Math.PI)):u=T*(1-Math.min(Math.cos((e.pitch-I)/180*Math.PI),Math.cos((e.pitch+I)/180*Math.PI)))}var B=e.maxYaw-e.minYaw,F=-180,W=180;B<360&&(F=e.minYaw+e.hfov/2+u,W=e.maxYaw-e.hfov/2-u,B<e.hfov&&(F=W=(F+W)/2),e.yaw=Math.max(F,Math.min(W,e.yaw))),!1===e.autoRotate&&(e.yaw>360?e.yaw-=360:e.yaw<-360&&(e.yaw+=360)),!1!==e.autoRotate&&o!=e.yaw&&at!==h&&(e.autoRotate*=-1);var st=2*Math.atan(Math.tan(e.hfov/180*Math.PI*.5)/(r.width/r.height))/Math.PI*180,Nt=e.minPitch+st/2,Rt=e.maxPitch-st/2;e.maxPitch-e.minPitch<st&&(Nt=Rt=(Nt+Rt)/2),isNaN(Nt)&&(Nt=-90),isNaN(Rt)&&(Rt=90),e.pitch=Math.max(Nt,Math.min(Rt,e.pitch)),j.render(e.pitch*Math.PI/180,e.yaw*Math.PI/180,e.hfov*Math.PI/180,{roll:e.roll*Math.PI/180,dynamic:Ft}),ae&&(ae=Ft=!1),ft(),e.compass&&(ie.style.transform="rotate("+(-e.yaw-e.northOffset)+"deg)",ie.style.webkitTransform="rotate("+(-e.yaw-e.northOffset)+"deg)")}}(),Pt&&clearTimeout(Pt),bt||!0===wt)requestAnimationFrame(Lt);else if(R[0]||R[1]||R[2]||R[3]||R[4]||R[5]||R[6]||R[7]||R[8]||R[9]||e.autoRotate||dt.pitch||dt.yaw||dt.hfov||Math.abs(U.yaw)>.01||Math.abs(U.pitch)>.01||Math.abs(U.hfov)>.01)(function Tt(){if(ct){var T,o=!1,r=e.pitch,u=e.yaw,w=e.hfov;T=typeof performance<"u"&&performance.now()?performance.now():Date.now(),at===h&&(at=T);var I=(T-at)*e.hfov/1200;if(I=Math.min(I,10),R[0]&&!0===e.keyboardZoom&&(zt(e.hfov+(.8*U.hfov+.4)*I),o=!0),R[1]&&!0===e.keyboardZoom&&(zt(e.hfov+(.8*U.hfov-.2)*I),o=!0),(R[2]||R[6])&&(e.pitch+=(.8*U.pitch+.2)*I,o=!0),(R[3]||R[7])&&(e.pitch+=(.8*U.pitch-.2)*I,o=!0),(R[4]||R[8])&&(e.yaw+=(.8*U.yaw-.2)*I,o=!0),(R[5]||R[9])&&(e.yaw+=(.8*U.yaw+.2)*I,o=!0),o&&(D=Date.now()),e.autoRotate){if(T-at>.001){var tt=(T-at)/1e3,B=(U.yaw/tt*I-.2*e.autoRotate)*tt;B=(-e.autoRotate>0?1:-1)*Math.min(Math.abs(e.autoRotate*tt),Math.abs(B)),e.yaw+=B}e.autoRotateStopDelay&&(e.autoRotateStopDelay-=T-at,e.autoRotateStopDelay<=0&&(e.autoRotateStopDelay=!1,M=e.autoRotate,e.autoRotate=0))}if(dt.pitch&&(Et("pitch"),r=e.pitch),dt.yaw&&(Et("yaw"),u=e.yaw),dt.hfov&&(Et("hfov"),w=e.hfov),I>0&&!e.autoRotate){var F=1-e.friction;!R[4]&&!R[5]&&!R[8]&&!R[9]&&!dt.yaw&&(e.yaw+=U.yaw*I*F),!R[2]&&!R[3]&&!R[6]&&!R[7]&&!dt.pitch&&(e.pitch+=U.pitch*I*F),!R[0]&&!R[1]&&!dt.hfov&&(e.hfov>90&&(F*=1-(e.hfov-90)/90),zt(e.hfov+U.hfov*I*F))}if(at=T,I>0){U.yaw=.8*U.yaw+(e.yaw-u)/I*.2,U.pitch=.8*U.pitch+(e.pitch-r)/I*.2,U.hfov=.8*U.hfov+(e.hfov-w)/I*.2;var W=e.autoRotate?Math.abs(e.autoRotate):5;U.yaw=Math.min(W,Math.max(U.yaw,-W)),U.pitch=Math.min(W,Math.max(U.pitch,-W)),U.hfov=Math.min(W,Math.max(U.hfov,-W))}R[0]&&R[1]&&(U.hfov=0),(R[2]||R[6])&&(R[3]||R[7])&&(U.pitch=0),(R[4]||R[8])&&(R[5]||R[9])&&(U.yaw=0)}})(),e.autoRotateInactivityDelay>=0&&M&&Date.now()-D>e.autoRotateInactivityDelay&&!e.autoRotate&&(e.autoRotate=M,et.lookAt(lt,h,Y,3e3)),requestAnimationFrame(Lt);else if(j&&(j.isLoading()||!0===e.dynamic&&Ft))requestAnimationFrame(Lt);else{et.getPitch&&et.getYaw&&et.getHfov&&Wt("animatefinished",{pitch:et.getPitch(),yaw:et.getYaw(),hfov:et.getHfov()}),kt=!1,at=h;var o=e.autoRotateInactivityDelay-(Date.now()-D);o>0?Pt=setTimeout(function(){e.autoRotate=M,et.lookAt(lt,h,Y,3e3),v()},o):e.autoRotateInactivityDelay>=0&&M&&(e.autoRotate=M,et.lookAt(lt,h,Y,3e3),v())}}function Mt(o,r,u,w){this.w=o,this.x=r,this.y=u,this.z=w}function b(o){var r=function c(o,r,u){var w=function Gt(o,r,u){var w=[r?r*Math.PI/180/2:0,u?u*Math.PI/180/2:0,o?o*Math.PI/180/2:0],T=[Math.cos(w[0]),Math.cos(w[1]),Math.cos(w[2])],I=[Math.sin(w[0]),Math.sin(w[1]),Math.sin(w[2])];return new Mt(T[0]*T[1]*T[2]-I[0]*I[1]*I[2],I[0]*T[1]*T[2]-T[0]*I[1]*I[2],T[0]*I[1]*T[2]+I[0]*T[1]*I[2],T[0]*T[1]*I[2]+I[0]*I[1]*T[2])}(o,r,u);w=w.multiply(new Mt(Math.sqrt(.5),-Math.sqrt(.5),0,0));var T=pt.orientation?-pt.orientation*Math.PI/180/2:0;return w.multiply(new Mt(Math.cos(T),0,-Math.sin(T),0))}(o.alpha,o.beta,o.gamma).toEulerAngles();"number"==typeof wt&&wt<10?wt+=1:10===wt?(mt=r[2]/Math.PI*180+e.yaw,wt=!0,requestAnimationFrame(Lt)):(e.pitch=r[0]/Math.PI*180,e.roll=-r[1]/Math.PI*180,e.yaw=-r[2]/Math.PI*180+mt)}function n(){if(e.sceneFadeDuration&&j.fadeImg!==h){j.fadeImg.style.opacity=0;var o=j.fadeImg;delete j.fadeImg,setTimeout(function(){Yt.removeChild(o),Wt("scenechangefadedone")},e.sceneFadeDuration)}ie.style.display=e.compass?"inline":"none",function _(){de||(e.hotSpots?(e.hotSpots=e.hotSpots.sort(function(o,r){return o.pitch<r.pitch}),e.hotSpots.forEach(d)):e.hotSpots=[],de=!0,ft())}(),L.load.box.style.display="none",V!==h&&(Yt.removeChild(V),V=h),ct=!0,!0!==e.dynamic&&(x=h),v(),Wt("load")}function d(o){o.pitch=Number(o.pitch)||0,o.yaw=Number(o.yaw)||0;var r=E.createElement("div");r.tabIndex=-1,r.className="pnlm-hotspot-base",r.className+=o.cssClass?" "+o.cssClass:" pnlm-hotspot pnlm-sprite pnlm-"+he(o.type);var w,u=E.createElement("span");if(o.text&&(u.innerHTML=he(o.text)),o.video){var T=E.createElement("video"),I=o.video;e.basePath&&!se(I)&&(I=e.basePath+I),T.src=ge(I),T.controls=!0,T.style.width=o.width+"px",ot.appendChild(r),u.appendChild(T)}else if(o.image){var tt=o.image;e.basePath&&!se(tt)&&(tt=e.basePath+tt),(w=E.createElement("a")).href=ge(o.URL?o.URL:tt,!0),e.targetBlank&&(w.target="_blank",w.rel="noopener"),u.appendChild(w);var B=E.createElement("img");B.src=ge(tt),B.style.width=o.width+"px",B.style.paddingTop="5px",ot.appendChild(r),w.appendChild(B),u.style.maxWidth="initial"}else if(o.URL){if((w=E.createElement("a")).href=ge(o.URL,!0),o.attributes)for(var F in o.attributes)w.setAttribute(F,o.attributes[F]);else e.targetBlank&&(w.target="_blank",w.rel="noopener");ot.appendChild(w),r.className+=" pnlm-pointer",u.className+=" pnlm-pointer",w.appendChild(r)}else o.sceneId&&(r.onclick=r.ontouchend=function(){return r.clicked||(r.clicked=!0,xe(o.sceneId,o.targetPitch,o.targetYaw,o.targetHfov)),!1},r.className+=" pnlm-pointer",u.className+=" pnlm-pointer"),ot.appendChild(r);o.createTooltipFunc?o.createTooltipFunc(r,o.createTooltipArgs):(o.text||o.video||o.image)&&(r.classList.add("pnlm-tooltip"),r.appendChild(u),u.style.width=u.scrollWidth-20+"px",u.style.marginLeft=-(u.scrollWidth-r.offsetWidth)/2+"px",u.style.marginTop=-u.scrollHeight-12+"px"),o.clickHandlerFunc&&(r.addEventListener("click",function(W){o.clickHandlerFunc(W,o.clickHandlerArgs)},"false"),r.addEventListener(""===E.documentElement.style.pointerAction&&""===E.documentElement.style.touchAction?"pointerup":"touchend",function(W){o.clickHandlerFunc(W,o.clickHandlerArgs)},!1),r.className+=" pnlm-pointer",u.className+=" pnlm-pointer"),o.draggable&&(r.addEventListener("mousedown",function(W){o.dragHandlerFunc&&o.dragHandlerFunc(W,o.dragHandlerArgs),$=o}),""===E.documentElement.style.pointerAction&&""===E.documentElement.style.touchAction&&r.addEventListener("pointerdown",function(W){o.dragHandlerFunc&&o.dragHandlerFunc(W,o.dragHandlerArgs),$=o}),r.addEventListener("touchmove",function(W){a(o,W.targetTouches[0])}),r.addEventListener("touchend",function(W){o.dragHandlerFunc&&o.dragHandlerFunc(W,o.dragHandlerArgs),$=null})),o.div=r}function a(o,r){var u=f(r);o.pitch=u[0],o.yaw=u[1],S(o)}function S(o){var r=Math.sin(o.pitch*Math.PI/180),u=Math.cos(o.pitch*Math.PI/180),w=Math.sin(e.pitch*Math.PI/180),T=Math.cos(e.pitch*Math.PI/180),I=Math.cos((-o.yaw+e.yaw)*Math.PI/180),tt=r*w+u*I*T;if(o.yaw<=90&&o.yaw>-90&&tt<=0||(o.yaw>90||o.yaw<=-90)&&tt<=0)o.div.style.visibility="hidden";else{var B=Math.sin((-o.yaw+e.yaw)*Math.PI/180),F=Math.tan(e.hfov*Math.PI/360);o.div.style.visibility="visible";var W=j.getCanvas(),st=W.clientWidth,Nt=W.clientHeight,Rt=[-st/F*B*u/tt/2,-st/F*(r*T-u*I*w)/tt/2],jt=Math.sin(e.roll*Math.PI/180),ye=Math.cos(e.roll*Math.PI/180);(Rt=[Rt[0]*ye-Rt[1]*jt,Rt[0]*jt+Rt[1]*ye])[0]+=(st-o.div.offsetWidth)/2,Rt[1]+=(Nt-o.div.offsetHeight)/2;var Me="translate("+Rt[0]+"px, "+Rt[1]+"px) translateZ(9999px) rotate("+e.roll+"deg)";o.scale&&(Me+=" scale("+Y/e.hfov/tt+")"),o.div.style.webkitTransform=Me,o.div.style.MozTransform=Me,o.div.style.transform=Me}}function ft(){e.hotSpots.forEach(S)}function Q(o){e={};var r,u,w=["haov","vaov","vOffset","northOffset","horizonPitch","horizonRoll"];for(r in xt=[],ne)ne.hasOwnProperty(r)&&(e[r]=ne[r]);for(r in K.default)if(K.default.hasOwnProperty(r))if("strings"==r)for(u in K.default.strings)K.default.strings.hasOwnProperty(u)&&(e.strings[u]=he(K.default.strings[u]));else e[r]=K.default[r],w.indexOf(r)>=0&&xt.push(r);if(null!==o&&""!==o&&K.scenes&&K.scenes[o]){var T=K.scenes[o];for(r in T)if(T.hasOwnProperty(r))if("strings"==r)for(u in T.strings)T.strings.hasOwnProperty(u)&&(e.strings[u]=he(T.strings[u]));else e[r]=T[r],w.indexOf(r)>=0&&xt.push(r);e.scene=o}for(r in K)if(K.hasOwnProperty(r))if("strings"==r)for(u in K.strings)K.strings.hasOwnProperty(u)&&(e.strings[u]=he(K.strings[u]));else e[r]=K[r],w.indexOf(r)>=0&&xt.push(r)}function q(o){if((o=o||!1)&&"preview"in e){var r=e.preview;e.basePath&&!se(r)&&(r=e.basePath+r),(V=E.createElement("div")).className="pnlm-preview-img",V.style.backgroundImage="url('"+function Le(o){return ge(o).replace(/"/g,"%22").replace(/'/g,"%27")}(r)+"')",Yt.appendChild(V)}var u=e.title,w=e.author;for(var T in o&&("previewTitle"in e&&(e.title=e.previewTitle),"previewAuthor"in e&&(e.author=e.previewAuthor)),e.hasOwnProperty("title")||(L.title.innerHTML=""),e.hasOwnProperty("author")||(L.author.innerHTML=""),!e.hasOwnProperty("title")&&!e.hasOwnProperty("author")&&(L.container.style.display="none"),e.targetBlank&&(re.rel="noopener",re.target="_blank"),G.load.innerHTML="<div><p>"+e.strings.loadButtonLabel+"</p></div>",L.load.boxp.innerHTML=e.strings.loadingLabel,e)if(e.hasOwnProperty(T))switch(T){case"title":L.title.innerHTML=he(e[T]),L.container.style.display="inline";break;case"author":var I=he(e[T]);if(e.authorURL){var tt=E.createElement("a");tt.href=ge(e.authorURL,!0),e.targetBlank&&(tt.target="_blank",tt.rel="noopener"),tt.innerHTML=he(e[T]),I=tt.outerHTML}L.author.innerHTML=e.strings.bylineLabel.replace("%s",I),L.container.style.display="inline";break;case"hfov":zt(Number(e[T]));break;case"autoLoad":!0===e[T]&&j===h&&(L.load.box.style.display="inline",G.load.style.display="none",pe());break;case"showZoomCtrl":G.zoom.style.display=e[T]&&0!=e.showControls?"block":"none";break;case"showFullscreenCtrl":G.fullscreen.style.display=e[T]&&0!=e.showControls&&("fullscreen"in E||"mozFullScreen"in E||"webkitIsFullScreen"in E||"msFullscreenElement"in E)?"block":"none";break;case"hotSpotDebug":le.style.display=e[T]?"block":"none";break;case"showControls":e[T]||(G.orientation.style.display="none",G.zoom.style.display="none",G.fullscreen.style.display="none");break;case"orientationOnByDefault":e[T]&&we()}o&&(u?e.title=u:delete e.title,w?e.author=w:delete e.author)}function N(){if(ct&&!yt)if(gt)E.exitFullscreen?E.exitFullscreen():E.mozCancelFullScreen?E.mozCancelFullScreen():E.webkitCancelFullScreen?E.webkitCancelFullScreen():E.msExitFullscreen&&E.msExitFullscreen();else try{g.requestFullscreen?g.requestFullscreen():g.mozRequestFullScreen?g.mozRequestFullScreen():g.msRequestFullscreen?g.msRequestFullscreen():g.webkitRequestFullScreen()}catch{}}function It(o){E.fullscreenElement||E.fullscreen||E.mozFullScreen||E.webkitIsFullScreen||E.msFullscreenElement?(G.fullscreen.classList.add("pnlm-fullscreen-toggle-button-active"),gt=!0):(G.fullscreen.classList.remove("pnlm-fullscreen-toggle-button-active"),gt=!1),"resize"!==o&&Wt("fullscreenchange",gt),j.resize(),zt(e.hfov),v()}function Te(o){var r=e.minHfov;if("multires"==e.type&&j&&!e.multiResMinHfov&&(r=Math.min(r,j.getCanvas().width/(e.multiRes.cubeResolution/90*.9))),r>e.maxHfov)return console.log("HFOV bounds do not make sense (minHfov > maxHfov)."),e.hfov;var u=e.hfov;if(u=o<r?r:o>e.maxHfov?e.maxHfov:o,e.avoidShowingBackground&&j&&!isNaN(e.maxPitch-e.minPitch)){var w=j.getCanvas();u=Math.min(u,360*Math.atan(Math.tan((e.maxPitch-e.minPitch)/360*Math.PI)/w.height*w.width)/Math.PI)}return u}function zt(o){e.hfov=Te(o),Wt("zoomchange",e.hfov)}function ve(){dt={},M=e.autoRotate?e.autoRotate:M,e.autoRotate=!1}function Ee(){(function ce(){yt&&(L.load.box.style.display="none",L.errorMsg.style.display="none",yt=!1,Yt.style.display="block",Wt("errorcleared"))})(),ct=!1,Qt(),G.load.style.display="none",L.load.box.style.display="inline",pe()}function xe(o,r,u,w,T){var I,tt,B,F;if(ct||(T=!0),ct=!1,dt={},e.sceneFadeDuration&&!T){var W=j.render(e.pitch*Math.PI/180,e.yaw*Math.PI/180,e.hfov*Math.PI/180,{returnImage:"ImageBitmap"});if(W!==h)return(I=W.then?E.createElement("canvas"):new Image).className="pnlm-fade-img",I.style.transition="opacity "+e.sceneFadeDuration/1e3+"s",I.style.width="100%",I.style.height="100%",W.then?W.then(function(st){I.width=st.width,I.height=st.height,I.getContext("2d").drawImage(st,0,0),xe(o,r,u,w,!0)}):(I.onload=function(){xe(o,r,u,w,!0)},I.src=W),Yt.appendChild(I),void(j.fadeImg=I)}tt="same"===r?e.pitch:r,B="same"===u?e.yaw:"sameAzimuth"===u?e.yaw+(e.northOffset||0)-(K.scenes[o].northOffset||0):u,F="same"===w?e.hfov:w,function p(){var o=e.hotSpots;if(de=!1,delete e.hotSpots,o)for(var r=0;r<o.length;r++){var u=o[r].div;if(u){for(;u.parentNode&&u.parentNode!=ot;)u=u.parentNode;ot.removeChild(u)}delete o[r].div}}(),Q(o),U.yaw=U.pitch=U.hfov=0,q(),tt!==h&&(e.pitch=tt),B!==h&&(e.yaw=B),F!==h&&(e.hfov=F),Wt("scenechange",o),Ee()}function Ce(){pt.removeEventListener("deviceorientation",b),G.orientation.classList.remove("pnlm-orientation-button-active"),wt=!1}function we(){ee&&(typeof DeviceMotionEvent<"u"&&"function"==typeof DeviceMotionEvent.requestPermission?DeviceOrientationEvent.requestPermission().then(function(o){"granted"==o&&(wt=1,pt.addEventListener("deviceorientation",b),G.orientation.classList.add("pnlm-orientation-button-active"))}):(wt=1,pt.addEventListener("deviceorientation",b),G.orientation.classList.add("pnlm-orientation-button-active")))}function he(o){return K.escapeHTML?String(o).split(/&/g).join("&amp;").split('"').join("&quot;").split("'").join("&#39;").split("<").join("&lt;").split(">").join("&gt;").split("/").join("&#x2f;").split("\n").join("<br>"):String(o).split("\n").join("<br>")}function ge(o,r){try{var u=decodeURIComponent(function Ae(o){return o.replace(/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/gi,function(r,u){return"colon"===(u=u.toLowerCase())?":":"#"===u.charAt(0)?"x"===u.charAt(1)?String.fromCharCode(parseInt(u.substring(2),16)):String.fromCharCode(+u.substring(1)):""})}(o)).replace(/[^\w:]/g,"").toLowerCase()}catch{return"about:blank"}return 0===u.indexOf("javascript:")||0===u.indexOf("vbscript:")?(console.log("Script URL removed."),"about:blank"):r&&0===u.indexOf("data:")?(console.log("Data URI removed from link."),"about:blank"):o}function Wt(o){if(o in X)for(var r=X[o].length;r>0;r--)X[o][X[o].length-r].apply(null,[].slice.call(arguments,1))}Mt.prototype.multiply=function(o){return new Mt(this.w*o.w-this.x*o.x-this.y*o.y-this.z*o.z,this.x*o.w+this.w*o.x+this.y*o.z-this.z*o.y,this.y*o.w+this.w*o.y+this.z*o.x-this.x*o.z,this.z*o.w+this.w*o.z+this.x*o.y-this.y*o.x)},Mt.prototype.toEulerAngles=function(){return[Math.atan2(2*(this.w*this.x+this.y*this.z),1-2*(this.x*this.x+this.y*this.y)),Math.asin(2*(this.w*this.y-this.z*this.x)),Math.atan2(2*(this.w*this.z+this.x*this.y),1-2*(this.y*this.y+this.z*this.z))]},this.isLoaded=function(){return Boolean(ct)},this.getPitch=function(){return e.pitch},this.setPitch=function(o,r,u,w){return D=Date.now(),Math.abs(o-e.pitch)<=Xt?("function"==typeof u&&u(w),this):((r=r==h?1e3:Number(r))?(dt.pitch={startTime:Date.now(),startPosition:e.pitch,endPosition:o,duration:r},"function"==typeof u&&setTimeout(function(){u(w)},r)):e.pitch=o,v(),this)},this.getPitchBounds=function(){return[e.minPitch,e.maxPitch]},this.setPitchBounds=function(o){return e.minPitch=Math.max(-90,Math.min(o[0],90)),e.maxPitch=Math.max(-90,Math.min(o[1],90)),this},this.getYaw=function(){return(e.yaw+540)%360-180},this.setYaw=function(o,r,u,w){return D=Date.now(),Math.abs(o-e.yaw)<=Xt?("function"==typeof u&&u(w),this):(o=(o+180)%360-180,(r=r==h?1e3:Number(r))?(e.yaw-o>180?o+=360:o-e.yaw>180&&(o-=360),dt.yaw={startTime:Date.now(),startPosition:e.yaw,endPosition:o,duration:r},"function"==typeof u&&setTimeout(function(){u(w)},r)):e.yaw=o,v(),this)},this.getYawBounds=function(){return[e.minYaw,e.maxYaw]},this.setYawBounds=function(o){return e.minYaw=Math.max(-360,Math.min(o[0],360)),e.maxYaw=Math.max(-360,Math.min(o[1],360)),this},this.getHfov=function(){return e.hfov},this.setHfov=function(o,r,u,w){return D=Date.now(),Math.abs(o-e.hfov)<=Xt?("function"==typeof u&&u(w),this):((r=r==h?1e3:Number(r))?(dt.hfov={startTime:Date.now(),startPosition:e.hfov,endPosition:Te(o),duration:r},"function"==typeof u&&setTimeout(function(){u(w)},r)):zt(o),v(),this)},this.getHfovBounds=function(){return[e.minHfov,e.maxHfov]},this.setHfovBounds=function(o){return e.minHfov=Math.max(0,o[0]),e.maxHfov=Math.max(0,o[1]),this},this.lookAt=function(o,r,u,w,T,I){return w=w==h?1e3:Number(w),o!==h&&Math.abs(o-e.pitch)>Xt&&(this.setPitch(o,w,T,I),T=h),r!==h&&Math.abs(r-e.yaw)>Xt&&(this.setYaw(r,w,T,I),T=h),u!==h&&Math.abs(u-e.hfov)>Xt&&(this.setHfov(u,w,T,I),T=h),"function"==typeof T&&T(I),this},this.getNorthOffset=function(){return e.northOffset},this.setNorthOffset=function(o){return e.northOffset=Math.min(360,Math.max(0,o)),v(),this},this.getHorizonRoll=function(){return e.horizonRoll},this.setHorizonRoll=function(o){return e.horizonRoll=Math.min(90,Math.max(-90,o)),j.setPose(e.horizonPitch*Math.PI/180,e.horizonRoll*Math.PI/180),v(),this},this.getHorizonPitch=function(){return e.horizonPitch},this.setHorizonPitch=function(o){return e.horizonPitch=Math.min(90,Math.max(-90,o)),j.setPose(e.horizonPitch*Math.PI/180,e.horizonRoll*Math.PI/180),v(),this},this.startAutoRotate=function(o,r,u,w){return r=r===h?lt:r,u=u===h?Y:u,e.autoRotate=o=o||M||1,w!==h&&(e.autoRotateInactivityDelay=w),et.lookAt(r,h,u,3e3),v(),this},this.stopAutoRotate=function(){return M=e.autoRotate?e.autoRotate:M,e.autoRotate=!1,e.autoRotateInactivityDelay=-1,this},this.stopMovement=function(){ve(),U={yaw:0,pitch:0,hfov:0}},this.getRenderer=function(){return j},this.setUpdate=function(o){return(Ft=!0===o)&&(ae=!1,j===h?Jt():v()),this},this.updateOnce=function(){return Ft=ae=!0,j===h?Jt():v(),this},this.mouseEventToCoords=function(o){return f(o)},this.loadScene=function(o,r,u,w){return!1!==ct&&xe(o,r,u,w),this},this.getScene=function(){return e.scene},this.addScene=function(o,r){return K.scenes[o]=r,this},this.removeScene=function(o){return!(e.scene==o||!K.scenes.hasOwnProperty(o)||(delete K.scenes[o],0))},this.toggleFullscreen=function(){return N(),this},this.getConfig=function(){return e},this.getContainer=function(){return g},this.addHotSpot=function(o,r){if(r===h&&e.scene===h)e.hotSpots.push(o);else{var u=r!==h?r:e.scene;if(!K.scenes.hasOwnProperty(u))throw"Invalid scene ID!";K.scenes[u].hasOwnProperty("hotSpots")||(K.scenes[u].hotSpots=[],u==e.scene&&(e.hotSpots=K.scenes[u].hotSpots)),K.scenes[u].hotSpots.push(o)}return(r===h||e.scene==r)&&(d(o),ct&&S(o)),this},this.removeHotSpot=function(o,r){if(r===h||e.scene==r){if(!e.hotSpots)return!1;for(var u=0;u<e.hotSpots.length;u++)if(e.hotSpots[u].hasOwnProperty("id")&&e.hotSpots[u].id==o){for(var w=e.hotSpots[u].div;w.parentNode!=ot;)w=w.parentNode;return ot.removeChild(w),delete e.hotSpots[u].div,e.hotSpots.splice(u,1),!0}}else{if(!K.scenes.hasOwnProperty(r))return!1;if(!K.scenes[r].hasOwnProperty("hotSpots"))return!1;for(var T=0;T<K.scenes[r].hotSpots.length;T++)if(K.scenes[r].hotSpots[T].hasOwnProperty("id")&&K.scenes[r].hotSpots[T].id==o)return K.scenes[r].hotSpots.splice(T,1),!0}},this.resize=function(){j&&nt()},this.isOrientationSupported=function(){return ee||!1},this.stopOrientation=function(){Ce()},this.startOrientation=function(){we()},this.isOrientationActive=function(){return Boolean(wt)},this.on=function(o,r){return X[o]=X[o]||[],X[o].push(r),this},this.off=function(o,r){if(!o)return X={},this;if(r){var u=X[o].indexOf(r);u>=0&&X[o].splice(u,1),0==X[o].length&&delete X[o]}else delete X[o];return this},this.destroy=function(){if(_e=!0,clearTimeout(Pt),Dt&&Dt.abort(),Array.isArray(x))for(var o=0;o<6;o++)x[o].src="";j&&j.destroy(),Ht&&(E.removeEventListener("mousemove",A,!1),E.removeEventListener("mouseup",P,!1),g.removeEventListener("mozfullscreenchange",It,!1),g.removeEventListener("webkitfullscreenchange",It,!1),g.removeEventListener("msfullscreenchange",It,!1),g.removeEventListener("fullscreenchange",It,!1),te?te.disconnect():(pt.removeEventListener("resize",nt,!1),pt.removeEventListener("orientationchange",nt,!1)),g.removeEventListener("keydown",Vt,!1),g.removeEventListener("keyup",ut,!1),g.removeEventListener("blur",ht,!1),E.removeEventListener("mouseleave",P,!1)),g.innerHTML="",g.classList.remove("pnlm-container")}}return{viewer:function(g,K){return new t(g,K)}}}(window,document)},7548:(pt,E,h)=>{"use strict";h.d(E,{o:()=>K});var t=h(4537),g=h(707);let K=(()=>{class et{stepper;constructor(j){this.stepper=j}selectionChanged(){const j=this.stepper._getStepLabelId(this.stepper.selectedIndex),V=document.getElementById(j);V&&V.scrollIntoView({block:"start",inline:"nearest",behavior:"smooth"})}static \u0275fac=function(V){return new(V||et)(t.Y36(g.Vq))};static \u0275dir=t.lG2({type:et,selectors:[["mat-vertical-stepper"]],hostBindings:function(V,$){1&V&&t.NdJ("animationDone",function(){return $.selectionChanged()})}})}return et})()},1447:(pt,E,h)=>{"use strict";h.d(E,{t:()=>t});class t{lat;lon}},7753:(pt,E,h)=>{"use strict";h.d(E,{H:()=>Gt});var t=h(4537),g=h(418),V=(h(7226),h(2647),h(4511)),$=h(656),bt=h(2607),D=h(4032),m=h(6707),i=h(8692),rt=h(92),vt=h(1379),H=h(8659),R=h(3331),gt=h(9665),ct=h(8033),yt=h(6558),oe=h(2940),Ht=h(9484),x=h(5738),at=h(1418);const U=["container"];function kt(c,b){if(1&c){const l=t.EpF();t.TgZ(0,"button",5),t.NdJ("click",function(){t.CHM(l);const d=t.oxw();return t.KtG(d.onActionShowView360Add())}),t._uU(1),t.ALo(2,"translate"),t.qZA()}2&c&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"ACTION.Add_To_List"),"\n"))}function wt(c,b){if(1&c){const l=t.EpF();t.TgZ(0,"mat-icon",50),t.NdJ("click",function(){t.CHM(l);const d=t.oxw(2);return t.KtG(d.dataDetailModel.title="")}),t._uU(1,"close"),t.qZA()}}function mt(c,b){if(1&c){const l=t.EpF();t.TgZ(0,"mat-icon",50),t.NdJ("click",function(){t.CHM(l);const d=t.oxw(2);return t.KtG(d.dataDetailModel.description="")}),t._uU(1,"close"),t.qZA()}}function Pt(c,b){if(1&c){const l=t.EpF();t.TgZ(0,"mat-icon",51),t.NdJ("click",function(){t.CHM(l);const d=t.oxw(2);return t.KtG(d.dataDetailModel.linkFileId=null)}),t._uU(1,"close"),t.qZA()}}function M(c,b){if(1&c&&(t._UZ(0,"img",52),t.ALo(1,"cmsthumbnail")),2&c){const l=t.oxw(2);t.s9C("src",t.lcZ(1,1,l.dataDetailModel.panorama),t.LSH)}}function Y(c,b){if(1&c&&(t.TgZ(0,"table",53)(1,"tr")(2,"td"),t._uU(3,"viewer Yaw"),t.qZA(),t.TgZ(4,"td"),t._uU(5,"viewer Pitch"),t.qZA(),t.TgZ(6,"td"),t._uU(7,"click Yaw"),t.qZA(),t.TgZ(8,"td"),t._uU(9,"click Pitch"),t.qZA()(),t.TgZ(10,"tr")(11,"td"),t._uU(12),t.qZA(),t.TgZ(13,"td"),t._uU(14),t.qZA(),t.TgZ(15,"td"),t._uU(16),t.qZA(),t.TgZ(17,"td"),t._uU(18),t.qZA()()()),2&c){const l=t.oxw(2);t.xp6(12),t.Oqu(l.postionView.viewerGetYaw),t.xp6(2),t.Oqu(l.postionView.viewerGetPitch),t.xp6(2),t.Oqu(l.postionView.clickGetYaw),t.xp6(2),t.Oqu(l.postionView.clickGetPitch)}}function lt(c,b){if(1&c){const l=t.EpF();t.TgZ(0,"button",54),t.NdJ("click",function(){t.CHM(l);const d=t.oxw(2);return t.KtG(d.onActionShowHotspotAdd())}),t._uU(1),t.ALo(2,"translate"),t.qZA()}2&c&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"ACTION.ADD")," "))}function dt(c,b){1&c&&(t.TgZ(0,"mat-header-cell"),t._uU(1,"\u0634\u0646\u0627\u0633\u0647 \u0635\u062d\u0646\u0647"),t.qZA())}function X(c,b){if(1&c&&(t.ynx(0),t.TgZ(1,"p",56),t._uU(2),t.qZA(),t.BQk()),2&c){const l=t.oxw().$implicit;t.xp6(2),t.hij("",l.sceneId||"N/A"," ")}}function xt(c,b){if(1&c){const l=t.EpF();t.ynx(0),t.TgZ(1,"div",8)(2,"input",57),t.NdJ("ngModelChange",function(d){t.CHM(l);const a=t.oxw().$implicit;return t.KtG(a.sceneId=d)}),t.qZA()(),t.BQk()}if(2&c){const l=t.oxw().$implicit,n=t.oxw(2);t.xp6(2),t.Q6J("disabled",n.editdisabled)("ngModel",l.sceneId)}}function Ft(c,b){if(1&c&&(t.TgZ(0,"mat-cell"),t.YNc(1,X,3,1,"ng-container",55),t.YNc(2,xt,3,2,"ng-container",55),t.qZA()),2&c){const l=b.$implicit,n=t.oxw(2);t.xp6(1),t.Q6J("ngIf",!n.editHotspot.guid||!l.guid||l.guid!==n.editHotspot.guid),t.xp6(1),t.Q6J("ngIf",n.editHotspot.guid&&l.guid&&l.guid===n.editHotspot.guid)}}function ae(c,b){1&c&&(t.TgZ(0,"mat-header-cell"),t._uU(1,"pitch"),t.qZA())}function Xt(c,b){if(1&c&&(t.ynx(0),t.TgZ(1,"p",56),t._uU(2),t.qZA(),t.BQk()),2&c){const l=t.oxw().$implicit;t.xp6(2),t.hij("",l.pitch||"N/A"," ")}}function te(c,b){if(1&c){const l=t.EpF();t.ynx(0),t.TgZ(1,"div",8)(2,"input",58),t.NdJ("ngModelChange",function(d){t.CHM(l);const a=t.oxw().$implicit;return t.KtG(a.pitch=d)}),t.qZA()(),t.BQk()}if(2&c){const l=t.oxw().$implicit,n=t.oxw(2);t.xp6(2),t.Q6J("disabled",n.editdisabled)("ngModel",l.pitch)}}function de(c,b){if(1&c&&(t.TgZ(0,"mat-cell"),t.YNc(1,Xt,3,1,"ng-container",55),t.YNc(2,te,3,2,"ng-container",55),t.qZA()),2&c){const l=b.$implicit,n=t.oxw(2);t.xp6(1),t.Q6J("ngIf",!n.editHotspot.guid||!l.guid||l.guid!==n.editHotspot.guid),t.xp6(1),t.Q6J("ngIf",n.editHotspot.guid&&l.guid&&l.guid===n.editHotspot.guid)}}function Dt(c,b){1&c&&(t.TgZ(0,"mat-header-cell"),t._uU(1,"yaw"),t.qZA())}function _e(c,b){if(1&c&&(t.ynx(0),t.TgZ(1,"p",59),t._uU(2),t.qZA(),t.BQk()),2&c){const l=t.oxw().$implicit;t.xp6(2),t.hij("",l.yaw||"N/A"," ")}}function ne(c,b){if(1&c){const l=t.EpF();t.ynx(0),t.TgZ(1,"div",8)(2,"input",60),t.NdJ("ngModelChange",function(d){t.CHM(l);const a=t.oxw().$implicit;return t.KtG(a.yaw=d)}),t.qZA()(),t.BQk()}if(2&c){const l=t.oxw().$implicit,n=t.oxw(2);t.xp6(2),t.Q6J("disabled",n.editdisabled)("ngModel",l.yaw)}}function ot(c,b){if(1&c&&(t.TgZ(0,"mat-cell"),t.YNc(1,_e,3,1,"ng-container",55),t.YNc(2,ne,3,2,"ng-container",55),t.qZA()),2&c){const l=b.$implicit,n=t.oxw(2);t.xp6(1),t.Q6J("ngIf",!n.editHotspot.guid||!l.guid||l.guid!==n.editHotspot.guid),t.xp6(1),t.Q6J("ngIf",n.editHotspot.guid&&l.guid&&l.guid===n.editHotspot.guid)}}function Yt(c,b){1&c&&(t.TgZ(0,"mat-header-cell"),t._uU(1,"\u0646\u0648\u0639"),t.qZA())}function Zt(c,b){if(1&c&&(t.ynx(0),t.TgZ(1,"p",59),t._uU(2),t.qZA(),t.BQk()),2&c){const l=t.oxw().$implicit;t.xp6(2),t.Oqu(l.type)}}function Ot(c,b){if(1&c){const l=t.EpF();t.ynx(0),t.TgZ(1,"div",8)(2,"mat-select",61),t.NdJ("ngModelChange",function(d){t.CHM(l);const a=t.oxw().$implicit;return t.KtG(a.type=d)}),t.TgZ(3,"mat-option",62),t._uU(4,"\u0627\u0637\u0644\u0627\u0639\u0627\u062a"),t.qZA()()(),t.BQk()}if(2&c){const l=t.oxw().$implicit,n=t.oxw(2);t.xp6(2),t.Q6J("disabled",n.editdisabled)("ngModel",l.type),t.xp6(1),t.Q6J("value","info")}}function re(c,b){if(1&c&&(t.TgZ(0,"mat-cell"),t.YNc(1,Zt,3,1,"ng-container",55),t.YNc(2,Ot,5,3,"ng-container",55),t.qZA()),2&c){const l=b.$implicit,n=t.oxw(2);t.xp6(1),t.Q6J("ngIf",!n.editHotspot.guid||!l.guid||l.guid!==n.editHotspot.guid),t.xp6(1),t.Q6J("ngIf",n.editHotspot.guid&&l.guid&&l.guid===n.editHotspot.guid)}}function me(c,b){1&c&&(t.TgZ(0,"mat-header-cell"),t._uU(1,"targetYaw"),t.qZA())}function L(c,b){if(1&c&&(t.ynx(0),t.TgZ(1,"p",59),t._uU(2),t.qZA(),t.BQk()),2&c){const l=t.oxw().$implicit;t.xp6(2),t.hij("",l.targetYaw||"N/A"," ")}}function le(c,b){if(1&c){const l=t.EpF();t.ynx(0),t.TgZ(1,"div",8)(2,"input",63),t.NdJ("ngModelChange",function(d){t.CHM(l);const a=t.oxw().$implicit;return t.KtG(a.targetYaw=d)}),t.qZA()(),t.BQk()}if(2&c){const l=t.oxw().$implicit,n=t.oxw(2);t.xp6(2),t.Q6J("disabled",n.editdisabled)("ngModel",l.targetYaw)}}function G(c,b){if(1&c&&(t.TgZ(0,"mat-cell"),t.YNc(1,L,3,1,"ng-container",55),t.YNc(2,le,3,2,"ng-container",55),t.qZA()),2&c){const l=b.$implicit,n=t.oxw(2);t.xp6(1),t.Q6J("ngIf",!n.editHotspot.guid||!l.guid||l.guid!==n.editHotspot.guid),t.xp6(1),t.Q6J("ngIf",n.editHotspot.guid&&l.guid&&l.guid===n.editHotspot.guid)}}function ee(c,b){1&c&&(t.TgZ(0,"mat-header-cell"),t._uU(1,"targetPitch"),t.qZA())}function ie(c,b){if(1&c&&(t.ynx(0),t.TgZ(1,"p",59),t._uU(2),t.qZA(),t.BQk()),2&c){const l=t.oxw().$implicit;t.xp6(2),t.hij("",l.targetPitch||"N/A"," ")}}function pe(c,b){if(1&c){const l=t.EpF();t.ynx(0),t.TgZ(1,"div",8)(2,"input",64),t.NdJ("ngModelChange",function(d){t.CHM(l);const a=t.oxw().$implicit;return t.KtG(a.targetPitch=d)}),t.qZA()(),t.BQk()}if(2&c){const l=t.oxw().$implicit,n=t.oxw(2);t.xp6(2),t.Q6J("disabled",n.editdisabled)("ngModel",l.targetPitch)}}function se(c,b){if(1&c&&(t.TgZ(0,"mat-cell"),t.YNc(1,ie,3,1,"ng-container",55),t.YNc(2,pe,3,2,"ng-container",55),t.qZA()),2&c){const l=b.$implicit,n=t.oxw(2);t.xp6(1),t.Q6J("ngIf",!n.editHotspot.guid||!l.guid||l.guid!==n.editHotspot.guid),t.xp6(1),t.Q6J("ngIf",n.editHotspot.guid&&l.guid&&l.guid===n.editHotspot.guid)}}function Jt(c,b){1&c&&(t.TgZ(0,"mat-header-cell"),t._uU(1,"\u062a\u0648\u0636\u06cc\u062d\u0627\u062a"),t.qZA())}function fe(c,b){if(1&c&&(t.ynx(0),t.TgZ(1,"p",56),t._uU(2),t.qZA(),t.BQk()),2&c){const l=t.oxw().$implicit;t.xp6(2),t.hij("",l.text||"N/A"," ")}}function At(c,b){if(1&c){const l=t.EpF();t.ynx(0),t.TgZ(1,"div",8)(2,"input",65),t.NdJ("ngModelChange",function(d){t.CHM(l);const a=t.oxw().$implicit;return t.KtG(a.text=d)}),t.qZA()(),t.BQk()}if(2&c){const l=t.oxw().$implicit,n=t.oxw(2);t.xp6(2),t.Q6J("disabled",n.editdisabled)("ngModel",l.text)}}function ce(c,b){if(1&c&&(t.TgZ(0,"mat-cell"),t.YNc(1,fe,3,1,"ng-container",55),t.YNc(2,At,3,2,"ng-container",55),t.qZA()),2&c){const l=b.$implicit,n=t.oxw(2);t.xp6(1),t.Q6J("ngIf",!n.editHotspot.guid||!l.guid||l.guid!==n.editHotspot.guid),t.xp6(1),t.Q6J("ngIf",n.editHotspot.guid&&l.guid&&l.guid===n.editHotspot.guid)}}function ue(c,b){1&c&&(t.TgZ(0,"mat-header-cell"),t._uU(1,"\u0622\u062f\u0631\u0633 \u0648\u0628 \u0633\u0627\u06cc\u062a"),t.qZA())}function Qt(c,b){if(1&c&&(t.ynx(0),t.TgZ(1,"p",66),t._uU(2),t.qZA(),t.BQk()),2&c){const l=t.oxw().$implicit;t.xp6(2),t.hij("",l.url||"N/A"," ")}}function $t(c,b){if(1&c){const l=t.EpF();t.ynx(0),t.TgZ(1,"div",8)(2,"input",67),t.NdJ("ngModelChange",function(d){t.CHM(l);const a=t.oxw().$implicit;return t.KtG(a.url=d)}),t.qZA()(),t.BQk()}if(2&c){const l=t.oxw().$implicit,n=t.oxw(2);t.xp6(2),t.Q6J("disabled",n.editdisabled)("ngModel",l.url)}}function qt(c,b){if(1&c&&(t.TgZ(0,"mat-cell"),t.YNc(1,Qt,3,1,"ng-container",55),t.YNc(2,$t,3,2,"ng-container",55),t.qZA()),2&c){const l=b.$implicit,n=t.oxw(2);t.xp6(1),t.Q6J("ngIf",!n.editHotspot.guid||!l.guid||l.guid!==n.editHotspot.guid),t.xp6(1),t.Q6J("ngIf",n.editHotspot.guid&&l.guid&&l.guid===n.editHotspot.guid)}}function s(c,b){1&c&&(t.TgZ(0,"mat-header-cell"),t._uU(1,"Action"),t.qZA())}function C(c,b){if(1&c){const l=t.EpF();t.ynx(0),t.TgZ(1,"mat-icon",69),t.NdJ("click",function(){t.CHM(l);const d=t.oxw().$implicit,a=t.oxw(2);return t.KtG(a.editROw(d))}),t._uU(2,"edit"),t.qZA(),t.TgZ(3,"mat-icon",69),t.NdJ("click",function(){t.CHM(l);const d=t.oxw().$implicit,a=t.oxw(2);return t.KtG(a.removeROw(d))}),t._uU(4,"delete"),t.qZA(),t.BQk()}}function f(c,b){if(1&c){const l=t.EpF();t.TgZ(0,"button",73),t.NdJ("click",function(){t.CHM(l);const d=t.oxw(4);return t.KtG(d.updateEdit())}),t._uU(1),t.ALo(2,"translate"),t.qZA()}if(2&c){const l=t.oxw(4);t.Q6J("disabled",l.editdisabled||!l.editHotspot.text||0===l.editHotspot.text.length),t.xp6(1),t.Oqu(t.lcZ(2,2,"ACTION.Update"))}}function A(c,b){if(1&c){const l=t.EpF();t.TgZ(0,"button",74),t.NdJ("click",function(){t.CHM(l);const d=t.oxw(4);return t.KtG(d.onActionPannellumClickLastPoint())}),t._uU(1,"\u0646\u0642\u0637\u0647"),t.qZA()}if(2&c){const l=t.oxw(4);t.Q6J("disabled",l.editdisabled)}}function P(c,b){if(1&c){const l=t.EpF();t.ynx(0),t.YNc(1,f,3,4,"button",70),t.TgZ(2,"button",71),t.NdJ("click",function(){t.CHM(l);const d=t.oxw(3);return t.KtG(d.cancelEdit())}),t._uU(3),t.ALo(4,"translate"),t.qZA(),t.YNc(5,A,2,1,"button",72),t.BQk()}if(2&c){const l=t.oxw(3);t.xp6(1),t.Q6J("ngIf",l.postionView),t.xp6(1),t.Q6J("disabled",l.editdisabled),t.xp6(1),t.Oqu(t.lcZ(4,4,"ACTION.CANCEL")),t.xp6(2),t.Q6J("ngIf",l.editHotspot.pitch!==(null==l.postionView?null:l.postionView.clickGetPitch)&&l.editHotspot.yaw!==(null==l.postionView?null:l.postionView.clickGetYaw))}}function O(c,b){if(1&c&&(t.TgZ(0,"mat-cell")(1,"span",68),t.YNc(2,C,5,0,"ng-container",55),t.YNc(3,P,6,6,"ng-container",55),t.qZA()()),2&c){const l=b.$implicit,n=t.oxw(2);t.xp6(2),t.Q6J("ngIf",!n.editHotspot.guid||!l.guid||l.guid!==n.editHotspot.guid),t.xp6(1),t.Q6J("ngIf",n.editHotspot.guid&&l.guid&&l.guid===n.editHotspot.guid)}}function y(c,b){1&c&&t._UZ(0,"mat-header-row")}function k(c,b){1&c&&t._UZ(0,"mat-row")}function Z(c,b){if(1&c){const l=t.EpF();t.TgZ(0,"mat-icon",50),t.NdJ("click",function(){t.CHM(l);const d=t.oxw(2);return t.KtG(d.dataDetailModel.configDataJson="")}),t._uU(1,"close"),t.qZA()}}function z(c,b){if(1&c){const l=t.EpF();t.TgZ(0,"div",6)(1,"div",7)(2,"div",8)(3,"label",9),t._uU(4),t.ALo(5,"translate"),t.qZA(),t.TgZ(6,"input",10,11),t.NdJ("ngModelChange",function(d){t.CHM(l);const a=t.oxw();return t.KtG(a.dataDetailModel.title=d)}),t.ALo(8,"translate"),t.qZA(),t.YNc(9,wt,2,0,"mat-icon",12),t.TgZ(10,"mat-icon",13),t._uU(11,"mode_edit"),t.qZA()(),t.TgZ(12,"div",8)(13,"label",14),t._uU(14),t.ALo(15,"translate"),t.qZA(),t.TgZ(16,"input",15,16),t.NdJ("ngModelChange",function(d){t.CHM(l);const a=t.oxw();return t.KtG(a.dataDetailModel.description=d)}),t.ALo(18,"translate"),t.qZA(),t.YNc(19,mt,2,0,"mat-icon",12),t.TgZ(20,"mat-icon",13),t._uU(21,"mode_edit"),t.qZA()(),t.TgZ(22,"div",8)(23,"label",17),t._uU(24),t.ALo(25,"translate"),t.qZA(),t.TgZ(26,"input",18,19),t.NdJ("ngModelChange",function(d){t.CHM(l);const a=t.oxw();return t.KtG(a.dataDetailModel.linkFileId=d)})("click",function(){t.CHM(l);const d=t.oxw();return t.KtG(d.fileManagerOpenFormReport=!0)}),t.ALo(28,"translate"),t.qZA(),t.YNc(29,Pt,2,0,"mat-icon",20),t.TgZ(30,"mat-icon",21),t.NdJ("click",function(){t.CHM(l);const d=t.oxw();return t.KtG(d.fileManagerOpenFormReport=!0)}),t._uU(31,"mode_edit"),t.qZA()(),t.TgZ(32,"cms-file-manager",22),t.NdJ("itemSelected",function(d){t.CHM(l);const a=t.oxw();return t.KtG(a.onActionFileSelect(d))})("openFormChange",function(d){t.CHM(l);const a=t.oxw();return t.KtG(a.fileManagerOpenFormReport=d)}),t.qZA(),t.TgZ(33,"a",23),t.ALo(34,"cmsthumbnail"),t.YNc(35,M,2,3,"img",24),t.qZA(),t._UZ(36,"hr"),t.YNc(37,Y,19,4,"table",25),t._UZ(38,"hr"),t.TgZ(39,"h5"),t._uU(40,"\u062a\u0646\u0638\u06cc\u0645\u0627\u062a "),t.qZA(),t.TgZ(41,"p"),t._uU(42,"\u062f\u0631 \u0648\u0631\u0648\u062f \u0627\u06cc\u0646 \u062a\u0646\u0638\u06cc\u0645\u0627\u062a \u0628\u0627 \u0645\u062f\u06cc\u0631\u06cc\u062a \u0633\u0627\u0645\u0627\u0646\u0647 \u0647\u0645\u0627\u0647\u0646\u06af \u0628\u0627\u0634\u06cc\u062f"),t.qZA(),t.TgZ(43,"div",26)(44,"div",27),t.YNc(45,lt,3,3,"button",28),t.qZA(),t.TgZ(46,"mat-table",29,30),t.ynx(48,31),t.YNc(49,dt,2,0,"mat-header-cell",32),t.YNc(50,Ft,3,2,"mat-cell",33),t.BQk(),t.ynx(51,34),t.YNc(52,ae,2,0,"mat-header-cell",32),t.YNc(53,de,3,2,"mat-cell",33),t.BQk(),t.ynx(54,35),t.YNc(55,Dt,2,0,"mat-header-cell",32),t.YNc(56,ot,3,2,"mat-cell",33),t.BQk(),t.ynx(57,36),t.YNc(58,Yt,2,0,"mat-header-cell",32),t.YNc(59,re,3,2,"mat-cell",33),t.BQk(),t.ynx(60,37),t.YNc(61,me,2,0,"mat-header-cell",32),t.YNc(62,G,3,2,"mat-cell",33),t.BQk(),t.ynx(63,38),t.YNc(64,ee,2,0,"mat-header-cell",32),t.YNc(65,se,3,2,"mat-cell",33),t.BQk(),t.ynx(66,39),t.YNc(67,Jt,2,0,"mat-header-cell",32),t.YNc(68,ce,3,2,"mat-cell",33),t.BQk(),t.ynx(69,40),t.YNc(70,ue,2,0,"mat-header-cell",32),t.YNc(71,qt,3,2,"mat-cell",33),t.BQk(),t.ynx(72,41),t.YNc(73,s,2,0,"mat-header-cell",32),t.YNc(74,O,4,2,"mat-cell",33),t.BQk(),t.YNc(75,y,1,0,"mat-header-row",42),t.YNc(76,k,1,0,"mat-row",43),t.qZA()(),t.TgZ(77,"div",44)(78,"label",45),t._uU(79),t.ALo(80,"translate"),t.qZA(),t.TgZ(81,"input",46,16),t.NdJ("ngModelChange",function(d){t.CHM(l);const a=t.oxw();return t.KtG(a.dataDetailModel.configDataJson=d)}),t.ALo(83,"translate"),t.qZA(),t.YNc(84,Z,2,0,"mat-icon",12),t.TgZ(85,"mat-icon",13),t._uU(86,"mode_edit"),t.qZA()(),t.TgZ(87,"div",27)(88,"button",5),t.NdJ("click",function(){t.CHM(l);const d=t.oxw();return t.KtG(d.onActionSubmitView360())}),t._UZ(89,"i",47),t._uU(90),t.ALo(91,"translate"),t.qZA(),t.TgZ(92,"button",48),t.NdJ("click",function(){t.CHM(l);const d=t.oxw();return t.KtG(d.onActionCancellView360())}),t._UZ(93,"i",49),t._uU(94),t.ALo(95,"translate"),t.qZA()(),t._UZ(96,"br"),t.qZA()()}if(2&c){const l=t.oxw();t.xp6(4),t.Oqu(t.lcZ(5,34,"TITLE.Photography_Place")),t.xp6(2),t.s9C("placeholder",t.lcZ(8,36,"TITLE.Photography_Place")),t.Q6J("ngModel",l.dataDetailModel.title),t.xp6(3),t.Q6J("ngIf",l.dataDetailModel.title),t.xp6(5),t.Oqu(t.lcZ(15,38,"TITLE.DESCRIPTION")),t.xp6(2),t.s9C("placeholder",t.lcZ(18,40,"TITLE.DESCRIPTION")),t.Q6J("ngModel",l.dataDetailModel.description),t.xp6(3),t.Q6J("ngIf",l.dataDetailModel.description),t.xp6(5),t.Oqu(t.lcZ(25,42,"TITLE.View_360_File_ID")),t.xp6(2),t.s9C("placeholder",t.lcZ(28,44,"TITLE.View_360_File_ID")),t.Q6J("ngModel",l.dataDetailModel.linkFileId),t.xp6(3),t.Q6J("ngIf",l.dataDetailModel.linkFileId),t.xp6(3),t.Q6J("language",l.appLanguage)("isPopup",!0)("openForm",l.fileManagerOpenFormReport)("tree",l.fileManagerTree)("openDirectUploadView",!0)("openFilemanagerButtonLabelKey","select")("selectFileType",l.selectFileTypeReport)("openFilemanagerButtonView",!1),t.xp6(1),t.s9C("href",t.lcZ(34,46,l.dataDetailModel.panorama),t.LSH),t.xp6(2),t.Q6J("ngIf",(null==l.dataDetailModel||null==l.dataDetailModel.panorama?null:l.dataDetailModel.panorama.length)>0),t.xp6(2),t.Q6J("ngIf",l.postionView),t.xp6(8),t.Q6J("ngIf",l.postionView),t.xp6(1),t.Q6J("dataSource",l.tableHotSpotdataSource),t.xp6(29),t.Q6J("matHeaderRowDef",l.tableHotspotDisplayedColumns)("matHeaderRowDefSticky",!0),t.xp6(1),t.Q6J("matRowDefColumns",l.tableHotspotDisplayedColumns),t.xp6(3),t.Oqu(t.lcZ(80,48,"TITLE.configDataJson")),t.xp6(2),t.s9C("placeholder",t.lcZ(83,50,"TITLE.configDataJson")),t.Q6J("ngModel",l.dataDetailModel.configDataJson),t.xp6(3),t.Q6J("ngIf",l.dataDetailModel.configDataJson),t.xp6(6),t.hij(" ",t.lcZ(91,52,"ACTION.SUBMIT_BUTTON")," "),t.xp6(4),t.hij(" ",t.lcZ(95,54,"ACTION.CANCEL")," ")}}function it(c,b){1&c&&(t.TgZ(0,"mat-header-cell"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&c&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"TITLE.PHOTO")," "))}function J(c,b){if(1&c&&t._UZ(0,"img",52),2&c){const l=t.oxw(2).$implicit;t.s9C("src",l.panorama,t.LSH)}}function _t(c,b){if(1&c&&(t.ynx(0),t.TgZ(1,"a",23),t.YNc(2,J,1,1,"img",24),t.qZA(),t.BQk()),2&c){const l=t.oxw().$implicit;t.xp6(1),t.s9C("href",l.panorama,t.LSH),t.xp6(1),t.Q6J("ngIf",(null==l||null==l.panorama?null:l.panorama.length)>0)}}function Kt(c,b){if(1&c&&(t.TgZ(0,"mat-cell"),t.YNc(1,_t,3,2,"ng-container",55),t.qZA()),2&c){const l=b.$implicit;t.xp6(1),t.Q6J("ngIf",l.panorama)}}function Vt(c,b){1&c&&(t.TgZ(0,"mat-header-cell"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&c&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"TITLE.Photography_Place")," "))}function ht(c,b){if(1&c&&(t.ynx(0),t._uU(1),t.BQk()),2&c){const l=t.oxw().$implicit;t.xp6(1),t.hij(" ",l.title," ")}}function ut(c,b){if(1&c&&(t.TgZ(0,"mat-cell"),t.YNc(1,ht,2,1,"ng-container",55),t.qZA()),2&c){const l=b.$implicit;t.xp6(1),t.Q6J("ngIf",l.title)}}function Ct(c,b){1&c&&(t.TgZ(0,"mat-header-cell"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&c&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"TITLE.DESCRIPTION")," "))}function Tt(c,b){if(1&c&&(t.ynx(0),t._uU(1),t.BQk()),2&c){const l=t.oxw().$implicit;t.xp6(1),t.hij(" ",l.description," ")}}function Et(c,b){if(1&c&&(t.TgZ(0,"mat-cell"),t.YNc(1,Tt,2,1,"ng-container",55),t.qZA()),2&c){const l=b.$implicit;t.xp6(1),t.Q6J("ngIf",l.description)}}function Bt(c,b){1&c&&(t.TgZ(0,"mat-header-cell"),t._uU(1),t.ALo(2,"translate"),t.ALo(3,"translate"),t.qZA()),2&c&&(t.xp6(1),t.AsE(" ",t.lcZ(2,2,"TITLE.Edit")," | ",t.lcZ(3,4,"TITLE.Delete")," "))}function nt(c,b){if(1&c){const l=t.EpF();t.TgZ(0,"mat-cell",81)(1,"small")(2,"mat-icon",82),t.NdJ("click",function(){const a=t.CHM(l).renderIndex,_=t.oxw(2);return t.KtG(_.onActionOptionEditView360(a))}),t._uU(3,"edit"),t.qZA()(),t._uU(4,"| "),t.TgZ(5,"small")(6,"mat-icon",83),t.NdJ("click",function(){const a=t.CHM(l).renderIndex,_=t.oxw(2);return t.KtG(_.onActionOptionRemoveView360(a))}),t._uU(7,"delete"),t.qZA()()()}}function v(c,b){1&c&&t._UZ(0,"mat-header-row")}function Lt(c,b){1&c&&t._UZ(0,"mat-row")}function Ut(c,b){if(1&c&&(t.TgZ(0,"div",6)(1,"mat-table",75),t.ynx(2,76),t.YNc(3,it,3,3,"mat-header-cell",32),t.YNc(4,Kt,2,1,"mat-cell",33),t.BQk(),t.ynx(5,77),t.YNc(6,Vt,3,3,"mat-header-cell",32),t.YNc(7,ut,2,1,"mat-cell",33),t.BQk(),t.ynx(8,78),t.YNc(9,Ct,3,3,"mat-header-cell",32),t.YNc(10,Et,2,1,"mat-cell",33),t.BQk(),t.ynx(11,41),t.YNc(12,Bt,4,6,"mat-header-cell",32),t.YNc(13,nt,8,0,"mat-cell",79),t.BQk(),t.YNc(14,v,1,0,"mat-header-row",80),t.YNc(15,Lt,1,0,"mat-row",43),t.qZA()()),2&c){const l=t.oxw();t.xp6(1),t.Q6J("dataSource",l.tabledataSource),t.xp6(13),t.Q6J("matHeaderRowDef",l.tabledisplayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",l.tabledisplayedColumns)}}class Mt{viewerGetYaw;viewerGetPitch;clickGetYaw;clickGetPitch}let Gt=(()=>{class c{cmsToastrService;publicHelper;translate;static nextId=0;id=++c.nextId;constructor(l,n,d){this.cmsToastrService=l,this.publicHelper=n,this.translate=d,this.fileManagerTree=this.publicHelper.GetfileManagerTreeConfig()}privateDataModel=[];dataDetailModel=new V.zK_;dataModelChange=new t.vpe;set dataModel(l){l||(l=[]),this.privateDataModel=l,this.privateDataModel.forEach(n=>{n.hotSpots||(n.hotSpots=[]),n.hotSpots=this.uniqByReduce(n.hotSpots),n.hotSpots.forEach(d=>{d.guid=this.getGuid()})}),this.tabledataSource.data=this.privateDataModel,this.tableHotSpotdataSource.data=[]}get dataModel(){return this.privateDataModel}uniqByReduce(l){const n=[];return l.forEach(d=>{!n.includes(d)&&0==n.filter(a=>a.pitch==d.pitch&&a.yaw==d.yaw).length&&n.push(d)}),n}formInfo=new V.LEF;loading=new $.O;loadingOption=new $.O;tabledataSource=new g.by;tableHotSpotdataSource=new g.by;tabledisplayedColumns=["panorama","Title","Description","Action"];tableHotspotDisplayedColumns=["type","text","url","pitch","yaw","Action"];selectFileTypeReport=["jpeg","jpg"];fileManagerTree;appLanguage="fa";showAddView360=!1;fileManagerOpenFormReport=!1;ngOnInit(){this.translate.get("TITLE.Edit").subscribe(l=>{this.formInfo.formTitle=l})}container;viewer;options;postionView;ngAfterViewInit(){this.container.nativeElement.style.display="none"}getGuid(){return Math.floor(Math.random()*(new Date).getTime()).toString()}actionPannellumImageLoad(l,n){const d={type:"equirectangular",panorama:l,autoLoad:!0,autoRotate:1.5,crossOrigin:"anonymous"};n&&n.length>0&&(d.hotSpots=n);const a=Object.assign({},d,this.options);this.viewer&&this.onActionPannellumDestroy(),this.viewer=pannellum.viewer(this.container.nativeElement,a),this.container.nativeElement.style.display="block"}actionPrivateDataModelOptimaze(){const l=[];this.privateDataModel||(this.privateDataModel=[]),this.privateDataModel.forEach(n=>{n.hotSpots||(n.hotSpots=[]),n.hotSpots.forEach(d=>{d.type&&d.type.length>0&&l.push(d)}),n.hotSpots=this.uniqByReduce(l)})}onActionPannellumClick(l){if(!this.viewer)return;this.postionView=new Mt,this.postionView.viewerGetYaw=this.viewer.getYaw(),this.postionView.viewerGetPitch=this.viewer.getPitch();const n=this.viewer.mouseEventToCoords(l);!n||0==n.length||(this.postionView.clickGetYaw=n[1],this.postionView.clickGetPitch=n[0])}onActionPannellumDestroy(){this.container.nativeElement.style.display="none",this.postionView=null,this.viewer&&this.viewer.destroy()}onActionPannellumClickLastPoint(){this.postionView&&(0!=this.postionView.clickGetYaw||0!=this.postionView.clickGetPitch)&&(this.editHotspot.yaw=this.postionView.clickGetYaw,this.editHotspot.pitch=this.postionView.clickGetPitch)}onActionFileSelect(l){l&&l.id&&0!==l.id?(this.dataDetailModel.linkFileId=l.id,this.dataDetailModel.panorama=l.downloadLinksrc,this.dataDetailModel.preview=l.downloadLinksrc,this.actionPannellumImageLoad(this.dataDetailModel.panorama,[])):this.cmsToastrService.typeErrorSelectedRow()}onActionSubmitView360(){(!this.dataDetailModel.linkFileId||this.dataDetailModel.linkFileId<=0)&&this.cmsToastrService.typeErrorMessage("\u0641\u0627\u06cc\u0644 \u0627\u0646\u062a\u062e\u0627\u0628 \u0646\u0634\u062f\u0647"),this.privateDataModel||(this.privateDataModel=[]),this.selectIndex>=0?this.privateDataModel[this.selectIndex]=this.dataDetailModel:this.privateDataModel.push(this.dataDetailModel),this.actionPrivateDataModelOptimaze(),this.dataModel=this.privateDataModel,this.dataModelChange.emit(this.privateDataModel),this.showAddView360=!this.showAddView360,this.selectIndex=-1,this.onActionPannellumDestroy()}onActionCancellView360(){this.showAddView360=!1,this.onActionPannellumDestroy()}onActionShowView360Add(){this.dataDetailModel=new V.zK_,this.showAddView360=!this.showAddView360}inAddhotspotGuid="";onActionShowHotspotAdd(){this.dataDetailModel||(this.dataDetailModel=new V.zK_),this.dataDetailModel.hotSpots||(this.dataDetailModel.hotSpots=[]),this.editHotspot=new V.aCC;const l=new V.aCC;l.type="info",l.guid=this.getGuid(),this.inAddhotspotGuid=l.guid,this.dataDetailModel.hotSpots.push(l),this.tableHotSpotdataSource.data=this.uniqByReduce(this.dataDetailModel.hotSpots),this.newROw(l),this.onActionPannellumClickLastPoint()}onActionOptionRemoveView360(l){l<0||!this.privateDataModel||0===this.privateDataModel.length||(this.privateDataModel.splice(l,1),this.actionPrivateDataModelOptimaze(),this.dataModel=this.privateDataModel,this.dataModelChange.emit(this.privateDataModel),this.onActionPannellumDestroy())}selectIndex=-1;onActionOptionEditView360(l){l<0||!this.privateDataModel||0===this.privateDataModel.length||(this.dataDetailModel=this.privateDataModel[l],this.dataDetailModel.hotSpots||(this.dataDetailModel.hotSpots=[]),this.actionPannellumImageLoad(this.dataDetailModel.panorama,this.dataDetailModel.hotSpots),this.oldHotspot=new V.aCC,this.editHotspot=new V.aCC,this.tableHotSpotdataSource.data=this.uniqByReduce(this.dataDetailModel.hotSpots),this.selectIndex=l,this.showAddView360=!this.showAddView360)}editHotspot;oldHotspot;editdisabled;newROw(l){this.editHotspot=l&&l.guid?l:new V.aCC,this.oldHotspot={...this.editHotspot}}editROw(l){this.editHotspot=l&&l.guid?l:new V.aCC,this.oldHotspot={...this.editHotspot},this.inAddhotspotGuid=""}removeROw(l){const n=this.dataDetailModel.hotSpots.findIndex(d=>d.guid==l.guid);n>=0&&(this.dataDetailModel.hotSpots.splice(n,1),this.tableHotSpotdataSource.data=this.uniqByReduce(this.dataDetailModel.hotSpots))}updateEdit(){this.inAddhotspotGuid="",this.editdisabled=!0;const l=this.dataDetailModel.hotSpots.findIndex(n=>n.guid==this.oldHotspot.guid);l>=0&&(this.dataDetailModel.hotSpots[l]=this.editHotspot),this.editdisabled=!1,this.oldHotspot=new V.aCC,this.editHotspot=new V.aCC}cancelEdit(){this.inAddhotspotGuid?.length>0&&(this.dataDetailModel.hotSpots=this.dataDetailModel.hotSpots.filter(l=>l.guid!=this.inAddhotspotGuid)),this.editHotspot=new V.aCC,this.oldHotspot&&this.oldHotspot.guid&&(this.dataDetailModel.hotSpots||(this.dataDetailModel.hotSpots=[]),this.tableHotSpotdataSource.data=this.uniqByReduce(this.dataDetailModel.hotSpots))}static \u0275fac=function(n){return new(n||c)(t.Y36(bt.e),t.Y36(D.i),t.Y36(m.sK))};static \u0275cmp=t.Xpm({type:c,selectors:[["app-cms-360-image-list"]],viewQuery:function(n,d){if(1&n&&t.Gf(U,5),2&n){let a;t.iGM(a=t.CRH())&&(d.container=a.first)}},inputs:{dataModel:"dataModel"},outputs:{dataModelChange:"dataModelChange"},decls:6,vars:5,consts:[["type","button","class","btn font-13 font-600 btn-s m-1 rounded-s shadow-xl border-0 gradient-highlight",3,"click",4,"ngIf"],[1,"container",2,"height","380px","width","100%","direction","ltr",3,"id","click"],["container",""],["class","example-container mat-elevation-z8",4,"ngIf"],[3,"options"],["type","button",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-highlight",3,"click"],[1,"example-container","mat-elevation-z8"],[1,"m-2"],[1,"input-style","has-borders","no-icon","input-style-always-active","validate-field","mb-4"],["for","dataDetailModel.title",1,"color-highlight"],["type","text","name","dataDetailModel.title","id","dataDetailModel.title","minlength","3","maxlength","100","required","",1,"form-control","validate-name",3,"ngModel","placeholder","ngModelChange"],["Title",""],["matSuffix","","class","pointer","matSuffix","","mat-icon-button","","aria-label","Clear",3,"click",4,"ngIf"],["matSuffix","",1,"pointer"],["for","dataDetailModel.description",1,"color-highlight"],["type","text","name","dataDetailModel.description","id","dataDetailModel.description","minlength","3","maxlength","100",1,"form-control","validate-name",3,"ngModel","placeholder","ngModelChange"],["Description",""],["for","dataDetailModel.linkFileId",1,"color-highlight"],["type","text","name","dataDetailModel.linkFileId","id","dataDetailModel.linkFileId",1,"form-control","validate-name",3,"ngModel","placeholder","ngModelChange","click"],["LinkFileId",""],["matSuffix","","matSuffix","","mat-icon-button","","aria-label","Clear",3,"click",4,"ngIf"],["matSuffix","",3,"click"],[3,"language","isPopup","openForm","tree","openDirectUploadView","openFilemanagerButtonLabelKey","selectFileType","openFilemanagerButtonView","itemSelected","openFormChange"],["target","_blank",3,"href"],["style","vertical-align:middle;","class","ntk-hover-zoom","aria-hidden","","height","50","width","50",3,"src",4,"ngIf"],["class","grid-row-ltr-center",4,"ngIf"],[2,"background-color","bisque","padding","5px"],[1,"form-actions",2,"direction","ltr"],["type","button","class","btn font-13 font-600 btn-s m-1 rounded-s shadow-xl border-0 gradient-teal",3,"click",4,"ngIf"],["matSort","",3,"dataSource"],["table",""],["matColumnDef","sceneId"],[4,"matHeaderCellDef"],[4,"matCellDef"],["matColumnDef","pitch"],["matColumnDef","yaw"],["matColumnDef","type"],["matColumnDef","targetYaw"],["matColumnDef","targetPitch"],["matColumnDef","text"],["matColumnDef","url"],["matColumnDef","Action"],[4,"matHeaderRowDef","matHeaderRowDefSticky"],[4,"matRowDef","matRowDefColumns"],[1,"input-style","has-borders","no-icon","input-style-always-active","validate-field","mb-4",2,"visibility","hidden"],["for","dataDetailModel.configDataJson",1,"color-highlight"],["type","text","name","dataDetailModel.configDataJson","id","dataDetailModel.configDataJson","minlength","0","maxlength","10000","required","",1,"form-control","validate-name",3,"ngModel","placeholder","ngModelChange"],[1,"fa","fa-check-square-o"],["type","button",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-gray",3,"click"],[1,"ft-x"],["matSuffix","","matSuffix","","mat-icon-button","","aria-label","Clear",1,"pointer",3,"click"],["matSuffix","","matSuffix","","mat-icon-button","","aria-label","Clear",3,"click"],["aria-hidden","","height","50","width","50",1,"ntk-hover-zoom",2,"vertical-align","middle",3,"src"],[1,"grid-row-ltr-center"],["type","button",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-teal",3,"click"],[4,"ngIf"],[1,"text-truncate"],["matInput","","placeholder","\u0634\u0646\u0627\u0633\u0647 \u0635\u062d\u0646\u0647","name","sceneId",1,"form-control","validate-name",2,"direction","ltr","text-align","left",3,"disabled","ngModel","ngModelChange"],["matInput","","type","number","placeholder","pitch","name","pitch",1,"form-control","validate-name",2,"direction","ltr","text-align","left",3,"disabled","ngModel","ngModelChange"],[1,"text-truncate","grid-row-ltr-center"],["matInput","","type","number","placeholder","yaw","name","yaw",1,"form-control","validate-name",2,"direction","ltr","text-align","left",3,"disabled","ngModel","ngModelChange"],["placeholder","Select","name","type",1,"form-control","validate-name",3,"disabled","ngModel","ngModelChange"],[3,"value"],["matInput","","placeholder","targetYaw","name","targetYaw",1,"form-control","validate-name",2,"direction","ltr","text-align","left",3,"disabled","ngModel","ngModelChange"],["matInput","","placeholder","targetPitch","name","targetPitch",1,"form-control","validate-name",2,"direction","ltr","text-align","left",3,"disabled","ngModel","ngModelChange"],["matInput","","placeholder","text","name","text",1,"form-control","validate-name",2,"direction","ltr","text-align","left",3,"disabled","ngModel","ngModelChange"],[1,"text-truncate","grid-row-ltr"],["matInput","","placeholder","url","name","url",1,"form-control","validate-name",2,"direction","ltr","text-align","left",3,"disabled","ngModel","ngModelChange"],[1,"m-1",2,"text-align","center"],[3,"click"],["type","button","class","btn font-13 font-600 btn-s m-1 rounded-s shadow-xl border-0 gradient-teal","class","mb-2",3,"disabled","click",4,"ngIf"],["type","button",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-gray",3,"disabled","click"],["type","button","class","btn font-13 font-600 btn-s m-1 rounded-s shadow-xl border-0 gradient-green","matTooltip","\u062b\u0628\u062a \u0622\u062e\u0631\u06cc\u0646 \u0646\u0642\u0637\u0647 \u06a9\u0644\u06cc\u06a9 \u0634\u062f\u0647",3,"disabled","click",4,"ngIf"],["type","button",1,"mb-2",3,"disabled","click"],["type","button","matTooltip","\u062b\u0628\u062a \u0622\u062e\u0631\u06cc\u0646 \u0646\u0642\u0637\u0647 \u06a9\u0644\u06cc\u06a9 \u0634\u062f\u0647",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-green",3,"disabled","click"],["multiTemplateDataRows","",3,"dataSource"],["matColumnDef","panorama"],["matColumnDef","Title"],["matColumnDef","Description"],["class","Action",4,"matCellDef"],[4,"matHeaderRowDef"],[1,"Action"],["matTooltipPosition","before","aria-hidden","false",2,"color","blue","cursor","pointer",3,"click"],["matTooltipPosition","before","aria-hidden","false",2,"color","red","cursor","pointer",3,"click"]],template:function(n,d){1&n&&(t.YNc(0,kt,3,3,"button",0),t.TgZ(1,"div",1,2),t.NdJ("click",function(_){return d.onActionPannellumClick(_)}),t.qZA(),t.YNc(3,z,97,56,"div",3),t._UZ(4,"app-progress-spinner",4),t.YNc(5,Ut,16,3,"div",3)),2&n&&(t.Q6J("ngIf",!d.showAddView360),t.xp6(1),t.Q6J("id",d.id),t.xp6(2),t.Q6J("ngIf",d.showAddView360),t.xp6(1),t.Q6J("options",d.loadingOption),t.xp6(1),t.Q6J("ngIf",!d.showAddView360))},dependencies:[i.O5,rt.Fj,rt.wV,rt.JJ,rt.Q7,rt.wO,rt.nD,rt.On,vt.ey,H.R9,R.Hw,gt.Nt,ct.gD,yt.YE,g.BZ,g.fO,g.as,g.w1,g.Dz,g.nj,g.ge,g.ev,g.XQ,g.Gk,oe.gM,Ht.HG,x.O,m.X$,at.v],encapsulation:2})}return c})()},4014:(pt,E,h)=>{"use strict";h.d(E,{g:()=>l});var t=h(4537),g=h(418),V=(h(7226),h(2647),h(4511)),$=h(656),bt=h(2607),D=h(4032),m=h(6707),i=h(8692),rt=h(92),vt=h(1379),H=h(8659),R=h(3331),gt=h(8033),ct=h(6558),yt=h(2940),oe=h(9484),Ht=h(5738),x=h(1418);const at=["container"];function U(n,d){if(1&n){const a=t.EpF();t.TgZ(0,"button",6),t.NdJ("click",function(){t.CHM(a);const p=t.oxw();return t.KtG(p.onActionShowView360Add())}),t._uU(1),t.ALo(2,"translate"),t.qZA()}2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"ACTION.Add_To_List"),"\n"))}function kt(n,d){if(1&n){const a=t.EpF();t.TgZ(0,"button",7),t.NdJ("click",function(){t.CHM(a);const p=t.oxw();return t.KtG(p.onActionImportFile360View())}),t._uU(1," \u0648\u0631\u0648\u062f \u0627\u0637\u0644\u0627\u0639\u0627\u062a \u0639\u06a9\u0633 \u0647\u0627\u06cc 360\n"),t.qZA()}}function wt(n,d){if(1&n){const a=t.EpF();t.TgZ(0,"button",7),t.NdJ("click",function(){t.CHM(a);const p=t.oxw();return t.KtG(p.actionPannellumTourLoad())}),t._uU(1," \u0646\u0645\u0627\u06cc\u0634 \u062a\u0648\u0631\n"),t.qZA()}}function mt(n,d){if(1&n){const a=t.EpF();t.TgZ(0,"mat-icon",46),t.NdJ("click",function(){t.CHM(a);const p=t.oxw(2);return t.KtG(p.dataDetailModel.title="")}),t._uU(1,"close"),t.qZA()}}function Pt(n,d){if(1&n){const a=t.EpF();t.TgZ(0,"mat-icon",47),t.NdJ("click",function(){t.CHM(a);const p=t.oxw(2);return t.KtG(p.dataDetailModel.linkFileId=null)}),t._uU(1,"close"),t.qZA()}}function M(n,d){if(1&n&&(t._UZ(0,"img",48),t.ALo(1,"cmsthumbnail")),2&n){const a=t.oxw(2);t.s9C("src",t.lcZ(1,1,a.dataDetailModel.panorama),t.LSH)}}function Y(n,d){if(1&n&&(t.TgZ(0,"table",49)(1,"tr")(2,"td"),t._uU(3,"viewer Yaw"),t.qZA(),t.TgZ(4,"td"),t._uU(5,"viewer Pitch"),t.qZA(),t.TgZ(6,"td"),t._uU(7,"click Yaw"),t.qZA(),t.TgZ(8,"td"),t._uU(9,"click Pitch"),t.qZA()(),t.TgZ(10,"tr")(11,"td"),t._uU(12),t.qZA(),t.TgZ(13,"td"),t._uU(14),t.qZA(),t.TgZ(15,"td"),t._uU(16),t.qZA(),t.TgZ(17,"td"),t._uU(18),t.qZA()()()),2&n){const a=t.oxw(2);t.xp6(12),t.Oqu(a.postionView.viewerGetYaw),t.xp6(2),t.Oqu(a.postionView.viewerGetPitch),t.xp6(2),t.Oqu(a.postionView.clickGetYaw),t.xp6(2),t.Oqu(a.postionView.clickGetPitch)}}function lt(n,d){if(1&n){const a=t.EpF();t.TgZ(0,"button",50),t.NdJ("click",function(){t.CHM(a);const p=t.oxw(2);return t.KtG(p.onActionShowHotspotAdd())}),t._uU(1),t.ALo(2,"translate"),t.qZA()}2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"ACTION.ADD")," "))}function dt(n,d){1&n&&(t.TgZ(0,"mat-header-cell"),t._uU(1,"\u0646\u0648\u0639"),t.qZA())}function X(n,d){if(1&n&&(t.ynx(0),t.TgZ(1,"p",52),t._uU(2),t.qZA(),t.BQk()),2&n){const a=t.oxw().$implicit;t.xp6(2),t.Oqu(a.type)}}function xt(n,d){if(1&n){const a=t.EpF();t.ynx(0),t.TgZ(1,"div",10)(2,"mat-select",53),t.NdJ("ngModelChange",function(p){t.CHM(a);const S=t.oxw().$implicit;return t.KtG(S.type=p)}),t.TgZ(3,"mat-option",54),t._uU(4,"\u0635\u062d\u0646\u0647"),t.qZA(),t.TgZ(5,"mat-option",54),t._uU(6,"\u0627\u0637\u0644\u0627\u0639\u0627\u062a"),t.qZA()()(),t.BQk()}if(2&n){const a=t.oxw().$implicit,_=t.oxw(2);t.xp6(2),t.Q6J("disabled",_.editdisabled)("ngModel",a.type),t.xp6(1),t.Q6J("value","scene"),t.xp6(2),t.Q6J("value","info")}}function Ft(n,d){if(1&n&&(t.TgZ(0,"mat-cell"),t.YNc(1,X,3,1,"ng-container",51),t.YNc(2,xt,7,4,"ng-container",51),t.qZA()),2&n){const a=d.$implicit,_=t.oxw(2);t.xp6(1),t.Q6J("ngIf",!_.editHotspot.guid||!a.guid||a.guid!==_.editHotspot.guid),t.xp6(1),t.Q6J("ngIf",_.editHotspot.guid&&a.guid&&a.guid===_.editHotspot.guid)}}function ae(n,d){1&n&&(t.TgZ(0,"mat-header-cell"),t._uU(1,"\u0634\u0646\u0627\u0633\u0647 \u0635\u062d\u0646\u0647"),t.qZA())}function Xt(n,d){if(1&n&&(t.ynx(0),t.TgZ(1,"p",55),t._uU(2),t.qZA(),t.BQk()),2&n){const a=t.oxw().$implicit;t.xp6(2),t.hij("",a.sceneId||"N/A"," ")}}function te(n,d){if(1&n){const a=t.EpF();t.ynx(0),t.TgZ(1,"div",10)(2,"input",56),t.NdJ("ngModelChange",function(p){t.CHM(a);const S=t.oxw().$implicit;return t.KtG(S.sceneId=p)}),t.qZA()(),t.BQk()}if(2&n){const a=t.oxw().$implicit,_=t.oxw(2);t.xp6(2),t.Q6J("disabled",_.editdisabled)("ngModel",a.sceneId)}}function de(n,d){if(1&n&&(t.TgZ(0,"mat-cell"),t.YNc(1,Xt,3,1,"ng-container",51),t.YNc(2,te,3,2,"ng-container",51),t.qZA()),2&n){const a=d.$implicit,_=t.oxw(2);t.xp6(1),t.Q6J("ngIf",!_.editHotspot.guid||!a.guid||a.guid!==_.editHotspot.guid),t.xp6(1),t.Q6J("ngIf",_.editHotspot.guid&&a.guid&&a.guid===_.editHotspot.guid&&"scene"===a.type)}}function Dt(n,d){1&n&&(t.TgZ(0,"mat-header-cell"),t._uU(1,"\u0634\u0646\u0627\u0633\u0647 \u0635\u062d\u0646\u0647"),t.qZA())}function _e(n,d){if(1&n&&(t.ynx(0),t.TgZ(1,"p",52),t._uU(2),t.qZA(),t.BQk()),2&n){const a=t.oxw().$implicit;t.xp6(2),t.Oqu(a.sceneId)}}function ne(n,d){if(1&n&&(t.TgZ(0,"mat-option",54),t._uU(1),t.qZA()),2&n){const a=d.$implicit;t.Q6J("value",a.linkFileId),t.xp6(1),t.Oqu(a.title)}}function ot(n,d){if(1&n){const a=t.EpF();t.ynx(0),t.TgZ(1,"div",10)(2,"mat-select",57),t.NdJ("ngModelChange",function(p){t.CHM(a);const S=t.oxw().$implicit;return t.KtG(S.sceneId=p)}),t.YNc(3,ne,2,2,"mat-option",58),t.qZA()(),t.BQk()}if(2&n){const a=t.oxw().$implicit,_=t.oxw(2);t.xp6(2),t.Q6J("disabled",_.editdisabled)("ngModel",a.sceneId),t.xp6(1),t.Q6J("ngForOf",_.scenesList)}}function Yt(n,d){if(1&n&&(t.TgZ(0,"mat-cell"),t.YNc(1,_e,3,1,"ng-container",51),t.YNc(2,ot,4,3,"ng-container",51),t.qZA()),2&n){const a=d.$implicit,_=t.oxw(2);t.xp6(1),t.Q6J("ngIf",!_.editHotspot.guid||!a.guid||a.guid!==_.editHotspot.guid),t.xp6(1),t.Q6J("ngIf",_.editHotspot.guid&&a.guid&&a.guid===_.editHotspot.guid&&"scene"===a.type)}}function Zt(n,d){1&n&&(t.TgZ(0,"mat-header-cell"),t._uU(1,"pitch"),t.qZA())}function Ot(n,d){if(1&n&&(t.ynx(0),t.TgZ(1,"p",55),t._uU(2),t.qZA(),t.BQk()),2&n){const a=t.oxw().$implicit;t.xp6(2),t.hij("",a.pitch||"N/A"," ")}}function re(n,d){if(1&n){const a=t.EpF();t.ynx(0),t.TgZ(1,"div",10)(2,"input",59),t.NdJ("ngModelChange",function(p){t.CHM(a);const S=t.oxw().$implicit;return t.KtG(S.pitch=p)}),t.qZA()(),t.BQk()}if(2&n){const a=t.oxw().$implicit,_=t.oxw(2);t.xp6(2),t.Q6J("disabled",_.editdisabled)("ngModel",a.pitch)}}function me(n,d){if(1&n&&(t.TgZ(0,"mat-cell"),t.YNc(1,Ot,3,1,"ng-container",51),t.YNc(2,re,3,2,"ng-container",51),t.qZA()),2&n){const a=d.$implicit,_=t.oxw(2);t.xp6(1),t.Q6J("ngIf",!_.editHotspot.guid||!a.guid||a.guid!==_.editHotspot.guid),t.xp6(1),t.Q6J("ngIf",_.editHotspot.guid&&a.guid&&a.guid===_.editHotspot.guid)}}function L(n,d){1&n&&(t.TgZ(0,"mat-header-cell"),t._uU(1,"yaw"),t.qZA())}function le(n,d){if(1&n&&(t.ynx(0),t.TgZ(1,"p",52),t._uU(2),t.qZA(),t.BQk()),2&n){const a=t.oxw().$implicit;t.xp6(2),t.hij("",a.yaw||"N/A"," ")}}function G(n,d){if(1&n){const a=t.EpF();t.ynx(0),t.TgZ(1,"div",10)(2,"input",60),t.NdJ("ngModelChange",function(p){t.CHM(a);const S=t.oxw().$implicit;return t.KtG(S.yaw=p)}),t.qZA()(),t.BQk()}if(2&n){const a=t.oxw().$implicit,_=t.oxw(2);t.xp6(2),t.Q6J("disabled",_.editdisabled)("ngModel",a.yaw)}}function ee(n,d){if(1&n&&(t.TgZ(0,"mat-cell"),t.YNc(1,le,3,1,"ng-container",51),t.YNc(2,G,3,2,"ng-container",51),t.qZA()),2&n){const a=d.$implicit,_=t.oxw(2);t.xp6(1),t.Q6J("ngIf",!_.editHotspot.guid||!a.guid||a.guid!==_.editHotspot.guid),t.xp6(1),t.Q6J("ngIf",_.editHotspot.guid&&a.guid&&a.guid===_.editHotspot.guid)}}function ie(n,d){1&n&&(t.TgZ(0,"mat-header-cell"),t._uU(1,"targetYaw"),t.qZA())}function pe(n,d){if(1&n&&(t.ynx(0),t.TgZ(1,"p",52),t._uU(2),t.qZA(),t.BQk()),2&n){const a=t.oxw().$implicit;t.xp6(2),t.hij("",a.targetYaw||"N/A"," ")}}function se(n,d){if(1&n){const a=t.EpF();t.ynx(0),t.TgZ(1,"div",10)(2,"input",61),t.NdJ("ngModelChange",function(p){t.CHM(a);const S=t.oxw().$implicit;return t.KtG(S.targetYaw=p)}),t.qZA()(),t.BQk()}if(2&n){const a=t.oxw().$implicit,_=t.oxw(2);t.xp6(2),t.Q6J("disabled",_.editdisabled)("ngModel",a.targetYaw)}}function Jt(n,d){if(1&n&&(t.TgZ(0,"mat-cell"),t.YNc(1,pe,3,1,"ng-container",51),t.YNc(2,se,3,2,"ng-container",51),t.qZA()),2&n){const a=d.$implicit,_=t.oxw(2);t.xp6(1),t.Q6J("ngIf",!_.editHotspot.guid||!a.guid||a.guid!==_.editHotspot.guid),t.xp6(1),t.Q6J("ngIf",_.editHotspot.guid&&a.guid&&a.guid===_.editHotspot.guid)}}function fe(n,d){1&n&&(t.TgZ(0,"mat-header-cell"),t._uU(1,"targetPitch"),t.qZA())}function At(n,d){if(1&n&&(t.ynx(0),t.TgZ(1,"p",52),t._uU(2),t.qZA(),t.BQk()),2&n){const a=t.oxw().$implicit;t.xp6(2),t.hij("",a.targetPitch||"N/A"," ")}}function ce(n,d){if(1&n){const a=t.EpF();t.ynx(0),t.TgZ(1,"div",10)(2,"input",62),t.NdJ("ngModelChange",function(p){t.CHM(a);const S=t.oxw().$implicit;return t.KtG(S.targetPitch=p)}),t.qZA()(),t.BQk()}if(2&n){const a=t.oxw().$implicit,_=t.oxw(2);t.xp6(2),t.Q6J("disabled",_.editdisabled)("ngModel",a.targetPitch)}}function ue(n,d){if(1&n&&(t.TgZ(0,"mat-cell"),t.YNc(1,At,3,1,"ng-container",51),t.YNc(2,ce,3,2,"ng-container",51),t.qZA()),2&n){const a=d.$implicit,_=t.oxw(2);t.xp6(1),t.Q6J("ngIf",!_.editHotspot.guid||!a.guid||a.guid!==_.editHotspot.guid),t.xp6(1),t.Q6J("ngIf",_.editHotspot.guid&&a.guid&&a.guid===_.editHotspot.guid)}}function Qt(n,d){1&n&&(t.TgZ(0,"mat-header-cell"),t._uU(1,"\u062a\u0648\u0636\u06cc\u062d\u0627\u062a"),t.qZA())}function $t(n,d){if(1&n&&(t.ynx(0),t.TgZ(1,"p",55),t._uU(2),t.qZA(),t.BQk()),2&n){const a=t.oxw().$implicit;t.xp6(2),t.hij("",a.text||"N/A"," ")}}function qt(n,d){if(1&n){const a=t.EpF();t.ynx(0),t.TgZ(1,"div",10)(2,"input",63),t.NdJ("ngModelChange",function(p){t.CHM(a);const S=t.oxw().$implicit;return t.KtG(S.text=p)}),t.qZA()(),t.BQk()}if(2&n){const a=t.oxw().$implicit,_=t.oxw(2);t.xp6(2),t.Q6J("disabled",_.editdisabled)("ngModel",a.text)}}function s(n,d){if(1&n&&(t.TgZ(0,"mat-cell"),t.YNc(1,$t,3,1,"ng-container",51),t.YNc(2,qt,3,2,"ng-container",51),t.qZA()),2&n){const a=d.$implicit,_=t.oxw(2);t.xp6(1),t.Q6J("ngIf",!_.editHotspot.guid||!a.guid||a.guid!==_.editHotspot.guid),t.xp6(1),t.Q6J("ngIf",_.editHotspot.guid&&a.guid&&a.guid===_.editHotspot.guid)}}function C(n,d){1&n&&(t.TgZ(0,"mat-header-cell"),t._uU(1,"\u0622\u062f\u0631\u0633 \u0648\u0628 \u0633\u0627\u06cc\u062a"),t.qZA())}function f(n,d){if(1&n&&(t.ynx(0),t.TgZ(1,"p",64),t._uU(2),t.qZA(),t.BQk()),2&n){const a=t.oxw().$implicit;t.xp6(2),t.hij("",a.url||"N/A"," ")}}function A(n,d){if(1&n){const a=t.EpF();t.ynx(0),t.TgZ(1,"div",10)(2,"input",65),t.NdJ("ngModelChange",function(p){t.CHM(a);const S=t.oxw().$implicit;return t.KtG(S.url=p)}),t.qZA()(),t.BQk()}if(2&n){const a=t.oxw().$implicit,_=t.oxw(2);t.xp6(2),t.Q6J("disabled",_.editdisabled)("ngModel",a.url)}}function P(n,d){if(1&n&&(t.TgZ(0,"mat-cell"),t.YNc(1,f,3,1,"ng-container",51),t.YNc(2,A,3,2,"ng-container",51),t.qZA()),2&n){const a=d.$implicit,_=t.oxw(2);t.xp6(1),t.Q6J("ngIf",!_.editHotspot.guid||!a.guid||a.guid!==_.editHotspot.guid),t.xp6(1),t.Q6J("ngIf",_.editHotspot.guid&&a.guid&&a.guid===_.editHotspot.guid)}}function O(n,d){1&n&&(t.TgZ(0,"mat-header-cell"),t._uU(1,"Action"),t.qZA())}function y(n,d){if(1&n){const a=t.EpF();t.ynx(0),t.TgZ(1,"mat-icon",67),t.NdJ("click",function(){t.CHM(a);const p=t.oxw().$implicit,S=t.oxw(2);return t.KtG(S.editROw(p))}),t._uU(2,"edit"),t.qZA(),t.TgZ(3,"mat-icon",67),t.NdJ("click",function(){t.CHM(a);const p=t.oxw().$implicit,S=t.oxw(2);return t.KtG(S.removeROw(p))}),t._uU(4,"delete"),t.qZA(),t.BQk()}}function k(n,d){if(1&n){const a=t.EpF();t.TgZ(0,"button",71),t.NdJ("click",function(){t.CHM(a);const p=t.oxw(4);return t.KtG(p.updateEdit())}),t._uU(1),t.ALo(2,"translate"),t.qZA()}if(2&n){const a=t.oxw(4);t.Q6J("disabled",a.editdisabled||!a.editHotspot.text||0===a.editHotspot.text.length),t.xp6(1),t.Oqu(t.lcZ(2,2,"ACTION.Update"))}}function Z(n,d){if(1&n){const a=t.EpF();t.TgZ(0,"button",72),t.NdJ("click",function(){t.CHM(a);const p=t.oxw(4);return t.KtG(p.onActionPannellumClickLastPoint())}),t._uU(1,"\u0646\u0642\u0637\u0647"),t.qZA()}if(2&n){const a=t.oxw(4);t.Q6J("disabled",a.editdisabled)}}function z(n,d){if(1&n){const a=t.EpF();t.ynx(0),t.YNc(1,k,3,4,"button",68),t.TgZ(2,"button",69),t.NdJ("click",function(){t.CHM(a);const p=t.oxw(3);return t.KtG(p.cancelEdit())}),t._uU(3),t.ALo(4,"translate"),t.qZA(),t.YNc(5,Z,2,1,"button",70),t.BQk()}if(2&n){const a=t.oxw(3);t.xp6(1),t.Q6J("ngIf",a.postionView),t.xp6(1),t.Q6J("disabled",a.editdisabled),t.xp6(1),t.Oqu(t.lcZ(4,4,"ACTION.CANCEL")),t.xp6(2),t.Q6J("ngIf",a.editHotspot.pitch!==(null==a.postionView?null:a.postionView.clickGetPitch)&&a.editHotspot.yaw!==(null==a.postionView?null:a.postionView.clickGetYaw))}}function it(n,d){if(1&n&&(t.TgZ(0,"mat-cell")(1,"span",66),t.YNc(2,y,5,0,"ng-container",51),t.YNc(3,z,6,6,"ng-container",51),t.qZA()()),2&n){const a=d.$implicit,_=t.oxw(2);t.xp6(2),t.Q6J("ngIf",!_.editHotspot.guid||!a.guid||a.guid!==_.editHotspot.guid),t.xp6(1),t.Q6J("ngIf",_.editHotspot.guid&&a.guid&&a.guid===_.editHotspot.guid)}}function J(n,d){1&n&&t._UZ(0,"mat-header-row")}function _t(n,d){1&n&&t._UZ(0,"mat-row")}function Kt(n,d){if(1&n){const a=t.EpF();t.TgZ(0,"div",8)(1,"div",9)(2,"div",10)(3,"mat-label"),t._uU(4),t.ALo(5,"translate"),t.qZA(),t.TgZ(6,"label",11),t._uU(7),t.ALo(8,"translate"),t.qZA(),t.TgZ(9,"input",12,13),t.NdJ("ngModelChange",function(p){t.CHM(a);const S=t.oxw();return t.KtG(S.dataDetailModel.title=p)}),t.ALo(11,"translate"),t.qZA(),t.YNc(12,mt,2,0,"mat-icon",14),t.TgZ(13,"mat-icon",15),t._uU(14,"mode_edit"),t.qZA()(),t.TgZ(15,"div",10)(16,"input",16,17),t.NdJ("ngModelChange",function(p){t.CHM(a);const S=t.oxw();return t.KtG(S.dataDetailModel.linkFileId=p)})("click",function(){t.CHM(a);const p=t.oxw();return t.KtG(p.fileManagerOpenFormReport=!0)}),t.ALo(18,"translate"),t.qZA(),t.YNc(19,Pt,2,0,"mat-icon",18),t.TgZ(20,"mat-icon",19),t.NdJ("click",function(){t.CHM(a);const p=t.oxw();return t.KtG(p.fileManagerOpenFormReport=!0)}),t._uU(21,"mode_edit"),t.qZA()(),t.TgZ(22,"cms-file-manager",20),t.NdJ("itemSelected",function(p){t.CHM(a);const S=t.oxw();return t.KtG(S.onActionFileSelect(p))})("openFormChange",function(p){t.CHM(a);const S=t.oxw();return t.KtG(S.fileManagerOpenFormReport=p)}),t.qZA(),t.TgZ(23,"a",21),t.ALo(24,"cmsthumbnail"),t.YNc(25,M,2,3,"img",22),t.qZA(),t._UZ(26,"hr"),t.YNc(27,Y,19,4,"table",23),t._UZ(28,"hr"),t.TgZ(29,"h5"),t._uU(30,"\u062a\u0646\u0638\u06cc\u0645\u0627\u062a \u062a\u0648\u0631"),t.qZA(),t.TgZ(31,"p"),t._uU(32,"\u062f\u0631 \u0648\u0631\u0648\u062f \u0627\u06cc\u0646 \u062a\u0646\u0638\u06cc\u0645\u0627\u062a \u0628\u0627 \u0645\u062f\u06cc\u0631\u06cc\u062a \u0633\u0627\u0645\u0627\u0646\u0647 \u0647\u0645\u0627\u0647\u0646\u06af \u0628\u0627\u0634\u06cc\u062f"),t.qZA(),t.TgZ(33,"div",24)(34,"div",25),t.YNc(35,lt,3,3,"button",26),t.qZA(),t.TgZ(36,"mat-table",27,28),t.ynx(38,29),t.YNc(39,dt,2,0,"mat-header-cell",30),t.YNc(40,Ft,3,2,"mat-cell",31),t.BQk(),t.ynx(41,32),t.YNc(42,ae,2,0,"mat-header-cell",30),t.YNc(43,de,3,2,"mat-cell",31),t.BQk(),t.ynx(44,33),t.YNc(45,Dt,2,0,"mat-header-cell",30),t.YNc(46,Yt,3,2,"mat-cell",31),t.BQk(),t.ynx(47,34),t.YNc(48,Zt,2,0,"mat-header-cell",30),t.YNc(49,me,3,2,"mat-cell",31),t.BQk(),t.ynx(50,35),t.YNc(51,L,2,0,"mat-header-cell",30),t.YNc(52,ee,3,2,"mat-cell",31),t.BQk(),t.ynx(53,36),t.YNc(54,ie,2,0,"mat-header-cell",30),t.YNc(55,Jt,3,2,"mat-cell",31),t.BQk(),t.ynx(56,37),t.YNc(57,fe,2,0,"mat-header-cell",30),t.YNc(58,ue,3,2,"mat-cell",31),t.BQk(),t.ynx(59,38),t.YNc(60,Qt,2,0,"mat-header-cell",30),t.YNc(61,s,3,2,"mat-cell",31),t.BQk(),t.ynx(62,39),t.YNc(63,C,2,0,"mat-header-cell",30),t.YNc(64,P,3,2,"mat-cell",31),t.BQk(),t.ynx(65,40),t.YNc(66,O,2,0,"mat-header-cell",30),t.YNc(67,it,4,2,"mat-cell",31),t.BQk(),t.YNc(68,J,1,0,"mat-header-row",41),t.YNc(69,_t,1,0,"mat-row",42),t.qZA()(),t.TgZ(70,"div",25)(71,"button",6),t.NdJ("click",function(){t.CHM(a);const p=t.oxw();return t.KtG(p.onActionSubmitView360())}),t._UZ(72,"i",43),t._uU(73),t.ALo(74,"translate"),t.qZA(),t.TgZ(75,"button",44),t.NdJ("click",function(){t.CHM(a);const p=t.oxw();return t.KtG(p.onActionCancellView360())}),t._UZ(76,"i",45),t._uU(77),t.ALo(78,"translate"),t.qZA()(),t._UZ(79,"br"),t.qZA()()}if(2&n){const a=t.oxw();t.xp6(4),t.Oqu(t.lcZ(5,26,"TITLE.Photography_Place")),t.xp6(3),t.Oqu(t.lcZ(8,28,"TITLE.title")),t.xp6(2),t.s9C("placeholder",t.lcZ(11,30,"TITLE.Photography_Place")),t.Q6J("ngModel",a.dataDetailModel.title),t.xp6(3),t.Q6J("ngIf",a.dataDetailModel.title),t.xp6(4),t.s9C("placeholder",t.lcZ(18,32,"TITLE.View_360_File_ID")),t.Q6J("ngModel",a.dataDetailModel.linkFileId),t.xp6(3),t.Q6J("ngIf",a.dataDetailModel.linkFileId),t.xp6(3),t.Q6J("language",a.appLanguage)("isPopup",!0)("openForm",a.fileManagerOpenFormReport)("tree",a.fileManagerTree)("openDirectUploadView",!0)("openFilemanagerButtonLabelKey","select")("selectFileType",a.selectFileTypeReport)("openFilemanagerButtonView",!1),t.xp6(1),t.s9C("href",t.lcZ(24,34,a.dataDetailModel.panorama),t.LSH),t.xp6(2),t.Q6J("ngIf",(null==a.dataDetailModel||null==a.dataDetailModel.panorama?null:a.dataDetailModel.panorama.length)>0),t.xp6(2),t.Q6J("ngIf",a.postionView),t.xp6(8),t.Q6J("ngIf",a.postionView),t.xp6(1),t.Q6J("dataSource",a.tableHotSpotdataSource),t.xp6(32),t.Q6J("matHeaderRowDef",a.tableHotspotDisplayedColumns)("matHeaderRowDefSticky",!0),t.xp6(1),t.Q6J("matRowDefColumns",a.tableHotspotDisplayedColumns),t.xp6(4),t.hij(" ",t.lcZ(74,36,"ACTION.SUBMIT_BUTTON")," "),t.xp6(4),t.hij(" ",t.lcZ(78,38,"ACTION.CANCEL")," ")}}function Vt(n,d){1&n&&(t.TgZ(0,"mat-header-cell"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"TITLE.PHOTO")," "))}function ht(n,d){if(1&n&&t._UZ(0,"img",48),2&n){const a=t.oxw(2).$implicit;t.s9C("src",a.panorama,t.LSH)}}function ut(n,d){if(1&n&&(t.ynx(0),t.TgZ(1,"a",21),t.YNc(2,ht,1,1,"img",22),t.qZA(),t.BQk()),2&n){const a=t.oxw().$implicit;t.xp6(1),t.s9C("href",a.panorama,t.LSH),t.xp6(1),t.Q6J("ngIf",(null==a||null==a.panorama?null:a.panorama.length)>0)}}function Ct(n,d){if(1&n&&(t.TgZ(0,"mat-cell"),t.YNc(1,ut,3,2,"ng-container",51),t.qZA()),2&n){const a=d.$implicit;t.xp6(1),t.Q6J("ngIf",a.panorama)}}function Tt(n,d){1&n&&(t.TgZ(0,"mat-header-cell"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"TITLE.Photography_Place")," "))}function Et(n,d){if(1&n&&(t.ynx(0),t._uU(1),t.BQk()),2&n){const a=t.oxw().$implicit;t.xp6(1),t.hij(" ",a.title," ")}}function Bt(n,d){if(1&n&&(t.TgZ(0,"mat-cell"),t.YNc(1,Et,2,1,"ng-container",51),t.qZA()),2&n){const a=d.$implicit;t.xp6(1),t.Q6J("ngIf",a.title)}}function nt(n,d){1&n&&(t.TgZ(0,"mat-header-cell"),t._uU(1," \u0634\u0646\u0627\u0633\u0647 \u0635\u062d\u0646\u0647 "),t.qZA())}function v(n,d){if(1&n&&(t.TgZ(0,"mat-cell"),t.ynx(1),t._uU(2),t.BQk(),t.qZA()),2&n){const a=d.$implicit;t.xp6(2),t.hij(" ",a.linkFileId," ")}}function Lt(n,d){1&n&&(t.TgZ(0,"mat-header-cell"),t._uU(1),t.ALo(2,"translate"),t.ALo(3,"translate"),t.qZA()),2&n&&(t.xp6(1),t.AsE(" ",t.lcZ(2,2,"TITLE.Edit")," | ",t.lcZ(3,4,"TITLE.Delete")," "))}function Ut(n,d){if(1&n){const a=t.EpF();t.TgZ(0,"mat-cell",79)(1,"small")(2,"mat-icon",80),t.NdJ("click",function(){const S=t.CHM(a).renderIndex,ft=t.oxw(2);return t.KtG(ft.onActionOptionEditView360(S))}),t._uU(3,"edit"),t.qZA()(),t._uU(4,"| "),t.TgZ(5,"small")(6,"mat-icon",81),t.NdJ("click",function(){const S=t.CHM(a).renderIndex,ft=t.oxw(2);return t.KtG(ft.onActionOptionRemoveView360(S))}),t._uU(7,"delete"),t.qZA()()()}}function Mt(n,d){1&n&&t._UZ(0,"mat-header-row")}function Gt(n,d){1&n&&t._UZ(0,"mat-row")}function c(n,d){if(1&n&&(t.TgZ(0,"div",8)(1,"mat-table",73),t.ynx(2,74),t.YNc(3,Vt,3,3,"mat-header-cell",30),t.YNc(4,Ct,2,1,"mat-cell",31),t.BQk(),t.ynx(5,75),t.YNc(6,Tt,3,3,"mat-header-cell",30),t.YNc(7,Bt,2,1,"mat-cell",31),t.BQk(),t.ynx(8,76),t.YNc(9,nt,2,0,"mat-header-cell",30),t.YNc(10,v,3,1,"mat-cell",31),t.BQk(),t.ynx(11,40),t.YNc(12,Lt,4,6,"mat-header-cell",30),t.YNc(13,Ut,8,0,"mat-cell",77),t.BQk(),t.YNc(14,Mt,1,0,"mat-header-row",78),t.YNc(15,Gt,1,0,"mat-row",42),t.qZA()()),2&n){const a=t.oxw();t.xp6(1),t.Q6J("dataSource",a.tabledataSource),t.xp6(13),t.Q6J("matHeaderRowDef",a.tabledisplayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",a.tabledisplayedColumns)}}class b{viewerGetYaw;viewerGetPitch;clickGetYaw;clickGetPitch}let l=(()=>{class n{cmsToastrService;publicHelper;translate;static nextId=0;id=++n.nextId;constructor(a,_,p){this.cmsToastrService=a,this.publicHelper=_,this.translate=p,this.fileManagerTree=this.publicHelper.GetfileManagerTreeConfig()}getGuid(){return Math.floor(1e3*Math.random())+""}scenesList=[];dataDetailModel=new V.$lU;privateDataModel;dataModelChange=new t.vpe;set dataModel(a){a||(a=new V.veq),a.defaultValue||(a.defaultValue=new V.vyA),a.scenes||(a.scenes=new Map),this.scenesList=[],Object.keys(a.scenes).map(_=>{a.scenes[_].guid=this.getGuid(),this.scenesList.push(a.scenes[_])}),this.scenesList.forEach(_=>{_.hotSpots||(_.hotSpots=[]),_.hotSpots.forEach(p=>{p.guid=this.getGuid()})}),this.privateDataModel=a,this.tabledataSource.data=this.scenesList,this.tableHotSpotdataSource.data=[]}get dataModel(){return this.privateDataModel}set dataImageModel(a){a||(a=[]),this.privateDataImageModel=a}privateDataImageModel;formInfo=new V.LEF;loading=new $.O;loadingOption=new $.O;tabledataSource=new g.by;tableHotSpotdataSource=new g.by;tabledisplayedColumns=["linkFileId","panorama","Title","Action"];tableHotspotDisplayedColumns=["type","sceneIdSelector","text","url","pitch","yaw","Action"];selectFileTypeReport=["jpeg","jpg"];fileManagerTree;appLanguage="fa";showAddView360=!1;fileManagerOpenFormReport=!1;ngOnInit(){this.translate.get("TITLE.Edit").subscribe(a=>{this.formInfo.formTitle=a})}container;viewer;options;postionView;ngAfterViewInit(){this.container.nativeElement.style.display="none"}uniqByReduce(a){const _=[];return a.forEach(p=>{!_.includes(p)&&0==_.filter(S=>S.pitch==p.pitch&&S.yaw==p.yaw).length&&_.push(p)}),_}actionPannellumImageLoad(a,_){const p={type:"equirectangular",panorama:a,autoLoad:!0,autoRotate:1.5,crossOrigin:"anonymous"};_&&_.length>0&&(p.hotSpots=this.uniqByReduce(_));const S=Object.assign({},p,this.options);this.viewer&&this.onActionPannellumDestroy(),this.viewer=pannellum.viewer(this.container.nativeElement,S),this.container.nativeElement.style.display="block"}actionPannellumTourLoadClick=!1;actionPannellumTourLoad(){this.actionPannellumTourLoadClick=!0,this.actionPrivateDataModelOptimaze();const a={};a.default=this.privateDataModel.defaultValue,this.privateDataModel&&this.privateDataModel.scenes&&(a.scenes=this.privateDataModel.scenes);const _=Object.assign({},a,this.options);this.viewer&&this.onActionPannellumDestroy(),this.viewer=pannellum.viewer(this.container.nativeElement,_),this.container.nativeElement.style.display="block"}onActionPannellumClick(a){if(!this.viewer)return;if(this.actionPannellumTourLoadClick)return void(this.actionPannellumTourLoadClick=!1);this.postionView=new b,this.postionView.viewerGetYaw=this.viewer.getYaw(),this.postionView.viewerGetPitch=this.viewer.getPitch();const _=this.viewer.mouseEventToCoords(a);!_||0==_.length||(this.postionView.clickGetYaw=_[1],this.postionView.clickGetPitch=_[0])}onActionPannellumDestroy(){this.container.nativeElement.style.display="none",this.postionView=null,this.viewer&&this.viewer.destroy()}onActionPannellumClickLastPoint(){this.postionView&&(0!=this.postionView.clickGetYaw||0!=this.postionView.clickGetPitch)&&(this.editHotspot.yaw=this.postionView.clickGetYaw,this.editHotspot.pitch=this.postionView.clickGetPitch)}onActionFileSelect(a){a&&a.id&&0!==a.id?(this.dataDetailModel.linkFileId=a.id,this.dataDetailModel.panorama=a.downloadLinksrc,this.dataDetailModel.preview=a.downloadLinksrc,this.actionPannellumImageLoad(this.dataDetailModel.panorama,[])):this.cmsToastrService.typeErrorSelectedRow()}onActionSubmitView360(){(!this.dataDetailModel.linkFileId||this.dataDetailModel.linkFileId<=0)&&this.cmsToastrService.typeErrorMessage("\u0641\u0627\u06cc\u0644 \u0627\u0646\u062a\u062e\u0627\u0628 \u0646\u0634\u062f\u0647"),this.scenesList||(this.scenesList=[]),this.selectIndex>=0?this.scenesList[this.selectIndex]=this.dataDetailModel:this.scenesList.push(this.dataDetailModel),this.actionPrivateDataModelOptimaze(),this.dataModelChange.emit(this.privateDataModel),this.showAddView360=!this.showAddView360,this.selectIndex=-1,this.onActionPannellumDestroy()}actionPrivateDataModelOptimaze(){this.privateDataModel.defaultValue||(this.privateDataModel.defaultValue=new V.vyA),this.privateDataModel.scenes=new Map,this.scenesList||(this.scenesList=[]),this.scenesList.forEach(a=>{if(a.title&&a.title.length>0){const _=[];a.hotSpots||(a.hotSpots=[]),a.hotSpots.forEach(p=>{p.type&&p.type.length>0&&_.push(p)}),a.hotSpots=this.uniqByReduce(_),this.privateDataModel.scenes[a.linkFileId]=a,this.privateDataModel.scenes[a.linkFileId].hfov=110}}),(!this.privateDataModel.defaultValue.firstScene||0==this.privateDataModel.defaultValue.firstScene.length)&&(this.privateDataModel.scenes&&this.scenesList&&this.scenesList.length>0&&(this.privateDataModel.defaultValue.firstScene=this.scenesList[0].linkFileId+""),this.privateDataModel.defaultValue.sceneFadeDuration=1e3)}onActionCancellView360(){this.showAddView360=!1,this.onActionPannellumDestroy()}onActionShowView360Add(){this.dataDetailModel=new V.$lU,this.showAddView360=!this.showAddView360,this.tableHotSpotdataSource.data=[]}inAddhotspotGuid="";onActionShowHotspotAdd(){this.dataDetailModel||(this.dataDetailModel=new V.$lU),this.dataDetailModel.hotSpots||(this.dataDetailModel.hotSpots=[]),this.editHotspot=new V.aCC;const a=new V.aCC;a.guid=this.getGuid(),this.inAddhotspotGuid=a.guid,this.dataDetailModel.hotSpots.push(a),this.tableHotSpotdataSource.data=this.uniqByReduce(this.dataDetailModel.hotSpots),this.newROw(a),this.onActionPannellumClickLastPoint()}onActionOptionRemoveView360(a){a<0||!this.scenesList||0===this.scenesList.length||(this.scenesList.splice(a,1),this.actionPrivateDataModelOptimaze(),this.dataModel=this.privateDataModel,this.dataModelChange.emit(this.privateDataModel),this.onActionPannellumDestroy())}selectIndex=-1;onActionOptionEditView360(a){a<0||!this.scenesList||0===this.scenesList.length||(this.dataDetailModel=this.scenesList[a],this.dataDetailModel.hotSpots||(this.dataDetailModel.hotSpots=[]),this.actionPannellumImageLoad(this.dataDetailModel.panorama,this.dataDetailModel.hotSpots),this.oldHotspot=new V.aCC,this.editHotspot=new V.aCC,this.tableHotSpotdataSource.data=this.uniqByReduce(this.dataDetailModel.hotSpots),this.selectIndex=a,this.showAddView360=!this.showAddView360)}editHotspot;oldHotspot;editdisabled;newROw(a){this.editHotspot=a&&a.guid?a:new V.aCC,this.oldHotspot={...this.editHotspot}}editROw(a){this.editHotspot=a&&a.guid?a:new V.aCC,this.oldHotspot={...this.editHotspot},this.inAddhotspotGuid=""}removeROw(a){const _=this.dataDetailModel.hotSpots.findIndex(p=>p.guid==a.guid);_>=0&&(this.dataDetailModel.hotSpots.splice(_,1),this.tableHotSpotdataSource.data=this.uniqByReduce(this.dataDetailModel.hotSpots))}updateEdit(){this.inAddhotspotGuid="",this.editdisabled=!0;const a=this.dataDetailModel.hotSpots.findIndex(_=>_.guid==this.oldHotspot.guid);a>=0&&(this.dataDetailModel.hotSpots[a]=this.editHotspot),this.editdisabled=!1,this.oldHotspot=new V.aCC,this.editHotspot=new V.aCC}cancelEdit(){this.inAddhotspotGuid?.length>0&&(this.dataDetailModel.hotSpots=this.dataDetailModel.hotSpots.filter(a=>a.guid!=this.inAddhotspotGuid)),this.editHotspot=new V.aCC,this.oldHotspot&&this.oldHotspot.guid&&(this.dataDetailModel.hotSpots||(this.dataDetailModel.hotSpots=[]),this.tableHotSpotdataSource.data=this.uniqByReduce(this.dataDetailModel.hotSpots))}onActionImportFile360View(){this.privateDataImageModel&&this.privateDataImageModel.length>0&&(this.actionPrivateDataModelOptimaze(),this.privateDataImageModel.forEach(a=>{if(!this.privateDataModel.scenes[a.linkFileId]&&a.linkFileId>0){const _=new V.$lU;_.guid=this.getGuid(),_.linkFileId=a.linkFileId,_.title=a.title,_.hotSpots=this.uniqByReduce(a.hotSpots),_.panorama=a.panorama,_.preview=a.preview,_.hfov=110,this.privateDataModel.scenes[a.linkFileId]=_}}),this.dataModel=this.privateDataModel)}static \u0275fac=function(_){return new(_||n)(t.Y36(bt.e),t.Y36(D.i),t.Y36(m.sK))};static \u0275cmp=t.Xpm({type:n,selectors:[["app-cms-360-tour-list"]],viewQuery:function(_,p){if(1&_&&t.Gf(at,5),2&_){let S;t.iGM(S=t.CRH())&&(p.container=S.first)}},inputs:{dataModel:"dataModel",dataImageModel:"dataImageModel"},outputs:{dataModelChange:"dataModelChange"},decls:8,vars:7,consts:[["type","button","class","btn font-13 font-600 btn-s m-1 rounded-s shadow-xl border-0 gradient-highlight",3,"click",4,"ngIf"],["type","button","class","btn font-13 font-600 btn-s m-1 rounded-s shadow-xl border-0 gradient-highlight","style","margin: 10px ",3,"click",4,"ngIf"],[1,"container",2,"height","380px","width","100%","direction","ltr",3,"id","click"],["container",""],["class","example-container mat-elevation-z8",4,"ngIf"],[3,"options"],["type","button",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-highlight",3,"click"],["type","button",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-highlight",2,"margin","10px",3,"click"],[1,"example-container","mat-elevation-z8"],[1,"m-2"],[1,"input-style","has-borders","no-icon","input-style-always-active","validate-field","mb-4"],["for","dataDetailModel.title",1,"color-highlight"],["type","text","name","dataDetailModel.title","id","dataDetailModel.title","minlength","3","maxlength","100","required","",1,"form-control","validate-name",3,"ngModel","placeholder","ngModelChange"],["Title",""],["matSuffix","","class","pointer","matSuffix","","mat-icon-button","","aria-label","Clear",3,"click",4,"ngIf"],["matSuffix","",1,"pointer"],["type","text","name","dataDetailModel.linkFileId",1,"form-control","validate-name",3,"ngModel","placeholder","ngModelChange","click"],["LinkFileId",""],["matSuffix","","matSuffix","","mat-icon-button","","aria-label","Clear",3,"click",4,"ngIf"],["matSuffix","",3,"click"],[3,"language","isPopup","openForm","tree","openDirectUploadView","openFilemanagerButtonLabelKey","selectFileType","openFilemanagerButtonView","itemSelected","openFormChange"],["target","_blank",3,"href"],["style","vertical-align:middle;","class","ntk-hover-zoom","aria-hidden","","height","50","width","50",3,"src",4,"ngIf"],["class","grid-row-ltr-center",4,"ngIf"],[2,"background-color","bisque","padding","5px"],[1,"form-actions",2,"direction","ltr"],["type","button","class","btn font-13 font-600 btn-s m-1 rounded-s shadow-xl border-0 gradient-teal",3,"click",4,"ngIf"],["matSort","",3,"dataSource"],["table",""],["matColumnDef","type"],[4,"matHeaderCellDef"],[4,"matCellDef"],["matColumnDef","sceneId"],["matColumnDef","sceneIdSelector"],["matColumnDef","pitch"],["matColumnDef","yaw"],["matColumnDef","targetYaw"],["matColumnDef","targetPitch"],["matColumnDef","text"],["matColumnDef","url"],["matColumnDef","Action"],[4,"matHeaderRowDef","matHeaderRowDefSticky"],[4,"matRowDef","matRowDefColumns"],[1,"fa","fa-check-square-o"],["type","button",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-gray",3,"click"],[1,"ft-x"],["matSuffix","","matSuffix","","mat-icon-button","","aria-label","Clear",1,"pointer",3,"click"],["matSuffix","","matSuffix","","mat-icon-button","","aria-label","Clear",3,"click"],["aria-hidden","","height","50","width","50",1,"ntk-hover-zoom",2,"vertical-align","middle",3,"src"],[1,"grid-row-ltr-center"],["type","button",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-teal",3,"click"],[4,"ngIf"],[1,"text-truncate","grid-row-ltr-center"],["placeholder","Select","name","type",1,"form-control","validate-name",3,"disabled","ngModel","ngModelChange"],[3,"value"],[1,"text-truncate"],["type","text","placeholder","sceneId","name","sceneId",1,"form-control","validate-name",2,"direction","ltr","text-align","left",3,"disabled","ngModel","ngModelChange"],["placeholder","Select","name","sceneId",1,"form-control","validate-name",3,"disabled","ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["type","number","placeholder","pitch","name","pitch",1,"form-control","validate-name",2,"direction","ltr","text-align","left",3,"disabled","ngModel","ngModelChange"],["type","number","placeholder","yaw","name","yaw",1,"form-control","validate-name",2,"direction","ltr","text-align","left",3,"disabled","ngModel","ngModelChange"],["type","text","placeholder","targetYaw","name","targetYaw",1,"form-control","validate-name",2,"direction","ltr","text-align","left",3,"disabled","ngModel","ngModelChange"],["type","text","placeholder","targetPitch","name","targetPitch",1,"form-control","validate-name",2,"direction","ltr","text-align","left",3,"disabled","ngModel","ngModelChange"],["type","text","placeholder","text","name","text",1,"form-control","validate-name",2,"direction","ltr","text-align","left",3,"disabled","ngModel","ngModelChange"],[1,"text-truncate","grid-row-ltr"],["type","text","placeholder","url","name","url",1,"form-control","validate-name",2,"direction","ltr","text-align","left",3,"disabled","ngModel","ngModelChange"],[1,"m-1",2,"text-align","center"],[3,"click"],["type","button","class","btn font-13 font-600 btn-s m-1 rounded-s shadow-xl border-0 gradient-teal","class","mb-2",3,"disabled","click",4,"ngIf"],["type","button",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-gray",3,"disabled","click"],["type","button","class","btn font-13 font-600 btn-s m-1 rounded-s shadow-xl border-0 gradient-green","matTooltip","\u062b\u0628\u062a \u0622\u062e\u0631\u06cc\u0646 \u0646\u0642\u0637\u0647 \u06a9\u0644\u06cc\u06a9 \u0634\u062f\u0647",3,"disabled","click",4,"ngIf"],["type","button",1,"mb-2",3,"disabled","click"],["type","button","matTooltip","\u062b\u0628\u062a \u0622\u062e\u0631\u06cc\u0646 \u0646\u0642\u0637\u0647 \u06a9\u0644\u06cc\u06a9 \u0634\u062f\u0647",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-green",3,"disabled","click"],["multiTemplateDataRows","",3,"dataSource"],["matColumnDef","panorama"],["matColumnDef","Title"],["matColumnDef","linkFileId"],["class","Action",4,"matCellDef"],[4,"matHeaderRowDef"],[1,"Action"],["matTooltipPosition","before","aria-hidden","false",2,"color","blue","cursor","pointer",3,"click"],["matTooltipPosition","before","aria-hidden","false",2,"color","red","cursor","pointer",3,"click"]],template:function(_,p){1&_&&(t.YNc(0,U,3,3,"button",0),t.YNc(1,kt,2,0,"button",1),t.YNc(2,wt,2,0,"button",1),t.TgZ(3,"div",2,3),t.NdJ("click",function(ft){return p.onActionPannellumClick(ft)}),t.qZA(),t.YNc(5,Kt,80,40,"div",4),t._UZ(6,"app-progress-spinner",5),t.YNc(7,c,16,3,"div",4)),2&_&&(t.Q6J("ngIf",!p.showAddView360),t.xp6(1),t.Q6J("ngIf",p.privateDataImageModel&&p.privateDataImageModel.length>0),t.xp6(1),t.Q6J("ngIf",p.privateDataModel&&p.privateDataModel&&p.privateDataModel.scenes&&p.scenesList&&p.scenesList.length>0),t.xp6(1),t.Q6J("id",p.id),t.xp6(2),t.Q6J("ngIf",p.showAddView360),t.xp6(1),t.Q6J("options",p.loadingOption),t.xp6(1),t.Q6J("ngIf",!p.showAddView360))},dependencies:[i.sg,i.O5,rt.Fj,rt.wV,rt.JJ,rt.Q7,rt.wO,rt.nD,rt.On,vt.ey,H.hX,H.R9,R.Hw,gt.gD,ct.YE,g.BZ,g.fO,g.as,g.w1,g.Dz,g.nj,g.ge,g.ev,g.XQ,g.Gk,yt.gM,oe.HG,Ht.O,m.X$,x.v],encapsulation:2})}return n})()},6609:(pt,E,h)=>{"use strict";h.d(E,{D:()=>wt});var t=h(8239),g=h(4537),K=h(92),et=h(4511),e=h(7445),j=h(1927),V=h(3151),$=h(2147),bt=h(1528),D=h(7969),m=h(656),i=h(6707),rt=h(8692),vt=h(1637),H=h(1379),R=h(8659),gt=h(3331),ct=h(9665),yt=h(5738),oe=h(1418);function Ht(mt,Pt){if(1&mt&&(g.TgZ(0,"label",8),g._uU(1),g.qZA()),2&mt){const M=g.oxw();g.MGl("for","app-cms-site-selector-",M.id,""),g.xp6(1),g.Oqu(M.optionLabel)}}function x(mt,Pt){if(1&mt&&(g._UZ(0,"img",11),g.ALo(1,"cmsthumbnail")),2&mt){const M=g.oxw().$implicit;g.s9C("src",g.lcZ(1,1,M.linkImageIdSrc),g.LSH)}}function at(mt,Pt){if(1&mt&&(g.TgZ(0,"mat-option",9),g.YNc(1,x,2,3,"img",10),g.TgZ(2,"span"),g._uU(3),g.qZA()()),2&mt){const M=Pt.$implicit,Y=g.oxw();g.Q6J("value",M)("disabled",Y.optionDisabled),g.xp6(1),g.Q6J("ngIf",M.linkImageIdSrc),g.xp6(2),g.Oqu(Y.displayOption(M))}}function U(mt,Pt){if(1&mt){const M=g.EpF();g.TgZ(0,"mat-icon",12),g.NdJ("click",function(){g.CHM(M);const lt=g.oxw();return g.KtG(lt.onActionSelectClear())}),g._uU(1,"close"),g.qZA()}}const kt=["*"];let wt=(()=>{class mt{coreEnumService;translate;cdr;categoryService;static nextId=0;id=++mt.nextId;constructor(M,Y,lt,dt){this.coreEnumService=M,this.translate=Y,this.cdr=lt,this.categoryService=dt,this.loading.cdr=this.cdr,this.translate.get("MESSAGE.Receiving_information").subscribe(X=>{this.loading.message=X})}dataModelResult=new et.y$4;dataModelSelect=new et.Dp$;formControl=new K.NI;filteredOptions;optionDisabled=!1;optionSelectFirstItem=!1;optionPlaceholder="";optionLabel="";optionChange=new g.vpe;optionReload=()=>this.onActionReload();set optionSelectForce(M){this.onActionSelectForce(M)}loading=new m.O;get optionLoading(){return this.loading}set optionLoading(M){this.loading=M}ngOnInit(){this.loadOptions(),(!this.optionLabel||0==this.optionLabel.length&&this.optionPlaceholder?.length>0)&&(this.optionLabel=this.optionPlaceholder)}loadOptions(){this.filteredOptions=this.formControl.valueChanges.pipe((0,j.O)(""),(0,V.b)(1500),(0,$.x)(),(0,bt.w)(M=>this.DataGetAll("string"==typeof M||"number"==typeof M?M:"")))}displayFn(M){return M&&M.virtual_Parent&&M.virtual_Parent.title.length>0&&M.virtual_Parent.virtual_Parent&&M.virtual_Parent.virtual_Parent.title.length>0&&M.virtual_Parent.virtual_Parent.virtual_Parent&&M.virtual_Parent.virtual_Parent.virtual_Parent.title.length>0?M.virtual_Parent.virtual_Parent.virtual_Parent.titleML+" > "+M.virtual_Parent.virtual_Parent.titleML+" > "+M.virtual_Parent.titleML+" > "+M.titleML:M&&M.virtual_Parent&&M.virtual_Parent.title.length>0&&M.virtual_Parent.virtual_Parent&&M.virtual_Parent.virtual_Parent.title.length>0?M.virtual_Parent.virtual_Parent.titleML+" > "+M.virtual_Parent.titleML+" > "+M.titleML:M&&M.virtual_Parent&&M.virtual_Parent.title.length>0?M.virtual_Parent.titleML+" > "+M.titleML:M?M.titleML:void 0}displayOption(M){return M&&M.virtual_Parent&&M.virtual_Parent.title.length>0&&M.virtual_Parent.virtual_Parent&&M.virtual_Parent.virtual_Parent.title.length>0&&M.virtual_Parent.virtual_Parent.virtual_Parent&&M.virtual_Parent.virtual_Parent.virtual_Parent.title.length>0?M.virtual_Parent.virtual_Parent.virtual_Parent.titleML+" > "+M.virtual_Parent.virtual_Parent.titleML+" > "+M.virtual_Parent.titleML+" > "+M.titleML:M&&M.virtual_Parent&&M.virtual_Parent.title.length>0&&M.virtual_Parent.virtual_Parent&&M.virtual_Parent.virtual_Parent.title.length>0?M.virtual_Parent.virtual_Parent.titleML+" > "+M.virtual_Parent.titleML+" > "+M.titleML:M&&M.virtual_Parent&&M.virtual_Parent.title.length>0?M.virtual_Parent.titleML+" > "+M.titleML:M?M.titleML:void 0}DataGetAll(M){var Y=this;return(0,t.Z)(function*(){const lt=new et.Hay;if(lt.rowPerPage=20,lt.accessLoad=!0,M&&M.length>0){let X=new et.AO3;X=new et.AO3,X.propertyName="Symbol",X.value=M,X.searchType=et.J6G.Contains,X.clauseType=et.ppe.Or,lt.filters.push(X),X=new et.AO3,X.propertyName="Title",X.value=M,X.searchType=et.J6G.Contains,X.clauseType=et.ppe.Or,lt.filters.push(X),M&&"number"==typeof+M&&+M>0&&(X=new et.AO3,X.propertyName="Id",X.value=M,X.searchType=et.J6G.Equal,X.clauseType=et.ppe.Or,lt.filters.push(X))}const dt=Y.constructor.name+"main";return Y.loading.Start(dt),yield(0,e.z)(Y.categoryService.ServiceGetAll(lt)).then(X=>(Y.dataModelResult=X,Y.optionSelectFirstItem&&(!Y.dataModelSelect||!Y.dataModelSelect.id||Y.dataModelSelect.id<=0)&&Y.dataModelResult.listItems.length>0&&(Y.optionSelectFirstItem=!1,setTimeout(()=>{Y.formControl.setValue(Y.dataModelResult.listItems[0])},1e3),Y.onActionSelect(Y.dataModelResult.listItems[0])),Y.loading.Stop(dt),X.listItems))})()}onActionSelect(M){this.optionDisabled||(this.dataModelSelect=M,this.optionChange.emit(this.dataModelSelect))}onActionSelectClear(){this.optionDisabled||(this.dataModelSelect=null,this.formControl.setValue(null),this.optionChange.emit(null))}push(M){return this.filteredOptions.pipe((0,D.U)(Y=>(Y.find(lt=>lt.id===M.id)||Y.push(M),Y)))}onActionSelectForce(M){if("number"==typeof M&&M>0){if(this.dataModelSelect&&this.dataModelSelect.id===M)return;if(this.dataModelResult&&this.dataModelResult.listItems&&this.dataModelResult.listItems.find(Y=>Y.id===M)){const Y=this.dataModelResult.listItems.find(lt=>lt.id===M);return this.dataModelSelect=Y,void this.formControl.setValue(Y)}this.categoryService.ServiceGetOneIncludeParent(M).subscribe(Y=>{Y.isSuccess&&(this.filteredOptions=this.push(Y.item),this.dataModelSelect=Y.item,this.formControl.setValue(Y.item),this.optionChange.emit(Y.item))})}else{if(typeof M==typeof et.Dp$)return this.filteredOptions=this.push(M),this.dataModelSelect=M,void this.formControl.setValue(M);this.formControl.setValue(null)}}onActionReload(){this.dataModelSelect=new et.Dp$,this.loadOptions()}static \u0275fac=function(Y){return new(Y||mt)(g.Y36(et.FLW),g.Y36(i.sK),g.Y36(g.sBO),g.Y36(et.XRW))};static \u0275cmp=g.Xpm({type:mt,selectors:[["app-cms-location-selector"]],inputs:{optionDisabled:"optionDisabled",optionSelectFirstItem:"optionSelectFirstItem",optionPlaceholder:"optionPlaceholder",optionLabel:"optionLabel",optionReload:"optionReload",optionSelectForce:"optionSelectForce",optionLoading:"optionLoading"},outputs:{optionChange:"optionChange"},ngContentSelectors:kt,decls:10,vars:12,consts:[[1,"input-style","has-borders","no-icon","input-style-always-active","validate-field","mb-4"],[3,"options"],["class","color-highlight",3,"for",4,"ngIf"],["type","text","matInput","",1,"form-control","validate-name",3,"placeholder","formControl","matAutocomplete","id"],[3,"displayWith","optionSelected"],["matauto","matAutocomplete"],[3,"value","disabled",4,"ngFor","ngForOf"],["matSuffix","","matSuffix","","mat-icon-button","","aria-label","Clear",3,"click",4,"ngIf"],[1,"color-highlight",3,"for"],[3,"value","disabled"],["style","vertical-align:middle;","class","ntk-hover-zoom","aria-hidden","","height","25","width","25",3,"src",4,"ngIf"],["aria-hidden","","height","25","width","25",1,"ntk-hover-zoom",2,"vertical-align","middle",3,"src"],["matSuffix","","matSuffix","","mat-icon-button","","aria-label","Clear",3,"click"]],template:function(Y,lt){if(1&Y&&(g.F$t(),g.TgZ(0,"div",0),g._UZ(1,"app-progress-spinner",1),g.YNc(2,Ht,2,2,"label",2),g._UZ(3,"input",3),g.TgZ(4,"mat-autocomplete",4,5),g.NdJ("optionSelected",function(X){return lt.onActionSelect(X.option.value)}),g.YNc(6,at,4,4,"mat-option",6),g.ALo(7,"async"),g.qZA(),g.YNc(8,U,2,0,"mat-icon",7),g.Hsn(9),g.qZA()),2&Y){const dt=g.MAs(5);g.xp6(1),g.Q6J("options",lt.loading),g.xp6(1),g.Q6J("ngIf",(null==lt.optionLabel?null:lt.optionLabel.length)>0),g.xp6(1),g.s9C("placeholder",lt.optionPlaceholder),g.MGl("id","app-cms-site-selector-",lt.id,""),g.Q6J("formControl",lt.formControl)("matAutocomplete",dt),g.uIk("disabled",!!lt.optionDisabled||null),g.xp6(1),g.Q6J("displayWith",lt.displayFn),g.xp6(2),g.Q6J("ngForOf",g.lcZ(7,10,lt.filteredOptions)),g.xp6(2),g.Q6J("ngIf",null==lt.dataModelSelect?null:lt.dataModelSelect.id)}},dependencies:[rt.sg,rt.O5,K.Fj,K.JJ,K.oH,vt.XC,H.ey,vt.ZL,R.R9,gt.Hw,ct.Nt,yt.O,rt.Ov,oe.v],encapsulation:2})}return mt})()},7407:(pt,E,h)=>{"use strict";h.d(E,{r:()=>V});var t=h(4537),g=h(4216),et=h(2340),e=h(2607),j=h(7128);let V=(()=>{class ${cmsToastrService;static nextId=0;id=++$.nextId;map$=new t.vpe;zoom$=new t.vpe;options={layers:[(0,g.tileLayer)(et.N.leafletUrl,{opacity:.7,maxZoom:19,detectRetina:!0})],zoom:16,center:[32.684985,51.6359425]};set optonCenter(D){this.map&&D&&D.lat&&D.lon&&0!==D.lat&&0!==D.lon&&this.map.setView(new g.LatLng(D.lat,D.lon),this.zoom)}set optionCurrentPoint(D){this.onActionCurrentPoint(D)}map;zoom;destroy=!1;constructor(D){this.cmsToastrService=D}ngOnInit(){const rt=g.icon({iconRetinaUrl:"assets/leaflet/marker-icon-2x.png",iconUrl:"assets/leaflet/marker-icon.png",shadowUrl:"assets/leaflet/marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]});g.Marker.prototype.options.icon=rt}ngAfterViewInit(){}ngOnDestroy(){this.map&&(this.map.clearAllEventListeners(),this.destroy=!0)}onMapReady(D){setTimeout(()=>{this.map&&!this.destroy&&D.invalidateSize()},500),this.map=D,this.map$.emit(D),this.zoom=D.getZoom(),this.zoom$.emit(this.zoom)}onMapZoomEnd(D){this.zoom=D.target.getZoom(),this.zoom$.emit(this.zoom)}onActionCurrentPoint(D=!0){this.getPosition().then(m=>{this.map.setView(new g.LatLng(m.lat,m.lon),this.zoom)})}getPosition(){return new Promise((D,m)=>{navigator.geolocation.getCurrentPosition(i=>{D({lon:i.coords.longitude,lat:i.coords.latitude})},i=>{this.cmsToastrService.typeErrorGetPosition()})})}static \u0275fac=function(m){return new(m||$)(t.Y36(e.e))};static \u0275cmp=t.Xpm({type:$,selectors:[["app-cms-map"]],inputs:{options:"options",optonCenter:"optonCenter",optionCurrentPoint:"optionCurrentPoint"},outputs:{map$:"map$",zoom$:"zoom$"},decls:1,vars:1,consts:[["leaflet","",1,"map-container",3,"leafletOptions","leafletMapReady","leafletMapZoomEnd"]],template:function(m,i){1&m&&(t.TgZ(0,"div",0),t.NdJ("leafletMapReady",function(vt){return i.onMapReady(vt)})("leafletMapZoomEnd",function(vt){return i.onMapZoomEnd(vt)}),t.qZA()),2&m&&t.Q6J("leafletOptions",i.options)},dependencies:[j.je],styles:[".map-container[_ngcontent-%COMP%]{width:100%;height:300px}"]})}return $})()}}]);